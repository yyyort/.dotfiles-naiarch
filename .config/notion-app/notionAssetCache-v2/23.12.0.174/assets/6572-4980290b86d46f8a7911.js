"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6572],{76463:(e,t,n)=>{n.d(t,{lz:()=>O,P0:()=>j,Yw:()=>V,VG:()=>H,v2:()=>J,RN:()=>Y,jX:()=>K,k2:()=>X});var o=n(5366),i=n(26825),s=n(27006),a=n(45953),r=n(21202),c=n(77420),d=n(90468),l=n(19889),u=n(97880),g=n(47307),p=n(33929),h=n(67669),m=n(39098),f=n(54642),v=n(92625),y=n(76464),S=n(9953),b=n(64964),w=n(29974),I=n(12359),A=n(761);const C=n(85).fHr,k=n(85).Y7T,Z=n(85).TLr,P=n(85).qJ8,M=n(85).y3i,_=n(85).Drs,T=n(85).JJj,B=n(85).J7v,x=n(85).e3f,F=n(85).i3J,N=n(85).LCr,E=n(85).J$i,D=n(85).wgE,L=n(85).o8I,R=n(85).LFy,W=n(85).Wku,U=n(85).Wqi,G=n(85).nx5,z=(0,o.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",[G]:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",[G]:"Failed to duplicate template for to your workspace"}});function q(e,t){const{[D]:n,[U]:o,spaceRole:i}=t,s=function(e){const{name:t,[U]:n,userId:o,icon:i,type:s}=e,a=Date.now(),r={name:t,created_at:a,created_by_table:l.KJ,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:l.KJ};switch(s){case"guest":return{...r,type:"guest",[W]:e[W],[R]:d.bx,[L]:n.id,integration_id:void 0};case"scim":return{...r,type:"scim",[R]:l.KJ,[L]:o};default:(0,u.unreachable)(s)}}(t),a=S.createRecord({[D]:n,table:c.cZ,value:s,[E]:n.defaultRecordCache[E],[N]:e});return y[F]({[D]:n,store:o,[x]:[{type:B,role:i,bot_id:a.id}],[N]:e}),{botStore:a}}function O(e){const{[D]:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=I[T]({[_]:"botActions.createSpaceBot",[D]:t,perform:t=>q(t,e)});return{botStore:o,transactionPromise:n}}async function j(e){const{[D]:t,botId:n,onSuccess:o}=e,i=await f.deleteBot(t,{botId:n});"failed"===i.type?g.showError(i):"success"===i.type&&o&&(await A[M]({[D]:t}),o())}async function V(e){const{[D]:t,table:n,id:o,type:i}=e,s=await f.getBots(t,{table:n,id:o,type:i});if("failed"===s.type)throw g.showError(s),s;return{botIds:s.data.botIds,recordMap:s.data.recordMap}}async function H(e){const{[D]:t,botId:n}=e,o=await f.getBotToken(t,{botId:n});if("failed"!==o.type)return o.data.token;g.showError(o)}function J(e){const{botValue:t,store:n,[D]:o}=e,{id:s,[L]:a,[R]:r,[W]:c}=t,d=(0,i.getCumulativeBotBlockRoleFromCapabilities)(c),l={type:B,bot_id:s,[L]:a,[R]:r,role:d};I[T]({[_]:"TopbarMoreButton.handleAddingConnection",[D]:o,perform:e=>{y[F]({[D]:o,store:n,[x]:[l],[N]:e})}})}function Y(e){const{botId:t,store:n,[D]:o}=e,i=n.getPermissionItems().filter((0,u.makeTypeGuard)((e=>(0,s.isBotPermission)(e)?{true:e}:{false:e})));for(const s of i)if(s.bot_id===t){const e={...s,role:"none"};I[T]({[_]:"TopbarMoreButton.handleRemovingConnection",[D]:o,perform:t=>{y[F]({[D]:o,store:n,[x]:[e],[N]:t})}})}}function K(e){const{[P]:t,[D]:n,pages:o,botStore:i,addPermission:s}=e;if(!t)return;const a=(0,h.getBotPermissionItem)({botStore:i,addPermission:s});o.forEach((e=>{const o=m.t1[Z](t,{table:r.iU,id:e});I[T]({[_]:"botActions.updateBlockPermissionsForBot",[D]:n,perform:e=>{y[F]({[D]:n,store:o,[x]:[a],[N]:e})}})}))}async function X(e){const{[D]:t,[U]:n,[k]:o,templatePageId:i,botValue:s,pages:r}=e;if(!n)return;const d=m.t1[Z](n,{table:c.cZ,id:s.id});if(i)return await async function(e){const{[D]:t,[U]:n,[k]:o,templatePageId:i,botStore:s}=e;if(!n||!o)return;try{v.display({message:z.duplicatingTemplate});const e=await f.loadBlockSubtree(t,{block:{id:i,spaceId:n.id},shallow:!1});if("failed"===e.type)return;const r=a.PF.create(e.data.subtreeRecordMap),{performResult:c}=I[T]({[_]:"botActions.duplicateTemplateAndShareWithBot",[D]:t,perform:e=>{const a=w.createAndDuplicatePageInSpace({[D]:t,recordMap:r,copyPageId:i,isPrivate:!0,[U]:n,[k]:o,[N]:e,[C]:!1}),c=o.getPrivatePageIds();c.length>0&&S.updateValue({store:o,data:{private_pages:[a.id,...c]},[N]:e});const d=(0,h.getBotPermissionItem)({botStore:s,addPermission:!0});return y[F]({[D]:t,store:a,[x]:[d],[N]:e}),a}});return c}catch(r){b.oV({label:p.default.formatMessage(z.duplicatingTemplateError)})}finally{v.close()}}({[D]:t,templatePageId:i,botStore:d,[U]:n,[k]:o});K({[D]:t,[P]:n,botStore:d,pages:r,addPermission:!0})}},22711:(e,t,n)=>{n.r(t),n.d(t,{getConnectedAppsStatus:()=>c,handleRemoveTrello:()=>d,handleRemoveAsana:()=>l,handleRemoveEvernote:()=>u,handleRemoveConfluence:()=>g,handleRemoveMonday:()=>p});var o=n(50906),i=n(54642);const s=n(85).Lyh,a=n(85)._37,r=n(85).kWi;async function c(e,t){const n=await i[r](e,{spaceId:t});if("failed"===n.type){const e=n.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return n.data}async function d(e,t){await i.disconnectTrello(e,{}),await t.refresh(),o[a](e,{[s]:"trello"})}async function l(e,t){await i.disconnectAsana(e,{}),await t.refresh(),o[a](e,{[s]:"asana"})}async function u(e,t){await i.disconnectEvernote(e,{}),await t.refresh(),o[a](e,{[s]:"evernote"})}async function g(e,t,n){await i.disconnectConfluence(e,{spaceId:n}),await t.refresh()}async function p(e,t,n){await i.disconnectMonday(e,{spaceId:n}),await t.refresh()}},83805:(e,t,n)=>{n.d(t,{e:()=>_,B:()=>T});var o=n(51859),i=n(64002),s=n(5366),a=n(50906),r=n(47307),c=n(95477),d=n(68821),l=n(91924),u=n(53833),g=n(90365),p=n(47593),h=n(67940),m=n(92083),f=n(54642),v=n(92625),y=n(15356);const S=n(85).Wp_,b=n(85).XXx,w=n(85).Hmd,I=n(85).gNv,A=n(85).g65,C=n(85).kBp,k=n(85).wgE,Z=n(85).IV6,P=n(85).nx5,M=(0,s.defineMessages)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",[P]:"Authenticating with Evernote…"},[Z]:{[P]:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function _(e){const{[k]:t,[C]:n}=e,s=(0,l.eC)(t);let u=(0,o.Qp)(c.default.domainBaseUrl,{authType:s,userId:t[A].id});u=s.redirectToAuth?u:await(0,l.HU)(t,u);const P=await y.M(t,{width:580,height:700,url:u,[Z]:M[Z]});if(!P)return;const _=i.parse(P),B=_.query.oauth_token,x=_.query.oauth_verifier;if(!B||!x)return;v.display({message:M.authenticatingWithEvernote});const F=await f.authWithEvernote(t,{requestToken:B,verifier:x}),N=h.Z.getOrCreateFlowId();if("failed"===F.type)return a[I](t,{[w]:b,data:{import_type:"api",status:"failure",error:F.error,userId:t[A].id},flowId:N}),console.error(F.error),r.showError(F),void v.close();a[I](t,{[w]:b,data:{import_type:"api",status:"success",userId:t[A].id},flowId:N}),a.trackAuthIntegration(t,{integration_name:b}),await n.refresh(),g.Z[S]({open:!0}),(0,d.c)()?m.Z[S]({...m.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}):p.Z[S]({open:!0}),await T({[k]:t,[C]:n}),v.close()}async function T(e){const{[k]:t,[C]:n}=e;try{u.Z[S]({...u.Z.state,isFetchingNotebooks:!0,showLoader:!0});const e=await f.getEvernoteNotebooks(t,{});if(await n.refresh(),"success"===e.type){u.Z[S]({...u.Z.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:n}=e.data;return{userInfo:t,notebooks:n}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(o){return console.error(o),{notebooks:[],userInfo:void 0}}}},52192:(e,t,n)=>{n.d(t,{M:()=>A,u:()=>C});var o=n(51859),i=n(64002),s=n(5366),a=n(50906),r=n(47307),c=n(95477),d=n(68821),l=n(91924),u=n(47593),g=n(82066),p=n(92083),h=n(81676),m=n(54642),f=n(84908),v=n(92625),y=n(15356);const S=n(85).Wp_,b=n(85).IV6,w=n(85).nx5,I=(0,s.defineMessages)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",[w]:"Authenticating with Trello…"},[b]:{[w]:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function A(e){const{environment:t,requestStore:n}=e,s=(0,l.eC)(t);let h=(0,o.ae)(c.default.domainBaseUrl,{authType:s,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(h=s.redirectToAuth?h:await(0,l.HU)(t,h),t.device.isElectron)return void f.openExternalUrl(h);const w=await y.M(t,{width:580,height:700,url:h,[b]:I[b]});if(!w)return;const A=i.parse(w),k=A.query.oauth_token,Z=A.query.oauth_verifier;if(!k||!Z)return;v.display({message:I.authenticatingWithTrello});const P=await m.authWithTrello(t,{requestToken:k,verifier:Z});"failed"===P.type?(console.error(P.error),r.showError(P),v.close()):(a.trackAuthIntegration(t,{integration_name:"trello"}),await n.refresh(),g.Z[S]({open:!0}),(0,d.c)()?p.Z[S]({...p.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}):u.Z[S]({open:!0}),await C(t,n),v.close())}async function C(e,t){h.Z[S]({...h.Z.state,isFetchingBoards:!0,showLoader:!0});const n=await m.getTrelloBoards(e,{});return await t.refresh(),"success"===n.type?(h.Z[S]({...h.Z.state,boardsResponse:n.data,isFetchingBoards:!1,showLoader:!1}),n.data):(console.error(n.error),{boards:[]})}},11106:(e,t,n)=>{n.d(t,{Z:()=>Ue});var o=n(77094),i=n.n(o),s=n(97464),a=n.n(s),r=n(67294),c=n(83355),d=n(480),l=n(81954),u=n(49085),g=n(8848),p=n(3909),h=n(27006),m=n(21202),f=n(29369),v=n(5366),y=n(94507),S=n(65452),b=n(28020),w=n(98165),I=n(38755),A=n(79315),C=n(39098),k=n(2834),Z=n(52275),P=n(12508),M=n(31278),_=n(76798),T=n(14694);const B=n(85).Hco,x=n(85).Dg8,F=n(85).XNW,N=n(85).P0R;class E extends k.Z{renderComponent(){const{nestingLevel:e}=this[N];return r.createElement(Z.Z,a()({},this[N],{title:i()(T.Z,{childrenStyle:E.sidebarChildrenStyle,left:this.renderLeftCheckbox(),icon:this.renderIcon(),style:{[F]:8*e}},void 0,this[x]())}))}renderLeftCheckbox(){return i()(P.Z,{size:16,checked:this[N].isChecked,onClick:this[N].onClick})}renderIcon(){const{store:e,isMobile:t}=this[N],n=e.getIcon();return i()(M.Z,{disabled:!0,icon:n,title:void 0,isEmptyPage:e.isEmptyPage(),size:t?24:20,pageIconStyle:{fill:this.theme[B]}})}[x](){return i()(_.Z,{store:this[N].store})}}E.sidebarChildrenStyle={display:"flex",alignItems:"center"};const D=E;var L=n(68894),R=n(68785),W=n(32163),U=n(44532),G=n(72495),z=n(59054),q=n(97880),O=n(31299),j=n(87279),V=n(78140),H=n(43765),J=n(11470),Y=n(78948);const K=n(85).G_Z,X=n(85).d73,$=n(85).v2u,Q=n(85).jtM,ee=n(85).wgE,te=n(85).D7I,ne=n(85).Ttb,oe=n(85).nx5;function ie(e){window.__c={n:"OauthPageSearchResults"};const{spaceId:t,onSelectPage:n,query:o,source:s,findSelectedBlockAncestorId:c}=e,l=(0,d.O7)();let u=null;const[{status:g,value:p}]=(0,z.r5)((async()=>await O.searchPagesInSpace({[ee]:l,query:o,limit:10,[$]:!0,spaceId:t,excludeTemplates:!0,source:s,[X]:!1})),[l,o,t,s],{debounce:O[K]});if("idle"===g||"pending"===g)u=i()(G.Z,{},void 0,i()(Y.Z,{}));else{const e=((null==p?void 0:p[ne])||[]).map((e=>{let{id:t}=e;const o=new C.G(l,{table:m.iU,id:t});return function(e){const{store:t,[ee]:n,alreadySelectedAncestorId:o,onSelectPage:s}=e;if(o&&o===t.id)return{key:t.id,action:()=>{},render:e=>r[te](J.Z,a()({},e,{store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:i()(v.FormattedMessage,{id:"oauthPageSearchResults.disabledResult.bySelf.message",[oe]:"Already added"})}))};if(o){const e=new C.G(n,{table:m.iU,id:o});return{key:t.id,action:()=>{},render:n=>r[te](J.Z,a()({},n,{store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:i()(v.FormattedMessage,{id:"oauthPageSearchResults.disabledResult.byAncestor.message",[oe]:"Already added via {ancestorPageName}",values:{ancestorPageName:i()(_.Z,{store:e,style:{display:Q}})}})}))}}const c=t.getRole();return c&&h.canAdmin(c)?{key:t.id,action:()=>s(t.id),render:e=>r[te](J.Z,a()({store:t,hidePath:!1},e))}:void 0}({store:o,alreadySelectedAncestorId:c(o),[ee]:l,onSelectPage:n})})).filter(q.isDefined);u=0===e.length?i()(G.Z,{},void 0,i()(H.Z,{title:i()(v.FormattedMessage,{id:"oauthPageSearchResults.noResults.placeholder",[oe]:"No results"})})):function(e){return i()(W.Z,{type:W.i.Vertical,initialFocus:void 0,sections:[{key:ne,items:e,render:e=>r[te](G.Z,e)}]})}(e)}const f={menuType:j.og.Popup};return r[te](V.Z,f,u)}const se=n(85).j7K,ae=n(85).y79,re=n(85)._lc,ce=n(85).cZW,de=n(85).FkY,le=n(85).g7N,ue=n(85).ihD,ge=n(85).Yzm,pe=n(85).OBT,he=n(85).fmU,me=n(85).qJ8,fe=n(85).GiO,ve=n(85).H1l,ye=n(85).Vkz,Se=n(85).Wp_,be=n(85).nx5,we=n(85).LlE,Ie=n(85).wuN,Ae=n(85).Exd,Ce=n(85).PG2,ke=n(85).dLQ,Ze=n(85).X5t,Pe=n(85).QmD,Me=n(85).wgE,_e=n(85).Gnd,Te=n(85).TtP,Be=n(85).D7I,xe=n(85).rpY,Fe=n(85).eiN,Ne=n(85).vPU,Ee=n(85).VMs,De=n(85).X16,Le=n(85).wfR;class Re extends c.Z{constructor(){super(...arguments),this.storeTypes={selectedBlockIdsStore:u.default[Le]({}),[De]:u.default[Le]({open:!1,[Ee]:void 0})},this[Ne]=(e,t,n)=>{const o=n[Fe]((e=>h.canAdmin(e.getRole()||"none")));return{key:e,[xe]:e=>r[Be](G.Z,e),items:[this.getPageSectionHeader(t,o),...0===o[Te]?[this.getEmptyState()]:o.map((e=>this.getPageItem(e,1)))]}},this.getPageItem=(e,t)=>{const{selectedBlockIdsStore:n}=this[_e],{device:o}=this[Me],i=Boolean(n[Pe][e.id]);return{key:e.id,[Ze]:()=>this.handleClickPage(e.id,i),[xe]:n=>r[Be](D,a()({},n,{[ke]:o[ke],store:e,isChecked:i,disabled:!1,nestingLevel:t}))}},this.getPageSectionHeader=(e,t)=>{const{selectedBlockIdsStore:n}=this[_e],o=t[Te]>0&&t.every((e=>n[Pe][e.id]));return{key:e,[Ze]:()=>this.handleClickSection(t),[xe]:t=>r[Be](Z.Z,a()({},t,{title:i()(T.Z,{left:i()(P.Z,{[Ce]:t[Ce],checked:o,size:16}),style:this.getSectionHeaderStyle()},void 0,e)}))}},this.getEmptyState=()=>({key:"empty",[Ze]:()=>{},[xe]:e=>r[Be](Z.Z,a()({},e,{title:i()(T.Z,{style:{[Ae]:14,color:this.theme[Ie],[we]:"2px 32px"}},void 0,i()(v.FormattedMessage,{id:"oauthAuthorizationPage.selectPageStep.empty",[be]:"No pages inside"}))}))}),this.handleClickPage=(e,t)=>{const{selectedBlockIdsStore:n}=this[_e];n[Se]({...n[Pe],[e]:!t})},this.handleClickSection=e=>{const{selectedBlockIdsStore:t}=this[_e],n=e.every((e=>t[Pe][e.id]));t[Se]({...t[Pe],...e.reduce(((e,t)=>(e[t.id]=!n,e)),{})})},this[ye]=e=>{const t=this[_e][De][Pe],n=e[Te]>0;this[_e][De][Se]({...t,[Ee]:e,open:n})},this.handleSearchCancel=()=>{const e=this[_e][De][Pe];this[_e][De][Se]({...e,open:!1,[Ee]:void 0})},this.findSelectedBlockAncestorId=e=>{const{selectedBlockIdsStore:t}=this[_e];if(t[Pe][e.id])return e.id;const n=w[ve](e).find((e=>e.table===m.iU&&Boolean(t[Pe][e.value.id])));return n?n.value.id:void 0}}renderComponent(){const{intl:e}=this.props,{[De]:t,selectedBlockIdsStore:n}=this[_e],o=(0,b.sidebarStateStore)(this[Me])[Pe];if(!o)return i()(R.Z,{style:{alignSelf:"center"}});const{allSharedPagesStores:s,showWorkspaceSection:c,showTeamSection:d,showSharedSection:l,showPrivateSection:u,showOnlyPrivateSection:g}=o,{[fe]:h,[me]:y}=A.default[Pe];if(!h||!y)return;const S=[];if(d){const e=h.getTeamsStores();S.push(...e.map((e=>[e,e.getTeamPagesStores()[Fe](We)])))}const w=h.getWorkspacePages()[Fe](We),k=h.getPrivatePages(this[Me])[Fe](We),Z=Object.keys(n[Pe])[Fe]((e=>n[Pe][e])).map((e=>new C.G(this[Me],{table:m.iU,id:e})))[Fe]((e=>e.getSpaceId()===y.id&&e.isNavigableBlock()&&!e[he]({spaceStore:y,[Me]:this[Me]})&&!e[pe](y.id)&&!(e.getParentTable()===f.e0)&&!s.some((t=>t.id===e.id)))),P=(0,I.rn)(this[Me],y),M=[];if(Z[Te]>0&&M.push({key:"manual",[xe]:e=>r[Be](G.Z,a()({},e,{title:i()(T.Z,{style:this.getSectionHeaderStyle()},void 0,i()(v.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.pagePicker.manuallyAddedPagesSection.title",[be]:"Manually added"})),isTitleUppercase:!0})),items:Z.map((e=>this.getPageItem(e,0)))}),c&&M.push(this[Ne]("workspace",e[ge]({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.workspaceSection.title",[be]:"Workspace"}),w)),d)for(const[i,a]of S){const e=i.id,t=i.getName();e&&void 0!==t&&M.push(this[Ne](`team-${e}`,t,a))}if(l&&M.push(this[Ne]("shared",e[ge]({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.sharedSection.title",[be]:"Shared"}),s)),u){const t=g?P||"":e[ge]({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.privateSection.title",[be]:"Private"});M.push(this[Ne]("private",t,k))}const _=this[ue]();return r[Be](r.Fragment,null,i()(U.GI,{origin:i()(L.ZP,{style:{[le]:8},itemMarginLeft:0,itemMarginRight:0,focus:!0,focusAfterAnimation:!0,value:t[Pe][Ee]||"",onChange:e=>{this[ye](e.target.value)},[ce]:e[ge]({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.search.placeholder",[be]:"Search for pages in {workspaceName}"},{[de]:P}),inputLeft:i()(L.f_,{icon:()=>p.Z.search(_)})}),sameWidthAsOrigin:!0,popupType:U.GI[re].Popup,open:t[Pe].open,[xe]:()=>i()(ie,{spaceId:y.id,onSelectPage:e=>this.handleClickPage(e,!1),[Ee]:t[Pe][Ee]||"",source:"oauth",findSelectedBlockAncestorId:this.findSelectedBlockAncestorId}),onDismiss:this.handleSearchCancel}),i()("div",{style:this.getPageListStyle()},void 0,i()(W.Z,{type:W.i[ae],sections:M,[se]:void 0})))}getSectionHeaderStyle(){return{textTransform:"uppercase",[Ae]:12,fontWeight:600,color:g.ZP[Ie],[we]:"2px 0"}}getPageListStyle(){return{alignItems:"left",width:"100%",height:380,borderWidth:1,borderStyle:"solid",borderColor:g.ZP.contentBorder,borderRadius:4,overflowY:"auto"}}[ue](){return{width:14,height:14,marginLeft:8,marginRight:8,flexGrow:0,flexShrink:0,fill:g.ZP.mediumIconColor}}}function We(e){return e.isDefined()&&"copy_indicator"!==e.getType()}Re.displayName="BotAccessPagePicker";const Ue=function(e){window.__c={n:"BotAccessPagePickerWrapper"};const t=(0,d.O7)(),n=(0,l.VK)((()=>{var e;return null===(e=A.default[Pe][me])||void 0===e?void 0:e.id}),[]),o=t.currentUser.id,i=(0,v.useIntl)();return(0,l.VK)((()=>{n&&o&&(S.h({[Me]:t,spaceId:n,userId:o}),y.I({[Me]:t,spaceId:n,userId:o}))}),[t,n,o]),r[Be](Re,a()({intl:i},e))}},70578:(e,t,n)=>{n.d(t,{Z:()=>A});var o=n(77094),i=n.n(o),s=n(67294),a=n(480),r=n(3909),c=n(5366),d=n(89101),l=n(50906),u=n(33665),g=n(16354),p=n(89728);const h=n(85).P29,m=n(85).lGm,f=n(85).nx5,v=n(85).twM,y=n(85).xm3,S=n(85).yyO,b=n(85).XNW,w=n(85).EMU,I=n(85).sM5;function A(){window.__c={n:"ConnectionsSettingsLinks"};const e=(0,a.O7)();return s.createElement(s.Fragment,null,i()(g.Z,{style:{[I]:w,[b]:-6},[m]:S,href:`${d._j[y]}/all`,external:!0,onClick:()=>{l.trackDeveloperIntegrationsAllIntegrationsClick(e,{from:v,href:`${d._j[y]}/all`})}},void 0,i()(p.Z,{icon:r.Z.alias,isSmall:!0,isLightGray:!0},void 0,i()(c.FormattedMessage,{id:"connectionsSettingsLinks.connectionsGallery",[f]:"Browse connections in Gallery"}))),i()(g.Z,{style:{[I]:w,[b]:-6},[m]:S,href:d._j[h],external:!0,onClick:()=>{l.trackDeveloperIntegrationsMyIntegrationsClick(e,{from:v,href:d._j[h]})}},void 0,i()(p.Z,{icon:r.Z.alias,isSmall:!0,isLightGray:!0},void 0,i()(c.FormattedMessage,{id:"connectionsSettingsLinks.manageConnections",[f]:"Develop or manage integrations"}))),i()(g.Z,{style:{[I]:w,[b]:-6},[m]:S,href:(0,u.getLocalizedUrl)("guides.publicAPI"),external:!0},void 0,i()(p.Z,{icon:r.Z.help,isSmall:!0,isLightGray:!0},void 0,i()(c.FormattedMessage,{id:"connectionsSettingsLinks.helpCenter",[f]:"Learn more about connections"}))))}},47292:(e,t,n)=>{n.d(t,{Z:()=>Jt,O:()=>Ht});var o=n(77094),i=n.n(o),s=n(96486),a=n.n(s),r=n(67294),c=n(83355),d=n(41892),l=n(15070),u=n(74181),g=n(77420),p=n(90468),h=n(90965),m=n(5500),f=n(97880),v=n(5366),y=n(50906),S=n(54642),b=n(51859),w=n(64002),I=n(47307),A=n(95477),C=n(68821),k=n(91924),Z=n(46190),P=n(47593),M=n(92625),_=n(15356);const T=n(85).IV6,B=n(85).nx5,x=(0,v.defineMessages)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",[B]:"Authenticating with Asana…"},[T]:{[B]:"Asana login",id:"asanaActions.loginWithAsanaPopupModal.title"}});var F=n(76463),N=n(22711),E=n(91584),D=n(83805),L=n(77719),R=n(52192),W=n(761);const U=n(85).gnz;var G=n(38755),z=n(34859),q=n(79315),O=n(88632),j=n(30874),V=n(39098),H=n(72087),J=n(78291),Y=n(480),K=n(24405),X=n(82990),$=n(74420),Q=n(89728),ee=n(23189);const te=n(85).ChN,ne=n(85).g4H,oe=n(85).Tk1,ie=n(85).BQ6,se=n(85).PG2,ae=n(85).nx5,re=n(85).h8z,ce=n(85).UPJ,de=n(85).EMU,le=n(85).sM5,ue=n(85).$Cr;function ge(e){window.__c={n:"ConnectedAppsSettingsDiscoverSection"};const{apps:t,numberOfConnectedApps:n}=e,o=(0,Y.O7)(),[s,a]=(0,r.useState)(!1),c=t.filter((e=>!e[ue])),d=c.length>3&&!s,l=s?c:c.slice(0,3);return r.createElement(r.Fragment,null,i()(ee.Z,{large:!0,divider:"full"},void 0,i()("div",{[ie]:{[le]:de,[ce]:re,height:28}},void 0,i()(v.FormattedMessage,{id:"connectionsSettings.discoverNewConnectionsSection.title",[ae]:"Discover new connections"}),d&&i()(Q.Z,{isBlue:!0,[se]:()=>{s||(a(!0),y.trackClickDiscoverAppsShowAll(o,{numberOfConnectedApps:n}))}},void 0,i()(v.FormattedMessage,{id:"connectedAppsSettings.discoverNewAppSection.showAll.label",[ae]:"Show all"})))),i()("div",{[ie]:{[le]:"grid",[oe]:"repeat(3, 1fr)",gap:32}},void 0,l.map((e=>"string"==typeof e.logo&&e.onConnect&&i()(pe,{appName:e.appName,[ne]:e[ne],shouldShowNewBadge:e.shouldShowNewBadge,logo:e.logo,onConnect:e.onConnect},e.id))).filter((e=>(0,f.isDefined)(e)))))}function pe(e){window.__c={n:"ConnectedAppsSettingsDiscoverItem"};const{appName:t,[ne]:n,logo:o,shouldShowNewBadge:s,onConnect:a}=e,r=(0,K.yK)((e=>({card:{[le]:de,flexDirection:"column",width:160},image:{width:32,height:32,borderRadius:3},topRow:{[le]:de,alignItems:"center",marginTop:8},title:{[te]:X.Z[te].medium,fontSize:14},[ne]:{marginTop:2,[te]:X.Z[te].regular,color:e.mediumTextColor,fontSize:12,maxHeight:72,overflow:"hidden"},button:{marginLeft:-8,marginTop:3}})),[]);return i()("div",{[ie]:r.card},void 0,i()("img",{[ie]:r.image,src:o}),i()("div",{[ie]:r.topRow},void 0,i()("div",{[ie]:r.title},void 0,t),s&&i()($.Z,{})),i()("div",{[ie]:r[ne]},void 0,n),i()("div",{[ie]:r.button},void 0,i()(Q.Z,{isBlue:!0,[se]:a},void 0,i()(v.FormattedMessage,{id:"connectedAppSettingsDiscoverItem.connectButton.label",[ae]:"Connect"}))))}var he=n(70578),me=n(61519),fe=n(68785),ve=n(77137),ye=n(18647),Se=n(64369),be=n(27386),we=n(31278),Ie=n(40235),Ae=n(97464),Ce=n.n(Ae),ke=n(81954),Ze=n(49085),Pe=n(8848),Me=n(87279),_e=n(21115),Te=n(24736),Be=n(11106),xe=n(42922),Fe=n(52275),Ne=n(31945),Ee=n(78140),De=n(32163),Le=n(63296),Re=n(72495),We=n(95030);const Ue=n(85).Tk1,Ge=n(85).j7K,ze=n(85).y79,qe=n(85).Ie8,Oe=n(85).dLQ,je=n(85).PG2,Ve=n(85).YjJ,He=n(85).wgE,Je=n(85).nx5,Ye=n(85).D7I,Ke=n(85).Wp_,Xe=n(85).qJ8;function $e(e){window.__c={n:"UserConnectionsSettingsActionMenu"};const{botId:t,canSelectPageAccess:n,onConnect:o,onDisconnect:s}=e,[a,c]=(0,r.useState)(!1),[d]=(0,r.useState)(Ze.default.createValue({})),l=(0,ke.VK)((()=>q.default.state[Xe]),[]),u=(0,Y.O7)(),p=(0,Y.Fy)(),{data:h}=(0,ke.VK)((()=>J.default.state),[]),m=[];if(n){const e=(h?(0,_e.getSpaceBots)(h):[]).find((e=>e.botId===t)),n=(null==e?void 0:e.pageIds.reduce(((e,t)=>(e[t]=!0,e)),{}))??{};l&&(a||(d[Ke](n),c(!0)),m.push({key:"actions for user guest connections",render:e=>r[Ye](Re.Z,e),items:[{key:"update selected pages",render:(e,o)=>r[Ye](We.Z,Ce()({},e,{onFocus:o.onFocus,disableDefaultClick:!0,renderOrigin:e=>r[Ye](Fe.Z,Ce()({},e,{title:i()(v.FormattedMessage,{id:"userConnectionsSettings.actionMenu.selectPages.label",[Je]:"Access selected pages"})})),renderExtension:(e,o)=>{return i()("div",{style:{width:400,padding:20}},void 0,i()(Be.Z,{selectedBlockIdsStore:d}),(s={leftText:i()(v.FormattedMessage,{id:"userConnectionsSettings.actionMenu.pagePicker.cancel",[Je]:"Cancel"}),leftAction:()=>{d[Ke](n),o.close()},rightText:i()(v.FormattedMessage,{id:"userConnectionsSettings.actionMenu.pagePicker.update",[Je]:"Update access"}),rightAction:()=>{!function(e){const{botId:t,[Xe]:n,[He]:o,selectedBlockIdsStore:i,currentAccessedPages:s}=e,a=[],r=[],c=i.state;Object.keys(c).forEach((e=>{s.hasOwnProperty(e)&&!c[e]?a.push(e):!s.hasOwnProperty(e)&&c[e]&&r.push(e)}));const d=V.t1.createChildStore(n,{table:g.cZ,id:t});F.jX({[He]:o,[Xe]:n,botStore:d,pages:a}),F.jX({[He]:o,[Xe]:n,botStore:d,pages:r,addPermission:!0})}({selectedBlockIdsStore:d,[He]:u,[Xe]:l,botId:t,currentAccessedPages:n}),o.close()}},i()("div",{style:{display:"grid",[Ue]:"1fr 1fr",gap:8,marginTop:24}},void 0,i()(Le.Z,{isLarge:!0,[je]:s.leftAction,style:{height:32}},void 0,s.leftText),i()(xe.Z,{isLarge:!0,[je]:s.rightAction},void 0,s.rightText))));var s}})),action:()=>{}}]}))}const f=[];return o&&f.push({key:"connect account",render:e=>r[Ye](Fe.Z,Ce()({},e,{title:i()(v.FormattedMessage,{id:"userConnectionsSettings.actionMenu.connectAccount.label",[Je]:Ve}),[je]:o})),action:o}),f.push({key:"disconnect account",render:e=>r[Ye](Fe.Z,Ce()({},e,{title:i()("div",{style:{color:Pe.ZP.red}},void 0,i()(v.FormattedMessage,{id:"userConnectionsSettings.actionMenu.disconnectAccount.label",[Je]:"Disconnect account"})),[je]:()=>{s()}})),action:()=>s()}),m.push({key:"actions for all user connections",render:e=>r[Ye](Re.Z,e),items:f}),i()(Ne.ZP,{popupType:p[Oe]?Ne.Z4.SlideUp:Ne.Z4.Popup,renderOrigin:e=>r[Ye](Te.Z,Ce()({},e,{[Oe]:p[Oe]})),render:()=>i()(Ee.Z,{menuType:p[Oe]?Me.og[qe]:Me.og.Popup},void 0,i()(De.Z,{type:De.i[ze],sections:m,[Ge]:void 0}))})}const Qe=n(85).XNW,et=n(85).tEh,tt=n(85).$fp,nt=n(85).nx5,ot=(n(85).BYw,n(85).vem);function it(e){const{userConnections:t}=e;return i()(Ie.Z,{columns:[{key:ot,header:i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.connectionsColumn.title",[nt]:"Connection"}),style:{width:"40%"}},{key:"access",header:i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.title",[nt]:"Access"}),style:{width:"40%"}},{key:"more",header:void 0,style:{width:"5%"}}],rows:st(t)})}function st(e){const t=[];return e.forEach((e=>{const{account:n,[tt]:o}=e;if(Array.isArray(n)){const i=n.map((t=>at({[ot]:{...e,[tt]:()=>{o(t)}},account:t})));t.push(...i)}else t.push(at({[ot]:e,account:n}))})),t}function at(e){const{account:t,[ot]:{id:n,appName:o,[et]:s,capabilities:a,logo:r,onConnect:c,[tt]:d}}=e,l=void 0!==t&&"string"!=typeof t,u=l?t.accountName:t,g=l?t.accountId:n;return{key:`${n}-${u}`,columns:[i()(rt,{accountName:u,connectionLogo:r,connectionName:o},"connection-title"),a,i()($e,{botId:g,[et]:s,connectionName:o,onConnect:c,[tt]:d},"connection-action-menu")]}}function rt(e){const{accountName:t,connectionLogo:n,connectionName:o}=e;return i()("div",{style:{display:"flex",alignItems:"center",marginRight:12}},void 0,"string"==typeof n?i()("img",{src:n,style:{height:28}}):i()(we.Z,{disabled:!0,icon:n,title:o,isEmptyPage:!1,size:28,isLarge:!0,useInvertedColors:!0}),i()("div",{style:{[Qe]:15}},void 0,i()(Se.Z,{},void 0,o),t&&i()(Se.Z,{isSmall:!0},void 0,t)))}const ct=n(85).$bT,dt=n(85).y3i,lt=n(85).ivl,ut=n(85).ydX,gt=n(85).yj2,pt=n(85).PPM,ht=n(85).SFi,mt=n(85).IPR,ft=n(85).mFA,vt=n(85).$fp,yt=n(85).tEh,St=n(85).Wku,bt=n(85).$Cr,wt=n(85).g4H,It=n(85).Csb,At=n(85).MrQ,Ct=n(85).x5M,kt=n(85).Yzm,Zt=n(85).nLZ,Pt=n(85).tBn,Mt=n(85).D7I,_t=n(85).g7N,Tt=n(85).GPw,Bt=n(85).ncO,xt=n(85).TtP,Ft=n(85).nx5,Nt=n(85).jkI,Et=n(85).BQ6,Dt=n(85).__z,Lt=n(85).hcx,Rt=n(85).TLr,Wt=n(85).eiN,Ut=n(85).wgE,Gt=n(85).SZh,zt=n(85).kWi,qt=n(85).QmD,Ot=n(85).qJ8,jt=n(85).kBp;class Vt extends c.Z{constructor(){super(...arguments),this.storeTypes={[jt]:H.Z},this.loadConnections=async e=>{const{[Ot]:t}=q.default[qt];return{guestBotIds:await this.fetchUserGuestBotIds(),connectionStatus:await N[zt](e,null==t?void 0:t.id)}},this.fetchUserGuestBotIds=async()=>{const{[Ot]:e,[Gt]:t}=q.default[qt];if(!e||!t||!J.default[qt].data)return[];return(await F.Yw({[Ut]:this[Ut],table:p.bx,id:e.id,type:"guest"})).botIds[Wt]((n=>V.t1[Rt](e,{table:g.cZ,id:n})[Lt]()===t.id))}}renderComponent(){return O.Z[qt].online?i()(ve.Z,{request:this[Ut],performRequest:this.loadConnections,[jt]:this.stores[jt],render:(e,t)=>null!=t&&t.connectionStatus?this.renderConnectedAppsSettings(t.guestBotIds):i()("div",{[Et]:Vt.loadingWrapStyle},void 0,i()(fe.Z,{}))}):this[Dt]()}[Dt](){return i()(be.Z,{},void 0,i()(Se.Z,{isSmall:!0,[Et]:{textAlign:Nt}},void 0,i()(v.FormattedMessage,{id:"connectedAppsSettings.offline.message",[Ft]:"Please go online to manage connecting to apps."})))}renderConnectedAppsSettings(e){const{connected:t,discover:n}=this.getAppsByCategory(e),o=t[xt]>0;return i()("div",{[Et]:this[Bt]()},void 0,i()(ye.Z,{[Et]:Vt.scrollerStyle,type:z.Z.Y},void 0,o&&r[Mt](r[Pt],null,i()(ee.Z,{large:!0,divider:"full",[Et]:{[Tt]:"none",[_t]:0}},void 0,i()(v.FormattedMessage,{id:"connectionsSettings.connectionsSection.title",[Ft]:"My connections"})),i()(it,{userConnections:t})),i()("div",{[Et]:{[Zt]:o?32:void 0}},void 0,i()(ge,{apps:n,numberOfConnectedApps:t[xt]})),i()(me.Z,{size:32}),i()("div",{[Et]:{[Zt]:8}},void 0,i()(he.Z,{}))))}async handleDriveAuth(){y.trackPromptAuthIntegration(this[Ut],{integration_name:"google",from:"connected_apps"}),await E.qN(this[Ut]),await N[zt](this[Ut]),await this.stores[jt].refresh()}handleDisconnectDrive(e){const{intl:t}=this.props;I.showDialog({message:t[kt]({id:"connectedAppsSettings.disconnectGoogleDriveModal.message",[Ft]:"Disconnecting disables file preview on Google Drive files embedded in all of your workspaces. It would not delete your embeds from Notion, so you can re-connect at anytime."}),showCancel:!0,keepFocus:!0,items:[{label:t[kt]({id:"connectedAppsSettings.disconnectGoogleDriveModal.disconnectButton.label",[Ft]:"Disconnect"}),color:"red",onAccept:async()=>{await S.disconnectDrive(this[Ut],{googleUserId:e.accountId}),await N[zt](this[Ut]),await this.stores[jt].refresh()}}]})}getAppsByCategory(e){const t=a().groupBy([...this.getExternalIntegrations(),...this.getLegacyConnectedApps()],(e=>e[Ct]&&e[Ct][xt]>0?"connected":"discover"));return{connected:[...this.getUserGuestIntegrations(e),...t.connected||[]],discover:t.discover||[]}}shouldShowGoogleDriveLegacyApp(){const{integrations:{[qt]:e}}=j.Z;return!e.some((e=>e.id===m.iK.google_drive.id))}getLegacyConnectedApps(){var e;const{intl:t}=this.props,n=this.stores[jt];let o=!1;const{[Ot]:s}=q.default[qt],a=null===(e=n[qt].result)||void 0===e?void 0:e.connectionStatus,r=(null==a?void 0:a.drive)&&(null==a?void 0:a.drive[xt])>0,c=this.shouldShowGoogleDriveLegacyApp();if(c){const e=null==s?void 0:s[At]().getValue();o=!(0,h.CJ)(e)||Boolean((null==e?void 0:e[It])&&e[It][u._o])}const l=i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.legacyImporter",[Ft]:"Can only add pages"});return[...c&&(o||r)?[{id:"drive",appName:"Google Drive",[wt]:t[kt]({id:"connectedAppsSettings.googleDrive.caption",[Ft]:"Find and embed your files."}),shouldHideConnectAccount:!o,[bt]:!c,logo:d.Z.images.import.googleDrivePng,[Ct]:null==a?void 0:a.drive,[St]:i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.googleDrive",[Ft]:"Can embed content"}),[yt]:!1,onConnect:()=>this.handleDriveAuth(),[vt]:e=>{e&&this.handleDisconnectDrive(e)}}]:[],{id:"evernote",appName:"Evernote",[wt]:t[kt]({id:"connectedAppsSettings.evernote.caption",[Ft]:"Import notebooks."}),logo:d.Z.images.import.evernotePng,[Ct]:null==a?void 0:a.evernote,[St]:l,[yt]:!1,onConnect:()=>D.e({[Ut]:this[Ut],[jt]:n}),[vt]:()=>N.handleRemoveEvernote(this[Ut],n)},{id:"trello",appName:"Trello",[wt]:t[kt]({id:"connectedAppsSettings.trello.caption",[Ft]:"Import your boards."}),logo:d.Z.images.import.trelloPng,[bt]:!0,[Ct]:null==a?void 0:a.trello,[St]:l,[yt]:!1,onConnect:()=>R.M({[Ut]:this[Ut],[jt]:n}),[vt]:()=>N.handleRemoveTrello(this[Ut],n)},{id:"asana",appName:"Asana",[wt]:t[kt]({id:"connectedAppsSettings.asana.caption",[Ft]:"Import tasks from boards and lists."}),logo:d.Z.images.import.asanaPng,[bt]:!0,[Ct]:null==a?void 0:a.asana,[St]:l,[yt]:!1,onConnect:()=>async function(e){const{environment:t,requestStore:n}=e,o=(0,k.eC)(t);let i=(0,b.s1)(A.default.domainBaseUrl,{authType:o,userId:t.currentUser.id});i=o.redirectToAuth?i:await(0,k.HU)(t,i);const s=await _.M(t,{width:580,height:800,url:i,[T]:x[T]});if(!s)return;const a=w.parse(s);if(!a.query.code||!a.query.state)return;M.display({message:x.authenticatingWithAsana});const r=await S.authWithAsana(t,{code:a.query.code,encryptedState:a.query.state});"failed"===r.type?(console.error(r.error),I.showError(r),M.close()):(y.trackAuthIntegration(t,{integration_name:"asana"}),await n.refresh(),Z.Z.setState({open:!0}),(0,C.c)()||P.Z.setState({open:!0}),M.close())}({[Ut]:this[Ut],[jt]:n}),[vt]:()=>N.handleRemoveAsana(this[Ut],n)},...null!=s&&s.id?[{id:ft,appName:"Confluence",[wt]:t[kt]({id:"connectedAppsSettings.confluence.caption",[Ft]:"Import Spaces from Confluence."}),logo:d.Z.images.import.confluencePng,[bt]:!0,[Ct]:null==a?void 0:a[ft],[St]:l,[yt]:!1,[vt]:()=>N.handleRemoveConfluence(this[Ut],n,s.id)}]:[]]}getUserGuestIntegrations(e){const{[Ot]:t}=q.default[qt];if(!t||(0,G.Cx)(t))return[];return e.map((e=>{const n=V.t1[Rt](t,{table:g.cZ,id:e}),o=n.getName(),s=n.getIntegrationId();if(!n.getAlive()||!o||!s)return;const a=n[mt](),r=n.getIcon(),c=r&&a?{pointer:a,icon:r}:void 0;return{id:n.id,appName:o,[wt]:void 0,[Ct]:void 0,logo:c,[St]:i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.userGuest",[Ft]:"Can {capabilities} content",values:{[St]:i()(v.FormattedList,{value:Ht(n.getCapabilities()),type:ht})}}),[yt]:!0,[vt]:async()=>{await I[pt]({message:i()("span",{},void 0,i()(v.FormattedMessage,{id:"userConnectionsSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",[Ft]:gt})),acceptLabel:i()(v.FormattedMessage,{id:"userConnectionsSettings.deleteExternalAuthorization.confirmDelete.label",[Ft]:"Yes"})})&&await F.P0({[Ut]:this[Ut],botId:n.id,onSuccess:()=>{}})}}}))[Wt](f.isDefined)}getExternalBotCapabilities(e){const t=[i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.botAccess.previewLinks",[Ft]:"preview links"},"previewLinks")];return function(e){return!!e.info[U]&&e.info[U].some((e=>{var t;return null===(t=e.additional_types)||void 0===t?void 0:t.collection}))}(e)&&t.push(i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.botAccess.syncDatabases",[Ft]:"sync databases"},"syncedDatabase")),t}getExternalIntegrations(){const{[Ot]:e}=q.default[qt];if(!e||!e.canEdit())return[];const t=e[At]().getValue(),n=e.id,{integrations:{[qt]:o},bots:{[qt]:s},[ut]:{[qt]:c}}=j.Z,d=e.canAdmin(),u=m.iK.github.id,p={[m.U9]:1,[u]:2};o.sort(((e,t)=>(p[e.id]??1/0)-(p[t.id]??1/0)));const S=[m.U9];return o.map((o=>{if(!o.info.icon)return;if(!d&&S.includes(o.id))return;const u=s[Wt]((e=>e.integration_id===o.id)),p=a().compact(u.map((e=>{const t=c.find((t=>t.parent_id===e.id));if(t)return{accountId:e.id,accountName:t.account_name}}))),f=(0,h.hU)({spaceBotSettings:t,[lt]:o.id,env:A.default.env}),b=p[xt]>0;if(!f&&!b)return;if(!b&&o.id===m.Dv)return;const w=!f,C=i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.external",[Ft]:"Can {capabilities}",values:{[St]:i()(v.FormattedList,{value:this.getExternalBotCapabilities(o),type:ht})}}),k=(0,l.ms)(o[St]),Z=o[St].inherit_creator_permissions,P=k&&!Z;return{id:o.id,appName:o.name,[wt]:o.info.tagline,logo:o.info.icon,[Ct]:p,shouldHideConnectAccount:w,shouldShowNewBadge:!o.info.hide_new_badge,[St]:r[Mt](r[Pt],null,i()("div",{},void 0,C),k?i()("div",{},void 0,i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.accessColumn.externalWithCapabilities",[Ft]:"Can {capabilities} content",values:{[St]:i()(v.FormattedList,{value:Ht(o[St]),type:ht})}})):null),[yt]:P,onConnect:async()=>{await L.hM({[Ut]:this[Ut],integration:o,spaceId:n,from:"connected_apps_settings"}),W[dt]({[Ut]:this[Ut]})},[vt]:async t=>{const n=s.find((e=>e.id===(null==t?void 0:t.accountId)));if(n){const s=V.t1[Rt](e,{table:g.cZ,id:n.id,spaceId:n.space_id}),a=null!=t&&t.accountName?i()(v.FormattedMessage,{id:"connectedAppSettings.deleteExternalAuthorization.withAccountName.confirmationMessage",[Ft]:"Are you sure you want to revoke access for {accountName}?",values:{accountName:t.accountName}}):i()(v.FormattedMessage,{id:"connectedAppSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",[Ft]:gt});await I[pt]({message:i()("span",{},void 0,a),acceptLabel:i()(v.FormattedMessage,{id:"connectedAppSettings.deleteExternalAuthorization.confirmDelete.label",[Ft]:"Yes"})})&&(await F.P0({[Ut]:this[Ut],botId:s.id,onSuccess:()=>{}}),y.trackDisconnectExternalIntegration(this[Ut],{[lt]:o.id}))}}}}))[Wt](f.isDefined)}[Bt](){return{display:"flex",[ct]:"column",height:"100%",width:"sidebar-modal"===this.props.location?"100%":"auto"}}}function Ht(e){const t=[];return null!=e&&e.read_content&&t.push(i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.botAccess.readContent",[Ft]:"view"})),null!=e&&e.insert_content&&t.push(i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.botAccess.insertContent",[Ft]:"insert"})),null!=e&&e.update_content&&t.push(i()(v.FormattedMessage,{id:"userConnectionsSettings.connectionsTable.botAccess.updateContent",[Ft]:"update"})),t}Vt.displayName="UserConnectionsSettings",Vt.loadingWrapStyle={alignItems:Nt,display:"flex",[ct]:"column",flex:1,height:"100%",justifyContent:Nt},Vt.scrollerStyle={height:"100%",padding:"36px 60px"};const Jt=(0,v.injectIntl)(Vt)},41623:(e,t,n)=>{n.d(t,{Nq:()=>a,f_:()=>r,yh:()=>c});var o=n(15070);const i=n(85).ydX,s=n(85).ISo;function a(e,t){const n=t.getAlive(),i=(0,o.hA)(t),a=Boolean(!t[s]()),r=Boolean(t[s]()),c=Boolean(e.currentUser.id===t.getParentId());return n&&i&&(r&&c||a)}function r(e){return e.getAlive()&&(0,o.hA)(e)&&Boolean(e[s]())}function c(e){const{externalIntegrationStoreState:t,integrationId:n}=e;if(!t.loaded)return;const s=t[i].map((e=>{let{parent_id:t}=e;return t})),a=new Set(s),r=t.bots.filter((e=>e.alive&&a.has(e.id)&&(0,o.U9)(e)&&e.integration_id===n));return r.length?r[0]:void 0}},53833:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(49085);class i extends o.default{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}}}const s=new i},46190:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new(n(61766).Z)},90365:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new(n(61766).Z)},82066:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new(n(61766).Z)},81676:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(49085);class i extends o.default{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const s=new i}}]);