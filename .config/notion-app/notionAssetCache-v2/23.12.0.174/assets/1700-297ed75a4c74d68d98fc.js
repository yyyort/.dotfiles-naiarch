"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1700],{7512:(e,t,s)=>{s.d(t,{A:()=>h,t:()=>v});var i=s(5366),o=s(33929),n=s(79315),a=s(84075),r=s(50906),d=s(54642),l=s(47307),c=s(92625),u=s(58985),m=s(9953);const p=s(85).nx5,g=(0,i.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",[p]:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",[p]:"No account to delete."}}),h=function(e){const{userStore:t,data:s,transaction:i}=e,o={};"name"in s&&s.name&&(o.name=s.name),"profilePhoto"in s&&(o.profile_photo=s.profilePhoto),0!==Object.keys(o).length&&m.updateValue({store:t,data:o,transaction:i})};async function v(e){c.display({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:i}=n.default.state;if(!s||!i||!t)return c.close(),void l.showErrorMessage(o.default.formatMessage(g.noUserError));r.trackDeleteUser(e),await d.deleteUser(e,{}),await a.transactionQueue.clearForUser(t),u.logoutSingleAccount({environment:e,userId:t}),c.close()}},26797:(e,t,s)=>{s.d(t,{JN:()=>j,f$:()=>J,td:()=>Y,fX:()=>X,cQ:()=>$,Fv:()=>ee,xD:()=>te,QG:()=>se});var i=s(96486),o=s.n(i),n=s(17126),a=s(80951),r=s(40506),d=s(53877),l=s(42875),c=s(6287),u=s(97880),m=s(95802),p=s(15723),g=s(17746),h=s(39098),v=s(49865),f=s(25498),y=s(42239),b=s(19785),w=s(9953);const S=s(85).N6L,M=s(85).xjw,k=s(85).YaF,Z=s(85).Btx,C=s(85).b7Q,T=s(85).xG0,P=s(85).TZJ,F=s(85).gLO,I=s(85).d1X,_=s(85).BPD,x=s(85).qnp,A=s(85).Wp_,D=s(85).E_V,B=s(85).ejZ,R=s(85).eHP,O=s(85).sP9,G=s(85).TeW,U=s(85).ASr,E=s(85).Neb,N=s(85).wuX,L=s(85).Ya7,V=s(85).UoE,q=s(85).B2C,W=s(85).P24,z=s(85).Ttb,K=s(85).LCr,H=s(85).oWD,Q=s(85).wgE;function j(e){const{[Q]:t,droppedStores:s,[H]:i,duplicate:o,calendarBy:u,[K]:m,[z]:p,[W]:g}=e,h=n.ou.fromMillis(e.startOfDay);let f=!0;for(const n of s){if(n.getParentTable()===c.v){f=!1;break}b.moveToCollection({childStore:n,parentStore:i,[K]:m})||(f=!1)}const w=y.LQ({[Q]:t,droppedStores:s,duplicate:o,[K]:m,[q]:!1});for(const n of w){const e=n[V](u),s=a.toDateValue(e.getValue())||d.today((0,l.r)()),o=d[L](s,(0,l.r)()),c=h.toFormat(d[N]);let y;if("date"===o.type||"datetime"===o.type)y={...o,[E]:c};else{const e=d[U](o,(0,l.r)());if(!e.end)return;const t={...o,[E]:c},s=d[U](t,(0,l.r)()).start.diff(e.start,"days"),i=e.end.plus(s).toFormat(d[N]);y={...o,[E]:c,[G]:i}}const b=d[L](y,r.getPersistedTimezone(s)||(0,l.r)());v.addBlockToGroup({[Q]:t,store:n,[H]:i,[W]:g,coerce:!0,[O]:[],[z]:p,[K]:m,alreadyMovedToCollection:f}),te({[Q]:t,type:R,[B]:u,store:n,[K]:m,[R]:b})}}function J(e){const{[D]:t,direction:s,target:i}=e;t[A]({...t.state,[x]:!0,target:i,direction:s})}function Y(e){const{[D]:t,x:s,y:i,calendarBy:c}=e,u=t.state;if(u[x]){const e=a.toDateValue(u.target[V](c).getValue());if(!e)return;const h=d[L](e,(0,l.r)()),v=u[_]||e,f=d[L](v,(0,l.r)()),y=[];u.dayStoreMap.forEach(((e,t)=>{y.push({store:e,timestamp:t})}));const b=y.find((e=>{let{store:t}=e;const o=m.C.getRectFromStore(t);return Boolean(o&&p.uh(o,s,i))}));let w;if(b){const e=n.ou.fromMillis(b.timestamp),t=e.endOf("day"),s=e.toFormat(d[N]);if(h){const i=d[U](h,(0,l.r)());if(u.direction===g.t.Left)if(n.Xp[F](e,t)[I](i.start))w=h;else{let e;e="datetimerange"===h.type?{...h,[E]:s,[G]:h[G]}:"daterange"===h.type?{...h,[E]:s,[G]:h[G]}:"datetime"===h.type?{type:P,[E]:s,[T]:h[T],[G]:h[E],end_time:h[T],time_zone:h.time_zone,[C]:h[C]}:{type:Z,[E]:s,[G]:h[E],[C]:h[C]};const t=d[U](e,(0,l.r)());w=!i.end&&t.start>i.start||i.end&&t.start>i.end?f:e}else if(i.end?n.Xp[F](e,t)[I](i.end):n.Xp[F](e,t)[I](i.start))w=h;else{let e;e="date"===h.type?{...h,type:Z,[G]:s}:"datetime"===h.type?{...h,type:P,[G]:s,end_time:"00:00"}:{...h,[G]:s};const t=d[U](e,(0,l.r)());w=t.end&&t.end<t.start?f:e}}}if(w&&!o().isEqual(f,w)){const e=d[L](w,r.getPersistedTimezone(v)||(0,l.r)());t[A]({...u,[_]:e})}}}function X(e){const{[Q]:t,[D]:s,calendarBy:i,[K]:o}=e,n=s.state;n[x]&&n[_]&&(te({type:R,[Q]:t,[R]:n[_],[B]:i,store:n.target,[K]:o}),s[A]({...s.state,[x]:!1}))}function $(e){const{[D]:t}=e,s=t.state;s[x]&&t[A]({...s,[x]:!1})}function ee(e){const{[Q]:t,store:s,[H]:i,[W]:o,startDayOfWeek:r,[z]:c,[K]:u}=e,m=o.dateRangeStart.state,p=(0,l.r)(),g=o[k].state;if(!g||!g.calendar_by)return;const h=g.calendar_by,f=d.getLuxonEndOfWeek(m,r,p),y=f.startOf("month"),b=f.endOf("month"),Z=n.ou.now().startOf("day");let C;return C=n.Xp[F](y,b)[I](Z)?d.date(Z.valueOf(),p):d.date(d.getLuxonStartOfWeek(m,r,p).valueOf(),p),w.updateValue({store:s[M](),data:{[h]:a[S](C)},[K]:u}),v.addBlockToGroup({[Q]:t,store:s,[H]:i,[W]:o,coerce:!0,[z]:c,[O]:[],[K]:u}),s}function te(e){const{[Q]:t,store:s,[B]:i,[K]:o}=e;let n;"timestamp"===e.type?n=d.date(e.timestampMs.valueOf(),(0,l.r)()):"dateValue"===e.type?n=e[R]:(0,u.unreachable)(e);const r=s.getPropertyValue(i),c=a[S](n);w.updateValue({store:s[M](),data:{[i]:c},[K]:o}),f.H({[Q]:t,store:s,dateProperty:{id:i,oldValue:r,newValue:c}})}function se(e){const{[Q]:t,[H]:s,calendarBy:i,store:o,insertStores:n,[z]:a,[W]:r,[K]:d}=e,l=o[V](i).getValue();for(const c of n)v.addBlockToGroup({[Q]:t,store:c,[H]:s,[W]:r,coerce:!0,[O]:[],[z]:a,[K]:d}),w.setValue({store:c[V](i),value:l,[K]:d});return n.map((e=>h.G.createChildStore(s,e.pointer)))}},95209:(e,t,s)=>{s.r(t),s.d(t,{processInvite:()=>N,closeModal:()=>L,extractInvitedGuests:()=>V,handleInviteClick:()=>q,handleModalDismiss:()=>W,handleClickRemoveToken:()=>z,handleUpgradeClick:()=>K,getInviteUserFromEmails:()=>H,handleInputChange:()=>Q,handleRoleSelectChange:()=>j,getInvitableActorsFromInputQuery:()=>J});var i=s(96486),o=s.n(i),n=s(33728),a=s(27006),r=s(29477),d=s(21202),l=s(90468),c=s(97880),u=s(76464),m=s(31299),p=s(79817),g=s(75472),h=s(65598),v=s(23537),f=s(79315),y=s(85834),b=s(29677),w=s(50906),S=s(54642),M=s(57688),k=s(93678);const Z=s(85).NDH,C=s(85).qJ8,T=s(85).o63,P=s(85).Jaf,F=s(85).pPv,I=s(85).H6e,_=s(85).Wp_,x=s(85).T04,A=s(85).EMb,D=s(85).X9J,B=s(85).QmD,R=s(85).dbe,O=s(85).DL8,G=s(85).Jy7,U=s(85).sqI,E=s(85).wgE,N=async e=>{const{[E]:t,store:s,[U]:i,[G]:o,onInviteStart:r,[O]:m,inviteOrigin:p}=e,{[R]:v}=o[B];if((0,n.oH)(v.trim())&&(o[B][D]||!(0,b.ow)(o[B]))){const e={type:A,value:{[x]:v.trim()},source:x};g.Nd({target:e,[G]:o})||o[_]({...o[B],[I]:[...o[B][I],e],[D]:!1,[R]:""})}if(!o[B][D]&&o[B][I].length>0){null==r||r();const e=o[B];if((0,b.ow)(e)){if(e.table===d.iU){if(!(0,h.isBlockStore)(s))throw new Error("Table mismatch.");const{[I]:n,flowId:a,emailMessage:r}=e;o.reset();return(await u[I]({[E]:t,store:s,[U]:i,[I]:n,[F]:void 0,[P]:!1,invite:{inviteFlowId:a,inviteMessage:r,inviteOrigin:p}})).success}if(e.table===l.bx){if(!(0,h.isSpaceStore)(s))throw new Error("Table mismatch.");const{[I]:n,[F]:a,flowId:r}=e;o.reset();return(await u[I]({[E]:t,store:s,[U]:i,[I]:n,[F]:a,[P]:!1,invite:{inviteFlowId:r,inviteOrigin:p}})).success}(0,c.unreachable)(e)}else{const{[F]:n,flowId:r,emailMessage:d}=e;o.reset();const l=function(e,t){const s=new Set;var i;(0,h.isTeamStore)(e)?null===(i=e[T]())||void 0===i||i.forEach((e=>{(0,a.isUserPermission)(e)&&s.add(e.user_id)})):e[T]().forEach((e=>{(0,a.isUserPermission)(e)&&s.add(e.user_id)}));return t.filter((e=>"existingUser"!==e.type||!s.has(e.value.id)))}(s,e[I]);if((0,a.isTieredPermissionRole)(n)){const e=await u[I]({[E]:t,store:s,[U]:i,[I]:l,[F]:n,[P]:!1,invite:{inviteFlowId:r,inviteMessage:d,inviteOrigin:p}});return e.success&&(null==m||m[_]({...null==m?void 0:m[B],invitedEmailToUserIdMap:e.invitedUsers})),e.success}if((0,h.isTeamStore)(s)&&(0,b.Db)(e))return await u.inviteTargetsToTeam({[E]:t,store:s,[I]:e[I],[F]:n,createNewTeamFlowId:r})}}return!0};const L=e=>{e[G][_]({...e[G][B],modalOpen:!1,flowId:void 0})},V=e=>{const{[G]:t,[O]:s}=e;if(!s)return;const i=[];t[B][I].forEach((e=>{if("newUser"===e.type)i.push({[x]:e.value[x],isGuest:!0});else if("existingUser"===e.type){const t={...e.value,[x]:e.value[x],isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};i.push(t)}})),s[_]({...s[B],invitedUsers:i})},q=async e=>{const{[E]:t,store:s,[U]:i,[G]:o,[O]:n,onInviteClick:a,onInviteComplete:r,inviteOrigin:d,intl:l}=e,{[C]:c}=f.default[B];if((0,v.$)(t)&&(null==n?void 0:n[B].selection)===y.uq.workspace_member&&c){if(!(await M.enableTeams({[E]:t,flowId:o[B].flowId||"",trackCreateTeamComplete:!1})))return;V({[G]:o,[O]:n}),await(0,p.inviteMembers)({[E]:t,spaceStore:c,[O]:n,from:"share_menu",intl:l})}else V({[G]:o,[O]:n});let u=!1;try{u=await N({[E]:t,store:s,[U]:i,[G]:o,[O]:n,onInviteStart:()=>{null==a||a()},inviteOrigin:d})}catch(m){}finally{null==r||r(u)}},W=async e=>{const{[E]:t,[G]:s,from:i}=e;await g.Aw({[E]:t,permissionsInviteStoreState:s[B],from:i})||s.reset()},z=e=>{const{[G]:t,targetToRemove:s,defaultRoleForNonBot:i}=e;if(!t[B][D])if((0,b.ow)(t[B]))if((0,b.ow)(t[B])){const e=t[B][I].filter((e=>e!==s));0===e.length?t[_]({...t[B],[I]:[],[F]:i,[D]:!0}):t[_]({...t[B],[I]:e})}else(0,c.unreachable)(t[B]);else{const e=t[B][I].filter((e=>e!==s));0===e.length?t[_]({...t[B],[I]:[],[F]:i,[D]:!0}):t[_]({...t[B],[I]:e})}},K=e=>{const{[E]:t,onUpgradeButtonClick:s,upgradeButtonName:i}=e;k.y(t,{from:i,for:"plus"}),null==s||s()};async function H(e,t){const s=new Set(t),i=Array.from(s).map((async t=>{const s=await S.findUser(e,{[x]:t});if("success"===s.type){const e=s.data;if(e.value){return{type:Z,value:e.value.value}}}return{type:A,value:{[x]:t},source:x}}));return await Promise.all(i)}const Q=async e=>{const t="invitee",{[E]:s,[G]:i,event:o}=e;if(!i[B][D]&&(0,b.ow)(i[B])){const e=o.target.value;i[_]({...i[B],inputFocus:t,[R]:e})}else{const e=o.target.value,{extractedEmails:a,newInputValue:r}=(0,n.zI)(e),d=(await H(s,a)).filter((e=>!g.Nd({target:e,[G]:i}))),l=[...i[B][I],...d];l.length>0?i[_]({...i[B],[I]:l,[D]:!1,inputFocus:t,[R]:r}):i[_]({...i[B],[I]:[],[D]:!0,inputFocus:t,[R]:r})}},j=e=>{const{[E]:t,newRole:s,[G]:i}=e,{[B]:o}=i;w.trackInviteChangeRole(t,{...g.a_(t,o),invite_updated_role:s}),!o[D]&&(0,b.ow)(o)||i[_]({...o,[F]:s})},J=async e=>{const{query:t,[E]:s,sectionLimit:i,intl:n,membersOnly:a}=e,{[C]:d}=f.default[B];if(!d)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const{userLimit:l,botLimit:c,groupLimit:u,importContactLimit:p}=i,[g,h,v,{user:y,[x]:b},w]=await Promise.all([l>0?m.searchVisibleSpaceUsers({[E]:s,query:t,membersOnly:a}):[],c>0?m.searchSpaceBots({[E]:s,query:t}):[],u>0?m.searchSpaceGroups({query:t,intl:n}):[],m.searchEmailUser(s,t),p>0?Promise.race([S.searchContacts(s,{spaceId:d.id,limit:p,query:t}),(0,r.timeoutResolve)(1500,void 0)]):void 0]),M=g.slice(0,l).map((e=>({type:Z,value:e}))),k=h.slice(0,c).map((e=>({type:"bot",value:e}))),T=v.slice(0,u).map((e=>({type:"group",value:e})));y&&M.unshift({type:Z,value:y}),b&&M.unshift({type:A,value:{[x]:b},source:x});let P=[];return w&&"success"===w.type&&(P=w.data.contacts.map((e=>({type:A,value:{[x]:e[x],name:e.name,avatar_url:e.profile_photo},source:e.type})))),{inviteUsers:o().uniqBy(M,(e=>e.value[x])),inviteBots:k,inviteGroups:T,importedContacts:P}}},97832:(e,t,s)=>{s.d(t,{Z:()=>A});var i=s(77094),o=s.n(i),n=s(96486),a=s.n(n),r=(s(67294),s(480)),d=s(24405),l=s(8848),c=s(3909),u=s(90965),m=s(82990),p=s(5366),g=s(7512),h=s(50906),v=s(86080),f=s(38755),y=s(5971),b=s(79315),w=s(92083),S=s(11066),M=s(63296),k=s(93007),Z=s(55422);const C=s(85).NF1,T=s(85).pkR,P=s(85).dLQ,F=s(85).ChN,I=s(85).nLZ,_=s(85).TtP,x=s(85).nx5;const A=function(e){var t;window.__c={n:"AccountDeletion"};const s=(0,r.O7)(),{device:i}=s,n=(0,d.yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor}})),[]),A=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),D=(0,y.E)("enable_delete_managed_users"),B=A&&D,R=B?o()(p.FormattedMessage,{[x]:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):null,O=async()=>{const{currentUserStore:e,currentUserRootStore:t}=b.default.state;if(!e||!t)return;if(!e.isDefined())return;const i=a().compact(t.getSpaceViewStores().map((e=>e.getSpaceStore()))).filter((t=>!(0,u.XO)(e.id,t.getModel(),t.getRole()))),n=a().compact(i.map((e=>({id:e.id,name:(0,f.rn)(s,e)}))));h.trackDeleteAccountClicked(s);await v.b({width:420,message:o()("div",{},void 0,o()("div",{},void 0,o()(p.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",[x]:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}),n[_]>0&&o()("ul",{style:{padding:0}},void 0,n.map((e=>{let{id:t,name:s}=e;return o()("li",{style:{[I]:6,color:l.ZP.red,[F]:m.Z[F].medium,listStyle:"none"}},t,s)})))," ",o()(p.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",[x]:"Please type in your email to confirm."})),o()(k.Z,{style:{[I]:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}})),acceptLabel:0===n[_]?o()(p.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",[x]:"Permanently delete account"}):s.device[P]?o()(p.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",[x]:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n[_]}}):o()(p.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",[x]:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n[_]}}),requiredInputValue:e.getEmail()})&&(h.trackDeleteAccountConfirmed(s),w.Z.reset(),g.t(s))};return o()(Z.Z,{type:"custom",useFlexboxStyle:!0,[P]:i[P],title:o()(p.FormattedMessage,{id:"profileSettings.accountDeletionSetting.title",[x]:"Delete my account"}),caption:o()(p.FormattedMessage,{id:"manageActiveSessions.accountDeletionSetting.label",[x]:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:i[P]?o()("div",{style:{[I]:12}},void 0,o()(M.Z,{isLarge:!0,isRed:!0,onClick:O,[T]:B,disabledFeedback:B},void 0,o()(p.FormattedMessage,{id:"profileSettings.deleteMyAccount.button.label",[x]:"Delete my account"}))):o()(S.Z,{style:{[C]:"0.25em"},onClick:O,[T]:B,disabledFeedback:B},void 0,c.Z.chevronRightRoundedThin(n.icon)),[T]:B,tooltipLabel:R})}},86125:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(77094),o=s.n(i),n=s(67294),a=s(5366),r=s(74136);const d=s(85).nx5;function l(e){return n.createElement(r.Z,e,"membership_admin"===e.role?o()(a.FormattedMessage,{id:"spacePermissionsSettings.user.membershipAdmin",[d]:"Membership admin"}):o()(a.FormattedMessage,{id:"spacePermissionsSettings.user.workspaceOwner",[d]:"Workspace owner"}))}},79092:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(77094),o=s.n(i),n=(s(67294),s(83355)),a=s(5366),r=s(37181),d=s(79315),l=s(55422);const c=s(85).Ubh,u=s(85).nx5,m=s(85).wgE;class p extends n.Z{constructor(){super(...arguments),this.handleStartOfWeekToggle=()=>{1===this.getStartDayOfWeek()?r.setStartWeekToSunday(this[m]):r.setStartWeekToMonday(this[m])}}renderComponent(){const{device:e}=this[m];return o()(l.Z,{isMobile:e.isMobile,title:o()(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",[u]:"Start week on Monday"}),caption:o()(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",[u]:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===this.getStartDayOfWeek(),onToggle:this.handleStartOfWeekToggle})}getStartDayOfWeek(){const{[c]:e}=d.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}}p.displayName="CalendarSettings";const g=p},21752:(e,t,s)=>{s.d(t,{K:()=>k,Z:()=>Z});var i=s(77094),o=s.n(i),n=(s(67294),s(81954)),a=s(54368),r=s(77420),d=s(19889),l=s(97880),c=s(5366),u=s(86125),m=s(88198),p=s(70301),g=s(64369),h=s(45653);const v=s(85).lGm,f=s(85).PXg,y=s(85).xOW,b=s(85).XNW,w=s(85).EMU,S=s(85).sM5;function M(e){const{actorStore:t,avatar:s,isLarge:i}=e,n=i?32:28;return t?t.table===r.cZ?o()(p.Z,{botStore:t,size:n}):t.table===d.KJ?o()(h.Z,{userStore:t,size:n}):t.table===a.y?o()(h.Z,{userStore:void 0,size:n}):void(0,l.unreachable)(t):o()(h.Z,s?{avatar:s,size:n}:{userStore:void 0,size:n})}function k(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,l.unreachable)(e))}const Z=function(e){window.__c={n:"CellMemberAvatar"};const t=(0,c.useIntl)(),{actorStore:s,avatar:i,containerStyle:a,id:r,spaceRole:d,avatarBadge:l,caption:p,isLarge:h}=e,k="admin"===d||"membership_admin"===d,Z="guest"===d||"team_level_guest"===d,C=(0,n.VK)((()=>s?s.getDisplayName(t):null==i?void 0:i.name),[s,i,t]),T=(0,n.VK)((()=>Boolean(p)?p:s?s.getDetail():null==i?void 0:i.email),[p,s,i]);return o()("div",{style:{[S]:w,alignItems:"center",maxWidth:h?"unset":300,[b]:h?2:0,...a}},void 0,o()("div",{style:{position:y,...!h&&{height:28,width:28}}},void 0,o()(M,{actorStore:s,avatar:i,isLarge:h}),l),o()("div",{style:{minWidth:0,[b]:h?10:6,[f]:h?10:6}},void 0,o()("div",{id:r,style:{[S]:w,gap:4}},void 0,o()(g.Z,{[v]:"notranslate"},void 0,C),k&&o()(u.Z,{role:d}),Z&&o()(m.b,{labelType:d})),o()(g.Z,{isSmall:!0,style:{[S]:w}},void 0,o()(g.Z,{isSmall:!0},void 0,T))))}},66836:(e,t,s)=>{s.d(t,{h:()=>Z,Z:()=>T});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(480),l=s(24405),c=s(86658),u=s(3909),m=s(5366),p=s(92108),g=s(12955),h=s(10182),v=s(89728),f=s(55422);const y=s(85).a3v,b=s(85).XNW,w=s(85).nx5,S=s(85).XCs,M=s(85).YDv,k=s(85).D7I;function Z(e){return(0,g.canSetCookie)(e)&&(0,g.canShowCookieUi)(e)}function C(){window.__c={n:"CookieSettingsButton"};const e=(0,l.Fg)();return a()(h.Z,{hasDismissButton:!1,renderOrigin:t=>r[k](v.Z,o()({style:{[M]:8,[S]:8,height:32}},t),a()(m.FormattedMessage,{id:"cookieSelector.label.customize",[w]:"Customize"}),u.Z.chevronDown({width:10,[b]:4,fill:e[y]}))})}const T=function(e){let{isMobile:t}=e;return window.__c={n:"CookieSettings"},Z((0,d.O7)())?a()(f.Z,{isMobile:t,title:r[k](m.FormattedMessage,c.ze.cookieSettingsLabel),caption:(0,c.Fd)(p.Tz,"settings"),type:"custom",customButton:a()(C,{})}):null}},79603:(e,t,s)=>{s.d(t,{mS:()=>ve,Ub:()=>ye,Pp:()=>be});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(96486),d=s.n(r),l=s(67294),c=s(480),u=s(81954),m=s(24405),p=s(8848),g=s(33728),h=s(12174),v=s(3909),f=s(82990),y=s(5366),b=s(57400),w=s(95477),S=s(87279),M=s(79315),k=s(10161),Z=s(7339),C=s(52275),T=s(31945),P=s(36488),F=s(74194),I=s(68785),_=s(78140),x=s(32163),A=s(63296),D=s(74136),B=s(89728),R=s(72495),O=s(64369),G=s(27386),U=s(23189),E=s(40235);const N=s(85).nQ3,L=s(85).j7K,V=s(85).y79,q=s(85).pkR,W=s(85).wuN,z=s(85).rpY,K=s(85).N1Z,H=s(85).iVN,Q=s(85).nx5,j=s(85).wMo,J=s(85).ceT,Y=s(85).D7I,X=s(85).pHx,$=s(85).kdC,ee=s(85).cZW,te=s(85).BQ6,se=s(85).ChN,ie=s(85).GHO,oe=s(85).WLZ,ne=s(85).iVL,ae=s(85).UPJ,re=s(85).Uie,de=s(85).Mcv,le=s(85).Mm1,ce=s(85).FTQ,ue=s(85).dLQ,me=s(85).ONo,pe=s(85).M_x,ge=s(85).rHi,he="janus";function ve(){var e;if("local"===w.default.env)return!0;const t=null===(e=M.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,g.Gd)(t??"")||"on"===k.default.getGroup(he)}function fe(e){return[...k.default.getExperiments(),...e?d().uniq(h.l4).map((e=>({[ge]:e,experimentVersion:1,[pe]:k.default.getEligibleGroup({[ge]:e,defaultGroup:h.nb,disableExposureLogging:!0}),[me]:[...(0,h._n)(e),"control",h.nb],fromStatsig:!0,statsigOption:"EXPERIMENT"}))):[],...e?d().uniq(h.b2).map((e=>({[ge]:e,experimentVersion:1,[pe]:k.default.checkGate(e,!0).toString(),[me]:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE"}))):[]]}function ye(e){window.__c={n:"ExperimentSettings"};const t=(0,c.O7)(),[s,i]=(0,l.useState)(""),[n,r]=(0,l.useState)(void 0),g=k.default.isStatsigEnabled(),w=(0,u.VK)((()=>n?[]:fe(g).filter((e=>e[ge]!==he&&(!s||0===s.length||e[ge].includes(s)))).sort(((e,t)=>e[ge]>t[ge]?1:-1))),[s,g,n]),{device:M}=t,P=M[ue],G=(0,m.yK)((e=>({[ce]:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{[le]:"12px"},resetButtonContainerStyle:{[le]:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:de},experimentInfo:{display:"flex",flexDirection:P?"column":"row"},[ge]:{marginRight:5,maxWidth:P?215:300,...f.Z[re]},experimentGroupContainerStyle:{width:"100%",display:"flex",[ae]:"flex-end"},[ne]:{overflowX:"hidden",[ae]:"left"},experimentGroup:{maxWidth:P?90:300,...f.Z[re]},[oe]:{width:10,marginLeft:4,fill:e.lightIconColor},[ie]:{width:P?16:14}})),[P]);return a()("div",{[te]:G[ce]},void 0,a()(U.Z,{large:!0,[te]:{fontSize:16,[se]:500}},void 0,"Experiments"),a()("div",{[te]:G.headerContainerStyle},void 0,a()(O.Z,{isSmall:!0,isMultiline:!0,[te]:G.headerLabelStyle},void 0,"Toggle experiments for yourself. This only works for experiments that are based on userId or deviceId. For debugging statsig experiments in production, or statsig experiments on the server-side, you should go to console.statsig.com."),a()("div",{[te]:G.resetButtonContainerStyle},void 0,a()(A.Z,{isSmall:!0,onClick:()=>{r({reset:!0}),Z.C.removeAllLocalOverrides(),b.resetExperimentOverrides(t).then((()=>{r(void 0)}))}},void 0,null!=n&&n.reset?a()(I.Z,{}):"Reset to defaults"))),a()("div",{[te]:G.filterContainerStyle},void 0,a()(F.Z,{[ee]:"Filter by experiment ID or Feature Gate Name...",value:s,[$]:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{i(e.target.value)}})),a()(E.Z,{columns:[{key:"name",header:"Experiment ID or Feature Gate Name",[te]:G.tableExperimentIDHeaderStyle},{key:pe,header:"Group",[te]:G.tableExperimentGroupHeaderStyle}],rows:w.map((e=>{const s=e[pe],i=g&&"fromStatsig"in e&&e.fromStatsig,c=i&&"FEATUREGATE"===e.statsigOption,u=i&&"EXPERIMENT"===e.statsigOption;return{key:i?`statsig:${e[ge]}`:e[ge],columns:[a()("div",{[te]:G.experimentInfo},void 0,a()("span",{[te]:G[ge]},void 0,e[ge]),i&&a()(D.Z,{},void 0,`Statsig ${e.statsigOption}`)),a()("div",{[te]:G.experimentGroupContainerStyle},void 0,a()(T.ZP,{popupType:M[ue]?T.Z4[X]:T.Z4.Popup,renderOrigin:t=>l[Y](B.Z,o()({},t,{key:e[ge],[te]:G[ne]}),a()("span",{[te]:G.experimentGroup},void 0,s??"unknown"),v.Z.chevronDown(G[oe])),[z]:m=>{let g;g=M[ue]?{[J]:S.og.Modal,title:e[ge],[de]:a()(y.FormattedMessage,{[Q]:"Done",id:j}),[H]:m[K]}:{[J]:S.og.Popup,width:250};const f=e[me].map((g=>({key:g,action:s=>{let i;i=u?new Promise((t=>{Z.C.updateLocalOverrideConfig(e[ge],g),t(g)})):c?new Promise((t=>{Z.C.updateLocalOverrideGate(e[ge],g),t(g)})):b.setExperimentOverride(t,e[ge],g),r({[ge]:e[ge],[pe]:g}),i.then((()=>{r(void 0),d().delay((()=>{m[K]()}),1e3)}))},[z]:(t,r)=>{const d=i&&g===h.nb;return l[Y](C.Z,o()({},t,{title:g,[de]:n&&n[ge]===e[ge]&&n[pe]===g?a()("div",{[te]:G[ie]},void 0,a()(I.Z,{})):g!==s||n?void 0:a()("div",{[te]:G[ie]},void 0,v.Z.check()),[q]:d,[te]:{...d&&{color:p.ZP[W]}}}))}})));return l[Y](_.Z,g,a()(x.Z,{type:x.i[V],[L]:void 0,[N]:[{key:e[ge],[z]:e=>l[Y](R.Z,e),items:f}]}))}}))]}}))}))}function be(e){window.__c={n:"ExperimentSettingsSection"};const t=(0,m.yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return a()("div",{},void 0,a()(U.Z,{},void 0,"Experiments"),a()(O.Z,{isSmall:!0,isMultiline:!0,[te]:t.headerLabelStyle},void 0,"Locally toggle experiments."),a()(T.ZP,{popupType:T.Z4[X],renderOrigin:e=>l[Y](A.Z,o()({},e,{isLarge:!0,[te]:t.PlainButtonStyle}),"View Experiments"),[z]:e=>{const t={[J]:S.og.Modal,whiteBackground:!0,title:"Experiments",[de]:a()(y.FormattedMessage,{[Q]:"Done",id:j}),[H]:e[K]};return a()(P.Z,{capture:!0,allowEsc:!0,[z]:()=>l[Y](_.Z,t,a()(G.Z,{disableScroller:!0},void 0,a()(ye,{})))})}}))}},85215:(e,t,s)=>{s.d(t,{l:()=>h});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(81954),l=s(5366),c=s(16639),u=s(79315),m=s(52275),p=s(12793),g=s(31278);function h(e){window.__c={n:"GroupMenuItem"};const{group:t,menuListItemProps:s}=e,i=(0,d.VK)((()=>{const e=u.default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t]),n=(0,l.useIntl)(),h=(0,c.kF)({intl:n,group:t});return r.createElement(m.Z,o()({},s,{icon:i?a()(g.Z,{disabled:!0,size:22,icon:i,isEmptyPage:!1,title:h}):a()(p.Z,{size:22}),title:h}))}},64131:(e,t,s)=>{s.d(t,{Z:()=>re});var i=s(77094),o=s.n(i),n=s(97464),a=s.n(n),r=s(67294),d=s(480),l=s(81954),c=s(24405),u=s(8848),m=s(3909),p=s(70203),g=s(82990),h=s(5366),v=s(50906),f=s(98724),y=s(87279),b=s(98742),w=s(89086),S=s(52689),M=s(63334),k=s(24666),Z=s(41216),C=s(64921),T=s(31945),P=s(56940),F=s(58261),I=s(78140),_=s(32163),x=s(40721),A=s(72495),D=s(58032);const B=s(85).t5q,R=s(85).yKO,O=s(85).j7K,G=s(85).uIm,U=s(85).y79,E=s(85).Yzm,N=s(85).Zij,L=s(85).Joh,V=s(85).a3v,q=s(85).XNW,W=s(85).F7y,z=s(85).NLk,K=s(85).XCs,H=s(85).YDv,Q=s(85).pBS,j=s(85).S6b,J=s(85).nx5,Y=s(85).E0z,X=s(85).dLQ,$=s(85).jkI,ee=s(85).H1U,te=s(85).D7I,se=s(85).rpY,ie=s(85).PLZ,oe=s(85).UA5,ne=s(85).UhS,ae=r.Fragment;const re=function(e){window.__c={n:"HighlightSelectionButton"};const{disabled:t,style:s}=e,i=(0,l.qz)(e[ne],M.Z),n=(0,d.O7)(),re=(0,h.useIntl)(),de=(0,c.Fg)(),le=(0,r.useCallback)((()=>{f.aS({environment:n,annotation:["h",S.Z.state[oe]]}),v[ie](n,{action:"h",[oe]:S.Z.state[oe]})}),[n]),ce=(0,r.useCallback)((e=>{v[ie](n,{action:"h"})}),[n]),ue=(0,r.useCallback)((()=>{k.default.emit()}),[]),me=(0,r.useCallback)((e=>{f.mX({environment:n,annotationType:"h"}),"default"!==e&&(S.Z.setHighlightColor(e),le())}),[n,le]),pe=(0,r.useCallback)(((e,t,s,i)=>({key:t||e,action:()=>{s(),me(e),i.close()},[se]:s=>r[te](Z.Z,a()({},s,{[oe]:e,overrideDisplayName:t}))})),[me]),ge=(0,l.VK)((()=>{const e=(0,w.Ld)("h");return e?p.getHighlightAnnotationData(e):"default"}),[]),he=(0,c.yK)((e=>({colorIcon:{display:"inline-flex",[ee]:$,justifyContent:$,height:18,textAlign:$,fontSize:15,borderRadius:2,...!n[Y][X]&&{width:18,fontWeight:g.Z.fontWeight.medium,marginBottom:2},...(0,u.A_)(ge,e)}})),[n[Y][X],ge]);return o()(T.ZP,{popupType:n[Y][X]?T.Z4.SlideUp:T.Z4.Popup,originGap:4,onClose:ue,onClick:ce,renderOrigin:e=>o()(D.Z,{[L]:()=>o()(ae,{},void 0,o()("div",{},void 0,o()(h.FormattedMessage,{[J]:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),o()("div",{},void 0,o()(F.Z,{style:{[oe]:de[j]},name:Q}))),[se]:i=>r[te](C.Z,a()({style:{display:"flex",[ee]:$,[H]:7,[K]:6,[z]:W,...s},disabled:t,disabledFeedback:t},(0,b.Z)(e,i)),o()("div",{style:he.colorIcon},void 0,n[Y][X]?o()(h.FormattedMessage,{[J]:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),m.Z.chevronDown({width:10,[q]:n[Y][X]?4:3,fill:"dark"===de.mode?u.ZP.white:de[V]}))}),[se]:e=>{let t;return t=n[Y][X]?{menuType:y.og.Modal,[N]:o()(h.FormattedMessage,{[J]:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:o()(x.CancelMenuText,{}),onClickRight:()=>{e.close()}}:{menuType:y.og.Popup},r[te](I.Z,t,o()(P.Z,{capture:n[Y][X],store:i,ignoreBlockSelection:!1,[R]:!0,[B]:!1,[se]:t=>{const s=u.CY.map((s=>pe(s,void 0,t,e))),i=[pe("default",re[E]({[J]:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),t,e),...u._K.map((s=>pe(s,void 0,t,e)))],n=S.Z.state[oe];return o()(_.Z,{type:_.i[U],sections:[{key:0,items:[{key:0,action:()=>{t(),me(n),e.close()},[se]:e=>r[te](Z.Z,a()({},e,{[oe]:n,[G]:[Q]}))}],[se]:e=>r[te](A.Z,a()({},e,{[N]:o()(h.FormattedMessage,{[J]:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:s,[se]:e=>r[te](A.Z,a()({},e,{[N]:o()(h.FormattedMessage,{[J]:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:i,[se]:e=>r[te](A.Z,a()({},e,{[N]:o()(h.FormattedMessage,{[J]:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],[O]:void 0})}}))}})}},82945:(e,t,s)=>{s.d(t,{Z:()=>A});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(480),l=s(24405),c=s(3909),u=s(5366),m=s(50906),p=s(7476),g=s(77505),h=s(24666),v=s(64921),f=s(58261),y=s(58032);const b=s(85).D7I,w=s(85).PXg,S=s(85).pkR,M=s(85).F7y,k=s(85).NLk,Z=s(85).jkI,C=s(85).H1U,T=s(85).nx5,P=s(85).mEm,F=s(85).PLZ,I=s(85).XQm,_=s(85).QGQ,x=s(85).S6b;function A(e){window.__c={n:"InlineCommentButton"};const t=(0,d.O7)(),s=t.device.isMobile,i=(0,l.yK)((e=>({keyboardShorcut:{color:e[x]}})),[]),n=()=>{let s;const i=h.default.state;"empty"!==i.mode&&(s=g[_](),p.WD({environment:t,blockStore:e.blockStore,[I]:i[I]})),m[F](t,{action:P,from:s?"simple_table_cell":void 0})};return a()(y.Z,{renderTooltip:()=>a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(u.FormattedMessage,{[T]:"Comment on selected text",id:"inlineCommentButton.tooltip"})),a()("div",{},void 0,a()(f.Z,{style:i.keyboardShorcut,name:P}))),render:t=>r[b](v.Z,o()({style:{display:"flex",[C]:Z,padding:"0 10px",[k]:M,...e.style},[S]:e[S],disabledFeedback:e[S],onClick:n},t),c.Z.speechBubbleThin({width:s?18:16,height:s?18:16,marginTop:s?0:1,[w]:4}),!s&&a()(u.FormattedMessage,{[T]:"Comment",id:"inlineCommentButton.commentLabel"}))})}},93007:(e,t,s)=>{s.d(t,{Z:()=>u});var i=s(77094),o=s.n(i),n=(s(67294),s(83355));const a=s(85).lUt;function r(){return(navigator.languages?navigator.languages.map((e=>e[a]())):navigator.language?[navigator.language[a]()]:navigator.userLanguage?[navigator.userLanguage[a]()]:[]).map((e=>e.split("-")[0]))}const d=["ar","az","he","fa","ur"],l=s(85).K3d;class c extends n.Z{renderComponent(){return this.renderTranslatedText()}renderTranslatedText(){const{translations:e}=this.props,t=r();for(const s of t){const t=e[s];if(t)return o()("div",{style:this[l](s)},void 0,t)}}[l](e){return d.includes(e)?{direction:"rtl",...this.props.style}:{...this.props.style}}}c.displayName="LocaleText";const u=c},905:(e,t,s)=>{s.d(t,{Z:()=>u});var i=s(77094),o=s.n(i),n=(s(67294),s(5366)),a=s(97880);const r=s(85).KBD,d=(s(85).jnv,s(85).K7S),l=s(85).nx5,c=s(85).tTc;function u(e){let{target:t,[c]:s}=e;switch(t){case"notify_mobile":return o()(n.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",[l]:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return o()(n.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",[l]:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return o()(n.FormattedMessage,s?{id:"notificationSettings.emailNotificationSettings.improvedDescription",[l]:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"}:{id:"notificationSettings.emailNotificationSettings.description2",[l]:"Receive email updates, including mentions and comment replies"});case d:return o()(n.FormattedMessage,s?{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",[l]:"Receive emails about activity in your workspace, even when you're active on the app"}:{id:"notificationSettings.emailAlwaysNotificationSettings.description",[l]:"Receive updates by email, even when you're active on the app"});case"notify_slack":return o()(n.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.default.description",[l]:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case r:return o()(n.FormattedMessage,{id:"notificationSettings.emailDigestNotificationsSettings.default.description",[l]:"Receive email digests every 8 hours for changes to pages you’re subscribed to"});case"marketing_emails":return o()(n.FormattedMessage,{id:"notificationSettings.marketingEmails.description",[l]:"Receive occasional emails about product launches and new features from Notion"});default:(0,a.unreachable)(t)}}},79080:(e,t,s)=>{s.d(t,{Z:()=>u});var i=s(77094),o=s.n(i),n=(s(67294),s(5366)),a=s(97880);const r=s(85).KBD,d=s(85).K7S,l=s(85).nx5,c=s(85).tTc;function u(e){let{target:t,[c]:s}=e;switch(t){case"notify_mobile":return o()(n.FormattedMessage,{[l]:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return o()(n.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",[l]:"Desktop push notifications"});case"notify_email":return o()(n.FormattedMessage,s?{id:"notificationSettings.productNotifEmails.title",[l]:"Activity in your workspace"}:{id:"notificationSettings.emailNotificationSettings.title",[l]:"Email notifications"});case d:return o()(n.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",[l]:"Always send email notifications"});case"notify_slack":return o()(n.FormattedMessage,{id:"notificationSettings.slackNotificationSettings.title",[l]:"Slack notifications"});case r:return o()(n.FormattedMessage,{id:"notificationSettings.emailDigestNotificationSettings.title",[l]:"Email digests"});case"marketing_emails":return o()(n.FormattedMessage,{id:"notificationSettings.marketingEmails.title",[l]:"Announcements and update emails"});default:(0,a.unreachable)(t)}}},15311:(e,t,s)=>{s.d(t,{Z:()=>W});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(81954),d=s(5366),l=s(97880),c=s(98104),u=s(3924),m=s(17652),p=s(33665),g=s(28187),h=s(79315),v=s(88632),f=s(66836),y=s(61519),b=s(64369),w=s(74523),S=s(79331),M=s(21291),k=s(27386),Z=s(23189),C=s(51124),T=s(73490),P=s(16347);const F=s(85).KuF,I=s(85).KBD,_=s(85).K7S,x=s(85).$6u,A=s(85).YlB,D=s(85).zHB,B=s(85).P3s,R=s(85).g7N,O=s(85).nx5,G=s(85).omX,U=s(85).jkI,E=s(85).YZi,N=s(85).GiO,L=s(85).D4q,V=s(85).h_J,q=s(85).dLQ;const W=(0,u.M)((function(e){let{[q]:t,[V]:s,userEmailDomainSettings:i}=e;window.__c={n:"NotificationsAndPersonalSettings"};const{[L]:u,isPhone:W,isIOS:z}=(0,a.Fy)(),K=(0,a.O7)(),H=(0,r.VK)((()=>v.Z.state.online),[]),Q=(0,r.VK)((()=>{var e;const s=(null===(e=h.default.state[N])||void 0===e?void 0:e.getNotifyEmail())||!1,i=(0,g.kC)(),n=(0,m.rB)();return function(e){const{[q]:t,[L]:s,showNotifyEmailAlwaysSetting:i,showSlackNotificationSetting:n,emailImprovementsExperimentEnabled:a}=e;return[{key:D,[E]:()=>o()(M.A,{target:D})},!t&&s?{key:A,[E]:()=>o()(M.A,{target:A})}:void 0,{key:x,[E]:()=>o()(M.A,{target:x})},i?{key:_,[E]:()=>o()(M.A,{target:_})}:void 0,a?{key:I,[E]:()=>o()(M.A,{target:I})}:void 0,n?{key:"notify_slack",[E]:()=>o()(T.O,{target:"notify_slack"})}:void 0,a?{key:F,[E]:()=>o()(M.A,{target:F})}:void 0].filter(l.isDefined)}({[q]:t,[L]:u,showNotifyEmailAlwaysSetting:s,showSlackNotificationSetting:i,emailImprovementsExperimentEnabled:n})}),[t,u]),j=(0,r.VK)((()=>t?(0,S.E)({isPhone:W,isIOS:z,[V]:s,userEmailDomainSettings:i}):(0,S.Z)({environment:K})),[K,t,W,z,s,i]),J=(0,r.VK)((()=>[(0,f.h)(K)?{key:"cookies",[E]:()=>o()(f.Z,{[q]:t})}:void 0,{key:"view-history",[E]:()=>o()(P.H,{[q]:t})}].filter(l.isDefined)),[K,t]),{paddingBottomCSS:Y}=(0,r.VK)((()=>K.WindowSizeStore.state),[K]);return(0,n.useEffect)((()=>{c.clear(K)}),[K]),H?o()(k.Z,{disableScroller:t},void 0,o()(Z.Z,{large:!t,divider:"full"},void 0,o()(d.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",[O]:"My notifications"})),o()(C.O,{items:Q}),o()(y.Z,{size:48,isHidden:!0}),o()(Z.Z,{large:!t,divider:"full"},void 0,o()(d.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",[O]:"My settings"})),o()(C.O,{items:j}),o()(y.Z,{size:48,isHidden:!0}),o()(Z.Z,{large:!t,divider:"full"},void 0,o()(d.FormattedMessage,{id:"notificationAndPersonalSettings.privacySection.title",[O]:"Privacy"})),o()(C.O,{items:J}),o()(y.Z,{size:48,isHidden:!1}),o()("div",{style:{marginTop:4,[R]:t?Y:void 0}},void 0,o()(w.Z,{title:o()(d.FormattedMessage,{id:"notificationSettings.helpButton.caption",[O]:"Learn about notifications & settings"}),href:(0,p.getLocalizedUrl)("guides.notificationSettings"),[B]:"notifications_settings"}))):o()(k.Z,{},void 0,o()(b.Z,{isSmall:!0,style:{textAlign:U}},void 0,o()(d.FormattedMessage,{[O]:G,id:"notificationSettingsButton.goOnline.prompt"})))}))},1548:(e,t,s)=>{s.d(t,{Z:()=>oe});var i=s(77094),o=s.n(i),n=s(67294),a=s(83355),r=s(8848),d=s(3909),l=s(96068),c=s(82990),u=s(5366),m=s(50906),p=s(54642),g=s(43250),h=s(33954),v=s(69503),f=s(61519),y=s(36488),b=s(74194),w=s(53953),S=s(64369),M=s(88175),k=s(75752),Z=s(99657),C=s(24173),T=s(13490),P=s(55422);const F=s(85).ChN,I=s(85).BvV,_=s(85).ymU,x=s(85).BJF,A=s(85).cZW,D=s(85).kdC,B=s(85).Dd5,R=s(85).wJk,O=s(85).tBn,G=s(85).D7I,U=s(85).PG2,E=s(85).dLQ,N=s(85).hxe,L=s(85).SK6,V=s(85).l6S,q=s(85).nx5,W=s(85).Yzm,z=s(85).W$M,K=s(85).Swd,H=s(85).RzL,Q=s(85).nm$,j=s(85).QmD,J=s(85).mb3,Y=s(85)._E3,X=s(85).KqM,$=s(85).wgE,ee=s(85).Wp_,te=s(85).P0R,se=s(85).L48;class ie extends a.Z{constructor(){super(...arguments),this[se]=void 0,this.handleChangePasswordClick=()=>{const{mfaStatus:e}=this[te];"on"===e?v.Z[ee]({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=this[se])||void 0===e?void 0:e.exit()}}):(m.trackChangePasswordClick(this[$]),v.Z[ee]({open:!0,setNewPassword:!0,isSet:!1,[X]:"",repeatPassword:""}))},this.handleOldPasswordChange=e=>{(v.Z[Y]()||v.Z[J]())&&v.Z[ee]({...v.Z[j],oldPassword:e[Q].value,alert:void 0})},this.handleClearOldPassword=()=>{(v.Z[Y]()||v.Z[J]())&&v.Z[ee]({...v.Z[j],oldPassword:"",alert:void 0})},this.handlePasswordChange=e=>{v.Z[Y]()&&v.Z[ee]({...v.Z[j],[X]:e[Q].value,alert:void 0})},this[H]=()=>{const{onCancel:e}=v.Z[j];v.Z.reset(),e&&e()},this[K]=()=>{v.Z[Y]()&&v.Z[ee]({...v.Z[j],[X]:"",repeatPassword:"",alert:void 0})},this.handleRepeatPasswordChange=e=>{v.Z[Y]()&&v.Z[ee]({...v.Z[j],repeatPassword:e[Q].value,alert:void 0})},this.handleClearRepeatPassword=()=>{v.Z[Y]()&&v.Z[ee]({...v.Z[j],repeatPassword:"",alert:void 0})},this[z]=()=>{if(v.Z[Y]()){const{[X]:e,repeatPassword:t}=v.Z[j];e&&t&&e!==t&&v.Z[ee]({...v.Z[j],alert:this[te].intl[W]({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",[q]:"Your new password does not match."})})}},this[V]=async()=>{if(!v.Z[Y]())return;const{oldPassword:e,[X]:t,repeatPassword:s}=v.Z[j],{hasPassword:i}=this[te],{intl:o}=this[te];let n;if(i&&!e)n=o[W]({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",[q]:"Please enter your old password."});else if(t){const e=(0,l.I)(t);e.success?s?t!==s&&(n=o[W]({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",[q]:"Your passwords do not match."})):n=o[W]({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",[q]:"Please repeat your new password."}):n=this.getPasswordErrorMessage(e.reason)}else n=o[W]({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",[q]:"Please enter a password."});if(n)return void v.Z[ee]({...v.Z[j],alert:n});const a=await p.setPassword(this[$],{oldPassword:e,newPassword:t});if("success"===a.type)this[te].onReloadSettings(),v.Z[ee]({...v.Z[j],isSet:!0});else{const e=(0,h.wf)(this[te].intl,a);v.Z[ee]({...v.Z[j],alert:e})}},this.handleShowRemovePasswordModalClick=()=>{v.Z[ee]({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})},this.handleRemovePasswordClick=async()=>{if(!v.Z[J]())return;const{oldPassword:e}=v.Z[j];if(m.trackRemovePasswordClick(this[$]),!e)return void v.Z[ee]({...v.Z[j],alert:this[te].intl[W]({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",[q]:"Please enter your current password."})});const t=await p.setPassword(this[$],{oldPassword:e,clearPassword:!0});if("success"===t.type)this[te].onReloadSettings(),this.removePasswordSuccess();else{const e=(0,h.wf)(this[te].intl,t);v.Z[ee]({...v.Z[j],alert:e||this[te].intl[W]({id:"passwordSettings.removePasswordModal.message",[q]:"Error removing password. Please try again later."})})}},this.defaultErrorMessage=this[te].intl[W]({id:"passwordSettings.genericPasswordSaveError",[q]:"Error saving password. Please try again later."})}[L](e){if(super[L](e),"on"===e.mfaStatus&&void 0===this[se]){const e=new k.r(this[$]),t=new C.c;this[se]=new C.W(t,e)}}renderComponent(){const{device:e}=this[$];return n[G](n[O],null,o()(P.Z,{type:N,[E]:e[E],title:o()(u.FormattedMessage,{id:"profileSettings.accountSecuritySection.passwordSetting.label",[q]:"Password"}),caption:this.renderPasswordDetails(),isOn:this[te].hasPassword,buttonLabel:o()(u.FormattedMessage,{id:"passwordSetting.changePasswordButton.label",[q]:"Change password"}),[U]:this.handleChangePasswordClick}),this.renderPasswordModal())}renderPasswordDetails(){return this[te].isError?o()(u.FormattedMessage,{id:"passwordSettings.passwordSetError.message",[q]:"Your password cannot be set at this time. Please try again later."}):this[te].samlEnforced?o()(u.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",[q]:"Your password is managed through your SAML Single Sign-on Provider."}):this[te].isEducationPlan?this.renderEducationPlanInfo():o()(u.FormattedMessage,{id:"passwordSettings.setPassword.message",[q]:"Set a permanent password to login to your account."})}renderPasswordModal(){const{open:e}=v.Z[j];return o()(w.Z,{open:e,[R]:this[H],className:g.passwordModal,preventHideChildrenWhileOpening:!0,render:()=>o()(y.Z,{capture:!0,allowEsc:!0,render:()=>o()(n.Fragment,{},void 0,this.renderPasswordEdit(),this.renderPasswordUpdateComplete(),this.renderRemovePassword(),this.renderVerifyIdentity(),this.renderPasswordRemoved())})})}renderVerifyIdentity(){if(v.Z.isVerifyIdentityWithMfaModal()&&void 0!==this[se])return this[se].settingsConfirmIdentityForPasswordSetting(),o()(Z.Z,{[se]:this[se],[R]:this[H],onStartSMS:()=>{},onStartTOTP:()=>{},onStartBackupCodes:()=>{}})}renderPasswordEdit(){const{isEducationPlan:e}=this[te];if(!v.Z[Y]())return;const{[X]:t,repeatPassword:s,oldPassword:i,alert:a}=v.Z[j],{hasPassword:r,email:l}=this[te],c=o()(u.FormattedMessage,r?{id:"profileSettings.changePasswordModal.title",[q]:"Change password"}:{id:"profileSettings.setPasswordModal.title",[q]:"Set a password"}),m=n[G](n[O],null,o()(u.FormattedMessage,{id:"passwordSettings.passwordModal.passwordGuidelines",[q]:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),e&&n[G](n[O],null," ",this.renderEducationPlanInfo())),p=n[G](n[O],null,o()(T.Z,{},void 0,o()(u.FormattedMessage,{id:"passwordSettings.passwordModal.newPasswordInput.label",[q]:"Enter a new password"})),o()(b.Z,{type:X,value:t,[B]:this.handlePasswordChange,[D]:!0,onClearButtonClick:this[K],[A]:this[te].intl[W]({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",[q]:"New password"}),focusInitial:!r,onBlur:this[z],autoComplete:"new-password"}),o()(f.Z,{size:10,isHidden:!0}),o()(T.Z,{},void 0,o()(u.FormattedMessage,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",[q]:"Confirm your new password"})),o()(b.Z,{type:X,value:s,[B]:this.handleRepeatPasswordChange,[D]:!0,onClearButtonClick:this.handleClearRepeatPassword,[A]:this[te].intl[W]({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",[q]:"Confirm password"}),onBlur:this[z],autoComplete:"new-password"})),g=n[G](n[O],null,o()(b.Z,{style:{display:"none"},type:"text",value:l,autoComplete:"username",disabled:!0}),o()(T.Z,{},void 0,o()(u.FormattedMessage,{id:"passwordSettings.passwordModal.currentPasswordInput.label",[q]:"Enter your current password"})),o()(b.Z,{type:X,value:i,[B]:this.handleOldPasswordChange,[D]:!0,onClearButtonClick:this.handleClearOldPassword,[A]:this[te].intl[W]({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",[q]:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),o()(f.Z,{size:10,isHidden:!0}),p),h={text:o()(u.FormattedMessage,r?{id:"passwordSettings.passwordModal.changePasswordButton.label",[q]:"Change password"}:{id:"passwordSettings.passwordModal.setPasswordButton.label",[q]:"Set a password"}),[U]:this[V]},y=[{text:o()(u.FormattedMessage,{id:"passwordSettings.passwordModal.removePasswordButton.label",[q]:"Remove password"}),[U]:this.handleShowRemovePasswordModalClick,type:"button",view:"plain"}];return o()(M.Z,{title:c,header:m,icon:d.Z.setPassword(this[x]()),[R]:this[H],[_]:h,secondaryActions:this.canRemovePassword()?y:void 0,[I]:{width:350,padding:24}},void 0,r?g:p,o()(S.Z,{isMultiline:!0,style:this.getAlertStyle(a)},void 0,a))}renderPasswordUpdateComplete(){if(!v.Z.isPasswordSetModal())return;const{isEducationPlan:e}=this[te],{oldPassword:t}=v.Z[j],s=o()(u.FormattedMessage,void 0===t?{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",[q]:"Your password has been set"}:{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",[q]:"Your password has been saved"}),i=o()(u.FormattedMessage,e?{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",[q]:"You'll be able to log in, even if you lose access to your school email address."}:{id:"passwordSettings.passwordUpdateSuccessModal.header",[q]:"We'll ask for this password when you log in to your account."});return o()(M.Z,{title:s,header:i,icon:d.Z.thinCheck(this[x]()),[R]:this[H]})}renderRemovePassword(){const{isEducationPlan:e,mfaStatus:t}=this[te];if(!v.Z[J]())return;const{oldPassword:s,alert:i}=v.Z[j],a=o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.title",[q]:"Remove password for temporary login codes?"}),r=n[G](n[O],null,o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.header",[q]:"You'll receive a link and login code via email when you try to login."}),e&&n[G](n[O],null," ",o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",[q]:"If you lose access to your school email, you'll be unable to log back into Notion."})),"on"===t&&n[G](n[O],null," ",o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",[q]:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>o()("span",{style:{[F]:c.Z[F].semibold}},void 0,e)}}))),l={text:o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.continueButton.label",[q]:"Continue"}),[U]:this.handleRemovePasswordClick,isRed:!0},m=[{text:o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",[q]:"Keep using password"}),[U]:this[H],type:"button",view:"plain"}];return o()(M.Z,{title:a,header:r,icon:d.Z.paperAirplane(this[x]()),[R]:this[H],[_]:l,secondaryActions:m,[I]:{width:350,padding:24}},void 0,o()(T.Z,{hasMarginTop:!0},void 0,o()(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.passwordInput.label",[q]:"Enter your current password"})),o()(b.Z,{type:X,value:s,[B]:this.handleOldPasswordChange,[D]:!0,onClearButtonClick:this.handleClearOldPassword,[A]:this[te].intl[W]({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",[q]:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),o()(S.Z,{isMultiline:!0,style:this.getAlertStyle(i)},void 0,i))}renderPasswordRemoved(){if(!v.Z.isRemovePasswordSuccessModal())return;const e=o()(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.title",[q]:"Password removed"}),t=o()(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.header",[q]:"To log into your account, we’ll send you a temporary login code to your email."});return o()(M.Z,{title:e,header:t,icon:d.Z.thinCheck(this[x]()),[R]:this[H]})}renderEducationPlanInfo(){return o()(u.FormattedMessage,{id:"passwordSettings.passwordModal.educationPlanGuidelines",[q]:"If you lose access to your school email address, you'll be able to log in using your password."})}[x](){return{width:27,height:27,fill:this.theme.regularIconColor}}getAlertStyle(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:r.ZP.red,fontSize:c.Z.fontSize.UISmall.desktop}}removePasswordSuccess(){v.Z[J]()&&v.Z[ee]({...v.Z[j],isSuccess:!0,oldPassword:"",alert:void 0})}getPasswordErrorMessage(e){const t=h.Ql[e.type];return t?this[te].intl[W](t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this[te],{hasPassword:t}=this[te];return!e&&t}}ie.displayName="PasswordSettings";const oe=(0,u.injectIntl)(ie)},24145:(e,t,s)=>{s.d(t,{Z:()=>x});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(480),l=s(81954),c=s(5366),u=s(75472),m=s(65598),p=s(26781),g=s(25464),h=s(58032),v=s(91487),f=s(47082);const y=s(85).Mm1,b=s(85)._V5,w=s(85).X9J,S=s(85).dLQ,M=s(85).YyZ,k=s(85).Yzm,Z=s(85).OtN,C=s(85).D7I,T=s(85).nx5,P=s(85).pPv,F=s(85).H6e,I=s(85).Ut2,_=s(85).Jy7;const x=function(e){window.__c={n:"PermissionsInviteInput"};const{origin:t,[_]:s,store:i,[I]:n,handleInputChange:x,handleInputSubmit:A,defaultRoleForNonBot:D,isTeamsEnabled:B,right:R,focus:O,handleFocus:G}=e,U="share_menu"===t||"add_members"===t,E="add_members"===t,[N,L]=(0,l.AF)(s),V=(0,d.O7)(),{device:q}=V,W=(0,c.useIntl)(),{tokenQuery:z}=N,K=(0,p.i)(i),H=N[F].map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,s=(0,u.OA)(e),i="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,d=s?K:void 0,l={key:t,target:e,onClickRemove:n,role:N[P],shouldWrap:U,showInfoIcon:Boolean(d)};return U&&i?a()(h.Z,{placement:g.u.Top,disableTooltip:E,renderTooltip:()=>s?d||a()(c.FormattedMessage,{[T]:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:i}}):i,render:s=>r[C]("span",o()({},s,{key:t}),r[C](v.Z,o()({},l,{[Z]:(0,u.gQ)(e)})))}):r[C](v.Z,l)}));return r[C](f.Z,o()({focus:q[S]?void 0:O,focusInitial:q[S],focusAfterAnimation:!0,onClick:()=>{q[S]||null==G||G()},format:f.Z.Format.Share,value:z,onChange:x,type:"email",tokens:H,disabled:!1,autoComplete:"off",placeholder:U?B?W[k]({[T]:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):W[k]({[T]:"Add emails or people",id:M}):(0,m.isSpaceStore)(i)?W[k]({id:"inviteUserModal.searchInput.placeholder",[T]:"Search name or emails"}):W[k]({id:"permissionsInvite.searchInput.placeholder",[T]:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...N};e[F]=e[F].slice(0,-1),0===e[F].length&&(e[w]=!0,e[P]=D),L(N)},right:R,inputAndTokenWrapRightStyle:{[b]:V.device[S]?0:N[w]?5:6,[y]:V.device[S]||U?0:4},onEmptySubmit:()=>A(),dontShowBorderBottom:q.isAndroid,showBorder:U},U&&{style:{borderRadius:3,[b]:N[w]?3:0,[y]:0,...O&&{background:"none"}}}))}},43579:(e,t,s)=>{s.d(t,{Z:()=>J});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(480),l=s(81954),c=s(24405),u=s(66897),m=s(33728),p=s(3909),g=s(5366),h=s(82990),v=s(7928),f=s(50906),y=s(95209),b=s(4708),w=s(75472),S=s(65598),M=s(21115),k=s(29677),Z=s(78291),C=s(52275),T=s(32163),P=s(43765),F=s(77137),I=s(72495),_=s(58032),x=s(85215),A=s(69507),D=s(97680);const B=s(85).Yzm,R=s(85).ChN,O=s(85).H6e,G=s(85).X9J,U=s(85).D7I,E=s(85).ESK,N=s(85).QNi,L=s(85).T04,V=s(85).TtP,q=s(85).W3n,W=s(85).aqt,z=s(85).dbe,K=s(85).Jy7,H=s(85).nx5,Q=(0,g.defineMessages)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",[H]:"{userNameAndEmail} is invited to this page already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",[H]:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",[H]:"{userNameAndEmail} is invited to this team already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",[H]:"Click to invite {userNameAndEmail}"}});function j(e,t){return e.filter(((e,s)=>s<t))}const J=function(e){window.__c={n:"PermissionsInviteSearchRequest"};const{store:t,shouldShowBots:s,shouldShowGroups:i,sectionRenderLimit:n,membersOnly:J,hideUserTypeToken:Y,disableInvitedUsers:X}=e,[$,ee,te]=(0,l.AF)(e[K]),se=(0,d.O7)(),{device:ie}=se,oe=(0,g.useIntl)(),{[z]:ne}=$,ae=(0,r.useMemo)((()=>w.ZK({environment:{device:ie}})),[ie]),re=(0,c.yK)((e=>({roleBadge:{...ae},invitedBadge:{...ae,backgroundColor:e.defaultBadgeBackground}})),[ae]),de=(0,l.VK)((()=>(0,b.isContextualInviteOnSelectFocusEnabled)(se)?"invitee-popup-closed":"invitee"),[se]),le={request:ne,performRequest:e=>y.getInvitableActorsFromInputQuery({query:e,sectionLimit:{userLimit:10,botLimit:s?10:0,groupLimit:i?10:0,importContactLimit:0},membersOnly:J,environment:se,intl:oe}),render:(e,s,d)=>{if(e)return a()(A.l,{[q]:!d},void 0,a()(P.Z,{title:a()(g.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",[H]:W})}));const l=s&&{...s,importedContacts:(0,w.Bu)(s.inviteUsers,s.importedContacts)},c=l&&(null==ne?void 0:ne[V])>0,{inviteUsers:y,inviteGroups:b,importedContacts:F=[]}=c?l:(0,w.NN)({currentInviteActors:l,[K]:te,targetStore:t}),J=[...j(y,n),...j(F,10)].map(((e,s)=>{const i="newUser"===e.type?e.value[L]:e.value.id,n=function(e){if("existingUser"!==e.type)return;const{data:t}=Z.default.state,s=(t?M.getVisibleUsers(t):[]).find((t=>t.userId===e.value.id));return s?s.role:"not_in_space"}(e),d=Boolean(c&&(0,w.cm)({[K]:te,userTarget:e,targetStore:t}));return{key:i,render:s=>{const{[N]:i,userTypeToken:l}=function(e){const{userTarget:t,targetStore:s,isInvited:i,userSpaceRole:o,styles:n,intl:r}=e,d="newUser"!==t.type&&t.value.name?`${t.value.name} (${t.value[L]})`:t.value[L],l=o&&"not_in_space"!==o;if(i)return{[N]:(0,S.isSpaceStore)(s)?r[B](Q.invited_space,{userNameAndEmail:d}):(0,S.isBlockStore)(s)?r[B](Q.invited_page,{userNameAndEmail:d}):r[B](Q.invited_team,{userNameAndEmail:d}),userTypeToken:a()("div",{style:{...n.invitedBadge}},void 0,a()(g.FormattedMessage,{id:"inviteUserModal.userRole.invitedBadge.label",[H]:"Invited"}))};if(l){const e=w.Ji({role:o,intl:r,nameOrEmail:d});return{[N]:e[N],userTypeToken:a()("div",{style:{...n.roleBadge}},void 0,e.userRoleBadge)}}return{[N]:r[B](Q.not_in_space,{userNameAndEmail:d}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:n,isInvited:d,styles:re,intl:oe});return"existingUser"===e.type?r[U](D.Z,o()({},s,{actor:(0,u.dp)(e.value),right:Y?void 0:l,[N]:i,tooltipPlacement:_.Z[E].Left,disabled:X&&d})):a()(_.Z,{placement:_.Z[E].Left,alignment:_.Z.Alignment.Start,textWrap:!0,render:t=>r[U](C.Z,o()({},s,t,{icon:p.Z.mailRound({width:24,height:24}),right:l,title:e.value[L].trim(),disabled:X&&d})),disableTooltip:!i,renderTooltip:()=>i})},action:()=>{if(d)return;if(!$[G]&&(0,k.ow)($))return;const t={...e,..."existingUser"===e.type&&{spaceRole:n}};f.trackInviteSelectTarget(se,{...w.a_(se,$),invite_token_query:ne,selected_user_token:e,selected_user_token_rank:s}),te.setState({...$,[O]:[...$[O],t],[G]:!1,[z]:"",inputFocus:de})}}})),ee=j(b,n).map((e=>{const{value:t}=e;return{key:t.id,render:e=>a()(x.l,{group:t,menuListItemProps:e}),action:()=>{!$[G]&&(0,k.ow)($)||te.setState({...$,[O]:[...$[O],e],[G]:!1,[z]:"",inputFocus:de})}}})),ie=[],ae=$[G]||!(0,k.ow)($);if(J[V]>0&&ae&&ie.push({key:"user results",render:e=>r[U](A.l,o()({},e,{[q]:!d})),items:J}),i&&ee[V]>0&&ae&&ie.push({key:"group results",render:e=>r[U](I.Z,o()({},e,{title:a()(g.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectGroupTitle",[H]:"Select a group"}),[q]:!d})),items:ee}),0===ie[V]&&ae){const e=(0,m.H3)($[z]);if((0,m.oH)(e)){const i={type:"newUser",value:{[L]:e},source:L},o=(0,w.Nd)({target:i,[K]:te});if(!o)return;if(o)return a()(A.l,{[q]:!d},void 0,a()(P.Z,{title:a()(g.FormattedMessage,{id:"inviteUserModal.userAlreadyInvitedMessage",[H]:"Already inviting {user}.",values:{user:a()("span",{style:{[R]:h.Z[R].bold}},void 0,(0,w.DF)({intl:oe,target:o}))}})}));const n=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value[L]===e));if(n&&"existingUser"===n.type&&(0,w.Zp)({store:t,target:n}))return a()(A.l,{[q]:!d},void 0,a()(P.Z,{title:a()(g.FormattedMessage,{id:"inviteUserModal.userAlreadyHasPermissionMessage",[H]:"{user} already has permission.",values:{user:a()("span",{style:{[R]:h.Z[R].bold}},void 0,(0,v.Nz)(oe,n.value))}})}))}else{if(!$[z])return a()(A.l,{[q]:!d},void 0,a()(P.Z,{title:a()(g.FormattedMessage,{id:"inviteUserModal.searchPersonDropdown.noSearchResultsMessage",[H]:"Type or paste in emails above, separated by commas."})}));ie.push({key:"user results",render:e=>r[U](A.l,o()({},e,{[q]:!d,title:a()(g.FormattedMessage,{id:"inviteUserModal.searchDropdown.addPeople",[H]:"Keep typing to invite email"})})),items:[{key:$[z],render:e=>r[U](C.Z,o()({icon:p.Z.mailRound({width:24,height:24}),title:$[z]},e)),action:()=>{}}]})}}return a()(T.Z,{type:T.i.Vertical,initialFocus:ne[V]>0?0:void 0,sections:ie})}};return r[U](F.Z,le)}},91487:(e,t,s)=>{s.d(t,{Z:()=>k});var i=s(77094),o=s.n(i),n=s(67294),a=s(83355),r=s(15070),d=s(84619),l=s(3909),c=s(97880),u=s(7928),m=s(5366),p=s(16639),g=s(58032),h=s(85567);const v=s(85).D7I,f=s(85).nx5,y=s(85).$bT,b=s(85).OtN,w=s(85).P0R,S=s(85).DIE;class M extends a.Z{constructor(){super(...arguments),this.handleClickRemove=e=>{e[S](),this[w].onClickRemove(this[w].target)}}renderComponent(){const{device:e}=this.environment;return o()(h.Z,{showRemoveButton:!0,isSingle:!1,isStrikedThrough:this[w].isStrikedThrough,[b]:this[w][b],format:e.isMobile?d.l.Large:d.l.Medium,onClickRemove:this.handleClickRemove,disabled:this[w].disabled,disabledFeedback:!0,value:this.getTokenContent(),style:this[w].style,shouldWrap:this[w].shouldWrap})}withInfoIcon(e){return o()("div",{style:{display:"flex",[y]:"row",alignItems:"center"}},void 0,l.Z.info({marginRight:4,width:14,height:14}),e)}getTokenContent(){const{target:e,intl:t,role:s}=this[w];if("group"===e.type&&"owner"===s)return o()(g.Z,{renderTooltip:()=>o()(m.FormattedMessage,{id:"permissionInviteToken.groupRole.ownerAlert.tooltip",[f]:"Groups cannot be added as teamspace owners."}),render:t=>n[v]("div",t,this.withInfoIcon((0,p.kF)({intl:this[w].intl,group:e.value})))});let i;switch(e.type){case"newUser":i=e.value.email.trim();break;case"existingUser":i=(0,u.Nz)(t,e.value);break;case"bot":i=(0,r.Mh)(e.value);break;case"group":i=(0,p.kF)({intl:this[w].intl,group:e.value});break;default:(0,c.unreachable)(e)}return this[w].showInfoIcon?this.withInfoIcon(i):i}}M.displayName="PermissionsInviteToken";const k=(0,m.injectIntl)(M)},79331:(e,t,s)=>{s.d(t,{E:()=>ae,Z:()=>re});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(81954),d=s(5366),l=s(89101),c=s(97880),u=s(50906),m=s(84908),p=s(9953),g=s(5978),h=s(42171),v=s(12359),f=s(37181),y=s(21969),b=s(38755),w=s(21115),S=s(23537),M=s(5162),k=s(79315),Z=s(24042),C=s(10161),T=s(42389),P=s(39098),F=s(92083),I=s(78291),_=s(97832),x=s(79092),A=s(42922),D=s(16354),B=s(68785),R=s(79603),O=s(42402),G=s(1548),U=s(55422),E=s(42982),N=s(30045);const L=s(85).DIE,V=s(85).l81,q=(s(85).ClN,s(85).GiO),W=s(85).h2Q,z=s(85).LCr,K=s(85).Drs,H=s(85).JJj,Q=s(85).Ubh,j=s(85).Xls,J=s(85).g4H,Y=s(85).cjE,X=s(85).nx5,$=s(85).wgE,ee=s(85).Bn$,te=s(85).dLQ,se=s(85).YZi,ie=s(85).BDC,oe=s(85).QmD,ne=s(85).h_J;function ae(e){let{isPhone:t,isIOS:s,[ne]:i,userEmailDomainSettings:n}=e;const{data:a}=I.default[oe],r=s&&w[ie](a),d=(0,R.mS)(),l=!(t&&(0,M.Y)("supportsNativeHome")),u=C.default.checkGate("block_attribution");return[{key:"password",[se]:()=>o()(de,{[ne]:i})},{key:"appearance",[se]:()=>o()(le,{[te]:!0})},l?{key:"page-on-app-start",[se]:()=>o()(ue,{[te]:!0})}:void 0,u?{key:"block-attribution",[se]:()=>o()(ce,{[te]:!0})}:void 0,r?{key:"subscription",[se]:()=>o()(E.Z,{})}:void 0,{key:"user-consent",[se]:()=>o()(N.Z,{emailDomainSettings:n[ee]})},{key:"calendar",[se]:()=>o()(x.Z,{})},d?{key:"experiments",[se]:()=>o()(R.Pp,{})}:void 0,{key:"deleteAccount",[se]:()=>o()(_.Z,{userEmailDomainSettings:n})}].filter(c.isDefined)}function re(e){const{[$]:t}=e,s=C.default.checkGate("block_attribution"),i=t.device.isDesktop&&(t.device.isMac||t.device.isWindows||!1),n=t.device.isDesktop&&t.device.isMac;return[{key:"appearance",[se]:()=>o()(le,{[te]:!1})},{key:"page-on-app-start",[se]:()=>o()(ue,{[te]:!1})},i?{key:"open-in-desktop-app",[se]:()=>o()(pe,{})}:void 0,n?{key:"close-browser-tabs",[se]:()=>o()(me,{})}:void 0,s?{key:"block-attribution",[se]:()=>o()(ce,{[te]:!1})}:void 0].filter(c.isDefined)}function de(e){let{[ne]:t}=e;window.__c={n:"LoadingPasswordSettings"};const s=(0,r.VK)((()=>{const{data:e}=I.default[oe];return w.isEducationPlan(e)}),[]),i=(0,r.VK)((()=>{var e;return(null===(e=k.default[oe].currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:n,canConfigurePassword:a,isSamlEnforced:d,mfaStatus:l,error:c,ready:u}=(0,r.VK)((()=>({...t[oe].result,error:t[oe].error,ready:t[oe].result})),[t]);return c?o()(G.Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):u?o()(G.Z,{hasPassword:n,hasPasswordActions:a,samlEnforced:d,mfaStatus:l,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):o()(B.Z,{})}function le(e){let{[te]:t}=e;window.__c={n:"AppearanceSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>h.MH(s)),[s]);return o()(U.Z,{[te]:t,title:o()(d.FormattedMessage,{id:"appearanceSettings.title",[X]:"Appearance"}),[J]:o()(d.FormattedMessage,{id:"appearanceSettings.description.message",[X]:"Customize how Notion looks on your device."}),type:Y,[j]:i,options:[{key:"system",label:o()(d.FormattedMessage,{id:"appearanceSetting.system.label",[X]:"Use system setting"})},{key:"light",label:o()(d.FormattedMessage,{id:"appearanceSetting.light.label",[X]:"Light"})},{key:"dark",label:o()(d.FormattedMessage,{id:"appearanceSetting.dark.label",[X]:"Dark"})}],onSelectOption:e=>{h.rz(e)}})}function ce(e){let{[te]:t}=e;window.__c={n:"AttributionSetting"};const s=(0,a.O7)(),{[Q]:i}=(0,r.VK)((()=>k.default[oe]),[]),l=(0,r.VK)((()=>{var e;return(null==i||null===(e=i.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[i]),c=(0,n.useCallback)((()=>{i&&v[H]({[K]:"NotificationsAndPersonalSettings.onToggle",[$]:s,perform:e=>{f.updateUserSettings({userSettingsStore:i,data:{show_block_attribution:!l},[z]:e})}})}),[i,l,s]);return o()(U.Z,{[te]:t,title:o()(d.FormattedMessage,{id:"attributionSetting.title",[X]:"Block attribution"}),[J]:o()(d.FormattedMessage,{id:"attributionSetting.description.message",[X]:"See your teammates’ initials to the left of blocks they created or edited."}),type:W,isOn:l,onToggle:c})}function ue(e){let{[te]:t}=e;window.__c={n:"PageOnAppStartSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>k.default[oe][q]),[]),n=(0,r.VK)((()=>S.QI()),[]),l=(0,r.VK)((()=>b.g4(s,i)),[s,i]),c=[{key:"last_visited_page",label:o()(d.FormattedMessage,{id:"pageOnAppStoreSetting.lastVisitedPage.label",[X]:"Last visited page"})},{key:"first_page",label:o()(d.FormattedMessage,{id:"pageOnAppStoreSetting.firstPage.label",[X]:"Top page in sidebar"})}];return n&&c.push({key:"personal_home",label:o()(d.FormattedMessage,{id:"pageOnAppStoreSetting.home.label",[X]:"Home"})}),o()(U.Z,{[te]:t,title:o()(d.FormattedMessage,{id:"pageOnAppStoreSetting.title",[X]:"Open on start"}),[J]:o()(d.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",[X]:"Choose what to show when Notion starts or when you switch workspaces."}),type:Y,[j]:l,options:c,onSelectOption:e=>{if(i){const t=(0,P._J)(i,i.pointer,[ee]);v[H]({[K]:"NotificationsAndPersonalSettings.PageOnAppStartSetting",[$]:s,perform:s=>{p.updateValue({store:t,data:{on_app_start:e},[z]:s})}})}}})}function me(){window.__c={n:"CloseBrowserTabsSetting"};const{isElectron:e,isMac:t}=(0,a.Fy)(),s=(0,r.VK)((()=>{var e;return null===(e=Z.Z[oe].preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),i=(0,n.useCallback)((()=>{const e=!s;m.electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=o()(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.title",[X]:"Close redirecting browser tabs"}),c=o()(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",[X]:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return o()(U.Z,{[te]:!1,title:l,[J]:c,type:W,isOn:s,onToggle:i})}function pe(){window.__c={n:"OpenInDesktopAppSetting"};const e=(0,a.O7)(),{isElectron:t}=(0,a.Fy)(),s=(0,r.VK)((()=>T.Z[oe]),[]),i=o()(d.FormattedMessage,{id:"openInDesktopAppSetting.title",[X]:"Open links in desktop app"}),n=(0,r.VK)((()=>F.Z[oe].highlightedSetting===F.R.OpenInDesktopApp),[]);if(t)return o()(U.Z,{[te]:!1,title:i,[J]:o()(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureCaption",[X]:"You can configure browser links to open in this app."}),type:"custom",customButton:o()(D.Z,{href:(0,y.H)(window[V].href),external:!0,onClick:()=>{u.trackConfigureOpenInDesktopApp(e)}},void 0,o()(A.Z,{},void 0,o()(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureButton",[X]:"Configure"})))});return o()(U.Z,{[te]:!1,title:i,[J]:o()(d.FormattedMessage,{id:"openInDesktopAppSetting.description.messageWindows",[X]:"You must have the <desktopapplink>Mac or Windows app</desktopapplink> installed",values:{desktopapplink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o()(O.Z,{external:!0,href:l.AR.desktop,onClick:e=>{e[L]()}},void 0,t)}}}),type:W,isOn:"always"===s,onToggle:()=>{const t="always"===s?"never":"always";T.Z.setState(t),"always"===t&&g.openInNativeApp({url:(0,y.W)(window[V].href),[$]:e}),u.trackToggleOpenInDesktopApp(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:n})}},21291:(e,t,s)=>{s.d(t,{A:()=>D});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(81954),d=s(33728),l=s(3909),c=s(5366),u=s(97880),m=s(50906),p=s(54642),g=s(9953),h=s(5978),v=s(97627),f=s(12359),y=s(17652),b=s(26374),w=s(79315),S=s(63296),M=s(905),k=s(79080),Z=s(55422);const C=s(85).nx5,T=s(85).tTc,P=s(85).fCB,F=s(85).wgE,I=s(85).KBD,_=s(85).K7S,x=s(85).GiO,A=s(85).nm$;function D(e){let{[A]:t}=e;window.__c={n:"PushAndEmailNotificationSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>w.default.state[x]),[]),D=(0,r.VK)((()=>(0,y.rB)()),[]),B=(0,r.VK)((()=>{var e,s,o;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case _:return(null==i||null===(e=i.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case I:return(null==i||null===(s=i.getSettingsStore())||void 0===s||null===(o=s.getKeyStore(t))||void 0===o?void 0:o.getValue())||!1;case"marketing_emails":case"notify_slack":return!1;default:(0,u.unreachable)(t)}}),[i,t]),R=(0,n.useCallback)((()=>{if(i){const e=!B;"notify_email_digest"===t?v.MA(s,e):f.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",[F]:s,perform:s=>{g.updateValue({store:i,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&m.trackToggleNotificationSetting(s,{is_on:e,[A]:t})}}),[s,i,B,t]),O=async()=>{const e=await p.getAuthorizedEmailPreferenceCenterLink(s,{});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return m.trackClickManageMarketingEmailsSetting(s),h[P]({[F]:s,url:e.data.preferenceCenterLink});{const e=await(0,b.getCountryCodeForUser)(s),t=(0,d.t_)(e);return m.trackClickManageMarketingEmailsSetting(s),h[P]({[F]:s,url:t})}};return o()(Z.Z,"marketing_emails"===t?{type:"custom",isMobile:!0,title:o()(k.Z,{[A]:t,[T]:D}),caption:o()(M.Z,{[A]:t,[T]:D}),customButton:o()(S.Z,{isLarge:!0,onClick:O,icon:l.Z.alias},void 0,o()(c.FormattedMessage,{id:"notificationSettings.marketingEmails.manageSettingsButton",[C]:"Manage settings"})),disableSettingsItemClick:!0}:{isMobile:!0,title:o()(k.Z,{[A]:t,[T]:D}),caption:o()(M.Z,{[A]:t,[T]:D}),type:"toggle",isOn:B,onToggle:R})}},40464:(e,t,s)=>{s.d(t,{Z:()=>w});var i=s(77094),o=s.n(i),n=s(97464),a=s.n(n),r=s(67294),d=s(480),l=s(81954),c=s(24405),u=s(8848),m=s(50906),p=s(98724),g=s(89086),h=s(24666),v=s(64921),f=s(58032);const y=s(85).D7I,b=s(85).PLZ;const w=function(e){window.__c={n:"SelectionAnnotationButton"};const{disabled:t,type:s,tooltipLabel:i,children:n,style:w,onClick:S}=e,M=(0,d.O7)(),k=(0,r.useCallback)((e=>{p.aS({environment:M,annotation:[s]}),S&&S(),m[b](M,{action:s})}),[M,s,S]),Z=(0,l.VK)((()=>t||"editing"!==h.default.state.mode),[t]),C=(0,l.VK)((()=>Boolean((0,g.Ld)(s))),[s]),T=(0,c.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",color:C?u.ZP.blue:e.regularTextColor,...w}})),[C,w]);return o()(f.Z,{renderTooltip:()=>i,render:e=>r[y](v.Z,a()({style:T.button,disabled:Z,disabledFeedback:Z,onClick:k},e),n)})}},32404:(e,t,s)=>{s.d(t,{Z:()=>L});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(83355),l=s(70203),c=s(5366),u=s(36280),m=s(89086),p=s(66949),g=s(24666),h=s(64921),v=s(58261),f=s(58032);const y=s(85).S6b,b=s(85).D7I,w=s(85).XCs,S=s(85).YDv,M=s(85).NF1,k=s(85).jkI,Z=s(85).H1U,C=s(85).G4H,T=s(85).AEq,P=s(85).LEy,F=s(85).gzu,I=s(85).gz4,_=s(85).tEG,x=s(85).pkR,A=s(85).Ubc,D=s(85).Ryv,B=s(85).P3s,R=s(85).wgE,O=s(85).LZy,G=s(85).V3,U=s(85).nx5,E=s(85).t7b;class N extends d.Z{constructor(){super(...arguments),this.renderMenuTooltip=()=>{const e=this[E]();return a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(c.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",[U]:"Create equation"})),a()("div",{},void 0,a()(v.Z,{style:e[G],name:"openEquationMenu"})))},this[O]=e=>{const{onClick:t}=this.props;u.qn({[R]:this[R],[B]:D}),t&&t(e)},this.isSelected=()=>(0,m.Ld)(l.annotationType.Equation),this[A]=()=>{const{[x]:e}=this.props;if(e)return!0;if("editing"!==g.default.state.mode&&!p.Z.isOpen())return!0;const t={[l.annotationType.User]:l.annotationType.User,[l.annotationType.Page]:l.annotationType.Page,[l.annotationType.Comment]:l.annotationType.Comment,[l.annotationType.Bot]:l.annotationType.Bot,[l.annotationType.Date]:l.annotationType.Date,[l.annotationType[_]]:l.annotationType[_],[l.annotationType.TemporaryPage]:l.annotationType.TemporaryPage,[l.annotationType[I]]:l.annotationType[I],[l.annotationType[F]]:l.annotationType[F],[l.annotationType[P]]:l.annotationType[P],[l.annotationType[T]]:l.annotationType[T],[l.annotationType.Group]:l.annotationType.Group};for(const s of Object.values(t))if((0,m.J6)(s))return!0;return!1},this[C]={equationButton:{display:"flex",[Z]:k,[M]:0,[S]:7,[w]:8}}}renderComponent(){const{style:e,children:t}=this.props,s=this[E](),i=this[A]();return a()(f.Z,{renderTooltip:this.renderMenuTooltip,render:n=>r[b](h.Z,o()({style:{...this[C].equationButton,...s.equationButton,...e},[x]:i,disabledFeedback:i,onClick:this[O]},n),t)})}[E](){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},[G]:{color:this.theme[y]}}}}N.displayName="SelectionEquationButton";const L=(0,c.injectIntl)(N)},73383:(e,t,s)=>{s.d(t,{Z:()=>R});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(83355),l=s(70203),c=s(5366),u=s(50906),m=s(45990),p=s(89086),g=s(23178),h=s(24666),v=s(64921),f=s(58261),y=s(58032);const b=s(85).D7I,w=s(85).F7y,S=s(85).NLk,M=s(85).OP1,k=s(85).XCs,Z=s(85).YDv,C=s(85).NF1,T=s(85).jkI,P=s(85).H1U,F=s(85).S6b,I=s(85).nx5,_=s(85).wgE,x=s(85).PLZ,A=s(85)._vZ,D=s(85).LZy;class B extends d.Z{constructor(){super(...arguments),this[D]=()=>{m[A]({type:"focusOnly",focus:!0}),u[x](this[_],{action:l.annotationType.Link})}}renderComponent(){const e=(0,p.Ld)(l.annotationType.Link),t=this.isDisabled();return a()(y.Z,{renderTooltip:()=>a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(c.FormattedMessage,{[I]:"Add link",id:"selectionLinkButton.addLink.tooltip"})),a()("div",{},void 0,a()(f.Z,{style:{color:this.theme[F]},name:"openLinkMenu"}))),render:s=>r[b](v.Z,o()({style:{display:"flex",[P]:T,[C]:0,[Z]:7,[k]:8,...e&&{color:this.theme[M]},[S]:w,...this.props.style},disabled:t,disabledFeedback:t},s,{onClick:this[D]}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==h.default.state.mode&&!g.Z.state.open||!!((0,p.J6)(l.annotationType.User)||(0,p.J6)(l.annotationType.Bot)||(0,p.J6)(l.annotationType.Date)||(0,p.J6)(l.annotationType.Page)))}}B.displayName="SelectionLinkButton";const R=(0,c.injectIntl)(B)},51124:(e,t,s)=>{s.d(t,{O:()=>u});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(76725),d=s(23570),l=s(61519);const c=s(85).YZi;function u(e){window.__c={n:"SettingsItems"};const{items:t}=e,{isMobile:s}=(0,a.Fy)();return n.createElement(n.Fragment,null,(0,r.Z)(t.map((e=>{let{key:t,[c]:s}=e;return o()(n.Fragment,{},t,s())})),(e=>o()(l.Z,{size:(0,d.f)(s),isHidden:!s},e))))}},73490:(e,t,s)=>{s.d(t,{O:()=>ue});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(81954),d=s(24405),l=s(5366),c=s(32161),u=s(82990),m=s(17652),p=s(18441),g=s(79315),h=s(30874),v=s(39098),f=s(905),y=s(79080),b=s(97464),w=s.n(b),S=s(3909),M=s(68626),k=s(5500),Z=s(50906),C=s(77719),T=s(9953),P=s(12359),F=s(87279),I=s(64921),_=s(52275),x=s(31945),A=s(78140),D=s(32163),B=s(72495);const R=s(85).EZQ,O=s(85).T9R,G=s(85).PwV,U=s(85).JJj,E=s(85).j7K,N=s(85).y79,L=s(85).sEd,V=s(85).w0e,q=s(85).nx5,W=s(85).D7I,z=s(85).o8I,K=s(85).wgE,H=s(85).FkY,Q=s(85).nuv,j=s(85).Y7T,J=s(85).ydX,Y=s(85).dV;function X(e){window.__c={n:"PersonalSlackNotificationsAccountDropdownButton"};const{[Y]:t,[J]:s,spaceId:i,[j]:c}=e,u=(0,a.O7)(),m=(0,a.Fy)(),g=(0,r.VK)((()=>h.Z.integrations.state.find((e=>e.id===k.nO))),[]),v=(0,d.yK)((e=>({[L]:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:3,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let f;f=m.isPhone?{menuType:F.og.ActionSheet}:{menuType:F.og.Popup,width:280,maxHeight:"50vh"};const y=n.useCallback((e=>Object.entries((0,p.YJ)(s)).map(((s,i)=>{let[o,a]=s;return{key:o,items:a.map((s=>{let{[Q]:i,[H]:o}=s;return{key:i.id,action:()=>{e.close(),$({[K]:u,[j]:c,currentExternalBotId:null==t?void 0:t[z],selectedExternalBotId:i[z]})},render:e=>n[W](_.Z,w()({},e,{title:o,right:i.id===(null==t?void 0:t.id)&&S.Z.check({width:12,height:12})}))}})),render:e=>n[W](B.Z,w()({},e,{title:o,topBorder:0!==i}))}}))),[null==t?void 0:t.id,null==t?void 0:t[z],u,s,c]),b=n.useCallback((e=>g?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{[K]:t,[j]:s}=e;P[U]({userAction:G,[K]:t,perform:e=>{T.updateValue({store:s[O](),data:{notify_slack:null},transaction:e})}}),Z.trackSlackNotificationDelete(t,{type:R,source:V})}({[K]:u,[j]:c})},render:e=>n[W](_.Z,w()({},e,{title:o()(l.FormattedMessage,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",[q]:"Off"}),right:void 0===t&&S.Z.check({width:12,height:12})}))}],render:e=>n[W](B.Z,w()({},e,{topBorder:y.length>0}))},{key:"create-new-auth",items:[{key:"connect",render:e=>n[W](_.Z,w()({},e,{icon:S.Z.plus({width:12,height:12}),title:o()(l.FormattedMessage,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",[q]:"Add new account"})})),action:async()=>{var e;const t=await C.hM({[K]:u,integration:g,spaceId:i,from:V});if(M.x.isFail(t))return;const s=null===(e=t.value[Q])||void 0===e?void 0:e[z];s&&$({[K]:u,[j]:c,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>n[W](B.Z,w()({},e,{topBorder:!0}))}]:[]),[t,u,y.length,i,c,g]);return o()("div",{style:v[L]},void 0,o()(x.ZP,{popupType:x.Z4.Popup,alignmentToOrigin:x.vR.End,render:e=>n[W](A.Z,f,o()(D.Z,{type:D.i[N],[E]:0,sections:[...y(e),...b(e)]})),renderOrigin:t=>n[W](I.Z,w()({},t,{style:v.dropdownButtonContainer}),o()("div",{style:v.currentValueLabel},void 0,n[W](ee,e)),S.Z.chevronDown(v.icon))}))}function $(e){const{[K]:t,[j]:s,selectedExternalBotId:i,currentExternalBotId:o}=e;o!==i&&(P[U]({userAction:G,[K]:t,perform:e=>{T.updateValue({store:s[O](),data:{notify_slack:{external_bot_id:i}},transaction:e})}}),void 0===o?Z.trackSlackNotificationCreate(t,{type:R,source:V}):Z.trackSlackNotificationUpdate(t,{type:R,source:V}))}function ee(e){const{[Y]:t}=e;if(!t)return o()(l.FormattedMessage,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",[q]:"Off"});const s=(0,p.jg)(t).organizationName;return n[W](n.Fragment,null,s)}var te=s(55422);const se=s(85).Y7T,ie=s(85).ydX,oe=s(85).dV,ne=s(85).D7I,ae=s(85).nx5,re=s(85).n_z,de=s(85).tTc,le=s(85).PLy,ce=s(85).GiO;function ue(e){window.__c={n:"SlackNotificationsSetting"};const{target:t}=e,{isMobile:s}=(0,a.Fy)(),i=(0,r.VK)((()=>g.default.state[ce]),[]),b=(0,r.VK)((()=>(0,m.rB)()),[]),w=(0,r.VK)((()=>g.default.state.currentSpaceStore),[]),S=(0,r.VK)((()=>h.Z[le].state),[]),M=(0,r.VK)((()=>{var e,s;const o=null==i||null===(e=i.getSettings())||void 0===e||null===(s=e[t])||void 0===s?void 0:s.external_bot_id;if(!o)return;const n=S.find((e=>e.parent_id===o));if(n)return n;if(!i)return;return(0,v.Kv)(i,{id:o,table:c.P}).getValue()}),[i,S,t]),k=(0,d.yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:u.Z.fontWeight.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return i&&w?o()(te.Z,{type:"custom",isMobile:s,title:o()(y.Z,{target:t,[de]:b}),caption:n[ne](n.Fragment,null,M?o()(l.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",[ae]:"Receive notifications in {slackWorkspaceName} when you're mentioned in a page, database property, or comment.",values:{slackWorkspaceName:o()("span",{style:k.notifySlackSelectedWorkspaceName},void 0,(0,p.jg)(M)[re])}}):o()(f.Z,{target:t,[de]:b})),customButton:o()(X,{[oe]:M,[ie]:S,spaceId:w.id,[se]:i})}):null}},40141:(e,t,s)=>{s.d(t,{Z:()=>_l});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(96486),d=s.n(r),l=s(67294),c=s(83355),u=s(49085),m=s(8848),p=s(58573),g=s(3909),h=s(27006),v=s(90468),f=s(19889),y=s(2438),b=s(97880),w=s(82990),S=s(7928),M=s(5366),k=s(48298),Z=s(50906),C=s(54642),T=s(43132),P=s(47307),F=s(92625),I=s(76464),_=s(29974),x=s(15010),A=s(64964),D=s(21325),B=s(12359);const R=s(85).wgE,O=s(85).nx5,G=(0,M.defineMessages)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",[O]:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",[O]:"Updating…"}});async function U(e){const{[R]:t,store:s,role:i,guestUserStore:o}=e,n=o.id,r=o.getEmail();try{F.display({message:G.convertingGuest});const e=[{type:"user_permission",role:i,user_id:n}],{serverCommitResult:o}=B.createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",[R]:t,perform:i=>{I.setPermissionItems({[R]:t,store:s,permissionItems:e,transaction:i,from:"convert_to_member"})}});await o,Z.trackConvertGuestToMember(t,{member_user_id:n}),Z.trackEmailInvite(t,{role:i,is_space:!0,invite_targets:[{type:"existingUser",value:{id:n,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:e,invite_message_length:0,domainType:(0,x.JF)()})}catch(d){A.oV({label:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",[O]:"Failed to convert {email} to workspace member",values:{email:r}})})}finally{await D.refresh(t),F.close()}}async function E(e){const{[R]:t,store:s,guestUserStore:i}=e,o=i.id,n=i.getEmail();try{F.display({message:G.removingGuest});if("success"!==(await C.removeUsersFromSpace(t,{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1})).type)throw new Error("Failed to remove guest");Z.trackRemoveGuest(t)}catch(r){A.oV({label:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",[O]:"Failed to remove {email} from workspace",values:{email:n}})})}finally{await D.refresh(t),F.close()}}var N=s(79315),L=s(37181);const V=s(85).Ubh;var q=s(4708),W=s(87279),z=s(67669),K=s(33665),H=s(38755),Q=s(53877);const j=s(85).Ubh;var J=s(62216),Y=s(21115),X=s(8323),$=s(23537),ee=s(77907),te=s(88632),se=s(39098),ie=s(72087),oe=s(64404),ne=s(92083),ae=s(78291),re=s(98905),de=s(21752),le=s(42922),ce=s(64921),ue=s(52275),me=s(31945),pe=s(61519),ge=s(73063),he=s(74194),ve=s(68785),fe=s(78140),ye=s(32163),be=s(63296),we=s(77137),Se=s(72495),Me=s(62385),ke=s(24006),Ze=s(58032),Ce=s(64369),Te=s(24405),Pe=s(16639),Fe=s(31278),Ie=s(53695);const _e=s(85).nx5,xe=s(85).Ma8,Ae=s(85).mFu,De=s(85).TEz;function Be(e){let{spaceStore:t,groups:s,onGroupClick:i}=e;window.__c={n:"GroupsDowndownForMember"};const n=(0,M.useIntl)(),r=s.length,d=(0,Te.yK)((e=>({title:{marginRight:8,color:0===r?e[De]:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e[De]}})),[r]),c=s.map((e=>({key:e.id,render:s=>{var i;const r=Pe.kF({intl:n,group:e});return l.createElement(ue.Z,o()({icon:a()(Fe.Z,{disabled:!0,icon:e.icon&&t?{[Ae]:t[Ae],icon:e.icon}:void 0,size:18,isEmptyPage:!1,title:r,defaultIcon:g.Z.typesPerson(d.defaultGroupIconPill)}),title:a()(Ce.Z,{style:e.name?void 0:d.untitled},void 0,r),caption:a()(M.FormattedMessage,{[_e]:xe,id:"groupsDropdownForMember.numMembers",values:{numMembers:(null===(i=e.user_ids)||void 0===i?void 0:i.length)||0}}),inline:!0},s))},action:i})));return a()(Ie.N,{title:a()(Ce.Z,{style:d.title},void 0,a()(M.FormattedMessage,0===r?{id:"groupsDropdownForMember.groupsCountNone.label",[_e]:"None"}:{id:"groupsDropdownForMember.groupsCount.label",[_e]:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:r}})),items:c,disabled:0===r})}var Re=s(15145),Oe=s(21202),Ge=s(5978),Ue=s(84210),Ee=s(61766),Ne=s(28992),Le=s(43765),Ve=s(89728),qe=s(11470);const We=s(85).a3v,ze=s(85).OSs,Ke=s(85).Rtp,He=s(85).Gnd,Qe=s(85).Wp_,je=s(85).j7K,Je=s(85).AVP,Ye=s(85).y79,Xe=s(85).XNW,$e=s(85).H1U,et=s(85).sM5,tt=s(85).Mm1,st=s(85)._V5,it=s(85).Joh,ot=s(85).PG2,nt=s(85).h0C,at=s(85).Ie8,rt=s(85).ceT,dt=s(85).dLQ,lt=s(85).LIR,ct=s(85).XqV,ut=s(85).cZW,mt=s(85).D7I,pt=s(85).nx5,gt=s(85).rpY,ht=s(85).TLr,vt=s(85).EJM,ft=s(85).pxq,yt=s(85).P0R,bt=s(85).XtO,wt=s(85).wgE,St=s(85).LtW;class Mt extends c.Z{constructor(){super(...arguments),this.storeTypes={[St]:Ee.Z},this.renderPopup=()=>{const{device:e}=this[wt],{[bt]:t,guest:s,hideActionButtons:i}=this[yt],n=t[ft](),r=s[vt].map((e=>{const s=se.G[ht](t,{table:Oe.iU,id:e});return{key:e,[gt]:e=>l[mt](qe.Z,o()({},e,{[bt]:s,[ut]:a()(M.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",[pt]:"Private page"})})),action:()=>{const s=se.G[ht](t,{table:Oe.iU,id:e}),i=(0,Ue.ZP)({[bt]:s,[ct]:!1,[lt]:Re.tY.LinkInPage});Ge.navigate({[wt]:this[wt],url:i,openInNew:"tab"})}}}));let d,c;d=e[dt]?{[rt]:W.og[at]}:{[rt]:W.og.Popup,width:300},(0,Y.subscriptionAllowsMembers)(this[wt])&&(c=a()(Ze.Z,{[it]:()=>this[nt]()?a()(M.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",[pt]:"This guest will become a member of this workspace."}):a()(M.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",[pt]:"This guest will become an admin of this workspace."}),[gt]:e=>l[mt](be.Z,o()({isLarge:!0,[ot]:this.handleConvertToMemberClick},e),this[nt]()?a()(M.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",[pt]:"Convert to member"}):a()(M.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",[pt]:"Convert to admin"}))}));const u=!i&&n;return l[mt](fe.Z,d,u&&a()(Ne.Z,{title:a()("div",{style:{[st]:12,[tt]:8,[et]:"flex",[$e]:"flex-start"}},void 0,c,a()(Ze.Z,{[it]:()=>a()(M.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",[pt]:"This guest will be removed from all pages in this Workspace."}),[gt]:e=>l[mt](be.Z,o()({isLarge:!0,isRed:!0,style:{[Xe]:c?8:0},[ot]:this.handleRemoveClick},e),a()(M.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",[pt]:"Remove"}))}))}),u&&a()(Le.Z,{title:a()(M.FormattedMessage,{id:"guestPagesPopup.guestAccessiblePagesCaption",[pt]:"This guest can access these pages"})}),a()(ye.Z,{type:ye.i[Ye],[je]:0,sections:[{key:Je,[gt]:e=>l[mt](Se.Z,e),items:r}]}))},this.handleRemoveClick=()=>{P.showDialog({showCancel:!0,keepFocus:!1,message:a()(M.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",[pt]:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:a()(M.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",[pt]:"Remove"}),color:"red",onAccept:async()=>{const{[bt]:e,guestStore:t}=this[yt];this[He][St][Qe]({...this[He][St].state,open:!1}),await E({[wt]:this[wt],guestUserStore:t,[bt]:e})}}]})},this.handleConvertToMemberClick=async()=>{const{[bt]:e,guestStore:t,[nt]:s}=this[yt],i=s?Ke:ze;this[He][St][Qe]({...this[He][St].state,open:!1}),await U({[wt]:this[wt],guestUserStore:t,role:i,[bt]:e})}}renderComponent(){const{device:e}=this[wt],{[St]:t}=this[He],{[bt]:s,guest:i}=this[yt];return i[vt].map((e=>{se.G[ht](s,{table:Oe.iU,id:e}).load()})),0===i[vt].length?a()(Ve.Z,{disabled:!0},void 0,a()(M.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",[pt]:"Guest"})):a()(me.ZP,{popupType:e[dt]?me.Z4.SlideUp:me.Z4.Popup,renderOrigin:e=>l[mt](Ve.Z,e,a()(M.FormattedMessage,{id:"guestPagesButton.label",[pt]:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:i[vt].length}}),g.Z.chevronDown({width:10,[Xe]:4,fill:this.theme[We]})),[St]:t,[gt]:this.renderPopup})}[nt](){const{data:e}=ae.default.state;return Boolean(e&&(0,Y.isSubscribed)(e))}}Mt.displayName="GuestPagesPopup";const kt=(0,M.injectIntl)(Mt);var Zt=s(74523),Ct=s(42402),Tt=s(7567),Pt=s(480),Ft=s(81954),It=s(5851),_t=s(53680),xt=s(93963),At=s(40235),Dt=s(7057),Bt=s(42875),Rt=s(29302),Ot=s(45653);const Gt=s(85).S6b,Ut=s(85).g7N,Et=s(85).Y9u,Nt=s(85).Exd,Lt=s(85).nLZ,Vt=s(85).XNW,qt=s(85).xLB,Wt=s(85).PG2,zt=s(85).GC5,Kt=s(85).d6L,Ht=s(85).zUL,Qt=s(85).Joh,jt=s(85).D7I,Jt=s(85).$W2,Yt=s(85).keB,Xt=s(85).QNi,$t=s(85).BQ6,es=s(85).lGm,ts=s(85).h8z,ss=s(85).UPJ,is=s(85).jkI,os=s(85).H1U,ns=s(85).EMU,as=s(85).sM5,rs=s(85).nx5,ds=s(85).T04,ls=s(85).TtP,cs=s(85).fEm,us=s(85).f5o;function ms(e){window.__c={n:"SpaceSettingsRequestRow"};const{store:t,request:s}=e,{forActor:i,[us]:o}=s,n=(0,Pt.O7)(),[r,d]=(0,l.useState)(!1),c=(0,Te.yK)((e=>({actionButtons:{[as]:ns,[os]:is,gap:12},[ds]:{[as]:ns,gap:4},requestMetadata:{minWidth:0,[Vt]:6,marginRight:6},[Xt]:{[Ut]:2},[Yt]:{color:e[Gt],[Nt]:10,textTransform:"uppercase",letterSpacing:"0.015em",[Ut]:2},viewReasonsButton:{[Vt]:28,[Lt]:2,border:"none"},tooltipUserRow:{[as]:ns,[ss]:ts,[Ut]:4},tooltipUserRowEmail:{[Vt]:5}})),[]),u=(0,M.useIntl)(),m=(0,Ft.VK)((()=>{var e;const t=[],i=new Set;return null===(e=s[cs])||void 0===e||e.forEach((e=>{i.has(e.actor.id)||t.push(e.actor),i.add(e.actor.id)})),t}),[s[cs]]);if(!s||!s.forActor||!s[cs][ls])return null;const p=Q.dateTime(s.latestRequestTime,(0,Bt.r)()),g=(0,Dt.ZV)({value:p,date_format:"relative",userTimeZone:(0,Bt.r)(),intl:u,allowRelativeDates:!0}),h={environment:n,store:t,[us]:o,forActor:i},v=m.filter((e=>e[ds]!==s.forActor[ds])),f=v[ls]!==m[ls],y=()=>1===m[ls]?a()(M.FormattedMessage,f?{[rs]:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}:{[rs]:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:m[0].name}}):a()(M.FormattedMessage,f?{[rs]:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:v[0].name,numberOfOtherActors:v[ls]}}:{[rs]:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:m[0].name,secondActorName:m[1].name,numberOfOtherActors:m[ls]-1}});return a()("div",{[$t]:{width:"100%"}},void 0,a()("div",{[$t]:{[as]:ns,[os]:is,[ss]:ts}},void 0,a()("div",{},void 0,a()("div",{[$t]:{[as]:ns,[os]:is}},void 0,a()(Ot.Z,{userValue:s.forActor,size:28,borderStyle:"dashed"}),a()("div",{[$t]:c.requestMetadata},void 0,a()("div",{[$t]:c[ds]},void 0,a()(Ce.Z,{[es]:"notranslate"},void 0,s.forActor[ds])),a()(Ce.Z,{isSmall:!0},void 0,a()(Ze.Z,{[Qt]:()=>a()("div",{[$t]:c[Xt]},void 0,a()(Ce.Z,{[$t]:c[Yt]},void 0,a()(M.FormattedMessage,{[rs]:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})),m.map((e=>a()("div",{[$t]:c.tooltipUserRow},e.id,a()(Rt.Z,{[Jt]:18,userValue:e}),a()("div",{[$t]:c.tooltipUserRowEmail},void 0,e[ds]))))),render:e=>l[jt]("span",e,a()(y,{}))})," · ",g)))),a()("div",{[$t]:c.actionButtons},void 0,a()(Ve.Z,{isGray:!0,[Wt]:async()=>{await k[Ht]({...h,[Kt]:zt,from:"requests_center"})}},void 0,a()(M.FormattedMessage,{[rs]:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})),a()(be.Z,{isBlue:!0,[Wt]:async()=>{await k[Ht]({...h,[Kt]:qt,from:"requests_center"})}},void 0,a()(M.FormattedMessage,{[rs]:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})))),s[cs].some((e=>{let{reason:t}=e;return Boolean(t)}))&&a()(be.Z,{isSmall:!0,isBlue:!0,[$t]:c.viewReasonsButton,[Wt]:()=>d(!r)},void 0,a()(M.FormattedMessage,r?{id:"spaceSettingsRequests.requestRowAction.closeReasonsButton.label",[rs]:"Close reasons"}:{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",[rs]:"View reasons"})),r&&a()("div",{[$t]:{[Vt]:34,[Lt]:2,[Nt]:w.Z[Nt][Et].desktop}},void 0,s[cs].filter((e=>{let{reason:t}=e;return Boolean(t)})).map(((e,t)=>a()("div",{},t,e.actor.name," · ",e.reason)))))}const ps=s(85).XNW,gs=s(85).int,hs=s(85).uOz,vs=s(85).nx5,fs=s(85).PXg,ys=s(85).H1U,bs=s(85).jkI;function ws(e){window.__c={n:"SpaceSettingsRequestsTable"};const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,o=(0,Ft.VK)((()=>s.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).sort(((e,t)=>t.latestRequestTime-e.latestRequestTime))),[s]),n=(0,Te.yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:bs,[ys]:bs,padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:3},mailIcon:{height:12,width:17,color:e.mediumIconColor,[fs]:6}})),[]),r={key:"request",header:void 0,style:n.requestColumn};return 0===o.length?a()("div",{style:n.zeroStateContainer},void 0,g.Z.mailRound(n.mailIcon),a()(M.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",[vs]:"No invite requests yet"})):a()(At.Z,{hideHeader:!0,columns:[r],rows:o.map(((e,s)=>({key:`request${s.toString()}`,columns:[a()("div",{style:{display:"flex",[ys]:bs}},e[hs].id,i<e[hs][gs]&&a()("div",{style:{[ps]:-18,[fs]:10}},void 0,a()(xt.z,{size:8})),a()(ms,{store:t,request:e}))]})))})}const Ss=s(85).zDZ,Ms=s(85).pkR,ks=s(85).nx5,Zs=s(85).i_Y,Cs=s(85).mFu,Ts=s(85).GiO,Ps=s(85).H1U,Fs=s(85).jkI,Is=s(85).dL6,_s=s(85).sSK,xs=s(85).lMF,As=s(85).Wqi;function Ds(e){window.__c={n:"SpaceSettingsRequests"};const{[As]:t,accessRequestsStore:s}=e,i=(0,Pt.O7)(),[o,n]=(0,l.useState)(Date.now()),[,,r]=(0,Ft.AF)(void 0,_t.Z),d=(0,Ft.VK)((()=>r.getValueForSpace(t)),[t,r]),c=Boolean(null==d?void 0:d[xs]),u=Boolean(null==d?void 0:d[_s]),m=(0,Ft.VK)((()=>t[Is]("settings")[Is]("seen_guest_membership_requests").getValue()&&(0,q.isGuestMembershipRequestEnabled)(i)),[i,t]),[p,,]=(0,Ft.AF)(s),g=(0,Te.yK)((e=>({errorContainer:{display:"flex",justifyContent:Fs,[Ps]:Fs,padding:40,color:e.mediumTextColor}})),[]);(0,l.useEffect)((()=>{const{[Ts]:e}=N.default.state;if(!e)return;const t=e[Is]("settings")[Is]("last_opened_request_center").getValue();t&&n(t),B.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:i,perform:t=>{B.applyOperation({store:e,operation:{[Cs]:e[Cs],path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return h=p.error,v=p.result,p.ready?h||!v?a()("div",{style:g.errorContainer},void 0,a()(M.FormattedMessage,{[ks]:Zs,id:"notificationUpdates.unknownErrorMessage"})):l.createElement(l.Fragment,null,a()(Bs,{[As]:t,securitySettingsStoreState:d,[Ms]:c}),m&&a()(Rs,{[As]:t,securitySettingsStoreState:d,[Ms]:u}),a()(ws,{[As]:t,accessRequestRenderValues:v,lastOpenedRequestCenterTime:o})):a()("div",{style:g.errorContainer},void 0,a()(ve.Z,{}));var h,v}function Bs(e){window.__c={n:"AllowMembershipRequestsToggle"};const t=(0,Pt.O7)(),{[As]:s,securitySettingsStoreState:i,[Ms]:o}=e,n=(0,Te.yK)((()=>({toggleContainer:{display:"flex",[Ps]:Fs,cursor:Cs,marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},[Ss]:{marginTop:2,width:"80%"}})),[]);return a()("div",{style:n.toggleContainer,onClick:function(){i&&It.n(t,{securitySettingsState:{...i,[xs]:!i[xs]},[As]:s})}},void 0,a()("div",{style:n.titleDescription},void 0,a()(M.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",[ks]:"Allow members to request adding other members"}),a()(Ce.Z,{isSmall:!0,isMultiline:!0,style:n[Ss]},void 0,a()(M.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",[ks]:"Members can submit requests to admins to add more members"}))),a()(ke.Z,{on:!o}))}function Rs(e){window.__c={n:"AllowGuestMembershipRequestsToggle"};const t=(0,Pt.O7)(),{[As]:s,securitySettingsStoreState:i,[Ms]:o}=e,n=(0,Te.yK)((()=>({toggleContainer:{display:"flex",[Ps]:Fs,cursor:Cs,marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},[Ss]:{marginTop:2,width:"80%"}})),[]);return a()("div",{style:n.toggleContainer,onClick:function(){i&&It.n(t,{securitySettingsState:{...i,[_s]:!i[_s]},[As]:s})}},void 0,a()("div",{style:n.titleDescription},void 0,a()(M.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",[ks]:"Allow page guests to request to be added as members to the workspace"}),a()(Ce.Z,{isSmall:!0,isMultiline:!0,style:n[Ss]},void 0,a()(M.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",[ks]:"Guests of the workspace can submit requests to admins to be added as members"}))),a()(ke.Z,{on:!o}))}var Os=s(95209),Gs=s(79817),Us=s(75472),Es=s(52878),Ns=s(1743),Ls=s(9019),Vs=s(44532),qs=s(24145),Ws=s(43579);s(85).xQ0,s(85).d2L;const zs=s(85).cZW,Ks=s(85).Wp_,Hs=s(85).wJk,Qs=s(85).ccq,js=s(85).D7I,Js=s(85).t85,Ys=s(85).C$B,Xs=s(85).HiC,$s=s(85).Rtp,ei=s(85).HI,ti=s(85).Ut2,si=s(85).ESK,ii=s(85).PG2,oi=s(85).BQ6,ni=s(85).Yzm,ai=s(85).bqK,ri=s(85).wgE,di=s(85).nm$,li=s(85).Jy7,ci=s(85).QmD,ui=s(85).DL8,mi=s(85).kyC,pi=s(85).Cgi,gi=s(85).LlE,hi=s(85).L_E,vi=s(85).z$9,fi=s(85).nx5,yi=(0,M.defineMessages)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",[fi]:"Add a reason (optional)"}});const bi=function(e){window.__c={n:"RequestMembersModal"};const t=(0,Pt.O7)(),{store:s,origin:i,analyticsFrom:n}=e,[r,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(vi),p=(0,Ft.qz)(void 0,Es.Z),g=(0,M.useIntl)(),h=(0,Te.yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},[hi]:{[gi]:20},title:{fontWeight:w.Z.fontWeight.medium,marginBottom:10},reasonTitle:{color:m.ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},[pi]:{marginLeft:20}})),[]),v=e=>{e.currentTarget===e[di]&&u(vi)},f=async()=>{Z.trackClickMembershipRequest(t,{...Gs[mi](t,p[ci][ui]),from:n}),Os.extractInvitedGuests({[li]:p[ci][li],[ui]:p[ci][ui]}),p[ci][ui].startRequestMembership();const e=p[ci][ui][ci].invitedUsers;d(!1);const i=await Gs.requestMembers({[ri]:t,spaceStore:s,originId:void 0,originType:n,reasonMessage:p[ci][li][ci][ai],[ui]:p[ci][ui],intl:g});y({success:i,intl:g,users:e}),p.reset()},y=e=>{const{success:t,intl:s,users:i}=e;0!==i.length&&(t?A.oV({label:s[ni]({id:"requestMembersModal.requestSuccess.toast",[fi]:"Successfully requested membership for {users} to your workspace admins."},{users:Gs.displayMultipleUser(i,s)})}):A.oV({label:s[ni]({id:"requestMembersModal.requestFail.toast",[fi]:"Failed to invite {users} to the workspace."},{users:Gs.displayMultipleUser(i,s)})}))};return a()(Ls.Z,{modalStyle:h.modalStyle,open:r,[Hs]:async()=>{await(0,Us.Aw)({[ri]:t,permissionsInviteStoreState:p[ci][li][ci],from:"space_settings_add_members"})||(d(!1),p.reset()),u(vi)},renderContent:()=>a()("div",{[oi]:h[hi],[ii]:v},void 0,a()("div",{[oi]:h.title,[ii]:v},void 0,a()(M.FormattedMessage,{id:"requestMembersModal.title",[fi]:"Request to invite members"})),a()(Vs.ZP,{popupType:Vs.kQ.Popup,alignmentToOrigin:Vs.ZP.Alignment.Start,[Qs]:Vs.ZP[si].Bottom,open:"invites"===c,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:a()(qs.Z,{[li]:p[ci][li],store:s,[ti]:e=>{Os[ti]({targetToRemove:e,[li]:p[ci][li],[ei]:$s})},[Ys]:async e=>{u(Xs),await Os[Ys]({[ri]:t,event:e,[li]:p[ci][li]})},[Js]:async()=>{},origin:"add_members",[ei]:$s,isTeamsEnabled:!1,right:a()("div",{}),focus:"invites"===c,handleFocus:()=>u(Xs)}),[Hs]:()=>u(vi),render:()=>{const e=a()(Ws.Z,{[li]:p[ci][li],store:s,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:W.og.Popup,disableScroller:!1};return a()("div",{},void 0,l[js](fe.Z,o()({},t,{width:380}),e))},[oi]:{width:"100%"}}),a()("div",{[oi]:h.reasonTitle,[ii]:v},void 0,a()(M.FormattedMessage,{id:"requestMembersModal.reasonForRequest.title",[fi]:"Reason for request"})),a()(Ns.Z,{capture:!0,allowEsc:!0},void 0,a()(he.Z,{textarea:!0,[oi]:{[gi]:8},value:p[ci][li][ci][ai],focus:"reason"===c,onFocus:()=>u("reason"),onChange:e=>{p[ci][li][Ks]({...p[ci][li][ci],[ai]:e[di].value})},[zs]:g[ni](yi.reason_placeholder)})),a()("div",{[oi]:h.footer,[ii]:v},void 0,a()(Ce.Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0},void 0,a()(M.FormattedMessage,{id:"RequestMembersModal.caption",[fi]:"Your admins will approve or decline your request."})),a()(le.Z,{isLarge:!0,[oi]:h[pi],[ii]:f},void 0,a()(M.FormattedMessage,{id:"requestMembersModal.requestInvitesButton.label",[fi]:"Request invites"})))),origin:a()("div",{[ii]:()=>{Z.trackClickInvitePeople(t,{...Gs[mi](t,p[ci][ui])}),d(!0)}},void 0,i)})};var wi=s(83890),Si=s(98707),Mi=s(27386),ki=s(23189),Zi=s(40394),Ci=s(57688),Ti=s(33929),Pi=s(33846),Fi=s(31194),Ii=s(48690),_i=s(30397),xi=s(48019),Ai=s(68894),Di=s(93686);const Bi=s(85).Yzm,Ri=s(85).PlO,Oi=s(85).loK,Gi=s(85).Ma8,Ui=s(85).wgE,Ei=s(85).D7I,Ni=s(85).KfM,Li=s(85).nx5,Vi=s(85).TtP;const qi=(0,M.defineMessages)({filterTeams:{[Li]:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function Wi(e){window.__c={n:"TeamsPopup"};const t=(0,Pt.O7)(),s=(0,Te.yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[i,n]=(0,Ft.AF)(void 0,Pi.Z),r=(0,l.useCallback)((e=>Ci.viewTeam({[Ui]:t,teamId:e,tab:Ii.a.Members,from:"teams_dropdown_for_group"})),[t]),d=(0,Ft.VK)((()=>[{key:"teams for group",render:e=>l[Ei](Se.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>l[Ei](ue.Z,o()({icon:a()(Di.p,{disabled:!0,store:e}),title:a()(Ce.Z,{style:s.teamMenuItem},void 0,e.getName()),right:a()(M.FormattedMessage,{[Li]:Gi,id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:e.getUserIdsInTeam()[Vi]}})},t)),action:()=>{r(e.id)},closeParentMenu:!0})))}]),[s,e.teamStores,r]),c=i[Oi],u=a()(xi.Z,{filter:c,context:{blocks:[],[Ui]:t,[Ri]:void 0},sections:d,initialFocus:0}),m=a()(Se.Z,{isInput:!0},void 0,a()(Ai.ZP,{value:c,onChange:(0,l.useCallback)((e=>{n({[Oi]:e.target.value,focus:!1})}),[n]),focus:!0,focusAfterAnimation:!0,placeholder:Ti.default[Bi](qi.filterTeams)})),p={menuType:W.og.Popup,width:280,maxHeight:"50vh",header:e.teamStores[Vi]>5?m:void 0};return l[Ei](fe.Z,p,u)}const zi=function(e){window.__c={n:"TeamsDropdownForGroup"};const t=(0,Ft.qz)(void 0,Ee.Z),[s]=(0,Ft.AF)(_i.Z),i=(0,Te.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),n=(0,Ft.VK)((()=>s.teams.filter((t=>t.getMembers().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return a()(me.ZP,{popupType:me.Z4.Popup,renderOrigin:e=>l[Ei](Ve.Z,o()({disabled:0===n[Vi],style:0===n[Vi]?i.noTeams:i.button},e),0===n[Vi]?a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",[Li]:"None"}):a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",[Li]:Ni,values:{numberOfTeams:n[Vi]}}),n[Vi]>0&&g.Z.chevronDown(i.chevron)),buttonPopupStore:t,placementToOrigin:Fi.Iw.Bottom,render:e=>a()(Wi,{parent:e,teamStores:n}),onClose:(0,l.useCallback)((()=>{t.reset()}),[t])})};var Ki=s(19522),Hi=s(93405);const Qi=s(85).ZYq,ji=s(85).nx5,Ji=s(85).Wp_,Yi=s(85).D7I,Xi=s(85).QQK,$i=s(85).Wqi;function eo(e){window.__c={n:"GroupActionMenu"};const{group:t,[$i]:s,[Xi]:i}=e,n=(0,Ft.qz)(void 0,Ee.Z);return a()(me.ZP,{popupType:Vs.kQ.Popup,render:()=>a()(to,{group:t,[$i]:s,popupStore:n,[Xi]:i}),buttonPopupStore:n,renderOrigin:e=>l[Yi](ge.Z,o()({icon:g.Z.dots},e))})}function to(e){window.__c={n:"ActionMenu"};const{group:t,[$i]:s,popupStore:i,[Xi]:n}=e,r=(0,$.Gc)(),c=(0,Ft.VK)((()=>s.canAdmin()),[s]),u=(0,Pt.O7)(),m=(0,Te.yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),p=(0,l.useCallback)((async()=>{i[Ji]({open:!1});await P.confirmUserAction({message:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",[ji]:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",[ji]:"Yes"})})&&(await B[Qi]({environment:u,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await _.deletePermissionGroup({environment:u,[$i]:s,group:t,transaction:e})}}),Z.trackPermissionGroupDelete(u))}),[t,u,s,i]),g=(0,l.useCallback)((()=>{n[Ji]({...n.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),i[Ji]({open:!1}),Z.trackPermissionGroupRename(u)}),[t,u,i,n]),h=(0,l.useCallback)((()=>{Ki.Z[Ji]({...Ki.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),Ci.openCreateTeamModal("group_settings")}),[t]),v={key:"action_menu",render:e=>l[Yi](Se.Z,e),items:d().compact([{key:"rename",render:e=>l[Yi](Hi.Z,o()({},e,{title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",[ji]:"Rename"})})),action:g},r?{key:"create_team_from_group",render:e=>l[Yi](Hi.Z,o()({},e,{title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",[ji]:"Create teamspace from group"})})),action:h}:void 0,c&&{key:"delete",render:e=>l[Yi](Hi.Z,o()({},e,{title:a()("div",{style:m.deleteButton},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",[ji]:"Delete"}))})),action:p}])};return a()(fe.Z,{menuType:W.og.Popup},void 0,a()(ye.Z,{type:ye.i.Vertical,initialFocus:0,sections:[v],onAccept:()=>{i[Ji]({open:!1})}}))}class so extends u.default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const io=so;var oo=s(86125),no=s(66897),ao=s(33728),ro=s(31299),lo=s(92864),co=s(47082),uo=s(97680);const mo=s(85).xgV,po=s(85).Ek1,go=s(85).Mm1,ho=s(85).E0z,vo=s(85).dLQ,fo=s(85)._V5,yo=s(85).Yzm,bo=s(85).TLr,wo=s(85).wgE,So=s(85).D29,Mo=s(85).eiN,ko=s(85).QmD,Zo=s(85).D7I,Co=s(85).nx5,To=s(85).PtI,Po=s(85).Wp_,Fo=s(85).Wqi;function Io(e){window.__c={n:"GroupAddMembersButton"};const{group:t,[Fo]:s,groupStore:i}=e,n=(0,Ft.qz)(void 0,Ee.Z),r=(0,Te.yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return a()(me.ZP,{popupType:Vs.kQ.Popup,render:()=>a()(_o,{[Fo]:s,group:t,popupStore:n,groupStore:i}),buttonPopupStore:n,onClose:()=>i[Po]({userInputValue:"",[To]:[],limitUsers:!0}),style:r.popup,renderOrigin:e=>a()("div",{},void 0,l[Zo](Ve.Z,o()({isGray:!0,icon:g.Z.plus,style:r.button},e),a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",[Co]:"Add members"})))})}function _o(e){window.__c={n:"AddMemberMenu"};const t=(0,Pt.O7)(),s=(0,M.useIntl)(),{group:i,[Fo]:o,popupStore:n,groupStore:r}=e,c=(0,Ft.VK)((()=>r[ko][To].map((e=>{const t=o.getRecordValue({table:f.KJ,id:e});return a()(lo.vw,{userValue:t,format:lo.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=r[ko][To][Mo]((t=>t!==e));r[Po]({...r[ko],[To]:t})},shouldShrink:!0,isSingle:!1},e)}))),[o,r]),u=(0,Ft.VK)((()=>()=>{const{[To]:e}=r[ko],s=i[So]||[],a=d().union(s,e),l={...i,[So]:a,last_edited_time:Date.now()};B.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",[wo]:t,perform:e=>{_.updatePermissionGroup({[Fo]:o,group:l,transaction:e})}}),r[Po]({userInputValue:"",[To]:[],limitUsers:!0}),n[Po]({open:!1}),Z.trackPermissionGroupAddMembers(t,{add_member_count:e.length})}),[i,t,r,n,o]),m=(0,l.useCallback)((()=>{const{[To]:e}=r[ko],t=e.slice(0,e.length-1);r[Po]({...r[ko],[To]:t})}),[r]),p=(0,l.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,ao.zI)(t),{currentSpaceStore:o}=N.default[ko],{data:n}=ae.default[ko];if(!n||!o)return;const a=(0,Y.getVisibleUsers)(n).map((e=>e.userId)),l=d().compact(a.map((e=>se.U6[bo](o,{table:f.KJ,id:e}).getValue())))[Mo]((e=>s.includes(e.email)&&!r[ko][To].includes(e.id)));r[Po]({...r[ko],[To]:[...r[ko][To],...l.map((e=>e.id))],userInputValue:i})}),[r]),g=(0,Ft.VK)((()=>r[ko].userInputValue),[r]),h=(0,Ft.VK)((()=>r[ko][To]),[r]);return a()(fe.Z,{menuType:W.og.Popup,tokenInputHeader:!0,header:a()(co.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:co.Z.Format.Group,tokens:c,placeholder:s[yo]({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",[Co]:"Search for a person…"}),onRemoveLastToken:m,value:g,onChange:p,inputAndTokenWrapRightStyle:{[fo]:t[ho][vo]?0:6,[go]:t[ho][vo]?0:6},right:a()(le.Z,{isLarge:!0,onClick:u},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",[Co]:"Add"}))})},void 0,a()(we.Z,{request:{query:g,[To]:h},[mo]:async s=>{let{query:i,[To]:o}=s;const n=e.group[So]||[];return(await ro.searchVisibleSpaceUsers({[wo]:t,query:i,membersOnly:!0}))[Mo]((e=>n[po](e.id)<0&&o[po](e.id)<0)).slice(0,20)},render:(e,t)=>a()(xo,{results:t,[Fo]:o,groupStore:r})}))}function xo(e){window.__c={n:"AddMemberResults"};const{[Fo]:t,groupStore:s}=e,[i,n]=(0,Ft.AF)(s,io),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),d=(0,Ft.VK)((()=>r.map((e=>{const s=se.U6[bo](t,{table:f.KJ,id:e}).getValue();return{key:e,render:e=>l[Zo](uo.Z,o()({},e,{actor:(0,no.m3)(s),useEmailAsTooltip:!0})),action:()=>{const t=[...i[To],e];n({...i,[To]:t,userInputValue:""})}}}))),[t,n,i,r]);if(0===r.length)return a()(Se.Z,{},void 0,a()(Le.Z,{title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",[Co]:"No results"})}));{const e={key:"user_menu",render:e=>l[Zo](Se.Z,e),items:d};return a()(ye.Z,{type:ye.i.Vertical,initialFocus:0,sections:[e]})}}const Ao=s(85).LCr,Do=s(85).wgE,Bo=s(85).Drs,Ro=s(85).JJj,Oo=s(85).yL5,Go=s(85).D29,Uo=s(85).GOX,Eo=s(85).PPM,No=s(85).$W2,Lo=s(85).jms,Vo=s(85).XCs,qo=s(85).OM8,Wo=s(85).ChN,zo=s(85).h8z,Ko=s(85).UPJ,Ho=s(85).EMU,Qo=s(85).nx5,jo=s(85).JJs,Jo=s(85).D7I,Yo=s(85).Wqi;function Xo(e){window.__c={n:"GroupMembers"};const{group:t,canEdit:s,[Yo]:i,settingsStore:n}=e,r=(0,M.useIntl)(),d=(0,Ft.qz)(void 0,io),{groupMembers:c,remainingMembers:u}=(0,Ft.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserStores:o}=(0,Pe.rm)({group:t,[Yo]:i,limit:d.state.limitUsers&&!n.state.groupsFilter?10:void 0});return{groupMembers:(0,Pe.N5)({userStores:o,[Yo]:i,intl:r}),remainingMembers:e,totalMembers:s}}),[t,i,n,d,r]);return a()("div",{style:{padding:"4px 42px 8px"}},void 0,c.map((t=>l[Jo]($o,o()({key:t.id,[jo]:t},e)))),u>0&&a()(Ve.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{d.setState({...d.state,limitUsers:!1})}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",[Qo]:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:u}})),s?a()(Io,{group:t,[Yo]:i,groupStore:d}):c.length<1&&a()(Ve.Z,{disabled:!0,isGray:!0},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",[Qo]:"No members inside"})))}function $o(e){window.__c={n:"GroupMember"};const{[Yo]:t,[jo]:s,group:i,canEdit:o}=e,n=(0,Pt.O7)(),r=(0,Ft.VK)((()=>t.isDefined()?(0,z.getSpacePermissionItem)(t.getPermissionItems(),s.id):"none"),[t,s]);return a()("div",{style:{display:Ho,alignItems:"center",[Ko]:zo}},s.id,a()("div",{style:{display:Ho}},void 0,a()(Rt.Z,{[jo]:s,style:{fontSize:14,[Wo]:400,[qo]:"17px",[Vo]:6,[Lo]:34,width:"100%"},[No]:22}),(0,h.isAnyAdmin)(r)&&a()(oo.Z,{role:"membership_admin"===r?"membership_admin":"admin"})),o&&a()(Ve.Z,{isGray:!0,hoveredStyle:{color:m.ZP.red},onClick:async()=>{if(await P[Eo]({message:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",[Qo]:"Are you sure you want to remove this member?"}),[Uo]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",[Qo]:"Yes"})})){const e=(i[Go]||[]).filter((e=>e!==s.id)),o={...i,[Go]:e,[Oo]:Date.now()};B[Ro]({[Bo]:"SpacePermissionGroup.renderUser",[Do]:n,perform:e=>{_.updatePermissionGroup({[Yo]:t,group:o,[Ao]:e})}}),Z.trackPermissionGroupRemoveMember(n)}}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",[Qo]:"Remove"})))}var en=s(13991),tn=s(22808),sn=s(49312),on=s(12793),nn=s(3386),an=s(5210);const rn=s(85).cZW,dn=s(85).GBw,ln=s(85).Yzm,cn=s(85).D7I,un=s(85).nx5,mn=s(85).Dd5,pn=s(85).pkR,gn=s(85).mFu,hn=s(85).$bT,vn=s(85).Hco,fn=s(85).ROo,yn=s(85).JJj,bn=s(85).yL5,wn=s(85).lUP,Sn=s(85).XLC,Mn=s(85).Oc6,kn=s(85).PXg,Zn=s(85).jkI,Cn=s(85).H1U,Tn=s(85).UPJ,Pn=s(85).L_E,Fn=s(85).Wqi;function In(e){window.__c={n:"GroupNameToggle"};const{row:t,canEdit:s,open:i,toggleOpenState:n,[Fn]:r,settingsStore:d}=e,c=t.group,u=(0,M.useIntl)(),m=(0,Te.Fg)(),p=(0,Pt.O7)(),h=Pe.kF({intl:u,group:c}),v=(0,Te.yK)((e=>({[Pn]:{display:"flex",[Tn]:"flex-start",[Cn]:Zn,width:"100%"},toggle:{flexShrink:0,[kn]:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${i?0:-90}deg)`,fill:"inherit",opacity:.5,[kn]:4},name:{fontFamily:w.Z[Mn](en.SP).sans,fontSize:14,lineHeight:"17px",[kn]:4},input:{fontWeight:w.Z.fontWeight.medium,padding:"4px 6px",background:e[Sn]},[wn]:{[kn]:9}})),[i]),f=(0,l.useCallback)((e=>{const t={...c,[wn]:e,[bn]:Date.now()};B[yn]({userAction:"SpacePermissionGroup.handleIconChange",environment:p,perform:e=>{_.updatePermissionGroup({[Fn]:r,group:t,transaction:e})}}),Z.trackPermissionGroupSetIcon(p,{is_emoji:(0,tn.Z)(e)})}),[c,r,p]),y=(0,l.useCallback)((()=>{d.setState({...d.state,editingNameGroupId:void 0,[fn]:""})}),[d]),b=(0,l.useCallback)((e=>{d.setState({...d.state,[fn]:e.target.value})}),[d]),S=(0,l.useCallback)((()=>{const{editingNameGroupId:e,[fn]:t}=d.state,s=t.trim();if(e===c.id){if(s!==c.name){const e={...c,name:s,[bn]:Date.now()};B[yn]({userAction:"SpacePermissionGroup.handleNameAccept",environment:p,perform:t=>{_.updatePermissionGroup({[Fn]:r,group:e,transaction:t})}})}d.setState({...d.state,editingNameGroupId:void 0,[fn]:""})}}),[c,p,r,d]),k=(0,Ft.VK)((()=>d.state.editingNameGroupId===c.id),[c,d]),C=(0,Ft.VK)((()=>d.state[fn]),[d]);function T(e){const t={width:e-4,height:e-4,fill:m[vn]},s={width:12,height:12,fill:m[vn]};return a()("div",{style:{display:"flex",[hn]:"row",[Cn]:Zn,[Tn]:Zn}},void 0,g.Z.random(t),g.Z.plusThick(s))}return a()("div",{style:v[Pn]},void 0,a()(an.Z,{isSidebar:!1,fill:!0,[wn]:"chevron",open:i,color:m[vn],onClick:()=>n(c.id),style:v.toggle}),a()(on.Z,{size:28,style:v[wn]}),k?a()(nn.Z,{capture:!0,onEsc:y},void 0,a()(he.Z,{[pn]:!s,type:sn.Z.Type.Inline,style:v.input,[rn]:u[ln]({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",[un]:dn}),focus:!0,value:C,[mn]:b,onBlur:S,onSubmit:S})):a()(Ce.Z,{style:v.name,showTooltipWhenTruncated:!0},void 0,h),(P=t.isRowHovered,c[wn]?a()(Fe.Z,s?{[pn]:!1,bucket:"public",[wn]:c[wn]?{[gn]:r[gn],[wn]:c[wn]}:void 0,size:18,isEmptyPage:!1,title:h,[mn]:f,style:v[wn]}:{[pn]:!0,bucket:"public",[wn]:c[wn]?{[gn]:r[gn],[wn]:c[wn]}:void 0,size:18,isEmptyPage:!1,title:h,style:v[wn]}):P&&s?a()(Ze.Z,{renderTooltip:()=>a()(M.FormattedMessage,{[un]:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>l[cn](Fe.Z,o()({[pn]:!1,bucket:"public",[wn]:c[wn]?{[gn]:r[gn],[wn]:c[wn]}:void 0,size:18,isEmptyPage:!1,title:h,[mn]:f,style:{...v[wn],width:30},defaultIcon:T(18)},e))}):void 0));var P}const _n=s(85).Uie,xn=s(85).OlC,An=s(85).dBt,Dn=s(85).O9h,Bn=s(85).XZb,Rn=s(85).M_x,On=s(85).nx5,Gn=s(85).g7N,Un=s(85).XNW,En=s(85).QQK,Nn=s(85).fbO,Ln=s(85).Wqi,Vn=s(85).Aw$;function qn(e){let{groups:t,[Vn]:s,[Ln]:i,permissionsSettingsStore:o}=e;window.__c={n:"SpaceGroupsTable"};const[n,r]=(0,l.useState)([]),d=(0,Te.Fg)(),c=(0,$.Gc)(),u=(0,Ft.VK)((()=>(0,p.ZP)(o.state.groupsFilter,t,(e=>e.name||""))),[o,t]),m=(0,l.useCallback)((e=>{r((t=>t[Nn](e)?t.filter((t=>t!==e)):t.concat(e)))}),[r]),g=(0,l.useMemo)((()=>function(e){return e.map((e=>({id:e.id,[Rn]:e,isClickable:!1})))}(u)),[u]),h=(0,l.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,[Vn]:i,[Ln]:o,[En]:n,isTeamEnabled:r}=e;const d={id:"title",[Bn]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",[On]:"Group"}),[Dn]:e=>a()(In,{row:e,open:t[Nn](e.id),toggleOpenState:s,[Vn]:i,[Ln]:o,[En]:n}),[An]:{width:120},[xn]:!1,sortable:!1},l={id:"teams",[Bn]:a()("div",{style:{paddingLeft:8}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",[On]:"Teamspaces"})),[Dn]:e=>a()("div",{style:w.Z[_n]},void 0,a()(zi,{[Rn]:e[Rn]})),[An]:{width:40},[xn]:!1,sortable:!1},c={id:"members",[Bn]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",[On]:"Members"}),[Dn]:e=>{var t;return a()("div",{style:w.Z[_n]},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",[On]:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:(null===(t=e[Rn].user_ids)||void 0===t?void 0:t.length)||0}}))},[An]:{width:40},[xn]:!1,sortable:!1},u={id:"menu",[Bn]:null,[Dn]:e=>a()(eo,{[Rn]:e[Rn],[Ln]:o,[En]:n}),[An]:{width:20},[xn]:!0,sortable:!1};return[d,...r?[l]:[],c,...i?[u]:[]]}({openRowIds:n,toggleOpenRowId:m,[Vn]:s,[Ln]:i,[En]:o,isTeamEnabled:c})),[n,m,s,i,o,c]),v=(0,Zi.b)({columnRenderInfo:h,theme:d});return a()(Zi.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:h,rows:g,styles:v,renderNoRowsComponent:()=>a()(Ce.Z,{isSmall:!0,style:{[Un]:5,marginTop:10,[Gn]:20}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",[On]:"No groups found."})),renderRowChild:e=>n[Nn](e.id)?a()(Xo,{[Rn]:e[Rn],[Vn]:s,[Ln]:i,[En]:o}):void 0})}var Wn=s(43768);const zn=s(85).L97,Kn=s(85).TEz,Hn=s(85).Scd,Qn=s(85).bMc,jn=s(85).PG2,Jn=s(85).o1U,Yn=s(85).v8Q;function Xn(e){window.__c={n:"ButtonStack"};const{items:t,clickHandlerContext:s}=e,i=$n(),o=function(){const e=$n();return(0,l.useMemo)((()=>({destructive:{default:e.destructiveButtonDefault,[Yn]:e.destructiveButtonHovered,[Jn]:e.destructiveButtonPressed},primary:{default:e.primaryButtonDefault,[Yn]:e[Qn],[Jn]:e.primaryButtonPressed},secondary:{default:e.secondaryButtonDefault}})),[e.destructiveButtonDefault,e.destructiveButtonHovered,e.destructiveButtonPressed,e.primaryButtonDefault,e[Qn],e.primaryButtonPressed,e.secondaryButtonDefault])}();return a()("div",{style:i.wrapper},void 0,t.map((e=>{const t=e.combinedStyles??o[e.buttonType];return a()(ce.Z,{style:null==t?void 0:t.default,hoveredStyle:null==t?void 0:t[Yn],pressedStyle:null==t?void 0:t[Jn],[jn]:()=>e[jn](e,s)},e.key,e.label)})))}function $n(){return(0,Te.yK)((e=>{const t={alignItems:"center",borderRadius:3,boxShadow:void 0,display:"inline-flex",flexShrink:0,fontSize:14,fontWeight:w.Z.fontWeight.medium,height:28,justifyContent:"center",lineHeight:1.2,paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",width:"100%"};return{destructiveButtonDefault:{...t,[Hn]:e.redBadgeBackground,color:m.ZP.white,fill:m.ZP[Kn]},destructiveButtonHovered:{[Hn]:m.ZP.redWithAlpha(.8)},destructiveButtonPressed:{[Hn]:m.ZP.red},primaryButtonDefault:{...t,[Hn]:m.ZP.blue,color:m.ZP.white,fill:m.ZP[Kn],height:32},[Qn]:{[Hn]:e.blueButtonHoveredBackground},primaryButtonPressed:{[Hn]:e.blueButtonPressedBackground},secondaryButtonDefault:{...t,[Hn]:e[zn],color:e.mediumTextColor,fill:m.ZP[Kn]},wrapper:{display:"flex",flexDirection:"column",gap:4}}}),[])}function ea(e){window.__c={n:"BillingModalStackLayout"};const t=(0,Te.yK)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:24,marginTop:20}})),[]);return a()("div",{style:{...t.wrapper,...e.styles}},void 0,e.children)}const ta=s(85).nHL,sa=s(85).zDZ;function ia(e){window.__c={n:"SmallModalHeader"};const{icon:t,title:s,[sa]:i,customIcon:o}=e,n=(0,Te.yK)((e=>({[sa]:{color:e.text.secondary,fontSize:14,lineHeight:"18px",[ta]:-.154,textAlign:"center"},icon:{display:"inline",height:34,fill:"#8E8B87"},title:{color:e.text.primary,textAlign:"center",fontSize:16,lineHeight:"1.3",fontWeight:w.Z.fontWeight.medium,[ta]:-.32,textWrap:"balance"},wrapper:{display:"flex",flexDirection:"column",gap:8}})),[]);return a()("div",{style:n.wrapper},void 0,t?t(n.icon):o||null,a()("div",{style:n.title},void 0,s),i?a()("div",{style:n[sa]},void 0,i):null)}const oa=s(85).wgE,na=(s(85).ALt,s(85).Ynw,s(85).qAG,s(85).cF6,s(85).nx5),aa=s(85).YNC,ra=s(85).PG2,da=s(85).XM6,la=s(85).X8R;function ca(e){window.__c={n:"ContractionConfirmation"};const{onFinished:t,userId:s,userContractionMessages:i}=e,o=(0,Te.yK)((e=>({highlights:{color:e.text[aa],fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"left",marginTop:-28,marginBottom:-20,marginLeft:-16},customIcon:{alignSelf:"center"},wrapper:{marginTop:4}})),[]),n=(0,M.useIntl)(),r=(0,l.useCallback)((e=>{"submit"!==e.key?t(!1):t(!0)}),[t]),d=(0,Ft.VK)((()=>N.default.state.currentSpaceStore),[]),c=(0,Ft.VK)((()=>{if(!d)return;const e=se.U6.createChildStore(d,{id:s,table:f.KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),u=(0,Ft.VK)((()=>null==c?void 0:c.getDisplayName(n)),[c,n]);return a()(ea,{styles:o.wrapper},void 0,a()(ia,{customIcon:a()(Ot.Z,{userStore:c,size:34,style:o.customIcon}),title:ga(u),description:ma(i)}),a()("div",{style:o.highlights},void 0,a()("ul",{},void 0,i.map(((e,t)=>a()("li",{},`contraction_highlight_${t}`,e))))),a()(Xn,{items:[{key:"submit",[la]:da,label:pa(u),[ra]:r},{key:"cancel",[la]:aa,label:a()(M.FormattedMessage,{id:"contractionConfirmation.cancel",[na]:"Cancel"}),[ra]:r}]}))}function ua(e){return a()(M.FormattedMessage,e>2e3?{id:"contractionConfirmation.amount.2000",[na]:"2000+"}:e>1500?{id:"contractionConfirmation.amount.1500",[na]:"1500+"}:e>1e3?{id:"contractionConfirmation.amount.1000",[na]:"1000+"}:e>500?{id:"contractionConfirmation.amount.500",[na]:"500+"}:e>250?{id:"contractionConfirmation.amount.250",[na]:"250+"}:e>100?{id:"contractionConfirmation.amount.100",[na]:"100+"}:e>75?{id:"contractionConfirmation.amount.75",[na]:"75+"}:e>50?{id:"contractionConfirmation.amount.50",[na]:"50+"}:e>25?{id:"contractionConfirmation.amount.25",[na]:"25+"}:e>10?{id:"contractionConfirmation.amount.10",[na]:"10+"}:e>5?{id:"contractionConfirmation.amount.5",[na]:"5+"}:{id:"contractionConfirmation.amount.2",[na]:"2+"})}function ma(e){return e.length>0?a()(M.FormattedMessage,{id:"contractionConfirmation.description.withName",[na]:"They have been an active Notion member. Removing them may cause permanent loss of their private pages."}):a()(M.FormattedMessage,{id:"contractionConfirmation.description",[na]:"They will immediately lose access to this workspace and no one will be able to access their private pages."})}function pa(e){return e&&e.length<16?a()(M.FormattedMessage,{id:"contractionConfirmation.remove.withName",[na]:"Remove {name}",values:{name:e}}):a()(M.FormattedMessage,{id:"contractionConfirmation.remove",[na]:"Remove member"})}function ga(e){return a()(M.FormattedMessage,e?{id:"contractionConfirmation.title.withName",[na]:"Are you sure you want to remove {name}?",values:{name:e}}:{id:"contractionConfirmation.title",[na]:"Are you sure you want to remove this member?"})}async function ha(e,t,s){let i=[],o={};if(s){const n=await C.getUserContractionData(e,{userId:t,spaceId:s});"success"===n.type&&(o=n.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.l28_active);s>1&&t.push(a()(M.FormattedMessage,{id:"contractionConfirmation.activity",[na]:"Visited <bold>{activeDays} days</bold> in the past month",values:{activeDays:ua(s),bold:e=>a()("b",{},void 0,e)}}));const i=Number(e.num_comments);i>1&&t.push(a()(M.FormattedMessage,{id:"contractionConfirmation.numberOfComments",[na]:"Made <bold>{numberOfComments} comments</bold> in their lifetime",values:{numberOfComments:ua(i),bold:e=>a()("b",{},void 0,e)}}));const o=Number(e.num_pages_created);return o>1&&t.push(a()(M.FormattedMessage,{id:"contractionConfirmation.numberOfPages",[na]:"Created <bold>{numberOfPages} pages</bold> in their lifetime",values:{numberOfPages:ua(o),bold:e=>a()("b",{},void 0,e)}})),t}(o))}return Z.trackContractionContextualConfirmationShown({[oa]:e,userContractionData:o}),await Wn.Z.showModal((s=>{const n=t=>{t?Z.trackContractionContextualConfirmationConfirmed({[oa]:e,userContractionData:o}):Z.trackContractionContextualConfirmationCancelled({[oa]:e,userContractionData:o}),s(t)};return{dismissUsing:"onlyEscape",onDismiss:()=>n(!1),content:a()(ca,{onFinished:n,userId:t,userContractionMessages:i})}}))}var va=s(4615),fa=s(12508);const ya=s(85).Nhc,ba=s(85).ZWc,wa=s(85).Q1_,Sa=s(85).zDZ,Ma="other";function ka(e){window.__c={n:"BillingSurvey"};const{buttons:t,[Sa]:s,icon:i,options:o,otherOptionPlaceholder:n,randomizeOrder:r,title:d}=e,c=function(e,t){return(0,l.useMemo)((()=>{if(!t)return e;const s=e.find((e=>e.optionName===Ma)),i=e.filter((e=>e!==s)).sort((()=>Math.random()-.5));return s&&i.push(s),i}),[t,JSON.stringify(e)])}(o,r),[u,m]=function(){const[e,t]=(0,l.useState)(new Set),s=(0,l.useCallback)((e=>{t((t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}))}),[t]);return[e,s]}(),[p,g]=(0,l.useState)({}),h=(0,l.useMemo)((()=>({selectedOptionNames:Array.from(u),selectedOptionIndexes:c.map(((e,t)=>({[wa]:e,index:t}))).filter((e=>{let{[wa]:t}=e;return u.has(t.optionName)})).map((e=>{let{index:t}=e;return t})),customTextByOptionName:p})),[u,JSON.stringify(p)]);return a()(ea,{},void 0,a()(ia,{icon:i,title:d,[Sa]:s}),a()("div",{},void 0,c.map((e=>{const{type:t,optionName:s}=e,i=u.has(s);switch(t){case ba:return a()(Ca,{isChecked:i,[wa]:e,toggleValue:m},s);case"checkboxAndInput":return a()(Ta,{inputText:p[s]??"",isChecked:i,[wa]:e,placeholderText:n,setInputText:e=>{g((t=>({...t,[s]:e})))},toggleValue:m},s);default:(0,b.unreachable)(t)}}))),a()(Xn,{items:t,clickHandlerContext:h}))}function Za(){return(0,Te.yK)((()=>({[ba]:{marginTop:4},inlineInput:{margin:"0 12px 12px 12px",width:ya},row:{alignItems:"flex-start",cursor:"pointer",display:"flex",fontSize:14,gap:11,padding:"4px 20px 4px 12px"}})),[])}function Ca(e){window.__c={n:"BillingSurveyCheckbox"};const{[wa]:t,isChecked:s,toggleValue:i}=e,o=Za();return a()("div",{style:o.row,onClick:()=>i(t.optionName)},void 0,a()("div",{style:o[ba]},void 0,a()(fa.Z,{checked:s,size:14})),a()("div",{},void 0,t.label))}function Ta(e){window.__c={n:"BillingSurveyCheckboxAndInput"};const{inputText:t,isChecked:s,[wa]:i,placeholderText:o,setInputText:n,toggleValue:r}=e,d=Za();return l.createElement(l.Fragment,null,a()(Ca,{[wa]:i,isChecked:s,toggleValue:r}),s?a()(he.Z,{style:d.inlineInput,autoFocus:!0,value:t,placeholder:o,onChange:e=>n(e.target.value)}):null)}const Pa=s(85).i1R,Fa=s(85).wgE,Ia=(s(85).k5K,s(85).ZWc),_a=s(85).YNC,xa=s(85).X8R,Aa=(s(85).CJo,s(85).nx5);s(85).qAG;function Da(e){window.__c={n:"ContractionSurvey"};const{contractionSurveyId:t,onFinished:s}=e,i=(0,l.useCallback)(((e,i)=>{s(i?{contractionSurveyId:t,reasons:i.selectedOptionNames,reasonIndexes:i.selectedOptionIndexes,reasonOther:i.customTextByOptionName.other}:void 0)}),[t,s]),o=(0,l.useMemo)((()=>[{optionName:"not_using_enough",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.notUsingEnough",[Aa]:"Not using it enough"})},{optionName:"switching",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.switching",[Aa]:"Switching to another tool"})},{optionName:"no_longer_work_together",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.noLongerWorksHere",[Aa]:"No longer works here"})},{optionName:"no_longer_need_access",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.noLongerNeedAccess",[Aa]:"No longer need access to Notion"})},{optionName:"too_expensive",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.tooExpensive",[Aa]:"Too expensive"})},{optionName:"switching_to_another_workspace",type:Ia,label:a()(M.FormattedMessage,{id:"contractionSurvey.options.switchingToAnotherWorkspace",[Aa]:"Switching to another Notion workspace"})},{optionName:Ma,type:"checkboxAndInput",label:a()(M.FormattedMessage,{id:"contractionSurvey.options.other",[Aa]:"Other"})}]),[]);return a()(ka,{icon:g.Z.pencil,title:a()(M.FormattedMessage,{id:"contractionSurvey.title",[Aa]:"Why are you removing this member from your workspace?"}),description:a()(M.FormattedMessage,{id:"contractionSurvey.description",[Aa]:"We'd love your input to make Notion better"}),options:o,randomizeOrder:!0,buttons:[{key:"submit",[xa]:"primary",label:a()(M.FormattedMessage,{id:"contractionSurvey.continue",[Aa]:"Continue"}),onClick:i},{key:"cancel",[xa]:_a,label:a()(M.FormattedMessage,{id:"contractionSurvey.cancel",[Aa]:"Cancel"}),onClick:i}]})}var Ba=s(66957);const Ra=s(85).PlO,Oa=s(85).Yzm,Ga=(s(85).Mn,s(85).Ma8),Ua=s(85).tUl,Ea=s(85).loK,Na=s(85).j7K,La=s(85)._Fe,Va=s(85).wgE,qa=s(85).cZW,Wa=s(85).TLr,za=s(85).EJM,Ka=s(85).tBn,Ha=s(85).D7I,Qa=s(85).KfM,ja=s(85).nx5,Ja=(s(85).B$S,s(85).TtP),Ya=s(85).XNW,Xa=s(85).PXg;const $a=(0,M.defineMessages)({filterTeams:{[ja]:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function er(e){window.__c={n:"TeamGuestPageContent"};const{teamGuest:t}=e,s=(0,Pt.O7)(),i=(0,Ft.VK)((()=>N.default.state.currentSpaceStore),[]);if(!i)return null;if(0===t[za][Ja])return null;const n=[{key:"pages",render:e=>l[Ha](Se.Z,e),items:t[za].map((e=>{const t=se.G[Wa](i,{table:Oe.iU,id:e});return{key:e,render:e=>l[Ha](qe.Z,o()({},e,{store:t,[qa]:a()(M.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",[ja]:"Private page"})})),action:()=>{const t=se.G[Wa](i,{table:Oe.iU,id:e}),o=(0,Ue.ZP)({store:t,fullyQualified:!1,pageVisitSource:Re.tY.LinkInPage});Ge.navigate({[Va]:s,url:o,openInNew:"tab"})}}}))}],r={menuType:W.og.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t[za][Ja]>0&&a()(Ce.Z,{isSmall:!0,style:{color:m.ZP[La],[Ya]:15,[Xa]:15,paddingTop:6}},void 0,a()(M.FormattedMessage,{id:"guestpagesforteamguest.header",[ja]:"Pages"}))};return l[Ha](fe.Z,r,a()(ye.Z,{type:ye.i.Vertical,[Na]:void 0,sections:n}))}function tr(e){window.__c={n:"TeamGuestTeamContent"};const t=(0,Pt.O7)(),s=(0,Ft.qz)(void 0,Pi.Z),i=(0,Ft.VK)((()=>s.state[Ea]),[s]),n=(0,l.useCallback)((e=>Ci.viewTeam({[Va]:t,teamId:e,tab:Ii.a.Members,from:Ua})),[t]),r=(0,Te.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),d=(0,Ft.VK)((()=>[{key:"teams for team guest",render:e=>l[Ha](Se.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>l[Ha](ue.Z,o()({icon:a()(Di.p,{disabled:!0,store:e}),title:a()(Ce.Z,{style:r.teamMenuItem},void 0,e.getName()),caption:a()(M.FormattedMessage,{[ja]:Ga,id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam()[Ja]}}),inline:!0},t)),action:()=>{n(e.id)},closeParentMenu:!1})))}]),[e.teamStores,r.teamMenuItem,n]),c=a()(Se.Z,{isInput:!0},void 0,a()(Ai.ZP,{value:i,onChange:(0,l.useCallback)((e=>{s.setState({[Ea]:e.target.value,focus:!1})}),[s]),focus:!0,focusAfterAnimation:!0,[qa]:Ti.default[Oa]($a.filterTeams)})),u={menuType:W.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores[Ja]>5?c:void 0};return l[Ha](fe.Z,u,a()(xi.Z,{filter:i,context:{blocks:[],[Va]:t,[Ra]:void 0},[Na]:0,sections:d}))}const sr=function(e){window.__c={n:"TeamsAndPagesDropdownForTeamGuest"};const{teamGuest:t}=e,s=(0,Ft.VK)((()=>_i.Z.state.teams),[]),i=(0,Ft.VK)((()=>s.filter((e=>e.getMembers().some((e=>"user"===e.entity_type&&e.user_id===t.userId))))),[s,t]),n=(0,Te.yK)((e=>({button:{[Xa]:8},noTeams:{[Xa]:8,color:e.lightTextColor},chevron:{width:10,[Ya]:4,fill:e.lightIconColor}})),[]),r=i[Ja]??0;return a()(me.ZP,{popupType:me.Z4.Popup,renderOrigin:e=>l[Ha](Ve.Z,o()({disabled:0===r,style:0===r?n.noTeams:n.button},e),0===r?a()(M.FormattedMessage,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",[ja]:"No access"}):l[Ha](l[Ka],null,a()(M.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",[ja]:Qa,values:{numberOfTeams:r}}),g.Z.chevronDown(n.chevron))),render:()=>l[Ha](l[Ka],null,a()(tr,{teamGuest:t,teamStores:i}),a()(pe.Z,{size:"100%"}),a()(er,{teamGuest:t}))})};var ir=s(88775),or=s(69435);const nr=s(85).K07,ar=s(85).HdT,rr=s(85).f5o,dr=s(85).xgV,lr=s(85).kBp,cr=s(85).PPD,ur=s(85).Ubh,mr=s(85).j7K,pr=s(85).y79,gr=s(85).JJs,hr=s(85).AqE,vr=s(85).OK,fr=s(85).Bn$,yr=s(85).h0C,br=s(85).Iwv,wr=s(85).dMt,Sr=s(85).Iyn,Mr=s(85).cMy,kr=s(85).TZD,Zr=s(85).U76,Cr=s(85).zrY,Tr=s(85).Scd,Pr=s(85).SEy,Fr=s(85).GPw,Ir=s(85).jFW,_r=s(85).S9$,xr=s(85).mBb,Ar=s(85).gGi,Dr=s(85).AL1,Br=s(85).uGP,Rr=s(85).Gpy,Or=s(85).BCA,Gr=s(85).oSF,Ur=s(85).mFu,Er=s(85).$Vg,Nr=s(85).urI,Lr=s(85).kdC,Vr=s(85).cZW,qr=s(85).PXg,Wr=s(85).ihD,zr=s(85).DiQ,Kr=s(85).Yzm,Hr=s(85).rpY,Qr=s(85).Joh,jr=s(85).pkR,Jr=s(85).h8z,Yr=s(85).UPJ,Xr=s(85).cBH,$r=s(85).P38,ed=s(85).G3i,td=s(85).X_m,sd=s(85).PG2,id=s(85).XNW,od=s(85).EMU,nd=s(85).dL6,ad=s(85).sbn,rd=s(85).jkI,dd=s(85).MLn,ld=s(85).Dd5,cd=s(85).nLZ,ud=s(85).XCs,md=s(85).YDv,pd=s(85).P3s,gd=s(85).Exd,hd=s(85).ChN,vd=s(85).H1U,fd=s(85).g7N,yd=s(85).$bT,bd=s(85).tBn,wd=s(85).D7I,Sd=s(85).Au,Md=s(85).TEz,kd=s(85).UA5,Zd=s(85).pxq,Cd=s(85).TtP,Td=s(85).TLr,Pd=s(85).zOY,Fd=s(85).__z,Id=s(85).dLQ,_d=s(85).eiN,xd=s(85).GOX,Ad=s(85).PPM,Dd=s(85).c9r,Bd=s(85).vhD,Rd=s(85).e3f,Od=s(85).i3J,Gd=s(85).Und,Ud=s(85).Ql2,Ed=s(85).VXW,Nd=s(85).g65,Ld=s(85).xbB,Vd=s(85).M4Q,qd=s(85).nm$,Wd=s(85).ROo,zd=s(85).LCr,Kd=s(85).P0R,Hd=s(85).XtO,Qd=s(85).Wqi,jd=s(85).nxU,Jd=s(85).Drs,Yd=s(85).JJj,Xd=s(85).Wp_,$d=s(85).Gnd,el=s(85).QmD,tl=s(85).Vy4,sl=s(85).BRs,il=s(85).bm2,ol=s(85).ONo,nl=s(85).mwe,al=s(85).wgE,rl=s(85).kL0,dl=s(85).SPm,ll=s(85).sM5,cl=s(85).mdV,ul=s(85).htl,ml=s(85).X5t,pl=s(85).uZz,gl=s(85).Jkr,hl=s(85).BQ6,vl=s(85).nx5,fl=s(85).I9R,yl=s(85).qpZ,bl=s(85).HZQ,wl=s(85).EIp,Sl=s(85).MlL,Ml=s(85).yUP,kl=s(85).RMS,Zl=s(85).wQv,Cl=s(85).wfR,Tl=s(85).eaQ,Pl=s(85).a_A,Fl=s(85).OGC;class Il extends c.Z{constructor(){super(...arguments),this.storeTypes={[Fl]:oe.Z,[Pl]:ie.Z,accessRequestsStore:ie.Z,[Tl]:u.default[Cl](!0),[Zl]:u.default[Cl](!0)},this[kl]=u.default[Ml]([]),this[Sl]=this[wl]((()=>(0,q.isTeamspaceGuestsEnabled)())),this.renderReprovisioningData=(e,t,s)=>t?a()(At.Z,{[ul]:[{key:bl,[yl]:a()(M.FormattedMessage,{id:fl,[vl]:"User"}),[hl]:{[gl]:"50%"}},{key:pl,[yl]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",[vl]:"Private pages"}),[hl]:{[gl]:"25%"}},{key:ml,[yl]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",[vl]:"Action"}),[hl]:{[gl]:"25%"}}],rows:this.getSpaceRecoverRows(t.recentSpaceRecoverPages)}):!s&&a()(ve.Z,{}),this[cl]=()=>{const e=(0,M.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",[vl]:"Updating…"}});F[ll]({[dl]:e.updatingPermissions})},this.handleUpdateComplete=()=>{F.close()},this.handleTabClick=(e,t)=>{const s=this.getCurrentTabs(t)[e];switch(s){case oe.Q.Members:Z[rl](this[al],{tab:nl});break;case oe.Q.Groups:Z[rl](this[al],{tab:ol});break;case oe.Q.Guests:Z[rl](this[al],{tab:il});break;case oe.Q.Reprovisioning:Z[rl](this[al],{tab:"reprovisioning"});break;case oe.Q.Requests:Z[rl](this[al],{tab:sl});break;default:(0,b.unreachable)(s)}this[$d][Fl][el][tl]===oe.Q.Requests&&s!==oe.Q.Requests&&re.Z.reset(),this.navigateToTab(s)},this.navigateToTab=e=>{this[$d][Fl][Xd]({...this[$d][Fl][el],[tl]:e})},this.handleCreateGroupClick=()=>{B[Yd]({[Jd]:"SpacePermissionsSettings.handleCreateGroupClick",[al]:this[al],[jd]:e=>{const t=_.createPermissionGroup({[al]:this[al],[Qd]:this[Kd][Hd],[zd]:e});t&&this[$d][Fl][Xd]({...this[$d][Fl][el],editingNameGroupId:t.id,[Wd]:""})}}),Z.trackPermissionGroupCreate(this[al])},this.handleFilterChange=e=>{this[$d][Fl][Xd]({...this[$d][Fl][el],groupsFilter:e[qd].value})},this.handleMembersShowMoreClick=()=>{this[$d][Fl][Xd]({...this[$d][Fl][el],limitMembers:!1})},this.handleGuestsShowMoreClick=()=>{this[$d][Fl][Xd]({...this[$d][Fl][el],limitGuests:!1})},this.handleTeamGuestsShowMoreClick=()=>{this[$d][Fl][Xd]({...this[$d][Fl][el],limitTeamGuests:!1})},this.handleInviteLinkClick=()=>{const e=!this[Vd]();Z.trackInviteLinkUpdated(this[al],{enabled:e}),B[Yd]({[Jd]:"SpacePermissionsSettings.handleInviteLinkClick",[al]:this[al],[jd]:t=>{_.setSpaceInviteLinkEnabled({[zd]:t,[Qd]:this[Kd][Hd],inviteLinkEnabled:Boolean(e)})}})},this.handleSortClick=(e,t)=>{const s=this[$d][Fl][el].sorts[e];let i;i=!(!s||s.by!==t)&&s.asc,this[$d][Fl].update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))},this[Ld]=async(e,t,s)=>{const{[Hd]:i}=this[Kd],o=this[al][Nd].id;if(e[Ed]!==o||"none"!==t)this[cl](),"none"===t?(await C.removeUsersFromSpace(this[al],{userIds:[e[Ed]],[Ud]:i.id,removePagePermissions:!0,revokeUserTokens:!0}),await D.refresh(this[al])):B[Yd]({[Jd]:"SpacePermissionsSettings.handleMemberPermissionRoleChange",[al]:this[al],[jd]:s=>I[Od]({[al]:this[al],[Hd]:i,[Rd]:[{type:Bd,[Dd]:t,user_id:e[Ed]}],[zd]:s,from:"space_permission_setting_table"})}),this.handleUpdateComplete();else{await _.leaveSpace({[al]:this[al],[Ud]:i.id,[Gd]:s})&&ne.Z[Xd]({...ne.Z[el],open:!1})}},this.handleReprovisionToUserChange=async(e,t)=>{if(!(await P[Ad]({[dl]:a()("span",{},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",[vl]:"Are you sure you want to transfer their private pages? This action cannot be undone."})),[xd]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",[vl]:"Transfer private pages"})})))return;this[kl][Xd]([...this[kl][el],e]);const s=await C.transferSpaceUserContent(this[al],{[Ud]:this[Kd][Hd].id,fromUserId:e,toUserId:t});"failed"===s.type&&P.showError(s),await this[$d][Pl].refresh(),this[kl][Xd](this[kl][el][_d]((t=>t!==e)))}}willMount(){this.setInitialSubtabOnMount()}renderComponent(){const{[Hd]:e,[Id]:t}=this[Kd];if(!te.Z[el].online)return this[Fd]();const{data:s}=ae.default[el];if(!s)return this[Pd]();const i=Y.getVisibleUsers(s);if(!d().every(i.map((t=>se.U6[Td](e,{table:f.KJ,id:t[Ed]}).isReady()))))return this[Pd]();const o=i[_d](y.CF),n=i[_d](y.du),r=this[Sl][el]?n[Cd]:n[_d]((e=>!e.isTeamGuest&&e.isPageGuest))[Cd],{[tl]:c}=this[$d][Fl][el];if(t)return a()(l.Fragment,{},void 0,this[Zd]()&&a()(Se.Z,{shouldShowBottomDivider:!0},void 0,this.renderMobileInviteButton(),a()("div",{[hl]:this.mobileMenuItemStyle()},void 0,this.renderInviteLink())),a()(Se.Z,{},void 0,this.renderSpaceMembers(o)));const u={[oe.Q.Members]:l[wd](l[bd],null,a()(M.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",[vl]:"Members"}),a()("span",{},void 0," "),a()("span",{[hl]:{[kd]:this[Sd][Md]}},void 0,o[Cd])),[oe.Q.Groups]:a()(M.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",[vl]:"Groups"}),[oe.Q.Guests]:l[wd](l[bd],null,this[Sl][el]?a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.title",[vl]:"External"}):a()(M.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",[vl]:"Guests"}),a()("span",{},void 0," "),a()("span",{[hl]:{[kd]:this[Sd][Md]}},void 0,r)),[oe.Q.Reprovisioning]:a()(M.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",[vl]:"Recently left"}),[oe.Q.Requests]:l[wd](l[bd],null,a()(M.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",[vl]:"Requests"}),a()("span",{},void 0," "),a()("span",{[hl]:{[kd]:this[Sd][Md]}},void 0,this.renderNumberOfRequests()),this.renderUnreadRequestDot())},m=this.getCurrentTabs(n),p=m.map((e=>u[e]));return a()(Mi.Z,{},void 0,this[Sl][el]&&a()("div",{[hl]:{[ll]:"flex",[yd]:"column",gap:8,[fd]:20}},void 0,a()("div",{[hl]:{[ll]:"flex",[vd]:"center",gap:7}},void 0,a()(Ce.Z,{[hl]:{[hd]:w.Z[hd].medium,[gd]:17}},void 0,a()(M.FormattedMessage,{id:"spaceBasicSettings.people.title",[vl]:"People"})),a()(Zt.Z,{href:(0,K.getLocalizedUrl)("guides.members"),[pd]:"members_settings"})),a()(Ce.Z,{isSecondaryColor:!0,[hl]:{[gd]:15}},void 0,a()(M.FormattedMessage,{id:"spaceBasicSettings.people.subtitle",[vl]:"Manage members, external guests, groups and permissions."}))),a()(Ba.Z,{tabs:p,selectedIndex:m.indexOf(c),[ld]:e=>this.handleTabClick(e,n),[hl]:{[md]:0,[ud]:0,[cd]:-6,[fd]:14},tabTitleStyle:{[gd]:16}}),this.renderTab(c,o,n))}[Pd](){return a()(ve.Z,{[hl]:{margin:"calc(50% - 1em) auto"}})}[Fd](){return a()(Mi.Z,{},void 0,a()(Ce.Z,{isSmall:!0,[hl]:{[dd]:rd}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",[vl]:"Please go online to manage members."})))}renderHelp(){return a()("div",{[hl]:{[cd]:24,[fd]:24}},void 0,a()(Zt.Z,{title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",[vl]:"Learn about adding members to your workspace"}),href:(0,K.getLocalizedUrl)("guides.members"),[pd]:"members_settings"}))}renderTab(e,t,s){return e===oe.Q.Members?a()(l.Fragment,{},void 0,this.renderSpaceMembers(t)):e===oe.Q.Guests?l[wd](l[bd],null,this[Sl][el]?this.renderExternalTab(s):this.renderSpaceGuests(s)):e===oe.Q.Groups?this.renderGroupsTab():e===oe.Q.Reprovisioning?this.renderReprovisioning():e===oe.Q.Requests?this.renderRequestsTab():void(0,b.unreachable)(e)}renderExternalTab(e){const{[Hd]:t}=this[Kd],s=!Boolean(t.getSettingsStore()[nd]("disable_team_guests")[ad]());return a()("div",{[hl]:{[ll]:od,[yd]:"column",gap:8}},void 0,s&&l[wd](l[bd],null,a()("div",{[hl]:{[ll]:"flex"}},void 0,a()(an.Z,{open:this[$d][Zl][el],[sd]:()=>this[$d][Zl][Xd](!this[$d][Zl][el]),isSidebar:!1,fill:!0,[hl]:{[id]:-27}}),a()("div",{[hl]:{[id]:3}},void 0,a()("div",{[hl]:{[ll]:"flex",[vd]:"center",[td]:24}},void 0,a()(Ce.Z,{[hl]:{[gd]:15}},void 0,a()(M.FormattedMessage,{id:"spacePermissionSettings.teamGuests.title",[vl]:"Teamspace guests"})),a()("span",{},void 0," "),a()(Ce.Z,{isSecondaryColor:!0,[hl]:{[gd]:15}},void 0,e[_d]((e=>e.isTeamGuest))[Cd])),a()(Ce.Z,{isSecondaryColor:!0,[hl]:{[gd]:15}},void 0,a()(M.FormattedMessage,{id:"spacePermissionSettings.teamGuests.subtitle",[vl]:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})))),this[$d][Zl][el]&&this.renderTeamGuests(e)),a()("div",{[hl]:{[ll]:od}},void 0,a()(an.Z,{open:this[$d][Tl][el],[sd]:()=>this[$d][Tl][Xd](!this[$d][Tl][el]),isSidebar:!1,fill:!0,[hl]:{[id]:-27}}),a()("div",{[hl]:{[id]:3}},void 0,a()("div",{[hl]:{[ll]:od,[vd]:rd,[td]:24}},void 0,a()(Ce.Z,{[hl]:{[gd]:15}},void 0,a()(M.FormattedMessage,{id:"spacePermissionSettings.pageGuests.title",[vl]:"Page guests"})),a()("span",{},void 0," "),a()(Ce.Z,{isSecondaryColor:!0,[hl]:{[gd]:15}},void 0,e[_d]((e=>e.isPageGuest&&!e.isTeamGuest))[Cd])),a()(Ce.Z,{isSecondaryColor:!0,[hl]:{[gd]:15}},void 0,a()(M.FormattedMessage,{id:"spacePermissionSettings.pageGuests.subtitle",[vl]:"Page guests are free but can only access pages they've been invited to."})))),this[$d][Tl][el]&&this.renderSpaceGuests(e))}renderUnreadRequestDot(){if(this[Kd].unreadAccessRequests&&this[Kd].unreadAccessRequests>0)return a()(xt.z,{[kd]:this[Sd].redBadgeBackground,[hl]:{[id]:6}})}renderGroupsTab(){const{[Hd]:e}=this[Kd],{groupsFilter:t}=this[$d][Fl][el],s=this.canUseGroups(),i=this[Zd](),n=a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",[vl]:"Only membership admins and workspace owners can add a permission group."});if(e[ed]()){const r=e[$r]();return a()("div",{},void 0,s?a()(Ce.Z,{isMultiline:!0,[hl]:{[gl]:"80%"}},void 0,(0,$.bq)()?a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",[vl]:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",[vl]:"Set up groups to conveniently control page permissions from the share menu."})):a()(or.Z,{for:"plus",from:Xr,icon:g.Z.group,title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",[vl]:"Upgrade to create groups"}),caption:a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",[vl]:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),a()(pe.Z,{size:24,isHidden:!0}),a()("div",{[hl]:{[ll]:od,[vd]:rd,[Yr]:Jr}},void 0,s&&a()(Ze.Z,{[Qr]:()=>!i&&n,[Hr]:e=>l[wd](le.Z,o()({isLarge:!0,[sd]:this.handleCreateGroupClick,[jr]:!i},i?void 0:e),a()(M.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",[vl]:"Create a group"}))}),r[Cd]>0&&a()(he.Z,{[Vr]:this[Kd].intl[Kr]({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",[vl]:"Filter by group name…"}),left:g.Z[zr](this[Wr]()),[Lr]:!0,[Nr]:he.Z.Format.Small,value:t,[hl]:{...Il.filterStyle,[qr]:0},[ld]:this.handleFilterChange})),r[Cd]>0&&a()(qn,{[Qd]:e,permissionsSettingsStore:this[$d][Fl],[ol]:r,canEdit:this.canEditGroups()}))}}renderSpaceMembers(e){return this[Kd][Id]?this.renderMobileMemberList(e):a()("div",{},void 0,this.renderHelp(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this[Vd]();if(!e)return;const{[Fl]:s}=this[$d];return a()("div",{},void 0,a()("div",{[hl]:{[ll]:od,[vd]:Er,cursor:Ur}},void 0,a()("div",{[hl]:{[qr]:8,flexGrow:1}},void 0,a()(ki.Z,{},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",[vl]:"Invite link"})),a()(Ce.Z,{isSmall:!0,isMultiline:!0,[hl]:{[cd]:2,[gl]:"85%"}},void 0,a()(M.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",[vl]:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!this[Kd][Id]&&this.renderInviteLinkReset())),a()("div",{[hl]:{[cd]:5}},void 0,a()(ke.Z,{on:t,[sd]:this.handleInviteLinkClick}))),s&&t&&e&&this.renderInviteLinkUrl(e),a()(pe.Z,{size:40}))}renderInviteLinkReset(){const{[Hd]:e}=this[Kd];if(e[ed]())return a()(M.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",[vl]:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",[Rr]:{resetlink:t=>a()(Ct.Z,{[sd]:()=>{P.showDialog({[dl]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",[vl]:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,[Gr]:P.dismissDialog,items:[{label:a()(M.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",[vl]:"Reset"}),[kd]:"red",[Or]:async()=>{await C.refreshInviteLink(this[al],{[Ud]:e.id}),D.refresh(this[al])}}]})}},void 0,t)}})}renderInviteLinkUrl(e){const{mobileNative:t}=this[al],s=a()(M.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",[vl]:"Copy link"}),i=()=>{T.copyString({[al]:this[al],stringValue:e,copiedMessage:T.clipboardMessages[Br]}),Z.trackWorkspaceInviteCopyLink(this[al])},o=()=>{t&&t.share(e),Z.trackWorkspaceInviteCopyLink(this[al])};return this[Kd][Id]?a()("div",{},void 0,a()(he.Z,{type:Dr,[Nr]:he.B.Default,value:e,[jr]:!0}),t?a()(be.Z,{[sd]:o,[hl]:{[cd]:10,[gl]:Ar}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",[vl]:"Share link"})):a()(be.Z,{[sd]:i,[hl]:{[cd]:10,[gl]:Ar}},void 0,s)):a()("div",{},void 0,a()("div",{[hl]:{[ll]:od,[vd]:Er,[cd]:12}},void 0,a()(he.Z,{type:Dr,[Nr]:he.B.Default,value:e,[jr]:!0,[hl]:{[xr]:0,[_r]:0,[gl]:"calc(100% - 90px)",[td]:32}}),a()(le.Z,{[sd]:i,[hl]:{borderTopLeftRadius:0,[Ir]:0},isLarge:!0},void 0,s)))}renderMobileMemberList(e){const{[Hd]:t}=this[Kd];return a()(l.Fragment,{},void 0,e.map((e=>{const s=se.U6[Td](t,{table:f.KJ,id:e[Ed]});return a()("div",{[hl]:{[ll]:od,[vd]:rd,padding:10,[Fr]:`1px solid ${this[Sd][Pr]}`,[Tr]:this[Sd][Cr]}},e[Ed],this.renderMember(s),a()("div",{[hl]:{[dd]:rd,[id]:"auto"}},void 0,this.renderUserPermission(nl,e,s)))})))}renderDesktopMemberList(e){const{[Fl]:t}=this[$d],{membersFilter:s,limitMembers:i}=t[el],o=this[Zr](e,s),n=this.sortUsers(nl,o),r=i?n.slice(0,Il.defaultLimit):n;return a()(l[bd],{},void 0,a()("div",{[hl]:{[qr]:8,flexGrow:1}},void 0,a()(ki.Z,{},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",[vl]:"Members"}))),this.renderInviteViaDomainCaption(),a()(pe.Z,{size:16,isHidden:!0}),a()("div",{},void 0,a()("div",{[hl]:{[ll]:od,[Yr]:Jr,[vd]:rd,[fd]:16}},void 0,this.renderInviteButton(),a()(he.Z,{[Vr]:this[Kd].intl[Kr]({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",[vl]:kr}),left:g.Z[zr](this[Wr]()),[Lr]:!0,[Nr]:he.Z.Format.Small,value:s,[hl]:Il.filterStyle,[ld]:e=>{t[Xd]({...t[el],membersFilter:e[qd].value,limitMembers:!0})}})),this.renderUserTable(nl,r),n[Cd]>Il.defaultLimit&&i&&a()(Me.Z,{[hl]:Il[Mr],[sd]:this.handleMembersShowMoreClick},void 0,a()(M.FormattedMessage,{[vl]:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",[Rr]:{moreMembersCount:n[Cd]-Il.defaultLimit}}))))}renderTeamGuests(e){const{[Fl]:t}=this[$d],{teamGuestsFilter:s,limitTeamGuests:i}=t[el],o=e[_d]((e=>e.isTeamGuest)),n=this[Zr](o,s),r=this.sortUsers(Sr,n),d=i?r.slice(0,5):r;return a()("div",{[hl]:{[fd]:5}},void 0,a()("div",{},void 0,a()("div",{[hl]:{[ll]:od,[Yr]:Jr,[vd]:rd,[fd]:16}},void 0,a()(he.Z,{[Vr]:this[Kd].intl[Kr]({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",[vl]:kr}),left:g.Z[zr](this[Wr]()),[Lr]:!0,[Nr]:he.Z.Format.Small,value:s,[hl]:Il.filterStyle,[ld]:e=>{t[Xd]({...t[el],teamGuestsFilter:e[qd].value,limitTeamGuests:!0})}})),this.renderUserTable(Sr,d),r[Cd]>5&&i&&a()(Me.Z,{[hl]:Il[Mr],[sd]:this.handleTeamGuestsShowMoreClick},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",[vl]:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",[Rr]:{numberOfHiddenGuests:r[Cd]-5}}))))}renderSpaceGuests(e){const{[Fl]:t}=this[$d],{guestsFilter:s,limitGuests:i}=t[el],o=e[_d]((e=>!e.isTeamGuest&&e.isPageGuest)),n=this[Zr](o,s),r=this.sortUsers(il,n),d=this[Sl][el]?5:Il.defaultLimit,l=i?r.slice(0,d):r;return a()("div",{},void 0,a()("div",{},void 0,a()("div",{[hl]:{[ll]:od,[Yr]:Jr,[vd]:rd,[fd]:16}},void 0,a()(he.Z,{[Vr]:this[Kd].intl[Kr]({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",[vl]:kr}),left:g.Z[zr](this[Wr]()),[Lr]:!0,[Nr]:he.Z.Format.Small,value:s,[hl]:Il.filterStyle,[ld]:e=>{t[Xd]({...t[el],guestsFilter:e[qd].value,limitGuests:!0})}})),this.renderUserTable(il,l),r[Cd]>d&&i&&a()(Me.Z,{[hl]:Il[Mr],[sd]:this.handleGuestsShowMoreClick},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",[vl]:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",[Rr]:{numberOfHiddenGuests:r[Cd]-d}}))))}renderMobileInviteButton(){return a()(l.Fragment,{},void 0,a()("div",{[hl]:this.mobileMenuItemStyle()},void 0,this.renderInviteButton({[od]:1})),a()("div",{[hl]:{[Fr]:`1px solid ${this[Sd][wr]}`}}))}renderInviteButton(e){const{[Hd]:t}=this[Kd];return t[Zd]()||t[br]()||!(0,q.enableRequestMembership)()?a()(ee.LazyPermissionsInviteWithModal,{[jr]:!this[Zd](),[Hd]:t,onInviteClick:this[cl],onInviteComplete:this.handleUpdateComplete,[yr]:this[yr](),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e}):a()(bi,{[Hd]:t,[pd]:"space_settings_add_members",origin:a()(le.Z,{isLarge:!0},void 0,a()(M.FormattedMessage,{id:"inviteUserButton.requestMemberLabel",[vl]:"Add members"}))})}renderInviteViaDomainCaption(){const{[Hd]:e}=this[Kd];return _.getSpaceDomainUrl(e)?a()(Ce.Z,{isSmall:!0,isMultiline:!0,[hl]:{[gl]:"80%"}},void 0,a()(M.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",[vl]:"Manage members here."})):a()("div",{},void 0,a()(Ce.Z,{isSmall:!0,isMultiline:!0,[hl]:{[gl]:"80%",[fd]:6}},void 0,a()(M.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",[vl]:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",[Rr]:{setupdomainlink:e=>a()(Ct.Z,{[sd]:()=>{ne.Z[Xd]({...ne.Z[el],[tl]:fr,[vr]:void 0})}},void 0,e)}})),a()(Ce.Z,{isSmall:!0,isMultiline:!0,[hl]:{[gl]:"80%"}},void 0,a()(M.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",[vl]:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",[Rr]:{billingguidelink:e=>a()(Ct.Z,{href:(0,K.getLocalizedUrl)("guides.billingGuide")},void 0,e)}})))}[Zr](e,t){const{[Hd]:s,intl:i}=this[Kd];return t&&t[Cd]>0?(0,p.ZP)(t,e,(e=>{const t=se.U6[Td](s,{table:f.KJ,id:e[Ed]});return t[ed]()?t.getSearchName(i):""})):e}sortUsers(e,t){const s=this[$d][Fl][el].sorts[e];if(!s)return t;const{[Hd]:i}=this[Kd];switch(s.by){case Dd:return t.sort(((e,t)=>(h[hr][t[Dd]]-h[hr][e[Dd]])*(s.asc?-1:1)));case"name":return t.map((e=>({[bl]:e,[Hd]:se.U6[Td](i,{table:f.KJ,id:e[Ed]})}))).sort(((e,t)=>{const i=e[Hd][ad](),o=t[Hd][ad](),n=(0,S.Nz)(this[Kd].intl,i),a=(0,S.Nz)(this[Kd].intl,o);return n.localeCompare(a)*(s.asc?1:-1)})).map((e=>e[bl]))}}renderSmallArrow(e){const{up:t}=e,s={[gl]:10,[td]:10,[id]:4};return t?g.Z.arrowDownSmall({...s,transform:"rotate(180deg)"}):g.Z.arrowDownSmall(s)}renderUserTable(e,t){const{[Hd]:s}=this[Kd],i=this[$d][Fl][el].sorts[e],o=s[$r]().reduce(((e,t)=>{const s=t.user_ids||[];for(const i of s)e[i]=e[i]?e[i].concat(t):[t];return e}),{}),n={key:bl,[yl]:a()(ce.Z,{[jr]:!1,ignoreLocalHoverState:!0,[sd]:()=>{this.handleSortClick(e,"name")},[hl]:{[ll]:od,[vd]:rd}},void 0,a()(M.FormattedMessage,{id:fl,[vl]:"User"}),i&&"name"===i.by&&this.renderSmallArrow({up:i.asc})),[hl]:{[gl]:"45%"}},r={key:ol,[yl]:a()(ce.Z,{[jr]:!0,ignoreLocalHoverState:!0,[hl]:{[ll]:od,[vd]:rd,[md]:8}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.groupsColumn.header",[vl]:"Groups"})),[hl]:{[gl]:"15%"}},d={key:"teams",[yl]:a()("div",{[hl]:{[ll]:od,[vd]:rd,[md]:8}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",[vl]:"Teamspaces"})),[hl]:{[gl]:"20%",[dd]:rd}},c={key:"access_level",[yl]:a()(ce.Z,{[jr]:!1,ignoreLocalHoverState:!0,[sd]:()=>{this.handleSortClick(e,Dd)},[hl]:{[ll]:od,[vd]:rd,[md]:8}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",[vl]:"Access level"}),i&&"role"===i.by&&this.renderSmallArrow({up:i.asc})),[hl]:{[gl]:"20%",[dd]:rd}},u={key:"pages",[yl]:a()("div",{[hl]:{[ll]:od,[vd]:rd,[md]:8}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.userTable.pagesColumn.header",[vl]:"Pages"})),[hl]:{[gl]:"20%",[dd]:rd}},m={key:"three_dot",[yl]:a()(ce.Z,{[jr]:!0,ignoreLocalHoverState:!0})},p=this.canUseGroups()&&"team_guests"!==e&&"guests"!==e,g=("team_guests"===e||"guests"===e)&&this[Sl][el]&&this[Zd]();let h="members"===e&&(0,$.bq)()?[n,d,c]:g?[n,u,m]:[n,u];return p&&(h=[...h.slice(0,1),r,...h.slice(1)]),a()(At.Z,{[ul]:h,rows:t.map((e=>({member:e,[Hd]:se.U6[Td](s,{table:f.KJ,id:e[Ed]})})))[_d]((e=>void 0!==e[Hd][ad]())).map((t=>{const{member:s,[Hd]:i}=t,n=o[s[Ed]]?o[s[Ed]]:[],a=[this.renderMember(i)];return p&&a.push(l[wd](l[bd],null,this.renderGroups(n))),"members"===e&&(0,$.bq)()&&a.push(l[wd](l[bd],null,this.renderTeams(s))),a.push(l[wd](l[bd],null,this.renderUserPermission(e,s,i))),g&&a.push(l[wd](l[bd],null,this.renderPageGuestOrTeamGuestThreeDotMenu(e,s,i))),{key:s[Ed],[ul]:a}}))})}renderMember(e){return a()(de.Z,{actorStore:e})}renderGroups(e){return a()(Be,{[Qd]:this[Kd][Hd],[ol]:e,onGroupClick:()=>{this.navigateToTab(oe.Q.Groups)}})}renderTeams(e){if("none"!==e[Dd])return a()(ir.Z,{member:e})}renderUserPermission(e,t,s){return"none"===t[Dd]?this[Sl][el]&&"team_guests"===e?a()(sr,{teamGuest:t}):a()(kt,{[Hd]:this[Kd][Hd],guest:t,guestStore:s,[yr]:this[yr](),hideActionButtons:this[Sl][el]}):this.renderMemberRoleSelect(t)}renderPageGuestOrTeamGuestThreeDotMenu(e,t,s){return a()(me.ZP,{popupType:me.Z4.Popup,renderOrigin:e=>l[wd](ge.Z,o()({},e,{icon:g.Z.dots,iconStyle:{[td]:14,[gl]:14}})),[Hr]:i=>{const n=[{key:"team section",[Hr]:e=>l[wd](Se.Z,e),items:[{key:"convertToMember",[Hr]:t=>l[wd](ue.Z,o()({},t,{icon:g.Z.settingsUpgrade({[td]:17,[gl]:17}),title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",[vl]:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===e&&a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",[vl]:"Workspace members are not restricted to specific teamspaces"})})),[ml]:()=>this.handleConvertGuestToMember({[bl]:t,[gr]:s,parent:i})},{key:"removeFromWorkspace",[Hr]:e=>l[wd](ue.Z,o()({},e,{icon:g.Z.handWave({[td]:17,[gl]:17,[kd]:m.ZP.red}),title:a()("span",{[hl]:{[kd]:m.ZP.red}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",[vl]:"Remove from workspace"}))})),[ml]:()=>this.handleRemoveGuestFromWorkspace({[bl]:t,[gr]:s,parent:i})}]}];return a()(fe.Z,{menuType:W.og.Popup},void 0,a()(ye.Z,{type:ye.i[pr],sections:n,[mr]:void 0,[hl]:{minWidth:265}}))}})}renderMemberRoleSelect(e){const t=this[al][Nd].id,{[ur]:s,currentSpaceStore:i}=N.default[el];if(!s)return;const o=this.getAvailableRoleItems();let n=!0;return(this[cr]()||this[Zd]()&&(h.isMember(e[Dd])||e[Ed]===t))&&(n=!1),a()(Tt.ZP,{[Dd]:e[Dd],table:v.bx,type:Bd,[jr]:n,isUserPermission:e[Ed]===t,upgradeButtonName:"space_permission_item",availableRoleItems:o,[ld]:async t=>{await this[Ld](e,t,s)},onRemoveMemberClick:async()=>{const t=async()=>(0,J.isContractionConfirmationOn)()?await ha(this[al],e[Ed],null==i?void 0:i.id):await(0,Tt.jV)({[dl]:(0,Tt.QH)(!0)}),o=async t=>{await this[Ld](e,"none",s),Z.trackRemoveMember(this[al],{member_user_id:e[Ed],member_role:e[Dd],contraction_survey_id:t})};if(J.isContractionConfirmationSurveyOn()){let e;if(function(){const e=N.default.state[j];if(!e)return!1;const t=e.getSettings();return!!t&&(!t.seen_contraction_survey_at||Date.now()>(0,Q.addDaysToDate)({date:t.seen_contraction_survey_at,daysToAdd:1}))}()&&(e=await async function(e){const t=(0,va.default)();return Z.trackContractionSurveyOpened({[Fa]:e,contractionSurveyId:t}),await Wn.Z.showModal((s=>{const i=i=>{i?Z.trackContractionSurveyCompleted({[Fa]:e,contractionSurveyId:t,reasons:i.reasons,reasonIndexes:i.reasonIndexes,reasonOther:i.reasonOther}):Z.trackContractionSurveyDismissed({[Fa]:e,contractionSurveyId:t}),s(i)};return{dismissUsing:Pa,onDismiss:()=>i(void 0),content:a()(Da,{contractionSurveyId:t,onFinished:i})}}))}(this[al]),!e))return;var n;if(await t())await o(null===(n=e)||void 0===n?void 0:n.contractionSurveyId),e&&function(e){const t=N.default.state[V];t&&B.createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,perform:e=>{L.updateUserSettings({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}(this[al])}else{await t()&&await o()}}})}renderReprovisioning(){return l[wd](l[bd],null,a()(Ce.Z,{isMultiline:!0,[hl]:{[gl]:"80%"}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",[vl]:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})),a()(Ce.Z,{isMultiline:!0,[hl]:{[gl]:"80%"}},void 0,a()(M.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",[vl]:"Only users who had private pages will appear here."})),a()(pe.Z,{size:24,isHidden:!0}),a()(we.Z,{[lr]:this[$d][Pl],request:{[Ud]:this[Kd][Hd].id},[dr]:async e=>{const t=await C.getRecoverableSpaceUserContent(this[al],{[Ud]:e[Ud]});if("failed"===t.type)throw P.showError(t),t;return t.data},[Hr]:this.renderReprovisioningData}))}renderRequestsTab(){return a()(Ds,{[Qd]:this[Kd][Hd],accessRequestsStore:this[$d].accessRequestsStore})}renderNumberOfRequests(){return a()(we.Z,{throttle:1e3,request:{parentTable:"space",parentId:this[Kd][Hd].id,size:100,status:"pending"},[lr]:this[$d].accessRequestsStore,[dr]:async e=>{const t=await C.getAccessRequests(this[al],e);if("failed"===t.type)throw t.error;const s=t.data.accessRequestIds;return k.getPendingMembershipRequests(this[Kd][Hd],s)},[Hr]:(e,t,s)=>e||!t?a()("span",{}):t?a()("span",{},void 0,t[_d]((e=>"pending"===e[rr][nd]("status")[ad]()))[Cd]):void 0})}handleConvertGuestToMember(e){const{[gr]:t,parent:s}=e,{[Hd]:i}=this[Kd],o=this[yr]()?"read_and_write":"editor";P.showDialog({[dl]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",[vl]:"Are you sure you want to convert this user into a workspace member?"}),description:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",[vl]:"This is a billable event."}),showCancel:!0,keepFocus:!1,[Gr]:()=>{P.dismissDialog(),s.close()},items:[{label:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",[vl]:"Convert to workspace member"}),[kd]:"blue",[Or]:async()=>{s.close(),await U({[al]:this[al],guestUserStore:t,[Dd]:o,[Hd]:i})}}]})}handleRemoveGuestFromWorkspace(e){const{[gr]:t,parent:s}=e;P.showDialog({[dl]:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",[vl]:"Are you sure you want to remove this user from the workspace?"}),description:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",[vl]:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,[Gr]:()=>{P.dismissDialog(),s.close()},items:[{label:a()(M.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",[vl]:"Remove from workspace"}),[kd]:"red",[Or]:async()=>{s.close(),await E({[al]:this[al],guestUserStore:t,[Hd]:this[Kd][Hd]})}}]})}getSpaceRecoverRows(e){const t=[];for(const{[Ed]:s,privatePagesCount:i}of e){if(i<1)continue;const e=se.U6[Td](this[Kd][Hd],{table:f.KJ,id:s});t.push({key:s,[ul]:[this.renderMember(e),i,this[kl][el].includes(s)?a()(ve.Z,{}):a()("div",{[hl]:{[id]:-4}},void 0,a()(wi.Z,{mode:Si.z.Button,focused:!1,title:a()(M.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",[vl]:"Transfer private pages"}),parentStore:this[Kd][Hd],userIds:this[kl][el],[ld]:e=>{let[t]=e;this.handleReprovisionToUserChange(s,t)}}))]})}return t}setInitialSubtabOnMount(){ne.Z[el].open&&"members"===ne.Z[el][tl]&&ne.Z[el][vr]&&(this[$d][Fl][Xd]({...this[$d][Fl][el],[tl]:ne.Z[el][vr]}),ne.Z[Xd]({...ne.Z[el],[vr]:void 0}))}getAvailableRoleItems(){const e=this[Kd].intl[Kr]({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",[vl]:"Cannot upgrade to a higher role than member"}),t=(0,z.shouldShowMembershipAdmin)();return d().compact(h.spaceUserPermissions.map((s=>{if(t||"membership_admin"!==s)return{[Dd]:s,disabledInfo:!this[cr]()&&h.isAnyAdmin(s)?{isDisabled:!0,disabledMessage:e}:void 0}})))}getCurrentTabs(e){return[oe.Q.Members,oe.Q.Groups,...e[Cd]>0?[oe.Q.Guests]:[],...this.canReprovisionContent()?[oe.Q.Reprovisioning]:[],...this.shouldShowRequestsTab()?[oe.Q.Requests]:[]]}[yr](){const{data:e}=ae.default[el];return Boolean(e&&Y[yr](e))}[cr](){return this[Kd][Hd][cr]()}[Zd](){return this[Kd][Hd][Zd]()}canUseGroups(){return Y.subscriptionAllowsMembers(this[al])&&this[yr]()}canEditGroups(){return this.canUseGroups()&&this[Zd]()}canUseInviteLink(){return this[Zd]()&&Y.subscriptionAllowsMembers(this[al])}canReprovisionContent(){return this[cr]()&&X.isEnterpriseTier()}shouldShowRequestsTab(){return this[Zd]()&&(0,q.enableRequestMembership)()}[Vd](){return Boolean(this[Kd][Hd][nd](ar)[ad]())}getInviteLink(){if(!this[Zd]())return;const e=ae.default[el].data,t=this[Kd][Hd].id,s=e&&("subscribed_admin"===e.type||"unsubscribed_admin"===e.type||"subscribed_membership_admin"===e.type)&&e.inviteLinkCode;return s?(0,H.cJ)(this[al],t,s):void 0}[Wr](){return{[gl]:14,[td]:14,[qr]:6,flexGrow:0,flexShrink:0,fill:this[Sd].mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this[al];return{[ll]:od,paddingTop:14,paddingBottom:14,[md]:14,[ud]:e[nr](14),[Tr]:this[Sd][Cr]}}}Il.displayName="SpacePermissionsSettings",Il.defaultLimit=50,Il.filterStyle={maxWidth:275,borderRadius:30},Il[Mr]={[cd]:8};const _l=(0,M.injectIntl)(Il)},42982:(e,t,s)=>{s.d(t,{Z:()=>f});var i=s(77094),o=s.n(i),n=(s(67294),s(83355)),a=s(5366),r=s(16354),d=s(63296),l=s(64369),c=s(23189);const u=s(85).g7N,m=(s(85).LWQ,s(85).nx5),p=s(85).dLQ,g=s(85).wgE,h=s(85).nLZ;class v extends n.Z{renderComponent(){return o()("div",{},void 0,this.renderHeader(),o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(l.Z,{isSmall:!0,isMultiline:!0,style:{[h]:2,width:"80%"}},void 0,this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this[g];return o()(c.Z,{large:!e[p]||void 0,divider:e[p]?void 0:"full"},void 0,o()(a.FormattedMessage,{id:"subscriptionSettings.title",[m]:"Subscription"}))}renderMessage(){const{device:e}=this[g];return e[p]?o()(a.FormattedMessage,{id:"subscriptionSettings.mobileDescription",[m]:"Manage your Personal Pro subscription though the App Store."}):o()(a.FormattedMessage,{id:"subscriptionSettings.description",[m]:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}renderManageSubscriptionButton(){return o()(r.Z,{href:"https://apps.apple.com/account/subscriptions"},void 0,o()(d.Z,{isLarge:!0,style:{[h]:12,[u]:4}},void 0,o()(a.FormattedMessage,{id:"subscriptionSettings.button",[m]:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this[g];return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e[p]?t.state.paddingLeftCSS:0,paddingRight:e[p]?t.state.paddingRightCSS:0}}}v.displayName="SubscriptionSettings";const f=v},88775:(e,t,s)=>{s.d(t,{Z:()=>N});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(480),l=s(81954),c=s(24405),u=s(3909),m=s(5366),p=s(57688),g=s(33929),h=s(87279),v=s(33846),f=s(48690),y=s(30397),b=s(48019),w=s(52275),S=s(31945),M=s(68894),k=s(78140),Z=s(89728),C=s(72495),T=s(64369),P=s(93686);const F=s(85).PlO,I=s(85).Yzm,_=s(85).loK,x=(s(85).Mn,s(85).Ma8),A=s(85).uKc,D=s(85).wgE,B=s(85).D7I,R=s(85).KfM,O=s(85).nx5,G=(s(85).B$S,s(85).adB);const U=(0,m.defineMessages)({filterTeams:{[O]:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function E(e){window.__c={n:"MemberTeamContent"};const t=(0,d.O7)(),s=(0,c.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[i,n]=(0,l.AF)(void 0,v.Z),u=(0,r.useCallback)((e=>p.viewTeam({[D]:t,teamId:e,tab:f.a.Members,from:A})),[t]),y=(0,l.VK)((()=>[{key:"teams for member",render:e=>r[B](C.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>r[B](w.Z,o()({icon:a()(P.p,{disabled:!0,store:e}),title:a()(T.Z,{style:s.teamMenuItem},void 0,e.getName()),caption:a()(m.FormattedMessage,{[O]:x,id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0},t)),action:()=>{u(e.id)},closeParentMenu:!1})))}]),[e.teamStores,s.teamMenuItem,u]),S=i[_],Z=a()(C.Z,{isInput:!0},void 0,a()(M.ZP,{value:S,onChange:(0,r.useCallback)((e=>{n({[_]:e.target.value,focus:!1})}),[n]),focus:!0,focusAfterAnimation:!0,placeholder:g.default[I](U.filterTeams)})),R={menuType:h.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?Z:void 0};return r[B](k.Z,R,a()(b.Z,{filter:S,context:{blocks:[],[D]:t,[F]:void 0},initialFocus:0,sections:y}))}const N=function(e){window.__c={n:"TeamsDropdownForMember"};const[t]=(0,l.AF)(y.Z),s=(0,c.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),i=(0,l.VK)((()=>t.teams.filter((t=>t.getMembers().some((t=>"user"===t.entity_type&&t.user_id===e[G].userId))))),[t,e[G]]),n=i.length;return a()(S.ZP,{popupType:S.Z4.Popup,renderOrigin:e=>r[B](Z.Z,o()({disabled:0===n,style:0===n?s.noTeams:s.button},e),0===n?a()(m.FormattedMessage,{id:"teamsDropdownForMember.teamsCountNone.label",[O]:"No access"}):r[B](r.Fragment,null,a()(m.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",[O]:R,values:{numberOfTeams:n}}),u.Z.chevronDown(s.chevron))),render:()=>a()(E,{[G]:e[G],teamStores:i})})}},69435:(e,t,s)=>{s.d(t,{Z:()=>C});var i=s(77094),o=s.n(i),n=(s(67294),s(83355)),a=s(82990),r=s(5366),d=s(50906),l=s(5978),c=s(93678),u=s(33665),m=s(42922),p=s(63296);const g=s(85).nx5,h=s(85).yKA,v=s(85).BJF,f=s(85).Oi5,y=s(85).Dg8,b=s(85).ncO,w=s(85).fCB,S=s(85).wgE,M=s(85).P0R,k=s(85).cav;class Z extends n.Z{constructor(){super(...arguments),this[k]=e=>{const{from:t,for:s,onUpgradeClick:i}=this[M];c.y(this[S],{from:t,for:s}),i&&i(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this[M];l[w]({[S]:this[S],url:(0,u.getLocalizedUrl)(t)}),d.trackClickHelpButton(this[S],{from:e})}}renderComponent(){return o()("section",{style:this[b]()},void 0,this.renderIcon(),this[y](),this[f](),this.renderActions())}renderIcon(){const{icon:e}=this[M];if(e)return e(this[v]())}[y](){const{title:e}=this[M];return o()("header",{style:this[h]()},void 0,e)}[f](){const{caption:e}=this[M];return o()("p",{style:this.getCaptionStyle()},void 0,e)}renderActions(){return o()("footer",{style:this.getFooterStyle()},void 0,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this[M];return o()(m.Z,{onClick:this[k],isLarge:!0},void 0,e||o()(r.FormattedMessage,{[g]:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return o()(p.Z,{onClick:this.handleLearnMoreClick},void 0,o()(r.FormattedMessage,{[g]:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}[b](){const{device:e}=this[S];return{...this[M].style,fontSize:14,...!e.isMobile&&{maxWidth:340}}}[v](){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}[h](){return{fontWeight:a.Z.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getFooterStyle(){return{display:"flex",flexWrap:"wrap",gap:"8px 12px"}}}Z.displayName="UpsellCallout";const C=Z},30045:(e,t,s)=>{s.d(t,{Z:()=>x});var i=s(77094),o=s.n(i),n=s(67294),a=s(83355),r=s(13991),d=s(7057),l=s(50501),c=s(5366),u=s(54642),m=s(79315),p=s(72087),g=s(59649),h=s(77137),v=s(58032),f=s(55422);const y=s(85).c6E,b=s(85).dLQ,w=s(85).D7I,S=(s(85).MMG,s(85).SZh),M=s(85).Gnd,k=s(85).Dp7,Z=s(85).wgE,C=s(85).PG2,T=s(85).aqt,P=s(85).nx5,F=s(85).Yzm,I=s(85).kBp;class _ extends a.Z{constructor(){super(...arguments),this.storeTypes={[I]:p.Z},this.renderResult=(e,t,s)=>o()(g.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600},void 0,e||!t?o()("div",{},void 0,this.props.intl[F]({id:"userDataConsent.render.error",[P]:T})):this.renderOutput(t)),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return this.renderUserDataConsentSettingsWithTooltip({accessGranted:t,[C]:s,output:e})},this.fetchUserDataConsentSettings=async e=>{const t=await u.getDataAccessConsent(this[Z],{});if("failed"===t.type)throw t.error;return t.data},this.grantDataAccess=async()=>{this[k]()||await this.setDataAccessExpiryTime({expiryTime:Date.now()+l.g})},this.revokeDataAccess=async()=>{this[k]()||await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await u.setDataAccessConsent(this[Z],e);if("success"===t.type&&t.data){const e=this[M][I].state;this[M][I].setState({...e,result:t.data})}}}renderComponent(){const{[S]:e}=m.default.state;return e&&o()(h.Z,{[I]:this[M][I],request:{userId:e.id,expiryTime:Date.now()+l.g},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}renderUserDataConsentSettingsWithTooltip(e){var t;const{accessGranted:s,[C]:i,output:a}=e,r=null===(t=m.default.state[S])||void 0===t?void 0:t.getEmail();return o()(v.Z,{disableTooltip:!this[k](),renderTooltip:()=>o()(c.FormattedMessage,{id:"userDataConsentSetting.disabledByOrganization",[P]:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:r}}),placement:v.Z.Placement.Bottom,alignment:v.Z.Alignment.Center,render:e=>n[w]("div",e,this.renderUserDataConsentSettings({accessGranted:s,[C]:i,output:a}))})}renderUserDataConsentSettings(e){const{accessGranted:t,[C]:s,output:i}=e,{device:n}=this[Z];return o()(f.Z,{disabled:this[k](),[b]:n[b],title:o()(c.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.label",[P]:"Support access"}),caption:t&&i.expiryTime?o()(c.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",[P]:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,d.Yx)(i.expiryTime,"medium_with_time",r.SP)}}):o()(c.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.message",[P]:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:t,onToggle:s})}[k](){return Boolean(this.props.emailDomainSettings[y])}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this[Z];return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e[b]?t.state.paddingLeftCSS:0,paddingRight:e[b]?t.state.paddingRightCSS:0}}}_.displayName="UserDataConsentSettings";const x=(0,c.injectIntl)(_)},16347:(e,t,s)=>{s.d(t,{H:()=>C});var i=s(77094),o=s.n(i),n=(s(67294),s(480)),a=s(81954),r=s(5366),d=s(12359),l=s(37181),c=s(51456),u=s(33665),m=s(79315),p=s(42402),g=s(55422);const h=s(85).Tvo,v=s(85).B_I,f=s(85).Und,y=s(85).Hgp,b=s(85).JJj,w=s(85).nx5,S=s(85).juI,M=s(85).Csj,k=s(85).eg4,Z=s(85).Ubh;function C(e){let{isMobile:t}=e;window.__c={n:"ViewHistorySettings"};const s=(0,n.O7)(),i=(0,a.VK)((()=>m.default.state[Z]),[]),C=(0,a.VK)((()=>{var e;return!0===(null==i||null===(e=i.getSettings())||void 0===e?void 0:e[k])?M:S}),[i]);return o()(g.Z,{isMobile:t,title:o()(r.FormattedMessage,{id:"viewHistorySettings.title",[w]:"Show my view history"}),caption:o()(r.FormattedMessage,{id:"viewHistorySettings.description.message",[w]:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>o()(p.Z,{external:!0,href:(0,u.getLocalizedUrl)("guides.pageAnalytics")},void 0,e)}}),type:"dropdown",currentOption:C,options:[{key:S,label:o()(r.FormattedMessage,{id:"viewHistorySettings.record.label",[w]:"Record"})},{key:M,label:o()(r.FormattedMessage,{id:"viewHistorySettings.do_not_record.label",[w]:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;d[b]({userAction:"ViewHistorySettings.onSelectOption",environment:s,perform:e=>{i&&l[y]({[f]:i,data:{[k]:t},transaction:e})}}),c.track(s,t?v:h)}})}},22715:(e,t,s)=>{s.d(t,{Z:()=>r});s(77094);var i=s(67294),o=s(480),n=s(24405);s(58047);const a=s(85).L_E;function r(){window.__c={n:"WebComponentNotSupportedInMobileNativeWarning"};(0,o.O7)(),(0,n.yK)((e=>({[a]:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return i.createElement(i.Fragment,null)}},12793:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(77094),o=s.n(i),n=(s(67294),s(24405)),a=s(3909);const r=s(85).RJH;function d(e){window.__c={n:"GroupIcon"};const t=function(e){const{size:t,style:s}=e;return(0,n.yK)((e=>({icon:{width:.6*t,height:.6*t,fill:e.mediumTextColor},[r]:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...s}})),[t,s])}(e),s=a.Z.membersFilled(t.icon);return o()("div",{style:t[r]},void 0,s)}},88198:(e,t,s)=>{s.d(t,{b:()=>v});var i=s(77094),o=s.n(i),n=s(67294),a=s(81954),r=s(24405),d=s(3909),l=s(26825),c=s(5366),u=s(4708),m=s(74136);const p=s(85).D7I,g=s(85).rI1,h=s(85).L_E;function v(e){window.__c={n:"GuestPill"};const{style:t,labelType:s}=e,{label:i,icon:v}=(0,a.VK)((()=>(0,u.isTeamspaceGuestsEnabled)()?"team_level_guest"===s?{label:l.permissionRoleMessages.teamGuestLabel,icon:d.Z.openTeam}:{label:l.permissionRoleMessages.pageGuestLabel,icon:d.Z.pageEmpty}:{label:l.permissionRoleMessages.guestLabel,icon:d.Z.globe2}),[s]),f=(0,r.yK)((()=>({[h]:{display:"flex",alignItems:"center",color:"#CF8807",background:"rgba(246, 192, 80, 0.26)"}})),[]);return o()(m.Z,{innerStyle:{...f[h],...t}},void 0,v({width:9,fill:"#CF8807",display:"inline",[g]:"middle",marginRight:2}),n[p](c.FormattedMessage,i))}},9019:(e,t,s)=>{s.d(t,{Z:()=>h});var i=s(77094),o=s.n(i),n=(s(67294),s(83355)),a=s(80503),r=s(53953),d=s(44532);const l=s(85).$Vg,c=s(85).IlQ,u=s(85).wJk,m=s(85).iy2,p=s(85).P0R;class g extends n.Z{renderComponent(){const{device:e}=this.environment;return e.isMobile?o()(d.ZP,{popupType:d.ZP.PopupType.SlideUp,open:this[p].open,render:this[p][m],[c]:this[p].disableAnimation,[u]:this[p][u],origin:this[p].origin}):o()(r.Z,{open:this[p].open,preventHideChildrenWhileOpening:!0,style:{alignItems:l},innerStyle:this.getModalStyle(),[u]:this[p][u],render:this[p][m],origin:this[p].origin,disableAnimation:this[p].disableAnimation})}getModalStyle(){const{modalStyle:e}=this[p];return{top:2*a.R6(this.environment.device.isElectronMac),borderRadius:6,overflow:"hidden",boxShadow:this.theme.largeBoxShadow,background:this.theme.contentBackground,...e}}}g.displayName="ModalPrompt";const h=g},58047:(e,t,s)=>{s.d(t,{N:()=>S});var i=s(77094),o=s.n(i),n=(s(67294),s(24405)),a=s(3909),r=s(82990),d=s(42922),l=s(89728),c=s(64369);const u=s(85).PG2,m=s(85).BQ6,p=s(85).IZH,g=s(85).TEz,h=s(85).Exd,v=s(85).ChN,f=s(85).UPJ,y=s(85).L_E,b=s(85).ymU,w=s(85).zDZ;function S(e){let{title:t,[w]:s,onDismiss:i,icon:S,[b]:M,secondaryAction:k}=e;window.__c={n:"Prompt"};const Z=(0,n.yK)((e=>({[y]:{position:"relative",width:"100%",padding:16},multiIconsRow:{display:"flex",flexDirection:"row",alignItems:"center",[f]:"space-between",marginBottom:12},singleIconRow:{position:"absolute",top:10,right:16},dismissButton:{marginTop:-7,marginRight:-7},title:{[v]:r.Z[v].medium,[h]:r.Z[h].UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginBottom:8},[w]:{[v]:r.Z[v].regular,[h]:r.Z[h].UISmall.desktop,color:e[g]},[p]:{width:"100%",margin:"12px auto 0"},secondaryActionButton:{width:"100%",margin:"8px auto 0",[f]:"center",[v]:r.Z[v].regular,[h]:r.Z[h].UISmall.desktop,color:e[g]},secondaryActionIcon:{width:12,height:12,marginRight:4},icon:{width:14,height:14,color:e.regularIconColor}})),[]);return o()("div",{[m]:Z[y]},void 0,S?o()("div",{[m]:Z.multiIconsRow},void 0,o()("div",{},void 0,S),o()(l.Z,{isSmall:!0,[m]:Z.dismissButton,[u]:i},void 0,a.Z.closeSmall(Z.icon))):o()("div",{[m]:Z.singleIconRow},void 0,o()(l.Z,{isSmall:!0,[m]:Z.dismissButton,[u]:i},void 0,a.Z.closeSmall(Z.icon))),o()(c.Z,{[m]:Z.title,isMultiline:!0},void 0,t),o()(c.Z,{[m]:Z[w],isMultiline:!0,isSmall:!0},void 0,s),M?o()(d.Z,{isLarge:!0,[m]:Z[p],[u]:e=>M[u](e)},void 0,M.text):null,k?o()(l.Z,{[m]:Z.secondaryActionButton,[u]:e=>k[u](e)},void 0,k.icon?k.icon(Z.secondaryActionIcon):null,k.text):null)}},75752:(e,t,s)=>{s.d(t,{r:()=>b});var i=s(63143),o=s(54642);const n=s(85).Txi,a=s(85).kIz,r=s(85).gd_,d=s(85).V_k,l=s(85).FNh,c=s(85)._Jo,u=s(85).q6H,m=s(85).ZAM,p=s(85).RkE,g=s(85).MWD,h=s(85).d6L,v=s(85).a0e,f=s(85).Bn$,y=s(85).wgE;class b{constructor(e){this[y]=void 0,this[y]=e}async confirmIdentity(){const{[f]:e,[v]:t}=await this.loadSettings();return t&&t>2*i.MinuteS?{[h]:"ready"}:e.length>0?{[h]:"mfa",[f]:e}:{[h]:"password"}}async loadSettings(){const e=await o.authGetLoginConfiguration(this[y],{});if("success"===e[g]){const{data:t}=e;return"required"===t.samlSignIn?{[f]:[],[v]:t[v]}:{[f]:t.mfaOptions,[v]:t[v]}}throw e}async[p](e){const{email:t}=e,s=await o[p](this[y],{passwordReset:!0,email:t});if("success"===s[g])return{[h]:"ok"};throw s}async verifyBackupCode(e){var t,s;const{code:i}=e,n=i.split("-").join(""),a=await o.authVerifyBackupCodesLogin(this[y],{code:n});if("success"===a[g])return{[h]:m};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw a}async verifyIdentityWithPassword(e){var t,s;const{password:i}=e,n=await o.authVerifyPassword(this[y],{password:i});if("success"===n[g])return{[h]:m};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw n}async disableMFA(){const e=await o.authUpdateMfa(this[y],{action:"disable_all"});if("success"===e[g])return{[h]:"ok"};throw e}async verifyIdentityWithTOTP(e){var t,s;const{[l]:i,code:n}=e,a=await o.authVerifyTotpLogin(this[y],{[l]:i,code:n});if("success"===a[g])return{[h]:m};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw a}async verifyIdentityWithSMS(e){var t,s;const{[l]:i,code:n}=e,a=await o.authVerifySmsLogin(this[y],{[l]:i,code:n});if("success"===a[g])return{[h]:m};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw a}async renameSettings(e){var t,s,i,n,a,r;const{[l]:c,friendlyName:m}=e,p=await o.authUpdateMfa(this[y],{action:"rename",[l]:c,friendlyName:m});if("success"===p[g])return{[h]:"saved",[f]:p.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=p.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:"duplicate"};if("mfa_empty_friendly_name"===(null===(i=p.body)||void 0===i||null===(n=i[u])||void 0===n?void 0:n[g]))return{[h]:"empty"};if("mfa_bad_friendly_name"===(null===(a=p.body)||void 0===a||null===(r=a[u])||void 0===r?void 0:r[g]))return{[h]:d};throw p}async deleteSettings(e){const t=await o.authUpdateMfa(this[y],{action:"delete",[l]:e});if("success"===t[g])return{[f]:t.data.mfaOptions};throw t}async createTOTP(){const e=await o.authCreateTotp(this[y],{});if("success"===e[g])return{[l]:e.data[l],secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t,s;const{[l]:i,code:n}=e,a=await o.authVerifyTotpEnroll(this[y],{[l]:i,code:n});if("success"===a[g])return{[h]:m};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw a}async createSMS(e,t){var s,i,d,c,m,p;const v=await o.authCreateSms(this[y],{countryCode:e,phoneNumber:t});if("success"===v[g])return{[h]:"created",[l]:v.data[l]};if("already_verified_phone_number"===(null===(s=v.body)||void 0===s||null===(i=s[u])||void 0===i?void 0:i[g]))return{[h]:r};if("invalid_country_code"===(null===(d=v.body)||void 0===d||null===(c=d[u])||void 0===c?void 0:c[g]))return{[h]:a};if("invalid_phone_number"===(null===(m=v.body)||void 0===m||null===(p=m[u])||void 0===p?void 0:p[g]))return{[h]:n};throw v}async verifySMS(e){var t,s;const{[l]:i,code:n}=e,a=await o.authVerifySmsEnroll(this[y],{[l]:i,code:n});if("success"===a[g])return{[h]:m};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(s=t[u])||void 0===s?void 0:s[g]))return{[h]:c};throw a}async sendSMS(e){const{[l]:t}=e,s=await o.authSendSms(this[y],{[l]:t});if("success"===s[g])return{[h]:"ok"};throw s}async createBackupCodes(e){if(!e){const{[f]:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{[h]:"already-exists"}}const t=await o.authCreateBackupCodes(this[y],{});if("success"===t[g])return{[h]:"new",[l]:t.data[l],backupCodes:t.data.codes};throw t}}},99657:(e,t,s)=>{s.d(t,{Z:()=>St});var i=s(77094),o=s.n(i),n=s(67294),a=s(480),r=s(81954),d=s(97880),l=s(28020),c=s(24405),u=s(3909),m=s(5366),p=s(82990),g=s(5474),h=s(88175);const v=s(85).FOQ,f=(s(85).t0u,s(85).OkR,s(85).nx5);function y(e){window.__c={n:"MFAPromptAddMethod"};const{errorMessage:t,onStartTOTP:s,onStartSMS:i,onDismiss:a}=e,r=(0,c.yK)(b,[]),d=o()(m.FormattedMessage,{id:"mfa.turnOnSettings.title",[f]:"Turn on 2-step verification"}),l=o()(m.FormattedMessage,{id:"mfa.turnOnSettings.message",[f]:"Confirm it's you after using a password with a verification code from an authenticator app or text message."}),p=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,o()(g.Z,{type:"totp",title:o()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",[f]:"Code from authenticator"}),caption:o()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",[f]:"Generate a one-time code in your authenticator app"}),onClick:s,style:r[v]}),o()(g.Z,{type:"sms",title:o()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.title",[f]:"Text me a code"}),caption:o()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.message",[f]:"Add and verify your phone number"}),onClick:i,style:r[v]}))),[r,i,s]);return o()(h.Z,{title:d,header:l,children:p,icon:u.Z.lockShield(r.icon),errorMessage:t,onDismiss:a})}function b(e){return(0,c.EM)({[v]:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var w=s(68785);const S=s(85).nx5;function M(e){window.__c={n:"MFAPromptDeleteMethodConfirmation"};const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:a,onDeleteMethod:r}=e,l=(0,c.yK)(k,[]),p={text:t?o()(w.Z,{}):o()(m.FormattedMessage,{id:"mfa.deleteSetting.permanentlyDelete.button.message",[S]:"Permanently delete"}),onClick:()=>r(s),isRed:!0},g=[{text:o()(m.FormattedMessage,{id:"mfa.deleteSetting.cancel.button.message",[S]:"Cancel"}),onClick:a,type:"button",view:"outline"}];return o()(h.Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return o()(m.FormattedMessage,{id:"mfa.deleteSetting.sms.title",[S]:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return o()(m.FormattedMessage,{id:"mfa.deleteSetting.totp.title",[S]:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,d.unreachable)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return o()(m.FormattedMessage,{id:"mfa.deleteSetting.sms.header",[S]:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>o()("span",{style:l.boldText},void 0,e)}});case"totp":return o()(m.FormattedMessage,{id:"mfa.deleteSetting.totp.header",[S]:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>o()("span",{style:l.boldText},void 0,e)}});default:return(0,d.unreachable)(e)}})(),icon:u.Z.trash(l.crossIcon),primaryAction:p,secondaryActions:g,errorMessage:i,onDismiss:n})}function k(e){return(0,c.EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p.Z.fontWeight.semibold}})}var Z=s(71119),C=s(33665),T=s(45653);const P=s(85).RJH;function F(e){window.__c={n:"MFAUserAvatarIcon"};const{userStore:t}=e,s=(0,c.yK)(I,[]);return o()("div",{style:s[P]},void 0,o()(T.Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),o()("span",{},void 0,u.Z.lockedFilledRedOutlinedWhite(s.lockIcon)))}function I(){return(0,c.EM)({[P]:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}const _=s(85).FNh,x=s(85).QS3,A=s(85).nx5,D=s(85).Lze;function B(e){window.__c={n:"MFAPromptMethodChooser"};const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:i,userStore:a,errorMessage:r,onClick:l,onDismiss:u}=e,p=(0,c.yK)(R,[]),v=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",[A]:D}),f=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",[A]:"Select a method to verify your identity."}),y=[{text:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",[A]:"Need help?"}),href:(0,C.getLocalizedUrl)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,n.useMemo)((()=>(0,Z.UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return o()(g.Z,{type:t,title:e.friendlyName,caption:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",[A]:"Use code from authenticator"}),onClick:()=>l(e),style:p[x],isActive:!0,disabled:s});case"sms":return o()(g.Z,{type:t,title:e.phoneNumber,caption:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",[A]:"Text me a code"}),onClick:()=>l(e),style:p[x],isActive:!0,isLoading:s&&i===e[_],disabled:s&&i!==e[_]});case"backup_code":return o()(g.Z,{type:t,title:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",[A]:"Use a backup code"}),caption:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",[A]:"Use a one-time backup code"}),onClick:()=>l(e),style:p[x],isActive:!0,disabled:s});default:return(0,d.unreachable)(t)}}))),[t,l,s,i,p[x]]);return o()(h.Z,{title:v,header:f,errorMessage:r,icon:o()(F,{userStore:a}),secondaryActions:y,onDismiss:u},void 0,b)}function R(e){return(0,c.EM)({resendLink:{fontWeight:p.Z.fontWeight.medium,color:e.blueColor},[x]:{marginBottom:5}})}const O=s(85).nx5;function G(e){window.__c={n:"MFAPromptTurnOffMFAComplete"};const t=(0,c.yK)(U,[]),{errorMessage:s,onDismiss:i}=e,n=o()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.title",[O]:"2-step verification is turned off"}),a=o()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.header",[O]:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),r=[{text:o()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.button.message",[O]:"Complete"}),onClick:i,type:"button",view:"outline"}];return o()(h.Z,{title:n,header:a,errorMessage:s,icon:u.Z.circleCheck(t.confirmationIcon),secondaryActions:r,onDismiss:i})}function U(e){return(0,c.EM)({confirmationIcon:{width:30,fill:"green"}})}const E=s(85).ChN,N=s(85).nx5,L=s(85).Fn;function V(e){window.__c={n:"MFAPromptTurnOffMFAConfirmation"};const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:a,onCancel:r}=e,d=(0,c.yK)(q,[]),l=o()(m.FormattedMessage,{id:"mfa.turnOffMFA.title",[N]:L}),g={text:t?o()(w.Z,{}):o()(m.FormattedMessage,{id:"mfa.turnOffMFA.disableMFA.button.message",[N]:L}),onClick:a,isRed:!0},v=[{text:o()(m.FormattedMessage,{id:"mfa.turnOffMFA.cancel.button.message",[N]:"Cancel"}),onClick:r,type:"button",view:"outline"}];return o()(h.Z,{title:l,header:o()(m.FormattedMessage,s?{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",[N]:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>o()("span",{style:{[E]:p.Z[E].semibold}},void 0,e)}}:{id:"mfa.turnOffMFA.header",[N]:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:u.Z.circleCross(d.crossIcon),primaryAction:g,secondaryActions:v,errorMessage:i,onDismiss:n})}function q(e){return(0,c.EM)({crossIcon:{width:30,fill:"red"}})}var W=s(97464),z=s.n(W),K=s(13991),H=s(7057),Q=s(61519),j=s(64369),J=s(64921),Y=s(52275),X=s(31945),$=s(74194);const ee=s(85).FNh;function te(e){window.__c={n:"MFAActiveActionInputTitle"};const{setting:t,setIsEditing:s,isEditing:i,onUpdateMethod:a}=e,r=(0,c.yK)(se,[]),[d,l]=(0,n.useState)(""),u=t.friendlyName,m=""===d?u:d,p=(0,n.useCallback)((e=>""!==e&&e!==u),[u]),g=(0,n.useCallback)((()=>{p(m)?(a({mfaMethod:t.mfaMethod,[ee]:t[ee],action:"rename",friendlyName:m}),l(d)):l(u),s(!i)}),[m,i,s,a,d,u,p,t.mfaMethod,t[ee]]),h=(0,n.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||g()}),[g]),v=(0,n.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return i?o()($.Z,{value:m,maxlength:30,onChange:v,onKeyDown:h,onBlur:g,focus:i,style:r.inputField,inputStyle:r.input}):o()(j.Z,{},void 0,m)}function se(){return(0,c.EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p.Z.textOverflowStyle}})}var ie=s(87279),oe=s(78140),ne=s(32163),ae=s(72495);const re=s(85).D7I;function de(e){const{activeMenuActions:t}=e;return o()(oe.Z,{menuType:ie.og.Popup},void 0,o()(ne.Z,{type:ne.i.Vertical,sections:[{key:"mfaMethodActions",render:e=>n[re](ae.Z,e),items:t}],initialFocus:void 0}))}const le=s(85).UPJ,ce=s(85).D7I,ue=s(85).nx5;function me(e){window.__c={n:"MFAActiveAction"};const{type:t,title:s,caption:i,setting:a,onDeleteMethod:r,onUpdateMethod:l}=e,p=(0,c.yK)(pe,[]),g={totp:u.Z.authenticatorCode(p.icon),sms:u.Z.textMessage(p.icon)},[h,v]=(0,n.useState)(!1),f=e=>({key:"deleteMFAMethod",render:e=>n[ce](Y.Z,z()({},e,{title:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",[ue]:"Delete"}),icon:u.Z.trash(p.menuItemIcon)})),action:()=>{r(a),e.close()}}),y=e=>({key:"editMFAMethod",render:e=>n[ce](Y.Z,z()({},e,{title:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",[ue]:"Edit title"}),icon:u.Z.pencil(p.menuItemIcon)})),action:()=>{v(!0),e.close()}});return o()("div",{style:p.activeMethodContainer},void 0,o()("div",{style:p.activeMethodLeftContainer},void 0,o()("div",{style:p.icon},void 0,g[t]),o()("div",{style:p.activeMethodText},void 0,(()=>{switch(t){case"sms":return o()(j.Z,{},void 0,s);case"totp":return o()(te,{setting:a,setIsEditing:v,isEditing:h,onUpdateMethod:l});default:return(0,d.unreachable)(t)}})(),o()("span",{style:p.activeMethodCaption},void 0,i))),o()(X.ZP,{render:e=>{switch(t){case"sms":return o()(de,{activeMenuActions:[f(e)]});case"totp":return o()(de,{activeMenuActions:[y(e),f(e)]});default:(0,d.unreachable)(t)}},alignmentToOrigin:X.vR.Start,renderOrigin:e=>n[ce](J.Z,z()({style:p.menuButton,disabled:h},e),u.Z.dots(p.menuIcon)),popupType:X.Z4.Popup}))}function pe(e){return(0,c.EM)({activeMethodContainer:{display:"flex",[le]:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",[le]:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p.Z.fontSize.UISmall.desktop,lineHeight:p.Z.lineHeight.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:3,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}const ge=s(85).Fn,he=s(85).D7I,ve=s(85).pkR,fe=s(85).FOQ,ye=s(85).E7F,be=(s(85).OkR,s(85).nx5);function we(e){window.__c={n:"MFAPromptUpdateMethod"};const{mfaSettings:t,errorMessage:s,onStartTOTP:i,onStartSMS:a,onTurnOffMFA:r,onStartBackupCodes:l,onDismiss:p,onDeleteMethod:v,onUpdateMethod:f}=e,y=(0,c.yK)(Se,[]),b=o()(m.FormattedMessage,{id:"mfa.updateSettings.title",[be]:"2-step verification"}),w=o()(m.FormattedMessage,{id:"mfa.settingModal.message",[be]:"Confirm it's you after using a password by providing a verification code."}),S=(0,n.useMemo)((()=>(0,Z.UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,H.tv)(e.createdAt,K.SP);switch(t){case"totp":return o()(me,{type:t,title:e.friendlyName,caption:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",[be]:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:v,onUpdateMethod:f});case"sms":return o()(me,{type:t,title:`${e.phoneNumber}`,caption:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useSMS.button.message",[be]:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:v,onUpdateMethod:f});case ye:return;default:(0,d.unreachable)(t)}}))),[t,v,f]),M=t.filter((e=>"totp"===e.mfaMethod)).length,k=t.filter((e=>"sms"===e.mfaMethod)).length,C=(0,n.useMemo)((()=>[{type:"totp",title:o()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",[be]:"Add authenticator"}),caption:o()(m.FormattedMessage,M>=2?{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",[be]:"2 of 2 authenticators added"}:{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",[be]:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:M}}),onClick:i,style:y[fe],[ve]:M>=2},{type:"sms",title:o()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",[be]:"Add phone number"}),caption:o()(m.FormattedMessage,k>=2?{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",[be]:"2 of 2 phones added"}:{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",[be]:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:k}}),onClick:a,style:y[fe],[ve]:k>=2},{type:ye,title:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",[be]:"Regenerate backup codes"}),caption:o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",[be]:"Use for account recovery when other methods don't work"}),onClick:l,style:y[fe],[ve]:!1}].sort(((e,t)=>(e[ve]?1:0)-(t[ve]?1:0)))),[i,a,l,M,k,y]),T=(0,n.useMemo)((()=>C.map(((e,t)=>n[he](g.Z,z()({},e,{key:t}))))),[C]),P=n[he](n.Fragment,null,o()(j.Z,{style:y.settingsTitle,isSmall:!0},void 0,o()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.title",[be]:"Active"})),S,o()(Q.Z,{size:15,isHidden:!0}),o()(j.Z,{style:y.settingsTitle,isSmall:!0},void 0,o()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreMethodsSection.title",[be]:"Add more methods"})),T),F=[{text:o()(m.FormattedMessage,{id:"mfa.updateSettings.turnOffVerification.button.message",[be]:ge}),onClick:r,type:fe,view:"plain",isRed:!0}];return o()(h.Z,{title:b,header:w,errorMessage:s,icon:u.Z.lockShield(y.icon),onDismiss:p,secondaryActions:F},void 0,P)}function Se(e){return(0,c.EM)({[fe]:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var Me=s(8848),ke=s(1799);s(85).iZH;const Ze=s(85).nx5,Ce=s(85).Lze;function Te(e){window.__c={n:"MFAPromptVerifyWithBackupCode"};const{isLoading:t,userStore:s,errorMessage:i,onDismiss:a,onVerifyBackupCode:r,onTryAnotherMethod:d}=e,l=(0,c.yK)(Pe,[]),[u,p]=(0,n.useState)(""),g=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",[Ze]:Ce}),v=o()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",[Ze]:"Enter an unused one-time backup code."}),f={text:t?o()(w.Z,{}):o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",[Ze]:"Continue"}),onClick:()=>r(u.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===u},y=[{text:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",[Ze]:"Try another method"}),view:"plain",type:"button",onClick:()=>d(),disabled:t}];return o()(h.Z,{title:g,header:v,icon:o()(F,{userStore:s}),primaryAction:f,secondaryActions:y,errorMessage:i,onDismiss:a},void 0,o()($.Z,{type:"text",value:u,onChange:e=>{p((0,ke.K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0}))}function Pe(e){return(0,c.EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?Me.ZP.transparent:e.inputBackground}})}const Fe=s(85).KqM,Ie=s(85).nx5,_e=s(85).Lze,xe=s(85).Ht7;function Ae(e){window.__c={n:"MFAPromptVerifyWithPassword"};const{isLoading:t,[xe]:s,userStore:i,errorMessage:a,alertMessage:d,onDismiss:l,onVerifyPassword:u,onForgotPassword:p}=e,g=(0,c.yK)(De,[]),[v,f]=(0,n.useState)(""),y=(0,r.VK)((()=>null==i?void 0:i.getEmail()),[i]),b=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",[Ie]:_e}),S={text:t?o()(w.Z,{}):o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",[Ie]:"Continue"}),onClick:()=>u(v),disabled:t||""===v},M=[{text:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",[Ie]:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>p(y)}];return o()(h.Z,{title:b,header:y,icon:o()(F,{userStore:i}),primaryAction:S,secondaryActions:M,errorMessage:a,alertMessage:d,onDismiss:l},void 0,o()($.Z,{type:Fe,value:v,onChange:e=>f(e.target.value),placeholder:"Your password",style:g.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0}))}function De(){return(0,c.EM)({passwordInput:{width:"100%"}})}var Be=s(96486),Re=s(73602),Oe=s(11898);const Ge=s(85).Bn$,Ue=(s(85).iZH,s(85).pkR),Ee=s(85).D7I,Ne=s(85).nx5,Le=s(85).Lze,Ve=s(85).gUt;function qe(e){window.__c={n:"MFAPromptVerifyWithSMS"};const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:a,[Ve]:r,resentAt:d,onDismiss:l,onVerifySMS:c,onResendLink:u,onTryAnotherMethod:p}=e,[g,v]=(0,n.useState)([]),f=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",[Ne]:Le}),y=n[Ee](n.Fragment,null,o()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",[Ne]:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",n[Ee](Re.y,{resentAt:d,[Ve]:r,onResendLink:u})),b={text:s?o()(w.Z,{}):o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",[Ne]:"Continue"}),onClick:()=>c(t.mfaSettingId,g.join("")),[Ue]:s||"resending"===r||6!==(0,Be.compact)(g).length},S=[{text:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",[Ne]:"Try another method"}),view:"plain",type:"button",onClick:()=>p(),[Ue]:s}];return o()(h.Z,{title:f,header:y,icon:o()(F,{userStore:i}),primaryAction:b,secondaryActions:S,errorMessage:a,onDismiss:l},void 0,o()("div",{},void 0,o()(Oe.ZP,{numInputs:6,value:g,format:Ge,[Ue]:!1,onChange:v,autoFocus:!0,isValidKey:Oe.rN})))}const We=s(85).Bn$,ze=(s(85).iZH,s(85).pkR),Ke=s(85).FNh,He=s(85).oz_,Qe=s(85).nx5,je=s(85).Lze;function Je(e){window.__c={n:"MFAPromptVerifyWithTOTP"};const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:a,onDismiss:r,onVerifyTOTP:d,onTryAnotherMethod:l}=e,u=(0,c.yK)(Ye,[]),[p,g]=(0,n.useState)([]),v=o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",[Qe]:je}),f=o()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",[Qe]:He,values:{friendlyName:t.friendlyName,boldtext:e=>o()("span",{style:u.boldText},void 0,e)}}),y={text:s?o()(w.Z,{}):o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",[Qe]:"Continue"}),onClick:()=>d({[Ke]:t[Ke],code:p.join("")}),[ze]:s||6!==(0,Be.compact)(p).length},b=[{text:o()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",[Qe]:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),[ze]:s}];return o()(h.Z,{title:v,header:f,icon:o()(F,{userStore:i}),primaryAction:y,secondaryActions:b,errorMessage:a,onDismiss:r},void 0,o()("div",{},void 0,o()(Oe.ZP,{numInputs:6,value:p,format:We,[ze]:!1,onChange:g,autoFocus:!0,isValidKey:Oe.rN})))}function Ye(e){return(0,c.EM)({boldText:{fontWeight:p.Z.fontWeight.semibold}})}const Xe=s(85).qjm,$e=s(85).Usq,et=s(85).VL7,tt=s(85).ma1,st=s(85).dI8,it=s(85).oQ1,ot=s(85).ct3,nt=s(85).frS,at=s(85).FNh,rt=s(85).gUt,dt=s(85).epw,lt=s(85).mE6,ct=s(85).SgB,ut=s(85).D_u,mt=s(85).qpG,pt=s(85).MQM,gt=s(85).JJs,ht=s(85).o8N,vt=s(85).Ht7,ft=s(85).xYh,yt=s(85).GxL,bt=s(85).O0b,wt=s(85).wJk;function St(e){window.__c={n:"SettingsRouter"};const{settingsStateMachine:t,[wt]:s,onStartTOTP:i,onStartSMS:n,onStartBackupCodes:c}=e,u=(0,a.O7)(),m=(0,r.VK)((()=>(0,l.getCurrentUserStore)(u)),[u]),p=t.useCurrentStep();switch(p.step){case bt:return null;case yt:return o()(Ae,{[ft]:p[ft],[vt]:p[vt],[gt]:m,[pt]:p[ht],alertMessage:p.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),[wt]:s});case mt:return o()(B,{isSMSLoading:p.isSMSLoading,chosenMfaSettingId:p.chosenMfaSettingId,[ut]:p[ut],[gt]:m,[pt]:p[ht],onClick:e=>t.settingsChooseVerifyMethod(e),[wt]:s});case ct:return o()(Je,{[ft]:p[ft],mfaSetting:p.mfaSetting,[gt]:m,[pt]:p[ht],[wt]:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t[lt]()});case dt:return o()(qe,{[ft]:p[ft],mfaSetting:p.mfaSetting,[gt]:m,[pt]:p[ht],resentAt:p.resentAt,[rt]:p[rt],[wt]:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({[at]:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(p.mfaSetting[at]),onTryAnotherMethod:()=>t[lt]()});case nt:return o()(Te,{[ft]:p[ft],[gt]:m,[pt]:p[ht],[wt]:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t[lt]()});case ot:return null;case"settingsInitialSetup":return o()(y,{[pt]:p[ht],onStartTOTP:i,onStartSMS:n,[wt]:s});case it:const e=p[ut];return o()(we,{[ut]:e,[pt]:p[ht],onStartTOTP:i,onStartSMS:n,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),[wt]:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case st:return o()(M,{[ft]:p[ft],mfaSetting:p.mfaSettingToDelete,[pt]:p[ht],[wt]:s,onCancel:()=>t[tt](),onDeleteMethod:()=>t.settingsDelete()});case et:case $e:const a="settingsConfirmIdentity"===p.step&&"disableMFA"===p.source;return"settingsDisableMFA"===p.step||a?o()(V,{[ft]:a,lastMFASetting:p.lastMFASetting,[pt]:p[ht],[wt]:s,onTurnOffMFA:()=>t[$e](),onCancel:()=>t[tt]()}):null;case Xe:return"disableMFA"===p.source?o()(G,{[pt]:p[ht],[wt]:s}):null;default:return(0,d.unreachable)(p)}}},24173:(e,t,s)=>{s.d(t,{c:()=>z,W:()=>K});var i=s(49085),o=s(62965),n=s(97880),a=s(69503),r=s(49682),d=s(16010);const l=s(85).kDM,c=s(85).G2r,u=s(85).RkE,m=s(85).IFy,p=s(85).o8N,g=s(85).KqM,h=s(85).qjm,v=s(85).d6L,f=s(85).K$$,y=s(85).OdD,b=s(85).dI8,w=s(85).Usq,S=s(85).D_u,M=s(85).oQ1,k=s(85).ct3,Z=s(85).gUt,C=s(85).mE6,T=s(85).FNh,P=s(85).qpG,F=s(85).Ht7,I=s(85).xYh,_=s(85).ma1,x=s(85).F5W,A=s(85).gYY,D=s(85).VL7,B=s(85).XtO,R=s(85).Wp_,O=s(85).Kx0,G=s(85).XCv,U=s(85).Bn$,E=s(85).O0b,N=s(85).frS,L=s(85).SgB,V=s(85).epw,q=s(85).GxL,W={[q]:r.Qj.incorrectPassword,[V]:r.Qj.smsIncorrectCode,[L]:r.Qj.totpIncorrectCode,[N]:r.Qj.backupCodeIncorrectCode};class z extends i.default{getInitialState(){return{step:E}}}class K extends d.o{constructor(e,t){super(e,U),this[G]=void 0,this[G]=t}settingsConfirmIdentityForPasswordSetting(){this[O]("settingsUninitialized")&&(this[B][R]({step:D,[A]:"passwordSetting"}),this.doConfirmIdentity().catch(this[x]))}[_](){this[O](["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this[B][R]({step:D,[A]:U}),this.doConfirmIdentity().catch(this[x]))}settingsVerifyPassword(e){const t=this[O](q);t&&(this[B][R]({...t,[I]:!0}),this.doVerifyIdentityWithPassword(e).catch(this[x]))}settingsForgotPassword(e){const t=this[O](q);t&&(this[B][R]({...t,[F]:!0}),this.doForgotPassword(e).catch(this[x]))}settingsChooseVerifyMethod(e){const t=this[O](P);if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this[B][R]({...t,isSMSLoading:!0,chosenMfaSettingId:e[T]}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this[B][R]({mfaSetting:e,step:L,[I]:!1,[A]:t[A]});break;case"backup_code":this[B][R]({step:N,[I]:!1,[A]:t[A]});break;default:(0,n.unreachable)(s)}}[C](){this[O](["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this[x])}settingsVerifyTOTP(e){const t=this[O](L);t&&(this[B][R]({...t,[I]:!0}),this.doVerifyIdentityWithTOTP(e).catch(this[x]))}settingsVerifySMS(e){const t=this[O](V);t&&(this[B][R]({...t,[I]:!0}),this.doVerifyIdentityWithSMS(e).catch(this[x]))}settingsVerifyResendSMS(e){const t=this[O](V);t&&(this[B][R]({...t,[Z]:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this[x]))}settingsVerifyBackupCode(e){const t=this[O](N);t&&(this[B][R]({...t,[I]:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this[x]))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this[_]();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this[B][R]({step:k}),this.doLoadSettings().catch(this[x]))}settingsUpdate(e){this[O]("settingsShowSettings")&&this.doUpdateSettings(e).catch(this[x])}settingsConfirmDelete(e){const t=this[O](M);if(!t)return;t[S].find((t=>t[T]===e[T]));1===t[S].filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod)).length?this[B][R]({step:w,lastMFASetting:e}):this[B][R]({step:b,[S]:t[S],mfaSettingToDelete:e,[I]:!1})}settingsDelete(){const e=this[O](b);e&&(this[B][R]({...e,[I]:!0}),this.doDeleteSettings(e.mfaSettingToDelete[T]).catch(this[x]))}settingsConfirmDisableMFA(){this[O]("settingsShowSettings")&&this[B][R]({step:w})}[w](){const e=this[O](w);e&&(this[B][R]({step:D,[A]:y,lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this[x]))}exit(){this[B][R]({step:E})}async doConfirmIdentity(){const e=await this[f](D,(()=>this[G].confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t[v];switch(i){case"ready":this[B][R]({step:h,[A]:s[A]});const e=s[A];"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z[R]({open:!0,setNewPassword:!0,isSet:!1,[g]:"",repeatPassword:""}),this.exit()):(0,n.unreachable)(e);break;case"mfa":this[B][R]({step:P,[S]:t[U],[A]:s[A]});break;case g:this[B][R]({step:q,[I]:!1,[F]:!1,[A]:U});break;default:throw(0,n.unreachable)(i)}}async doForgotPassword(e){if(!e)return void this[B][R]({step:q,[A]:U,[I]:!1,[F]:!1,[p]:r.Qj[m]});const t=await this[f](q,(()=>this[G][u]({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s[v]){case"ok":this[B][R]({...i,[F]:!1,alert:r.to.passwordResentLinkSent(e)});break;case p:this[B][R]({...i,[F]:!1,[p]:r.Qj[m]});break;default:return(0,n.unreachable)(s[v])}}async doVerifyIdentityWithPassword(e){const t=await this[f](q,(()=>this[G].verifyIdentityWithPassword({[g]:e})));if(!t)return;const{result:s,state:i}=t;await this[c]({[v]:s[v],state:i})}async doVerifyIdentityWithTOTP(e){const t=await this[f](L,(()=>this[G].verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this[c]({[v]:s[v],state:i})}async doVerifyIdentityWithSMS(e){const t=await this[f](V,(()=>this[G].verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this[c]({[v]:s[v],state:i})}async doVerifyIdentityResendSMS(e){const t=await this[f](V,(()=>this[G].sendSMS({[T]:e})));if(!t)return;const{result:s,state:i}=t;switch(s[v]){case"ok":this[B][R]({...i,[I]:!1,[Z]:"resent",resentAt:Date.now()});break;case p:this[B][R]({...i,[Z]:l,[p]:r.Qj[m]});break;default:return(0,n.unreachable)(s[v])}}async doVerifyIdentityWithBackupCode(e){const t=await this[f](N,(()=>this[G].verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this[c]({[v]:s[v],state:i})}async[c](e){const{[v]:t,state:s}=e;switch(t){case"match":const e=s[A];this[B][R]({step:h,[A]:s[A]}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z[R]({open:!0,setNewPassword:!0,isSet:!1,[g]:"",repeatPassword:""}),this.exit()):(0,n.unreachable)(e);break;case"incorrect":this[B][R]({...s,[I]:!1,[p]:W[s.step]});break;case p:this[B][R]({...s,[I]:!1,[p]:r.Qj[m]});break;default:return(0,n.unreachable)(t)}}async doTryAnotherMethod(){const e=await this[f]([V,L,N],(()=>this[G].loadSettings()));if(!e)return;const{result:t,state:s}=e;t[U].length>0?this[B][R]({...s,step:P,[S]:t[U]}):this[B][R]({...s,[p]:r.Qj[m]})}async doLoadSettings(){const e=await this[f]([k,h],(()=>this[G].loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case h:case k:t[U].length>0?this[B][R]({step:M,[S]:t[U]}):this[B][R]({step:"settingsInitialSetup"});break;default:return(0,n.unreachable)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this[f](P,(()=>this[G].sendSMS({[T]:t[T]})));if(!s)return;const{result:i,state:o}=s;switch(i[v]){case"ok":this[B][R]({mfaSetting:t,step:V,[I]:!1,resentAt:0,[Z]:l,[A]:o[A]});break;case p:break;default:return(0,n.unreachable)(i[v])}}async doUpdateSettings(e){const{mfaMethod:t,[T]:s}=e;if("totp"!==t)return;const i=await this[f](M,(()=>this[G].renameSettings({[T]:s,friendlyName:e.friendlyName})));if(!i)return;const{result:n,state:a}=i;"saved"===n[v]?n[U].length>0&&!(0,o.Z)(n,a[S])?this[B][R]({step:M,[S]:n[U]}):this[B][R]({...a,[p]:void 0}):this[B][R]({...a,[p]:"duplicate"===n[v]?r.Qj.totpDuplicateFriendlyName:"bad_friendly_name"===n[v]?r.Qj.totpBadFriendlyName:r.Qj.totpEmptyFriendlyName})}async doDisableMFA(){const e=await this[f](h,(()=>this[G][y]()));if(!e)return;const{result:t}=e;switch(t[v]){case"ok":case p:break;default:return(0,n.unreachable)(t[v])}}async doDeleteSettings(e){const t=await this[f](b,(()=>this[G].deleteSettings(e)));if(!t)return;const{result:s}=t;this[B][R]({step:M,[S]:s[U]})}}},83890:(e,t,s)=>{s.d(t,{Z:()=>Q});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(83355),l=s(66897),c=s(3909),u=s(19889),m=s(7928),p=s(5366),g=s(31299),h=s(39098),v=s(92864),f=s(93044),y=s(255),b=s(97680),w=s(98707);const S=s(85).Yzm,M=s(85).nx5,k=s(85).PP_,Z=s(85).PXg,C=s(85).jkI,T=s(85).H1U,P=s(85).rOg,F=s(85).Mm1,I=s(85)._V5,_=s(85).TLr,x=s(85).fBu,A=s(85).ctC,D=s(85).xgV,B=s(85).D7I,R=s(85).IRD,O=s(85).KS0,G=s(85).Scd,U=s(85).wgE,E=s(85).E0z,N=s(85).dLQ,L=s(85).P0R,V=s(85).N5p,q=s(85).G4H,W=s(85).PG2,z=s(85).pkR,K=s(85).EKg;class H extends d.Z{constructor(){super(...arguments),this[K]=(e,t)=>{let{[z]:s,onRemove:i,[W]:o}=t;const n=this[q],r=this.getUserValue(e),d=a()(y.Z,{[z]:s,[W]:i});return a()(b.Z,{[z]:s,focused:!1,actor:(0,l.m3)(r),right:d,style:n.menuItem,desktopTitleStyle:n.menuItemTitle,[W]:o},e)},this[V]=e=>(0,m.Nz)(this[L].intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:s}=this[L],i=1===s.length,o=this.getUserValue(e);if(o)return a()(v.ZP,{format:this[U][E][N]?f.lP.Large:f.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,l.m3)(o),shouldShrink:!0,style:{[G]:O}},e)},this[R]=(e,t)=>{const s=this.getUserValue(e);return r[B](b.Z,o()({},t,{key:e,actor:(0,l.m3)(s)}))},this[D]=async e=>{let{query:t,current:s}=e;const i=new Set(s);return(await g.searchVisibleSpaceUsers({[U]:this[U],query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this[A](e).getValue(),this[A]=e=>{const{[x]:t}=this[L];return h.U6[_](t,{table:u.KJ,id:e})},this[q]={menuItem:{minHeight:void 0,[I]:this[U][E][N]?12:4,[F]:this[U][E][N]?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:P,[T]:C},menuItemLabel:{[Z]:12},recordIcon:{[Z]:2,fill:k}}}renderComponent(){const{mode:e,title:t,userIds:s,onChange:i,[z]:o,focused:n,onMenuDismiss:r,intl:d}=this[L];return a()(w.Z,{mode:e,title:t,icon:c.Z.person,iconStyles:this[q].recordIcon,items:s,onChange:i,[z]:o,focused:n,renderFilter:this[K],renderToken:this.renderToken,[V]:this[V],addItemLabel:a()(p.FormattedMessage,{[M]:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:d[S]({[M]:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},[D]:this[D],[R]:this[R],onMenuDismiss:r,hasItemsSelected:(null==s?void 0:s.length)>0})}}H.displayName="SearchPersonFilter";const Q=(0,p.injectIntl)(H)},69507:(e,t,s)=>{s.d(t,{l:()=>m});var i=s(97464),o=s.n(i),n=s(77094),a=s.n(n),r=s(67294),d=s(83355),l=s(5366),c=s(72495);const u=s(85).nx5;class m extends d.Z{renderComponent(){return r.createElement(c.Z,o()({title:a()(l.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectPersonTitle",[u]:"Select a person"})},this.props))}}m.displayName="SearchPersonDropdown"},79817:(e,t,s)=>{s.r(t),s.d(t,{handlePermissionsInviteInitiated:()=>x,handlePermissionsInviteComplete:()=>B,inviteMembers:()=>R,requestMembers:()=>O,findOrCreateUserId:()=>U,handleRequestMembersFailure:()=>E,handleContextualInviteFailure:()=>N,displayMultipleUser:()=>L,getContextualInviteAnalyticsData:()=>V,createContextualInviteUser:()=>q,isVerifiedDomain:()=>W});var i=s(33728),o=s(65917),n=s(24211),a=s(27006),r=s(97880),d=s(54642),l=s(76464),c=s(64964),u=s(33929),m=s(85834),p=s(4708),g=s(19306),h=s(21115),v=s(8323);const f=s(85).T04,y=s(85).NDH,b=s(85).bCs,w=s(85).IFW,S=s(85).o8N,M=s(85).H6e,k=s(85).nx5,Z=s(85).Yzm,C=s(85).TtP,T=s(85).Iwv,P=s(85).QmD,F=s(85).DL8,I=s(85).Wqi,_=s(85).wgE,x=e=>{const{[_]:t,[I]:s,[F]:i}=e;A({[_]:t,[I]:s,[F]:i})?i.startRequestMembership():D({[_]:t,[I]:s,[F]:i})?i.startWorkspaceInvite():i.setState({...i[P],inviteStage:m.TG.closed})},A=e=>{const{[I]:t,[F]:s}=e,i=t.getRole();return!(!i||!(0,a.isMember)(i))&&(!!s.hasGuests()&&(!t[T]()&&(0,p.enableRequestMembership)()))},D=e=>{const{[I]:t,[F]:s}=e,i=t.getRole();return!(!i||!(0,a.canEditMembership)(i))&&(!!s.hasGuests()&&(0,v.isMultiplayerEnabled)())},B=e=>{const{success:t,intl:s,[F]:i}=e,o=i[P].invitedUsers;0!==o[C]&&(t?c.oV({label:s[Z]({id:"contextual_invite.permission_invite_success3",[k]:"Successfully sent invites to {users}"},{users:L(o,s)})}):(c.oV({label:s[Z]({id:"contextual_invite.permission_invite_failure",[k]:"Failed to send invites to {users}"},{users:L(o,s)})}),i.reset()))},R=async e=>{const{[_]:t,[I]:s,[F]:i,from:n,intl:a}=e,{selection:r,flowId:d}=i[P];if("page_guest"===r||!i.hasGuests())return i.reset(),!1;const{[M]:c,unknownEmails:u}=await G({[_]:t,[F]:i}),m={...i[P]};i.reset();const p=(0,v.getSubscriptionTier)(),g=p&&(0,h.subscriptionAllowsAdminOnly)(p)?"editor":e.inviteRole??"read_and_write";try{await l[M]({[_]:t,store:s,[M]:c,inviteRole:g,isOnboarding:!1,invite:{inviteOrigin:n,inviteFlowId:d}})}catch(f){return N(a,m.invitedUsers),o.log({level:S,from:w,type:"inviteMembers.inviteTargets",data:{[b]:{...m,[M]:c}}}),!1}finally{u[C]&&o.log({level:S,from:w,type:"inviteMembers.unknownUserId",data:{[b]:{...m,unknownEmails:u}}})}return!0},O=async e=>{const{[_]:t,[I]:s,originId:i,originType:n,reasonMessage:a,[F]:r,intl:l}=e,{selection:c}=r[P];if("page_guest"===c||!r.hasGuests())return r.reset(),!1;const{[M]:u,unknownEmails:m}=await G({[_]:t,[F]:r}),p={...r[P]};r.reset();const g=[];try{const e=u.map((e=>d.requestAccess(t,{type:"actor-to-space",forActorId:e.value.id,spaceId:s.id,message:a,attributes:{origin_id:i,origin_type:n,origin_table:"share_menu"===n?"block":"space",add_permissions_on_approval:!1}}).catch((()=>g.push(e)))));await Promise.all(e)}catch(h){return E(l,p.invitedUsers),o.log({level:S,from:w,type:"requestMembers.inviteTargets",data:{[b]:{...p,inviteTargetsWithErrors:g}}}),!1}finally{m[C]&&o.log({level:S,from:w,type:"requestMembers.unknownUserId",data:{[b]:{...p,unknownEmails:m}}})}return!0},G=async e=>{const{[_]:t,[F]:s}=e,{invitedEmailToUserIdMap:i}=s[P],o=[],n=[];for(const a of s[P].invitedUsers){if(!a.isGuest)continue;const e=await U(t,a,i);e?o.push({type:y,value:{id:e,[f]:a[f],version:1}}):n.push(a[f])}return{[M]:o,unknownEmails:n}},U=async(e,t,s)=>{const i=await(async(e,t,s)=>{let i=t.id;if(i||(i=s[t[f]]),!i){const s=await d.findUser(e,{[f]:t[f]});if("failed"!==s.type){const e=s.data;e.value&&(i=e.value.value.id)}}return i})(e,t,s);if(i)return i;const o=(0,n.E2)(u.default.getIntl()),a=await d.createEmailUser(e,{[f]:t[f],preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:o});return"failed"!==a.type?a.data.userId:void 0},E=(e,t)=>{0!==t[C]&&c.oV({label:e[Z]({id:"contextual_invite.request_members_failure",[k]:"Failed to request {users} to become members"},{users:L(t,e)})})},N=(e,t)=>{0!==t[C]&&c.oV({label:e[Z]({id:"contextual_invite.contextual_invite_failure",[k]:"Failed to invite to {users} as members"},{users:L(t,e)})})},L=(e,t)=>(0,g.W)(e.flatMap((e=>e[f]||[]))),V=(e,t)=>{const{[P]:s}=t,i=(0,v.getSubscriptionTier)(),o=t.getGuestEmails();return{invite_flow_id:s.flowId,user_count:o[C],user_emails:o,invite_space_role_selection:s.selection,is_bot:!1,subscription_tier:i}};function q(e){const{type:t}=e;switch(t){case"newUser":return{[f]:e.value[f],isGuest:!0};case y:return{...e.value,[f]:e.value[f],isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};case"group":return;default:(0,r.unreachable)(t)}}function W(e){const{contextualInviteUser:t,allowedDomains:s}=e,{[f]:o,isGuest:n}=t;if(n){const e=(0,i.Gd)(o);if(!e)return!1;if(s.has(e))return!0}return!1}},3924:(e,t,s)=>{s.d(t,{M:()=>d});var i=s(67294),o=s(480),n=s(54642),a=s(10161);const r=s(85).MpX;function d(e){return t=>{const s=(0,o.O7)(),[d,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{a.default.checkGate(r)&&n.getEmailDomainSettings(s,{}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const c={...t,userEmailDomainSettings:d};return i.createElement(e,c)}}},18441:(e,t,s)=>{s.d(t,{jg:()=>c,jc:()=>u,P9:()=>m,YJ:()=>p});s(3909);var i=s(55384),o=s(32161),n=(s(19889),s(5500)),a=(s(82990),s(5366));s(85).Sgw;const r=s(85).nxm,d=s(85).nuv,l=s(85).n_z;(0,a.defineMessages)({slackPersonalChannel:{id:"notificationRuleSettings.slackTargetPersonalChannelDisplayName",defaultMessage:"Private channel"}});function c(e){if(e.integration_id!==n.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,i]=t;return{[l]:s,accountName:i}}function u(e){return i.kk.fromValue(o.P,e).getSlackWorkspaceId()}function m(e,t){return t?e.filter((e=>{const s=u(e);return!!s&&t(s)})):e}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,[l]:o}=c(i);g({query:t,accountName:e,[l]:o})&&(s[e]||(s[e]=[]),s[e].push({[d]:i,workspaceName:o}))}return s}function g(e){const{accountName:t,[l]:s,query:i}=e;if(0===i.length)return!0;const o=t[r]().indexOf(i.trim()[r]())>=0,n=!!s&&s[r]().indexOf(i.trim()[r]())>=0;return o||n}},53353:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(81954),o=s(98165),n=s(65598);const a=s(85).UXS,r=s(85).tHd;const d=function(e){return(0,i.VK)((()=>{if(!(0,n.isBlockStore)(e))return{[r]:!1,spaceAllowsGuests:!0};const t=(0,o.getTeam)(e),s=(0,o.getSpace)(e),i=!(null!=s&&s[a]());return t?{[r]:!0,teamAllowsGuests:!t[a](),spaceAllowsGuests:i}:{[r]:!1,spaceAllowsGuests:i}}),[e])}},26781:(e,t,s)=>{s.d(t,{i:()=>c});var i=s(77094),o=s.n(i),n=s(67294),a=s(5366),r=s(53353);const d=s(85).D7I,l=(s(85).OJM,s(85).nx5);s(85).pXU;function c(e){const t=(0,r.Z)(e);return t.isStoreInTeam?t.teamAllowsGuests?void 0:n[d](n.Fragment,null,o()("div",{},void 0,o()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",[l]:"This teamspace doesn't allow guests."})),o()("div",{},void 0,o()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",[l]:"Remove any guests to continue."}))):t.spaceAllowsGuests?void 0:n[d](n.Fragment,null,o()("div",{},void 0,o()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",[l]:"This workspace doesn't allow guests."})),o()("div",{},void 0,o()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",[l]:"Remove any guests to continue."})))}},30496:(e,t,s)=>{s.d(t,{Z:()=>i});const i=new(s(61766).Z)},53680:(e,t,s)=>{s.d(t,{Z:()=>k});var i=s(49085);const o=s(85).UIm,n=s(85).Ddh,a=s(85).Bn$,r=s(85).dL6,d=s(85).sbn,l=s(85).IwD,c=s(85).Z6o,u=s(85).otN,m=s(85).jGl,p=s(85).uQx,g=s(85).sSK,h=s(85).lMF,v=s(85)._Xq,f=s(85).fim,y=s(85).ciu,b=s(85).vjF,w=s(85).jA,S=s(85).set;class M extends i.default{getInitialState(){return{[S]:!1,[w]:!1,[b]:!1,disableExport:!1,[y]:!1,[f]:!1,[v]:!1,[h]:!1,[g]:!1,enableAiFeature:!1,[p]:!1}}getValueForSpace(e){if(e.isDefined())return{[S]:Boolean(e[m]()),[w]:Boolean(e.getDisableGuests()),[b]:Boolean(e[u]()),disableExport:Boolean(e.getDisableExport()),[y]:Boolean(e[c]()),[f]:Boolean(e[l]()),[v]:Boolean(e.getDisableTeamCreation()),[h]:Boolean(e[r](a)[r](n)[d]()),[g]:Boolean(e[r](a)[r](o)[d]()),enableAiFeature:Boolean(e[r](a)[r]("enable_ai_feature")[d]()),[p]:Boolean(e[r](a)[r]("disable_team_guests")[d]())}}}const k=M},50501:(e,t,s)=>{s.d(t,{g:()=>i});const i=14*s(63143).DayMs},96068:(e,t,s)=>{s.d(t,{I:()=>a});var i=s(96486),o=s.n(i);const n=s(85).W2G;function a(e){if(o().uniq(e).length<=3)return{[n]:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{[n]:!0};if(e.length<8)return{[n]:!1,reason:{type:"password_too_short"}};const t=function(e){return e.match(/[a-z]/i)}(e),s=function(e){return e.match(/\d/)}(e);return t&&s?{[n]:!0}:t||s?s?t?{[n]:!1,reason:{type:"password_too_short"}}:{[n]:!1,reason:{type:"password_missing_letter"}}:{[n]:!1,reason:{type:"password_missing_number"}}:{[n]:!1,reason:{type:"password_missing_letter_and_number"}}}}}]);