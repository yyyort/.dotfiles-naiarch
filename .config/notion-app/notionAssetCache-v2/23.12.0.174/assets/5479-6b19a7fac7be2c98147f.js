"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5479],{23321:(e,t,o)=>{o.d(t,{OF:()=>ue,L6:()=>pe,ZP:()=>ye});var i=o(77094),n=o.n(i),s=o(97464),r=o.n(s),a=o(96486),l=o.n(a),d=o(67294),c=o(83355),h=o(8848),u=o(15095),p=o(54153),g=o(5366),m=o(50906),y=o(34809),f=o(5385),v=o(33929),Z=o(4391),P=o(29798),k=o(73657),S=o(68785),T=o(32163),b=o(77137),C=o(43145),M=o(72495),w=o(38797),I=o(57670);const R=o(85).$bT,x=o(85).q55,A=o(85).XeC,D=o(85).Mm1,F=o(85).j7K,O=o(85).dU4,L=o(85).Yzm,N=o(85).dLQ,E=o(85).Yjn,G=o(85).HT$,B=o(85).Wt1,V=o(85).ANQ,_=o(85).Xte,Y=o(85).E0z,W=o(85).RfB,Q=o(85).Vg9,U=o(85).Ohd,z=o(85).qPX,K=o(85).B$R,$=o(85).lTn,j=o(85).rGB,q=o(85).TtP,H=o(85).QmD,J=o(85).Wp_,X=o(85).QyM,ee=o(85).Gnd,te=o(85).D7I,oe=o(85).rpY,ie=o(85).wgE,ne=o(85).u3H,se=o(85).P0R,re=o(85).P0G,ae=o(85).XtO,le=o(85).eiN,de=o(85).nx5,ce=w.tg,he=w.Nm,ue=w.II,pe=w.pq,ge=(0,g.defineMessages)({noResults:{[de]:"No results",id:"emojiPicker.noResults.message"}});class me extends c.Z{constructor(){super(...arguments),this[le]="",this.splitFilter=[],this.storeTypes={[ae]:Z.Z,[re]:P.Z},this.insertIcon=e=>{const t=this.getNormalizedIconPath(e);this[se].onSubmit(t);const o=t.split(/[/_.]/),i=o[2],n=o[3];this.addToRecentIcons(i),this[se][ne]&&m.trackIconActions(this[ie],"pick_colored_icon",{icon:i,color:n,...this[se][ne]})},this.createListItem=(e,t)=>{const o=f.x(),i=this[se].enforceIconColor??o,n=`/icons/${`${e}${i?`_${i}`:""}`}.svg`;return{key:n,action:e=>this.handleIconButtonClick(n),[oe]:o=>d[te](I.Z,r()({},o,{icon:e,color:i??"gray",variations:t,insertIcon:this.insertIcon,shouldOpenVariations:!Boolean(i)}))}},this.performGetAllIconsRequest=async e=>{const{[ae]:t}=this[ee];if(!l().isEmpty(t[X]().allIcons))return t[X]().allIcons;const o=await(0,y.ZP)({[ie]:this[ie],url:e,method:"GET",format:"json",mode:"cors"});if("success"===o.type)return t[J]({...t[H],allIcons:o.data}),o.data;throw o.error},this.createCategory=(e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?this[ee][ae][H].recentIcons||[]:Object.keys(t),0!==o[q]?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return this.createListItem(e,t[e])}))[le](Boolean),[oe]:t=>n()(M.Z,{isTitleUppercase:!0,title:e.title},t.key,n()("div",{style:this.getIconSectionWrapStyle()},void 0,t[j]))}:void 0},this[$]=e=>{if(Math.abs(e)<me[K]){const{loadIconCount:e,allIcons:t}=this[ee][ae][H],o=this[z]()*this[U](),i=Math.max(o,this.getAllSectionsIconCount(t));this[ee][ae][J]({...this[ee][ae][H],loadIconCount:Math.min(i,e+o)})}},this.handleIconButtonClick=e=>{this.insertIcon(e)},this.getNormalizedIconPath=e=>e.replace("_dark","")}willMount(e){super.willMount(e);const t=p.Z.get(me[Q]);this[ee][ae][J]({...this[ee][ae][H],recentIcons:t||[]})}renderComponent(){return n()(b.Z,{request:"/icons/all",performRequest:this.performGetAllIconsRequest,[oe]:(e,t,o)=>o?this.renderIconPicker(t):n()("div",{style:this[W]()},void 0,n()(S.Z,{}))})}[z](){var e,t,o,i,n,s;const{[Y]:r,[_]:a}=this[ie];return r.isPhone?(window.innerWidth-a.getSafePaddingLeftPx(me[V])-a.getSafePaddingRightPx(me[B]))/I.Z.mobileButtonSize:r.isTablet?ce:null!==(e=this[se])&&void 0!==e&&null!==(t=e.menuRef)&&void 0!==t&&null!==(o=t.current)&&void 0!==o&&o.offsetWidth?((null===(i=this[se])||void 0===i||null===(n=i.menuRef)||void 0===n||null===(s=n.current)||void 0===s?void 0:s.offsetWidth)-2*me[G])/I.Z[E]:r.isTablet?ce:8}[U](){return this[ie][Y][N]?pe:ue}renderIconPicker(e){const{[re]:t}=this[ee],o=this.getVisibleSections(this.getAllSections(e)),i=this[ie][Y].isDesktop&&o[q]>0?0:void 0;return 0===o[q]&&(this[se].onNoResults&&this[se].onNoResults(),o.push({key:"no results",items:[{key:"no results",action:e=>{},[oe]:(e,t)=>d[te](k.Z,r()({},e,{caption:v.default[L](ge.noResults)}))}],[oe]:e=>d[te](M.Z,e)})),n()("div",{style:me[O]},void 0,n()("div",{style:{flexGrow:1}},void 0,d[te](T.Z,r()({},this.getMenuListProps(),{[ae]:t,[F]:i,sections:o,disableKeyboardArrowWrap:!0,unfocusOnScroll:this[ie][Y][N]}))),n()(C.Z,{onChange:this[$]}))}getCategories(){return l().compact([!this[se][le]&&{id:"recent",title:n()(g.FormattedMessage,{id:"iconPicker.section.recent",[de]:"Recent"})},!this[se][le]&&{id:"icons",title:n()(g.FormattedMessage,{id:"iconPicker.section.icons",[de]:"Icons"})}])}createFilteredSection(e){if(!e)return[];const t=this.filterAndSortIcons(e);return 0===t[q]?[]:[{key:"search-results",items:t.map((t=>this.createListItem(t,e[t]))),[oe]:e=>n()(M.Z,{},e.key,n()("div",{style:this.getIconSectionWrapStyle()},void 0,e[j]))}]}getMenuListProps(){return{type:T.i.Grid,itemsPerRow:this[z](),renderRow:(e,t)=>n()("div",{style:me.rowStyle},t,e)}}addToRecentIcons(e){const t=p.Z.get(me[Q]),o=l().union([e],t),i=l().take(o,this[z]()*he);p.Z.set(me[Q],i),this[ee][ae][J]({...this[ee][ae][H],recentIcons:i})}getAllSections(e){this[le]=u.cleanKeyword(this[se][le])??"",this.splitFilter=this[le]?this[le].split(" ")[le](Boolean):[];const t=l().compact(this.getCategories().map((t=>this.createCategory(t,e))));return this[se][le]&&this[le]?this.createFilteredSection(e):t}getAllSectionsIconCount(e){const t=this.getAllSections(e);let o=0;for(const i of t)o+=i.items[q];return o}getVisibleSections(e){let{loadIconCount:t}=this[ee][ae][H];0===t&&(t+=this[z]()*this[U]());const o=[];let i=0;for(const n of e){if(!(i+n.items[q]<=t)){o.push({...n,items:n.items.slice(0,t-i)});break}o.push(n),i+=n.items[q]}return o}filterAndSortIcons(e){const{[le]:t}=this,o=l().compact(Object.keys(e).map((o=>{const i=e[o],n=((null==i?void 0:i.tooltip)??o).replace("-"," "),s=[n,...i.tags],r=s.findIndex((e=>e===t));if(-1!==r)return[0===r?100:50,o];const a=s.findIndex((e=>e.startsWith(t))),l=n.includes(t);return 0!==a&&l?[40,o]:-1!==a?[0===a?80:30,o]:void 0})));return l().sortBy(o,(e=>-e[0])).map((e=>e[1]))}[W](){return{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",[D]:"10px"}}getIconSectionWrapStyle(){const{[Y]:e,[_]:t}=this[ie],o=e.isPhone?{background:this.theme.popoverBackground,paddingTop:10,[D]:10,paddingLeft:t[A](me[V]),paddingRight:t[A](me[B]),boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}:{background:h.ZP.transparent,paddingLeft:e.isTablet?me[x]:me[G],paddingRight:e.isTablet?me[x]:me[G]};return{display:"flex",[R]:"column",flexWrap:"wrap",alignItems:"flex-start",...o}}}me.displayName="IconPicker",me[K]=100,me[Q]="recentIcons",me[G]=w.ZP[G],me[x]=w.ZP[x],me.desktopIconPickerOnlyPopupWidth=8*I.Z[E]+2*me[G],me.desktopIconPickerOnlyPopupHeight=356,me[V]=w.ZP[V],me[B]=w.ZP[B],me[O]={display:"flex",[R]:"column"},me.rowStyle={display:"flex"};const ye=me},57670:(e,t,o)=>{o.d(t,{Z:()=>$});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(67294),l=o(83355),d=o(79362),c=o(98742),h=o(61766),u=o(64921),p=o(31945),g=o(1743),m=o(3386),y=o(32163),f=o(58032),v=o(79920);const Z=o(85).Yjn,P=o(85).JgJ,k=o(85).EDv,S=o(85).nBt,T=o(85).wgE,b=o(85).dLQ,C=o(85).NF1,M=o(85).UPJ,w=o(85).jkI,I=o(85).H1U,R=o(85).EMU,x=o(85).sM5,A=o(85).Wp_,D=o(85).j7K,F=o(85).Ek1,O=o(85).Joh,L=o(85).D7I,N=o(85).YGn,E=o(85).G4H,G=o(85).O__,B=o(85).QNi,V=o(85).GGR,_=o(85).PG2,Y=o(85).rpY,W=o(85).Grn,Q=o(85).Gnd,U=o(85).P0R,z=o(85).LtW;class K extends l.Z{constructor(){super(...arguments),this.storeTypes={[z]:h.Z},this.renderIconWithVariations=()=>{const{icon:e,focused:t}=this[U],{[z]:o}=this[Q];return r()(m.Z,{capture:t,onEnter:this[W],onEsc:this.handleCloseMenu},e,r()(p.ZP,{[z]:o,popupType:p.Z4.Popup,renderOrigin:e=>this.renderSingleIcon(e),[Y]:this.renderVariationMenu}))},this.renderSingleIcon=e=>{const{icon:t,focused:o,color:i,[_]:s,[V]:l,variations:d,hideTooltip:h}=this[U],p=d[B]?d[B]:t,g="dark"===this.theme.mode?d.dark:d.light;return r()(f.Z,{allowHover:Boolean(t&&!h),disableTooltip:h,[O]:()=>p[G]("-"," ")[G]("_"," "),closeDelay:0,[Y]:d=>a[L](u.Z,n()({key:t,focused:o,[_]:s},(0,c.Z)(e||{},(0,c.Z)({[V]:l},d)),{ignoreLocalHoverState:!0,style:this[E].iconButton}),r()("img",{src:`data:image/svg+xml;utf8,${encodeURIComponent(g[i])}`,style:this[E].iconImage,onContextMenu:e=>e[N]()}))})},this.renderVariationMenu=e=>{const{icon:t,variations:o,insertIcon:i}=this[U],s="dark"===this.theme.mode?o.light:o.dark,l=Object.keys(s).sort(((e,t)=>d.IconColorVariations[F](e)-d.IconColorVariations[F](t))).map((s=>{const r=`${t}_${s}`;return{key:r,action:t=>{e.close(),i(`/icons/${r}.svg`)},[Y]:e=>a[L](K,n()({},this[U],e,{icon:r,color:s,variations:o,shouldOpenVariations:!1,hideTooltip:!0}))}}));return r()(g.Z,{capture:!0,allowEsc:!0},void 0,r()(y.Z,{type:y.i.Grid,itemsPerRow:5,[D]:0,sections:[{key:"variations",[Y]:e=>a[L]("div",e),items:l}],renderRow:(e,t)=>r()("div",{style:this[E].variationMenu},t,e)}))},this[W]=e=>{e[N]();const{[z]:t}=this[Q];t[A]({...t.state,open:!0})},this.handleCloseMenu=()=>{const{[z]:e}=this[Q];e[A]({...e.state,open:!1})},this[E]={iconButton:{[x]:R,[I]:w,[M]:w,[C]:4,...this.getButtonStyles()},variationMenu:{[x]:R,padding:2,gap:1},iconImage:{...this[T].device[b]?{width:K[S],height:K[S]}:{width:K[k],height:K[k]}}}}renderComponent(){const{shouldOpenVariations:e}=this[U];return e?this.renderIconWithVariations():this.renderSingleIcon()}getButtonStyles(){const{device:e}=this[T];return e[b]?{width:K[P],height:K[P],fontSize:K[S]}:{width:K[Z],height:K[Z],fontSize:K[k]}}}K.displayName="IconPickerMenuItem",K[Z]=v.Z[Z],K[k]=v.Z[k],K[P]=v.Z[P],K[S]=v.Z[S];const $=K},3072:(e,t,o)=>{o.d(t,{Z:()=>K});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(96486),l=o.n(a),d=o(67294),c=o(83355),h=o(2032),u=o(5366),p=o(47853),g=o(16187),m=o(87279),y=o(98742),f=o(52275),v=o(78140),Z=o(32163),P=o(40721),k=o(44532),S=o(72495),T=o(58032),b=o(95030);const C=o(85).ONo,M=o(85).Joh,w=o(85).nLZ,I=o(85).NF1,R=o(85).NLk,x=o(85).ESK,A=o(85).A5$,D=o(85).Yzm,F=o(85).BCA,O=o(85).nQ3,L=o(85).j7K,N=o(85).SRP,E=o(85).D7I,G=o(85).rpY,B=o(85).y79,V=o(85).Jkr,_=o(85).P0R,Y=o(85).iVN,W=o(85).ceT,Q=o(85).nx5,U=(0,u.defineMessages)({noneText:{[Q]:"None",id:"database.propertyAggregationMenu.noneText"}});class z extends c.Z{renderComponent(){const{device:e}=this.environment;let t;return t=e.isMobile?{[W]:m.og.Modal,title:r()(u.FormattedMessage,{[Q]:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:r()(P.DoneMenuText,{}),[Y]:this[_].onClose}:{[W]:m.og.Popup,[V]:200},d[E](v.Z,t,r()(Z.Z,{type:Z.i[B],[L]:0,[O]:[{key:0,[G]:e=>d[E](S.Z,e),items:this[N]()}],[F]:this[_].onClose}))}[N](){const e=[],{property:t,schema:o,source:i}=this[_],s=o[t];if(!s)return[];e.push({key:"none",[G]:e=>d[E](f.Z,n()({},e,{title:this[_].noneText||this[_].intl[D](U.noneText)})),action:()=>this[_].onChange(void 0)});for(const n of h.o5)e.push(this[A](n));if((0,h.iV)(s))for(const n of h.Sy){const t=this[A](n);if("show_unique"===n)switch(i){case"tableAggregation":continue;case"rollupPropertyMenu":e.splice(1,0,t);continue}e.push(t)}if((0,h.O4)(s))for(const n of h.k$)e.push(this[A](n));if((0,h.dN)(s))for(const n of h.f8)e.push(this[A](n));if((0,h.Mv)(s))for(const n of h.gC)e.push(this[A](n));if((0,h.Ei)(s))for(const n of h.OK)e.push(this.getStatusPropAggregationAction(t,n));return e}[A](e){const t=g.VN[e];return{key:t,[G]:o=>r()(T.Z,{placement:k.GI[x].Right,delayThreshold:0,[G]:e=>d[E](f.Z,n()({title:t},(0,y.Z)(e,o))),[M]:()=>r()("div",{style:{[V]:140,[R]:"normal"}},void 0,r()("img",{src:(0,p.D)(g.Sn[e]),style:{[I]:3,[V]:140,[w]:4}}),g.BG[e])},o.key),action:()=>{this[_].onChange(e)}}}getStatusPropAggregationAction(e,t){const{device:o}=this.environment,i=g.VN[t],s=l().compact(this.createStatusPropGroupAggregationAction(e,t));return{key:t,[G]:(e,t)=>d[E](b.Z,n()({},e,{onFocus:t.onFocus,renderOrigin:e=>d[E](f.Z,n()({},e,{title:i})),renderExtension:(e,n)=>{let a;return a=o.isMobile?{[W]:m.og.Modal,title:i,right:r()(P.DoneMenuText,{}),[Y]:n.close,...e}:{[W]:m.og.Popup,[V]:200,...e},d[E](v.Z,a,r()(Z.Z,{type:Z.i[B],[L]:0,[O]:[{key:C,[G]:e=>d[E](S.Z,e),items:s}],[F]:t[F]}))}})),action:()=>null}}createStatusPropGroupAggregationAction(e,t){const o=this[_].schema[e];if(!o||"status"!==o.type)return;const i=o[C];return i?i.map((e=>({key:`${t}${e.name}`,[G]:o=>this.renderAggregationGroupMenuItem(t,e.name,o),action:()=>{this[_].onChange({operator:t,groupName:e.name})}}))):void 0}renderAggregationGroupMenuItem(e,t,o){return r()(T.Z,{placement:k.GI[x].Right,delayThreshold:0,[G]:e=>d[E](f.Z,n()({title:t},(0,y.Z)(e,o))),[M]:()=>r()("div",{style:{[V]:140,[R]:"normal"}},void 0,r()("img",{src:(0,p.D)(g.Sn[e]),style:{[I]:3,[V]:140,[w]:4}}),g.BG[e])},o.key)}}z.displayName="PropertyAggregationMenu";const K=(0,u.injectIntl)(z)},18145:(e,t,o)=>{o.d(t,{t:()=>Te,Z:()=>Ce});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(96486),l=o(67294),d=o(83355),c=o(2032),h=o(99036),u=o(3909),p=o(5366),g=o(50906),m=o(66890),y=o(16187),f=o(75079),v=o(87279),Z=o(98742),P=o(61766),k=o(39098),S=o(42917),T=o(52275),b=o(31945),C=o(78140),M=o(32163),w=o(40721),I=o(44532),R=o(72495),x=o(58032),A=o(19387),D=o(3072),F=o(69872),O=o(77498);const L=o(85).UDE,N=o(85).oPR,E=o(85).Joh,G=o(85).rUZ,B=o(85).Au,V=o(85).wuN,_=o(85).LtW,Y=o(85).rpY,W=o(85).CyM,Q=o(85).Gnd,U=o(85).QmD,z=o(85).pkR,K=o(85).pHx,$=o(85).D7I,j=o(85).Mcv,q=o(85).dLQ,H=o(85).mYq,J=o(85).Gm5,X=o(85).P24,ee=o(85).wgE,te=o(85).NlJ,oe=o(85).lmd,ie=o(85).Zij,ne=o(85).g5Y,se=o(85).P3s,re=o(85).Dd5,ae=(o(85).Z9D,o(85).KQY),le=o(85).OBh,de=o(85).XPl,ce=o(85).oEO,he=o(85).D8A,ue=o(85).ITf,pe=o(85).nx5,ge=o(85).OYN,me=o(85).iIv,ye=o(85).BCA,fe=o(85).N1Z,ve=o(85).P0R,Ze=o(85).Kiu,Pe=o(85).GVN,ke=o(85).GQr,Se=o(85).QUi;let Te;!function(e){e[e.BlockPropertyOverlay=0]="BlockPropertyOverlay",e[e.ViewSettings=1]="ViewSettings"}(Te||(Te={}));class be extends d.Z{constructor(){super(...arguments),this.storeTypes={[Se]:P.Z,[ke]:P.Z,[Pe]:P.Z},this.renderRelationSelect=e=>r()(O.Z,{[Ze]:this[ve][Ze],isRelationProperty:!0,[ye]:this.handleRelationAccept,[me]:e[fe],allowProperty:this.handleRelationAllowProperty}),this[ge]=()=>r()(p.FormattedMessage,{id:"database.rollupProperty.editProperty.tooltip",[pe]:"Select an existing relation first."}),this[ue]=e=>{const t=this[he]();if(t)return r()(O.Z,{isRelationProperty:!1,[Ze]:t[ce],[ye]:this.handleTargetPropertyAccept,allowProperty:this.handleTargetPropertyAllowProperty,[me]:e[fe]})},this.renderAggregationTooltip=()=>r()(p.FormattedMessage,{id:"database.rollupProperty.editAggregate.tooltip",[pe]:"Select an existing relation and property first."}),this.renderAggregationSelect=e=>{const t=this[he]();if(t&&t[le][de])return r()(D.Z,{property:t[le][de],[Ze]:t[ce],[re]:this.handlePropertyAggregationMenuChange,[me]:e[fe],noneText:r()(p.FormattedMessage,{id:ae,[pe]:"Show original"}),source:"rollupPropertyMenu"})},this.handleRelationAccept=e=>{const{[re]:t,[se]:o}=this[ve],i=this[he]();if(!i)return;const n={...i[le],[ne]:e,[de]:ie,[oe]:ie,[te]:void 0};null==t||t({[le]:n}),g.trackConfigureRollupRelation(this[ee],{...(0,f.getCollectionAnalyticsContext)(this[J][X]),from:o})},this.handleTargetPropertyAccept=e=>{const{[re]:t,[se]:o}=this[ve],i=this[he]();if(!i||!i.relatedCollectionValue||!i[ce])return;const n=i[ce][e];if(!n)return;const s={...i[le],[de]:e,[oe]:n.type,[te]:void 0};null==t||t({[le]:s}),g.trackConfigureRollupTargetProperty(this[ee],{...(0,f.getCollectionAnalyticsContext)(this[J][X]),from:o,[H]:n.type})},this.handlePropertyAggregationMenuChange=e=>{const{[re]:t,[se]:o}=this[ve],i=this[he]();if(!i)return;const n={...i[le],[te]:e,show_as:void 0};null==t||t({[le]:n});const s=e?(0,c.gu)(e):void 0;g.trackConfigureRollupAggregation(this[ee],{...(0,f.getCollectionAnalyticsContext)(this[J][X]),from:o,[te]:s})},this.handleRelationAllowProperty=e=>"relation"===e.type,this.handleTargetPropertyAllowProperty=e=>"rollup"!==e.type&&!h.UNSUPPORTED_ROLLUP_PROPERTY_TYPES.includes(e.type)}renderComponent(){const{device:e}=this[ee],{[J]:t}=this[ve],o=this[he]();if(!o)return;const i=Boolean(o[le][ne]),s=Boolean(o[le][ne]&&o[le][de]);if(t===Te.BlockPropertyOverlay){let t;return t=e[q]?{menuType:v.og.Modal,[ie]:o[le].name,[j]:r()(w.DoneMenuText,{}),onClickRight:this[ve].onDismiss}:{menuType:v.og.Popup},l[$](C.Z,t,r()(M.Z,{type:M.i.Vertical,initialFocus:void 0,sections:a.compact([this.renderRelationSection(),this.renderTargetPropertySection(i),this.renderAggregationSection(s)])}))}return l[$](l.Fragment,null,r()(b.ZP,{popupType:e[q]?I.kQ[K]:I.kQ.Popup,alignmentToOrigin:b.vR.End,renderOrigin:e=>l[$](S.Z,n()({[ie]:r()(p.FormattedMessage,{[pe]:"Relation",id:"database.viewSettings.rollupOptions.relationProperty"}),[z]:this[ve][z],showChevron:!0,rotateChevron:this[Q][Se][U].open,[j]:o[W]?r()(A.Z,{[le]:o[W],showIcon:!0}):r()(p.FormattedMessage,{id:"database.viewSettings.rollupOptions.selectRelation",[pe]:"Select"})},e)),[Y]:this.renderRelationSelect,[_]:this[Q][Se]}),r()(x.Z,{[E]:this[ge],disableTooltip:i,[Y]:t=>r()(b.ZP,{popupType:e[q]?I.kQ[K]:I.kQ.Popup,alignmentToOrigin:b.vR.End,renderOrigin:e=>l[$](S.Z,n()({[ie]:r()("span",{style:{...!s&&{color:this[B][V]}}},void 0,r()(p.FormattedMessage,{[pe]:"Property",id:"database.viewSettings.rollupOptions.targetProperty"})),[z]:!i||this[ve][z],showChevron:!0,rotateChevron:this[Q][ke][U].open,[j]:i&&(o[G]?r()(A.Z,{[le]:o[G],showIcon:!0}):r()(p.FormattedMessage,{id:"database.viewSettings.rollupOptions.selectTargetProperty",[pe]:"Select"}))},(0,Z.Z)(t,e))),[Y]:this[ue],[_]:this[Q][ke]})}),r()(x.Z,{[E]:this.renderAggregationTooltip,disableTooltip:s,[Y]:t=>r()(b.ZP,{popupType:e[q]?I.kQ[K]:I.kQ.Popup,alignmentToOrigin:b.vR.End,renderOrigin:e=>l[$](S.Z,n()({[z]:!s||this[ve][z],[ie]:r()("span",{style:{...!s&&{color:this[B][V]}}},void 0,r()(p.FormattedMessage,{[pe]:"Calculate",id:"database.viewSettings.rollupOptions.calculate"})),showChevron:!0,rotateChevron:this[Q][Pe][U].open,[j]:s&&this.renderCurrentAggregation()},(0,Z.Z)(t,e))),[Y]:this.renderAggregationSelect,[_]:this[Q][Pe]})}))}renderRelationSection(){const{device:e}=this[ee],{[z]:t}=this[ve],o=this[he]();if(o)return{key:0,[Y]:e=>l[$](R.Z,n()({},e,{[ie]:r()(p.FormattedMessage,{id:"database.rollupProperty.editRelation.title",[pe]:"Relation"}),isTitleUppercase:!0})),items:[{key:0,[Y]:i=>r()(b.ZP,{popupType:e[q]?I.kQ[K]:I.kQ.Popup,renderOrigin:e=>o[W]?l[$](F.Z,n()({},(0,Z.Z)(i,e),{[le]:o[W],format:F.L.Name,[j]:this[N](t),[z]:t})):l[$](T.Z,n()({},(0,Z.Z)(i,e),{[ie]:r()(p.FormattedMessage,{id:"database.rollupProperty.editRelation.buttonTitle",[pe]:"Select an existing relation…"}),[j]:this[N](t),style:{color:this[B][V]},[z]:t})),[Y]:this.renderRelationSelect,[_]:this[Q][Se]},i.key),action:()=>{this[Q][Se].setState({open:!0})}}]}}renderTargetPropertySection(e){const{device:t}=this[ee],{[z]:o}=this[ve],i=this[he]();if(i)return{key:1,[Y]:e=>l[$](R.Z,n()({},e,{[ie]:r()(p.FormattedMessage,{id:"database.rollupProperty.editProperty.title",[pe]:"Property"}),topBorder:!0,isTitleUppercase:!0})),items:[{key:0,[Y]:s=>r()(x.Z,{[E]:this[ge],disableTooltip:e,[Y]:a=>r()(b.ZP,{popupType:t[q]?I.kQ[K]:I.kQ.Popup,renderOrigin:t=>i[G]?l[$](F.Z,n()({},(0,Z.Z)(s,t),{[le]:i[G],format:F.L.Name,[j]:this[N](o),[z]:o})):l[$](T.Z,n()({},(0,Z.Z)(s,a),{[ie]:r()(p.FormattedMessage,{id:"database.rollupProperty.editProperty.buttonTitle",[pe]:"Select a property to display…"}),[j]:this[N](!e||o),[z]:!e||o,disabledFeedback:!0})),[Y]:this[ue],[_]:this[Q][ke]})},s.key),action:()=>{this[Q][ke].setState({open:!0})}}]}}renderAggregationSection(e){const{device:t}=this[ee],{[z]:o}=this[ve];if(this[he]())return{key:2,[Y]:e=>l[$](R.Z,n()({},e,{[ie]:r()(p.FormattedMessage,{id:"database.rollupProperty.editAggregate.title",[pe]:"Calculate"}),topBorder:!0,isTitleUppercase:!0})),items:[{key:0,[Y]:i=>r()(x.Z,{[E]:this.renderAggregationTooltip,disableTooltip:e,[Y]:s=>e?r()(b.ZP,{popupType:t[q]?I.kQ[K]:I.kQ.Popup,renderOrigin:e=>l[$](T.Z,n()({},(0,Z.Z)(i,e),{[ie]:this.renderCurrentAggregation(),[j]:this[N](o),[z]:o})),[Y]:this.renderAggregationSelect,[_]:this[Q][Pe]}):l[$](T.Z,n()({},(0,Z.Z)(i,s),{[ie]:r()(p.FormattedMessage,{id:ae,[pe]:"Show original"}),[j]:this[N](o),[z]:!0,disabledFeedback:!0}))},i.key),action:()=>{this[Q][Pe].setState({open:!0})}}]}}renderCurrentAggregation(){const e=this[he]();if(e)return e[le][te]?y.VN[(0,c.gu)(e[le][te])]:r()(p.FormattedMessage,{id:ae,[pe]:"Show original"})}[N](e){return e?void 0:u.Z.chevronDown({width:11,fill:this[B].mediumIconColor})}[he](){const{[Ze]:e,property:t,parentStore:o}=this[ve],i=e[t];if(!i)return;let n,s;if(i[ne]){const t=e[i[ne]];t&&"relation"===t.type&&(n=t)}if(n){const e=h[L](n);if(e){s=k.NW.createChildStore(o,e).getValue()}}const r=s?h.getNormalizedSchema(s):{};let a;return s&&i[de]&&(a=r[i[de]]),{[le]:i,[W]:n,relatedCollectionValue:s,[ce]:r,[G]:a}}}be.displayName="RollupPropertyMenu",be.contextTypes={...d.w,...m.xm};const Ce=be},9050:(e,t,o)=>{o.d(t,{Z:()=>y});var i=o(77094),n=o.n(i),s=o(97464),r=o.n(s),a=o(67294),l=o(83355),d=o(8848),c=o(80025),h=o(87279),u=o(52275);const p=o(85).wgE,g=o(85).dLQ;class m extends l.Z{renderComponent(){return a.createElement(u.Z,r()({},this.props,{icon:this.renderColorTile(),title:(0,c.Vn)(this.props.color)}))}renderColorTile(){const e=(0,d.KR)(this.theme,this.props.color);return n()("div",{style:{width:this[p].device[g]?24:18,height:this[p].device[g]?24:18,background:e.menuBackgroundColor,color:e.textColor,boxShadow:this.theme.innerBorderBoxShadow,borderRadius:3}})}}m.displayName="SelectColorMenuItem",m.contextTypes={...h.mw,...l.w};const y=m},73456:(e,t,o)=>{o.d(t,{Z:()=>Ye});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(96486),l=o.n(a),d=o(67294),c=o(83355),h=o(99036),u=o(8848),p=o(84619),g=o(3909),m=o(6287),y=o(82990),f=o(5366),v=o(50906),Z=o(47307),P=o(66890),k=o(75079),S=o(87279),T=o(33846),b=o(13709),C=o(97180),M=o(93405),w=o(68894),I=o(78140),R=o(32163),x=o(40721),A=o(44532),D=o(72495),F=o(9050),O=o(22084);const L=o(85)._lc,N=o(85).oiJ,E=o(85).Wp_,G=o(85).Nwz,B=o(85).v8g,V=o(85).e7B,_=o(85).GOX,Y=o(85).zDZ,W=o(85).ChN,Q=o(85).zTR,U=(o(85).tyd,o(85).PPM),z=o(85).mYq,K=o(85).P24,$=o(85).Mt_,j=o(85).iIv,q=o(85).AM1,H=o(85).JrN,J=o(85).Kiu,X=o(85).$8_,ee=o(85).Cpo,te=o(85).mFu,oe=o(85).aW,ie=o(85).SPm,ne=o(85).irb,se=o(85).kJi,re=o(85).ffk,ae=o(85).P3s,le=o(85).N20,de=o(85).j7K,ce=o(85).y79,he=o(85).LKh,ue=o(85).QmD,pe=o(85).loK,ge=o(85).$Wu,me=o(85).iVN,ye=o(85).ceT,fe=o(85).dLQ,ve=o(85).eWV,Ze=o(85).UA5,Pe=o(85).Dd5,ke=o(85).KOz,Se=o(85).gWL,Te=o(85).PXg,be=o(85).ONo,Ce=o(85).Lfz,Me=o(85).MWD,we=o(85).UD6,Ie=o(85).Zij,Re=o(85).nx5,xe=o(85).rG,Ae=o(85).k$k,De=o(85).D7I,Fe=o(85).rpY,Oe=o(85).X5t,Le=o(85).Gnd,Ne=o(85).P0R,Ee=o(85).OBh,Ge=o(85).Q1_,Be=o(85).wgE,Ve=o(85).zTc;class _e extends c.Z{constructor(){super(...arguments),this.storeTypes={[Ve]:T.Z},this.renderPopup=()=>{const{device:e}=this[Be],{[Ge]:t,statusGroup:o,[Ee]:i}=this[Ne],{[Ve]:s}=this[Le],a={key:Oe,[Fe]:e=>d[De](D.Z,e),items:[]};a.items[Ae]({key:xe,[Fe]:e=>d[De](M.Z,n()({},e,{[Ie]:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteLabel",[Re]:"Delete"}),svg:g.Z.trash})),[Oe]:this[we]}),o&&"status"===i[Me]&&(a.items[Ae]({key:"setAsDefault",[Fe]:e=>d[De](M.Z,n()({},e,{[Ie]:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.setAsDefault",[Re]:"Set as default"}),svg:g.Z.flag})),[Oe]:this.handleSetAsDefault}),a.items[Ae]({key:"Group",[Fe]:e=>d[De]("div",e,d[De](b.Z,n()({},e,{[Ie]:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.Group",[Re]:"Group"}),[Se]:o[Ce],[ke]:(i[be]??[]).map((e=>({key:e[Ce],[Ie]:C.ZA[e[Ce]]??e[Ce]}))),icon:e=>g.Z.checkboxSquareChecked({...e,width:16,[Te]:0}),[Pe]:e=>{this.handleChangeGroup(e)}}))),[Oe]:()=>{}}));const l=u.AP.map((e=>({key:e,[Fe]:o=>d[De](F.Z,n()({},o,{[Ze]:e,checkState:t[Ze]===e})),[Oe]:()=>{this[ve](e)}}))),c={key:Ze,[Fe]:e=>d[De](D.Z,n()({},e,{[Ie]:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.colorsSection",[Re]:"Colors"}),isTitleUppercase:!0,topBorder:!0})),items:l};let h;return h=e[fe]?{[ye]:S.og.Modal,[Ie]:r()(O.a,{format:p.l.Large,value:t.value,[Ze]:t[Ze],showRemoveButton:!1,isSingle:!0}),right:r()(x.DoneMenuText,{}),[me]:this[ge]}:{[ye]:S.og.Popup,width:220},d[De](I.Z,h,r()(D.Z,{isInput:!0},void 0,r()(w.ZP,{focus:!e[fe]||void 0,selectAll:!e[fe],value:s[ue][pe],[Pe]:this[he],onSubmit:this[ge],rightMobileEditLabel:r()(f.FormattedMessage,{[Re]:"Rename",id:"database.editProperty.select.mobileLabel"})})),r()(R.Z,{[Me]:R.i[ce],disableKeyboard:!0,[de]:void 0,sections:[a,c]}))},this[we]=()=>{const{[Ge]:e,[le]:t,[Pe]:o,[ae]:i,statusGroup:n,[Ee]:s,[re]:a}=this[Ne];"status"!==s[Me]||e.value!==s[se]?Z.showDialog({showCancel:!0,keepFocus:!1,[ie]:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",[Re]:"Are you sure you want to remove this option?"}),items:[{label:r()(f.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",[Re]:"Remove"}),[Ze]:"red",onAccept:()=>{if(!h[oe](s)&&"status"!==s[Me])return;const r={table:m.v,id:t},l=[],d={[te]:r,[ee]:X,path:[J,a,ke],args:{remove:{id:e.id}}};if(l[Ae](d),n&&"status"===s[Me]){const t=(s[be]??[])[H]((e=>e.id===n.id)),o={[te]:r,[ee]:"listRemove",path:[J,a,be,t,q],args:{id:e.id}};l[Ae](o)}o(l),this[Ne][j](),v[$](this[Be],{...(0,k.getCollectionAnalyticsContext)(this.context[K]),[z]:s[Me],[Oe]:"select_delete_option",from:i})}}]}):Z[ne](r()(f.FormattedMessage,{[Re]:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"}))},this.handleSetAsDefault=async()=>{const{[le]:e,[re]:t,[Ee]:o,[Pe]:i,statusGroup:n,[ae]:s,[Ge]:a}=this[Ne];if("status"!==o[Me]||!n)return;if(a.value===o[se])return;if(!(await Z[U]({[ie]:r()("span",{},void 0,r()(f.FormattedMessage,{[Re]:"Change default to <b>{defaultValue}</b>?",id:"database.editProperty.setAsDefault.confirm.title",values:{[Q]:a.value,b:e=>r()("span",{style:{[W]:y.Z[W].semibold}},void 0,e)}})),[Y]:r()("span",{},void 0,r()(f.FormattedMessage,{[Re]:"New pages will start with {defaultValue} as the default status. Existing pages <b>without a status set</b> will switch to {defaultValue}.",id:"database.editProperty.setAsDefault.confirm.description",values:{[Q]:a.value,b:e=>r()("span",{style:{[W]:y.Z[W].semibold}},void 0,e)}})),[_]:r()(f.FormattedMessage,{[Re]:"Continue",id:"database.editProperty.setAsDefault.confirm.continueButton"})})))return;const l={table:m.v,id:e},d=[],c={[te]:l,[ee]:V,path:[J,t],args:{[se]:a.value}};d[Ae](c),i(d),this[Ne][j](),v[$](this[Be],{[z]:o[Me],[Oe]:"status_set_default",from:s,[B]:e})},this.handleChangeGroup=e=>{const{[le]:t,[Ge]:o,[re]:i,[Pe]:n,statusGroup:s,[ae]:r,[Ee]:a}=this[Ne];if("status"!==a[Me]||!s)return;const l={table:m.v,id:t},d=[],c=a[be]??[],h=c[H]((e=>e.id===s.id)),u=c[H]((t=>t[Ce]===e));if(h===u)return;const p={[te]:l,[ee]:"listRemove",path:[J,i,be,h,q],args:{id:o.id}},g={[te]:l,[ee]:G,path:[J,i,be,u,q],args:{id:o.id}};d[Ae](p,g);const y=a[ke]??[],f=c.flatMap((e=>{const t=e[q]??[];return y.filter((e=>t.includes(e.id)))})),Z={[te]:l,[ee]:"set",path:[J,i,ke],args:f};d[Ae](Z),n(d),v[$](this[Be],{[z]:a[Me],[Oe]:"status_set_default",from:r,[B]:t})},this[he]=e=>{const{[Ve]:t}=this[Le],o=e.target.value.replace(/,/g,"");t[E]({...t[ue],[pe]:o}),t.emit()},this[ge]=()=>{this[Ne][j](),this.performRename()},this[ve]=e=>{const{[Ge]:t,[le]:o,[re]:i,[Ee]:n,[Pe]:s,[ae]:r}=this[Ne],a={...t,[Ze]:e};s([{[te]:{table:m.v,id:o},[ee]:N,path:[J,i,ke],args:{value:a}}]),v[$](this[Be],{[z]:n[Me],[Oe]:"select_change_color",from:r,[B]:o})}}willMount(e){super.willMount(e),this[Le][Ve][E]({...this[Le][Ve][ue],[pe]:e[Ge].value})}renderComponent(){const{origin:e,open:t,alignmentToOrigin:o}=this[Ne],{device:i}=this[Be];return r()(A.ZP,{popupType:i[fe]?A.ZP[L].SlideUp:A.ZP[L].Popup,open:t,onDismiss:this[ge],origin:e,[Fe]:this.renderPopup,alignmentToOrigin:o})}performRename(){const{[le]:e,[Ee]:t,[re]:o,[Pe]:i,[Ge]:n}=this[Ne],{[Ve]:s}=this[Le],a=s[ue][pe],d=t[ke]||[],c=d.find((e=>e.id!==n.id&&e.value.trim().toLowerCase()===a.trim().toLowerCase()));if(n.value!==a)if(a)if(c)Z[ne](r()(f.FormattedMessage,{[Re]:"This select option already exists.",id:"database.editProperty.errorDialog.duplicateSelectValue.message"}));else{const s=d.find((e=>e.id===n.id));if(!s)return;const r={...s,value:a},c={[te]:{table:m.v,id:e},[ee]:N,path:[J,o,ke],args:{value:r}},h="status"===t[Me]&&n.value===t[se]?{[te]:{table:m.v,id:e},[ee]:V,path:[J,o],args:{[se]:a}}:void 0;i(l().compact([c,h]))}else Z[ne](r()(f.FormattedMessage,{[Re]:"Please type a value.",id:"database.editProperty.errorDialog.missingSelectValue.message"}))}}_e.displayName="SelectOptionActionMenu",_e.contextTypes={...c.w,...P.xm};const Ye=_e},97680:(e,t,o)=>{o.d(t,{Z:()=>k});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(67294),l=o(83355),d=o(66897),c=o(97880),h=o(33929),u=o(87279),p=o(98742),g=o(52275),m=o(58032),y=o(70301),f=o(45653);const v=o(85).D7I,Z=o(85).nfT;class P extends l.Z{renderComponent(){const{actor:e,userTitle:t,useEmailAsTooltip:o,tooltip:i,tooltipPlacement:s}=this.props,l=h.default.getIntl(),u=e[Z]&&e.isUser()?e.email:void 0,P=o&&u?u:i,k=this.environment.device.isMobile?24:20;let S;return(0,d.YU)(e)?S=r()(y.Z,{botValue:null==e?void 0:e[Z],size:k}):(0,d.$S)(e)?S=r()(f.Z,{userValue:null==e?void 0:e[Z],size:k}):(0,d.Iq)(e)?S=r()(f.Z,{userValue:void 0,size:k}):(0,c.unreachable)(e),r()(m.Z,{placement:s??m.Z.Placement.Bottom,alignment:m.Z.Alignment.Start,textWrap:!0,render:o=>a[v](g.Z,n()({},(0,p.Z)(o,this.props),{icon:S,title:t??(0,d.$4)(l,e),className:"notranslate"})),disableTooltip:!P,renderTooltip:()=>P})}}P.displayName="UserMenuItem",P.contextTypes={...u.mw,...l.w};const k=P},96525:(e,t,o)=>{o.d(t,{Z:()=>b});var i=o(97464),n=o.n(i),s=o(96486),r=o.n(s),a=o(67294),l=o(83355),d=o(39500),c=o(25464),h=o(61766),u=o(44532);const p=o(85).NF1,g=o(85).iIv,m=o(85).Wp_,y=o(85).PG2,f=o(85).DIE,v=o(85).Gnd,Z=o(85).GjR,P=o(85).rSD,k=o(85).P0R,S=o(85).LtW;class T extends l.Z{constructor(){super(...arguments),this.storeTypes={[S]:h.Z},this.renderPopup=()=>this[k].render({close:this[P]}),this[Z]=e=>{const{[S]:t}=this[v];this[k].stopClickPropagation&&(null==e||e[f]()),e&&d.mouseDidDrag(e)||(this[k][y]&&this[k][y](e),this[k].disablePopup||t[m]({...t.state,open:!0}))},this[P]=()=>{this[k][g]&&this[k][g](),this[k].persistOnClose||this[v][S].reset()}}willUnmount(){this[v][S][m]({open:!1})}renderComponent(){const{[S]:e}=this[v],t={...this[k],[y]:this[k].disabled?r().identity:this[Z]};return a.createElement(u.ZP,n()({},this[k],{forceInitialInbound:Boolean(this[k].forceInitialInbound),render:this.renderPopup,open:e.state.open,onDismiss:this[P],origin:this[k].renderOrigin(t),originGap:this[k].originGap,[p]:this[k][p],popupWrapStyle:this[k].popupWrapStyle}))}}T.displayName="ButtonPopupMenuItem",T.Alignment=c.v,T.Placement=c.u,T.PopupType=u.kQ;const b=T},72589:(e,t,o)=>{o.d(t,{Z:()=>W});var i=o(97464),n=o.n(i),s=o(77094),r=o.n(s),a=o(67294),l=o(480),d=o(81954),c=o(24405),h=o(35011),u=o(84116),p=o(3909),g=o(55384),m=o(74446),y=o(68626),f=o(5366),v=o(62134),Z=o(33929),P=o(87279),k=o(33665),S=o(79315),T=o(42922),b=o(73063),C=o(3386),M=o(78140),w=o(58032),I=o(28405);const R=o(85).Cpo,x=o(85).nx5,A=o(85).Joh,D=o(85).D7I,F=o(85).ESK,O=o(85).Yzm,L=o(85).S6b,N=o(85).di,E=o(85).voC,G=o(85).CwG,B=o(85).qUc,V=o(85).oWD,_=o(85).OBh,Y=o(85).pkR;function W(e){var t,o,i;window.__c={n:"CollectionFormulaEditor"};const{property:n,[Y]:s,formulas:l,getRecordValue:c,[_]:p,[V]:f,handleCodeChange:v,onClickClose:Z}=e,[k,T]=(0,a.useState)(null==p||null===(t=p[B])||void 0===t?void 0:t.result_type),[b,w]=(0,a.useState)(null==p||null===(o=p[B])||void 0===o?void 0:o.code),[R,x]=(0,a.useState)(!1),A=(0,a.useRef)(b),D=(0,a.useRef)(k),F=(0,a.useCallback)((e=>{w(e),x(!0),A.current=e}),[]),O=(0,a.useCallback)((e=>{T(e),D.current=e}),[]);(0,a.useEffect)((()=>()=>{const e=A.current,t=D.current;v({newValue:e,newType:(0,h.x9)(t??{type:"unknown"}),[_]:p,[V]:f,property:n})}),[]);const L=(0,d.VK)((()=>f.pointer),[f.pointer]),W=(0,a.useMemo)((()=>{const e={type:"block",collection:L};return{kind:u.yp.ThisRow,type:e}}),[L]),U=(0,a.useMemo)((()=>{const e=m.zF[G](c);return{sourceProperty:n,valueTypes:[W],handleDataRequest:l.createFormulaDataRequestHandler(c,e)}}),[l,c,n,W]),z=(0,d.VK)((()=>{if("v2"!==p.version&&p.formula)return l.convertCollectionFormulaToFormula2(p.formula,L,f.getSchema())}),[L,f,l,p.formula,p.version]);(0,a.useEffect)((()=>{!async function(){if(!z)return;const e=await l.analyzeFormula(z,U);let t;t=y.x.isFail(e)?{type:"unknown"}:e.value.type??{type:"unknown"},F(z),O(t)}()}),[f,l,v,F,O,n,p,z,U]);const K=(0,a.useMemo)((()=>{var e;return"v2"===p.version?null===(e=p[B])||void 0===e?void 0:e.code:z}),[null===(i=p[B])||void 0===i?void 0:i.code,p.version,z]),$=(0,d.VK)((()=>{var e;return null===(e=S.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return U&&$?r()(M.Z,{menuType:P.og.Popup,maxHeight:"50vh",width:720,height:380,disableHeaderBorder:!0,disableScroller:!0},void 0,r()(C.Z,{capture:!0,onCommandS:Z},void 0,r()(I.Z,{inputHeader:r()(Q,{onClickClose:Z,enableDone:R}),formulas:l,[E]:g.om[G](c),focus:!0,[Y]:s,value:K??[],onChange:F,[N]:$,typecheckContext:U,handleTypeChange:O,handleSaveOnEsc:Z,parentCollection:f,evaluationErrors:[]}))):null}const Q=a.memo((e=>{let{onClickClose:t,enableDone:o}=e;window.__c={n:"FormulaInputHeader"};const i=(0,l.O7)(),s=(0,c.yK)((e=>({headerRow:{display:"flex",color:e.mediumTextColor,flexDirection:"row",padding:"8px 2px 0 12px",position:"sticky",top:0,left:0,flexWrap:"wrap"},headerLeft:{flexGrow:1,fontSize:14,display:"inline-flex",alignItems:"center"},helpButton:{marginLeft:2,height:20,width:20},buttonDone:{alignSelf:"right",marginRight:4,height:24,padding:"0 8px"},commandText:{color:e[L]}})),[]);return r()("span",{style:s.headerRow},void 0,r()("span",{style:s.headerLeft},void 0,Z.default[O](U.formulaHeader),r()(w.Z,{placement:w.Z[F].Top,render:e=>a[D](b.Z,n()({},e,{ariaLabel:Z.default[O](U.learnTooltip),icon:p.Z.help,href:(0,k.getLocalizedUrl)("guides.formulas"),external:!0,style:s.helpButton})),[A]:()=>Z.default[O](U.learnTooltip)})),r()(w.Z,{[A]:()=>r()("div",{},void 0,r()("span",{},void 0,r()(f.FormattedMessage,{[x]:"Accept",id:"database.formula.acceptFormulaInput.tooltip"}))," ",r()("span",{style:s.commandText},void 0,v.getShortcutTextItems(i)[R],"+S")),render:e=>a[D](T.Z,n()({onClick:t,[Y]:!o,style:s.buttonDone},e),Z.default[O](U.done))}))})),U=(0,f.defineMessages)({formulaHeader:{id:"formula2Input.NotionFormula",[x]:"Notion Formula"},done:{id:"formula2Input.done",[x]:"Done"},learnTooltip:{id:"formula2Input.learnAboutFormulas",[x]:"Learn about formulas!"}})},5385:(e,t,o)=>{o.d(t,{x:()=>s});var i=o(79315);const n=o(85).Ubh;function s(){var e,t,o;return null===(e=i.default.state)||void 0===e||null===(t=e[n])||void 0===t||null===(o=t.getSettings())||void 0===o?void 0:o.icon_picker_color}},12205:(e,t,o)=>{o.d(t,{J:()=>s});var i=o(81954),n=o(79315);function s(){const{currentSpaceStore:e}=(0,i.Kw)(n.default);return(0,i.VK)((()=>(null==e?void 0:e.canAdmin())??!1),[e])}},4391:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(49085);class n extends i.default{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const s=n},11843:(e,t,o)=>{o.d(t,{S:()=>l,E:()=>d});const i=o(85).CTd,n=o(85).GRp,s=o(85).df9,r=o(85).OEO,a={"de-DE":{time:{[r]:"LT",[s]:n},month:i},"da-DK":{time:{[r]:"LT",[s]:n},month:i},"fi-FI":{time:{[r]:"LT",[s]:n},month:i},"nb-NO":{time:{[r]:"LT",[s]:n},month:i},"nl-NL":{time:{[r]:"LT",[s]:n},month:i},"sv-SE":{time:{[r]:"LT",[s]:n},month:i},"en-US":{time:{[r]:"LT",[s]:n},month:i},"es-ES":{time:{[r]:"LT",[s]:n},month:i},"es-LA":{time:{[r]:"LT",[s]:n},month:i},"fr-FR":{time:{[r]:"LT",[s]:n},month:i},"pt-BR":{time:{[r]:"LT",[s]:n},month:i},"ko-KR":{time:{[r]:"LT",[s]:n},month:"YYYY[년] MMMM"},"zh-CN":{time:{[r]:"LT",[s]:n},month:"YYYY[年]MMM"},"zh-TW":{time:{[r]:"LT",[s]:n},month:"YYYY[年]MMM"},"ja-JP":{time:{[r]:"A h:mm",[s]:n},month:"YYYY[年]MMM"},pseudo:{time:{[r]:"A h:mm",[s]:n},month:i}},l=["de-DE","fr-FR"],d=e=>a[e]}}]);