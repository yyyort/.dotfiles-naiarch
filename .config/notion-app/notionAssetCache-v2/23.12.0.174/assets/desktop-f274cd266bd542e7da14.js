"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9380],{81346:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var o=n(97464),i=n.n(o),s=n(77094),r=n.n(s),c=n(67294),a=n(83355),l=n(1302),d=n(32739),p=n(70203),m=n(5366),u=n(84908),y=n(98104),g=n(95477),k=n(87279),h=n(68056),f=n(80935),b=n(758),I=n(81212),N=n(45214),C=n(24666),M=n(93405),S=n(52275),q=n(1743),x=n(78140),v=n(32163),J=n(44532),T=n(72495);const E=n(85).BaF,Z=n(85).Rs2,_=n(85).QvG,F=n(85).Vm,L=n(85).CLE,w=n(85).j_T,P=n(85).nx5,U=n(85).D7I,A=n(85).k$k,D=n(85).rpY,R=n(85).j7K,j=n(85).y79,B=n(85).TtP,W=n(85).X5t,V=n(85).Cki,G=n(85).wgE,z=n(85).ra3,K=n(85).Sjp,Y=n(85).Wp_,H=n(85).p2z,O=n(85).FcT,Q=n(85).Q0u,$=n(85).XQm,X=n(85).$Yu,ee=n(85).YGn,te=n(85).I7D;class ne extends a.Z{constructor(){super(...arguments),this[te]=(e,t)=>{if(e[ee](),t[X]){const e=C.default.state,n="editing"===e.mode&&(0,h.QY)(e[$]);if(n&&n[O][Q]===n[O].endIndex){const e=p.findAll(n.store.getValue()||[],t[X]),o=n[O][Q],i=p.findClosestSelection(e,o);i&&y[H]({store:n.store,[O]:i})}}N.Z[Y]({open:!0,menuInfo:t})},this[K]=()=>{N.Z[Y]({...N.Z.state,open:!1})}}willMount(){u[z]&&u[z].contextMenu&&u[z].contextMenu.addListener(this[te])}willUnmount(){u[z]&&u[z].contextMenu&&u[z].contextMenu.removeListener(this[te])}renderComponent(){const{menuInfo:e,open:t}=N.Z.state,{device:n}=this[G],{x:o,y:i}=this.getClickPosition(e),s=new DOMRect(o,i,0,0),c=e?this.getMenuSections(e):[],a=document.activeElement,d=f.get();let p=null,m=null;(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)&&(p=a[V],m=a.selectionEnd);for(const r of c)for(const e of r.items){const t=e[W];e[W]=e=>{a.focus(),a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?(a[V]=p,a.selectionEnd=m):d&&f.set(d,n),l.default.afterNextFlush((()=>{t(e)}))}}return r()(J.ZP,{open:t&&c[B]>0,popupType:J.ZP.PopupType.Popup,originRect:s,[D]:()=>r()(q.Z,{capture:!0,allowEsc:!0},void 0,r()(x.Z,{menuType:k.og.Popup},void 0,r()(v.Z,{type:v.i[j],sections:c,[R]:void 0,onAccept:this[K]}))),onDismiss:this[K],overlayContainerStore:I.Z})}getClickPosition(e){const t=u.getCurrentZoom();return{x:e?e.x/t:0,y:e?e.y/t:0}}getMenuSections(e){const t=[],n=this.getSpellingCorrectionItems(e);if(n[B]>0){const e=t[B]>0;t[A]({key:"spellingCorrectionItems",items:n,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const o=this.getDisableSpellCheckItems(e);if(o[B]>0){const e=t[B]>0;t[A]({key:"disableSpellCheckItems",items:o,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const s=this.getSearchItems(e);if(s[B]>0){const e=t[B]>0;t[A]({key:"searchItems",items:s,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const r=this.getLinkMenuItems(e);if(r[B]>0){const e=t[B]>0;t[A]({key:"linkMenuItems",items:r,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const a=this.getImageMenuItems(e);if(a[B]>0){const e=t[B]>0;t[A]({key:"imageMenuItems",items:a,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const l=this.getTextEditingItems(e);if(l[B]>0){const e=t[B]>0;t[A]({key:"textEditingItems",items:l,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}const d=this.getEnableSpellCheckItem(e);if(d[B]>0){const e=t[B]>0;t[A]({key:"enableSpellCheckItems",items:d,[D]:t=>c[U](T.Z,i()({},t,{topBorder:e}))})}return t}getLinkMenuItems(e){const t=[];return e.linkURL&&e.linkURL[B]>0&&(e.linkURL.startsWith("mailto:")?t[A]({key:"copy-email",[W]:()=>{u[z]&&u[z].copyText&&u[z]&&u[z].copyText(e.linkText)},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Copy email address",id:"desktop.rightClickMenu.copyEmailAddress"})}))}):t[A]({key:"copy-link",[W]:()=>{u[z]&&u[z].copyText&&u[z]&&u[z].copyText(d.b({url:e.linkURL,[w]:g.default[w],[L]:g.default[L]}))},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Copy link",id:"desktop.rightClickMenu.copyLink"})}))}),t[A]({key:"open-link",[W]:()=>{u[z]&&u[z][F](d.b({url:e.linkURL,[w]:g.default[w],[L]:g.default[L]}))},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Open link in browser",id:"desktop.rightClickMenu.openLinkInBrowser"})}))})),t}getImageMenuItems(e){const t=[];return e.hasImageContents&&e.srcURL&&e.srcURL[B]>0&&(t[A]({key:"copy-image",[W]:()=>{u[z]&&u[z].copyImage&&u[z].copyImage(e.srcURL)},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Copy image",id:"desktop.rightClickMenu.copyImage"})}))}),t[A]({key:"copy-image-address",[W]:()=>{u[z]&&u[z].copyText&&u[z].copyText(e.srcURL)},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Copy image address",id:"desktop.rightClickMenu.copyImageAddress"})}))})),t}[_](e){return e.isEditable||e.inputFieldType&&"none"!==e.inputFieldType}hasMisspelling(e){return this[_](e)&&e[X]&&e[X][B]>0}getSpellingCorrectionItems(e){const t="SpellCheckStore"in this[G]&&this[G][Z],n=[];if(this.hasMisspelling(e)&&t&&t[E]()){const o=t.getCorrections(e);for(const e of o)n[A]({key:e,[W]:()=>{u[z]&&u[z].replaceMisspelling&&u[z].replaceMisspelling(e)},[D]:t=>c[U](S.Z,i()({},t,{title:e}))})}return n}getDisableSpellCheckItems(e){const t="SpellCheckStore"in this[G]&&this[G][Z],n=[];return this.hasMisspelling(e)&&t&&t[E]()&&!(0,b.x)(t)&&n[A]({key:"learn-spelling",[W]:()=>{t.addToDictionary(e[X])},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Add to dictionary",id:"desktop.spellcheckMenuItem.addToDictionary.title"})}))}),this.hasMisspelling(e)&&t&&t[E]()&&n[A]({key:"disable",[W]:()=>{t.setEnabled(!1)},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Disable spell check",id:"desktop.spellcheckMenuItem.disableSpellcheck.title"})}))}),n}getEnableSpellCheckItem(e){const t="SpellCheckStore"in this[G]&&this[G][Z],n=[];return this[_](e)&&t&&!t[E]()&&n[A]({key:"enable",[W]:()=>{t.setEnabled(!0)},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Enable spell check",id:"desktop.spellcheckMenuItem.enableSpellcheck.title"})}))}),n}getSearchItems(e){const t=[];return e.selectionText&&e.selectionText[B]>0&&t[A]({key:"google",[W]:()=>{if(u[z]){const t=`https://www.google.com/search?q=${encodeURIComponent(e.selectionText.trim())}`;u[z][F](t)}},[D]:e=>c[U](S.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Search with Google",id:"desktop.searchMenuItem.searchWithGoogle.title"})}))}),t}getTextEditingItems(e){const t=[];return this[_](e)&&(e.editFlags.canCut&&t[A]({key:"cut",[W]:()=>{u[z]&&u[z].cut&&u[z].cut()},[D]:e=>c[U](M.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Cut",id:"desktop.textEditingMenuItem.cutAction.title"}),shortcuts:["cut"]}))}),e.editFlags.canCopy&&t[A]({key:"copy",[W]:()=>{u[z]&&u[z].copy&&u[z].copy()},[D]:e=>c[U](M.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Copy",id:"desktop.textEditingMenuItem.copyAction.title"}),shortcuts:["copy"]}))}),e.editFlags.canPaste&&t[A]({key:"paste",[W]:()=>{u[z]&&u[z].paste&&u[z].paste()},[D]:e=>c[U](M.Z,i()({},e,{title:r()(m.FormattedMessage,{[P]:"Paste",id:"desktop.textEditingMenuItem.pasteAction.title"}),shortcuts:["paste"]}))})),t}}ne.displayName="ElectronContextMenu";const oe=ne},45214:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const s=new i},60951:(e,t,n)=>{n.r(t),n.d(t,{Notification:()=>ye});var o=n(96486),i=n.n(o),s=n(40902),r=n(66897),c=n(99036),a=n(38297),l=n(55384),d=n(55061),p=n(21202),m=n(13493),u=n(70279),y=n(19889),g=n(70203),k=n(44805),h=n(64002);const f=n(85).qfz,b=n(85).kx0,I=n(85).nx5,N=n(85).MsQ,C=n(85).jtD,M=n(85).SyH,S=n(85).Syp,q=n(85).NPF,x=n(85).OMc,v=n(85).Xml,J=n(85)._pP,T=n(85).eS7,E=n(85).U7z,Z=n(85).zDZ,_=n(85).kKe,F=n(85).Zai,L=n(85).FkY,w=n(85).voC,P=n(85).z9j,U=n(85).iKV,A=n(85).yn7,D=n(85).Kfr,R=n(85).vWp,j=n(85).G0x,B=n(85).LCc,W=n(85).fbf,V=n(85).Wgn,G=n(85).SFi,z=n(85).YE1,K=n(85).Io9,Y=n(85)._tz,H=n(85).Frp,O=n(85).Wg8,Q=n(85).kEu,$=n(85).cJA,X=n(85).mfe,ee=n(85).OnS,te=n(85).pKs,ne=n(85).oym,oe=n(85).O_,ie=n(85).WM6,se=n(85).JET,re=n(85).Yzm,ce=n(85).uUx,ae=n(85).VyV,le=n(85).CwG,de=n(85).LIR,pe=n(85).Wkb,me=n(85).er9,ue=n(85).nSw;function ye(e){const{activity:t,[ue]:n,[me]:o,[pe]:ye,[de]:ke,intl:he,useSimplifiedEmailSubjectForGrouping:fe}=e,be=l.om[le](n),Ie=(0,d.P6)({...e}),Ne=(0,d.XW)(Ie,he),Ce=(0,d.oP)({...e,intl:he}),Me=(0,d.iR)({...e,intl:he}),Se=(0,d.rn)({...e,intl:he});switch(t.type){case ae:return{[ce]:he[re](d.qJ.topLevelBlockCreated,{userName:Ne,targetName:Ce,spaceName:Se})};case se:return{[ce]:he[re](d.qJ.topLevelBlockDeleted,{userName:Ne,targetName:Ce,spaceName:Se})};case ie:return{[ce]:he[re](d.qJ.collectionRowCreated,{userName:Ne,targetName:Ce,[oe]:Me})};case ne:return{[ce]:he[re](d.qJ.collectionRowDeleted,{userName:Ne,targetName:Ce,[oe]:Me})};case"block-edited":{let r;if(t[te]){const l=t[te][0];if("block-changed"===l.type){const t=l[$][X][ee],p=(0,a.ky)({block:t,[ue]:n});if("page"===t.type&&p){const t=l.block_schema||c[Q](he),o=s.getChangedBlockProperties({before:l[$].before[ee],[X]:l[$][X][ee],schema:t}).filter((e=>{const n=t[e];return n&&"formula"!==n.type})).map((o=>{const i=t[o],s=i?i.name:void 0,r=(0,d.v4)({intl:he,property:o,schema:t,block:l[$][X][ee],[ue]:n,[pe]:e[pe],[me]:e[me]})||he[re](d.qJ[O]);return he[re](d.qJ[H],{[Y]:s,[K]:r})})),a=s[z]({before:l[$].before[ee],[X]:l[$][X][ee]}),p=i().compact(a.map((e=>{const t=(0,d._u)({formatProperty:e,intl:he}),o=(0,d.W9)({formatProperty:e,intl:he,block:l[$][X][ee],[ue]:n});if(t&&o)return he[re](d.qJ[H],{[Y]:t,[K]:o})})));r=he.formatList(o.concat(p),{type:G,style:"narrow"})}else r=(0,d._2)({intl:he,[V]:t,[ue]:n,[me]:o,[pe]:ye})}else if("block-created"===l.type){const e=l[$][ee];r=(0,d._2)({intl:he,[V]:e,[ue]:n,[me]:o,[pe]:ye})}else if("block-deleted"===l.type){const e=l[$][ee],t=(0,d._2)({intl:he,[V]:e,[ue]:n,[me]:o,[pe]:ye});r=he[re](d.qJ.blockDeletedEditBody,{renderedBlock:t})}}return{[ce]:fe?ge(Ce,he):he[re](d.qJ.blockEditedNotification,{userName:Ne,blockName:Ce}),body:r}}case W:const le={[ce]:fe?ge(Ce,he):he[re](d.qJ.blockPropertyEditedNotification,{userName:Ne,blockName:Ce}),body:void 0};if(t[te]){const o=t[te][0],i=Object.entries(o.property_updates).filter((e=>{let[t,n]=e;const i=o[B][t];return i&&!["formula","created_by","created_time"].includes(i.type)})).map((t=>{let[i,s]=t;const r=o[B][i],c=r?r.name:void 0,a=(0,d.Wy)({intl:he,propertySchema:r,[j]:s[X].value,[ue]:n,[pe]:e[pe],[me]:e[me]})||he[re](d.qJ[O]);return he[re](d.qJ[H],{[Y]:c,[K]:a})}));le.body=he.formatList(i,{type:G,style:"narrow"})}return le;case R:return{[ce]:he[re](d.qJ.userEditedPermissionsFor,{userName:Ne,targetName:Ce}),body:(0,d.gt)({intl:he,activity:t,[ue]:n,[de]:ke,[pe]:e[pe]})};case"user-mentioned":return{[ce]:fe?ge(Ce,he):he[re](d.qJ.userMentionedIn,{userName:Ne,targetName:Ce}),body:(0,d.kU)({intl:he,[ue]:n,[me]:o,[pe]:e[pe],blockId:t.mentioned_block_id,property:t[D]})};case"commented":{let o;if(t[te]){const i=t[te][0];if("comment-created"===i.type){const t=n({table:u.x_,id:i.comment_id,spaceId:i[A]}),s=i[U]||t;s&&(o=`ðŸ’¬ ${k[P]({intl:he,[j]:s.text,[w]:be,[pe]:e[pe]})}`)}else if("comment-changed"===i.type)o=`ðŸ’¬ ${k[P]({intl:he,[j]:i[U][X].text,[w]:be,[pe]:e[pe]})}`;else{const t=n({table:u.x_,id:i.comment_id,spaceId:i[A]}),s=i[U]||t;if(s){const t=k[P]({intl:he,[j]:s.text,[w]:be,[pe]:e[pe]});o=he[re](d.qJ.userDeletedComment,{commentText:t})}}}return{[ce]:fe?ge(Ce,he):he[re](d.qJ.userCommentedSubject,{userName:Ne,targetName:Ce}),body:o}}case"user-invited":const qe=(0,h.removeUrlFromString)(Ce),xe=qe.length>0?qe:he[re](d.qJ.defaultPageName);if(t.permission_group_id)return{[ce]:he[re](d.qJ.userAddedToSpace,{userName:Ne,[L]:xe})};const ve=0===Ie.filter(r.uC).length;return{[ce]:ve?he[re](d.qJ.userInvitedToSpaceByBot,{[L]:xe}):he[re](d.qJ.userInvitedToSpace,{userName:Ne,[L]:xe})};case F:{let e,n=he[re](d.qJ.userEditedCollectionSubject,{userName:Ne,[oe]:Ce});if(t[te]){const o=t[te][0];if("collection-changed"===o.type&&o[_]){const t=o[_][X]?o[_][X][Z]:void 0,i=o[_].before?o[_].before[Z]:void 0;i&&!t?n=he[re](d.qJ.collectionDescriptionDeleted,{userName:Ne,[oe]:Ce}):!i&&t?(n=he[re](d.qJ.collectionDescriptionCreated,{userName:Ne,[oe]:Ce}),e=g[E](t)):i&&t&&s.textValueHasChanged(i,t)&&(e=g[E](t))}else if("collection-created"===o.type&&o[_]){const t=o[_][Z];t&&(n=he[re](d.qJ.userCreatedCollectionSubject,{userName:Ne,[oe]:Ce}),e=g[E](t))}}return{[ce]:n,body:e}}case T:const Je=e[ue]({table:m.n,id:t.collection_view_id,spaceId:t[A]}),Te=Je&&Je.name||he[re](d.qJ.untitledCollectionView);return{[ce]:he[re](d.qJ.collectionViewEditedSubject,{userName:Ne,collectionViewName:Te,[oe]:Ce})};case J:const Ee=t[te]&&t[te][0],Ze=Ee&&("collection-property-changed"===Ee.type?Ee[v][X].name:Ee[v].name)||he[re](d.qJ.collectionPropertyEditedUnknown);return t[x],{[ce]:he[re](d.qJ.collectionPropertyEditedSubject,{userName:Ne,propertyType:Ze,[oe]:Ce})};case"reminder":return{[ce]:he[re](d.qJ.reminderSubject,{[q]:Ce}),body:(0,d.kU)({[ue]:n,[me]:o,[pe]:e[pe],blockId:t.reminder_block_id,property:t.reminder_property,intl:he})};case S:{const e=(0,d.pF)({activity:t,intl:he,userName:Ne,targetName:Ce});return{[ce]:e}}case"page-locked":case"page-unlocked":return{[ce]:"page-locked"===t.type?he[re](d.qJ.pageLockedActivity,{userName:Ne,[q]:Ce}):he[re](d.qJ.pageUnlockedActivity,{userName:Ne,[q]:Ce})};case"email-edited":return{[ce]:he[re](d.qJ.emailEditedActivity,{userName:Ne})};case"access-requested":{const e=t.parent_table===p.iU?he[re](d.qJ.accessRequestedSubject,{userName:Ne,[q]:Ce}):he[re](d.qJ.membershipRequestedSubject,{userName:Ne,[L]:Ce});return{[ce]:e}}case"page-deleted":return{[ce]:he[re](d.qJ.pageDeletedActivity,{userName:Ne})};case"page-restored":return{[ce]:he[re](d.qJ.pageRestoredActivity,{userName:Ne})};case M:return{[ce]:he[re](d.qJ.pagePermanentlyDeletedActivity,{userName:Ne})};case C:return{[ce]:he[re](d.qJ.userInvitedToTeam,{userName:Ne,teamName:Ce})};case N:const _e=t[te]&&t[te][0].from_user_id;if(!_e)return{[ce]:he[re]({[I]:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:Ne,[q]:Ce})};const Fe=n({table:y.KJ,id:_e});return{[ce]:he[re](d.qJ.privateContentTransferred,{author:Ne,[q]:Ce,fromUserName:Fe&&l.kk.fromValue(y.KJ,Fe).getFullName(he)})};case b:const Le=(0,d.Bg)({spaceId:t[A],permissionGroupId:t.mentioned_group_id,[ue]:e[ue]}),we=(0,d.jQ)(he,Le);return{[ce]:fe?ge(Ce,he):he[re](d.qJ.permissionGroupMentionedIn,{userName:Ne,targetName:Ce,groupName:we}),body:(0,d.kU)({intl:he,[ue]:n,[me]:o,[pe]:e[pe],blockId:t.navigable_block_id,property:t[D]})};case f:return{[ce]:he[re](d.qJ.verificationExpired,{[q]:Ce})}}}function ge(e,t){return t[re]({[I]:"New activity in {pageTitle}",id:"emailActivity.pageActivity.simplifiedSubjectLine"},{pageTitle:e})}}}]);