"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7543],{98692:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(77094),s=i.n(n),a=i(67294),r=i(83355),o=i(8848),d=i(5366),l=i(91376),c=i(93678),u=i(62216),g=i(21115),p=i(78291),m=i(64921),f=i(61519),h=i(76844);const v=i(85).g7N,b=i(85).nLZ,y=i(85).BQ6,L=i(85).nx5,w=i(85).xoW,S=i(85).ELX,_=i(85).$XE,k=i(85).wgE,x=i(85).rER,U=i(85).b8T;class A extends r.Z{constructor(){super(...arguments),this[U]=e=>{if(!e)return l[x]();c.y(this[k],{from:"sidebar"===this.props.source?"block_limit_sidebar":"block_limit_settings",for:"plus"})}}renderComponent(){const{data:e}=p.default.state;if(!e)return;const t=g.isAdmin(e);if(0===g.getBlockUsage(this[k],e))return;const i=g.getUsagePercent(this[k],e);return g.approachingBlockLimit(this[k],e)?s()(a.Fragment,{},void 0,this[_]("settings"===this.props.source),s()(m.Z,{[y]:A[S],onClick:()=>this[U](t)},void 0,s()("div",{[y]:A[w]},void 0,s()(d.FormattedMessage,{id:"spaceSettings.sidebar.upgradeLink",[L]:"Upgrade to go unlimited"})),s()("div",{[y]:A.labelStyle},void 0,s()("div",{[y]:this.usageLabelStyle(i)},void 0,g.getUsageDescription(this[k],e)),!(0,u.isEligibleForBlockLimitGracePeriod)()&&s()(h.Z,{[y]:{[b]:12,[v]:12},percent:i}),s()("div",{[y]:A.ctaStyle},void 0,this.renderCtaMessage(t))))):void 0}[_](e){return s()(f.Z,e?{size:27,[y]:{paddingLeft:14,paddingRight:14}}:{size:0})}renderCtaMessage(e){return s()(d.FormattedMessage,e?{id:"spaceSettings.sidebar.button.upgrade",[L]:"Upgrade plan"}:{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",[L]:"Contact a workspace owner"})}usageLabelStyle(e){return e>g.BLOCK_LIMIT_PERCENTAGE_USED_WARNING&&!(0,u.isEligibleForBlockLimitGracePeriod)()?(0,o.x7)("red",this.theme):{}}}A.displayName="BlockLimitUsage",A[S]={padding:14,fontSize:12,lineHeight:1.4},A[w]={fontWeight:500,lineHeight:2},A.labelStyle={fontWeight:400},A.ctaStyle={textDecoration:"underline"};const C=A},76844:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(77094),s=i.n(n),a=i(96486),r=i.n(a);i(67294);const o=i(85).AEP,d=i(85).PP_,l=i(85).Scd,c=i(85).gGi,u=i(85).tLG,g=i(85).vK9,p=i(85).fBv,m=function(e){return e=r().assign({percent:.1},e),s()("div",{style:r().assign({[p]:"relative",[g]:30,height:5,borderRadius:1,overflow:"hidden"},e.style)},void 0,s()("div",{style:{[p]:u,top:0,left:0,height:c,width:c,[l]:d,[o]:.1}}),s()("div",{style:{[p]:u,top:0,left:0,height:c,width:100*e.percent+"%",[g]:2,[l]:d,[o]:.6}}))}},26234:(e,t,i)=>{i.d(t,{Z:()=>Y});var n=i(77094),s=i.n(n),a=i(67294),r=i(480),o=i(81954),d=i(24405),l=i(53877),c=i(3909),u=i(5366),g=i(12359),p=i(93678),m=i(37181),f=i(38755),h=i(80554),v=i(21115),b=i(8323),y=i(70467),L=i(79315),w=i(64921),S=i(61519),_=i(76844);const k=i(85).yzD,x=i(85).lWm,U=i(85).sqO,A=i(85).yPo,C=i(85).Lr5,O=i(85).EN,I=i(85).Und,E=i(85).Hgp,Z=i(85).JJj,D=i(85).g7N,M=(i(85).TVz,i(85).nLZ),N=i(85).gdQ,F=i(85).BQ6,T=i(85).PG2,P=i(85).v8Q,B=i(85).MQR,z=i(85).nx5,W=(i(85).lj,i(85).avi),K=i(85).LKp,R=i(85).qJ8,q=i(85).Ubh,G=i(85).s9u,Q=i(85).gYY;function V(e,t,i){if(i){if("warning"===t){if("settings"===e)return{[O]:!0,[C]:i[C],[A]:i[A],[U]:i[U],[W]:i[W]};if("sidebar"===e)return{[O]:i[O],[C]:!0,[A]:i[A],[U]:i[U],[W]:i[W]}}if("limit_reached"===t){if("settings"===e)return{[O]:i[O],[C]:i[C],[A]:!0,[U]:i[U],[W]:i[W]};if("sidebar"===e)return{[O]:i[O],[C]:i[C],[A]:i[A],[U]:!0,[W]:i[W]}}}return{[O]:"warning"===t&&"settings"===e,[C]:"warning"===t&&"sidebar"===e,[A]:"limit_reached"===t&&"settings"===e,[U]:"limit_reached"===t&&"sidebar"===e,[W]:(0,l.addDaysToDate)({date:Date.now(),daysToAdd:7})}}const H={padding:"4px 14px 8px 14px",fontSize:12,lineHeight:1.4},J={fontWeight:500,lineHeight:2,display:"flex"},j={fontWeight:400},X={textDecoration:"underline"};const Y=function(e){window.__c={n:"AddOnLimitUsage"};const t=(0,h.MQ)(e[Q]),i=(0,y.l)(),n=(0,r.O7)(),Y=(0,d.yK)((e=>({empty:{},[B]:{background:e[x],borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},dismissButton:{display:"flex",flexDirection:"row-reverse",position:"relative",top:10,right:-6},[P]:{background:e[k]},closeIcon:{width:14,fill:e.mediumTextColor}})),[]),{membersCount:$,[G]:ee,settings:te,[q]:ie}=(0,o.VK)((()=>{var e,t;return{membersCount:(0,v.getVisibleMembersCountFromSubscriptionData)(),[G]:L.default.state[R]&&(0,f.rn)(n,L.default.state[R]),settings:null===(e=L.default.state[q])||void 0===e||null===(t=e.getSettings())||void 0===t?void 0:t[K],[q]:L.default.state[q]}}),[n]),ne=(0,o.VK)((()=>i?+i.spaceUsage/i.spaceLimit:0),[i]),{notificationType:se,usageLabelStyles:ae}=(0,o.VK)((()=>({notificationType:ne>=h.Tq?"limit_reached":"warning",usageLabelStyles:Y.empty})),[ne,Y.empty]);if(!ie)return null;if(!t)return null;let re;"settings"===e[Q]&&$>=3&&(null!=te&&te[W]?Date.now()<te[W]&&(re=!0):(!function(e,t){g[Z]({userAction:"addOnLimitNotifications.ai.initializeSettings",environment:e,perform:e=>{m[E]({transaction:e,[I]:t,data:{[K]:{[O]:!1,[C]:!1,[A]:!1,[U]:!1,[W]:(0,l.addDaysToDate)({date:Date.now(),daysToAdd:7})}}})}})}(n,ie),re=!0));const oe=s()(u.FormattedMessage,"limit_reached"===se?{id:"addOnLimitUsage.description.usedAllFreeResponses.admins",[z]:"{spaceName} has used all their free AI responses.",values:{[G]:ee}}:{id:"addOnLimitUsage.description.approachingLimit.admins",[z]:"{spaceName} has used {spaceUsage} of the {usageLimit} free responses provided to this workspace.",values:{[G]:ee,spaceUsage:(null==i?void 0:i.spaceUsage)??0,usageLimit:(null==i?void 0:i.spaceLimit)??0}});return s()(a.Fragment,{},void 0,function(e){if(e)return s()(S.Z,{size:27,[F]:{paddingLeft:14,paddingRight:14}});return s()(S.Z,{size:0})}("settings"===e[Q]),s()(w.Z,{[F]:H,[T]:()=>function(e,t){p.y(e,{from:"sidebar"===t?"ai_limit_sidebar":"ai_limit_settings",for:(0,b.getSubscriptionTier)(),addOnFeature:"ai"})}(n,e[Q])},void 0,!re&&s()("div",{[F]:Y.dismissButton},void 0,s()(w.Z,{[T]:()=>function(e,t,i){var n;const{[q]:s}=L.default.state;if(!s)return;const a={[K]:V(t,i,null===(n=s.getSettings())||void 0===n?void 0:n[K])};g[Z]({userAction:"addOnLimitNotifications.ai.markNotificationAsDismissed",environment:e,perform:e=>{m[E]({transaction:e,[I]:s,data:a})}})}(n,e[Q],se),[F]:Y[B],[N]:Y[P]},void 0,c.Z.closeSmall(Y.closeIcon))),s()("div",{[F]:J},void 0,c.Z.sparkles({height:14,width:14,[M]:4}),s()(u.FormattedMessage,{id:"spaceSettings.sidebar.addOnUpgradeLink",[z]:"Notion AI"})),s()("div",{[F]:j},void 0,s()("div",{[F]:ae},void 0,oe),s()(_.Z,{[F]:{[M]:12,[D]:12},percent:ne}),s()("div",{[F]:X},void 0,s()(u.FormattedMessage,{id:"spaceSettings.sidebar.addOnPurchase.buttonLabel",[z]:"Purchase"})))))}},80554:(e,t,i)=>{i.d(t,{Tq:()=>k,OL:()=>x,MQ:()=>U});var n=i(77094),s=i.n(n),a=i(67294),r=i(480),o=i(81954),d=i(5366),l=i(97880),c=i(54642),u=i(79315),g=i(78291),p=i(38755),m=i(21115);const f=i(85).LKp,h=i(85).Ubh,v=i(85).Ww0,b=i(85).nx5,y=(i(85).qVP,i(85).sqO),L=i(85).yPo,w=i(85).Lr5,S=i(85).EN,_=i(85).qJ8,k=1;function x(e,t,i,n){switch(e){case"ai":return{addOnCostItem:s()("div",{},void 0,s()(d.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI",[b]:"<bold>Notion AI</bold>",values:{bold:e=>s()("b",{},void 0,e)}})),addOnCostItemWithMembers:s()("span",{style:{whiteSpace:"pre-wrap"}},void 0,s()(d.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI.memberInfo",[b]:"({memberCount, plural, one {{memberCount} member} other {{memberCount} members}} x {price} per month{interval, select, month {} other { x 12 months}})",values:{[v]:t,interval:i,price:n}}))};default:(0,l.unreachable)(e)}}function U(e){const t=(0,r.O7)(),i=(0,o.VK)((()=>{var e,t;return null===(e=u.default.state[h])||void 0===e||null===(t=e.getSettings())||void 0===t?void 0:t[f]}),[]),[n,s]=(0,a.useState)();return(0,a.useEffect)((()=>{!async function(){const n=await async function(e,t,i){var n;const s=g.default.state.data;if(!s)return!1;const a=m.approachingBlockLimit(e,s),r=u.default.state[_];if(!r||!(0,p.rn)(e,r)||!(0,m.isAdmin)(s))return!1;const o=null===(n=u.default.state[_])||void 0===n?void 0:n.id;if(!o)return!1;const d=await c.getAIUsageEligibility(e,{spaceId:o});if("failed"===d.type)return!1;const l=d.data,f=l?+l.spaceUsage/l.spaceLimit:0;if(!1===(null==l?void 0:l.isEligible)&&l.isSalesAssisted)return!1;if(a)return!1;const h=f>=k?"limit_reached":"warning";if("warning"===h){if("settings"===t&&null!=i&&i[S]||"sidebar"===t&&null!=i&&i[w])return!1}else if("limit_reached"===h&&("settings"===t&&null!=i&&i[L]||"sidebar"===t&&null!=i&&i[y]))return!1;return f>=.7}(t,e,i);s(n)}()}),[t,e,i]),n}}}]);