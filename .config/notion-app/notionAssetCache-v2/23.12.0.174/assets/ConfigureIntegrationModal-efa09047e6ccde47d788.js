"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116,4931],{5026:(e,t,n)=>{n.r(t),n.d(t,{ConfigureIntegrationModal:()=>se});var i=n(77094),o=n.n(i),a=n(67294),r=n(480),l=n(81954),s=n(24405),d=n(3909),g=n(5366),c=n(9844),u=n(35794),p=n(9038),m=n(64002),h=n(47307),f=n(64964),b=n(761),v=n(1790),M=n(33929),I=n(79315),w=n(74021),y=n(39098),S=n(73063),k=n(74194);const C=n(85).Yzm,Z=(0,g.defineMessages)({toggleSecretVisibility:{id:"integrations.configureIntegrationShowSecret.toggleSecretVisibility",defaultMessage:"Toggle secret visibility"}});function x(e){const{secret:t,onChange:n,submit:i,placeholder:r}=e,[l,s]=a.useState(!1);return o()(k.Z,{type:l?"text":"password",value:t,onChange:n,placeholder:r,style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:e=>{"Enter"===e.key&&i()},right:t&&o()("div",{style:{display:"flex"}},void 0,o()(S.Z,{icon:l?d.Z.eye:d.Z.eyeHide,onClick:()=>{s(!l)},ariaLabel:M.default[C](Z.toggleSecretVisibility),isBlue:!0,iconStyle:{height:18,width:18},style:{height:18}}))})}var F=n(64453),_=n(18153),K=n(42922),T=n(68785),U=n(92660),L=n(13490);const B=n(85).OJ4,P=n(85).S2n,V=n(85).cZW,N=n(85).Dd5,O=n(85).LlE,W=n(85).AL1,z=n(85).nLZ,A=n(85).jkI,D=n(85).H1U,E=n(85).EMU,R=n(85).sM5,H=n(85).mPA,Q=n(85).Wqi,q=n(85).gdQ,J=n(85).BQ6,Y=n(85).PG2,j=n(85).v8Q,G=n(85).MQR,$=n(85).nm$,X=n(85).y3i,ee=n(85).piI,te=n(85).Yzm,ne=n(85).JgF,ie=n(85).TLr,oe=n(85).___,ae=n(85).yVA,re=n(85).nx5,le=(0,g.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",[re]:"Paste webhook URL"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",[re]:"Paste secret code"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",[re]:"Update"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",[re]:"Connect"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",[re]:"Failed to connect {integration}. Please contact support."},[ae]:{id:"integrations.configureIntegrationModal.closeButtonLabel",[re]:"Close integration configuration modal"}});function se(){var e,t;window.__c={n:oe};const n=(0,r.O7)(),i=(0,s.yK)((e=>({errorText:{color:e.errorText,fontSize:12},[H]:{[R]:E,flexDirection:"column",[D]:"flex-start",width:360},helpInfo:{[R]:"inline-flex",marginLeft:2}})),[]),C=(0,_.useConnectIntegrationModalStyles)(),Z=(0,l.VK)((()=>w.Z.state.open?w.Z.state.integrationId:void 0),[]),se=(0,l.VK)((()=>w.Z.state.open?w.Z.state.webhookSubscriptionId:void 0),[]),de=(0,l.VK)((()=>I.default.state.currentSpaceStore),[]),ge=Z&&de?y.y2[ie](de,{id:Z,table:c.K2}):void 0,ce=se&&de?y.n4[ie](de,{id:se,table:u.b,spaceId:de.id}):void 0;(0,a.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==ce?void 0:ce.getWebhookUrl())||"",webhookSecret:(null==ce?void 0:ce.getWebhookSecret())||""};pe(e),he(t)}),[ce]);const[ue,pe]=a[ne](""),[me,he]=a[ne](""),[fe,be]=a[ne](!1),[ve,Me]=a[ne](!1),[Ie,we]=a[ne](!1),ye=(0,l.VK)((()=>{if(ge)return ge.getModel()}),[ge]),Se=(0,p.RW)(Z),ke=null==Se||null===(e=Se.info.customization)||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.hmac,Ce=(0,l.VK)((()=>null==ye?void 0:ye.getInfo()),[ye]),Ze=(0,a.useCallback)((e=>{e&&Ce&&(we(!1),h.showErrorMessage(M.default[te](le.errorOccurred,{integration:Ce.developer_name})))}),[Ce]),xe=(0,a.useCallback)((async()=>{if(!Ie){if(!(0,m.sanitizeUrlStrict)(ue))return be(!0),void we(!1);if(be(!1),ke&&!me)return Me(!0),void we(!1);we(!0),ye&&(await v.E({environment:n,integration:ye,webhookUrl:ue,webhookSecret:me,webhookSubscriptionId:se,onError:Ze,onSuccess:()=>f.oV({label:o()(g.FormattedMessage,{id:"configureIntegrationModal.snackbar.title",[re]:"Added {integrationName} to your workspace",values:{[ee]:ye.name}})})}),await b[X]({environment:n}),_e())}}),[n,Ze,ye,Ie,me,ke,se,ue]),Fe=(0,a.useCallback)((e=>he(e[$].value)),[]),_e=()=>{w.Z.setState({open:!1}),pe(""),he(""),be(!1),Me(!1),we(!1)};return ye&&Se&&de?o()(U.Z,{innerStyle:C.modal,requireOnline:!0,modalStore:w.Z,onDismiss:_e,render:()=>o()("div",{[J]:C.mobileModal},void 0,o()("div",{[J]:C.innerModal},void 0,o()(S.Z,{icon:d.Z.closeSmall,[Y]:_e,[J]:C[G],[q]:C[j],ariaLabel:M.default[te](le[ae])}),o()(F.P,{integrationModel:ye,integrationConfig:Se,[Q]:de}),o()("div",{[J]:i[H]},void 0,o()(L.Z,{[J]:{[R]:E,[D]:A,[z]:40}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",[re]:"Webhook URL"})),o()(k.Z,{type:W,[J]:{[O]:"4px 8px"},value:ue,[N]:e=>{pe(e[$].value),be(!1)},[V]:M.default[te](le.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await xe()}}),fe?o()("div",{[J]:{[z]:5,...i.errorText}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",[re]:"Invalid webhook URL"})):null),Se[P]&&o()("div",{[J]:i[H]},void 0,o()(L.Z,{[J]:{[R]:"flex",[D]:"center",[z]:24}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",[re]:"Secret code"})),o()(x,{secret:me,[N]:Fe,submit:xe,[V]:M.default[te](le.webhookSecretPlaceholder)}),ve?o()("div",{[J]:{[z]:5,...i.errorText}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidSecret",[re]:"Webhook secret is required."})):null),o()(K.Z,{[J]:C[B],[Y]:xe,disabled:""===ue||ke&&""===me},void 0,Ie?o()(T.Z,{}):o()("span",{},void 0,se?M.default[te](le.updateButton):M.default[te](le.createButton)))))}):null}},64453:(e,t,n)=>{n.d(t,{P:()=>I});var i=n(77094),o=n.n(i),a=n(67294),r=n(81954),l=n(24405),s=n(15070),d=n(5366),g=n(82990),c=n(71669),u=n(64369);const p=n(85).SFi,m=n(85).HFH,h=n(85).ChN,f=n(85).s9u,b=n(85).Gpy,v=n(85).nx5,M=n(85).piI;function I(e){window.__c={n:"ConnectIntegrationHeader"};const{integrationModel:t,integrationConfig:n,spaceStore:i}=e,I=(0,l.yK)((e=>({integrationIcon:{width:40,height:40,borderRadius:6,overflow:"hidden"},title:{marginTop:4,fontSize:17,[h]:590,lineHeight:"22px"},subTitle:{[h]:g.Z[h].regular,fontSize:g.Z.fontSize.UISmall.desktop,color:e.lightTextColor,lineHeight:"17px",marginTop:6.5}})),[]),w=(0,r.VK)((()=>t.getInfo().developer_name||"Unknown"),[t]),y=(0,r.VK)((()=>t.getCapabilities()),[t]),S=function(e){const t=[];e.read_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readContent",[v]:"view content"}));e.read_comment&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readComment",[v]:"view comments"}));e.update_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateContent",[v]:"edit content"}));e[m]&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateComment",[v]:"edit comments"}));e.insert_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertContent",[v]:"create content"}));e[m]&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertComment",[v]:"create comments"}));return o()(d.FormattedList,{value:t,type:p})}(y),k=(0,r.VK)((()=>i.getName()),[i]);let C;return(0,s.ms)(y)&&y.webhooks?C=o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionDlp",[v]:"Connect to {integrationName} for real-time monitoring and protection of sensitive content.",[b]:{[M]:w}}):y.webhooks&&(C=o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionSiem",[v]:"Connect to {integrationName} for real-time monitoring, alerting, and analysis of your workspace event logs.",[b]:{[M]:w}})),a.createElement(a.Fragment,null,o()("div",{style:I.integrationIcon},void 0,o()(c.Z,{style:I.integrationIcon,src:n.info.icon})),o()(u.Z,{style:I.title},void 0,o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",[v]:"Connect {integrationName} to Notion",[b]:{[M]:w}})),o()(u.Z,{style:I.subTitle,isMultiline:!0},void 0,C),o()(u.Z,{style:I.subTitle,isMultiline:!0},void 0,y.webhooks&&o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.webhooks",[v]:"{integrationName} will be authorized to receive event logs on all activity in {spaceName}.",[b]:{[M]:w,[f]:k}})," ",(0,s.ms)(y)&&o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.contentCapabilities",[v]:"{hasWebhooks, select, true {For <b>all</b> pages, {integrationName} will also able to {formattedCapabilities}} other {For <b>all</b> pages, {integrationName} will able to {formattedCapabilities}}}.",[b]:{hasWebhooks:y.webhooks,b:e=>o()("span",{style:{[h]:g.Z[h].semibold}},void 0,e),[M]:w,formattedCapabilities:S}})))}},18153:(e,t,n)=>{n.r(t),n.d(t,{ConnectOAuthIntegrationModal:()=>j,useConnectIntegrationModalStyles:()=>G});var i=n(97464),o=n.n(i),a=n(77094),r=n.n(a),l=n(67294),s=n(480),d=n(81954),g=n(24405),c=n(3909),u=n(5366),p=n(9844),m=n(9038),h=n(50906),f=n(77719),b=n(33929),v=n(79315),M=n(17549),I=n(39098),w=n(64453),y=n(42922),S=n(73063),k=n(58032),C=n(92660);const Z=n(85).lWm,x=n(85).yzD,F=n(85).H1U,_=n(85).NF1,K=n(85).jkI,T=n(85).Joh,U=n(85).pkR,L=n(85).F9A,B=n(85).OJ4,P=n(85).D7I,V=n(85).yCe,N=n(85).piI,O=n(85).ESK,W=n(85).Wqi,z=n(85).gdQ,A=n(85).BQ6,D=n(85).PG2,E=n(85).Yzm,R=n(85).v8Q,H=n(85).MQR,Q=n(85).yor,q=n(85).yVA,J=n(85).nx5,Y=(0,u.defineMessages)({createButton:{id:"integrations.connectOAuthIntegrationModal.submitButton.create",[J]:"Connect to {integrationName}"},waiting:{id:"integrations.connectOAuthIntegrationModal.submitButton.waiting",[J]:"Waiting for changes in {integrationName}"},waitingTooltip:{id:"integrations.connectOAuthIntegrationModal.submitButton.waitingTooltip",[J]:"You need to complete some steps in {integrationName} to continue"},[q]:{id:"integrations.connectOAuthIntegrationModal.closeButtonLabel",[J]:"Close integration installation modal"}});function j(){window.__c={n:Q};const e=(0,s.O7)(),t=G(),n=(0,d.VK)((()=>M.Z.state.open?M.Z.state.integrationId:void 0),[]),i=(0,d.VK)((()=>v.default.state.currentSpaceStore),[]),a=n&&i?I.y2.createChildStore(i,{id:n,table:p.K2}):void 0,[g,Z]=l.useState(!1),x=(0,d.VK)((()=>{if(a)return a.getModel()}),[a]),F=(0,d.VK)((()=>null==x?void 0:x.getInfo()),[x]),_=(0,m.RW)(n);if(!(x&&F&&_&&i&&n))return null;const K=async()=>{g||(Z(!0),await f.$$({environment:e,integration:x,spaceId:i.id,from:"compliance_connected_apps_settings"}),h.trackSecurityAndComplianceIntegrationInstall(e,{integration_id:n,configuration_type:"oauth"}),J())},J=()=>{M.Z.setState({open:!1}),Z(!1)};return r()(C.Z,{innerStyle:t.modal,requireOnline:!0,modalStore:M.Z,onDismiss:J,render:()=>r()("div",{[A]:t.mobileModal},void 0,r()("div",{[A]:t.innerModal},void 0,r()(S.Z,{icon:c.Z.closeSmall,[D]:J,[A]:t[H],[z]:t[R],ariaLabel:b.default[E](Y[q])}),r()(w.P,{integrationModel:x,integrationConfig:_,[W]:i}),r()(k.Z,{placement:k.Z[O].Top,[T]:()=>l[P](u.FormattedMessage,o()({},Y.waitingTooltip,{values:{[N]:F[V]}})),disableTooltip:!g,render:e=>l[P](y.Z,o()({[A]:t[B],[D]:K,[U]:g},e),g?r()("span",{},void 0,b.default[E](Y.waiting,{[N]:F[V]})):r()("span",{[A]:t.createButton},void 0,b.default[E](Y.createButton,{[N]:F[V]}),c.Z[L](t.redirectIcon)))})))})}function G(){return(0,g.yK)((e=>({modal:{maxWidth:400,padding:"40px 20px 24px",fontSize:14,textAlign:K,[_]:10},[B]:{marginTop:40,padding:"0px 12px",width:360,height:32},innerStyle:{[_]:10},mobileModal:{fontSize:14,textAlign:K},innerModal:{display:"flex",flexDirection:"column",[F]:K},[R]:{background:e[x]},[H]:{position:"absolute",top:"10px",right:"10px",background:e[Z],[_]:"100%",width:20,height:20,display:"flex",[F]:K,justifyContent:K,zIndex:10},createButton:{display:"flex",[F]:K},redirectIcon:{width:14,height:14,marginLeft:8}})),[])}},92660:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(77094),o=n.n(i),a=(n(67294),n(83355)),r=n(53953),l=n(44532);const s=n(85).sI1,d=n(85).wJk,g=n(85).P0R;class c extends a.Z{renderComponent(){const{render:e}=this[g],{device:t}=this.environment,n=this[g].modalStore.state;return t.isMobile?o()(l.ZP,{ariaLabel:this[g].ariaLabel,open:n.open,popupType:l.ZP.PopupType.SlideUp,origin:this[g].origin,[d]:this[g][d],render:e,style:this[g].style}):o()(r.Z,{ariaLabel:this[g].ariaLabel,open:n.open,preventHideChildrenWhileOpening:!0,render:e,[d]:this[g][d],style:this[g].style,[s]:this[g][s]})}}c.displayName="DefaultPopupOrModal"},74021:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const a=new o},17549:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const a=new o}}]);