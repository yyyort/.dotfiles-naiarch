"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5128],{45145:(e,t,o)=>{o.d(t,{d:()=>ue});var n=o(97464),a=o.n(n),i=o(77094),r=o.n(i),s=o(67294),u=o(480),l=o(5366),d=o(73063),c=o(44532),p=o(58032),m=o(935),b=o(24405),h=o(3909),v=o(82990),g=o(42922),S=o(64921),k=o(12508),f=o(1743),w=o(74194),_=o(16354),I=o(64369),C=o(42402),y=o(43250),F=o(33665);const D=o(85).bey,Z=o(85).h8z,B=o(85).cZW,P=o(85).Yzm,T=o(85).DIE,M=o(85).iYy,A=o(85).gdQ,L=o(85)._V5,O=o(85).PdN,U=o(85).yzD,N=o(85).xVP,x=o(85).lWm,z=o(85).UPJ,V=o(85).wuN,E=o(85).a3v,W=o(85).X_m,K=o(85).Jkr,Y=o(85).$bT,H=o(85).L_E,Q=o(85).BQ6,G=o(85).nx5,J=o(85).mFu,R=o(85).PG2,q=o(85).jkI,j=o(85).H1U,X=o(85).EMU,$=o(85).sM5,ee=o(85).Dd5,te=o(85).DxG;function oe(e){const{[te]:t,[ee]:o}=e;return r()("div",{[Q]:{[$]:X,gap:6,[j]:q}},void 0,r()(k.Z,{[te]:t,[R]:o,size:14}),r()("div",{[R]:o},void 0,r()(I.Z,{[Q]:{cursor:J},isSmall:!0},void 0,r()(l.FormattedMessage,{[G]:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"}))))}function ne(){window.__c={n:"OptInLearnMore"};const e=(0,b.yK)((e=>({[H]:{[$]:X,[Y]:"row"},giftIcon:{[K]:16,[W]:16,fill:e[E]},message:{marginLeft:9,color:e[V],fontSize:12}})),[]);return r()("div",{[Q]:e[H]},void 0,h.Z.giftOutline(e.giftIcon),r()("div",{[Q]:e.message},void 0,r()(l.FormattedMessage,{[G]:"Youâ€™re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>r()(C.Z,{external:!0,href:(0,F.getLocalizedUrl)("ai.dataSharingTerms")},void 0,e)}})))}function ae(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,b.yK)((e=>({[H]:{[K]:300,[$]:X,[Y]:"column",[j]:q,padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,[$]:X,[j]:q,[z]:q,borderRadius:"100%",background:e[x],[K]:20,[W]:20,padding:4},[N]:{background:e[U]},[O]:{[K]:16,fill:e[V]},giftIcon:{[K]:24,[W]:24,fill:e[E]},terms:{color:e[V],textAlign:q,fontSize:13},shareButton:{[K]:"100%",marginTop:17,[L]:7,paddingBottom:7},notNowButton:{color:e[V],fontSize:14,marginTop:15},title:{textAlign:q,marginTop:9,marginBottom:8,fontWeight:v.Z.fontWeight.semibold}})),[]);return r()("div",{[Q]:o[H]},void 0,r()("div",{[Q]:o.closeButtonContainer},void 0,r()(S.Z,{[R]:()=>{t({optIn:!1})},[Q]:o.closeButton,[A]:o[N]},void 0,h.Z.closeSmall(o[O]))),h.Z.giftOutline(o.giftIcon),r()("div",{[Q]:o.title},void 0,r()(l.FormattedMessage,{[G]:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})),r()("div",{[Q]:o.terms},void 0,r()(l.FormattedMessage,{[G]:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:r()("br",{}),aiTerms:e=>r()(C.Z,{external:!0,href:(0,F.getLocalizedUrl)("ai.dataSharingTerms")},void 0,e)}})),r()(g.Z,{[Q]:o.shareButton,[R]:()=>{t({optIn:!0})}},void 0,r()(l.FormattedMessage,{[G]:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})),r()(_.Z,{[Q]:o.notNowButton,[R]:()=>{t({optIn:!1})}},void 0,r()(l.FormattedMessage,{[G]:"Not now",id:"completions.ShareDataPopup.notNowButton"})))}function ie(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:n,onCancel:a,userOptIn:i}=e,c=(0,s.useCallback)((()=>{o({...t,[M]:!t[M]})}),[t,o]),p=(0,s.useCallback)((()=>{n(t)}),[n,t]),m=(0,s.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),b=(0,l.useIntl)(),v=(0,u.O7)(),g=!i;return r()("div",{[Q]:{padding:14,...v.device.isMobile?{[K]:"100%"}:{minWidth:400}},className:y.completionsFeedbackPopup},void 0,r()(f.Z,{capture:!0},void 0,r()(w.Z,{value:t.userContent,[ee]:m,onSubmit:e=>{e[T](),p()},onCancel:a,focusInitial:!0,[B]:b[P]({id:"completions.FeedbackPopup.userCommentPlaceholder",[G]:"How could the output be improved? (optional)"})}),r()("div",{[Q]:{[$]:X,[Y]:"row",[z]:Z,[j]:q,[L]:10}},void 0,g?r()(oe,{[te]:t[M],[ee]:c}):r()(ne,{}),r()(d.Z,{icon:h.Z.sendArrow,[R]:p,ariaLabel:b[P]({id:"completions.FeedbackPopup.submitButtonLabel",[G]:"Submit feedback"}),isBlue:!0,[D]:{[W]:24,[K]:24},[Q]:{[W]:20,[K]:20}}))))}const re=o(85).D7I,se=o(85).nx5;function ue(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:n,feedbackState:i,onDismiss:b,onSubmit:h,onUpdate:v,showShareDataPopup:g,onDataShareSubmit:S,userOptIn:k,iconButtonStyles:f}=e,w=(0,u.O7)(),_=t===(null==i?void 0:i.type),I=(0,m.L)(t,_),C=(0,s.useCallback)((()=>n(t)),[n,t]),y=r()(p.Z,{renderTooltip:()=>r()("div",{},void 0,r()(l.FormattedMessage,{[se]:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})),placement:p.Z.Placement.Bottom,render:e=>s[re](d.Z,a()({onClick:C,icon:I,ariaLabel:o,style:{...f}},e))});return r()(c.ZP,{origin:y,open:(null==i?void 0:i.type)===t,popupType:w.device.isMobile?c.kQ.SlideUp:c.kQ.Popup,onDismiss:b,render:()=>i?g?r()(ae,{onCancel:b,onSubmit:S}):r()(ie,{state:i,onSubmit:h,onUpdate:v,onCancel:b,userOptIn:k}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>y,u:()=>F});var n=o(77094),a=o.n(n),i=o(67294),r=o(480),s=o(81954),u=o(3909),l=o(5366),d=o(50906),c=o(73928),p=o(64964),m=o(12359),b=o(37181),h=o(8323),v=o(79315),g=o(10161),S=o(45145);const k=o(85).wJk,f=o(85).DIE,w=o(85).iYy,_=o(85).nx5,I=o(85).Yzm,C=o(85).Ubh;function y(e,t){switch(e){case"thumbsup":return t?u.Z.thumbUpFilled:u.Z.thumbUp;case"thumbsdown":return t?u.Z.thumbDownFilled:u.Z.thumbDown}}function F(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,l.useIntl)(),n=(0,r.O7)(),[u,y]=(0,i.useState)(void 0),[F,D]=(0,i.useState)(!1),Z=(0,i.useRef)(null),B=(0,s.VK)((()=>g.default.checkGate("ai_data_sharing")),[]),P=(0,s.VK)((()=>v.default.state[C]),[]),T=(0,s.VK)((()=>{var e;const t=null==P||null===(e=P.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,h.isPlusTierOrAbove)();return!Boolean(t)&&o}),[P]),M=(0,s.VK)((()=>{var e;return(null==P||null===(e=P.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[P]),A=(0,i.useCallback)((()=>{p.oV({label:o[I]({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",[_]:"Thanks for submitting feedback!"})})}),[o]),L=(0,i.useCallback)((e=>{Z.current=document.activeElement,y((t=>({userContent:"",[w]:true,...t,type:e})))}),[]),O=(0,i.useCallback)((e=>{e[w]&&T&&B?D(!0):(A(),y(void 0)),c.submitFeedbackForRevision({...e,environment:n,revision:t,userOptIn:M})}),[t,n,M,T,B,A]),U=(0,i.useCallback)((e=>{e&&e[f]&&e[f](),y(void 0),Z.current&&Z.current instanceof HTMLElement&&Z.current.focus()}),[]),N=(0,i.useCallback)((e=>{const{optIn:t}=e;P&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:n,userId:P.id,perform:e=>{b.updateUserSettings({userSettingsStore:P,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),d.trackAIDataSharingOptInSubmit(n,{user_opt_in:t}),t?p.oV({label:o[I]({id:"completions.CompletionMenuFooter.dataShareThanks",[_]:"Thank you for your help making Notion better!"})}):A(),D(!1),y(void 0))}),[o,P,n,A]);return t.hasFeedback&&!F?null:i.createElement(i.Fragment,null,a()(S.d,{type:"thumbsup",ariaLabel:o[I]({id:"completions.CompletionMenuFooter.thumbsUp",[_]:"Submit positive feedback"}),onClick:L,feedbackState:u,[k]:U,onSubmit:O,onUpdate:y,showShareDataPopup:F,onDataShareSubmit:N,userOptIn:M}),a()(S.d,{type:"thumbsdown",ariaLabel:o[I]({id:"completions.CompletionMenuFooter.thumbsDown",[_]:"Submit negative feedback"}),onClick:L,feedbackState:u,[k]:U,onSubmit:O,onUpdate:y,showShareDataPopup:F,onDataShareSubmit:N,userOptIn:M}))}}}]);