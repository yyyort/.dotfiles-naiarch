"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5008],{54428:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U});var n=i(77094),o=i.n(n),s=i(67294),a=i(83355),r=i(3909),d=i(5366),l=i(24677),c=i(98104),h=i(33846),u=i(37601),m=i(21199),b=i(1743),p=i(74194);const v=i(85).D7I,g=i(85).kdC,f=i(85).cZW,y=i(85).ihD,S=i(85).nx5,k=i(85).Yzm,A=i(85).raT,T=i(85).cx2,B=i(85).piL,M=i(85).Dd5,Z=i(85).Vkz,w=i(85).Gnd,I=i(85).Wp_,C=i(85).wgE,x=i(85).XtO;class P extends a.Z{constructor(){super(...arguments),this.storeTypes={[x]:h.Z},this.handleFocused=()=>{l.clear(this[C]),c.clear(this[C]),this[w][x][I]({...this[w][x].state,focus:!0})},this.handleBlurred=()=>{this[w][x][I]({...this[w][x].state,focus:!1})},this[Z]=e=>{this.props[M]({[B]:e.target.value})}}renderComponent(){const{[B]:e,intl:t}=this.props,{focus:i}=this[w][x].state;return o()(b.Z,{capture:i},void 0,o()(m.Z,{capture:!0,render:n=>s[v]("div",n,o()(p.Z,{style:this[T](),format:p.B[A],value:e,[f]:t[k]({[S]:"Type to searchâ€¦",id:"database.mobileSearch.placeholder"}),[M]:this[Z],autoComplete:"on",autoCorrect:"on",onFocus:this.handleFocused,onBlur:this.handleBlurred,[g]:!0,left:r.Z.search(this[y]())}),o()(u.Z,{show:i}))}))}[T](){return{boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,flexGrow:0,flexShrink:0,height:32,paddingLeft:8,paddingRight:12,borderRadius:3,fontSize:14,marginBottom:4}}[y](){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}}P.displayName="CollectionMobileSearch";const U=(0,d.injectIntl)(P)},75498:(e,t,i)=>{i.d(t,{Z:()=>I});var n=i(96486),o=i.n(n),s=i(83355),a=i(1302),r=i(49085),d=i(71644),l=i(97880),c=i(64434);const h=i(85).ykC,u=i(85).PR5,m=i(85).Mcf,b=i(85).sP9,p=i(85).Y6E,v=i(85).DbH,g=i(85).P24,f=i(85).QmD,y=i(85).HFP,S=i(85).ILR,k=i(85).ZG6,A=i(85).SIu,T=i(85).wfR,B=i(85).p6m,M=i(85).uei,Z=i(85).BVT;class w extends s.Z{constructor(){super(...arguments),this[Z]=this.props.id,this.instanceId=(0,d.ZP)(),this[M]=!1,this.storeTypes={[B]:r.default[T](void 0)},this[A]=()=>{this[M]||(this[M]=!0,a.default[k](this.dequeueLocalResultStoreChange))},this.dequeueLocalResultStoreChange=()=>{const{[B]:e}=this.stores;if(this[M]=!1,!this[S])return;const t=this[y]();o().isEqual(t,e[f])||e.setState(t)}}willMount(e){const{[g]:t}=e;t[v].addListener(this[A]),t[p].addListener(this[A]),this.updateReducer(e),this[A]()}willUpdate(e){this.updateReducer(e)}willUnmount(){super.willUnmount();const{[g]:e,[b]:t}=this.props;c.updateCollectionReducer({[Z]:this[Z],instanceId:this.instanceId,[m]:void 0,[g]:e,[b]:t}),e[v][u](this[A]),e[p][u](this[A])}renderComponent(){const{render:e}=this.props;if(e)return e(this.stores[B])}updateReducer(e){const{[m]:t,[g]:i,[b]:n}=e;c.updateCollectionReducer({[Z]:this[Z],instanceId:this.instanceId,[m]:t,[g]:i,[b]:n})}[y](){const{[g]:e}=this.props,t=e[p][f],i=e[v][f],n=t&&"reducer"===t.type?t[h][this[Z]]:void 0,o=i&&"reducer"===i.type?i[h][this[Z]]:void 0;return this.getResultFromLocalAndRemote(n,o)}getResultFromLocalAndRemote(e,t){const{[g]:i,[m]:n}=this.props,s=i.reducers[f],a=i[v][f],r=i.isClientModeEnabled[f];if("aggregation"===n.type||"groups"===n.type){if(r)return e;if(null!=a&&a[h][this[Z]])return a[h][this[Z]];return Boolean(a&&"reducer"===a.type&&o().find(a[h],((e,t)=>{const i=s[t];return Boolean(i&&"results"===i[m].type&&!i[m].searchQuery&&"results"===e.type&&e.hasMore&&o().isEqual(n.filter,i[m].filter))})))?e:t}if("results"===n.type){const n=i.wasCreatedThisSession[f];if((Boolean(a&&"reducer"===a.type&&a[h][this[Z]])||n||r)&&e&&"results"===e.type){return{...e,hasMore:t&&"results"===t.type?t.hasMore:e.hasMore}}return t}throw(0,l.unreachable)(n)}}w.displayName="CollectionReducerRequest";const I=w},78948:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(77094),o=i.n(n),s=(i(67294),i(83355)),a=i(68785),r=i(28992);class d extends s.Z{renderComponent(){return o()(r.Z,{title:o()(a.Z,{})})}}d.displayName="LoadingMenuItem";const l=d},44299:(e,t,i)=>{i.r(t),i.d(t,{default:()=>rt});var n=i(97464),o=i.n(n),s=i(77094),a=i.n(s),r=i(96486),d=i.n(r),l=i(67294),c=i(83355),h=i(13991),u=i(41432),m=i(3909),b=i(82990),p=i(5366),v=i(50906),g=i(44886),f=i(55332),y=i(24677),S=i(98104),k=i(67074),A=i(52533),T=i(68056),B=i(80935),M=i(5162),Z=i(17903),w=i(72653),I=i(69454),C=i(27724),x=i(24666),P=i(64921),U=i(1892),F=i(44532),O=i(64131),D=i(82945),R=i(85394),E=i(40464),N=i(32404),_=i(73383);const L=i(85).xOW,q=i(85).UPJ,W=i(85).dPb,Q=i(85).PXg,$=i(85).Q1R,z=i(85).vNb,G=i(85).Pfh,H=i(85).Au,X=i(85).ypL,Y=i(85).GPw,J=i(85).Oc6,K=i(85).aFd,V=i(85).tvI,j=i(85).NbQ,ee=i(85).jkI,te=i(85).Gko,ie=i(85).D7I,ne=i(85).wDG,oe=i(85).g7N,se=i(85).OM8,ae=i(85).Exd,re=i(85).nx5,de=i(85).ChN,le=i(85).pkR,ce=i(85).X$p,he=i(85).XCs,ue=i(85).YDv,me=i(85).YPT,be=i(85).uP$,pe=i(85).PG2,ve=i(85).NR2,ge=i(85).g0h,fe=i(85).Vyz,ye=i(85).nAm,Se=i(85).NF1,ke=i(85)._lc,Ae=i(85).t4B,Te=i(85).Omf,Be=i(85).BQ6,Me=i(85).SZL,Ze=i(85).RvT,we=i(85).z$9,Ie=i(85).qc1,Ce=i(85).Jkr,xe=i(85).X_m,Pe=i(85).wlm,Ue=i(85).$SM,Fe=i(85).fBv,Oe=i(85).Xte,De=i(85).O8Z,Re=i(85).alp,Ee=i(85).Qqn,Ne=i(85).UhS,_e=i(85).ylu,Le=i(85).y6y,qe=i(85)._U_,We=i(85).ttt,Qe=i(85).BLr,$e=i(85).YqE,ze=i(85).q4X,Ge=i(85).V7c,He=i(85).XQm,Xe=i(85).EIp,Ye=i(85).zWe,Je=i(85).UD6,Ke=i(85).HPZ,Ve=i(85).Art,je=i(85).QmD,et=i(85).P0R,tt=i(85).Gnd,it=i(85).XtO,nt=i(85).Wp_,ot=i(85).wgE,st=i(85).WER;class at extends c.Z{constructor(){super(...arguments),this.scrollerDiv=void 0,this[st]=void 0,this.previouslyShownOnNative=!1,this.handleScrollerRef=e=>{e&&(this.scrollerDiv=e)},this.handleUnindent=e=>{k.handleUnindent(this[ot])},this.handleIndent=e=>{k.handleIndent(this[ot])},this.handleMoveUp=e=>{k.handleMoveUp(this[ot])},this.handleMoveDown=e=>{k.handleMoveDown(this[ot])},this.handleUndo=()=>{k.handleUndo(this[ot])},this.handleRedo=()=>{k.handleRedo(this[ot])},this.handleDismissKeyboard=e=>{y.clear(this[ot]),this[et][tt][it][nt]({...this[et][tt][it][je],isInsertOpen:!1}),this[Ve]("hide_keyboard"),S.blurActiveElement()},this.handleInsert=e=>{this[et][tt][it][nt]({...this[et][tt][it][je],isInsertOpen:!0}),this[Ve]("insert")},this.handleTakePicture=e=>{k.handleFilePicker(this[ot])},this.handleMention=e=>{k.handleMention(this[ot])},this.handleComment=e=>{k.handleComment(this[ot],!1,Ke)},this[Je]=e=>{k[Je](this[ot])},this.handleActionsScroll=()=>{v.trackActionBarScroll(this[ot])},this[Ye]=d().debounce(this.handleActionsScroll,500),this.handleMoreClick=e=>{k.handleMoreClick(this[ot],e.clientX,e.clientY)},this.listenForPositionChanges=this[Xe]((()=>{const e=x.default[je];if("editing"===e.mode){const t=e[He].end;return{[Ge]:Z.Z[je][Ge],[ze]:!0,[it]:t[it].id,selection:t}}return{[Ge]:Z.Z[je][Ge],[ze]:!1}})),this[$e]=this[Xe]((()=>{var e;return k[Qe](this[ot],this[et][We],null===(e=this[qe])||void 0===e?void 0:e[Le][je])})),this[_e]=this[Xe]((()=>k[_e](this[et][tt][Ne],this[ot].TextSelectionCompositionStore))),this[Ee]=this[Xe]((()=>!this[_e][je]&&k[Ee](this[qe]&&this[qe][Le][je]))),this[Re]=this[Xe]((()=>k[Re](this[qe]&&this[qe][Le][je],this[et][We]))),this.hasMultiBlockSelection=this[Xe]((()=>{const e=x.default[je];return"editing"===e.mode&&!(0,T.qS)(e[He])}))}willMountOrUpdate(){const{device:e}=this[ot],t=this[$e][je].shouldShow;if(e[De]){const e=this[et][tt][it][je].isOpen;t?e?void 0!==this[st]&&(window.clearTimeout(this[st]),this[st]=void 0):(this[et][tt][it][nt]({...this[et][tt][it][je],isOpen:!0}),this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0)):e&&void 0===this[st]&&(this[st]=window.setTimeout((()=>{this[st]=void 0,this[et][tt][it][nt]({...this[et][tt][it][je],isOpen:!1})}),200))}else t!==this.previouslyShownOnNative&&(this.previouslyShownOnNative=t,this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0))}renderComponent(){const{device:e,[Oe]:t}=this[ot],i=this.isOpen(),n=e.isMobile&&w.Z[je];if(this[et][Fe]===A.nd.Bottom){let e=0;return(0,M.Y)("supportsFixedSizeWebView")?e=I.Z[Ue]():n&&(e=t[Pe](R.default[xe])),a()("div",{[Be]:{[Fe]:"absolute",bottom:e,left:0,[xe]:at[xe],[Ce]:"100%",[Ie]:i?"auto":we,opacity:i?1:0,[Ze]:i?"translateY(0)":`translateY(${at[xe]}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"}},void 0,this[Me]())}{this.listenForPositionChanges[je];const e=this[et][tt][Ne][je].savedTextSelectionRect||B.getSelectionRect();if(!e)return;const t=document.body[Te](),n={...e,left:10,top:e.top+10-t.top},{device:o}=this[ot];return a()(F.ZP,{popupType:o[Ae]?F.ZP[ke].SlideUp:F.ZP[ke].Popup,open:i,[fe]:!0,placementToOrigin:F.ZP.Placement.Bottom,alignmentToOrigin:F.ZP.Alignment.Start,originRect:n,disableMouseCapture:!0,keepFocus:!0,render:()=>a()("div",{[Be]:{[xe]:at[xe],[Ce]:"calc(80wv)",[Se]:3,overflow:ye}},void 0,this[Me]())})}}renderActions(){return k.shouldShowTemplatesButton({[ot]:this[ot],[it]:this[et][We]})?this.renderTemplatesButton():this[_e][je]?this.renderTextActions():this.renderBlockActions()}[Me](){return a()("div",{[Be]:this.getActionButtonStyles()},void 0,this.renderActions(),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),borderLeft:this.getItemBorder(),[ve]:we},[pe]:this.handleDismissKeyboard},void 0,at.keyboardIcon))}renderBlockActions(){const e=this[Ee][je];let t=!1,i=!1;const n=this[et][We].getType();if(n){const e=this[et][We].getFormat();(0,u._T)(n,e)||(t=!0),(0,u.lQ)(n)||(i=!0)}const{device:s}=this[ot];return l[ie]("div",{ref:this.handleScrollerRef,[Be]:this[be](),onScroll:this[Ye]},a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),...!s[me]&&{[ue]:12,[he]:12}},[pe]:this.handleInsert,[le]:!e},void 0,at.plusIcon,this[ce]()),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),[de]:b.Z[de].medium},[pe]:e=>{this[et][tt][it][nt]({...this[et][tt][it][je],isTurnIntoOpen:!0}),this[Ve]("turn_into")},[le]:!e},void 0,a()(p.FormattedMessage,{[re]:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),this[ce]()),a()(U.Z,{capture:!0,render:e=>l[ie](P.Z,o()({mobileFeedback:!0,disabledFeedback:!0},e,{[Be]:this[ge](),[pe]:this.handleMention,[le]:!i}),a()("span",{[Be]:{[ae]:19,[se]:1,[de]:b.Z[de].medium,[oe]:s[ne]?4:0}},void 0,"@"))}),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:this[ge](),[pe]:this.handleComment,[le]:!t},void 0,at.discussionIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:this[ge](),[pe]:this.handleTakePicture,[le]:!e},void 0,at.imageIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:this[ge](),[pe]:this[Je],[le]:!e},void 0,at.trashIcon),this.renderBlockMovementActions(),this.renderBlockUndoActions(),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),[de]:b.Z[de].medium},[pe]:e=>{this[et][tt][it][nt]({...this[et][tt][it][je],isColorOpen:!0}),this[Ve]("color")},[le]:!e},void 0,a()(p.FormattedMessage,{[re]:"Color",id:"mobileActionBar.color.buttonTitle"}),this[ce]()),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),[de]:b.Z[de].medium},[pe]:this.handleMoreClick,[le]:!e},void 0,a()(p.FormattedMessage,{[re]:"More",id:"mobileActionBar.more.buttonTitle"}),this[ce]()))}renderBlockMovementActions(){const e=this[Ee][je],t=C.default[je][tt][0];return a()("div",{[Be]:{...this[ge](),[ue]:6,[he]:6}},void 0,a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!e||!g.gq(t),[pe]:this.handleUnindent},void 0,at.unindentIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!e||!g.nt(t),[pe]:this.handleIndent},void 0,at.indentIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!e,[pe]:this.handleMoveUp},void 0,at.moveUpIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!e,[pe]:this.handleMoveDown},void 0,at.moveDownIcon))}renderBlockUndoActions(){return a()("div",{[Be]:{...this[ge](),[ue]:6,[he]:6}},void 0,a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!f.L0(),[pe]:this.handleUndo},void 0,at.undoIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:at[te],[le]:!f.AZ(),[pe]:this.handleRedo},void 0,at.redoIcon))}renderTextActions(){const e=this[Re][je],t=this.hasMultiBlockSelection[je],i=this[et][We].canComment(),n=C.default[je][tt][0],o={display:"flex",alignItems:ee,padding:"0 8px",whiteSpace:"nowrap"};return a()("div",{[Be]:this[be](),onScroll:this[Ye]},void 0,a()(D.Z,{[Be]:this[ge](),blockStore:C.default[je][tt][0],[le]:!i}),a()(E.Z,{type:"b",[Be]:this[ge](),[pe]:()=>this[Ve]("bold"),[le]:!e},void 0,a()("span",{[Be]:{[de]:b.Z[de].semibold}},void 0,a()(p.FormattedMessage,{[re]:"B",id:"mobileActionBar.bold.symbol"}))),a()(E.Z,{type:"i",[Be]:this[ge](),[pe]:()=>this[Ve]("italic"),[le]:!e},void 0,a()("span",{[Be]:{fontStyle:"italic",[de]:b.Z[de].semibold}},void 0,a()(p.FormattedMessage,{[re]:"i",id:"mobileActionBar.italic.symbol"}))),a()(E.Z,{type:"_",[Be]:this[ge](),[pe]:()=>this[Ve](j),[le]:!e},void 0,a()("span",{[Be]:{[V]:j}},void 0,a()(p.FormattedMessage,{[re]:"U",id:"mobileActionBar.underline.symbol"}))),a()(E.Z,{type:"s",[Be]:this[ge](),[pe]:()=>this[Ve]("strike_through"),[le]:!e},void 0,a()("span",{[Be]:{[V]:"line-through"}},void 0,a()(p.FormattedMessage,{[re]:"S",id:"mobileActionBar.strikeThrough.symbol"}))),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:o,[le]:!g.gq(n),[pe]:this.handleUnindent},void 0,at.unindentIcon),a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...o,[ve]:this.getItemBorder()},[le]:!g.nt(n),[pe]:this.handleIndent},void 0,at.indentIcon),a()(E.Z,{type:"c",[Be]:this[ge](),[pe]:()=>this[Ve]("code"),[le]:!e},void 0,a()("span",{[Be]:{[K]:b.Z[J](h.SP).githubMono}},void 0,a()(p.FormattedMessage,{[re]:"Code",id:"mobileActionBar.code.symbol"}))),a()(_.Z,{[Be]:this[ge](),[le]:!e||t},void 0,a()("span",{[Be]:{[Y]:`1px solid ${this[H][X]}`}},void 0,a()(p.FormattedMessage,{[re]:G,id:"mobileActionBar.link.symbol"}))),a()(N.Z,{[pe]:()=>this[Ve](z),[le]:!e||t,[Be]:this[ge]()},void 0,m.Z[z]({[Ce]:16,[xe]:16})),a()(O.Z,{[Be]:this[ge](),[Ne]:this[et][tt][Ne],[le]:!e}))}renderTemplatesButton(){return a()("div",{[Be]:this[be]()},void 0,a()(P.Z,{mobileFeedback:!0,disabledFeedback:!0,[Be]:{...this[ge](),[ve]:we,[de]:b.Z[de].medium},[pe]:e=>{this[et][tt][it][nt]({...this[et][tt][it][je],isTemplatesOpen:!0}),this[Ve]($)}},void 0,m.Z.templatesColor({[Ce]:20,[Q]:8}),a()(p.FormattedMessage,{[re]:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),this[ce]()))}[ce](){return m.Z.chevronDown({[Ce]:10,marginLeft:4,fill:this[H].lightIconColor})}isOpen(){const{device:e}=this[ot];return e[De]?this[et][tt][it][je].isOpen:this[$e][je].shouldShow}[Ve](e){v.trackTapMobileActionBarItem(this[ot],{itemName:e})}getItemBorder(){return`1px solid ${this[H].regularDividerColor}`}getActionButtonStyles(){const{device:e,[Oe]:t}=this[ot];return{[xe]:"100%",[Ce]:"100%",[ae]:15,display:"flex",boxShadow:this[et][Fe]===A.nd.Bottom?this[H].bottomActionBarShadow:this[H].mediumBoxShadow,backgroundColor:this[H].keyboardActionBarBackground,[ue]:e[Ae]?t[je].paddingLeftCSS:0,[he]:e[Ae]?t[je].paddingRightCSS:0}}[be](){return{flexGrow:1,flexShrink:1,[Q]:-1,display:"flex",overflowX:"auto",overflowY:ye,[W]:"touch"}}[ge](){const{device:e}=this[ot];return{display:"flex",alignItems:ee,[q]:ee,[ue]:e[me]?8:10,[he]:e[me]?8:10,[ve]:this.getItemBorder(),whiteSpace:"nowrap",[xe]:at[xe],flexShrink:0,flexGrow:0,flexBasis:"auto",color:this[H].regularTextColor,minWidth:e[me]?42:44}}}at.displayName="MobileActionBar",at.unindentIcon=m.Z.indentDown({[Ce]:18,[xe]:18,[Ze]:"rotate(90deg)",[Fe]:L,left:1}),at.indentIcon=m.Z.indentDown({[Ce]:18,[xe]:18,[Ze]:"rotate(-90deg)",[Fe]:L,left:-1}),at.moveUpIcon=m.Z.moveUp({[Ce]:18,[xe]:18,[Fe]:L,left:2}),at.moveDownIcon=m.Z.moveUp({[Ce]:18,[xe]:18,[Ze]:"rotate(180deg)",[Fe]:L,left:2}),at.undoIcon=m.Z.undo({[Ce]:19,[xe]:19}),at.redoIcon=m.Z.redo({[Ce]:19,[xe]:19}),at.trashIcon=m.Z.trash({[Ce]:18,[xe]:18}),at.discussionIcon=m.Z.speechBubbleThin({[Ce]:18,[xe]:18}),at.plusIcon=m.Z.thinPlus({[Ce]:14,[xe]:14}),at.keyboardIcon=m.Z.keyboard({[Ce]:18,[xe]:18}),at.imageIcon=m.Z.image({[Ce]:18,[xe]:18}),at[xe]=42,at[te]={[Ce]:34,[q]:ee};const rt=(0,p.injectIntl)(at)},82043:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ze});var n=i(97464),o=i.n(n),s=i(77094),a=i.n(s),r=i(67294),d=i(83355),l=i(10482),c=i(51454),h=i(5366),u=i(93286),m=i(50906),b=i(88428),p=i(21325),v=i(87279),g=i(67074),f=i(94660),y=i(79315),S=i(63334),k=i(29798),A=i(49085);class T extends A.default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const B=T;var M=i(27724),Z=i(24666),w=i(48019),I=i(56940),C=i(1892),x=i(78140),P=i(32163),U=i(40721),F=i(44532),O=i(72495),D=i(40698),R=i(34574);const E=i(85).auS,N=i(85).j7K,_=i(85).mEi,L=i(85).cTj,q=i(85).y79,W=i(85).wJk,Q=i(85).Vyz,$=i(85).iVN,z=i(85).ceT,G=i(85).BCA,H=i(85).Gm5,X=i(85).nQ3,Y=i(85).PlO,J=i(85).g5n,K=i(85).nx5,V=i(85)._lc,j=i(85).pHx,ee=i(85).dLQ,te=i(85).yKO,ie=i(85).t5q,ne=i(85).eXX,oe=i(85).Vgm,se=i(85).qc1,ae=i(85).Scd,re=i(85).xOW,de=i(85).fBv,le=i(85).y6y,ce=i(85)._U_,he=i(85).BLr,ue=i(85).YqE,me=i(85).DHK,be=i(85).fFD,pe=i(85).gVr,ve=i(85).Gnd,ge=i(85).Wp_,fe=i(85).Zw9,ye=i(85).UwW,Se=i(85).Ol4,ke=i(85).vTv,Ae=i(85).BJF,Te=i(85).ttt,Be=i(85).ngR,Me=i(85).wgE,Ze=i(85).dpT,we=i(85).Lfz,Ie=i(85).KMn,Ce=i(85).Zij,xe=i(85).rGB,Pe=i(85).D7I,Ue=i(85).rpY,Fe=i(85).TaW,Oe=i(85).qJ8,De=i(85).eAn,Re=i(85).Pxe,Ee=i(85).QmD,Ne=i(85).Ubh,_e=i(85).vL3,Le=i(85).EIp,qe=i(85).f5k,We=i(85).UhS,Qe=i(85).XtO;class $e extends d.Z{constructor(){super(...arguments),this.storeTypes={[Qe]:B,[We]:S.Z,[qe]:k.Z},this.templatePreviewSectionsStore=this[Le]((()=>{var e,t,i;return Object.entries((0,f.it)({[_e]:null===(e=y.default[Ee][Ne])||void 0===e||null===(t=e[Re]())||void 0===t?void 0:t.persona,[De]:null===(i=y.default[Ee][Oe])||void 0===i?void 0:i[Fe]()})).map((e=>{let[t,i]=e;return{key:t,[Ue]:e=>a()(O.Z,{[Ce]:r[Pe](h.FormattedMessage,l._5[t])},t,e[xe]),items:i.map(this[Ie])}}))})),this[Ie]=e=>({key:e[we],[Ue]:t=>r[Pe](R.Z,o()({},t,{key:e[we],[Ce]:e[we],type:Ze,format:"phone-modal",locked:!1})),action:()=>{b.openWithItem({[Me]:this[Me],item:e,createNewPage:!1,isPrivate:!1})}}),this[Be]=e=>{const t=this.props[Te];return{key:e[we],[Ue]:t=>{var i;return r[Pe](R.Z,o()({},t,{key:e[we],format:"phone-modal",[Ce]:e[we],type:e.type,icon:null===(i=e.iconFn)||void 0===i?void 0:i.call(e,this[Ae](e)),locked:!1}))},action:i=>{t&&p[ke](this[Me])&&(m[Se](this[Me],{[ye]:e[we],is_keyboard:"keydown"===i.event.type}),e.onClick(this[Me],t))}}},this[fe]=()=>{this[ve][Qe][ge]({...this[ve][Qe][Ee],isColorOpen:!1})},this[pe]=()=>{this[ve][Qe][ge]({...this[ve][Qe][Ee],isInsertOpen:!1})},this[be]=()=>{this[ve][Qe][ge]({...this[ve][Qe][Ee],isTurnIntoOpen:!1})},this[me]=()=>{this[ve][Qe][ge]({...this[ve][Qe][Ee],isTemplatesOpen:!1})},this[ue]=this[Le]((()=>{var e;return g[he](this[Me],this.props[Te],null===(e=this[ce])||void 0===e?void 0:e[le][Ee])}))}renderComponent(){const{device:e,WindowSizeStore:t}=this[Me],i=this.isOpen(),{makeActionBarComponent:n}=this.props;return a()(r.Fragment,{},void 0,a()(C.Z,{capture:!0,[Ue]:e=>r[Pe]("div",o()({},e,{style:{[de]:re,width:"100%",height:0,zIndex:c.mobileActionBar}}),n(this[ve]),this.renderNativeMenuIgnoreSelectionArea(),this.renderInsertPopup(),this.renderTurnIntoPopup(),this.renderColorPopup(),this.renderTemplatesPopup())}),!i&&e.isIPhoneX&&e.isNative&&a()("div",{style:{[de]:"absolute",bottom:0,[ae]:"transparent",height:t[Ee].paddingBottomCSS,width:"100%",[se]:"none",[oe]:"none"}}))}renderNativeMenuIgnoreSelectionArea(){const e=this[Me][ne];return e?a()(I.Z,{[Qe]:this[ve][We],capture:g.shouldCaptureInputInNativeMenuIgnoreSelectionArea(this[Me]),ignoreBlockSelection:!1,[ie]:!1,[te]:"editing"!==Z.default[Ee].mode&&e[Ee].shouldRestoreSelectionForMenu,[Ue]:e=>null}):null}renderInsertPopup(){const{device:e}=this[Me];return a()(I.Z,{capture:this[ve][Qe][Ee].isInsertOpen,ignoreBlockSelection:!1,[ie]:!1,[te]:!1,[Ue]:t=>a()(F.ZP,{popupType:e[ee]?F.ZP[V][j]:F.ZP[V].Popup,[Q]:!0,open:this[ve][Qe][Ee].isInsertOpen,keepFocus:!0,[W]:()=>{t(),this[pe]()},[Ue]:()=>a()(x.Z,{[z]:v.og.Modal,[Ce]:a()(h.FormattedMessage,{[K]:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:a()(U.CancelMenuText,{}),[$]:()=>{t(),this[pe]()}},void 0,a()(w.Z,{[X]:u.wg[Ee].insertActions,[H]:{[Me]:this[Me],[J]:M.default[Ee][ve],[Y]:void 0},[G]:this[pe]}))})})}renderTurnIntoPopup(){const{device:e}=this[Me];return a()(I.Z,{capture:this[ve][Qe][Ee].isTurnIntoOpen,ignoreBlockSelection:!1,[ie]:!1,[te]:!0,[Ue]:()=>a()(F.ZP,{popupType:e[ee]?F.ZP[V][j]:F.ZP[V].Popup,open:this[ve][Qe][Ee].isTurnIntoOpen,keepFocus:!0,[W]:this[be],[Q]:!0,[Ue]:()=>a()(x.Z,{[z]:v.og.Modal,[Ce]:a()(h.FormattedMessage,{[K]:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:a()(U.CancelMenuText,{}),[$]:this[be]},void 0,a()(w.Z,{[X]:[{...u.gH,[Ce]:""}],[H]:{[Me]:this[Me],[J]:M.default[Ee][ve],[Y]:void 0},[G]:this[be]}))})})}renderColorPopup(){const{device:e}=this[Me];return a()(I.Z,{capture:this[ve][Qe][Ee].isColorOpen,ignoreBlockSelection:!1,[ie]:!1,[te]:!0,[Ue]:()=>a()(F.ZP,{popupType:e[ee]?F.ZP[V][j]:F.ZP[V].Popup,open:this[ve][Qe][Ee].isColorOpen,keepFocus:!0,[W]:this[fe],[Q]:!0,[Ue]:()=>a()(x.Z,{[z]:v.og.Modal,[Ce]:a()(h.FormattedMessage,{[K]:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:a()(U.CancelMenuText,{}),[$]:this[fe]},void 0,a()(w.Z,{[X]:[u.te,u.rz,u.Vm],[H]:{[Me]:this[Me],[J]:M.default[Ee][ve],[Y]:void 0},[G]:this[fe]}))})})}renderTemplatesPopup(){const{device:e}=this[Me];return a()(I.Z,{capture:this[ve][Qe][Ee].isTemplatesOpen,ignoreBlockSelection:!1,[ie]:!1,[te]:!1,[Ue]:()=>a()(F.ZP,{popupType:e[ee]?F.ZP[V][j]:F.ZP[V].Popup,open:this[ve][Qe][Ee].isTemplatesOpen,keepFocus:!0,[Ue]:()=>a()(x.Z,{[z]:v.og.Modal,[Ce]:a()(h.FormattedMessage,{[K]:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:a()(U.CancelMenuText,{}),[$]:this[me]},void 0,a()(P.Z,{type:P.i[q],[Qe]:this[ve][qe],[N]:void 0,disableInitialScroll:!0,disableCommandEnter:!0,[G]:this[me],[X]:[{key:"Basic",[Ue]:e=>a()(O.Z,{},void 0,e[xe]),items:D.ss.map(this[Be])},{key:L,[Ue]:e=>a()(O.Z,{[Ce]:a()(h.FormattedMessage,{[K]:L,id:"mobileActionBar.databaseSection.title"})},void 0,e[xe]),items:D.Im.filter((e=>e[_](this[Me]))).map(this[Be])},...this.templatePreviewSectionsStore[Ee]]}))})})}isOpen(){const{device:e}=this[Me];return e.isMobileBrowser?this[ve][Qe][Ee].isOpen:this[ue][Ee][_]}[Ae](e){return e.isLargeDatabaseIcon?{width:16,fill:this.theme[E],marginLeft:4,marginRight:4}:{width:20,fill:this.theme[E],marginLeft:2,marginRight:2}}}$e.displayName="MobileActionBarWrapper";const ze=(0,h.injectIntl)($e)},85394:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var n=i(77094),o=i.n(n),s=i(67294),a=i(83355),r=i(3909),d=i(51454),l=i(50906),c=i(55332),h=i(87531),u=i(74647),m=i(43250),b=i(5162),p=i(79315),v=i(72653),g=i(64921),f=i(59694);const y=i(85).K07,S=i(85).XCs,k=i(85).Fh9,A=i(85).XeC,T=i(85).YDv,B=i(85).jkI,M=i(85).H1U,Z=i(85).wlm,w=i(85).$Vg,I=i(85).UPJ,C=i(85).EMU,x=i(85).Xte,P=i(85).pkR,U=i(85).PG2,F=i(85).BJF,O=i(85).ncO,D=i(85).Ujl,R=i(85).QmD,E=i(85).qJ8,N=i(85).EIp,_=i(85).DiQ,L=i(85).KEh,q=i(85).noR,W=i(85).P3s,Q=i(85).wgE;class $ extends a.Z{constructor(){super(...arguments),this.handleClickFind=()=>{h.Kf({[Q]:this[Q],[W]:q}),l[L](this[Q],{itemName:_})},this.handleClickQuickAdd=()=>{u.quickAddPage({[Q]:this[Q],from:"mobile_bottom_bar"}),l[L](this[Q],{itemName:"add_page"})},this.handleUndo=()=>{c.Yw(this[Q],!0),l[L](this[Q],{itemName:"undo"})},this.handleRedo=()=>{c.KX(this[Q],!0),l[L](this[Q],{itemName:"redo"})},this.canQuickAdd=this[N]((()=>Boolean(p.default[R][E]&&p.default[R][E].canEdit())))}renderComponent(){const e=v.Z[R],t=(0,b.Y)("supportsNativeBottomBar"),{isTablet:i}=this[Q].device;if(e)return t?o()("div",{className:m.hidden},void 0,this[D]()):o()("div",{style:this[O](e),className:m.fadeInFast},void 0,i?this.renderTabletButtons():this.renderPhoneButtons())}renderPhoneButtons(){return o()(s.Fragment,{},void 0,this.renderSearchButton(),this[D](),this.renderQuickAddPageButton())}renderTabletButtons(){return o()(s.Fragment,{},void 0,this.renderSearchButton(),this[D](),this.renderQuickAddPageButton(),this.renderUndoRedoButtons())}renderSearchButton(){return o()(g.Z,{style:this.getSearchButtonStyle(),[U]:this.handleClickFind,mobileFeedback:!0},void 0,r.Z.mobileBottomBarSearch(this[F]()))}[D](){const{isTablet:e}=this[Q].device;return o()(f.Z,{format:e?f.Z.Format.MobileBottomBarTablet:f.Z.Format.MobileBottomBarPhone})}renderQuickAddPageButton(){return o()(g.Z,{style:this.getQuickAddButtonStyle(),[U]:this.handleClickQuickAdd,mobileFeedback:!0,[P]:!this.canQuickAdd[R],disabledFeedback:!0},void 0,r.Z.mobileBottomBarAddPage(this[F]()))}renderUndoRedoButtons(){return o()(s.Fragment,{},void 0,o()(g.Z,{style:this.getUndoButtonStyle(),[U]:this.handleUndo,mobileFeedback:!0,[P]:!c.L0(),disabledFeedback:!0},void 0,r.Z.mobileBottomBarUndo(this[F]())),o()(g.Z,{style:this.getRedoButtonStyle(),[U]:this.handleRedo,mobileFeedback:!0,[P]:!c.AZ(),disabledFeedback:!0},void 0,r.Z.mobileBottomBarRedo(this[F]())))}[O](e){const{[x]:t}=this[Q],{isTablet:i}=this[Q].device;return{position:"absolute",left:0,right:0,bottom:0,display:C,[I]:i?w:"space-around",height:t[Z]($.height),paddingBottom:t[R].paddingBottomCSS,background:this.theme.contentBackground,borderTop:`1px ${this.theme.darkDividerColor} solid`,zIndex:d.mobileBottomBar,pointerEvents:e?"auto":"none",cursor:"pointer"}}getSearchButtonStyle(){const{[x]:e}=this[Q],{isTablet:t}=this[Q].device;return{display:C,[M]:B,[I]:w,[C]:1,[T]:e[A](18),...t&&{[C]:"none",[T]:2,width:$[k],[I]:"center"}}}getQuickAddButtonStyle(){const{[x]:e}=this[Q],{isTablet:t}=this[Q].device;return{display:C,[M]:B,[I]:"flex-end",[C]:1,[S]:e[y](18),...t&&{[I]:"center",[C]:"none",[S]:0,width:$[k],marginRight:"auto"}}}getUndoButtonStyle(){const{[x]:e}=this[Q];return{display:C,[M]:B,[I]:w,[C]:"none",[T]:e[A](18),width:$[k]}}getRedoButtonStyle(){return{display:C,[M]:B,[I]:B,[C]:"none",width:$[k],[S]:4}}[F](){return{width:26,fill:this.theme.regularTextColor}}}$.displayName="MobileBottomBar",$.height=44,$[k]=54;const z=$},56140:(e,t,i)=>{i.r(t),i.d(t,{default:()=>bt});var n=i(77094),o=i.n(n),s=i(96486),a=i.n(s),r=i(17126),d=i(67294),l=i(83355),c=i(49085),h=i(15145),u=i(40506),m=i(7057),b=i(53877),p=i(42875),v=i(3909),g=i(21202),f=i(5366),y=i(26797),S=i(49865),k=i(5978),A=i(12359),T=i(66213),B=i(40863),M=i(84210),Z=i(87279);class w extends c.default{getInitialState(){return{}}}const I=w;var C=i(39098),x=i(13401),P=i(75498),U=i(73063),F=i(78140),O=i(43765),D=i(40721),R=i(72495),E=i(78948),N=i(6695),_=i(82990),L=i(33929),q=i(65598),W=i(79315),Q=i(9118),$=i(78030),z=i(52275),G=i(16354),H=i(31278),X=i(76798);const Y=i(85).voC,J=i(85).GKo,K=i(85).rJs,V=i(85).Hco,j=i(85).dMt,ee=i(85).ChN,te=i(85).ewQ,ie=i(85).XNW,ne=i(85).fOf,oe=i(85).PXg,se=i(85).AIq,ae=i(85).jkI,re=i(85).H1U,de=i(85).EMU,le=i(85).BQ6,ce=i(85).g7N,he=i(85).nLZ,ue=i(85).Exd,me=i(85).Au,be=i(85).wuN,pe=i(85).sM5,ve=i(85).MpA,ge=i(85).xKX,fe=i(85).pkR,ye=i(85).ffk,Se=i(85).oWD,ke=i(85).$pZ,Ae=i(85).$Jh;class Te extends l.Z{constructor(){super(...arguments),this[Ae]=e=>{const{schema:t,store:i,[ke]:n,[Se]:s}=this.props;if(t[e])return o()(Q.Z,{store:i,[ye]:e,[fe]:!0,locked:!1,format:$.C.Calendar,tableWrap:!1,[ke]:n,[Se]:s},e)}}renderComponent(){const{time:e,store:t}=this.props,i=t.hasIcon()||!t.isEmptyPage(),n=t.hasError(),s=(0,M.ZP)({store:t,fullyQualified:!1,pageVisitSource:h.tY.LinkInPage}),a=q[ge](t,{[ve]:!1});return o()(G.Z,{href:s},void 0,o()(z.Z,{focused:!1,title:o()(d.Fragment,{},void 0,e&&o()("div",{[le]:{[pe]:"flex",color:this[me][be],[ue]:14,[he]:8,[ce]:6}},void 0,e),o()("div",{[le]:{[pe]:de,[re]:ae,...e&&{[ce]:8}}},void 0,i&&!n&&o()(H.Z,{[fe]:!0,icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),size:24,[le]:{[se]:0,[oe]:8}}),n&&v.Z[ne]({[ie]:2,[oe]:10,width:20,fill:this[me][te].orange[500]}),o()(X.Z,{store:t,[le]:{[ee]:_.Z[ee].semibold}}),a>0&&o()("div",{[le]:{[pe]:"flex",[re]:"center",color:this[me][j],[ue]:12,[ie]:4,[se]:0}},void 0,v.Z.speechBubble({width:12,height:12,[oe]:4,fill:this[me][V]}),a))),caption:this[K]()}))}[K](){const{format:e,schema:t,store:i}=this.props,n=(e[J]?e[J].filter((e=>e.visible)).map((e=>e[ye])):[]).filter((e=>{var n;return N.cardPropertyFormatIsVisible({block:i.getModel(),[ye]:e,schema:t,[Y]:i[Y],userId:null===(n=W.default.state.currentUserStore)||void 0===n?void 0:n.id,userTimeZone:(0,p.r)(),intl:L.default.getIntl()})}));if(n.length>0)return o()("div",{[le]:{[he]:8}},void 0,n.map(this[Ae]))}}Te.displayName="MobileCalendarDayMenuItem";const Be=Te,Me=i(85).nSw,Ze=i(85).qq3,we=i(85).YaF,Ie=i(85).xG0,Ce=i(85).N6$,xe=i(85).$pZ,Pe=i(85).uRL,Ue=i(85).EIp,Fe=i(85).f7G,Oe=i(85).LIR,De=i(85).ejZ,Re=i(85).T9w,Ee=i(85).LCr,Ne=i(85).q$s,_e=i(85).sP9,Le=i(85).wgE,qe=i(85).Drs,We=i(85).JJj,Qe=i(85).ixe,$e=i(85).QmD,ze=i(85).Gnd,Ge=i(85).Wp_,He=i(85).iVN,Xe=i(85).RH8,Ye=i(85).TLr,Je=i(85).nx5,Ke=i(85).TtP,Ve=i(85).wJk,je=i(85).XNW,et=i(85).Q9F,tt=i(85).PG2,it=i(85).nLZ,nt=i(85).PXg,ot=i(85).xoW,st=i(85).jqN,at=i(85).oWD,rt=i(85).P0R,dt=i(85).P24,lt=i(85).pkR,ct=i(85).wfR,ht=i(85).p6m,ut=i(85).XtO;class mt extends l.Z{constructor(){super(...arguments),this.storeTypes={[ut]:I,[ht]:c.default[ct](void 0)},this.renderResults=()=>{const{[lt]:e,[dt]:t}=this[rt],i=t[at]();if(!i)return;const n=this[st](),s=n.endOf("day"),a=this.getCurrentResults();return o()(F.Z,{menuType:Z.og.Modal,title:o()("div",{style:mt[ot]},void 0,o()(U.Z,{[tt]:this.handleLeftClick,icon:v.Z.chevronLeft,style:{[nt]:8,[it]:2},mobileFeedback:!0}),o()("div",{},void 0,(0,m.ZW)(n,"month_day_long")),o()(U.Z,{[tt]:this.handleRightClick,icon:v.Z[et],style:{[je]:8,[it]:2},mobileFeedback:!0})),right:o()(D.DoneMenuText,{}),[He]:this[rt][Ve]},void 0,!a&&o()(R.Z,{},void 0,o()(E.Z,{})),a&&0===a[Ke]&&o()(R.Z,{},void 0,o()(O.Z,{title:o()(f.FormattedMessage,{[Je]:"No items",id:"mobileCalendarDayMenu.noResults.message"})})),a&&a[Ke]>0&&o()(R.Z,{},void 0,a.map((e=>{const t=C.G[Ye](i,{id:e.id,table:g.iU});return this.renderItem(t,e,n,s)}))),!e&&o()(R.Z,{topBorder:!0},void 0,o()(x.Z,{focused:!1,[tt]:this[Xe],title:o()(f.FormattedMessage,{[Je]:"New item",id:"mobileCalendarDayMenu.newItemButton.label"})})))},this.handleLeftClick=()=>{const e=this[st]();this[ze][ut][Ge]({...this[ze][ut][$e],currentStartOfDay:e.minus({day:1}).valueOf()})},this.handleRightClick=()=>{const e=this[st]();this[ze][ut][Ge]({...this[ze][ut][$e],currentStartOfDay:e.plus({day:1}).valueOf()})},this[Xe]=()=>{const{[dt]:e,calendarBy:t,[Qe]:i}=this[rt],n=this[st](),{performResult:o}=A[We]({[qe]:"MobileCalendarDayMenu.newStore",[Le]:this[Le],perform:o=>{const{newStore:s}=S.createBlockInGroup({[Le]:this[Le],[dt]:e,[_e]:[],results:i[$e],insertAtIndex:0,coerce:!1,[Ne]:!0,[Ee]:o,from:"mobile_calendar_day_menu"});return y.xD({type:Re,[Le]:this[Le],[ut]:s,[De]:t,timestampMs:n.valueOf(),[Ee]:o}),s}}),s=(0,M.ZP)({[ut]:o,[Oe]:h.tY.Create});this[Fe](s)},this.reducerStore=this[Ue]((()=>{const{[dt]:e}=this[rt];return(0,B.YG)({[dt]:e,startOfDay:this[st]().valueOf()})}),!0)}[Fe](e){this.context[Pe]?this.context[Pe](e):k[Fe]({[Le]:this[Le],url:e})}renderComponent(){const{[dt]:e}=this[rt],t=this.reducerStore[$e];if(t)return o()(P.Z,{id:"calendar_day_results",reducer:t,[dt]:e,render:this.renderResults,[ht]:this[ze][ht]})}renderItem(e,t,i,n){const{[lt]:s,[xe]:a,[dt]:r}=this[rt],d=r[at]();if(d)return o()(Be,{[ut]:e,time:t.includeTime?this.renderTime(t,i,n):void 0,[lt]:s,format:this[rt].format,schema:this[rt].schema,[xe]:a,[at]:d},t.id)}renderTime(e,t,i){const{schema:n,calendarBy:o,intl:s}=this[rt],a=n[o];if(!a||"date"!==a.type)return;const r=a.date_format||u.defaultDateFormat,d=a[Ce]||u.defaultTimeFormat,l=e.start,c=e.end,h=Boolean(!(t<=l&&l<=i)||c&&!(t<=c&&c<=i));if(e.end){const t=b.dateTimeRange(e.start.valueOf(),e.end?e.end.valueOf():e.start.valueOf(),e.timeZone??(0,p.r)());return h?(0,m.ZV)({value:t,date_format:r,[Ce]:d,userTimeZone:e.timeZone,allowRelativeDates:!0,intl:s}):(0,m.ns)({[Ie]:t[Ie],end_time:t.end_time,[Ce]:d,humanReadable:!0,intl:s})}return(0,m.mr)({[Ie]:b.dateTime(e.start.valueOf(),e.timeZone??(0,p.r)())[Ie],[Ce]:d,humanReadable:!0,intl:s})}[st](){const{currentStartOfDay:e}=this[ze][ut][$e];return e?r.ou.fromMillis(e):r.ou.fromMillis(this[rt].initialStartOfDay)}getCurrentResults(){const{[dt]:e}=this[rt],t=e[at]();if(!t)return;const i=this[ze][ht][$e],n=e[we][$e],o=e[Ze][$e],s=n?n.calendar_by:void 0;if(!(i&&n&&s&&o))return;let r=a().compact(i.blockIds.map((e=>{const i=C.G[Ye](t,{id:e,table:g.iU});return(0,B.BO)({blockStore:i,calendarBy:s,schema:o,[Me]:t[Me],userId:this[Le].currentUser.id,intl:this[rt].intl})})));return n.sort||(r=a().sortBy(r,(e=>e.start))),r}}mt.displayName="MobileCalendarDayMenu",mt.contextTypes={...T.wK,...l.w},mt[ot]={display:"flex",alignItems:"center",height:"100%"};const bt=(0,f.injectIntl)(mt)},49374:(e,t,i)=>{i.r(t),i.d(t,{default:()=>wi});var n=i(97464),o=i.n(n),s=i(77094),a=i.n(s),r=i(67294),d=i(83355),l=i(1302),c=i(27328),h=i(69615),u=i(15145),m=i(8848),b=i(3909),p=i(89101),v=i(21202),g=i(82990),f=i(51454),y=i(5366),S=i(50906),k=i(17503),A=i(11302),T=i(5978),B=i(87531),M=i(24677),Z=i(48429),w=i(74647),I=i(29974),C=i(98104),x=i(12359),P=i(39865),U=i(28020),F=i(43250),O=i(78089),D=i(87279),R=i(67669),E=i(58241),N=i(58239),_=i(33665),L=i(45094),q=i(38755),W=i(25464),Q=i(5162),$=i(79315),z=i(92547),G=i(69454),H=i(42330),X=i(30496),Y=i(39098),J=i(7755),K=i(24666),V=i(52258),j=i(66708),ee=i(83575),te=i(48601),ie=i(1449),ne=i(91754),oe=i(64921),se=i(31945),ae=i(61519),re=i(73063),de=i(21199),le=i(78140),ce=i(40721),he=i(89728),ue=i(44532),me=i(31278),be=i(76798),pe=i(45653),ve=i(39849),ge=i(81954),fe=i(72412),ye=i(81258),Se=i(24809),ke=i(61208);const Ae=i(85).Mor,Te=i(85).LtW,Be=i(85).N20,Me=i(85).Gqc,Ze=i(85).tDk,we=i(85).nx5;function Ie(){window.__c={n:"MobileUpdatesModalPageTab"};const e=(0,r.useCallback)((()=>a()(ke.Z,{message:a()(y.FormattedMessage,{[we]:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:a()(y.FormattedMessage,{[we]:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,ge.VK)((()=>$.default.state.currentSpaceStore),[]),i=(0,ge.VK)((()=>$.default.state[Ze]),[]),n=(0,ge.VK)((()=>{var e;const t=null==i||null===(e=i[Me]())||void 0===e?void 0:e.id,n=null==i?void 0:i.isCollectionView();return null!=i&&i.isDefined()?{id:i.id,isCollection:n,[Be]:t}:void 0}),[i]);return t&&n&&i?a()("div",{},void 0,a()(fe.GetNotifiedFor,{navigableBlock:i,from:"page_updates",[Te]:ye.Z}),a()(Se.Z,{navigableBlock:i,[Be]:n[Be],spaceId:t.id,empty:e,source:Ae},"current-page")):null}var Ce=i(92955),xe=i(46736),Pe=i(50708),Ue=i(13612),Fe=i(40673),Oe=i(94686),De=i(55725),Re=i(59711),Ee=i(11819),Ne=i(12253),_e=i(95796),Le=i(23727),qe=i(13018);const We=i(85).dPb,Qe=i(85).NF1,$e=i(85).ptY,ze=i(85).gV1,Ge=i(85).Mm1,He=i(85).ccq,Xe=i(85).iVN,Ye=i(85).qU4,Je=i(85).wuN,Ke=i(85).iru,Ve=i(85).tLG,je=i(85).O8Z,et=i(85).ZG6,tt=i(85).ceT,it=i(85).eXX,nt=i(85).XNW,ot=i(85).gGi,st=i(85).jkI,at=i(85).EMU,rt=i(85).xOW,dt=i(85).fBv,lt=i(85).R$v,ct=i(85).HEH,ht=i(85).J1r,ut=i(85).LtW,mt=i(85).SvQ,bt=i(85).VR,pt=i(85).Scd,vt=i(85).AIq,gt=i(85).NLk,ft=i(85).Au,yt=i(85)._Fe,St=i(85).ChN,kt=i(85).cx2,At=i(85).$Fm,Tt=i(85).nx5,Bt=i(85).K07,Mt=i(85).XCs,Zt=i(85).XeC,wt=i(85).YDv,It=i(85).Jkr,Ct=i(85).H1U,xt=i(85).sM5,Pt=i(85).tBn,Ut=i(85).D7I,Ft=i(85).PG2,Ot=i(85).QIl,Dt=i(85).PXg,Rt=i(85).BQ6,Et=i(85).TVJ,Nt=i(85).X_m,_t=i(85).hKK,Lt=i(85).dLQ,qt=i(85).UPJ,Wt=i(85).ncO,Qt=i(85).Zvr,$t=i(85).Aw$,zt=i(85).E0z,Gt=i(85).Xte,Ht=i(85).vN2,Xt=i(85).rG,Yt=i(85).bSA,Jt=i(85).UVz,Kt=i(85).LCr,Vt=i(85).Drs,jt=i(85).JJj,ei=i(85).F9A,ti=i(85).TLr,ii=i(85).jDA,ni=i(85).JXA,oi=i(85).kdG,si=i(85).tDk,ai=i(85).qJ8,ri=i(85).K8m,di=i(85).LIR,li=i(85).Und,ci=i(85).EXq,hi=i(85).QmD,ui=i(85).Ubh,mi=i(85).DgF,bi=i(85).XhL,pi=i(85).Wp_,vi=i(85).P3s,gi=i(85).q5h,fi=i(85).cS_,yi=i(85).wgE,Si=i(85).g65,ki=i(85).Sgw,Ai=i(85).P0R,Ti=i(85).XtO,Bi=i(85).hDW,Mi=i(85).EIp;class Zi extends d.Z{constructor(){super(...arguments),this.hasUnreadCommentsStore=this[Mi]((()=>(0,O.DF)({[Bi]:this[Ai][Ti],[ki]:this[yi][Si].id}).some((e=>!e.getResolved()&&(0,O.NI)(e).some((t=>k.t({[fi]:e,[gi]:t})))))),!1),this.handleOpenQuickFind=()=>{B.UT({[yi]:this[yi],[vi]:"public-page-topbar"})},this.handleTopbarClick=()=>{M.clear(this[yi])},this.handleUpdatesClick=()=>{X.Z[pi]({open:!0}),S.trackOpenPageUpdates(this[yi])},this[bi]=()=>{const{[mi]:e,[ui]:t}=$.default[hi];e&&t&&I[bi]({[yi]:this[yi],[ci]:e,[li]:t,[di]:u.tY.SwitchSpace})},this.handleAddToClick=async()=>{await A.$X({[yi]:this[yi],blocks:[this[Ai][Ti]],moveToContext:"quick_add",onAccept:this.handleAddToAccept,isAddTo:!0,[ri]:this[ri]()})},this.handleAddToAccept=e=>{const{[ai]:t}=$.default[hi];t&&this[Ai].saveParent&&(0,N.rq)({[ki]:this[yi][Si].id,spaceId:t.id,value:e}),S.trackMobileAddToMenuAccept(this[yi])},this.handleCancelQuickAdd=e=>{const t=$.default[hi][si],i=H.ZP[hi].lastPageId;if(t){var n;const e=null===(n=this[yi][oi])||void 0===n?void 0:n[ni]();e?T.navigateToHomeTab(this[yi]):i?T[ii]({[yi]:this[yi],[Ti]:Y.G[ti](t,{table:v.iU,id:i}),showMoveTo:!1,saveParent:!1,[ei]:e,[di]:u.tY.BackForward}):T.navigate({[yi]:this[yi],url:p._j.root,[ei]:!0}),x[jt]({[Vt]:"TopbarMobile.handleCancelQuickAdd",[yi]:this[yi],perform:e=>{P.y8({[yi]:this[yi],blocks:[t],[Kt]:e}),e[Jt].push((e=>{e||S.trackBlockAction(this[yi],{[Yt]:Xt,from:"mobile_topbar",block_id:t.id,[Ht]:"page"})}))}})}}}renderComponent(){const{[Ti]:e}=this[Ai],{[Gt]:t,[zt]:i}=this[yi],n=(0,R.userHasPermissionViaPublicAccess)(this[yi],this[Ai][Ti]),s=new z.Z,d=(e.isLocked()||s[hi].justUnlocked)&&e[$t](),l=(!n||e[Qt]())&&i.isPhone&&(e.isRestricted()||d);return a()(de.Z,{capture:!0,render:i=>r[Ut]("header",o()({},i,{[Rt]:this[Wt]()}),n?this.renderPublicPageTopbar():this.renderNormalTopbar(),l&&a()(ne.Z,{type:ne.$.White,[Lt]:!0,[Rt]:{[qt]:"unset"}},void 0,a()(xe.Z,{[Ti]:this[Ai][Ti],[Lt]:!0,[_t]:s},this[Ai][Ti].id),e.isRestricted()&&r[Ut](r[Pt],null,d&&a()(ae.Z,{[Et]:!0,size:10,[Rt]:{[Nt]:"50%"}}),a()(Ne.Z,{[Rt]:{[Dt]:8},[Ft]:()=>Z[Ot](this[yi])}))),this[Ai].isOffline&&a()(ne.Z,{type:ne.$.White,[Lt]:!0},void 0,a()("div",{[Rt]:{[xt]:"flex",[Ct]:"center",[It]:"100%",[wt]:t[Zt](10),[Mt]:t[Bt](14)}},void 0,b.Z.mobileOffline({[It]:26,[Dt]:12}),a()("div",{},void 0,a()(y.FormattedMessage,{[Tt]:"You're offline",id:"topbarMobile.offline.message"})))),a()(te.Z,{banners:this[Ai].banners,[Lt]:!0,[At]:!1}))})}renderPublicPageTopbar(){const{[Ti]:e}=this[Ai];return a()("div",{[Ft]:this.handleTopbarClick,[Rt]:this[kt](),className:F.topbarMobile},void 0,this[yi][Si].isLoggedIn()&&a()(r.Fragment,{},void 0,a()(oe.Z,{[Rt]:{[xt]:"flex",[Ct]:"center",[Nt]:"100%",[wt]:14,[Mt]:14,[St]:g.Z[St].medium,color:this[ft][yt],[gt]:"nowrap"},mobileFeedback:!0,[Ft]:this[bi]},void 0,a()(y.FormattedMessage,{[Tt]:"Back",id:"topbarMobile.backButton.label"})),a()("div",{[Rt]:{[Nt]:18,[It]:1,[vt]:0,[Dt]:6,[pt]:this[ft][bt]}})),a()(ie.Z,{[Ti]:this[Ai][Ti],[Rt]:this.getBreadcrumbsStyle(),maxAncestorCount:1,showCurrentPageControls:!1,[mt]:100,currentPageMaxWidth:220,[Lt]:!0}),a()("div",{[Rt]:{flexGrow:1,[vt]:1}}),a()(he.Z,{[Ft]:this.handleOpenQuickFind},void 0,b.Z.search({[It]:20,[Nt]:20})),a()(Ue.Z,{[Ti]:e,[ut]:V.Z}))}renderNormalTopbar(){const{[Ti]:e,[ht]:t,[ct]:i,hideActionButtons:n}=this[Ai],{[zt]:o}=this[yi],{isTablet:s}=o,d=this[Ai].isInvalidPage,l=this.shouldRenderBackButton();return a()("div",{[Ft]:this.handleTopbarClick,[Rt]:this[kt](),className:F.topbarMobile},void 0,this.shouldShowHamburgerButton()&&this.renderHamburgerButton(),l&&a()(Oe.Z,{supportsNativeHomeTabPhone:!s&&(0,Q.Y)("supportsNativeHome")}),!d&&this.renderBreadcrumbs(l),e[Qt]()&&s&&a()(xe.Z,{[Ti]:e,[Lt]:!1},e.id),a()(De.Z,{}),!n&&r[Ut](r[Pt],null,e.isRestricted()&&s&&a()(Ne.Z,{[Rt]:{[Dt]:8},[Ft]:()=>Z[Ot](this[yi])}),s&&e[$t]()&&t&&i&&a()(Ee.Z,{rootStore:e,[ht]:t,[ct]:i}),this.shouldShowCancelQuickAdd()?this.renderCancelQuickAdd():this.renderRightButtons()))}isEmptyPageAndTitle(){const{[Ti]:e}=this[Ai];return e.isEmptyTitle()&&e.isEmptyPage()}shouldShowCancelQuickAdd(){return this[Ai].shouldShowAddTo&&this.isEmptyPageAndTitle()}[lt](){return(0,Q.Y)("supportsNativeHome")&&this[yi][zt].isTablet}shouldShowHamburgerButton(){return this[lt]()||!(0,Q.Y)("supportsNativeHome")}renderHamburgerButton(){return a()(oe.Z,{mobileFeedback:!0,[Rt]:{[dt]:rt,[xt]:at,[Ct]:st,[qt]:st,[vt]:0,[Nt]:ot,[It]:36,[nt]:4},[Ft]:()=>{var e;if(this[lt]())null===(e=this[yi][oi])||void 0===e||e.toggleNativeHome();else if((0,L.canExpandSidebar)(this[yi]))w.setExpand({[yi]:this[yi],isExpanded:!J.gV[hi],from:"topbar_mobile"});else{const{[it]:e}=this[yi],t=e?e[hi][tt]:null;"editing"===K.default[hi].mode||null!==t?(C.clear(this[yi]),null==e||e.clear(!1),G.Z.onHide((()=>{l.default[et]((()=>w.open()))}))):w.open()}S.trackOpenMobileSidebar(this[yi])}},void 0,b.Z.hamburgerMenu({[It]:18,[Nt]:18}),a()(Ce.Z,{type:this[yi][zt][je]?"allSpaces":"otherSpaces",color:ve.Z.Color.Red,[Rt]:{[dt]:Ve,top:9,right:1}}))}renderBreadcrumbs(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isTablet:t}=this[yi][zt],i=(0,E.q0)();return this[Ai].shouldShowAddTo?this.renderAddTo():i?a()(Pe.Z,{}):a()(ie.Z,{[Ti]:this[Ai][Ti],[Rt]:this.getBreadcrumbsStyle(e),maxAncestorCount:t?2:1,showCurrentPageControls:!1,[mt]:t?160:100,currentPageMaxWidth:t?240:220,[Lt]:!0})}shouldRenderBackButton(){const{TabbedRouterStore:e}=this[yi],t=(0,_.canGoBack)(this[yi])||"native"===(0,c.w_)(e[hi]).type;return!(0,_.isTabbedRouterStoreEnabled)(this[yi])||t}renderAddTo(){const{[Ti]:e}=this[Ai],t=e[Ke](),i=this[ri]();if(!(t instanceof Y.T5||t instanceof Y.zq)&&t){if(i){const e=this[ft][Je];return a()(oe.Z,{mobileFeedback:!0,[Rt]:this.getAddToButtonStyle(),[Ft]:this.handleAddToClick},void 0,a()(y.FormattedMessage,{[Tt]:"<mediumcolor>Add to</mediumcolor>{userAvatar}<mediumweight>Private pages</mediumweight>",id:"topbarMobile.addToPrivateSectionButton.label",values:{mediumcolor:t=>a()("span",{[Rt]:{color:e,[Dt]:8}},void 0,t),mediumweight:e=>a()("span",{[Rt]:{[St]:g.Z[St].medium,[nt]:4}},void 0,e),userAvatar:a()(pe.Z,{size:22,avatarShouldShowShadow:!0,userStore:(0,U.getCurrentUserStore)(this[yi])})}}),this.renderChevron())}{const i=e instanceof Y.H2?(0,q.Wd)(this[yi],e):e.getIcon();return a()(oe.Z,{mobileFeedback:!0,[Rt]:this.getAddToButtonStyle(),[Ft]:this.handleAddToClick},void 0,a()("span",{[Rt]:{color:this[ft][Je]}},void 0,a()(y.FormattedMessage,{[Tt]:"Add to",id:"topbarMobile.addToPageOrWorkspaceSectionButton.label"})," "),a()(me.Z,{disabled:!0,icon:i,isEmptyPage:t.table===v.iU&&t.isEmptyPage(),title:t instanceof Y.H2?(0,q.rn)(this[yi],t):void 0,size:24,[Rt]:{[nt]:8,[Dt]:4}}),a()(be.Z,{[Rt]:{[St]:g.Z[St].semibold},[Ti]:t}),this.renderChevron())}}}renderChevron(){return b.Z.chevronDown({[nt]:4,[It]:10,fill:this[ft].lightTextColor})}renderRightButtons(){const{[Ti]:e,spaceStore:t,isInvalidPage:i}=this[Ai];if(i)return;const n=Boolean(t&&!t[$t]()),o=e[$t](),s=(0,Fe.UP)({isSpaceGuest:n,canEditPage:o}),d=(0,Fe.W2)({canEditPage:o,[zt]:this[yi][zt]});return a()(r.Fragment,{},void 0,this.renderPageUpdatesPopupOrigin(),s&&this.renderShare(),this.renderCommentsButton(),d&&a()(Le.l,{[Ft]:this.handleUpdatesClick}),this.renderShowMore())}renderCancelQuickAdd(){return a()(oe.Z,{mobileFeedback:!0,[Rt]:{[xt]:at,[Ct]:st,[Nt]:ot,[wt]:16,[Mt]:16,[St]:g.Z[St].medium,color:m.ZP.blue},[Ft]:this.handleCancelQuickAdd},void 0,a()(y.FormattedMessage,{[Tt]:"Cancel",id:"topbarMobile.cancelQuickAddButton.label"}))}renderShowMore(){return a()(Re.Z,{[Ti]:this[Ai][Ti],[Ye]:this[Ai][Ye],[ut]:V.Z})}renderShare(){return a()(_e.Z,{[Ti]:this[Ai][Ti],[ut]:j.Z})}renderPageUpdatesPopupOrigin(){const e={[tt]:D.og.Modal,title:a()(y.FormattedMessage,{[Tt]:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:a()(ce.DoneMenuText,{}),[Xe]:()=>X.Z[pi]({open:!1}),whiteBackground:!0};return a()(ue.ZP,{open:X.Z[hi].open,popupType:se.Z4.SlideUp,alignmentToOrigin:W.v.Start,[He]:W.u.Right,onDismiss:()=>X.Z[pi]({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>r[Ut](le.Z,e,a()(Ie,{})),isFullWidthOnMobile:!0,preventScaleTransition:!0})}renderCommentsButton(){return a()(se.ZP,{[ut]:ee.Z,popupType:se.Z4.SlideUp,alignmentToOrigin:W.v.Start,[He]:W.u.Right,originGap:0,stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>a()(le.Z,{[tt]:D.og.Modal,scrollerStyle:{[Ge]:0},title:a()(y.FormattedMessage,{[Tt]:"Comments",id:"topbarMobile.commentsMenu.title"}),right:a()(ce.DoneMenuText,{}),[Xe]:e.close},void 0,a()(qe.J,{timeMounted:Date.now(),location:ze})),isFullWidthOnMobile:!0,preventScaleTransition:!0,renderOrigin:e=>a()("div",{[Rt]:{[dt]:rt,[Nt]:ot}},void 0,r[Ut](re.Z,o()({icon:b.Z.mobileTopbarComments,iconStyle:{[It]:26,[Nt]:26,fill:$e},isDarkIconColor:!0,[Rt]:{[nt]:6,[Dt]:6,[Nt]:ot},mobileFeedback:!0},e)),this.hasUnreadCommentsStore[hi]&&a()("div",{[Rt]:{[dt]:"absolute",top:9,right:5,[Nt]:8,[It]:8,[Qe]:4,[pt]:m.ZP.red}}))})}[ri](){const e=this[Ai][Ti][Ke](),{[ai]:t}=$.default[hi];return e instanceof Y.H2&&t&&e.id===t.id}[Wt](){return{[It]:ot,maxWidth:"100vw",zIndex:f.topbar}}[kt](){const{[Gt]:e}=this[yi];return{[xt]:at,[qt]:"space-between",[Ct]:st,[It]:ot,maxWidth:"100vw",[Nt]:h.g,marginTop:e[hi].paddingTopCSS,[wt]:e[Zt](0),[Mt]:this[Ai].shouldShowAddTo?e[Bt](0):e[Bt](7),boxShadow:`0 1px 0 ${this[ft].regularDividerColor}`,[pt]:this[ft].contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}getBreadcrumbsStyle(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{[oi]:t,[zt]:i}=this[yi],{isTablet:n}=i;return{flexGrow:0,[nt]:null!=t&&t[ni]()?e?0:20:2,overflow:"auto",[We]:"touch",[Dt]:n?16:8,[Nt]:ot}}getAddToButtonStyle(){let e=0;return e=this[lt]()?8:this.shouldRenderBackButton()?6:16,{[xt]:at,[Ct]:st,[wt]:e,[Mt]:12,fontSize:g.Z.fontSize.UIRegular.mobile,lineHeight:g.Z.lineHeight.UIRegular.mobile,[gt]:"nowrap",minWidth:0}}}Zi.displayName="TopbarMobile",Zi.notionLogoStyle={[It]:18,[Nt]:18,[Dt]:6,fill:$e};const wi=Zi},97680:(e,t,i)=>{i.d(t,{Z:()=>k});var n=i(97464),o=i.n(n),s=i(77094),a=i.n(s),r=i(67294),d=i(83355),l=i(66897),c=i(97880),h=i(33929),u=i(87279),m=i(98742),b=i(52275),p=i(58032),v=i(70301),g=i(45653);const f=i(85).D7I,y=i(85).nfT;class S extends d.Z{renderComponent(){const{actor:e,userTitle:t,useEmailAsTooltip:i,tooltip:n,tooltipPlacement:s}=this.props,d=h.default.getIntl(),u=e[y]&&e.isUser()?e.email:void 0,S=i&&u?u:n,k=this.environment.device.isMobile?24:20;let A;return(0,l.YU)(e)?A=a()(v.Z,{botValue:null==e?void 0:e[y],size:k}):(0,l.$S)(e)?A=a()(g.Z,{userValue:null==e?void 0:e[y],size:k}):(0,l.Iq)(e)?A=a()(g.Z,{userValue:void 0,size:k}):(0,c.unreachable)(e),a()(p.Z,{placement:s??p.Z.Placement.Bottom,alignment:p.Z.Alignment.Start,textWrap:!0,render:i=>r[f](b.Z,o()({},(0,m.Z)(i,this.props),{icon:A,title:t??(0,l.$4)(d,e),className:"notranslate"})),disableTooltip:!S,renderTooltip:()=>S})}}S.displayName="UserMenuItem",S.contextTypes={...u.mw,...d.w};const k=S},56940:(e,t,i)=>{i.d(t,{Z:()=>B});var n=i(83355),o=i(1302),s=i(24677),a=i(98104),r=i(80935),d=i(63334),l=i(27724),c=i(24666);const h=i(85).ZG6,u=i(85).mPA,m=i(85).t5q,b=i(85).kzQ,p=i(85).Wp_,v=i(85).P0R,g=i(85).l81,f=i(85).Gnd,y=i(85).QmD,S=i(85).NHZ,k=i(85).yKO,A=i(85).XtO;class T extends n.Z{constructor(){super(...arguments),this.storeTypes={[A]:d.Z},this[k]=()=>{const{savedHref:e,savedSelectionStoreState:t,[S]:i}=this[f][A][y];window[g].href===e&&(this[v].ignoreBlockSelection&&t&&l.default[p]({...l.default[y],...t}),i&&"editing"===i.mode&&c.default[p]({...c.default[y],...i})),this[b]()}}willMount(){this[v][m]&&(this[u]=document.createElement(u),this[u].style.position="fixed",this[u].style.top="-9999px",this[u].style.left="-9999px",document.body.appendChild(this[u])),this[v].capture&&(this.saveSelection(),this[v][m]&&o.default[h]((()=>{this[u].focus()})))}willUpdate(e){this[v].capture?e.capture||(e[k]?this[k]():this[b]()):e.capture&&(this.saveSelection(),this[v][m]&&o.default[h]((()=>{this[u].focus()})))}willUnmount(){this[v].capture&&(this[v][k]?this[k]():this[b]()),this[v][m]&&document.body.removeChild(this[u])}renderComponent(){return this[v].render(this[k])}saveSelection(){this[f][A][p]({...this[f][A][y],savedHref:window[g].href,savedSelectionStoreState:l.default.cloneState(),[S]:c.default.cloneState(),savedTextSelectionRect:r.getSelectionRect()}),this[v].ignoreBlockSelection?s.clear(this.environment):a.clear(this.environment)}[b](){this[f][A][p]({...this[f][A][y],savedHref:void 0,savedSelectionStoreState:void 0,[S]:void 0,savedTextSelectionRect:void 0});const e=this[u];o.default[h]((()=>{e&&document.activeElement===e&&e.blur()}))}}T.displayName="IgnoreSelectionArea";const B=T},46111:(e,t,i)=>{i.r(t),i.d(t,{default:()=>wn});var n=i(77094),o=i.n(n),s=i(96486),a=i.n(s),r=i(67294),d=i(83355);const l=i(85).iDK;function c(e,t){const i=(0,r.useRef)(Math.random().toString(36).substr(2,9)),n=t,o=(0,r.useRef)();return(0,r.useEffect)((()=>{if(o&&o[l]&&a().isEqual(o[l],n))return;const t=i[l];e&&(e({type:"mount",id:t,props:n}),o[l]=n)}),[e,n]),e?i[l]:void 0}var h=i(480),u=i(41432),m=i(8848),b=i(97880),p=i(36054),v=i(74487);const g=i(85).B3l,f=i(85).HPZ,y=i(85).MDn,S=i(85).JP6,k=i(85).uRr,A=i(85).f8x,T=i(85).D_K,B=i(85).H0L,M=i(85).I_B,Z=i(85).hSJ,w=i(85).TaP,I=i(85).eCx;function C(e,t,i){const{content:n,[I]:o}=i;return{id:e,content:n,action:{type:t,[I]:o}}}const x=[w,"turnInto",Z,M],P=["textFormatting"],U=[Z,w,"turnInto","template"];function F(e,t){return{type:e,[I]:t}}function O(e,t,i){const n={type:e,from:i,data:t};return JSON[B](n)}const D={showActionBarMenu:v[T]({[A]:{type:v.literal("showActionBarMenu"),data:v[T]({[A]:{actionBarMenuId:v[k](...U)},[S]:{}})},[S]:{}}),[y]:v[T]({[A]:{type:v[k](y),data:v[T]({[A]:{action:v[k]("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai")},[S]:{}})},[S]:{from:v[k](f,g)}})},R=Object.keys(D);let E;!function(e){e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData"}(E||(E={}));class N{constructor(e,t){this.type=e,this.message=t}}function _(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const L=i(85).pwK,q=i(85).nM6,W=i(85).hBe,Q=i(85).QR3,$=i(85).EuN,z=i(85).HPZ,G=i(85).mEm,H=i(85).$p1,X=i(85).RPR,Y=i(85).bmU,J=i(85).ceT,K=i(85).HzR,V=i(85).TaP,j=i(85).x_I,ee=i(85).X5t,te=i(85).MDn,ie=i(85).hDM,ne=i(85).eCx,oe=i(85).C$2,se=i(85).pkR,ae=i(85).MC6,re=i(85).vcr,de=i(85).ZYC,le=i(85).I6S,ce=i(85).lUP,he=i(85).paz,ue=i(85).hlH,me=i(85).nkj,be=i(85)._QU,pe=i(85).nD7;function ve(e){return[C("mab.button.moveUp",ue,{[he]:{type:ce,[le]:{[de]:"arrow.up.to.line.alt",[re]:"moveUp"},[oe]:e[pe].moveUp,[se]:e.disableBlockActions},[ne]:{[ie]:O(te,{[ee]:"moveUp"})}}),C("mab.button.moveDown",ue,{[he]:{type:ce,[le]:{[de]:"arrow.down.to.line.alt",[re]:L},[oe]:e[pe][L],[se]:e.disableBlockActions},[ne]:{[ie]:O(te,{[ee]:L})}})]}function ge(e){const{id:t,disableBlockActions:i,disableIndent:n,disableUnindent:o,shouldFadeIn:s,includeUpAndDown:a,[pe]:r}=e;if(!(i||n&&o)){var d={id:t,shouldFadeIn:s,[me]:[C("mab.button.indent",ue,{[he]:{type:ce,[le]:{[de]:"decrease.indent",[re]:q},[oe]:r.dedent,[se]:i||o},[ne]:{[ie]:O(te,{[ee]:q})}}),C("mab.button.unindent",ue,{[he]:{type:ce,[le]:{[de]:"increase.indent",[re]:"indent"},[oe]:r.indent,[se]:i||n},[ne]:{[ie]:O(te,{[ee]:"indent"})}})]};if(a){var l=ve({disableBlockActions:i,[pe]:{moveUp:r.moveUp,[L]:r[L]}});d[me]=d[me].concat(l)}return d}}const fe=i(85).bmU,ye=i(85).ylu,Se=i(85).vNb,ke=i(85).B3l,Ae=i(85).mEm,Te=i(85).I_B,Be=i(85).hSJ,Me=i(85).x_I,Ze=i(85).jCF,we=i(85).xLj,Ie=i(85).NbQ,Ce=i(85).HzR,xe=i(85).X5t,Pe=i(85).MDn,Ue=i(85).hDM,Fe=i(85).pkR,Oe=i(85).MC6,De=i(85).hlH,Re=i(85).eCx,Ee=i(85).C$2,Ne=i(85).vcr,_e=i(85).ZYC,Le=i(85).I6S,qe=i(85).lUP,We=i(85).paz,Qe=i(85).QR3,$e=i(85).nD7;var ze=i(70203),Ge=i(5366),He=i(50906),Xe=i(44886),Ye=i(55332),Je=i(24677),Ke=i(8713),Ve=i(98104),je=i(28020),et=i(99417),tt=i(33929),it=i(67074),nt=i(68056),ot=i(45162),st=i(89086),at=i(35328);var rt=i(79315),dt=i(10161),lt=i(27724),ct=i(60749),ht=i(24666),ut=i(25666),mt=i(93286),bt=i(95477),pt=i(68204),vt=i(47853);const gt=i(85).I_B,ft=i(85).qQv,yt=i(85).TaP,St=i(85).HPZ,kt=i(85).vpw,At=i(85).eXX,Tt=i(85).xLj,Bt=i(85).h9C,Mt=i(85).wgE,Zt=i(85).Yzm,wt=i(85).bSA,It=i(85).yGq,Ct=i(85).X5t,xt=i(85).Tg8,Pt=i(85).qyI,Ut=i(85).kUS,Ft=i(85).Ezy,Ot=i(85).HEs;function Dt(e){const{type:t,[Ot]:i,[Ft]:n,context:o}=e,s={},a=[];for(const r of i){const e={id:`${r.key}`,title:r.title,items:r.actions.map((e=>{const i=`${e.key}-${e[Ut]||""}`,a=e[Pt]&&e[Pt](o),r=null!=a&&a[xt]?(0,vt.D)(null==a?void 0:a[xt]):ut.T;s[i]={...e,[xt]:r,[Ft]:n};const d=/^https?:\/\//.test(r);return{id:i,title:e[Ut]||"",icon:{...a,remoteImageUrl:r?`${d?"":bt.default.domainBaseUrl}${r}`:void 0,localAssetBundleImagePath:d?void 0:r},[Ct]:F(It,{menuType:t,actionId:i}),checked:!1}}))};a.push(e)}return{actions:s,sections:a}}function Rt(e){const{key:t,[Ut]:i,[xt]:n,[wt]:o,[Ft]:s,[Ct]:a}=e,r=i?tt.default[Zt](i):void 0,d=i,l=d?`${tt.default[Zt](d)} ${d.defaultMessage}`:void 0;return{key:`action ${t}`,[Ut]:r,[xt]:n,[wt]:o||`textformatting_action_${t}`,searchName:l,validators:[],[Ct]:a,[Ft]:Boolean(s)}}const Et={bold:Rt({key:"bold",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it[Bt](t,["b"])}}),italic:Rt({key:"italic",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it[Bt](t,["i"])}}),underline:Rt({key:"underline",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it[Bt](t,["_"])}}),[Tt]:Rt({key:Tt,[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it[Bt](t,["s"])}}),code:Rt({key:"code",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it[Bt](t,["c"])}}),comment:Rt({key:"comment",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleComment(i,!0,St)}}),equation:Rt({key:"equation",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleEquation(i)}}),filePicker:Rt({key:"filePicker",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleFilePicker(i)}}),indent:Rt({key:"indent",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleIndent(t)}}),unindent:Rt({key:"unindent",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleUnindent(t)}}),moveDown:Rt({key:"moveDown",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleMoveDown(t)}}),moveUp:Rt({key:"moveUp",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleMoveUp(t)}}),undo:Rt({key:"undo",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleUndo(t)}}),redo:Rt({key:"redo",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleRedo(t)}}),trash:Rt({key:"trash",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleDelete(t)}}),mention:Rt({key:"mention",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleMention(i)}}),ai:Rt({key:"ai",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleAi(i)}}),link:Rt({key:"link",[Ft]:!0,[Ct]:async e=>{var t;let{[Mt]:i}=e;await(null===(t=i[At])||void 0===t?void 0:t[kt]()),it.handleLink(i)}}),more:Rt({key:"more",[Ft]:!1,[Ct]:e=>{let{[Mt]:t}=e;it.handleMoreClick(t,void 0,void 0)}}),dismissKeyboard:Rt({key:"dismissKeyboard",[Ft]:!0,[Ct]:e=>{let{[Mt]:t}=e}})},Nt=i(85).bSA,_t=i(85).eCx,Lt=i(85).Ezy,qt=i(85).tDk,Wt=i(85).B3l,Qt=i(85).HPZ,$t=i(85).UA5,zt=i(85).Art,Gt=i(85).H0L,Ht=i(85).I_B,Xt=i(85).fMt,Yt=i(85).mEi,Jt=i(85).PR5,Kt=i(85).cpP,Vt=i(85).gkB,jt=i(85).PlO,ei=i(85).BLr,ti=i(85).Q0u,ii=i(85).mFu,ni=i(85).EdP,oi=i(85).pk7,si=i(85).CG5,ai=i(85).vNb,ri=i(85).xLj,di=i(85).NbQ,li=i(85).SUs,ci=i(85).pwK,hi=i(85).mEm,ui=i(85).$p1,mi=i(85).RPR,bi=i(85).nD7,pi=i(85).Yzm,vi=i(85).v4,gi=i(85).bmU,fi=i(85).TaP,yi=i(85).hSJ,Si=i(85).nQ3,ki=i(85).y6y,Ai=i(85)._U_,Ti=i(85).Qqn,Bi=i(85).alp,Mi=i(85).e7B,Zi=i(85).hBe,wi=i(85).ylu,Ii=i(85).JEg,Ci=i(85).WoE,xi=i(85).g5n,Pi=i(85).cUA,Ui=i(85).XtO,Fi=i(85).eUs,Oi=i(85).YqE,Di=i(85).qLW,Ri=i(85).ttt,Ei=i(85).QSf,Ni=i(85).iOH,_i=i(85).P0R,Li=i(85).Gnd,qi=i(85).UhS,Wi=i(85).NHZ,Qi=i(85).XQm,$i=i(85).EIp,zi=i(85).auk,Gi=i(85).iJw,Hi=i(85).Lp4,Xi=i(85).vZx,Yi=i(85).VhK,Ji=i(85).ceT,Ki=i(85).wgE,Vi=i(85).E0z,ji=i(85).eXX,en=i(85).gYY,tn=i(85).jYD,nn=i(85).QmD,on=i(85).OzC,sn=i(85).yGq,an=i(85).hlH,rn=i(85).QR3,dn=i(85).x_I,ln=i(85).X5t,cn=i(85).yUC,hn=i(85).HG6,un=i(85).aEI,mn=i(85).rKA,bn=i(85).RW5,pn=i(85).RT0,vn=i(85).k2C,gn=i(85).GMl,fn=i(85).Sp4,yn=i(85).ayH,Sn=i(85).foA,kn=i(85).tYo,An=i(85).nx5,Tn=(0,Ge.defineMessages)({templatesButtonTitle:{[An]:"Choose a template...",id:"mobileActionBar.templateButtonTitle"},actionMenuInsertBlockTitle:{[An]:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{[An]:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{[An]:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{[An]:"Add block",id:"mobileActionBar.accessibility.insertBlock"},[kn]:{[An]:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityFilePicker:{[An]:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{[An]:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityBlockColor:{[An]:"Change block color",id:"mobileActionBar.accessibility.blockColor"},[Sn]:{[An]:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},[yn]:{[An]:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{[An]:"Delete block",id:"mobileActionBar.accessibility.trash"},[fn]:{[An]:"Indent block",id:"mobileActionBar.accessibility.indent"},[gn]:{[An]:"Unindent block",id:"mobileActionBar.accessibility.unindent"},[vn]:{[An]:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},[pn]:{[An]:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{[An]:"Undo edit",id:"mobileActionBar.accessibility.udno"},accessibilityRedo:{[An]:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{[An]:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{[An]:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{[An]:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{[An]:"Underline",id:"mobileActionBar.accessibility.underline"},[bn]:{[An]:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{[An]:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{[An]:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{[An]:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityEquation:{[An]:"Add equation",id:"mobileActionBar.accessibility.equation"},[mn]:{[An]:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{[An]:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{[An]:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},[un]:{[An]:"AI Assist",id:"mobileActionBar.accessibility.ai"}}),Bn={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,[hn]:!1,callout:!1,quote:!1};function Mn(e){var t;window.__c={n:"MobileActionBarBridgeComponent"};const{onAction:i,fallbackRenderer:n,...o}=e,s=c(null===(t=(0,h.O7)().mobileNative)||void 0===t?void 0:t.api[cn],o);return function(e,t,i,n){var o;const s=null===(o=(0,h.O7)().mobileNative)||void 0===o?void 0:o.componentEvents;(0,r.useEffect)((()=>{if(s&&n&&t)return s.addListener(e,t,i,n)}),[e,t,i,n,s])}("MobileActionBar",s,"onAction",i),!s&&n?r.createElement(r.Fragment,null,n()):null}class Zn extends d.Z{constructor(){super(...arguments),this.handleMobileActionBarBridgeEvent=e=>{const{[ln]:t}=e;switch(t.type){case"nativeAction_hideKeyboard":break;case dn:this.handleSetMenuTypeAction(t);break;case rn:this.handleSetSubMenuTypeAction(t);break;case an:this.handleGenericWebAction(t);break;case sn:this.handleActionRegistryAction(t)}},this[on]=()=>{if(!this[tn][nn])return;const{[en]:e}=this[tn][nn],{[ji]:t,[Vi]:i}=this[Ki];"TextSelectionStore"!==e||null===(null==t?void 0:t[nn][Ji])||i.isTablet||this[Yi](null,!0)},this[Xi]=()=>{if(!this[Hi][nn])return;const{[ji]:e}=this[Ki];e&&e[nn].isSubMenuOverridden&&this[Gi](null,!1)},this[zi]=this[$i]((()=>{const e="editing"===ht.default[nn].mode&&ht.default[nn][Qi],t=this[_i][Li][qi][nn][Wi],i=t&&"editing"===t.mode&&t[Qi];return e||i||void 0}),!0),this.textSelectedBlocksStore=this[$i]((()=>{var e;const t=this[zi][nn];return t&&(null===(e=(0,ot.tp)({[Qi]:t,focus:void 0,[Ni]:!1}))||void 0===e?void 0:e[Li])})),this.disableMentionCommentsStore=this[$i]((()=>{const e=this[zi][nn],t=Boolean(e&&(0,nt.qS)(e)),i=this[_i][Ri][Ei](),n=this[_i][Ri][Di]();return{disableCommentAction:this.commentActionDisabled(i,n)||Boolean(this[Oi][nn].disableComment),disableLinkAction:!t,disableMentionAction:!t||this.mentionActionDisabled(i),disableEquationAction:!t}})),this.disableIndentStore=this[$i]((()=>{const e=lt.default[nn][Li];return{disableIndent:!e[Fi](Xe.nt),disableUnindent:!e[Fi](Xe.gq)}})),this.disableUndoRedoStore=this[$i]((()=>({disableUndo:!Ye.L0(),disableRedo:!Ye.AZ()}))),this.isEditingCurrentPageTitleStore=this[$i](je.isEditingCurrentPage),this.isEditingCollectionViewTitleStore=this[$i](je.isEditingCollectionTitle),this.showTemplatesButtonStore=this[$i]((()=>it.shouldShowTemplatesButton({[Ki]:this[Ki],[Ui]:this[_i][Ri]}))),this[Pi]=this[$i]((()=>this.memoizedNativeMenus({[xi]:lt.default[nn][Li],[Ki]:this[Ki]}))),this[Ci]=this[$i](this.recomputeCurrentActionBarSchema.bind(this),!0,Ci),this[Ii]=this[$i]((()=>{var e;const{[ji]:t}=this[Ki],i=Boolean(this[Oi][nn].disableAnnotation),n=t?t[nn][Ji]:null;var o=null;const s=this.showTemplatesButtonStore[nn],a=!!t&&t[nn].isSubMenuOverridden,r=this[wi][nn],d=t?t[nn].subMenuType:null;a?o=d:r&&!i&&(o=Zi,null==t||t[Mi]((e=>({...e,isSubMenuOverridden:!1,subMenuType:null}))));const l=!this[Bi][nn],c=!this[Ti][nn],{disableCommentAction:h,disableLinkAction:u,disableMentionAction:m,disableEquationAction:b}=this.disableMentionCommentsStore[nn],{disableIndent:p,disableUnindent:v}=this.disableIndentStore[nn],g=this.isEditingCurrentPageTitleStore[nn]||this.isEditingCollectionViewTitleStore[nn],{disableUndo:f,disableRedo:y}=this.disableUndoRedoStore[nn],S=(0,et.GD)(this[Ki],null===(e=this[Ai])||void 0===e?void 0:e[ki][nn]),k=ct.Z[nn].isActive,A=g||k,T=this[Pi][nn];return{selectedSubMenu:o,createAIAction:S,disableAIAction:A,disableBlockActions:c,disableCommentAction:h,disableMentionAction:m,selectedMenuType:n,disableTextFormatting:i,disableTextColorAction:_(T[yi][Si]),disableDeleteBlock:g,disableInsertBlockAction:_(T[fi][Si]),disableTurnIntoAction:_(T[gi][Si]),shouldShowTemplatesButton:s,disableIndent:p,disableUnindent:v,disableUndo:f,disableRedo:y,disableTextActions:l,isEditingTitle:g,disableLinkAction:u,disableEquationAction:b,[wi]:!0===r}})),this[vi]=this[$i]((()=>{return e=tt.default[pi](Tn.templatesButtonTitle),{id:"mab.buttonSection.template",[me]:[C("mab.button.choose_template",ue,{[he]:{type:"text_and_icon",[le]:{[re]:"template"},text:e},[ne]:{[ie]:O("showActionBarMenu",{actionBarMenuId:"template"})}})]};var e})),this.primaryActionButtonSectionsStore=this[$i]((()=>{const{createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:n,disableMentionAction:o,selectedMenuType:s,disableInsertBlockAction:a,disableTurnIntoAction:r,disableTextFormatting:d,disableDeleteBlock:l}=this[Ii][nn];return function(e){const{createAIAction:t,disableAIAction:i,disableBlockActions:n,disableCommentAction:o,disableMentionAction:s,selectedMenuType:a,disableInsertBlockAction:r,disableTurnIntoAction:d,disableTextFormatting:l,disableDeleteBlock:c,[pe]:h}=e;return{id:be,[me]:[t?C("mab.button.ai",ue,{[he]:{type:ce,[le]:{[de]:"sparkles",[re]:"ai",[ae]:(0,m.J1)(m.FN.light.purple[500])},[se]:i,[oe]:h.ai},[ne]:{[ie]:O(te,{[ee]:"ai"})}}):void 0,C("mab.button.insert",j,{[he]:{type:ce,[le]:{[de]:"plus",[re]:V},[oe]:h.insert,[se]:n||r,[K]:"insertBlock"===a},[ne]:{[J]:V}}),C("mab.button.turnInto",j,{[he]:{type:ce,[le]:{[de]:"arrow.2.squarepath",[re]:Y},[se]:n||d,[K]:"turnInto"===a,[oe]:h[Y]},[ne]:{[J]:Y}}),C("mab.button.filePicker",ue,{[he]:{type:ce,[le]:{[de]:"photo.on.rectangle.angled",[re]:X},[se]:n,[oe]:h[X]},[ne]:{[ie]:O(te,{[ee]:X})}}),C("mab.button.mention",ue,{[he]:{type:ce,[le]:{[de]:"at",[re]:H},[se]:s,[oe]:h[H]},[ne]:{[ie]:O(te,{[ee]:H})}}),C("mab.button.comment",ue,{[he]:{type:ce,[le]:{[de]:"bubble.left",[re]:G},[se]:o,[oe]:h[G]},[ne]:{[ie]:O(te,{[ee]:G},z)}}),C($,Q,{[he]:{type:ce,[le]:{[de]:$,[re]:"boldItalicUnderline"},[se]:l,[oe]:h[W]},[ne]:{subMenuType:W}}),C("mab.button.delete",ue,{[he]:{type:ce,[le]:{[de]:"trash",[re]:"trash"},[se]:c,[oe]:h.trash},[ne]:{[ie]:O(te,{[ee]:"trash"})}})].filter(b.isDefined)}}({createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:n,disableMentionAction:o,selectedMenuType:s,disableInsertBlockAction:a,disableTurnIntoAction:r,disableTextFormatting:d,disableDeleteBlock:l,[bi]:{insert:tt.default[pi](Tn.accessibilityInsert),[gi]:tt.default[pi](Tn[kn]),[mi]:tt.default[pi](Tn.accessibilityFilePicker),[ui]:tt.default[pi](Tn.accessibilityMention),[hi]:tt.default[pi](Tn[yn]),[Zi]:tt.default[pi](Tn[Sn]),trash:tt.default[pi](Tn.accessibilityTrash),ai:tt.default[pi](Tn[un])}})})),this.primaryActionButtonSectionsStoreV2=this[$i]((()=>{const{createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:n,disableMentionAction:o,selectedMenuType:s,disableInsertBlockAction:a,disableTurnIntoAction:r,disableTextFormatting:d,disableDeleteBlock:l,disableUndo:c,disableIndent:h,disableUnindent:u}=this[Ii][nn],p=this.textSelectedBlocksStore[nn];return function(e){const{createAIAction:t,disableAIAction:i,disableBlockActions:n,disableCommentAction:o,disableMentionAction:s,selectedMenuType:a,disableInsertBlockAction:r,disableTurnIntoAction:d,disableTextFormatting:l,disableDeleteBlock:c,disableUndo:h,disableIndent:u,disableUnindent:p,someBlockPrioritizesIndentation:v,supportsSectionAnimation:g,[pe]:f}=e,y=!(n||u&&p),S={ai:t?C("mab.button.ai",ue,{[he]:{type:ce,[le]:{[de]:"sparkles",[re]:"ai",[ae]:(0,m.J1)(m.FN.light.purple[500])},[se]:i,[oe]:f.ai},[ne]:{[ie]:O(te,{[ee]:"ai"})}}):void 0,insert:C("mab.button.insert",j,{[he]:{type:ce,[le]:{[de]:"plus",[re]:V},[oe]:f.insert,[se]:n||r,[K]:"insertBlock"===a},[ne]:{[J]:V}}),[Y]:C("mab.button.turnInto",j,{[he]:{type:ce,[le]:{[de]:"arrow.2.squarepath",[re]:Y},[se]:n||d,[K]:"turnInto"===a,[oe]:f[Y]},[ne]:{[J]:Y}}),[X]:C("mab.button.filePicker",ue,{[he]:{type:ce,[le]:{[de]:"photo.on.rectangle.angled",[re]:X},[se]:n,[oe]:f[X]},[ne]:{[ie]:O(te,{[ee]:X})}}),[H]:C("mab.button.mention",ue,{[he]:{type:ce,[le]:{[de]:"at",[re]:H},[se]:s,[oe]:f[H]},[ne]:{[ie]:O(te,{[ee]:H})}}),[G]:C("mab.button.comment",ue,{[he]:{type:ce,[le]:{[de]:"bubble.left",[re]:G},[se]:o,[oe]:f[G]},[ne]:{[ie]:O(te,{[ee]:G},z)}}),biu:C($,Q,{[he]:{type:ce,[le]:{[de]:"textformat",[re]:"textFormat"},[se]:l,[oe]:f[W]},[ne]:{subMenuType:W}}),delete:C("mab.button.delete",ue,{[he]:{type:ce,[le]:{[de]:"trash",[re]:"trash"},[se]:c,[oe]:f.trash},[ne]:{[ie]:O(te,{[ee]:"trash"})}}),undo:C("mab.button.undo",ue,{[he]:{type:ce,[le]:{[de]:"arrow.uturn.backward",[re]:"undo"},[oe]:f.undo,[se]:h},[ne]:{[ie]:O(te,{[ee]:"undo"})}}),more:C("mab.button.more",ue,{[he]:{type:ce,[le]:{[de]:"ellipsis",[re]:"more"},[oe]:f.more,[se]:n},[ne]:{[ie]:O(te,{[ee]:"more"})}}),indent:C("mab.button.indent",ue,{[he]:{type:ce,[le]:{[de]:"decrease.indent",[re]:q},[oe]:f.indent,[se]:n||p},[ne]:{[ie]:O(te,{[ee]:q})}}),[q]:C("mab.button.unindent",ue,{[he]:{type:ce,[le]:{[de]:"increase.indent",[re]:"indent"},[oe]:f[q],[se]:n||u},[ne]:{[ie]:O(te,{[ee]:"indent"})}}),moveUp:C("mab.button.moveUp",ue,{[he]:{type:ce,[le]:{[de]:"arrow.up.to.line.alt",[re]:"moveUp"},[oe]:f.moveUp,[se]:n},[ne]:{[ie]:O(te,{[ee]:"moveUp"})}}),[L]:C("mab.button.moveDown",ue,{[he]:{type:ce,[le]:{[de]:"arrow.down.to.line.alt",[re]:L},[oe]:f[L],[se]:n},[ne]:{[ie]:O(te,{[ee]:L})}})};if(y&&v){const e=[S.indent,S[q],S.moveUp,S[L]].filter(b.isDefined),t=[S.ai,S.insert,S[Y],S[X],S.biu,S[G],S.undo,S[H],S.delete,S.more].filter(b.isDefined);return g?[{id:"mab.buttonSection.listPrioritized",[me]:e,skipSectionDivider:!0},{id:be,[me]:t}]:[{id:"mab.buttonSection.listPrioritized",[me]:e.concat(t),skipSectionDivider:!0}]}{const e=[S.ai,S.insert,S[Y],S[X],S.biu,S[G],S.undo,S[H],S.delete,S.indent,S[q],S.moveUp,S[L],S.more].filter(b.isDefined);return[{id:be,[me]:e}]}}({createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:n,disableMentionAction:o,selectedMenuType:s,disableInsertBlockAction:a,disableTurnIntoAction:r,disableTextFormatting:d,disableDeleteBlock:l,disableUndo:c,disableIndent:h,disableUnindent:u,someBlockPrioritizesIndentation:!!p&&p.some((e=>{const t=e[Ei]();return t&&Bn[t]})),supportsSectionAnimation:this[Ki][Vi].isIOS,[bi]:{insert:tt.default[pi](Tn.accessibilityInsert),[gi]:tt.default[pi](Tn[kn]),[mi]:tt.default[pi](Tn.accessibilityFilePicker),[ui]:tt.default[pi](Tn.accessibilityMention),[hi]:tt.default[pi](Tn[yn]),[Zi]:tt.default[pi](Tn[Sn]),trash:tt.default[pi](Tn.accessibilityTrash),ai:tt.default[pi](Tn[un]),undo:tt.default[pi](Tn.accessibilityUndo),more:tt.default[pi](Tn.accessibilityMore),indent:tt.default[pi](Tn[fn]),unindent:tt.default[pi](Tn[gn]),moveUp:tt.default[pi](Tn[vn]),[ci]:tt.default[pi](Tn[pn])}})})),this.listPrioritizedButtonSecionsStore=this[$i]((()=>{const{disableBlockActions:e,disableIndent:t,disableUnindent:i}=this[Ii][nn];return ge({id:"mab.list.prioritized",disableBlockActions:e,disableIndent:t,disableUnindent:i,shouldFadeIn:!1,includeUpAndDown:!1,[bi]:{indent:tt.default[pi](Tn[fn]),dedent:tt.default[pi](Tn[gn]),moveUp:tt.default[pi](Tn[vn]),[ci]:tt.default[pi](Tn[pn])}})})),this.listDeprioritizedButtonSectionsStore=this[$i]((()=>{const{disableBlockActions:e,disableIndent:t,disableUnindent:i}=this[Ii][nn];return ge({id:"mab.list.deprioritized",disableBlockActions:e,disableIndent:t,disableUnindent:i,shouldFadeIn:!0,includeUpAndDown:!0,[bi]:{indent:tt.default[pi](Tn[fn]),dedent:tt.default[pi](Tn[gn]),moveUp:tt.default[pi](Tn[vn]),[ci]:tt.default[pi](Tn[pn])}})})),this.blockButtonSectionsStore=this[$i]((()=>{const{selectedMenuType:e,disableUndo:t,disableRedo:i,disableTextActions:n,disableTextColorAction:o}=this[Ii][nn];return function(e){const{disableUndo:t,disableRedo:i,disableTextActions:n,disableTextColorAction:o,textColorImageReference:s,selectedMenuType:a,[pe]:r}=e;return{id:"mab.buttonSection.block",[me]:[C("mab.button.undo",ue,{[he]:{type:ce,[le]:{[de]:"arrow.uturn.backward",[re]:"undo"},[oe]:r.undo,[se]:t},[ne]:{[ie]:O(te,{[ee]:"undo"})}}),C("mab.button.redo",ue,{[he]:{type:ce,[le]:{[de]:"arrow.uturn.forward",[re]:"redo"},[oe]:r.redo,[se]:i},[ne]:{[ie]:O(te,{[ee]:"redo"})}}),C("mab.button.textColor.native",j,{[he]:{type:ce,[le]:s,[se]:n||o,[K]:"textColor"===a,[oe]:r.blockColor},[ne]:{[J]:"textColor"}}),C("mab.button.more",ue,{[he]:{type:ce,[le]:{[de]:"ellipsis",[re]:"more"},[oe]:r.more},[ne]:{[ie]:O(te,{[ee]:"more"})}})]}}({disableUndo:t,disableRedo:i,textColorImageReference:this[li](this.textColorStore[nn]),disableTextActions:n,disableTextColorAction:o,selectedMenuType:e,[bi]:{undo:tt.default[pi](Tn.accessibilityUndo),redo:tt.default[pi](Tn.accessibilityRedo),blockColor:tt.default[pi](Tn.accessibilityBlockColor),more:tt.default[pi](Tn.accessibilityMore)}})})),this.moveUpAndDownButtonSectionsStore=this[$i]((()=>{const{disableBlockActions:e}=this[Ii][nn];return t={disableBlockActions:e,[bi]:{moveUp:tt.default[pi](Tn[vn]),[ci]:tt.default[pi](Tn[pn])}},{id:"mab.buttonSection.last",shouldFadeIn:!0,[me]:ve(t)};var t})),this.textFormattingButtonSectionsStore=this[$i]((()=>{const{createAIAction:e,disableAIAction:t,disableCommentAction:i,selectedMenuType:n,disableTextActions:o,disableTextColorAction:s,disableLinkAction:a,disableEquationAction:r}=this[Ii][nn];return function(e){const{createAIAction:t,disableAIAction:i,disableTextActions:n,boldSelected:o,italicSelected:s,underlineSelected:a,strikeSelected:r,codeSelected:d,linkSelected:l,equationSelected:c,selectedMenuType:h,disableTextColorAction:u,disableCommentAction:p,disableLinkAction:v,disableEquationAction:g,textColorImageReference:f,[$e]:y}=e;return{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:[C("mab.button.back",Qe,{[We]:{type:qe,[Le]:{[_e]:"chevron.backward.2",[Ne]:"back"},[Ee]:y.close},[Re]:{subMenuType:null}}),t?C("mab.button.ai",De,{[We]:{type:qe,[Le]:{[_e]:"sparkles",[Ne]:"ai",[Oe]:(0,m.J1)(m.FN.light.purple[500])},[Fe]:i,[Ee]:y.ai},[Re]:{[Ue]:O(Pe,{[xe]:"ai"})}}):void 0,C("mab.button.bold",De,{[We]:{type:qe,[Le]:{[_e]:"bold",[Ne]:"bold"},[Ee]:y.bold,[Fe]:n,[Ce]:o},[Re]:{[Ue]:O(Pe,{[xe]:"bold"})}}),C("mab.button.italic",De,{[We]:{type:qe,[Le]:{[_e]:"italic",[Ne]:"italic"},[Fe]:n,[Ce]:s,[Ee]:y.italics},[Re]:{[Ue]:O(Pe,{[xe]:"italic"})}}),C("mab.button.underline",De,{[We]:{type:qe,[Le]:{[_e]:Ie,[Ne]:Ie},[Fe]:n,[Ce]:a,[Ee]:y[Ie]},[Re]:{[Ue]:O(Pe,{[xe]:Ie})}}),C("mab.button.strikethrough",De,{[We]:{type:qe,[Le]:{[_e]:we,[Ne]:we},[Fe]:n,[Ce]:r,[Ee]:y[we]},[Re]:{[Ue]:O(Pe,{[xe]:we})}}),C(Ze,Me,{[We]:{type:qe,[Le]:f,[Fe]:n||u,[Ce]:"textSelectionColor"===h,[Ee]:y[Be]},[Re]:{menuType:Te}}),C("mab.button.textFormatting.comment",De,{[We]:{type:qe,[Le]:{[_e]:"bubble.left",[Ne]:Ae},[Fe]:n||p,[Ee]:y[Ae]},[Re]:{[Ue]:O(Pe,{[xe]:Ae},ke)}}),C("mab.button.link",De,{[We]:{type:qe,[Le]:{[_e]:"link",[Ne]:"link"},[Ee]:y.link,[Fe]:n||v,[Ce]:l},[Re]:{[Ue]:O(Pe,{[xe]:"link"})}}),C("mab.button.code",De,{[We]:{type:qe,[Le]:{[_e]:"chevron.left.slash.chevron.right",[Ne]:"code"},[Ee]:y.code,[Fe]:n,[Ce]:d},[Re]:{[Ue]:O(Pe,{[xe]:"code"})}}),C("mab.button.equation",De,{[We]:{type:qe,[Le]:{[_e]:"x.squareroot",[Ne]:Se},[Ee]:y[Se],[Fe]:n||g,[Ce]:c},[Re]:{[Ue]:O(Pe,{[xe]:Se})}}),C("mab.button.cancel",Qe,{[We]:{type:qe,[Le]:{[_e]:"xmark.circle.fill",[Ne]:"cancel",[Oe]:"#72706B64"},[Ee]:y.close},[Re]:{subMenuType:null}})].filter(b.isDefined)}}({createAIAction:e,disableAIAction:t,disableTextActions:o,disableCommentAction:i,disableLinkAction:a,disableEquationAction:r,selectedMenuType:n,disableTextColorAction:s,textColorImageReference:this[li](this.textSelectionColorStore[nn]),[bi]:{bold:tt.default[pi](Tn.accessibilityBold),italics:tt.default[pi](Tn.accessibilityItalics),[di]:tt.default[pi](Tn.accessibilityUnderline),[ri]:tt.default[pi](Tn[bn]),[yi]:tt.default[pi](Tn.accessibilityTextColor),[hi]:tt.default[pi](Tn[yn]),code:tt.default[pi](Tn.accessibilityCode),link:tt.default[pi](Tn.accessibilityLink),[ai]:tt.default[pi](Tn.accessibilityEquation),close:tt.default[pi](Tn[mn]),ai:tt.default[pi](Tn[un])},...this[si][nn]})})),this.textFormattingButtonSectionsStoreV2=this[$i]((()=>{const{disableCommentAction:e,selectedMenuType:t,disableTextActions:i,disableTextColorAction:n,disableLinkAction:o,disableEquationAction:s,disableBlockActions:a,disableTurnIntoAction:r,disableAIAction:d,createAIAction:l,[wi]:c}=this[Ii][nn];return function(e){const{disableTextActions:t,boldSelected:i,italicSelected:n,underlineSelected:o,strikeSelected:s,codeSelected:a,linkSelected:r,equationSelected:d,selectedMenuType:l,disableTextColorAction:c,disableCommentAction:h,disableLinkAction:u,disableEquationAction:p,textColorImageReference:v,[$e]:g,disableBlockActions:f,disableTurnIntoAction:y,disableAIAction:S,createAIAction:k,[ye]:A}=e,T=A?Te:Be,B={back:C("mab.button.back",Qe,{[We]:{type:qe,[Le]:{[_e]:"chevron.backward.2",[Ne]:"back"},[Ee]:g.close},[Re]:{subMenuType:null}}),bold:C("mab.button.bold",De,{[We]:{type:qe,[Le]:{[_e]:"bold",[Ne]:"bold"},[Ee]:g.bold,[Fe]:t,[Ce]:i},[Re]:{[Ue]:O(Pe,{[xe]:"bold"})}}),italic:C("mab.button.italic",De,{[We]:{type:qe,[Le]:{[_e]:"italic",[Ne]:"italic"},[Fe]:t,[Ce]:n,[Ee]:g.italics},[Re]:{[Ue]:O(Pe,{[xe]:"italic"})}}),[Ie]:C("mab.button.underline",De,{[We]:{type:qe,[Le]:{[_e]:Ie,[Ne]:Ie},[Fe]:t,[Ce]:o,[Ee]:g[Ie]},[Re]:{[Ue]:O(Pe,{[xe]:Ie})}}),[we]:C("mab.button.strikethrough",De,{[We]:{type:qe,[Le]:{[_e]:we,[Ne]:we},[Fe]:t,[Ce]:s,[Ee]:g[we]},[Re]:{[Ue]:O(Pe,{[xe]:we})}}),color:C(Ze,Me,{[We]:{type:qe,[Le]:v,[Fe]:t||c,[Ce]:l===T,[Ee]:g[Be]},[Re]:{menuType:T}}),[Ae]:C("mab.button.textFormatting.comment",De,{[We]:{type:qe,[Le]:{[_e]:"bubble.left",[Ne]:Ae},[Fe]:t||h,[Ee]:g[Ae]},[Re]:{[Ue]:O(Pe,{[xe]:Ae},ke)}}),link:C("mab.button.link",De,{[We]:{type:qe,[Le]:{[_e]:"link",[Ne]:"link"},[Ee]:g.link,[Fe]:t||u,[Ce]:r},[Re]:{[Ue]:O(Pe,{[xe]:"link"})}}),code:C("mab.button.code",De,{[We]:{type:qe,[Le]:{[_e]:"chevron.left.slash.chevron.right",[Ne]:"code"},[Ee]:g.code,[Fe]:t,[Ce]:a},[Re]:{[Ue]:O(Pe,{[xe]:"code"})}}),[Se]:C("mab.button.equation",De,{[We]:{type:qe,[Le]:{[_e]:"x.squareroot",[Ne]:Se},[Ee]:g[Se],[Fe]:t||p,[Ce]:d},[Re]:{[Ue]:O(Pe,{[xe]:Se})}}),cancel:C("mab.button.cancel",Qe,{[We]:{type:qe,[Le]:{[_e]:"xmark.circle.fill",[Ne]:"cancel",[Oe]:"#72706B64"},[Ee]:g.close},[Re]:{subMenuType:null}}),[fe]:C("mab.button.turnInto",Me,{[We]:{type:qe,[Le]:{[_e]:"arrow.2.squarepath",[Ne]:fe},[Fe]:f||y,[Ce]:"turnInto"===l,[Ee]:g[fe]},[Re]:{menuType:fe}}),ai:k?C("mab.button.ai",De,{[We]:{type:qe,[Le]:{[_e]:"sparkles",[Ne]:"ai",[Oe]:(0,m.J1)(m.FN.light.purple[500])},[Fe]:S,[Ee]:g.ai},[Re]:{[Ue]:O(Pe,{[xe]:"ai"})}}):void 0};let M;return M=A?[B.back,B[fe],B.ai,B.color,B[Ae],B.bold,B.italic,B[Ie],B[we],B.link,B.code,B[Se]].filter(b.isDefined):[B.back,B.color,B.bold,B.italic,B[Ie],B[we],B.link,B.code,B[Se]],{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:M}}({disableTextActions:i,disableCommentAction:e,disableLinkAction:o,disableEquationAction:s,selectedMenuType:t,disableTextColorAction:n,disableBlockActions:a,disableTurnIntoAction:r,disableAIAction:d,createAIAction:l,[wi]:c,textColorImageReference:this[li](this.textSelectionColorStore[nn]),[bi]:{bold:tt.default[pi](Tn.accessibilityBold),italics:tt.default[pi](Tn.accessibilityItalics),[di]:tt.default[pi](Tn.accessibilityUnderline),[ri]:tt.default[pi](Tn[bn]),[yi]:tt.default[pi](Tn.accessibilityTextColor),[hi]:tt.default[pi](Tn[yn]),code:tt.default[pi](Tn.accessibilityCode),link:tt.default[pi](Tn.accessibilityLink),[ai]:tt.default[pi](Tn.accessibilityEquation),close:tt.default[pi](Tn[mn]),[gi]:tt.default[pi](Tn[kn]),ai:tt.default[pi](Tn[un])},...this[si][nn]})})),this.mainButtonSectionsStore=this[$i]((()=>{const{shouldShowTemplatesButton:e,isEditingTitle:t}=this[Ii][nn];var i;if(e)i=[this[vi][nn]];else{const e={[oi]:this.primaryActionButtonSectionsStore,listPrioritized:this.listPrioritizedButtonSecionsStore,listDeprioritized:this.listDeprioritizedButtonSectionsStore,[ni]:this.blockButtonSectionsStore,moveUpAndDown:this.moveUpAndDownButtonSectionsStore},n=this.textSelectedBlocksStore[nn],o=n&&n.some((e=>{const t=e[Ei]();return t&&Bn[t]}));i=e.listPrioritized[nn]&&o?[e.listPrioritized[nn],e[oi][nn],e[ni][nn],e.moveUpAndDown[nn]]:e.listDeprioritized[nn]&&n&&n[Fi]((e=>Xe.nt(e)||Xe.gq(e)))?[e[oi][nn],e[ni][nn],e.listDeprioritized[nn]]:t?[e[oi][nn],e[ni][nn]]:[e[oi][nn],e[ni][nn],e.moveUpAndDown[nn]]}return i})),this.mainButtonSectionsStoreV2=this[$i]((()=>{const{shouldShowTemplatesButton:e}=this[Ii][nn];return e?[this[vi][nn]]:this.primaryActionButtonSectionsStoreV2[nn]})),this[Hi]=this[$i]((()=>{const e=this[tn][nn];if(!e)return;const{[en]:t,...i}=e;return i}),!0),this[tn]=this[$i]((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{[Qi]:i}=e;return{startRecord:i.start[Ui][ii],[ti]:i.start.index,endRecord:i.end[Ui][ii],endIndex:i.end.index,[en]:t}};return e(ht.default[nn],"TextSelectionStore")||e(this[_i][Li][qi][nn][Wi],"IgnoreSelectionAreaStore")}),!0),this[Oi]=this[$i]((()=>{var e;const t=it[ei](this[Ki],this[_i][Ri],null===(e=this[Ai])||void 0===e?void 0:e[ki][nn]);if(!t){const e=this[Ki][ji];null!==(null==e?void 0:e[nn][Ji])&&a().delay((()=>{var e;it[ei](this[Ki],this[_i][Ri],null===(e=this[Ai])||void 0===e?void 0:e[ki][nn])||this[Yi](null,!1)}),500),null!==(null==e?void 0:e[nn].subMenuType)&&a().delay((()=>{var e;it[ei](this[Ki],this[_i][Ri],null===(e=this[Ai])||void 0===e?void 0:e[ki][nn])||this[Gi](null,!1)}),500)}return t})),this[wi]=this[$i]((()=>it[wi](this[_i][Li][qi],this[Ki].TextSelectionCompositionStore))),this[Ti]=this[$i]((()=>it[Ti](this[Ai]&&this[Ai][ki][nn]))),this[Bi]=this[$i]((()=>it[Bi](this[Ai]&&this[Ai][ki][nn],this[_i][Ri]))),this.memoizedNativeMenus=a().memoize((e=>{const{[xi]:t,[Ki]:i}=e;return n={[Ki]:i,[xi]:t,[jt]:void 0},{[yt]:Dt({type:yt,[Ot]:pt[ft](mt.vC.state.insertActions,n),context:n,[Ft]:!0}),turnInto:Dt({type:"turnInto",[Ot]:pt[ft]([mt.gH],n),context:n,[Ft]:!0}),textColor:Dt({type:"textColor",[Ot]:pt[ft]([mt.rz,mt.Vm],n),context:n,[Ft]:!0}),[gt]:Dt({type:gt,[Ot]:pt[ft]([mt.b4,mt.Sw],n),context:n,[Ft]:!0})};var n}),(e=>{let{[xi]:t,[Ki]:i}=e;const n=t.map((e=>e.key)).join(",");return`${i.key}-${n}`})),this[si]=this[$i]((()=>{let e;e="editing"===ht.default[nn].mode?(0,st.k2)([ze.annotationType.Bold,ze.annotationType.Italic,ze.annotationType.Underline,ze.annotationType.Strike,ze.annotationType.Code,ze.annotationType.Link,ze.annotationType.Equation,ze.annotationType.Highlight],ht.default[nn][Qi],ht.default[nn][Vt]):{};const t=e[ze.annotationType.Highlight];return{boldSelected:Boolean(e[ze.annotationType.Bold]),italicSelected:Boolean(Boolean(e[ze.annotationType.Italic])),underlineSelected:Boolean(Boolean(e[ze.annotationType.Underline])),strikeSelected:Boolean(Boolean(e[ze.annotationType.Strike])),codeSelected:Boolean(e[ze.annotationType.Code]),linkSelected:Boolean(e[ze.annotationType.Link]),equationSelected:Boolean(e[ze.annotationType.Equation]),highlightColor:t?(0,ze.getHighlightAnnotationData)(t):void 0}})),this.textSelectionColorStore=this[$i]((()=>{const{[ji]:e}=this[Ki],t=e&&null!==e[nn][Ji]?this[_i][Li][qi][nn][Wi]:void 0;if(!t)return this[si][nn].highlightColor;const i="editing"===t.mode&&(0,st.a6)("h",t[Qi],t[Vt]);return i?(0,ze.getHighlightAnnotationData)(i):void 0})),this.textColorStore=this[$i]((()=>lt.default[nn][Li].length>0?lt.default[nn][Li][0][Di]()[Kt]:void 0))}didMount(){this[tn].addListener(this[on]),this[Hi].addListener(this[Xi])}willUnmount(){this[tn][Jt](this[on]),this[Hi][Jt](this[Xi]),this[_i].renderApi&&this[_i].renderApi({type:"unmount",id:""})}renderComponent(){const{fallbackRenderer:e,[Li]:t}=this[_i];return o()(Mn,{isOpen:this[Oi][nn][Yt],canShow:this[Oi][nn].canShowNativeBar,isEmpty:this[Oi][nn].isEmpty,schema:this[Ci][nn],onAction:this.handleMobileActionBarBridgeEvent,fallbackRenderer:e&&(()=>e(t))})}recomputeCurrentActionBarSchema(){const{selectedMenuType:e,selectedSubMenu:t}=this[Ii][nn],{[Yt]:i}=this[Oi][nn],n=i&&this[Xt]()?this.mainButtonSectionsStoreV2[nn]:this.mainButtonSectionsStore[nn],o=i&&this[Xt]()?[this.textFormattingButtonSectionsStoreV2[nn]]:[this.textFormattingButtonSectionsStore[nn]],s=this[Pi][nn];return function(e){const{selectedMenu:t,selectedSubMenu:i,nativeMenus:n,buttonSections:o,nativeSubMenus:s,[pe]:a}=e;return{nativeMenus:n,nativeSubMenus:s,state:{buttonSections:o,selectedMenu:t,selectedSubMenu:i,dismissKeyboardButton:null!==t?C("mab.dismissKeyboard",j,{[he]:{type:ce,[le]:{[de]:"xmark.circle.fill",[re]:"cancel",[ae]:"#72706B64"},[oe]:a.closeActionMenu},[ne]:{[J]:null}}):C("mab.dismissKeyboard",ue,{[he]:{type:ce,[le]:{[de]:"keyboard.chevron.compact.down",[re]:"keyboardDown"},[oe]:a.dismissKeyboard},[ne]:{[ie]:O(te,{[ee]:"dismissKeyboard"})}}),mutatedNativeMenus:{},localizedMessages:{}}}}({selectedMenu:e,selectedSubMenu:t,nativeMenus:{[yi]:{id:yi,title:tt.default[pi](Tn.actionMenuColorTitle),[Si]:s[yi][Si]},[Ht]:{id:Ht,title:tt.default[pi](Tn.actionMenuColorTitle),[Si]:s[Ht][Si]},[fi]:{id:fi,title:tt.default[pi](Tn.actionMenuInsertBlockTitle),[Si]:s[fi][Si]},[gi]:{id:gi,title:tt.default[pi](Tn.actionMenuTurnIntoTitle),[Si]:s[gi][Si]}},nativeSubMenus:{[Zi]:o},buttonSections:n,[bi]:{dismissKeyboard:tt.default[pi](Tn.accessibilityDismissKeyboard),closeActionMenu:tt.default[pi](Tn.accessibilityCloseActionMenu)}})}[Xt](){return"on"===dt.default.getEligibleGroup({experimentId:"mobile_action_bar_ordering_v2",defaultGroup:"control"})}commentActionDisabled(e,t){return!(!e||!(0,u._T)(e,t))}mentionActionDisabled(e){return!(!e||!(0,u.lQ)(e))}handleSetMenuTypeAction(e){const t=function(e){if("nativeAction_setMenuType"!==e.type)return new N(E.InvalidActionType,void 0);const t=e[I];if(!t||!("menuType"in t))return new N(E.MissingPayload,void 0);const i=v[T]({[A]:{menuType:v[k](...x,null)},[S]:{}}),n=(0,p.Gu)(i,t);return n?new N(E.InvalidRequestType,JSON[B](n)):t.menuType}(e);if(t instanceof N)return void console.error(JSON[Gt](t));if((this[Ki][ji]?this[Ki][ji][nn][Ji]:null)===t)this[Yi](null,!0);else switch(this[Yi](t,!0),t){case fi:it[zt](this[Ki],"insert");break;case gi:it[zt](this[Ki],"turn_into");break;case yi:it[zt](this[Ki],$t,Qt);break;case Ht:it[zt](this[Ki],$t,Wt)}}handleSetSubMenuTypeAction(e){const t=function(e){if("nativeAction_setSubMenuType"!==e.type)return new N(E.InvalidActionType,void 0);const t=e[I];if(!t||!("subMenuType"in t))return new N(E.MissingPayload,void 0);const i=v[T]({[A]:{subMenuType:v[k](...P,null)},[S]:{}}),n=(0,p.Gu)(i,t);return n?new N(E.InvalidRequestType,JSON[B](n)):t.subMenuType}(e);t instanceof N?console.error(JSON[Gt](t)):this[Gi](t,!0)}handleGenericWebAction(e){const t=function(e){if("webAction_generic"!==e.type)return new N(E.InvalidActionType,void 0);const t=e[I];if(!t||!("jsonPayload"in t))return new N(E.MissingPayload,void 0);const i=JSON.parse(t.jsonPayload),n=v[T]({[A]:{type:v[k](...R)},[S]:{}}),o=(0,p.Gu)(n,i);if(o)return new N(E.InvalidRequestType,JSON[B](o));const s=i,a=D[s.type],r=(0,p.Gu)(a,s);return r?new N(E.InvalidData,JSON[B](r)):s}(e);if(t instanceof N)console.error(JSON[Gt](t));else switch(t.type){case"blockAction":if("dismissKeyboard"===t.data[ln]){this.handleDismissKeyboard();break}const e=Et[t.data[ln]];if(!e)break;const i=e[ln];if(i){const{[qt]:t}=rt.default[nn];if(!t)break;const{[Vi]:n}=this[Ki];e[Lt]&&!n.isTablet&&this[Yi](null,!0),i({[Ki]:this[Ki],[xi]:[t],[jt]:void 0})}switch(t.data[ln]){case hi:He.trackTapMobileActionBarItem(this[Ki],{itemName:hi,from:t.from})}break;case"showActionBarMenu":switch(t.data.actionBarMenuId){case fi:this.handleInsert();break;case yi:this.handleTextColor();break;case gi:this.handleTurnInto();break;case"template":this.handleTemplate()}}}handleActionRegistryAction(e){var t,i;const n=null===(t=e[_t])||void 0===t?void 0:t[Ji],o=null===(i=e[_t])||void 0===i?void 0:i.actionId;if(!n||!o)return;const s=this.memoizedNativeMenus({[Ki]:this[Ki],[xi]:lt.default[nn][Li]})[n].actions[o];if(!s)return;const a=s[ln];a&&(s[Lt]&&this[Yi](null,!0),a({[Ki]:this[Ki],[xi]:lt.default[nn][Li],[jt]:void 0}));const r=lt.default[nn][Li][0];if(r){const e=r[Ei](),t=r[Di]();He.trackBlockAction(this[Ki],{[Nt]:s[Nt],from:"slash_menu",block_id:r.id,block_type:e,is_toggleable:e?(0,at.isToggleOrToggleableFormatBlockType)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${n}`})}}handleDismissKeyboard(){Je.clear(this[Ki]),Ke.clearSelection(),this[_i][Li][Ui][Mi]((e=>({...e,isInsertOpen:!1}))),this[Yi](null,!1),this[Gi](null,!1),it[zt](this[Ki],"hide_keyboard"),Ve.blurActiveElement()}[li](e){let t=yi;const i=m.E_.find((t=>t===e));let n;"default"===e||i&&(i.includes("background")?(n="background",t="textBackgroundColor"):n=$t);const o=n&&i?(0,m.fi)(i,this.theme)[n]:void 0;return{localImageIdentifier:t,imageTintColor:o?(0,m.J1)(o):void 0}}handleInsert(){this[_i][Li][Ui][Mi]((e=>({...e,isInsertOpen:!0}))),it[zt](this[Ki],"insert")}handleTurnInto(){this[_i][Li][Ui][Mi]((e=>({...e,isTurnIntoOpen:!0}))),it[zt](this[Ki],"turn_into")}handleTemplate(){Je.clear(this[Ki]),Ve.blurActiveElement(),this[_i][Li][Ui][Mi]((e=>({...e,isTemplatesOpen:!0}))),it[zt](this[Ki],"templates")}handleTextColor(){this[_i][Li][Ui][Mi]((e=>({...e,isColorOpen:!0}))),it[zt](this[Ki],$t)}[Yi](e,t){var i;null===(i=this[Ki][ji])||void 0===i||i[Mi]((i=>({...i,[Ji]:e,shouldRestoreSelectionForMenu:t})))}[Gi](e,t){const{[ji]:i}=this[Ki];null==i||i[Mi]((i=>({...i,isSubMenuOverridden:t,subMenuType:e}))),null!==e&&it[zt](this[Ki],e)}}Zn.displayName="NativeMobileActionBar";const wn=(0,Ge.injectIntl)(Zn)},10858:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ai});var n=i(77094),o=i.n(n),s=i(97464),a=i.n(s),r=i(67294),d=i(83355),l=i(69615),c=i(15145),h=i(8848),u=i(3909),m=i(69246),b=i(5366),p=i(61045),v=i(87531),g=i(74647),f=i(29974),y=i(2122),S=i(95477),k=i(28020),A=i(43250),T=i(73744),B=i(71119),M=i(52533),Z=i(45010),w=i(45094),I=i(21115),C=i(8323),x=i(27177),P=i(5074),U=i(5162),F=i(34859),O=i(79315),D=i(10161),R=i(90848),E=i(12768),N=i(72087),_=i(45589),L=i(7755),q=i(78291),W=i(23063),Q=i(64921),$=i(31945),z=i(3386),G=i(77137),H=i(18647),X=i(40679),Y=i(5978),J=i(87279),K=i(88632),V=i(53610),j=i(78140),ee=i(64369),te=i(27386),ie=i(14694),ne=i(40141);const oe=i(85).jkI,se=i(85).IlQ,ae=i(85).D7I,re=i(85).nx5,de=i(85).JXA,le=i(85).wgE,ce=i(85).kdG,he=i(85).rSD;class ue extends d.Z{constructor(){super(...arguments),this[he]=()=>{const{[ce]:e}=this[le],t=()=>{V.Z.setState({open:!1})};null!=e&&e[de]()?Y.navigateToHomeTab(this[le],t):t()}}renderComponent(){const{store:e}=this.props;if(!(0,C.isMultiplayerEnabled)()||!e.isDefined())return;const{[ce]:t}=this[le],i=(null==t?void 0:t[de]())||!1;return o()($.ZP,{buttonPopupStore:V.Z,popupType:$.Z4.SlideUp,hidesMobileNativeBottomBar:i,[se]:i,renderOrigin:e=>r[ae](Q.Z,a()({mobileFeedback:!0},e),o()(ie.Z,{left:this.renderIcon(),disableMobileBorder:!0},void 0,o()(b.FormattedMessage,{[re]:"Members",id:"memberSettingsButton.mobileSidebar.label"}))),render:()=>{if(K.Z.state.online){const t={menuType:J.og.Modal,title:o()(b.FormattedMessage,{[re]:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:o()(b.FormattedMessage,{[re]:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this[he],onCancel:this[he]};return r[ae](j.Z,t,o()(ne.Z,{store:e,isMobile:!0}))}this.renderOffline()}})}renderIcon(){return u.Z.teamSize({fill:this.theme.mediumIconColor,width:16})}renderOffline(){return o()(te.Z,{},void 0,o()(ee.Z,{isSmall:!0,style:{textAlign:oe}},void 0,o()(b.FormattedMessage,{[re]:"Please go online to manage members.",id:"memberSettingsButton.goOnline.prompt"})))}}ue.displayName="MemberSettingsButton";const me=ue;var be=i(14786),pe=i(15311);const ve=i(85).IlQ,ge=i(85).h_J,fe=i(85).D7I,ye=i(85).nx5,Se=i(85).lWm,ke=i(85).Scd,Ae=i(85).Hco,Te=i(85).dLQ,Be=i(85).JXA,Me=i(85).wgE,Ze=i(85).kdG,we=i(85).rSD;class Ie extends d.Z{constructor(){super(...arguments),this[we]=()=>{const{[Ze]:e}=this[Me],t=()=>{be.Z.setState({open:!1})};be.Z.state.source!==be.Y.Updates&&((null==e?void 0:e[Be]())||!1)?Y.navigateToHomeTab(this[Me],t):t()}}renderComponent(){const{device:e,[Ze]:t}=this[Me],i=be.Z.state.open,n=be.Z.state.source!==be.Y.Updates&&((null==t?void 0:t[Be]())||!1);return o()($.ZP,{popupType:e[Te]?$.Z4.SlideUp:$.Z4.Popup,hidesMobileNativeBottomBar:n,[ve]:n,buttonPopupStore:be.Z,renderOrigin:t=>r[fe](Q.Z,a()({mobileFeedback:e[Te]},t),o()(ie.Z,{left:u.Z.sidebarSettings({fill:this.theme[Ae],width:16}),style:{[ke]:i?this.theme[Se]:"none"},disableMobileBorder:!0},void 0,o()(b.FormattedMessage,{[ye]:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"}))),render:()=>{let t;return t=e[Te]?{menuType:J.og.Modal,title:o()(b.FormattedMessage,{[ye]:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:o()(b.FormattedMessage,{[ye]:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this[we],onCancel:this[we],whiteBackground:!0}:{menuType:J.og.Popup},r[fe](j.Z,t,o()(pe.Z,{[Te]:!0,[ge]:this.props[ge]}))}})}}Ie.displayName="NotificationSettingsButton";const Ce=Ie;var xe=i(12334),Pe=i(31054),Ue=i(32016),Fe=i(37064),Oe=i(29477),De=i(24677),Re=i(80796),Ee=i(29337);const Ne=i(85).p06,_e=i(85).EmK,Le=i(85).z$9,qe=i(85).k0H,We=i(85).eiN,Qe=i(85).IY7,$e=i(85).RvT,ze=i(85).BQ6,Ge=i(85).p1r,He=i(85).u3c,Xe=i(85).Au,Ye=i(85).QKL,Je=i(85).qnp,Ke=i(85).Z_D,Ve=i(85).qI$,je=i(85).Wp_,et=i(85).wgE,tt=i(85).QmD,it=i(85).HHf,nt=200;class ot extends d.Z{constructor(){super(...arguments),this[it]=e=>{const t={x:e.touches[0].clientX,y:e.touches[0].clientY};L.TC[tt]?t.x>(0,w.getOpenSidebarWidth)(this[et])?Ee.Z[je]({touching:!0,swiping:!1,[Ve]:t}):this[Ke]():(0,w.sidebarOverlapsContent)(this[et])&&t.x<100?Ee.Z[je]({touching:!0,swiping:!1,[Ve]:t}):this[Ke]()},this.handleTouchMove=e=>{if(Re.Z[tt][Je])return void this[Ke]();const t=Ee.Z[tt];if(!t.touching)return;const i={x:e.touches[0].clientX,y:e.touches[0].clientY};if(t.swiping)Ee.Z[je]({touching:!0,swiping:!0,[Ve]:t[Ve],speed:L.TC[tt]?t.end.x-i.x:i.x-t.end.x,end:i});else{if(Math.abs(i.y-t[Ve].y)>=25)return void this[Ke]();(!L.TC[tt]&&i.x-t[Ve].x>25||L.TC[tt]&&t[Ve].x-i.x>25)&&Ee.Z[je]({touching:!0,swiping:!0,[Ve]:t[Ve],speed:0,end:i})}this.updateTransform()},this.handleTouchEnd=async()=>{const{ThemeStore:e}=this[et],t=Ee.Z[tt];if(!t.swiping)return;const i=(0,w.getOpenSidebarWidth)(this[et]),n=document[Ye]((0,w.sidebarOverlapsContent)(this[et])?`.${A.sidebarMobile}`:`.${A.frame}`),o=document[Ye](`.${A.frame}`),s=Math.abs(t.speed)>=8,a=s?"ease-out":"ease-in-out",r="dark"===e[tt].mode?`, 1px 0 0 ${this[Xe].shadowColor.alpha(2*this[Xe].shadowOpacity).css()}`:"",d=`\n\t\t\t${this[Xe][He]}\n\t\t\t${r}\n\t\t`;if(L.TC[tt]){const e=t[Ve].x-t.end.x;if(e+25*t.speed>i/2){let t=s?(i-e)/i*nt:nt;t=Math.max(t,1),n[ze][Ge]=`transform ${t}ms ${a}`,n[ze][$e]="translateZ(0)translateX(0px)",(0,w.sidebarOverlapsContent)(this[et])&&(n[ze][Qe]=d,o[ze][Ge]=`filter ${t}ms ${a}`,o[ze][We]=qe),await at(n),g.close(),this[Ke]()}else n[ze][Ge]=`transform 200ms ${a}`,n[ze][$e]=`translateZ(0)translateX(${i}px)`,(0,w.sidebarOverlapsContent)(this[et])&&(n[ze][Qe]=d,o[ze][Ge]=`filter 200ms ${a}`,o[ze][We]="brightness(0.7)"),await at(n),this[Ke]()}else{const e=t.end.x-t[Ve].x;if(e+25*t.speed>i/2){let t=s?(i-e)/i*nt:nt;t=Math.max(t,1),n[ze][Ge]=`transform ${t}ms ${a}`,n[ze][$e]=`translateZ(0)translateX(${i}px)`,(0,w.sidebarOverlapsContent)(this[et])&&(n[ze][Qe]=d,o[ze][Ge]=`filter ${t}ms ${a}`,o[ze][We]="brightness(0.7)"),await at(n),g.open(),this[Ke]()}else n[ze][Ge]=`transform 200ms ${a}`,n[ze][$e]="translateZ(0)translateX(0px)",(0,w.sidebarOverlapsContent)(this[et])&&(n[ze][Qe]=d,o[ze][Ge]=`filter 200ms ${a}`,o[ze][We]=qe),await at(n),this[Ke]()}},this.handleSidebarToggle=()=>{this.updateTransform()},this.updateTransform=()=>{const e=document[Ye]((0,w.sidebarOverlapsContent)(this[et])?`.${A.sidebarMobile}`:`.${A.frame}`),t=document[Ye](`.${A.sidebarMobile}`),i=document[Ye](`.${A.frame}`),n=(0,w.getOpenSidebarWidth)(this[et]),o=Ee.Z[tt];if(this[et].device.isIOS&&(i[ze][$e]="translateZ(0)translateX(0px)",i[ze][We]=qe,t[ze][$e]="translateZ(0)translateX(0px)",t[ze][We]=qe),o.swiping)if(L.TC[tt]){const t=n-(o[Ve].x-o.end.x)+25,s=Math.min(Math.max(0,t),n);if(e[ze][Ge]=Le,e[ze][$e]=`translateZ(0)translateX(${s}px)`,(0,w.sidebarOverlapsContent)(this[et])){e[ze][Qe]=this[Xe][He],i[ze][Ge]=Le;const t=(1-.3*s/n).toString();i[ze][We]=`brightness(${t})`}}else{const t=o.end.x-o[Ve].x-25,s=Math.min(Math.max(0,t),n);if(e[ze][Ge]=Le,e[ze][$e]=`translateZ(0)translateX(${s}px)`,(0,w.sidebarOverlapsContent)(this[et])){e[ze][Qe]=this[Xe][He],i[ze][Ge]=Le;const t=(1-.3*s/n).toString();i[ze][We]=`brightness(${t})`}}else L.TC[tt]?(e[ze][Ge]="transform 200ms",e[ze][$e]=`translateZ(0)translateX(${n}px)`,(0,w.sidebarOverlapsContent)(this[et])&&(e[ze][$e]=`translateZ(0)translateX(calc(${n}px - 1px))`,e[ze][Qe]=this[Xe][He],i[ze][Ge]="filter 200ms",i[ze][We]="brightness(0.7)"),De.clear(this[et])):(e[ze][Ge]="transform 200ms",e[ze][$e]="translateZ(0)translateX(0)",(0,w.sidebarOverlapsContent)(this[et])&&(e[ze][Qe]=Le,i[ze][Ge]="filter 200ms",i[ze][We]=qe))}}didMount(){const{device:e}=this[et];e.isMobile&&(window[_e]("touchstart",this[it]),window[_e]("touchmove",this.handleTouchMove),window[_e]("touchend",this.handleTouchEnd),L.TC.addListener(this.handleSidebarToggle))}willUnmount(){const{device:e}=this[et];e.isMobile&&(window[Ne]("touchstart",this[it]),window[Ne]("touchmove",this.handleTouchMove),window[Ne]("touchend",this.handleTouchEnd),L.TC.removeListener(this.handleSidebarToggle))}[Ke](){Ee.Z.reset(),this.updateTransform()}}ot.displayName="SidebarMobileSwipeListener";const st=ot;async function at(e){const t=Oe.deferred();e[_e]("transitionend",t.resolve),e[_e]("webkitTransitionEnd",t.resolve),await t.promise,e[Ne]("transitionend",t.resolve),e[Ne]("webkitTransitionEnd",t.resolve)}var rt=i(21323),dt=(i(73499),i(59694)),lt=i(50906),ct=i(85266);class ht extends d.Z{renderComponent(){const e=o()(b.FormattedMessage,{defaultMessage:"Upgrade to Pro",id:"upgradeMobileButton.upgradeButton.label"});return o()(Q.Z,{mobileFeedback:!0,onClick:this.showUpgradeModal(this.environment)},void 0,o()(ie.Z,{left:this.renderIcon(),disableMobileBorder:!0},void 0,e))}renderIcon(){return u.Z.settingsUpgradeFilled({fill:this.theme.mediumIconColor,width:16})}showUpgradeModal(e){return()=>{lt.trackClickUpgradeInfoButton(e,{from:"mobile_sidebar",for_subscription_tier:"personal"});const{mobileNative:t}=e;t&&t.openUpgradeModal(ct.getCurrentSpaceId())}}}ht.displayName="UpgradeMobileButton";const ut=ht;var mt=i(22715),bt=i(22735),pt=i(88461);const vt=i(85).UPJ,gt=i(85).jkI,ft=i(85).BMM,yt=i(85).tBn,St=i(85).TtP,kt=i(85).HER,At=i(85).XCA,Tt=i(85).eQV,Bt=i(85).nx5,Mt=i(85).Wqi,Zt=i(85).hBM,wt=i(85).y0c,It=i(85).pkR,Ct=i(85).fBu,xt=i(85).HHU,Pt=i(85).hq,Ut=i(85).GiO,Ft=i(85).PG2,Ot=i(85).iNP,Dt=i(85).LIR,Rt=i(85).irQ,Et=i(85).Ubh,Nt=i(85).Und,_t=i(85).sfA,Lt=i(85).Y7T,qt=i(85).t4B,Wt=i(85).cx2,Qt=i(85).Mm1,$t=i(85).rps,zt=i(85).$bT,Gt=i(85).EMU,Ht=i(85).sM5,Xt=i(85).X_m,Yt=i(85).gGi,Jt=i(85).BQ6,Kt=i(85).ncO,Vt=i(85).KCU,jt=i(85).lGm,ei=i(85).dLQ,ti=i(85).Aw$,ii=i(85).xgV,ni=i(85).kBp,oi=i(85).rpY,si=i(85).D7I,ai=i(85).tDk,ri=i(85).qJ8,di=i(85).EZQ,li=i(85).fbO,ci=i(85).EXq,hi=i(85).DgF,ui=i(85).Gnd,mi=i(85).QmD,bi=i(85).V7c,pi=i(85).EIp,vi=i(85).P3s,gi=i(85).wgE,fi=i(85).aTc,yi=i(85).h_J,Si=i(85).k_9;class ki extends d.Z{constructor(){super(...arguments),this.storeTypes={[Si]:_.Z,[yi]:N.Z},this.handleScrollerMount=e=>{Z.Z.SidebarMobileScroller=e},this[fi]=()=>{g.close()},this.handleClickFind=()=>v.Kf({[gi]:this[gi],[vi]:"sidebar-mobile"}),this.handleOrientationChange=()=>{g.close()},this.isScrolledToTop=this[pi]((()=>0===this[ui][Si][mi][bi])),this.isCurrentIAPSubscriber=()=>{const{[hi]:e}=O.default[mi],t=(0,I.getAdminSpaceProductIds)({[gi]:this[gi],[ci]:e});return!(!t||!t[li](S.default.revenueCat.productIDs[di].monthly)&&!t[li](S.default.revenueCat.productIDs[di].yearly))}}willMount(){window.addEventListener("resize",this.handleOrientationChange)}willUnmount(){window.removeEventListener("resize",this.handleOrientationChange)}renderComponent(){const e=E.default[mi];if(e.isOnboarding&&"workspace_setup"===e.stage)return;if((0,U.Y)("supportsNativeHome")&&"on"!==D.default.getGroup("mobile-home-tab-allow-web-sidebar")){const{[ri]:e,[ai]:t}=O.default[mi];return o()("div",{[jt]:A.hidden},void 0,r[si](x.Z,a()({createType:"add-account"},this[ui])),e&&o()(me,{store:e}),o()(G.Z,{request:{},[oi]:()=>{},[ni]:this[ui][yi],[ii]:()=>(0,B.pu)(this[gi])}),o()(Ce,{[yi]:this[ui][yi]}),e&&t&&e[ti]()&&o()(rt.Z,{store:t,[ei]:!0}),o()(X.Z,{}),this.renderAIAssistantPopup())}const t=w[Vt](this[gi]);return t?o()(W.Z,{[oi]:()=>o()("div",{[jt]:A.sidebarMobile,[Jt]:this[Kt]()},void 0,!t&&o()(st,{}),this.renderSidebar()),isVisible:!0,animationStyle:{width:t?w.getCurrentSidebarWidth(this[gi]):"100vw"}}):o()("div",{[jt]:A.sidebarMobile,[Jt]:{...this[Kt](),width:"100vw"}},void 0,!t&&o()(st,{}),this.renderSidebar())}renderAIAssistantPopup(){return o()($.ZP,{buttonPopupStore:R.Z,popupType:$.Z4.SlideUp,originGap:0,stopClickPropagation:!0,[oi]:e=>o()("div",{[Jt]:{width:Yt,[Xt]:400,[Ht]:Gt,[zt]:$t,[Qt]:10}},void 0,o()(y.m,{})),isFullWidthOnMobile:!0,preventScaleTransition:!0,renderOrigin:e=>o()("div",{})})}renderSidebar(){return o()(z.Z,{capture:!w[Vt](this[gi])&&L.TC[mi],onBackButton:this[fi]},void 0,o()("div",{[Jt]:this[Wt]()},void 0,this.renderTopbar(),this.renderOutliner()),(0,U.Y)("supportsNativeHome")&&o()("div",{[jt]:A.hidden},void 0,r[si](x.Z,a()({createType:"add-account"},this[ui]))))}renderTopbar(){const{device:e}=this[gi],t=e[qt]&&e.isTablet&&w[Vt](this[gi]);return o()("div",{[Jt]:this.getTopbarStyle()},void 0,o()(P.ZP,{shouldShowUnexpandButton:t,format:P._S.Mobile,onSpaceClick:async e=>{let{event:t,[Lt]:i}=e;await f[_t]({[gi]:this[gi],[Lt]:i,[Nt]:O.default[mi][Et],[ci]:O.default[mi][hi],openInNew:T[Rt](t),[Dt]:c.tY.SwitchSpace})}}),!e[qt]&&o()(dt.Z,{format:dt.Z.Format.TopbarMobile}),!e[qt]&&o()(Q.Z,{[Ft]:this.handleClickFind,mobileFeedback:!0,[Jt]:ki[Ot]},void 0,u.Z.mobileBottomBarSearch({width:26})))}renderOutliner(){const{[ri]:e,[Ut]:t,[hi]:i,currentUserStore:n,[Et]:s,[ai]:a}=O.default[mi],d=(0,k.sidebarStateStore)(this[gi])[mi];if(!(d&&t&&i&&e&&n&&s))return;const l=e[ti](),c=(0,M.S$)({[gi]:this[gi]})&&C.isFreeTier()&&q.default[mi].data&&"unsubscribed_admin"===q.default[mi].data.type&&q.default[mi].data.revenueCatEnabled&&!this.isCurrentIAPSubscriber(),h=t.getTeamsStores();return o()(Fe.Z,{store:e,disableEditNearestBlock:!0,[oi]:i=>{let{selectableEvents:n}=i;return r[si](H.Z,{store:this[ui][Si],ref:this.handleScrollerMount,[Jt]:ki.outlinerStyle,preventType:p.getPreventScrollType(this[gi]),type:F.Z.Y},o()(mt.Z,{}),d.showBookmarksSection&&o()(xe.Z,{type:"bookmarks",[Zt]:!0,[Mt]:e,[Lt]:t,showAddButton:!1,renderSidebar:e=>{let{contentsAriaId:i,[Pt]:n}=e;return o()(bt.Z,{type:"bookmarks",itemDepth:0,[Ct]:t[xt](),childStores:t.getBookmarkedPages(),onNavigate:this[fi],[It]:!l,id:i,[wt]:n})}}),d.showTeamSection&&o()(xe.Z,{type:m.kg,sectionLabel:o()(b.FormattedMessage,{[Bt]:"Teamspaces",id:"sidebarMobile.teamsSection.header"}),[Zt]:!0,[Mt]:e,[Lt]:t,showAddButton:!1,renderSidebar:e=>{let{contentsAriaId:t}=e;return o()(pt.u,{teams:h,reorderable:!1,onNavigate:this[fi],id:t})}}),d.showWorkspaceSection&&!d.showTeamSection&&o()(xe.Z,{type:"workspace",[Zt]:!0,[Mt]:e,[Lt]:t,showAddButton:!1,renderSidebar:i=>{let{contentsAriaId:n,[Pt]:s}=i;return o()(bt.Z,{type:"workspace",itemDepth:0,[Ct]:e[Tt](),childStores:t.getWorkspacePages(),onNavigate:this[fi],[It]:!l,id:n,[wt]:s})}}),d.showSharedSection&&o()(xe.Z,{type:"shared",[Zt]:!0,[Mt]:e,[Lt]:t,showAddButton:!1,renderSidebar:i=>{let{headerRef:n,contentsAriaId:a,[Pt]:c}=i;return r[si](r[yt],null,o()(bt.Z,{type:"shared",itemDepth:0,[Ct]:t[At](),childStores:d[kt],onNavigate:this[fi],[It]:!l,id:a,[wt]:c}),d.showSharedOverflowButton&&o()(Ue.QO,{originRef:n,type:"shared",[Mt]:e,[Lt]:t,[Nt]:s,allPages:d.allSharedPagesStores,visiblePageIds:d[kt].map((e=>{let{id:t}=e;return t})),[oi]:e=>{let{[Ft]:t,isPopoverOpen:i}=e;return o()(Pe.A,{isPopoverOpen:i,[Ft]:t,moreCount:d.allSharedPagesStores[St]-d[kt][St],inline:!1})}}))}}),d.showPrivateSection&&!d.showOnlyPrivateSection&&o()(xe.Z,{type:"private",[Zt]:!0,[Mt]:e,[Lt]:t,showAddButton:!1,renderSidebar:i=>{let{contentsAriaId:n,[Pt]:s}=i;return o()(bt.Z,{type:"private",itemDepth:0,[Ct]:e[Tt](),childStores:t.getPrivatePages(this[gi]),onNavigate:this[fi],[It]:!l,id:n,[wt]:s})}}),d.showOnlyPrivateSection&&o()(bt.Z,{type:"private",itemDepth:0,[Ct]:e[Tt](),childStores:t.getPrivatePages(this[gi]),onNavigate:this[fi],[It]:!l}),d.showOnlyPrivateSection&&o()("div",{[Jt]:{[Xt]:20}}),o()(me,{store:e}),o()(G.Z,{request:{},[oi]:()=>{},[ni]:this[ui][yi],[ii]:()=>(0,B.pu)(this[gi])}),o()(Ce,{[yi]:this[ui][yi]}),a&&e[ti]()&&o()(rt.Z,{store:a,[ei]:!0}),c&&o()(ut,{}),o()(X.Z,{}),!1,o()("div",{[Jt]:{[Xt]:148}}))}})}[Kt](){return w[Vt](this[gi])?{[Ht]:"block",[Xt]:"100vh",position:"relative",zIndex:3}:w[ft](this[gi])?{[Ht]:"block",[Xt]:"100vh",position:"fixed",top:0,right:Yt,zIndex:3}:{[Ht]:"block",[Xt]:"100vh",position:"fixed",top:0,left:0}}[Wt](){return{[Ht]:Gt,[zt]:$t,width:w.getOpenSidebarWidth(this[gi]),[Xt]:Yt,background:w[ft](this[gi])?this.theme.mobileSidebarAndroidBackground:this.theme.mobileSidebarIOSBackground,willChange:"transform",color:this.theme.mediumTextColor,...w[ft](this[gi])&&{marginLeft:"auto"},...w[Vt](this[gi])&&{position:"absolute",right:0},cursor:"pointer"}}getTopbarStyle(){const{WindowSizeStore:e}=this[gi];return{[Ht]:Gt,alignItems:gt,[vt]:"space-between",[Gt]:"none",[Xt]:l.g,marginTop:e[mi].paddingTopCSS,paddingLeft:12,boxShadow:w[ft](this[gi])&&!w[Vt](this[gi])&&L.TC[mi]?this.isScrolledToTop[mi]?this.theme.topbarAndroidShadowCollapsed:this.theme.topbarAndroidShadow:`0 1px 0 ${this.theme.regularDividerColor}`,background:w[ft](this[gi])?this.theme.androidSidebarBackground:h.ZP.transparent,transition:"box-shadow 300ms",width:Yt,zIndex:1}}}ki.displayName="SidebarMobile",ki.outlinerStyle={flexGrow:1,paddingTop:12,userSelect:"none",WebkitUserSelect:"none"},ki[Ot]={[Ht]:Gt,alignItems:gt,[vt]:gt,[Gt]:"none",[Xt]:Yt,width:44,paddingRight:6};const Ai=ki},40863:(e,t,i)=>{i.d(t,{Ft:()=>Z,YG:()=>w,y$:()=>C,du:()=>x,BO:()=>P,Lh:()=>D});var n=i(96486),o=i.n(n),s=i(17126),a=i(30823),r=i(40506),d=i(53877),l=i(42875),c=i(55384),h=i(5366),u=i(28020);const m=i(85).nx5,b=i(85).CwG,p=i(85).YaF,v=i(85).nSw,g=i(85).C9b,f=i(85).kdI,y=i(85).oki,S=i(85).iQh,k=i(85).nUE,A=i(85).qq3,T=i(85).QmD,B=i(85).qU4,M=i(85).P24;function Z(e){const{[M]:t}=e,i=t[B]();if(!i)return;const n=t[A][T],o=i.getQuery(n);if(!o||!o[k])return;const s=t[S][T],a=t.dateRangeEnd[T],r=(0,d.date)(s,(0,l.r)()),c=(0,d.date)(a,(0,l.r)());return I({calendarBy:o[k],dateRangeStartDate:r,dateRangeEndDate:c})}function w(e){const{[M]:t,startOfDay:i}=e,n=t[B]();if(!n)return;const o=t[A][T],a=n.getQuery(o);if(!a||!a[k])return;const r=s.ou[y](i).endOf("day").valueOf(),c=(0,d.date)(i,(0,l.r)()),h=(0,d.date)(r,(0,l.r)());return I({calendarBy:a[k],dateRangeStartDate:c,dateRangeEndDate:h})}function I(e){const{dateRangeStartDate:t,dateRangeEndDate:i,calendarBy:n}=e;return{type:"results",filter:{operator:"and",filters:[{property:n,filter:{operator:f,use_end:!0,value:{type:"exact",value:t}}},{property:n,filter:{operator:g,value:{type:"exact",value:i}}}]},limit:5e3}}function C(e){const{[M]:t,results:i,[v]:n,intl:s}=e,a=t[B](),c=t[p][T],h=t[A][T],m=c?c[k]:void 0,b=t[S][T],g=t.dateRangeEnd[T],f=u.userSettingsStartOfWeekStore[T],y=(0,l.r)(),Z=t.getCurrentUserId();if(!(a&&c&&m&&h))return;const w=o().compact(i.map((e=>P({blockStore:e,calendarBy:m,schema:h,[v]:n,userId:Z,intl:s})))),I={};i.forEach(((e,t)=>{I[e.id]=t}));0===(c.sort||[]).length&&w.sort(((e,t)=>{const i=e.start.valueOf(),n=t.start.valueOf();if(i===n){return I[e.id]-I[t.id]}return i-n}));const C=(0,d.getLuxonStartOfWeek)(b,f,y),F=(0,d.getLuxonEndOfWeek)(g,f,y);let O=C;const D=[];do{const e=(0,d.getLuxonEndOfWeek)(O.valueOf(),f,y),t={},i=w.filter((t=>(0,r.rangeIntersects)(O.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((i=>{const{id:n,start:o,end:s,includeTime:a,timeZone:r}=i,{startColumn:d,columnCount:l}=x({startUnixTimestampMS:o.valueOf(),endUnixTimestampMS:s?s.valueOf():void 0,startOfWeekUnixTimestampMS:O.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),c=U(d,l,t);return{id:n,start:o.valueOf(),end:s?s.valueOf():void 0,row:c,includeTime:a,timeZone:r}}));D.push({start:O.valueOf(),end:e.valueOf(),items:i}),O=(0,d.getLuxonStartOfWeek)(O.plus({week:1}).plus({hour:25}).valueOf(),f,y)}while(O<F);return D}function x(e){const t=s.ou[y](e.startUnixTimestampMS),i=e.endUnixTimestampMS?s.ou[y](e.endUnixTimestampMS):void 0,n=s.ou[y](e.startOfWeekUnixTimestampMS),o=s.ou[y](e.endOfWeekUnixTimestampMS),a=t.startOf("day"),r=s.ou.max(n,a),d=r.diff(n,"days").get("days");let l=1;if(i){const e=i.endOf("day"),t=s.ou.min(o,e);l=Math.ceil(t.diff(r,"days").get("days"))}return{start:t,end:i,startOfWeek:n,endOfWeek:o,startColumn:d,columnCount:l}}function P(e){const{blockStore:t,calendarBy:i,schema:n,[v]:o,intl:s,userId:r}=e,h=t.getModel();if(!h)return;const u=(0,a.FT)({property:i,schema:n,block:h,getRecordModel:c.om[b](o),userId:r,userTimeZone:(0,l.r)(),depth:0,intl:s,propertyMapping:void 0,visitedProperties:new Set,resultCache:{}}).next().value;if("date"!==u.type)return;const m=u.value,p=m&&(0,d.getLuxonRange)(m,(0,l.r)());if(!m||!p)return;return{id:h.id,start:p.start,end:p.end,includeTime:"datetime"===m.type||"datetimerange"===m.type,timeZone:"datetime"===m.type||"datetimerange"===m.type?m.time_zone:void 0}}function U(e,t,i){let n=0;for(;;){let o=!1;for(let s=0;s<t;s++)F(i,e+s,n)&&(o=!0);if(!o)break;n++}for(let o=0;o<t;o++)O(i,e+o,n);return n}function F(e,t,i){return Boolean(e[i]&&e[i][t])}function O(e,t,i){e[i]||(e[i]={}),e[i][t]=!0}const D=(0,h.defineMessages)({week:{[m]:"Week",id:"calendar.viewRanges.week"},month:{[m]:"Month",id:"calendar.viewRanges.month"}})},5971:(e,t,i)=>{i.d(t,{E:()=>s});var n=i(81954),o=i(10161);function s(e){return(0,n.VK)((()=>o.default.checkGate(e)),[e])}},27177:(e,t,i)=>{i.d(t,{Z:()=>q});var n=i(97464),o=i.n(n),s=i(77094),a=i.n(s),r=i(67294),d=i(83355),l=i(5366),c=i(50906),h=i(5978),u=i(52275),m=i(31945),b=i(46457),p=i(43250),v=i(88632),g=i(96071),f=i(30278),y=i(85974),S=i(64157),k=i(17364);const A=i(85).IlQ,T=i(85).D7I,B=i(85).$v$,M=i(85).Wp_,Z=i(85).dLQ,w=i(85).F7y,I=i(85).NLk,C=i(85).wuN,x=i(85).wgE,P=i(85).kdG,U=i(85).JXA,F=i(85).zDZ,O=i(85).Gnd,D=i(85).P0R,R=i(85).Yzm,E=i(85).nx5,N=i(85).Zs3,_=i(85).LpK;class L extends d.Z{constructor(){super(...arguments),this.storeTypes={[_]:y.Z,[N]:f.Z,loginModalStore:g.Z},this.renderAccountActionModal=(e,t)=>{let i,n;switch(e){case"add-account":i=a()(l.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.title",[E]:"Add an account"}),n=a()(l.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.description",[E]:"Use an existing account, or sign up with a new email. Your current account will remain logged in."});break;case"create-work":i=a()(l.FormattedMessage,{id:"sidebarSwitcherMultiAccount.createWork.title",[E]:"Create a work account"}),n=a()(l.FormattedMessage,{id:"sidebarSwitcherMultiAccount.createWork.description",[E]:"Weâ€™ll check if your teammates are already on Notion. If not, weâ€™ll create a new home for you and your team."});break;default:throw new Error(this[D].intl[R]({[E]:"Unexpected createType in SidebarSwitcherMultiAccount",id:"sidebarSwitcherMultiAccount.errorMessage"}))}return a()(b._,{loginModalStore:this[O].loginModalStore,[_]:this[O][_],title:i,[F]:n,disableLoginLink:this[D].disableLoginLink,className:p.spaceSettings,redirectURL:this[D].redirectURL,onDismiss:t})},this[U]=()=>{const{[P]:e}=this[x];return(null==e?void 0:e[U]())||!1},this.getAccountActionStyle=()=>{const{device:e}=this[x];return{display:"flex",color:this.theme[C],[I]:w,fontSize:e[Z]?16:12}}}willMount(e){super.willMount(e);const{[_]:t}=this[O];"email"===t.state.loginType&&this[x].device[Z]&&t[M]({...t.state,loginType:"google"})}renderComponent(){const{online:e}=v.Z.state,{device:t}=this[x],{createType:i}=this[D],n=this[U]();return t[Z]?a()(m.ZP,{popupType:m.Z4.SlideUp,hidesMobileNativeBottomBar:n,[A]:n,buttonPopupStore:"add-account"===i?S.C:S.E,alignmentToOrigin:m.vR.Start,placementToOrigin:m.pO.Top,originGap:0,isFullWidthOnMobile:!0,render:e=>this.renderAccountActionModal(i,(()=>{this[U]()?h.navigateToHomeTab(this[x],e.close):e.close()})),preventScaleTransition:!0,renderOrigin:t=>r[T](u.Z,o()({focused:!1,disabled:!e,title:this[B](i),icon:this[D].icon},t))}):a()("div",{onClick:()=>{e&&(c.trackMultiAccountAddOrCreateAccount(this[x],{createType:i}),k.Z[M]({...k.Z.getState(),createType:i}),this[O].loginModalStore[M]({open:!0}))}},void 0,a()(u.Z,{focused:!1,disabled:!e,title:this[B](i),icon:this[D].icon}),this.renderAccountActionModal(i))}[B](e){switch(e){case"create-work":return a()("div",{style:this.getAccountActionStyle()},void 0,a()(l.FormattedMessage,{[E]:"Create work account",id:"sidebarSwitcherMultiAccount.menuItem.createWorkAccountButton.label"}));case"add-account":return a()("div",{style:this.getAccountActionStyle()},void 0,a()(l.FormattedMessage,{[E]:"Add another account",id:"sidebarSwitcherMultiAccount.addAccountButton.label"}))}}}L.displayName="SidebarSwitcherLoginModal";const q=(0,l.injectIntl)(L)},63334:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(49085);class o extends n.default{getInitialState(){return{}}}const s=o},72653:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(14577),o=i(5162),s=i(69454),a=i(55320);const r=new n.Z((()=>{const{phase:e}=s.Z.state;if(a.default.state.open)return!0;return(0,o.Y)("supportsFixedSizeWebView")&&!s.Z.state.shouldResizeWebView||e===s.i.hidden||e===s.i.willHide}),{debugName:"MobileBottomBarStore"})}}]);