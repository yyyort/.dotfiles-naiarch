"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3370],{63123:(e,t,i)=>{i.d(t,{V:()=>a});var o=i(67294);const n=i(85).iDK;function a(e){const{value:t,validateLoaded:i}=e,a=e.waitTimeInMs||500,[s,r]=(0,o.useState)(!0),d=(0,o.useRef)(),l=void 0!==t&&(!i||s&&i(t));return(0,o.useEffect)((()=>(d[n]=window.setTimeout((()=>{r(!1),d[n]=void 0}),a),()=>{d[n]&&(clearTimeout(d[n]),d[n]=void 0)})),[a]),(0,o.useEffect)((()=>{l&&d[n]&&(r(!1),clearTimeout(d[n]),d[n]=void 0)}),[l]),void 0!==t&&l?{status:"resolved",value:t}:s?{status:"pending",value:void 0}:{status:"rejected",value:void 0,error:new Error("Reached end of timeout before value became defined.")}}},78948:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(77094),n=i.n(o),a=(i(67294),i(83355)),s=i(68785),r=i(28992);class d extends a.Z{renderComponent(){return n()(r.Z,{title:n()(s.Z,{})})}}d.displayName="LoadingMenuItem";const l=d},61695:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Di});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),d=i(24405),l=i(63123),c=i(49085),u=i(15070),p=i(8848),m=i(59054),g=i(56589),h=i(4615),v=i(77420),b=i(9844),w=i(19889),f=i(90965),y=i(9038),S=i(97880),A=i(82990),I=i(64002),P=i(5978),k=i(29974),x=i(21325),C=i(91924),z=i(38755),M=i(21115),F=i(79315),V=i(39098),Z=i(62213),T=i(78291),N=i(3403),L=i(3909),_=i(5366),B=i(82036),W=i(36110),O=i(42922),K=i(63296),E=i(42402);const U=i(85).piI,R=i(85).vp$,D=i(85).s9u,Y=i(85).FkY,H=i(85).T3c,G=i(85).suo,$=i(85).cDf,j=i(85).U8w,q=i(85).aqt,Q=i(85).g7N,J=i(85).jkI,X=i(85).nx5,ee=i(85).VUQ,te=i(85).wgE,ie=i(85).PG2,oe=i(85).L_E,ne=i(85).ymU,ae=i(85).Zij,se=i(85).hC8,re=i(85).YsT,de=i(85).Coi;i(85).lQg;function le(e){window.__c={n:"OauthAuthorizationError"};const{integrationValue:t,oauthParams:i}=e,o=(0,s.O7)(),{[se]:a,[ae]:r,body:l,[ne]:c}=function(e){const t=n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.genericError.title",[X]:q});if("invalidClientId"===e.type)return{[se]:B[$][j],[ae]:t,body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidClientId.body",[X]:G,values:{inlinetextlink:e=>n()(E.Z,{href:H},void 0,e)}})};if("clientNotFound"===e.type)return{[se]:B[$][j],[ae]:t,body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.clientNotFound.body",[X]:G,values:{inlinetextlink:e=>n()(E.Z,{href:H},void 0,e)}})};if("invalidResponseType"===e.type)return{[se]:B[$][j],[ae]:t,body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidResponseType",[X]:"Missing or invalid response_type. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(E.Z,{href:H},void 0,e)}})};if("integrationAlreadyInstalled"===e.type)return{[se]:B[$].access_denied,[ae]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.title",[X]:"This integration has already been added to {workspaceName}",values:{[Y]:e[D]}}),body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.body",[X]:"You can review and remove added integrations in Settings."}),[ne]:{[ie]:e[ne],[ae]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.openWorkspaceSettingsButton.label",[X]:"Open Settings"})}};if("notAnAdmin"===e.type)return{[se]:B[$].access_denied,[ae]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.title",[X]:"You're not allowed to add integrations to {workspaceName}",values:{[Y]:e[D]}}),body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.body",[X]:"Contact an admin to grant you access, or switch to another workspace."}),[ne]:{[ie]:e[ne],[ae]:n()(_.FormattedMessage,{id:R,[X]:"Switch workspace"})}};if("integrationNotApproved"===e.type)return{[se]:B[$].access_denied,[ae]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.title",[X]:'You are not permitted to add the integration "{integrationName}" to {workspaceName}',values:{[U]:e.integrationValue.name,[Y]:e[D]}}),body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.body",[X]:"Contact your system administrator for more information."}),[ne]:{[ie]:e[ne],[ae]:n()(_.FormattedMessage,{id:R,[X]:"Switch workspace"})}};if("invalidRedirectUri"===e.type)return{[se]:B[$][j],[ae]:t,body:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidRedirectUri.body",[X]:"Missing or invalid redirect_uri. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(E.Z,{href:H},void 0,e)}})};(0,S.unreachable)(e.type)}(e),u=function(){const{isMobile:e}=(0,s.Fy)(),t=e?25:48,i=e?18:20;return(0,d.yK)((()=>({[oe]:{textAlign:J,flex:1,display:"flex",flexDirection:"column",alignItems:J,justifyContent:J},icon:{fill:p.ZP.red,width:t,height:t,[Q]:20,display:"inline-block"},[ae]:{fontSize:i,margin:"0 50px 32px",textAlign:J,fontWeight:A.Z.fontWeight.medium,[Q]:12},body:{marginTop:0,[Q]:24,width:"80%"}})),[t,i])}();return n()("section",{style:u[oe]},void 0,L.Z.genericError(u.icon),n()("header",{style:u[ae]},void 0,r),n()("p",{style:u.body},void 0,l),c&&n()("div",{style:u.body},void 0,n()(O.Z,{isLarge:!0,[ie]:c[ie]},void 0,c[ae])),n()(K.Z,{[ie]:()=>{W.V({[te]:o,[ee]:t,errorType:a,params:i})}},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.cancelButton.label",[X]:"Cancel"})))}var ce=i(97464),ue=i.n(ce),pe=i(15145),me=i(55384),ge=i(26825),he=i(50906),ve=i(76463),be=i(77719),we=i(92625),fe=i(41623),ye=i(30874),Se=i(31278),Ae=i(67669),Ie=i(47292);const Pe=i(85).AEv,ke=i(85).BQ6,xe=i(85).Gpy,Ce=i(85).piI,ze=i(85).SFi,Me=i(85).Wku,Fe=i(85).nx5,Ve=i(85).L_E,Ze=i(85).bku;function Te(e){window.__c={n:"OauthAuthorizationBotAccessOptionsStep"};const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o,setBotAccessOption:s}=e,[{value:r}]=(0,m.r5)((async()=>!!i&&await(0,Ae.isPagePublicById)(i)),[i]);a.useEffect((()=>{s(r?Ze:"pick_pages")}),[r,s]);const l=(0,d.yK)((()=>({[Ve]:{display:"grid",gridTemplateRows:"1fr 1fr",gap:8,marginTop:8},icon:{fill:p.ZP.red,width:20,height:20,marginRight:12},errorContainer:{display:"flex",alignItems:"center"}})),[]);return n()("div",{[ke]:l[Ve]},void 0,n()(Ne,{disabled:!r,title:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.title",[Fe]:"Use a template provided by the developer"}),[Pe]:r?n()(_.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.subtitle",[Fe]:"{integrationName} will duplicate this template into the Private pages of your workspace. The integration will then be able to {capabilities} content in this new page.",[xe]:{[Me]:n()(_.FormattedList,{value:(0,Ie.O)(t[Me]),type:ze}),[Ce]:t.name}}):n()("div",{[ke]:l.errorContainer},void 0,n()("div",{},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidTemplate.body",[Fe]:"The page template is no longer public. <inlinetextlink>Contact the developer</inlinetextlink> for more help.",[xe]:{inlinetextlink:t=>n()(E.Z,{href:`mailto:${e.integrationValue.info.email}`},void 0,t)}}))),icon:L.Z.pageAdd,isSelected:"duplicate_template"===o,selectOption:()=>s(Ze)}),n()(Ne,{title:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.title",[Fe]:"Select pages to share with {integrationName}",[xe]:{[Ce]:t.name}}),[Pe]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.subtitle",[Fe]:"Select one or multiple pages to share with {integrationName}",[xe]:{[Ce]:t.name}}),icon:L.Z.taskList,isSelected:"pick_pages"===o,selectOption:()=>s("pick_pages")}))}function Ne(e){window.__c={n:"BotAccessOptions"};const{title:t,[Pe]:i,icon:o,isSelected:a,selectOption:s,disabled:r}=e,l=(0,d.yK)((e=>({button:{height:"none",padding:12,width:"100%",borderWidth:1,borderColor:e.outlineButtonBorder,borderRadius:4,cursor:r?"not-allowed":void 0},buttonSelected:{background:"white",borderWidth:2,borderColor:p.ZP.blue,padding:11,boxShadow:"0px 4px 8px rgba(66, 129, 219, 0.09), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)"},option:{width:"100%",whiteSpace:"normal",display:"grid",gridTemplateColumns:"min-content auto min-content",padding:6},text:{overflowWrap:"normal"},title:{fontSize:14,fontWeight:A.Z.fontWeight.medium,color:p.ZP.frontTextMedium,marginBottom:6},[Pe]:{fontSize:12,lineHeight:"140%",color:e.mediumTextColor},icon:{width:14,height:14,color:p.ZP.regularIconColor,marginRight:12}})),[r]);return n()(K.Z,{onClick:s,[ke]:l.button,hovered:a,hoveredStyle:l.buttonSelected,pressedStyle:l.buttonSelected,disabled:r},void 0,n()("div",{[ke]:l.option},void 0,o(l.icon),n()("div",{[ke]:l.text},void 0,n()("div",{[ke]:l.title},void 0,t),n()("div",{[ke]:l[Pe]},void 0,i))))}var Le=i(74181),_e=i(11106);const Be=i(85).nx5,We=i(85).piI,Oe=i(85).AEv;function Ke(e){window.__c={n:"OauthAuthorizationPagePickerStep"};const{integrationValue:t,selectedBlockIdsStore:i}=e,o=(0,Le.VM)(t),s=(0,d.yK)((e=>({[Oe]:{fontSize:14,textAlign:"center",fontWeight:A.Z.fontWeight.medium,marginBottom:16},linkPreviewSubtitle:{fontSize:14,textAlign:"left",marginBottom:16,color:e.lightTextColor}})),[]);return a.createElement(a.Fragment,null,n()("div",{style:s[Oe]},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.title",[Be]:'Allow "{integrationName}" to access these pages',values:{[We]:t.name}})),n()("div",{style:s.linkPreviewSubtitle},void 0,o&&n()(_.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.linkPreviewSubtitle",[Be]:"Your selections here will not impact this integration's ability to unfurl links across your workspace"})),n()(_e.Z,{selectedBlockIdsStore:i}))}const Ee=i(85).Mm1,Ue=i(85).RvT,Re=i(85).a3v,De=i(85).rGB,Ye=i(85).auS,He=i(85).X_m,Ge=i(85).p1r,$e=i(85).H1U,je=i(85).sM5,qe=i(85).Tb$,Qe=i(85).nC_,Je=i(85).fol,Xe=i(85).HFH,et=i(85).jpH,tt=i(85).FkY,it=i(85).nSN,ot=i(85).iD5,nt=i(85).Zij,at=i(85).oOV,st=i(85).Gpy,rt=i(85).nx5,dt=i(85).BQ6,lt=i(85).Lfz,ct=i(85).piI,ut=i(85).Wku;function pt(e){var t,i;window.__c={n:"OauthAuthorizationPermissionStep"};const{integrationValue:o,spaceName:s}=e,r=o.info.website_url,l=(0,ge.hasInheritCreatorAccessCapability)(o[ut]),c=(0,y.uw)(o.id),u=o[ut],p=(0,d.yK)((()=>({inlineTextLink:{color:"black",textDecoration:"none"}})),[]);return a.createElement(a.Fragment,null,n()("div",{},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.intro",[rt]:"<inlinetextlink>{integrationName}</inlinetextlink> will have permission to",[st]:{[ct]:o[lt],inlinetextlink:e=>r?n()(E.Z,{href:r,[dt]:p.inlineTextLink},void 0,e):e}})),(null==u?void 0:u[at])&&n()(mt,{icon:L.Z.eye,[nt]:n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess",[rt]:"View pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess",[rt]:"View all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent",[rt]:"View pages you select"})},void 0,n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess.description",[rt]:"{integrationName} will be able to view pages you can view.",[st]:{[ct]:o[lt]}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess.description",[rt]:"{integrationName} will be able to view all pages in your workspace",[st]:{[ct]:o[lt]}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent.description",[rt]:"{integrationName} will be able to view pages you select in the next step. You can also share pages later with {integrationName} in Notion",[st]:{[ct]:o[lt]}})),(null==u?void 0:u[ot])&&n()(mt,{icon:L.Z.scribble,[nt]:n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess",[rt]:"Edit pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess",[rt]:"Edit all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent",[rt]:"Edit pages you select"})},void 0,n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess.description",[rt]:"{integrationName} will be able to edit pages you can edit",[st]:{[ct]:o[lt]}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess.description",[rt]:"{integrationName} will be able to edit all pages",[st]:{[ct]:o[lt]}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent.description",[rt]:"{integrationName} will be able to edit pages you select in the next step. You can also share pages later with {integrationName} in Notion",[st]:{[ct]:o[lt]}})),(null==u?void 0:u[it])&&n()(mt,{icon:L.Z.pageAdd,[nt]:n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess",[rt]:"Create new content within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent",[rt]:"Create new content within pages you select"})},void 0,n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess.description",[rt]:"{integrationName} will be able to add new content or sub-pages wherever you have permission to add new content or sub-pages",[st]:{[ct]:o[lt],[tt]:s}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent.description",[rt]:"{integrationName} will be able to add new content or sub-pages to pages you select in the next step. You can also share pages later with {integrationName} in Notion",[st]:{[ct]:o[lt],[tt]:s}})),(null==u?void 0:u[et])&&n()(mt,{icon:L.Z.topbarComment,[nt]:n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess",[rt]:"View comments within pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess",[rt]:"View all comments"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment",[rt]:"View comments within pages you select"})},void 0,n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess.description",[rt]:"{integrationName} will be able to view comments within pages you can access",[st]:{[ct]:o[lt]}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess.description",[rt]:"{integrationName} will be able to view comments within all pages",[st]:{[ct]:o[lt]}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment.description",[rt]:"{integrationName} will be able to view comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",[st]:{[ct]:o[lt]}})),(null==u?void 0:u[Xe])&&n()(mt,{icon:L.Z.topbarCommentFilled,[nt]:n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess",[rt]:"Create comments within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment",[rt]:"Create comments within pages you select"})},void 0,n()(_.FormattedMessage,l?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess.description",[rt]:"{integrationName} will be able to create comments within pages you can access",[st]:{[ct]:o[lt]}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment.description",[rt]:"{integrationName} will be able to create comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",[st]:{[ct]:o[lt]}})),((null==u?void 0:u[Je])||(null==u?void 0:u[Qe]))&&n()(mt,{icon:L.Z.settingsMembersFilled,[nt]:null!==(t=o[ut])&&void 0!==t&&t[Qe]?n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail",[rt]:"View workspace users and their emails"}):n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers",[rt]:"View workspace users"})},void 0,null!==(i=o[ut])&&void 0!==i&&i[Qe]?n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail.detail",[rt]:"{integrationName} will be able to see basic information about all workspace members and guest data, including their names, profile images, and email addresses",[st]:{[ct]:o[lt]}}):n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers.detail",[rt]:"{integrationName} will be able to see basic information about all workspace members and guests, like their names and profile images, but not their email addresses",[st]:{[ct]:o[lt]}})),(null==u?void 0:u.webhooks)&&n()(mt,{icon:L.Z.notificationUnread,[nt]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks",[rt]:"Receive updates on workspace activity"})},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks.description",[rt]:"Changes to pages, permissions, or workspace settings will be shared with {integrationName}",[st]:{[ct]:o[lt]}})))}function mt(e){window.__c={n:"PermissionDetailToggle"};const[t,i]=a.useState(!1),o=(0,d.yK)((e=>({[qe]:{border:`1px ${p.FN.dark.gray[850]} solid`,borderRadius:4,marginTop:8},permissionItemTitle:{[je]:"flex",justifyContent:"space-between",padding:"6px 12px",cursor:"pointer",userSelect:"none"},permissionItemHeading:{[je]:"flex",[$e]:"center"},permissionItemDetails:{paddingLeft:38,paddingRight:24,[Ge]:"all 0.2s ease",color:e.mediumTextColor},rightStyle:{width:22,[He]:18},sharedIconStyle:{width:24,[He]:16,textAlign:"center"}})),[]);return n()("div",{[dt]:o[qe]},void 0,n()("div",{[dt]:o.permissionItemTitle,onClick:()=>i(!t)},void 0,n()("div",{[dt]:o.permissionItemHeading},void 0,n()("div",{[dt]:o.sharedIconStyle},void 0,e.icon({width:16,[He]:16,color:p.ZP[Ye]})),n()("div",{},void 0,e[nt])),e[De]&&n()("div",{[dt]:{[je]:"flex",[$e]:"center"}},void 0,L.Z.chevronDownThin({width:12,[He]:12,color:p.ZP[Re],[Ue]:t?"rotate(180deg)":void 0,[Ge]:"transform 0.2s ease"}))),n()("div",{[dt]:{...o.permissionItemDetails,opacity:t?1:0,flex:t?1:0,[Ee]:t?8:0,[Ue]:t?"translate3d(0,-4px,0)":"translate3d(0,-8px,0)"}},void 0,t&&e[De]))}const gt=i(85).RVs,ht=i(85).FkY,vt=i(85).piI,bt=i(85).pkR,wt=i(85).Wku,ft=i(85).ChN,yt=i(85).GiO,St=i(85).cDf,At=i(85).VUQ,It=i(85).wgE,Pt=i(85).BQ6,kt=i(85).nLZ,xt=i(85).H1U,Ct=i(85).D7I,zt=i(85).bku,Mt=i(85).JgF,Ft=i(85).nx5,Vt=i(85).pKP,Zt=i(85).m9E,Tt=i(85).cfO,Nt={[Tt]:{header:!0,warning:!0,footer:!0},[Zt]:{header:!0,warning:!1,footer:!0},[Vt]:{header:!1,warning:!1,footer:!1}},Lt=(0,_.defineMessages)({loadingMessage:{id:"oauthAuthorization.loadingMessage",[Ft]:"Authorizingâ€¦"}});function _t(e){const{showApprovalWarning:t}=e,[i,o]=a[Mt](Tt),[s,r]=a[Mt](zt),[d,l]=a[Mt](void 0),c=Nt[i].header,u=t&&Nt[i].warning,p=Nt[i].footer;return a[Ct](a.Fragment,null,c&&a[Ct](Kt,e),a[Ct](Et,ue()({},e,{currentStep:i,botAccessOption:s,setBotAccessOption:r})),a[Ct](Ut,ue()({},e,{currentStep:i,setCurrentStep:o,acceptedIntegrationCapabilities:d,setAcceptedIntegrationCapabilities:l,botAccessOption:s})),u&&n()("div",{[Pt]:{display:"flex",[xt]:"center",[kt]:20}},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.integrationApprovalNotice",[Ft]:"Authorizing this integration will add it to your workspace's approval list. Other workspace members will be able to install this integration."})),p&&a[Ct](Rt,e))}function Bt(){const{isMobile:e}=(0,s.Fy)();return(0,d.yK)((t=>({title:{fontSize:e?18:20,margin:"0 50px 32px",textAlign:"center",[ft]:A.Z[ft].medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,[kt]:24},footer:{fontSize:A.Z.fontSize.UISmall.desktop,color:t.mediumTextColor,paddingTop:32,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,[ft]:A.Z[ft].semibold,marginBottom:4}})),[e])}const Wt={cancel:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.cancelButton.label",[Ft]:"Cancel"}),back:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.backButton.label",[Ft]:"Back"})},Ot={[Zt]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.nextButton.label",[Ft]:"Next"}),[Vt]:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.continueButton.label",[Ft]:"Select pages"}),authorize:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.finishButton.label",[Ft]:"Allow access"})};function Kt(e){window.__c={n:"IntegrationHeader"};const{integrationValue:t,spaceName:i}=e,o=t.info.website_url,s=t.info.icon?{pointer:{table:b.K2,id:t.id},icon:t.info.icon}:void 0,r=Bt();return a[Ct](a.Fragment,null,n()("div",{[Pt]:{padding:15}},void 0,n()(Se.Z,{icon:s,[bt]:!0,title:t.name,size:54,isEmptyPage:!1,[Pt]:{margin:"auto"}})),n()("div",{[Pt]:r.title},void 0,n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.title",[Ft]:"<inlinetextlink>{integrationName}</inlinetextlink> is requesting access to {workspaceName}",values:{[vt]:t.name,[ht]:i,inlinetextlink:e=>o?n()(E.Z,{[Pt]:r.inlineTextLink,href:o},void 0,e):e}})))}function Et(e){const{currentStep:t,integrationValue:i,spaceName:o}=e;return"permissions"===t?n()(pt,{integrationValue:i,spaceName:o}):"bot_access_option"===t?a[Ct](Te,ue()({},e,{integrationValue:i})):"page_picker"===t?a[Ct](Ke,ue()({},e,{integrationValue:i})):void(0,S.unreachable)(t)}function Ut(e){window.__c={n:"OptionButtons"};const{currentStep:t,setCurrentStep:i,acceptedIntegrationCapabilities:o,setAcceptedIntegrationCapabilities:d,integrationValue:l,validIntegrationTemplateId:c,oauthParams:u,botAccessOption:p,spaceId:m,selectedBlockIdsStore:g}=e,h=(0,s.O7)(),[v,w]=a[Mt](!1),f=(0,r.VK)((()=>g.state),[g]),A=(0,r.VK)((()=>{const e=ye.Z.state;return(0,fe.yh)({integrationId:l.id,externalIntegrationStoreState:e})}),[l]),I=function(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o}=e;if((0,ge.hasInheritCreatorAccessCapability)(t[wt]))return[Tt];if(i){if("duplicate_template"===o)return[Tt,Zt];if("pick_pages"===o)return[Tt,Zt,Vt];if("admin"===o)return[Tt];(0,S.unreachable)(o)}return[Tt,Vt]}({integrationValue:l,validIntegrationTemplateId:c,botAccessOption:p}),k=I.indexOf(t),x=(0,y.DB)(l.id),C=I[k-1],z=x?void 0:I[k+1],M=C?Wt.back:Wt.cancel,V=C?()=>{i(C)}:()=>{!function(e){const{[It]:t,oauthParams:i,integrationValue:o,createdBotValue:n}=e;n?P.handleRedirectToLastVisitedPage(t):W.V({[It]:t,params:i,[At]:o,errorType:B[St].access_denied})}({[It]:h,oauthParams:u,integrationValue:l,createdBotValue:A})},Z=z?Ot[z]:Ot.authorize,T=z?()=>{"permissions"===t&&d(l[wt]),i(z)}:()=>{x?be.$$({[It]:h,spaceId:m,from:gt,[At]:me.kk.fromValue(b.K2,l)}):async function(e){const{[It]:t,botAccessOption:i,integrationValue:o,acceptedIntegrationCapabilities:n,setIsLoading:a,oauthParams:s,spaceId:r,selectedBlockIds:d,createdBotValue:l}=e;let c;"duplicate_template"===i&&(c=o.info.template_page_id),a(!0),we.display({message:Lt.loadingMessage});const u=c?[]:Object.keys(d).filter((e=>d[e])),{currentSpaceStore:p,[yt]:m}=F.default.state;if(l){const e=await ve.k2({[It]:t,templatePageId:c,botValue:l,spaceStore:p,spaceViewStore:m,pages:u});e?P.navigateToBlock({[It]:t,store:e,pageVisitSource:pe.tY.Duplicate}):P.handleRedirectToLastVisitedPage(t)}else await W.V({[It]:t,params:s,[At]:o,acceptedIntegrationCapabilities:n,spaceId:r,blockIdsForBot:u,templatePageId:c}),he.trackInstallPublicIntegrationOauth(t,{selection:i});we.close(),a(!1)}({[It]:h,botAccessOption:p,integrationValue:l,setIsLoading:w,oauthParams:u,spaceId:m,selectedBlockIds:f,createdBotValue:A,acceptedIntegrationCapabilities:o})},N=Bt();return n()("div",{[Pt]:N.buttonGroup},void 0,n()(K.Z,{isLarge:!0,onClick:V,[Pt]:{height:32}},void 0,M),n()(O.Z,{isLarge:!0,onClick:T,[bt]:v},void 0,Z))}function Rt(e){window.__c={n:"Footer"};const{integrationValue:t,oauthParams:i}=e,o=t.info.terms_of_use_url,a=t.info.privacy_policy_url,s=(i.redirectUri||t.redirect_uris[0]||"").replace("http://","").replace("https://","").split(/[/?#]/)[0],r=Bt(),d=(0,y.DB)(t.id)?n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body.partnerIntegration",[Ft]:"The third-party products or services to which this integration connects are non-Notion Applications. By enabling this integration, you agree to Notion's <notiontermslink>Integration Gallery Terms</notiontermslink>.",values:{notiontermslink:e=>n()(E.Z,{href:"https://notion.notion.site/Integration-Gallery-Terms-of-Service-b74cada95062442d98c2abb1fe3efd9b"},void 0,e)}}):n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body",[Ft]:'If you continue, you may be sharing sensitive information. Notion does not review third party integrations such as "{integrationName}". Learn how "{integrationName}" handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.',values:{[vt]:t.name,privacypolicylink:e=>a?n()(E.Z,{href:a},void 0,e):e,termsofservicelink:e=>o?n()(E.Z,{href:o},void 0,e):e}});return n()("footer",{[Pt]:r.footer},void 0,n()("div",{[Pt]:r.innerFooterContainer},void 0," ",n()(_.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.title",[Ft]:"Make sure you trust {integrationName} ({redirectUriDomain})",values:{[vt]:t.name,redirectUriDomain:s}})),n()("div",{},void 0,d))}var Dt=i(5074),Yt=i(93286),Ht=i(28125),Gt=i(45094),$t=i(27177),jt=i(77062),qt=i(76453),Qt=i(81236),Jt=i(17364),Xt=i(72495),ei=i(1101);const ti=i(85).Yzm,ii=i(85).nx5,oi=i(85).Y7T,ni=i(85).qHF,ai=i(85).emX,si=i(85).qJ8,ri=i(85).DgF,di=i(85).dMt,li=i(85).D7I,ci=i(85).P0R,ui=i(85).dLQ,pi=i(85).wgE;class mi extends Dt.g6{renderAccountHeader(e){const t=Jt.Z.getUserEmailAddress(this[pi],e);return t&&n()(ei.Z,{emailAddress:t,userId:e,disabled:!1,accountActions:[(0,Yt.qu)(e)]})}renderFooter(){return n()("div",{style:(0,qt.Ax)({[ui]:this[pi].device[ui],theme:this.theme})},void 0,n()(Xt.Z,{},void 0,Ht.k(this[pi])&&a[li]($t.Z,ue()({createType:"add-account",disableLoginLink:this[ci].disableLoginLink},this.stores))))}getMenuListSections(e){const{device:t}=this[pi];return[{key:"spaces",render:e=>a[li](Xt.Z,ue()({},e,{disableMobilePadding:!0,topBorder:t[ui],style:{borderBottom:`1px solid ${this.theme[di]}`}})),items:this.getSpaceMenuListItems(e)}].filter((e=>e.items.length>0))}getSpaceMenuListItems(e){const{singleSpaceToSelect:t}=this[ci],{[ri]:i,[si]:o}=F.default.state,n=[],a=Jt.Z.getSpaceViewStores(this[pi],e);if(!i||!o)return[];if(a.sort(((e,t)=>{var i,o;const n=Number(Boolean(null===(i=e[ai]())||void 0===i?void 0:i.canAdmin()));return Number(Boolean(null===(o=t[ai]())||void 0===o?void 0:o.canAdmin()))-n})),t){const s=a.find((e=>e.getSpaceId()===t));if(s){const t=s[ai]();t&&n.push(this[ni]({[si]:o,[ri]:i,spaceStoreForSpaceView:t,[oi]:s,userId:e}))}}else for(const s of a){const t=s[ai]();t&&n.push(this[ni]({[si]:o,[ri]:i,spaceStoreForSpaceView:t,[oi]:s,userId:e}))}return n}getUnreadCountForOtherSpaces(){return 0}[ni](e){const{onSpaceClick:t}=this[ci],{spaceStoreForSpaceView:i,[si]:o,[ri]:s,userId:r,[oi]:d}=e,l=r===s.id&&i.id===o.id,c=(0,z.Cx)(i),u=(0,z.rn)(this[pi],i),p=(0,qt.bM)(this[pi],this[ci].intl,i),m=this.getSpaceSubtitle(this[pi],i);return{key:d.id,render:e=>a[li](jt.Z,ue()({},e,{id:d.id,icon:(0,z.Wd)(this[pi],i),spaceName:u,title:p,caption:m,isCheck:l,showDragHandle:!1,disabled:c,disableTooltip:!c,tooltipMessage:n()(_.FormattedMessage,{id:"oauthAuthorizationPage.workspaceSwitcher.disabledWorkspace.tooltip",[ii]:"This integration can only be added by a member or admin."})})),action:async e=>{let{event:i}=e;Z.Z.setState({...Z.Z.state,open:!1}),l||await t({event:i,[oi]:d})}}}getSpaceSubtitle(e,t){const i=Qt.Z.getPublicSpaceData(e,t.id);if(!i||"none"===i.role)return;const o=this[ci].intl.formatNumber(i.memberCount),n="personal"===t.getPlanType()?Gt.sidebarSwitcherMessages.workspaceSubtitleWithoutMembers:Gt.sidebarSwitcherMessages.workspaceSubtitleWithMembers;let a;a=i.productId?(0,Gt.getProductName)(i.subscriptionTier):"team"===t.getPlanType()?Gt.sidebarSwitcherMessages.teamTrialPlan:Gt.sidebarSwitcherMessages.personalPlan;const s=this[ci].intl[ti](a);return this[ci].intl[ti](n,{numberOfWorkspaceMembers:o,planType:s})}}const gi=(0,_.injectIntl)(mi),hi=i(85).ELX,vi=i(85).g7N,bi=i(85).NF1,wi=i(85).Y7T,fi=i(85).AIq,yi=i(85).UqM,Si=i(85).L_E;function Ai(e){window.__c={n:"OauthAuthorizationTopBar"};const{onSpaceSwitch:t,disableAccountSwitcher:i,singleSpaceToSelect:o}=e,a=function(){const{isMobile:e}=(0,s.Fy)();return(0,d.yK)((()=>({[Si]:{display:"flex",alignItems:"center",justifyContent:"space-between",height:60,paddingLeft:20,paddingRight:8,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:p.ZP.contentBorder},[yi]:{width:e?28:30,height:e?28:30,marginRight:10,[fi]:0},notionTitle:{fontWeight:A.Z.fontWeight.medium,fontSize:16},switcherButton:{[bi]:3,[vi]:0}})),[e])}();return n()("div",{style:a[Si]},void 0,L.Z.notionLogoStroked(a[yi]),n()("div",{style:a.notionTitle},void 0,"Notion"),n()("div",{style:{flexGrow:1,[fi]:1}}),n()("div",{style:{[fi]:0}},void 0,n()(gi,{format:Dt._S.Regular,onSpaceClick:e=>{let{[wi]:i}=e;return t(i)},shouldShowUnexpandButton:!1,disableLoginLink:!0,[hi]:{[bi]:3,[vi]:0},disabled:i,singleSpaceToSelect:o})))}const Ii=i(85).YsT,Pi=i(85).ymU,ki=i(85).Wp_,xi=i(85).lQg,Ci=i(85).s9u,zi=i(85).Csb,Mi=i(85).$bT,Fi=i(85).OtN,Vi=i(85).EXq,Zi=i(85).Wqi,Ti=i(85).fCB,Ni=i(85).Wnn,Li=i(85).ivl,_i=i(85).Y7T,Bi=i(85).wgE,Wi=i(85).JmH,Oi=i(85).GiO,Ki=i(85).QmD,Ei=i(85).DgF,Ui={"929cdebb-09e8-4c5c-bfe5-e8c3c3902987":"development","5dbd3ed0-1160-4532-b10a-1a6749748fc4":"staging"},Ri=["makenotion.com","qasource.com"];function Di(e){window.__c={n:"OauthAuthorization"};const t=e.userId,i=e.spaceId,o=(0,s.O7)(),a=(0,r.VK)((()=>F.default[Ki][Ei]),[]),l=(0,r.VK)((()=>F.default[Ki].currentSpaceStore),[]),c=(0,r.VK)((()=>F.default[Ki][Oi]),[]),u=(0,r.VK)((()=>{var e;return null===(e=F.default[Ki].currentUserStore)||void 0===e?void 0:e.getEmail()}),[]),m=(0,r.VK)((()=>!!(t&&i&&c)&&(c[Wi]()===i&&c.getUserRootParentId()===t)),[t,i,c]),g=function(e){const{WindowSizeStore:t}=e[Bi],i=(0,r.VK)((()=>t[Ki].width>500),[t]),o=(0,r.VK)((()=>t[Ki].height<900),[t]);return(0,d.yK)((e=>({layoutContainer:{height:"100%",overflow:"auto",[Fi]:i?p.ZP.frontCreamBackground:p.ZP.white},pageContainer:{display:"flex",justifyContent:"center"},contentBox:{width:"500px",minHeight:"600px",borderRadius:5,[Fi]:p.ZP.white,boxShadow:i?e.lightBoxShadow:"none",display:"flex",[Mi]:"column",fontSize:A.Z.fontSize.UIRegular.desktop,marginTop:o?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",[Mi]:"column"}})),[i,o])}({[Bi]:o});return n()("div",{style:g.layoutContainer},void 0,n()("div",{style:g.pageContainer},void 0,n()("div",{style:g.contentBox},void 0,n()(Ai,{disableAccountSwitcher:m,singleSpaceToSelect:i,onSpaceSwitch:async t=>{await k.switchToSpace({[Bi]:o,[_i]:t});const i=t[Wi](),n=Ri.find((e=>null==u?void 0:u.endsWith(e)));if(i&&n&&Ui[i]&&e[Li]&&e[Ni]){const t=(0,I.getPublicIntegrationAuthUrl)({baseUrl:(0,C.k2)(Ui[i]),clientId:e[Li],[Ni]:e[Ni],[Ki]:e[Ki]});P[Ti]({[Bi]:o,url:t,targetSelf:!0})}}}),n()("div",{style:g.contentBody},void 0,n()(Yi,{oauthParams:e,[Zi]:l,[Vi]:a})))))}function Yi(e){const{oauthParams:t,[Zi]:i,[Vi]:o}=e;return i&&o?n()(Hi,{oauthParams:t,[Zi]:i,[Vi]:o}):n()(N.Z,{})}function Hi(e){window.__c={n:"ErrorOrAuthorizationPage"};const{oauthParams:t,[Zi]:i,[Vi]:o}=e,{[Li]:d,responseType:p}=t,A=(0,s.O7)(),I=(0,r.VK)((()=>z.rn(A,i)),[A,i]),[P,k]=a.useState(),C=(0,r.VK)((()=>{if(d){return(0,V.Kv)(o,{id:d,table:b.K2}).getValue()}}),[d,o]),F=(0,l.V)({value:C,waitTimeInMs:1e3}),[{value:L}]=(0,m.r5)((async()=>{await x.refresh(A);const{data:e}=T.default[Ki];return e?M.getSpaceBots(e):[]}),[A]),_=(0,r.VK)((()=>{if(L&&L.length>0){return L.map((e=>{const t=(0,V.Kv)(o,{table:v.cZ,id:e.botId}).getValue();if(t&&t.alive&&(0,u.hA)(t)&&t.created_by_id===o.id&&t.created_by_table===w.KJ&&t.integration_id===d)return{botValue:t,pageIds:e.pageIds}})).filter(S.isDefined)[0]}}),[L,o,d]),B=(0,r.VK)((()=>{let e={};return _&&(e=_.pageIds.reduce(((e,t)=>(e[t]=!0,e)),{})),c.default.createValue(e)}),[_]),W=(0,r.VK)((()=>{if(!d)return!1;const e=i.getBotSettingsStore().getValue();if(!e)return!0;if((0,f.CJ)(e)){const t=e[zi];return!(!t||!t[d])&&Boolean("approved"===t[d].status)}return!0}),[d,i]),O=(0,r.VK)((()=>{const e=F.value;if(e)return e.info.template_page_id}),[F]),K=(0,r.VK)((()=>Boolean(d&&("datadog"===(0,y.oh)(d)||(0,y.uw)(d)))),[d]),E=(0,r.VK)((()=>z.Cx(i)),[i]),U=(0,r.VK)((()=>i.canAdmin()),[i]);a.useEffect((()=>{F.value&&!P&&k(C)}),[P,k,C,F]);const R=F.value??P;return"pending"===F.status?n()(N.Z,{}):d&&(0,h.isUUIDWithDashes)(d)||K?R?"code"===p||K?E?n()(le,{oauthParams:t,[Ci]:I,type:"notAnAdmin",integrationValue:R,[Pi]:()=>{Z.Z[ki]({...Z.Z[Ki],open:!0})}}):U||W?g._(R,t[Ni])||K?n()(_t,{integrationValue:R,validIntegrationTemplateId:O,[Ci]:I,spaceId:i.id,oauthParams:t,showApprovalWarning:U&&!W&&!K,selectedBlockIdsStore:B}):n()(le,{oauthParams:t,[Ci]:I,type:"invalidRedirectUri",integrationValue:R}):n()(le,{oauthParams:t,[Ci]:I,type:Ii,integrationValue:R,[Pi]:()=>{Z.Z[ki]({...Z.Z[Ki],open:!0})}}):n()(le,{type:xi,oauthParams:t,[Ci]:I,integrationValue:R}):n()(le,{type:"clientNotFound",oauthParams:t,[Ci]:I}):n()(le,{type:"invalidClientId",oauthParams:t,[Ci]:I})}},27386:(e,t,i)=>{i.d(t,{k:()=>A,Z:()=>P});var o=i(77094),n=i.n(o),a=(i(67294),i(83355)),s=i(34859),r=i(91754),d=i(61519),l=i(18647);const c=i(85).dMt,u=i(85).IY7,p=i(85).AIq,m=i(85).Mm1,g=i(85)._V5,h=i(85).XCs,v=i(85).YDv,b=i(85).dPb,w=i(85).zrY,f=i(85).OtN,y=i(85).$bT,S=i(85).dLQ;function A(e){return e?18:60}class I extends a.Z{static renderDivider(){return n()(d.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:o,controlRowPaddingTopBottom:a=16}=this.props,d=()=>e[S]?18:36;return this.props.disableScroller?n()("div",{style:{[v]:A(e[S]),[h]:A(e[S])}},void 0,n()("div",{style:{[g]:d(),[m]:d()}},void 0,t),i&&n()("div",{style:{[g]:a,[m]:a,[u]:`0 -1px 0 ${this.theme[c]}`}},void 0,i)):n()("div",{style:{display:"flex",[y]:"column",width:"100%",height:"100%",[f]:this.theme[w]}},void 0,o&&n()(r.Z,{type:r.$.Blue,[S]:!1},void 0,o),n()(l.Z,{type:s.Z.All,style:{flexGrow:1,[b]:"touch",transform:"translateZ(0)",[v]:A(e[S]),[h]:A(e[S]),[g]:o?15:d(),[m]:o?22:d()}},void 0,t),i&&n()("div",{style:{flexGrow:0,[p]:0,[v]:A(e[S]),[h]:A(e[S]),[g]:a,[m]:a,[u]:`0 -1px 0 ${this.theme[c]}`}},void 0,i))}}I.displayName="SettingBox";const P=I}}]);