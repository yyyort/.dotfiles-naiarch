"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{63123:(e,t,i)=>{i.d(t,{V:()=>r});var o=i(67294);const n=i(85).iDK;function r(e){const{value:t,validateLoaded:i}=e,r=e.waitTimeInMs||500,[a,l]=(0,o.useState)(!0),s=(0,o.useRef)(),d=void 0!==t&&(!i||a&&i(t));return(0,o.useEffect)((()=>(s[n]=window.setTimeout((()=>{l(!1),s[n]=void 0}),r),()=>{s[n]&&(clearTimeout(s[n]),s[n]=void 0)})),[r]),(0,o.useEffect)((()=>{d&&s[n]&&(l(!1),clearTimeout(s[n]),s[n]=void 0)}),[d]),void 0!==t&&d?{status:"resolved",value:t}:a?{status:"pending",value:void 0}:{status:"rejected",value:void 0,error:new Error("Reached end of timeout before value became defined.")}}},76463:(e,t,i)=>{i.d(t,{lz:()=>Y,P0:()=>H,Yw:()=>W,VG:()=>j,v2:()=>$,RN:()=>G,jX:()=>J,k2:()=>q});var o=i(5366),n=i(26825),r=i(27006),a=i(45953),l=i(21202),s=i(77420),d=i(90468),u=i(19889),c=i(97880),p=i(47307),m=i(33929),v=i(67669),g=i(39098),f=i(54642),b=i(92625),h=i(76464),y=i(9953),w=i(64964),I=i(29974),S=i(12359),_=i(761);const k=i(85).fHr,F=i(85).Y7T,x=i(85).TLr,Z=i(85).qJ8,C=i(85).y3i,P=i(85).Drs,D=i(85).JJj,T=i(85).J7v,U=i(85).e3f,M=i(85).i3J,V=i(85).LCr,L=i(85).J$i,B=i(85).wgE,R=i(85).o8I,N=i(85).LFy,A=i(85).Wku,E=i(85).Wqi,O=i(85).nx5,K=(0,o.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",[O]:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",[O]:"Failed to duplicate template for to your workspace"}});function z(e,t){const{[B]:i,[E]:o,spaceRole:n}=t,r=function(e){const{name:t,[E]:i,userId:o,icon:n,type:r}=e,a=Date.now(),l={name:t,created_at:a,created_by_table:u.KJ,created_by_id:o,alive:!0,icon:n,space_id:i.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:u.KJ};switch(r){case"guest":return{...l,type:"guest",[A]:e[A],[N]:d.bx,[R]:i.id,integration_id:void 0};case"scim":return{...l,type:"scim",[N]:u.KJ,[R]:o};default:(0,c.unreachable)(r)}}(t),a=y.createRecord({[B]:i,table:s.cZ,value:r,[L]:i.defaultRecordCache[L],[V]:e});return h[M]({[B]:i,store:o,[U]:[{type:T,role:n,bot_id:a.id}],[V]:e}),{botStore:a}}function Y(e){const{[B]:t}=e,{serverCommitResult:i,performResult:{botStore:o}}=S[D]({[P]:"botActions.createSpaceBot",[B]:t,perform:t=>z(t,e)});return{botStore:o,transactionPromise:i}}async function H(e){const{[B]:t,botId:i,onSuccess:o}=e,n=await f.deleteBot(t,{botId:i});"failed"===n.type?p.showError(n):"success"===n.type&&o&&(await _[C]({[B]:t}),o())}async function W(e){const{[B]:t,table:i,id:o,type:n}=e,r=await f.getBots(t,{table:i,id:o,type:n});if("failed"===r.type)throw p.showError(r),r;return{botIds:r.data.botIds,recordMap:r.data.recordMap}}async function j(e){const{[B]:t,botId:i}=e,o=await f.getBotToken(t,{botId:i});if("failed"!==o.type)return o.data.token;p.showError(o)}function $(e){const{botValue:t,store:i,[B]:o}=e,{id:r,[R]:a,[N]:l,[A]:s}=t,d=(0,n.getCumulativeBotBlockRoleFromCapabilities)(s),u={type:T,bot_id:r,[R]:a,[N]:l,role:d};S[D]({[P]:"TopbarMoreButton.handleAddingConnection",[B]:o,perform:e=>{h[M]({[B]:o,store:i,[U]:[u],[V]:e})}})}function G(e){const{botId:t,store:i,[B]:o}=e,n=i.getPermissionItems().filter((0,c.makeTypeGuard)((e=>(0,r.isBotPermission)(e)?{true:e}:{false:e})));for(const r of n)if(r.bot_id===t){const e={...r,role:"none"};S[D]({[P]:"TopbarMoreButton.handleRemovingConnection",[B]:o,perform:t=>{h[M]({[B]:o,store:i,[U]:[e],[V]:t})}})}}function J(e){const{[Z]:t,[B]:i,pages:o,botStore:n,addPermission:r}=e;if(!t)return;const a=(0,v.getBotPermissionItem)({botStore:n,addPermission:r});o.forEach((e=>{const o=g.t1[x](t,{table:l.iU,id:e});S[D]({[P]:"botActions.updateBlockPermissionsForBot",[B]:i,perform:e=>{h[M]({[B]:i,store:o,[U]:[a],[V]:e})}})}))}async function q(e){const{[B]:t,[E]:i,[F]:o,templatePageId:n,botValue:r,pages:l}=e;if(!i)return;const d=g.t1[x](i,{table:s.cZ,id:r.id});if(n)return await async function(e){const{[B]:t,[E]:i,[F]:o,templatePageId:n,botStore:r}=e;if(!i||!o)return;try{b.display({message:K.duplicatingTemplate});const e=await f.loadBlockSubtree(t,{block:{id:n,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const l=a.PF.create(e.data.subtreeRecordMap),{performResult:s}=S[D]({[P]:"botActions.duplicateTemplateAndShareWithBot",[B]:t,perform:e=>{const a=I.createAndDuplicatePageInSpace({[B]:t,recordMap:l,copyPageId:n,isPrivate:!0,[E]:i,[F]:o,[V]:e,[k]:!1}),s=o.getPrivatePageIds();s.length>0&&y.updateValue({store:o,data:{private_pages:[a.id,...s]},[V]:e});const d=(0,v.getBotPermissionItem)({botStore:r,addPermission:!0});return h[M]({[B]:t,store:a,[U]:[d],[V]:e}),a}});return s}catch(l){w.oV({label:m.default.formatMessage(K.duplicatingTemplateError)})}finally{b.close()}}({[B]:t,templatePageId:n,botStore:d,[E]:i,[F]:o});J({[B]:t,[Z]:i,botStore:d,pages:l,addPermission:!0})}},8981:(e,t,i)=>{i.d(t,{uU:()=>Ae,Pk:()=>He,V2:()=>Ye,A1:()=>ze,QO:()=>Ke,bO:()=>Ne,JJ:()=>Ee});var o=i(15070),n=i(65917),r=i(20270),a=i(2911),l=i(4615),s=i(89101),d=i(77420),u=i(49953),c=i(9844),p=i(19889),m=i(97880),v=i(44876),g=i(36054),f=i(50906),b=i(76463),h=i(47307),y=i(54642),w=i(9953);const I=i(85).q4P,S=i(85).lX4,_=i(85).zr2,k=i(85).ivl,F=i(85).J$i,x=i(85).LCr,Z=i(85).wgE,C=i(85).tOn,P=i(85).rpv,D=i(85).zuz,T=i(85).JAy,U=i(85).YsR,M=i(85).EjX,V=i(85).LFy,L=i(85).yCe,B=i(85).EXq,R=i(85).Wku,N=i(85).Dtz,A=i(85).PwI,E=i(85).LOo,O=i(85).Vhk;var K=i(95477),z=i(12982),Y=i(43348),H=i(33929),W=i(79315),j=i(39098),$=i(5978),G=i(12359);const J=i(85).dcn,q=i(85).HG1,Q=i(85).pcd,X=i(85).MFQ,ee=i(85).L1A,te=i(85).wqg,ie=i(85).egv,oe=i(85).gnz,ne=i(85).P29,re=i(85).q4P,ae=i(85).lX4,le=i(85).zr2,se=i(85).yCe,de=i(85).EXq,ue=i(85).Dtz,ce=i(85).PwI,pe=i(85).LOo,me=i(85).Vhk,ve=i(85).aK6,ge=i(85).QvU,fe=i(85).ilR,be=i(85).UVz,he=i(85).Qml,ye=i(85).nC_,we=i(85).fol,Ie=i(85).iD5,Se=i(85).nSN,_e=i(85).Wku,ke=i(85).DgF,Fe=i(85).YIO,xe=i(85).iOr,Ze=i(85).Ql2,Ce=i(85).OI,Pe=i(85).ivl,De=i(85).zkl,Te=i(85).nxU,Ue=i(85).Drs,Me=i(85).JJj,Ve=i(85).wgE,Le=i(85).vwy,Be=i(85).LCr,Re=i(85).tmA;function Ne(e){const{[Ve]:t,[Re]:i}=e;G[Me]({[Ue]:"developerIntegrationActions.setIntegrationSecretView",[Ve]:t,[Te]:e=>{!function(e){const{[Re]:t,[Be]:i}=e,o=(0,j.Vh)(t,t.pointer,"info");w[Le]({store:o,data:{has_viewed_secret:!0},[Be]:i})}({[Re]:i,[Be]:e})}})}async function Ae(e){const{[Ve]:t,recordStore:i}=e;function o(){f.trackDeveloperIntegrationsConfirmDeleteClick(t,{[De]:i[De]})}i[De]===d.cZ?await b.P0({[Ve]:t,botId:i.id,onSuccess:o}):i[De]===c.K2?await async function(e){const{[Z]:t,[k]:i,onSuccess:o}=e,n=await y.deleteIntegration(t,{[k]:i});"failed"===n.type?h.showError(n):"success"===n.type&&o&&o()}({[Ve]:t,[Pe]:i.id,onSuccess:o}):(0,m.unreachable)(i)}function Ee(e){const{[Ve]:t,formState:i,formData:n}=e;return"create-bot"===i.type?function(e){const{[Ve]:t,formData:i}=e,{[ke]:o}=W.default.state;if(!o)return;const{botStore:n}=b.lz({[Ve]:t,name:i.name,icon:i.icon,userId:o.id,spaceStore:i.space,spaceRole:"none",type:"guest",[_e]:i[_e]||{read_content:!0,[Se]:!0,[Ie]:!0,[we]:!0,[ye]:!0}});return Ye(t,{id:n.id,[De]:d.cZ,[Ze]:i.space.id}),f[he](t,{[De]:d.cZ}),{id:n.id,[De]:d.cZ,[Ze]:i.space.id}}({[Ve]:t,formData:n}):"update-bot"===i.type?function(e){const{[Ve]:t,botPointer:i,formData:o}=e,{[ke]:n}=W.default.state;if(!n)return;const r=(0,j.Kv)(n,i),a="developerIntegrationActions.updateBot";return G[Me]({[Ue]:a,[Ve]:t,[Te]:e=>{w[Le]({store:r,data:{name:o.name,icon:o.icon,parent_id:o.space.id,last_edited_by_id:n.id,last_edited_by_table:p.KJ,last_edited_at:Date.now(),[_e]:o[_e]},[Be]:e}),e[be]=[t=>{t&&je(t,a,e[Ze])}]}}),f[fe](t,{[De]:d.cZ}),i}({[Ve]:t,botPointer:{id:i[Ce].value.id,[De]:i[Ce][De],[Ze]:i[Ce].value.space_id},formData:n}):"create-guest-integration"===i.type?function(e){const{[Ve]:t,botPointer:i,formData:n}=e,{[ke]:r}=W.default.state;if(!r)return;const a=(0,j.Kv)(r,i),l=a.getValue(),s=l&&(0,o.hA)(l)?l[_e]:{read_content:!0,[Se]:!0,[Ie]:!0,[we]:!0,[ye]:!0},d={name:n.name,[ge]:n[ge],icon:n.icon,email:n.email,[ve]:n[ve],[me]:n[me],[pe]:n[pe],[ce]:n[ce],[ue]:n[ue],[_e]:s,[de]:r,[se]:n[se]},u="developerIntegrationActions.integrationId",{performResult:m}=G[Me]({[Ue]:u,[Ve]:t,[Te]:e=>{const i=function(e,t,i){const{name:o,tagline:n,icon:r,email:a,website_url:l,[O]:s,[E]:d,[A]:u,[N]:m,[R]:v,[B]:g,[L]:f}=i,b=Date.now(),h=g.id,y={name:o,[V]:p.KJ,parent_id:h,created_at:b,[M]:h,[U]:p.KJ,updated_at:b,[T]:h,[D]:p.KJ,[N]:m,type:"guest",status:P,info:{tagline:n,icon:r,email:a,website_url:l,[O]:s,[E]:d,[A]:u,[L]:f},[R]:v,alive:!0};return w[C]({[Z]:e,table:c.K2,value:y,[x]:t,[F]:g[F]})}(t,e,d).id;return w[Le]({store:a,data:{integration_id:i,parent_table:p.KJ,parent_id:r.id},[Be]:e}),e[be]=[t=>{t&&je(t,u,e[Ze])}],i}}),v={id:m,[De]:c.K2};return Ye(t,v),f[he](t,{[De]:c.K2,template_id:n[ce]}),v}({[Ve]:t,botPointer:{id:i[Ce].value.id,[De]:i[Ce][De],[Ze]:i[Ce].value.space_id},formData:n}):"update-guest-integration"===i.type?Oe({[Ve]:t,[xe]:{id:i[Ce].value.id,[De]:i[Ce][De]},formData:n}):"create-third-party-external-integration"===i.type?function(e){const{[Ve]:t,formData:i,[xe]:o}=e,{[ke]:n}=W.default.state,r=o.id;if(!n)return;const a=We(i);if(!a)return;const l=a[le];Oe({[Ve]:t,[xe]:o,formData:i,[Fe]:!0,[ue]:[l]});const s="developerIntegrationActions.createThirdPartyExternalIntegration";return G[Me]({[Ue]:s,[Ve]:t,[Te]:e=>{!function(e,t,i){const{[k]:o,[B]:n,config:{[_]:r,[S]:a,client_id:l,[I]:s,scopes:d,deletion_url:c}}=i,m={id:o,[_]:r,[S]:a,client_id:l,[I]:s,scopes:d,parent_id:n.id,[V]:p.KJ,deletion_url:c};w[C]({[Z]:e,table:u.r9,value:m,[x]:t,[F]:n[F]})}(t,e,{[Pe]:r,[de]:n,config:a}),e[be]=[t=>{t&&je(t,s,e[Ze])}]}}),Ye(t,o),f[he](t,{[De]:c.K2}),o}({[Ve]:t,[xe]:{id:i[Ce].value.id,[De]:i[Ce][De]},formData:n}):"update-third-party-external-integration"===i.type?function(e){const{[Ve]:t,[xe]:i,formData:o}=e,{[ke]:n}=W.default.state;if(!n)return;const r=We(o);if(!r)return;const a=(0,j.Kv)(n,{[De]:u.r9,id:i.id}),l={[le]:r[le],[ae]:r[ae],client_id:r.client_id,[re]:r[re],scopes:r.scopes||null,deletion_url:r.deletion_url||null},s=r[le];Oe({[Ve]:t,[xe]:i,formData:o,[Fe]:!0,[ue]:[s]});const d="developerIntegrationActions.updateThirdPartyExternalIntegration";return G[Me]({[Ue]:d,[Ve]:t,[Te]:e=>{w[Le]({store:a,data:l,[Be]:e}),e[be]=[t=>{t&&je(t,d,e[Ze])}]}}),i}({[Ve]:t,[xe]:{id:i[Ce].value.id,[De]:i[Ce][De]},formData:n}):"update-first-party-external-integration"===i.type?Oe({[Ve]:t,[xe]:{id:i[Ce].value.id,[De]:i[Ce][De]},formData:n,[Fe]:!0}):(0,m.unreachable)(i)}function Oe(e){const{[Ve]:t,[xe]:i,formData:o,[Fe]:n,[ue]:a}=e,{[ke]:l}=W.default.state;if(!l)return;const s=(0,j.Kv)(l,i),d=s.getValue(),u=i.id,p=null==d?void 0:d.info[ce],g=n?{...o[_e],link_preview:!0}:o[_e],b=n?"external":"guest",h={name:o.name,[ue]:a??o[ue],[_e]:g,type:b},y=(0,j.Vh)(s,s.pointer,"info"),I=function(e){const{[Fe]:t,[Pe]:i,formData:o,currentIntegrationInfo:n}=e;if(t)return function(e){var t;const{[Pe]:i,formData:o,currentIntegrationInfo:n}=e,a=(null==n||null===(t=n[oe])||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],l=o[ie].map((e=>{const t=[];for(const i of e.attributes){const e=(0,v.GY)(i);if(!(0,r.nj)(e))return;t.push(e)}return{name:(0,Y.X)({patternName:e.name,[Pe]:i}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})).filter(m.isDefined),s=o.domain.domainVerifications.filter((e=>"unverified"===e.type)).map((e=>e.domain));return{[ce]:o[ce],[ge]:o[ge],icon:o.icon,email:o.email,[ve]:o[ve],[me]:o[me],[pe]:o[pe],[se]:o[se],unfurl_url:o.unfurl_url,development_url_domains:s,[oe]:[...l,...a],dark_icon:(null==n?void 0:n.dark_icon)??o.icon,[te]:(null==n?void 0:n[te])??{r:36,g:41,b:47},accent_icon:(null==n?void 0:n.accent_icon)??o.icon}}({[Pe]:i,formData:o,currentIntegrationInfo:n});return{[ge]:o[ge],icon:o.icon,email:o.email,[ve]:o[ve],[me]:o[me],[pe]:o[pe],[ce]:o[ce],[se]:o[se]}}({[Fe]:n,[Pe]:u,formData:o,currentIntegrationInfo:y.getValue()}),S="developerIntegrationActions.updateIntegration";G[Me]({[Ue]:S,[Ve]:t,[Te]:e=>{w[Le]({store:s,data:h,[Be]:e}),w[Le]({store:y,data:I,[Be]:e}),e[be]=[t=>{t&&je(t,S,e[Ze])}]}});const _=o[ce]??void 0,k=p!==_;return f[fe](t,{[De]:c.K2,...k&&{template_id_before:p},...k&&{template_id_after:_}}),i}function Ke(e){const{[Ve]:t,[Pe]:i,allVerifiedDomains:o,domainToRemove:n}=e,{[ke]:r}=W.default.state;if(!r)return;const a=(0,j.Kv)(r,{[De]:c.K2,id:i}),l=(0,j.Vh)(a,a.pointer,"info"),s="developerIntegrationActions.removeVerifiedDomain";G[Me]({[Ue]:s,[Ve]:t,[Te]:e=>{w[Le]({store:l,data:{original_url_domains:o.filter((e=>e!==n))},[Be]:e}),e[be]=[t=>{t&&je(t,s,e[Ze])}]}}),f[fe](t,{[De]:c.K2})}function ze(e){$.navigate({[Ve]:e,url:s._j[ne]})}function Ye(e,t){const i={[d.cZ]:"internal",[c.K2]:"public"}[t[De]],o=(0,l.withoutDashes)(t.id);$.navigate({[Ve]:e,url:`${s._j[ne]}/${i}/${o}`})}function He(e){const t=(0,l.withoutDashes)(e.id);return`${K.default.domainBaseUrl}${s._j[ne]}/public/${t}/lab`}function We(e){const t={[le]:e[ee],[ae]:e[X],client_id:e.external_client_id,[re]:e[Q],scopes:e[q],deletion_url:e[J]};return(0,g.Gu)(u.wG,t)?void 0:t}function je(e,t,i){h.showErrorMessage(H.default.formatMessage(z.sY.transactionGenericError)),n.log({level:"error",from:"developerIntegrationActions",type:Me,error:(0,a.Ui)(e),data:{[Ue]:t,[Ze]:i}})}},56305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var o=i(77094),n=i.n(o),r=(i(67294),i(81954)),a=i(5366),l=i(43250),s=i(12982),d=i(22230),u=i(79500),c=i(43113),p=i(22131);const m=i(85).zsu,v=i(85).nx5;function g(e){window.__c={n:"DeveloperIntegrationCreateV2"};const{onClose:t,onSuccess:i}=e,o=(0,r.qz)(void 0,d.Z);return n()(p.Z,{className:l.developerIntegrationCreate,title:n()(a.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",[v]:"Create a new integration"}),subtitle:n()(a.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",[v]:"We’ll walk you through how to set up a new integration"}),onNavigateBack:t,sideContent:n()(u.T,{supportedPages:(0,s.H)(m)})},void 0,n()(c.Z,{onCreateNew:i,integrationFormStore:o,currentPage:"basic"}))}},79500:(e,t,i)=>{i.d(t,{T:()=>m,e:()=>f});var o=i(77094),n=i.n(o),r=i(67294),a=i(81954),l=i(24405),s=i(82990),d=i(12982),u=i(89728);const c=i(85).ChN,p=i(85).ILD;function m(e){window.__c={n:"DeveloperIntegrationFormSectionSidebar"};const{supportedPages:t,selectedPage:i,setSelectedPage:o,integrationFormStore:r}=e,l=(0,a.VK)((()=>null==r?void 0:r.getState().type),[r]),s=i||t[0],u=e=>{if(!(0,d.mP)(e))return;const t=(0,d._R)(l);s!==e&&t&&(null==r||r.updateRecordTypeOnSwitch(t)),o&&o(e)};return n()("div",{style:y},void 0,t.map((e=>{const t=function(e,t,i){if(e!==t||!i)return!1;const o="linkPreview"===e&&"update-guest-integration"!==i;return"distribution"===e&&"update-bot"!==i||o}(s,e,l);return n()("div",{},e,n()(g,{highlightedSelection:s,currentSelection:{key:d.vb[e].key,title:d.vb[e].title},handleOnClick:u}),t&&n()(v,{[p]:e,formStateType:l}))})))}function v(e){window.__c={n:"DeveloperIntegrationFormSidebarSection"};const{[p]:t,formStateType:i}=e,o=d.vb[t].subsections,[a,s]=r.useState(),u=a||o[0].key,c=(0,l.yK)((()=>({sectionContainer:{marginLeft:20}})),[]),m=e=>{if((0,d.mP)(e))return;const t=document.getElementById((0,d.bK)(e));t&&(t.scrollIntoView(),s(e))};return n()("div",{style:c.sectionContainer},void 0,o.map((e=>n()(g,{currentSelection:e,highlightedSelection:u,handleOnClick:m,formStateType:i},e.key))))}function g(e){window.__c={n:"DeveloperIntegrationFormSidebarButton"};const{currentSelection:{key:t,title:i},highlightedSelection:o,handleOnClick:r,formStateType:a}=e,d="create-third-party-external-integration"===a&&"unfurling"===t,p=(0,l.yK)((e=>({sidebarButton:{...h,color:e.sidebarTextColor,...o===t&&{color:e.regularTextColor,[c]:s.Z[c].medium}}})),[t,o]);return n()(u.Z,{style:p.sidebarButton,onClick:()=>r(t),disabled:d,disabledFeedback:!0},void 0,i)}function f(e){window.__c={n:"DeveloperIntegrationFormSectionHeader"};const{section:t}=e,{title:i,subtitle:o,key:r}=t,a=(0,l.yK)((e=>({titleStyle:{...b},subtitleStyle:{[c]:s.Z[c].regular,fontSize:15,color:e.lightTextColor}})),[]);return n()("div",{style:a.titleStyle,id:(0,d.bK)(r)},void 0,i,o&&n()("div",{style:a.subtitleStyle},void 0,o))}const b={fontSize:30,marginTop:24,marginBottom:24,[c]:s.Z[c].bold},h={fontSize:15,height:28,marginTop:4,width:"100%"},y={display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},43113:(e,t,i)=>{i.d(t,{Z:()=>un});var o=i(77094),n=i.n(o),r=i(96486),a=i(67294),l=i(480),s=i(81954),d=i(21202),u=i(97880),c=i(5366),p=i(8981),m=i(47307),v=i(12982),g=i(33665),f=i(79315),b=i(39098),h=i(33929),y=i(97464),w=i.n(y),I=i(13991),S=i(24405),_=i(8848),k=i(84619),F=i(3909),x=i(74446),Z=i(45953),C=i(89101),P=i(44312),D=i(90468),T=i(82990),U=i(54642),M=i(43132),V=i(65270),L=i(38755),B=i(52507),R=i(64921),N=i(52275),A=i(12508),E=i(74194),O=i(32163),K=i(89728),z=i(72495),Y=i(58032),H=i(87279),W=i(78140),j=i(44532);const $=i(85).L97,G=i(85).D7I;function J(e){const{value:t}=e,[i,o]=a.useState(!1),r=()=>o(!1);return n()(j.GI,{popupType:j.GI.PopupType.Popup,alignmentToOrigin:j.GI.Alignment.Start,placementToOrigin:j.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:i,onDismiss:r,render:()=>a[G](Q,w()({},e,{value:t,onClose:r})),origin:a[G](q,w()({},e,{value:t,onClick:()=>o(!0)}))})}function q(e){window.__c={n:"ClickableButton"};const{onClick:t,value:i,renderMenuItem:o}=e,n=(0,S.yK)((e=>({dropdown:{background:e[$],border:`1px solid ${e.outlineButtonBorder}`,borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return a[G](a.Fragment,null,o({item:i,focused:!1,onClick:t,style:n.dropdown,right:F.Z.expand(n.expandIcon)}))}function Q(e){const{keyName:t,items:i,value:o,setValue:r,renderMenuItem:l,onClose:s}=e;let d=0;const u=i.map(((e,t)=>(e.id===(null==o?void 0:o.id)&&(d=t),{key:e.id,action:()=>{r(e),s()},render:t=>l({...t,item:e})})));return n()(W.Z,{menuType:H.og.Popup},void 0,n()(O.Z,{type:O.i.Vertical,initialFocus:d,sections:[{key:`form-input-section-${t}`,items:u,render:e=>a[G](z.Z,e)}]}))}var X=i(53471),ee=i(71669),te=i(68785),ie=i(63296),oe=i(81865);const ne=i(85).XNW,re=i(85).nx5,ae=i(85).IO3,le=i(85).wgE,se=i(85).OtN,de=i(85).CJV,ue=i(85).Ifi,ce=i(85).NF1,pe=i(85).X_m;function me(e){window.__c={n:"DeveloperIntegrationFormIconUpload"};const{value:t,setValue:i,setError:o}=e,r=(0,l.O7)(),[s,d]=a.useState(!1);return a.createElement(a.Fragment,null,t&&n()(oe.Z,{url:t,[ue]:!1,[de]:!0,width:90,render:(e,t)=>n()("div",{style:{width:90,[pe]:90}},void 0,n()(ee.Z,{src:t,style:{width:90,[pe]:90,objectFit:"cover",[ce]:3}}))}),n()(ie.Z,{isLarge:!0,style:{width:"fit-content",[se]:"white"},onClick:()=>{X.openFilePickerAndUpload({[le]:r,onStart:()=>d(!0),bucket:"public",onError:e=>{o(e.message),d(!1)},[ae]:e=>{i(e[0]),d(!1)},accept:"image/*"})}},void 0,n()(c.FormattedMessage,{id:"formInputIcon.uploadButton.label",[re]:"Upload image"}),s&&n()(te.Z,{style:{[ne]:4}})))}const ve=i(85).QZR,ge=i(85).f8x,fe=i(85).g4H,be=i(85).AEv;function he(e){window.__c={n:"DeveloperIntegrationFormLabel"};const{label:t,[be]:i,[fe]:o,error:r,children:a,field:l,formStateType:s}=e,d=v.aP[l].requiredBy[s],u=(0,S.yK)((()=>({wrapper:{display:"flex"},label:{fontSize:15,fontWeight:T.Z.fontWeight.medium,color:_.ZP.frontTextMedium},[ge]:{color:_.ZP.red,marginLeft:2},[be]:{fontSize:15,color:_.ZP[ve]},[fe]:{fontSize:15,color:_.ZP[ve]},error:{marginTop:4,fontSize:15,color:_.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return n()("div",{style:u.field},void 0,n()("header",{style:u.wrapper},void 0,n()("div",{style:u.label},void 0,t),d&&n()("div",{style:u[ge]},void 0,"*")),o&&n()("div",{style:u[fe]},void 0,o),a,i&&n()("div",{style:u[be]},void 0,i),r&&n()("div",{style:u.error},void 0,r))}var ye=i(91996),we=i(38381),Ie=i(74181),Se=i(95477),_e=i(85567),ke=i(719);const Fe=i(85).j7K,xe=i(85).y79,Ze=i(85).D7I,Ce=i(85).j_T,Pe=i(85).Scd,De=i(85).TtP;function Te(e){const{currentValue:t,setNewValue:i,typeaheadTitle:o,style:r}=e,l=t||[],[s,d]=a.useState(""),u=()=>d("");return n()(j.ZP,{popupType:j.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:s[De]>0,onDismiss:u,origin:n()(ke.Z,{style:{[Pe]:_.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>d(e.target.value),tokens:l.map(((e,t)=>n()(_e.Z,{format:k.l.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:r,onClickRemove:()=>{i(l.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{l[De]>0&&i(l.slice(0,l[De]-1))}}),render:()=>{const e=s.trim(),t=(0,Ie.ue)(Se.default[Ce],e).map((e=>({key:e,render:t=>a[Ze](N.Z,w()({},t,{title:e})),action:()=>{u(),i([...l,e])}})));return n()(W.Z,{menuType:H.og.Popup},void 0,n()(O.Z,{type:O.i[xe],[Fe]:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>a[Ze](z.Z,w()({},e,{title:o}))}]}))}})}const Ue=i(85).d7L,Me=i(85).LlE,Ve=i(85).aFd,Le=i(85).OM8,Be=i(85).OtN,Re=i(85).f4X,Ne=i(85).icY,Ae=i(85).Dd5,Ee=i(85).nm$,Oe=i(85).X_m,Ke=i(85).jx_,ze=i(85).Scd,Ye=i(85).BQ6,He=i(85).nx5,We=i(85).IaW,je=i(85).UA5,$e=i(85).ChN,Ge=i(85).Exd,Je=i(85).BXb;function qe(e){const{currentRule:t,onUpdate:i,shouldShowDelete:o,onDelete:r,onError:l}=e,{name:s,regex:d,[Je]:u,sampleUrls:p}=t,[m,v]=a.useState(JSON.stringify(u,null,2));return n()("div",{[Ye]:{marginBottom:24}},void 0,n()(Ne,{},void 0,n()("div",{[Ye]:{[Ge]:15,[$e]:T.Z[$e].regular,[je]:_.ZP[We]}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.name.label",[He]:"Rule Name"})),n()(E.Z,{inputClassName:s,[Ye]:{[ze]:_.ZP[Ke],[Oe]:32,[Ge]:15},value:s,[Ae]:e=>{i({...t,name:e[Ee].value})},right:o&&n()(Qe,{onDelete:r})})),n()(Ne,{},void 0,n()("div",{[Ye]:{[Ge]:15,[$e]:T.Z[$e].regular,[je]:_.ZP[We]}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.sampleUrls.label",[He]:"Sample URLs"})),n()(Te,{[Re]:p,setNewValue:e=>{i({...t,sampleUrls:e})},[Ye]:{[je]:_.ZP[We]},setErrorValue:e=>l(e),typeaheadTitle:n()(c.FormattedMessage,{id:"developerIntegrationsForm.urlsInput.typePrompt",[He]:"Type or paste a url…"})})),n()(Ne,{},void 0,n()("div",{[Ye]:{[Ge]:15,[$e]:T.Z[$e].regular,[je]:_.ZP[We]}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.pattern.label",[He]:"Pattern"})),n()(E.Z,{[Ye]:{[ze]:_.ZP[Ke],[Ge]:15},autosize:!0,textarea:!0,value:d,[Ae]:e=>{i({...t,regex:e[Ee].value})}})),n()(Ne,{},void 0,n()("div",{[Ye]:{[Ge]:15,[$e]:T.Z[$e].regular,[je]:_.ZP[We]}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.attributes.label",[He]:"Attributes"})),n()(E.Z,{format:E.B.ExtraLarge,[Ye]:{[Be]:_.ZP[Ke]},inputStyle:{[Ge]:14,[Le]:"18px",[Oe]:200,[Ve]:T.Z.baseFontFamily.mono,[Me]:4},textarea:!0,value:m,[Ae]:e=>{const o=e[Ee].value;v(o);const r=(0,ye.getValidJSON)(o);void 0===r?l(n()(c.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",[He]:"{value} attributes has invalid JSON.",values:{value:s}})):i({...t,[Je]:r})}})))}function Qe(e){let{onDelete:t}=e;return n()(R.Z,{[Ye]:{[Me]:4,borderRadius:3},onClick:()=>{we.Z.setState({open:!0,[Ue]:!1,isWarning:!0,title:n()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.title",[He]:"Are you sure you want to delete this regex pattern rule?"}),message:n()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.message",[He]:"Changes will not be saved until you submit the form."}),confirmationMessage:n()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",[He]:"Delete"}),onConfirm:()=>{t()}})}},void 0,F.Z.trash({width:15,[Oe]:15}))}var Xe=i(79500),et=i(31278),tt=i(76798);const it=a.forwardRef(((e,t)=>{window.__c={n:"DeveloperIntegrationFormSpaceDropdownItem"};const{item:i,...o}=e,r=(0,l.O7)(),d=(0,s.VK)((()=>i&&(0,L.Wd)(r,i)),[r,i]),u=(0,s.VK)((()=>i&&(0,L.rn)(r,i)),[r,i]);return a.createElement(N.Z,w()({},o,{ref:t,title:i&&n()(tt.Z,{store:i}),icon:i&&n()(et.Z,{disabled:!0,icon:d,title:u,isEmptyPage:!1,size:19})}))}));var ot=i(77420),nt=i(50906),rt=i(33954);const at=i(85).D7I,lt=i(85).wuN,st=i(85).YGn,dt=i(85).nx5,ut=i(85).C8C,ct=i(85).XNW,pt=i(85).IaW,mt=i(85).Oc6,vt=i(85).aFd;function gt(e){const{secret:t,secretName:i,onCopy:o,actionButtons:r}=e;return n()(E.Z,{type:t?"text":"password",disabled:!0,style:{[vt]:T.Z[mt](I.SP).mono,color:_.ZP[pt]},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:n()("div",{style:{display:"flex"}},void 0,n()("div",{style:{width:30,[ct]:-30,height:24,backgroundImage:ut,zIndex:1}}),t?n()(ft,{onCopy:o,secret:t,secretName:i}):r)})}function ft(e){window.__c={n:"CopySecretButton"};const{secretName:t,secret:i,onCopy:o}=e,r=(0,l.O7)(),[s,d]=a.useState(!1),u=a.useCallback((()=>{M.copyString({environment:r,stringValue:i,copiedMessage:M.clipboardMessages.copiedToClipboard}),o()}),[r,o,i]),p=n()(c.FormattedMessage,s?{[dt]:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}:{[dt]:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return n()(Y.Z,{placement:Y.Z.Placement.Top,renderTooltip:()=>p,render:e=>a[at](R.Z,w()({onClick:e=>{e[st](),d(!0),setTimeout((()=>{d(!1)}),1500),u()}},e,{style:{...bt.button,color:s?_.ZP[lt]:_.ZP.blue}}),n()(c.FormattedMessage,s?{id:"formSecretShow.copied.label",[dt]:"Copied"}:{id:"formSecretShow.copySecret.label",[dt]:"Copy"}))})}const bt={button:{display:"inline-flex",alignItems:"center",[vt]:T.Z[mt](I.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:_.ZP.blue}},ht=i(85).Oc6,yt=i(85).D7I,wt=i(85).PG2,It=i(85).FOQ,St=i(85).nx5,_t=i(85).W2G;function kt(e){window.__c={n:"DeveloperIntegrationShowBotToken"};const{onError:t,bot:i}=e,o=(0,l.O7)(),r=(0,c.useIntl)(),s=i.id,[d,u]=a.useState(),p=a.useCallback((async()=>{const e=await U.getBotToken(o,{botId:s});"success"===e.type?(nt.trackDeveloperIntegrationsViewSecret(o,{table:ot.cZ}),u(e.data.token)):t((0,rt.wf)(r,e)??"Error fetching bot token.")}),[o,s,t,r]),m=a.useCallback((async()=>{const e=await U.revokeBotToken(o,{botId:s});return"success"===e.type?{[_t]:!0}:(t((0,rt.wf)(r,e)??"Error revoking bot token."),{[_t]:!1})}),[o,s,t,r]);return n()(gt,{secret:d,secretName:n()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",[St]:"token"}),onCopy:()=>{nt.trackDeveloperIntegrationsCopySecret(o,{table:ot.cZ,from:"developer-integrations-view"})},actionButtons:a[yt](a.Fragment,null,n()(R.Z,{[wt]:()=>{!function(e){const{onConfirm:t}=e;we.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:n()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",[St]:"Refresh token?"}),message:n()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",[St]:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:n()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",[St]:"Continue"})})}({onConfirm:async()=>{(await m())[_t]&&await p()}})},style:Ft[It]},void 0,n()(c.FormattedMessage,{id:"developerIntegrationShotBotToken.refreshSecret.label",[St]:"Refresh"})),n()(R.Z,{[wt]:()=>{p()},style:Ft[It]},void 0,n()(c.FormattedMessage,{id:"developerIntegrationShotBotToken.showSecret.label",[St]:"Show"})))})}const Ft={[It]:{display:"inline-flex",alignItems:"center",fontFamily:T.Z[ht](I.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:_.ZP.blue}};var xt=i(9844);const Zt=i(85).Oc6,Ct=i(85).nx5;function Pt(e){window.__c={n:"DeveloperIntegrationShowClientSecret"};const{onError:t,integration:i}=e,o=(0,l.O7)(),r=(0,c.useIntl)(),[d,u]=a.useState(),m=i.id,v=i.info.has_viewed_secret,g=(0,s.VK)((()=>f.default.state.currentUserStore),[]),h=g?(0,b.Kv)(g,{id:m,table:xt.K2}):void 0,y=a.useCallback((async()=>{if(!h)return;const e=await U.getIntegrationSecret(o,{integrationId:m});"success"===e.type?(p.bO({environment:o,integrationStore:h}),nt.trackDeveloperIntegrationsViewSecret(o,{table:xt.K2}),u(e.data.secret)):t((0,rt.wf)(r,e)??"Error fetching client secret.")}),[o,h,m,t,r]);return n()(gt,{secret:d,secretName:n()(c.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",[Ct]:"secret"}),onCopy:()=>{nt.trackDeveloperIntegrationsCopySecret(o,{table:xt.K2,from:"developer-integrations-view"})},actionButtons:n()(Dt,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:i}=e,o=n()(c.FormattedMessage,t?{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",[Ct]:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",[Ct]:"Show OAuth client secret?"}),r=n()(c.FormattedMessage,t?{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",[Ct]:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",[Ct]:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});we.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:i,title:o,message:r,confirmationMessage:n()(c.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",[Ct]:"Continue"})})}({hasSecretBeenViewed:v,onConfirm:()=>{y()}})},hasSecretBeenViewed:v})})}function Dt(e){const{onClick:t,hasSecretBeenViewed:i}=e;return n()(R.Z,{onClick:t,style:Tt.button},void 0,n()(c.FormattedMessage,i?{id:"formSecretShow.refreshSecret.label",[Ct]:"Refresh"}:{id:"formSecretShow.showSecret.label",[Ct]:"Show"}))}const Tt={button:{display:"inline-flex",alignItems:"center",fontFamily:T.Z[Zt](I.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:_.ZP.blue}};var Ut=i(47478),Mt=i(42402),Vt=i(46978),Lt=i(5478);const Bt=i(85).C8C,Rt=i(85).Oc6,Nt=i(85).OdC,At=i(85).bpL,Et=i(85).ivl,Ot=i(85).d6L,Kt=i(85).v32,zt=i(85).kzm,Yt=i(85).IaW,Ht=i(85).HFH,Wt=i(85).jpH,jt=i(85).nSN,$t=i(85).iD5,Gt=i(85).oOV,Jt=i(85).nC_,qt=i(85).fol,Qt=i(85).Yzm,Xt=i(85).VUQ,ei=i(85).rpY,ti=i(85).Joh,ii=i(85).PG2,oi=i(85).TPm,ni=i(85).uGP,ri=i(85).qcw,ai=i(85).se3,li=i(85).wgE,si=i(85).O87,di=i(85).YGn,ui=i(85).ESK,ci=i(85).EMU,pi=i(85).sM5,mi=i(85).P29,vi=i(85).s9u,gi=i(85).Exd,fi=i(85).LFy,bi=i(85).QZR,hi=i(85).nx5,yi=i(85).Dd5,wi=i(85).nm$,Ii=i(85).dcn,Si=i(85).HG1,_i=i(85).pcd,ki=i(85).MFQ,Fi=i(85).L1A,xi=i(85).egv,Zi=i(85).H6R,Ci=i(85).f4X,Pi=i(85).DgF,Di=i(85).tBn,Ti=i(85).D7I,Ui=i(85).BQ6,Mi=i(85).g7N,Vi=i(85).vg7;function Li(e){window.__c={n:"DeveloperIntegrationFormPageView"};const{integrationFormStore:t,formData:i,setFormData:o,pageSections:r,fieldDetails:l}=e,d=(0,s.VK)((()=>t.getState()),[t]),{type:u}=d,c=r.map((e=>({...e,[Vi]:e[Vi].filter((e=>{const{supportedBy:t}=v.aP[e];return t[u]}))})));return a[Ti](a[Di],null,c.map((e=>a[Ti](a[Di],null,e[Vi].length>0&&n()("div",{[Ui]:{[Mi]:24}},e.key,n()(Xe.e,{section:e})),e[Vi].map((e=>n()(Bi,{formData:i,setFormData:o,formStoreState:d,formFieldDetail:l,field:e},e)))))))}function Bi(e){window.__c={n:"DeveloperIntegrationsFormFieldView"};const{formData:t,setFormData:i,formStoreState:o,formFieldDetail:r,field:a}=e,l=(0,s.VK)((()=>f.default.state[Pi]),[]),d=(0,s.VK)((()=>l?l.getAdminSpaceStores():[]),[l]),{type:u}=o,{label:c,subtitle:p,caption:m}=r[a]??{},v=Ri[a];return v?n()(he,{label:c,subtitle:p,caption:m,error:t[a].error,field:a,formStateType:u},a,n()(v,{autoFocus:Boolean("create-bot"===u&&"name"===a),spaces:d,[Ci]:t[a].value,setErrorValue:e=>{i({field:a,error:e})},setNewValue:e=>{i({value:e,field:a})},formStoreState:o})):null}const Ri={type:function(){return n()(E.Z,{[Ui]:{color:_.ZP[bi]},value:"Internal",disabled:!0})},name:Ni,icon:function(e){const{[Ci]:t,setNewValue:i,setErrorValue:o}=e;return n()(me,{value:t,setValue:i,setError:o})},space:function(e){window.__c={n:"SpacePicker"};const{spaces:t,[Ci]:i,setNewValue:o,setErrorValue:r}=e,[l,s]=a.useState(!1);return(0,a.useEffect)((()=>{l||0!==t.length||(s(!0),r(n()(c.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",[hi]:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>n()(Mt.Z,{href:(0,g.getLocalizedUrl)("guides.joinOrCreateWorkspace")},void 0,e)}})))}),[t,r,l]),n()(J,{keyName:"space",items:t,value:i,setValue:o,renderMenuItem:e=>a[Ti](it,e)})},token:function(e){window.__c={n:"ShowBotToken"};const t=(0,l.O7)(),{[Ci]:i,setErrorValue:o}=e,r=(0,s.VK)((()=>f.default.state.currentUserStore),[]),d=(0,s.VK)((()=>{if(!r||!i)return;if(i.value[fi]!==D.bx)return;const e=b.H2.createChildStore(r,{id:i.value.parent_id,table:i.value[fi]});return(0,L.rn)(t,e)}),[r,i,t]);if(!i)return null;return a[Ti](a[Di],null,n()(kt,{bot:i.value,onError:o}),d&&n()("div",{[Ui]:{[gi]:15,color:_.ZP[bi]}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",[hi]:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{[vi]:d,bold:e=>n()("b",{},void 0,e),developertermslink:e=>n()(Mt.Z,{href:C._j[mi]},void 0,e)}})))},client_id:function(e){window.__c={n:"ShowOAuthClientId"};const{[Ci]:t}=e,i=(0,l.O7)(),[o,r]=a.useState(!1),s=Ki(o);if(!t)return null;const d=n()(c.FormattedMessage,o?{[hi]:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{[hi]:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return n()(E.Z,{type:"text",disabled:!0,[Ui]:s.authInput,value:t.value.id,right:n()("div",{[Ui]:{[pi]:ci}},void 0,n()("div",{[Ui]:s.authInputRight}),n()(Y.Z,{placement:Y.Z[ui].Top,[ti]:()=>d,[ei]:e=>a[Ti](R.Z,w()({[ii]:e=>{e[di](),r(!0),setTimeout((()=>{r(!1)}),1500),M[si]({[li]:i,[ai]:t.value.id,[ri]:M[oi][ni]})}},e,{[Ui]:s.authButton}),n()(c.FormattedMessage,o?{id:"developerIntegrationsForm.copiedId.label",[hi]:"Copied"}:{id:"developerIntegrationsForm.copyId.label",[hi]:"Copy"}))}))})},client_secret:function(e){const{[Ci]:t,setErrorValue:i}=e;if(!t)return null;return n()(Pt,{[Xt]:t.value,onError:i})},authorization_url:function(e){window.__c={n:"ShowAuthorizationURL"};const{[Ci]:t}=e,i=(0,l.O7)(),[o,r]=a.useState(!1),s=Ki(o);if(!t)return null;const d=n()(c.FormattedMessage,o?{[hi]:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}:{[hi]:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return n()(E.Z,{type:"text",disabled:!0,[Ui]:s.authInput,value:t,right:n()("div",{[Ui]:{[pi]:ci}},void 0,n()("div",{[Ui]:s.authInputRight}),n()(Y.Z,{placement:Y.Z[ui].Top,[ti]:()=>d,[ei]:e=>a[Ti](R.Z,w()({[ii]:e=>{e[di](),r(!0),setTimeout((()=>{r(!1)}),1500),M[si]({[li]:i,[ai]:t,[ri]:M[oi][ni]})}},e,{[Ui]:s.authButton}),n()(c.FormattedMessage,o?{id:"developerIntegrationsForm.copiedAuthUrl.label",[hi]:"Copied"}:{id:"developerIntegrationsForm.copyAuthUrl.label",[hi]:"Copy"}))}))})},capabilities:function(e){const{setNewValue:t,[Ci]:i}=e,o={...v.fP,...i},l={no_user_capabilities:!1===o[qt]&&!1===o[Jt],[qt]:!0===o[qt]&&!1===o[Jt],[Jt]:!0===o[Jt]};return n()(O.Z,{type:O.i.Vertical,initialFocus:void 0,sections:r.compact([{key:"content_capabilities",items:[Gt,$t,jt].map((e=>Ei(e,o,t))),[ei]:e=>a[Ti](z.Z,w()({},e,{title:h.default[Qt](Ai.content_capabilities_title)}))},{key:"comment_capabilities",items:[Wt,Ht].map((e=>Ei(e,o,t))),[ei]:e=>a[Ti](z.Z,w()({},e,{title:h.default[Qt](Ai.comment_capabilities_title)}))},{key:"user_capabilities",items:["no_user_capabilities",qt,Jt].map((e=>((e,t,i,o)=>({key:e,action:()=>null,[ei]:r=>{const l=t=>{t[di](),o({...i,[qt]:"no_user_capabilities"!==e,[Jt]:"read_user_with_email"===e})};return a[Ti](N.Z,w()({},r,{title:h.default[Qt](Ai[`${e}_title`]),caption:h.default[Qt](Ai[`${e}_caption`]),icon:n()(Vt.Z,{isSelected:t}),key:e,[ii]:l}))}}))(e,l[e],o,t))),[ei]:e=>a[Ti](z.Z,w()({},e,{title:h.default[Qt](Ai.user_capabilities_title)}))}])})},template_url:Ni,redirect_uris:function(e){return a[Ti](Te,w()({},e,{[Ui]:{color:_.ZP[Yt]},typeaheadTitle:n()(c.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",[hi]:"Type a redirect uri…"})}))},tagline:Ni,privacy_policy_url:Ni,terms_of_use_url:Ni,email:Ni,developer_name:Ni,website_url:Ni,unfurl_url:Ni,[Zi]:function(e){window.__c={n:"VerifyDomainInput"};const{[Ci]:t,autoFocus:i,setNewValue:o,formStoreState:r,setErrorValue:s}=e,d=(0,l.O7)(),m=(0,c.useIntl)(),v=Oi();if("update-third-party-external-integration"!==r.type&&"update-first-party-external-integration"!==r.type)return null;const{[zt]:g,verifiedDomains:f,[Kt]:b}=t||{[zt]:"",verifiedDomains:[],[Kt]:[]},h=f.map((e=>({[Zi]:e,[Ot]:Lt.YF.Success,data:{type:"verified",[Zi]:e}}))),y=Date.now(),w=b.filter(B.AS).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({[Zi]:e[Zi],[Ot]:y>e.expiresAt?Lt.YF.Failure:Lt.YF.Pending,data:{...e,type:y>e.expiresAt?"invalid":"unverified"}}))),I=r.startingRecord.value.id;async function S(){const e=await U.getIntegrationDomainVerifications(d,{[Et]:I});if("success"===e.type){const t=Z.PF.create(e.data.recordMap),i=x.mF[At](t),n=e.data.verificationIds.map((e=>i({table:P.Jd,id:e}))).filter(u.isDefined).map(B.Hs).filter((e=>"verified"!==e.type));o({[zt]:g,verifiedDomains:f,[Kt]:n})}}if("update-third-party-external-integration"===r.type)return n()(Ut.ZP,{domains:[...h,...w],domainVerificationStore:r.domainVerificationStore,verificationType:Xt,verificationTargetId:I,refreshDomains:S,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await U.deleteDomainVerificationCode(d,{id:e.id});"failed"===t.type&&s(t.error.message),await S()}else p.QO({[li]:d,[Et]:I,allVerifiedDomains:f,domainToRemove:e[Zi]})}});return a[Ti](a[Di],null,n()("div",{[Ui]:v.domainInputTitle},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.domain.developmentDomain.label",[hi]:"Development domain"})),n()(E.Z,{autoFocus:i,[Ui]:v.basicTextInput,value:g,[yi]:e=>o({verifiedDomains:f,[Kt]:b,[zt]:e[wi].value})}),n()("div",{[Ui]:v.domainInputTitle},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.domain.verifiedDomains.label",[hi]:"Verified domain(s)"})),n()(ke.Z,{placeholder:m[Qt]({id:"domainVerificationInput.domainInput.placeholder",[hi]:"No domains configured"}),value:"",[yi]:()=>{},onRemoveLastToken:()=>{},readOnly:!0,tokens:h.map((e=>{let{[Zi]:t,[Ot]:i}=e;return n()(Lt.ZP,{[Ot]:i,showRemoveButton:!1,isSingle:!1,format:k.l.Medium,value:t},t)}))}))},[xi]:function(e){window.__c={n:"RegexPatternRulesInput"};const{[Ci]:t,setNewValue:i,setErrorValue:o}=e,r=Oi();return a[Ti](a[Di],null,null==t?void 0:t.map(((e,r)=>n()(qe,{currentRule:e,shouldShowDelete:0!==r,onUpdate:e=>{i([...t[Nt](0,r),e,...t[Nt](r+1)])},onDelete:()=>{0!==r&&i([...t[Nt](0,r),...t[Nt](r+1)])},onError:o},`regex-rule-${r}`))),n()(K.Z,{[Ui]:r.plainButton,isBlue:!0,[ii]:e=>{e[di](),i([...t??[],V.VH])}},void 0,F.Z.plus(r.icon),n()(c.FormattedMessage,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",[hi]:"Add another rule"})))},[Fi]:Ni,[ki]:Ni,external_client_id:Ni,[_i]:function(e){window.__c={n:"HiddenTextInput"};const{autoFocus:t,[Ci]:i,setNewValue:o}=e,r=Oi();return n()(E.Z,{type:"password",autoFocus:t,[Ui]:r.basicTextInput,value:i,[yi]:e=>o(e[wi].value)})},[Si]:Ni,[Ii]:Ni};function Ni(e){window.__c={n:"BasicTextInput"};const{autoFocus:t,[Ci]:i,setNewValue:o}=e,r=Oi();return n()(E.Z,{autoFocus:t,[Ui]:r.basicTextInput,value:i,[yi]:e=>o(e[wi].value)})}const Ai=(0,c.defineMessages)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",[hi]:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",[hi]:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",[hi]:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",[hi]:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",[hi]:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",[hi]:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",[hi]:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",[hi]:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",[hi]:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",[hi]:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",[hi]:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",[hi]:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",[hi]:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",[hi]:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",[hi]:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",[hi]:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",[hi]:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",[hi]:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",[hi]:"Request access to user information, including email addresses."}}),Ei=(e,t,i)=>({key:e,action:()=>null,[ei]:o=>{const r=o=>{o[di](),i({...t,[e]:!t[e]})};return a[Ti](N.Z,w()({},o,{title:h.default[Qt](Ai[`${e}_title`]),caption:h.default[Qt](Ai[`${e}_caption`]),icon:n()(A.Z,{checked:Boolean(t[e]),size:16,[ii]:r}),key:e,[ii]:r}))}});function Oi(){return(0,S.yK)((()=>({basicTextInput:{background:_.ZP.white,height:32,[gi]:15},domainInputTitle:{marginTop:15,[gi]:15,fontWeight:T.Z.fontWeight.regular,color:_.ZP[Yt]},plainButton:{[pi]:ci,alignItems:"center"},icon:{width:15,height:15}})),[])}function Ki(e){return(0,S.yK)((()=>({authInput:{color:_.ZP[Yt],fontFamily:T.Z[Rt](I.SP).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:Bt,zIndex:1},authButton:{[pi]:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:e?_.ZP[Yt]:_.ZP.blue,fontFamily:T.Z[Rt](I.SP).sans}})),[e])}const zi=i(85).Yzm,Yi=i(85).AEv;const Hi={key:"basic",title:h.default[zi](v.sY.basicSectionTitle),fields:["type","space","name","icon"]},Wi=[Hi],ji={type:{label:h.default[zi](v.sY.integrationTypeLabel),[Yi]:h.default[zi](v.sY.integrationTypeSubtitle)},name:{label:h.default[zi](v.sY.nameLabel),[Yi]:h.default[zi](v.sY.nameSubtitle)},icon:{label:h.default[zi](v.sY.iconLabel),[Yi]:h.default[zi](v.sY.iconSubtitle)},space:{label:h.default[zi](v.sY.spaceLabel),[Yi]:h.default[zi](v.sY.spaceSubtitle)}},$i=i(85).Yzm,Gi=i(85).Wku;const Ji=[{key:Gi,title:h.default[$i](v.sY.capabilitiesSectionTitle),fields:[Gi]}],qi={[Gi]:{label:h.default[$i](v.sY.capabilitiesLabel),caption:n()(c.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(Mt.Z,{href:"https://developers.notion.com/docs/authorization"},void 0,e)}})}};var Qi=i(70764),Xi=i(24006);const eo=i(85).TEz,to=i(85).AEv;function io(e){window.__c={n:"DeveloperIntegrationFormSwitcherButton"};const{label:t,[to]:i,onClick:o,isDisabled:r,isActive:l}=e,s=(0,S.yK)((e=>({label:{fontSize:15,color:e[eo],display:"flex",justifyContent:"space-between"},[to]:{fontSize:15,color:e[eo],paddingTop:15}})),[]);return a.createElement(a.Fragment,null,n()("div",{style:s.label},void 0,t,n()(Xi.Z,{onClick:o,on:l,disabled:r})),n()("div",{style:s[to]},void 0,i))}const oo=i(85).R0B,no=i(85).Dtz,ro=i(85).LOo,ao=i(85).Vhk,lo=i(85).aK6,so=i(85).yCe,uo=i(85).D7I,co=i(85).AEv,po=i(85).nx5,mo=i(85).nLZ,vo=i(85).Yzm,go=i(85).Lpg,fo=i(85).xE2,bo=i(85).TKs,ho=i(85).HkP;const yo=[{key:"organization",title:h.default[vo](v.sY.organizationSectionTitle),fields:[so,lo,"tagline",ao,ro,"email"]},{key:"oauth",title:h.default[vo](v.sY.oauthSectionTitle),fields:[no,oo]}];function wo(e){const t=e?h.default[vo](v.sY.redirectUrisBetaSubtitle):h.default[vo](v.sY.redirectUrisSubtitle);return{[no]:{label:h.default[vo](v.sY.redirectUrisLabel),[co]:t},[lo]:{label:h.default[vo](v.sY.websiteUrlLabel),[co]:h.default[vo](v.sY.websiteUrlSubtitle)},tagline:{label:h.default[vo](v.sY.taglineLabel),[co]:h.default[vo](v.sY.taglineSubtitle)},[ao]:{label:h.default[vo](v.sY.privacyPolicyUrlLabel),[co]:h.default[vo](v.sY.privacyPolicyUrlSubtitle)},[ro]:{label:h.default[vo](v.sY.termOfUseLabel),[co]:h.default[vo](v.sY.termOfUseSubtitle)},[oo]:{label:h.default[vo](v.sY.templateLabel),[co]:h.default[vo](v.sY.templateSubtitle)},email:{label:h.default[vo](v.sY.emailLabel),[co]:h.default[vo](v.sY.emailSubtitle)},[so]:{label:h.default[vo](v.sY.developerNameLabel),[co]:h.default[vo](v.sY.developerNameSubtitle)}}}var Io=i(97122);const So=i(85).$bT,_o=i(85).D7I,ko=i(85).QKL,Fo=i(85).Yzm,xo=i(85).d7L,Zo=i(85).nx5,Co=(0,c.defineMessages)({confirmTitle:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",[Zo]:"Switch to Public integration?"},confirmContinue:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",[Zo]:"Continue"},confirmCapability:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",[Zo]:"Change requested capabilities?"},confirmCapabilityMessage:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",[Zo]:"Any existing users of your integration will be required to re-authenticate."},confirmCapabilitySubmit:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",[Zo]:"Change"},submitButtonCreate:{id:"formHandler.submitButton.create.label",[Zo]:"Submit"},submitButtonUpdate:{id:"formHandler.submitButton.create.update",[Zo]:"Save changes"},submitButtonContinue:{id:"formHandler.submitButton.continue.label",[Zo]:"Continue"},submitButtonSaved:{id:"formHandler.submitButton.saved.label",[Zo]:"Saved"}});function Po(e){window.__c={n:"DeveloperIntegrationFormHandler"};const{onSubmit:t,children:i,submitType:o,currentPage:r,capabilitiesHaveChanged:a,formSaved:l}=e,s=(0,v.hs)(r,o),d=("update-guest-integration"===o||"update-third-party-external-integration"===o)&&a,u=Uo({});return n()("form",{id:"developer-integration-form",style:u.formContainerStyle,onSubmit:e=>{e.preventDefault(),"create-guest-integration"===o?we.Z.setState({open:!0,[xo]:!1,isWarning:!1,title:h.default[Fo](Co.confirmTitle),message:n()(c.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",[Zo]:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:e=>n()(Mt.Z,{href:C._j.developerOAuthDocs},void 0,e)}}),confirmationMessage:h.default[Fo](Co.confirmContinue),onConfirm:()=>{t()}}):d?we.Z.setState({open:!0,[xo]:!1,isWarning:!0,title:h.default[Fo](Co.confirmCapability),message:h.default[Fo](Co.confirmCapabilityMessage),confirmationMessage:h.default[Fo](Co.confirmCapabilitySubmit),onConfirm:()=>{t()}}):t()}},void 0,i,s&&n()(Do,{submitType:o,formSaved:l}))}function Do(e){window.__c={n:"FormFooter"};const{submitType:t,formSaved:i}=e,o=(0,v.oX)(t),r=(0,v.w8)(t),a=!o&&i,l=Uo({isCreate:o});return n()("div",{style:l.buttonContainerStyle},void 0,o&&n()("span",{style:l.buttonLabelStyle},void 0,n()(c.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTermsOnSubmit",[Zo]:"By {action}, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:e=>n()(Mt.Z,{href:C._j.developerTerms},void 0,e),action:r?"continuing":"submitting"}})),n()(To,{submitType:t,showSavedButton:a}))}function To(e){window.__c={n:"FormButton"};const{submitType:t,showSavedButton:i}=e,o=(0,v.oX)(t),r=(0,v.w8)(t),a=Uo({showSavedButton:i}),l=r?"submitButtonContinue":"submitButtonCreate",s=i?"submitButtonSaved":"submitButtonUpdate",d=o?h.default[Fo](Co[l]):h.default[Fo](Co[s]);return n()(Io.h,{styles:a.buttonBackground,onClick:()=>{const e=document[ko]("form#developer-integration-form");if(e){const t=e.ownerDocument[_o]("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,d,o&&F.Z.arrowRight(a.rightArrow))}function Uo(e){const{showSavedButton:t,isCreate:i}=e;return(0,S.yK)((()=>({buttonContainerStyle:{display:"flex",marginTop:24,[So]:i?"row":"row-reverse",alignItems:"center"},buttonLabelStyle:{fontSize:15,color:_.ZP.frontTextLight,marginRight:42},formContainerStyle:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",[So]:"column"},buttonBackground:{...t&&{background:_.ZP.frontBlackButtonBackgroundPressed}},rightArrow:{width:14,height:14,marginLeft:4}})),[t,i])}const Mo=i(85).m$Y,Vo=i(85).q4P,Lo=i(85).Yzm;const Bo=[{key:"secrets",title:h.default[Lo](v.sY.secretSectionTitle),fields:["token","client_id",Vo,Mo]}],Ro={token:{label:h.default[Lo](v.sY.tokenLabel)},client_id:{label:h.default[Lo](v.sY.clientIdLabel)},[Vo]:{label:h.default[Lo](v.sY.clientSecretLabel)},[Mo]:{label:h.default[Lo](v.sY.authorizationUrlLabel)}},No=i(85).g4H,Ao=i(85).egv,Eo=i(85).aM5,Oo=i(85).dcn,Ko=i(85).HG1,zo=i(85).pcd,Yo=i(85).kwU,Ho=i(85).MFQ,Wo=i(85).L1A,jo=i(85).D7I,$o=i(85).AEv,Go=i(85).nx5,Jo=i(85).nLZ,qo=i(85).Yzm,Qo=i(85).Gte;const Xo={key:"external_oauth",title:h.default[qo](v.sY.externalOauthSectionTitle),[$o]:n()(c.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.sectionSubtitle.external_oauth",[Go]:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>n()(Mt.Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0},void 0,e),authlink:e=>n()(Mt.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0},void 0,e)}}),fields:["icon",Wo,Ho,Yo,zo,Ko,Oo]};const en={icon:{label:h.default[qo](v.sY.iconLabel),[$o]:h.default[qo](v.sY.iconSubtitle)},[Eo]:{label:h.default[qo](v.sY.unfurlUrlLabel),[No]:h.default[qo](v.sY.unfurlUrlCaption)},domain:{label:h.default[qo](v.sY.domainLabel),[No]:n()(c.FormattedMessage,{id:"developerIntegrationForm.domainVerification.caption",[Go]:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>n()(Mt.Z,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0},void 0,e)}})},[Ao]:{label:h.default[qo](v.sY.urlMatchingAndPlaceholderLabel),[No]:h.default[qo](v.sY.urlMatchingAndPlaceholderCaption)},[Wo]:{label:h.default[qo](v.sY.externalOauthAuthorizeUrlLabel),[No]:h.default[qo](v.sY.externalOauthAuthorizeUrlCaption)},[Ho]:{label:h.default[qo](v.sY.externalOauthTokenUrlLabel),[No]:h.default[qo](v.sY.externalOauthTokenUrlCaption)},[Ko]:{label:h.default[qo](v.sY.externalOauthScopesLabel),[No]:h.default[qo](v.sY.externalOauthScopesCaption)},[Yo]:{label:h.default[qo](v.sY.externalClientIdLabel)},[zo]:{label:h.default[qo](v.sY.externalClientSecretLabel)},[Oo]:{label:h.default[qo](v.sY.externalDeletionUrlLabel),[No]:h.default[qo](v.sY.externalDeletionUrlCaption)}},tn=i(85).wZM,on=i(85).AJ4,nn=i(85).Wku,rn=i(85).xn4,an=i(85).R0B,ln=i(85).p06,sn=i(85).EmK,dn=i(85).DgF;function un(e){var t;window.__c={n:"DeveloperIntegrationForm"};const{integrationFormStore:i,onCreateNew:o,currentPage:h,setSelectedPage:y,spaceName:w}=e,I=(0,l.O7)(),[S,_]=a.useState(!1),k=(0,s.VK)((()=>f.default.state[dn]),[]),F=(0,s.VK)((()=>i.getState()),[i]),{type:x}=F,[Z,C]=a.useReducer(v.x6,v.yb);(0,a.useEffect)((()=>{if(!k)return;(async()=>{const e=await(0,v.hl)({formStoreState:F,userRootStore:k,environment:I});for(const t of(0,u.objectKeys)(e))C({field:t,value:e[t]})})()}),[F,k,I,h]),(0,a.useEffect)((()=>{const e=()=>{_(!1)};return window[sn]("keydown",e),window[sn]("click",e),()=>{window[ln]("keydown",e),window[ln]("click",e)}}));const P=r.debounce((async()=>{_(!0);const e=(0,v.m0)({formData:Z,setFormData:C,formStateType:x,currentFieldNames:pn(h)});let t;if(Z[an].value){const e=(0,g.getBlockIdFromUrl)(Z[an].value);k&&e&&(t=b.G.createChildStore(k,{table:d.iU,id:e}),await t.load())}const i=(0,v.Z6)({formData:Z,setFormData:C,formStateType:x,templateStore:t,currentFieldNames:pn(h)});if(e.length>0||i.length>0||(0,v.tm)({formData:Z,formStateType:x,currentFieldNames:pn(h)})||!k)return void _(!1);const r=p.JJ({environment:I,formState:F,formData:(0,v.Xr)(Z)});if(!r)return m.showErrorMessage(n()(c.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."})),void _(!1);o&&o(r),(0,v.w8)(x)||(0,v.oX)(x)&&y&&y(rn)}),300),D=function(e,t){if(!t||!e)return!1;return(0,u.objectEntries)(t).some((t=>{let[i,o]=t;return Boolean(e[i])!==o}))}(null===(t=F.startingRecord)||void 0===t?void 0:t.value[nn],Z[nn].value),T=cn[h];return n()(Po,{submitType:x,onSubmit:P,capabilitiesHaveChanged:D,currentPage:h,formSaved:S},void 0,n()(T,{integrationFormStore:i,formData:Z,setFormData:C,spaceName:w}))}const cn={[on]:function(e){window.__c={n:"DeveloperIntegrationFormDistributionView"};const{integrationFormStore:t}=e,i=(0,s.VK)((()=>t.getState().type),[t]),o=(0,s.VK)((()=>(0,Qi.QS)()),[]),r=[ho,bo,fo,go].includes(i),l="update-bot"!==i,[d,u]=(0,a.useState)(l);return a[uo](a.Fragment,null,n()(io,{onClick:()=>{const e=d?"internal":"public";u(!d),t.updateRecordTypeOnSwitch(e)},label:h.default[vo](v.sY.distributionSwitcherLabel),[co]:n()(c.FormattedMessage,{id:"developerIntegrationFormDistributionView.switcher.subtitle",[po]:"A public integration is available to any Notion user. <br>After submission, only the creator will be able to manage this integration. To transfer ownership of this integration to another user, please contact Notion support.</br> <br>If you’ve built a public integration, you may be eligible to become a technology partner and get Notion’s support in promoting and distributing your integration. Learn more about the Notion Technology Partner Program <partnerProgramLink>here</partnerProgramLink>.</br>",values:{partnerProgramLink:e=>n()(Mt.Z,{href:"https://www.notion.so/technology-partner-program",external:!0},void 0,e),br:e=>n()("div",{style:{[mo]:15}},void 0,e)}}),isActive:d,isDisabled:r}),d&&a[uo](Li,w()({},e,{pageSections:yo,fieldDetails:wo(o)})))},[tn]:function(e){window.__c={n:"DeveloperIntegrationFormUnfurlingView"};const{integrationFormStore:t}=e,i=(0,s.VK)((()=>t.getState().type),[t]),o=(0,s.VK)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),r="update-third-party-external-integration"===i||"update-first-party-external-integration"===i,l="create-third-party-external-integration"===i||"update-third-party-external-integration"===i||"update-first-party-external-integration"===i,[d,u]=(0,a.useState)(l),m="create-third-party-external-integration"===i?[Xo]:[Xo,(g=o,{key:Qo,title:h.default[qo](v.sY.unfurlingSectionTitle),[$o]:n()(c.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",[Go]:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!g)return"";const t=p.Pk({table:xt.K2,id:g});return n()(Mt.Z,{href:t,external:!0},void 0,e)}}}),fields:[Eo,"domain",Ao]})];var g;return a[jo](a.Fragment,null,n()(io,{onClick:()=>{const e=d?"public":Qo;u(!d),t.updateRecordTypeOnSwitch(e)},label:h.default[qo](v.sY.unfurlingSwitcherLabel),[$o]:n()(c.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.switcher.subtitle",[Go]:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface. <br> To be publicly distributed, <formLink>fill out this form</formLink> to submit your integration for security review. </br>",values:{br:e=>n()("div",{style:{[Jo]:15}},void 0,e),formLink:e=>n()(Mt.Z,{href:"https://docs.google.com/forms/d/e/1FAIpQLSd94UcRziV-1yFv6udO0qZwohLyXxhYYadUqEJyyEd03RAj1w/viewform",external:!0},void 0,e)}}),isActive:d,isDisabled:r}),d&&a[jo](Li,w()({},e,{pageSections:m,fieldDetails:en})))},[rn]:function(e){return a.createElement(Li,w()({},e,{pageSections:Bo,fieldDetails:Ro}))},[nn]:function(e){return a.createElement(Li,w()({},e,{pageSections:Ji,fieldDetails:qi}))},basic:function(e){const{integrationFormStore:t,formData:i,setFormData:o,spaceName:r}=e,a=r?n()(c.FormattedMessage,{id:"developerIntegrationView.subtitle.internalIntegrationLabel",defaultMessage:"Workspace owners for <bold>{spaceName}</bold> can manage this integration",values:{spaceName:r,bold:e=>n()("b",{},void 0,e)}}):void 0;return n()(Li,{integrationFormStore:t,formData:i,setFormData:o,pageSections:[{...Hi,[Yi]:a}],fieldDetails:ji})}};function pn(e){switch(e){case"basic":return(0,v.Qo)(Wi);case rn:return(0,v.Qo)(Bo);case nn:return(0,v.Qo)(Ji);case on:return(0,v.Qo)(yo);case tn:return["icon",Wo,Ho,Yo,zo,Ko,Oo,Eo,"domain",Ao];default:return[]}}},87886:(e,t,i)=>{i.r(t),i.d(t,{LinkPreviewLab:()=>qe,default:()=>Je});var o=i(97464),n=i.n(o),r=i(77094),a=i.n(r),l=i(67294),s=i(480),d=i(81954),u=i(24405),c=i(63123),p=i(3909),m=i(74181),v=i(89602),g=i(70203),f=i(97880),b=i(82990),h=i(44876),y=i(36054),w=i(5366),I=i(8981),S=i(43250),_=i(91996),k=i(65270),F=i(87279),x=i(79315),Z=i(61766),C=i(30874),P=i(3403),D=i(64921),T=i(52275),U=i(31945),M=i(74194),V=i(78140),L=i(32163),B=i(63296),R=i(72495),N=i(29823),A=i(22131),E=i(76745),O=i(27830),K=i(17970),z=i(34958),Y=i(14577),H=i(20475),W=i(8848),j=i(77744),$=(i(73063),i(58032)),G=i(64369);i(29551);i(85).cZW,i(85).Mm1,i(85).mPA,i(85).Dd5;const J=i(85).Joh,q=i(85).ESK,Q=i(85).Omf,X=i(85).iDK,ee=i(85).YDv,te=i(85).p1r,ie=i(85).D7I,oe=(i(85).f57,i(85).Tk1),ne=(i(85).XCs,i(85).jkI,i(85).H1U,i(85).sM5),re=i(85).OM8,ae=(i(85).L_E,i(85).xOW),le=i(85).fBv,se=(i(85).LlE,i(85).Scd,i(85).NF1),de=i(85).nLZ,ue=i(85).BQ6,ce=i(85).g7N,pe=(i(85).nHL,i(85).ChN,i(85).Exd),me=i(85).rGB;function ve(e){window.__c={n:"Artboard"};const[t,i]=(0,l.useState)(!1);return a()("div",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)}},void 0,a()(ge,{isInverted:e.isInverted},void 0,a()(fe,{showSize:e.showSize??t,showInsets:e.showInsets??t,insetSize:24},void 0,a()(he,{isInverted:e.isInverted},void 0,e[me]))))}function ge(e){window.__c={n:"ArtboardBorder"};const t=(0,u.Fg)(),i=be(),o=e.isInverted?i:t,n=(0,l.useMemo)((()=>({[se]:3,overflow:"hidden",border:`1px solid ${o.regularDividerColor}`,backgroundColor:o.contentBackground,[de]:12,[ce]:12,color:o.regularTextColor})),[o]);return a()("div",{[ue]:n},void 0,e[me])}function fe(e){window.__c={n:"ArtboardInsets"};const{showInsets:t,showSize:i,insetSize:o,[me]:n}=e,r=(0,l.useRef)(null),s=(0,u.yK)((e=>{const i=t?"rgba(255, 105, 180, 1)":"rgba(255, 105, 180, 0)",n=`1px dashed ${i}`,r=`${o}px`,a="all 0.1s ease-in-out",l={t:{borderBottom:n,[te]:a},l:{borderRight:n,[te]:a},r:{borderLeft:n,[te]:a},b:{borderTop:n,[te]:a,[le]:ae}};return{grid:{[ne]:"grid",[oe]:`${r} auto ${r}`,gridTemplateRows:`${r} auto ${r}`,...l.t,...l.l,...l.r,...l.b},...l,tl:{...l.t,...l.l},tr:{...l.t,...l.r},bl:{...l.b,...l.l},br:{...l.b,...l.r},c:{[le]:ae},insetText:{color:i,[pe]:10,[ee]:(o-10)/2,fontFamily:b.Z.baseFontFamily.githubMono,[re]:r,maxHeight:o,[te]:a,[le]:"absolute"}}}),[t,o]);return a()("div",{[ue]:s.grid},void 0,a()("div",{[ue]:s.tl}),a()("div",{[ue]:s.t}),a()("div",{[ue]:s.tr}),a()("div",{[ue]:s.l}),l[ie]("div",{[ue]:s.c,ref:r},n),a()($.Z,{forceVisibleState:i??t,[J]:()=>{var e;return`${null===(e=r[X])||void 0===e?void 0:e[Q]().height}px`},placement:$.Z[q].Right,render:()=>a()("div",{[ue]:s.r})}),a()("div",{[ue]:s.bl}),a()($.Z,{placement:$.Z[q].Bottom,forceVisibleState:i??t,[J]:()=>{var e;return`${null===(e=r[X])||void 0===e?void 0:e[Q]().width}px`},render:()=>a()("div",{[ue]:s.b},void 0,a()(G.Z,{[ue]:s.insetText},void 0,`${o}px inset`))}),a()("div",{[ue]:s.br}))}function be(){const{mode:e}=(0,u.Fg)();return(0,W.gh)({theme:"light"===e?"dark":"light"})}function he(e){let{[me]:t,isInverted:i}=e;window.__c={n:"InverseThemeProvider"};const{mode:o}=be(),n=function(e){const t=(0,s.O7)();return(0,l.useMemo)((()=>{const i=new H.Z;return i.setState({mode:e}),{...t,ThemeStore:i,ThemeModeStore:new Y.Z((()=>i.state.mode),{debugName:"UIDocComponents.ThemeModeStore"})}}),[t,e])}(o);return i?a()(z.EnvironmentContextProvider,{value:n},void 0,t):(0,j.jD)(t)}const ye=i(85).L_E,we=i(85).j7K,Ie=i(85).D7I,Se=i(85).rpY,_e=i(85).y79,ke=i(85).p1r,Fe=i(85).KOz,xe=i(85).jkI,Ze=i(85).H1U,Ce=i(85).XNW,Pe=i(85).nLZ,De=i(85).icY,Te=i(85).Dd5,Ue=i(85).nm$,Me=i(85).ChN,Ve=i(85).Exd,Le=i(85).MQM,Be=i(85).VUQ,Re=i(85).BQ6,Ne=i(85).PXg,Ae=i(85).h8z,Ee=i(85).UPJ,Oe=i(85).EMU,Ke=i(85).sM5,ze=i(85).PLy,Ye=i(85).ydX,He=i(85).gnz,We=i(85).JgF,je=i(85).Zij,$e=i(85).g7N,Ge=i(85).nx5;function Je(e){window.__c={n:"DeveloperIntegrationLab"};const t=(0,s.O7)(),{integrationPointer:i}=e,o=(0,d.VK)((()=>x.default.state.currentUserStore),[]),n=(0,d.VK)((()=>{if(o)return o.getRecordValue(i)}),[o,i]),r=(0,c.V)({value:n,waitTimeInMs:5e3});return"pending"===r.status?a()(P.Z,{}):"rejected"!==r.status&&(0,m.VM)(r.value)?a()(A.Z,{className:S.developerIntegrationLab,[je]:a()(w.FormattedMessage,{id:"developerIntegrationLab.title.label",[Ge]:"Link Preview Lab"}),subtitle:a()(w.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",[Ge]:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>I.V2(t,i),navigateBackMessage:a()(w.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",[Ge]:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",[$e]:200}},void 0,a()(qe,{starterIntegration:r.value})):a()(N.Z,{})}function qe(e){let{starterIntegration:t}=e;const[i,o]=l[We](""),[n,r]=l[We](k.Az),[s,d]=l[We](k.SV),[u,c]=l[We](k.VR()),[p,m]=l[We](k.nZ),[v,g]=l[We](k.e_),[f,b]=l[We](k.P4),[y,w]=l[We](t);return l.useEffect((()=>{const{original_url_domains:e,development_url_domains:i,[He]:o}=t.info,n=(null==e?void 0:e[0])||(null==i?void 0:i[0]);if(n&&m(n),null!=o&&o[0]){const{regex:e,attributes:t,sample_urls:i}=null==o?void 0:o[0];g(e);const n=t.map(h.Ah);b(n);const a=null==i?void 0:i[0];a&&r(a)}}),[t]),l.useEffect((()=>{w((e=>k.Hx({domain:p,regex:v,attributes:f,currentIntegration:e})))}),[p,v,f]),l.useEffect((()=>{C.Z.setState({loaded:!0,loading:!1,userId:void 0,spaceId:k.C,integrations:[y],[Ye]:[],bots:[],[ze]:[],webhookSubscriptions:[]})}),[y]),a()("div",{[Re]:{[Ke]:Oe,[Ee]:Ae}},void 0,a()(Qe,{[Re]:{[Oe]:1,[Ne]:12},setErrorMessage:o,rootUrl:n,setRootUrl:r,relatedUrisToAttributes:u,setRelatedUrisToAttributes:c,domain:p,setDomain:m,regexPattern:v,setRegexPattern:g,regexAttributes:f,setRegexAttributes:b,rootAttributes:s,setRootAttributes:d}),a()(tt,{[Re]:{[Oe]:1},rootUrl:n,rootAttributes:s,relatedUrisToAttributes:u,[Be]:y,[Le]:i}))}function Qe(e){window.__c={n:"ConfigurationInput"};const{[Re]:t,rootUrl:i,setRootUrl:o,domain:n,setDomain:r,regexPattern:l,setRegexPattern:s,regexAttributes:u,setRegexAttributes:c,rootAttributes:p,setRootAttributes:m,relatedUrisToAttributes:g,setRelatedUrisToAttributes:f,setErrorMessage:h}=e,y=(0,d.VK)((()=>k.TG(p)),[p]);return a()("div",{[Re]:t},void 0,a()(De,{},void 0,a()("div",{[Re]:{[Ve]:15,[Me]:b.Z[Me].medium}},void 0,a()(w.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",[Ge]:"Pasted URL to Preview"})),a()(M.Z,{value:i,[Te]:e=>o(e[Ue].value)})),a()(it,{[je]:a()(w.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",[Ge]:"Manage Regex Configuration"}),[Re]:{[Pe]:12}},void 0,a()(De,{[Re]:{[Pe]:12}},void 0,a()("div",{[Re]:{[Ve]:15,[Me]:b.Z[Me].medium}},void 0,a()(w.FormattedMessage,{id:"developerIntegrationLab.domain.label",[Ge]:"Domain"})),a()(M.Z,{value:n,[Te]:e=>r(e[Ue].value)})),a()(nt,{regexPattern:l,setRegexPattern:s,setErrorMessage:h}),a()(De,{[Re]:{[Pe]:12}},void 0,a()("div",{[Re]:{[Ve]:15,[Me]:b.Z[Me].medium}},void 0,a()(w.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",[Ge]:"Regex Attributes"})),a()(ot,{value:u,[Te]:c,validationType:v.$1,setErrorMessage:h}))),a()(it,{[je]:a()(w.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",[Ge]:"Unfurl response payload"}),[Re]:{[Pe]:12}},void 0,a()(ot,{value:p,[Te]:m,validationType:v.$1,setErrorMessage:h})),a()(it,{[je]:a()(w.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",[Ge]:"Related unfurl response payloads"}),[Re]:{[Pe]:12}},void 0,y.map((e=>{const t=g[e];return a()(it,{[je]:e,[Re]:{[Pe]:12,[Ce]:12}},e,t?a()(ot,{value:t,[Te]:t=>{f({...g,[e]:t})},validationType:v.$1,setErrorMessage:h}):a()(w.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",[Ge]:"No related attributes found."}))}))))}const Xe=["preview","mention","hover"],et=["authenticate","error","update","loaded"];function tt(e){const{[Re]:t,rootUrl:i,rootAttributes:o,relatedUrisToAttributes:n,[Be]:r,[Le]:s}=e,[d,u]=l[We]("preview"),[c,p]=l[We]("loaded");return a()("div",{[Re]:t},void 0,a()("div",{[Re]:{[Ke]:Oe,[Ze]:xe}},void 0,a()("div",{[Re]:{[Ne]:12}},void 0,"Preview type:"),a()(rt,{[je]:d,[Fe]:Xe,onSelectOption:e=>u(e)}),a()("div",{[Re]:{[Ce]:12,[Ne]:12}},void 0,"Preview state:"),a()(rt,{[je]:c,[Fe]:et,onSelectOption:e=>p(e)})),a()("div",{[Re]:{[Pe]:12,maxWidth:600}},void 0,a()(at,{previewType:d,previewState:c,rootUrl:i,rootAttributes:o,relatedUrisToAttributes:n,[Be]:r,[Le]:s})))}function it(e){const[t,i]=l[We](!1);return a()("div",{[Re]:e[Re]},void 0,a()(D.Z,{onClick:()=>i(!t),[Re]:{[Ke]:Oe,[Ze]:xe}},void 0,p.Z.triangle({width:"0.6875em",height:"0.6875em",[ke]:"transform 200ms ease-out",transform:`rotateZ(${t?180:90}deg)`,[Ne]:4}),e[je]),t&&e.children)}function ot(e){const{value:t,[Te]:i,validationType:o,setErrorMessage:n}=e,[r,s]=l[We](JSON.stringify(t,null,2));return a()(M.Z,{format:M.B.ExtraLarge,inputStyle:{[Ve]:14,lineHeight:"18px",height:500},textarea:!0,value:r,[Te]:e=>{const t=e[Ue].value;s(t);const r=_.getValidJSON(t);if(void 0===r)n("Could not parse JSON object input.");else{const e=(0,y.Gu)(o,r);e?n(e.message):(n(""),i(r))}}})}function nt(e){const{regexPattern:t,setRegexPattern:i,setErrorMessage:o}=e,[n,r]=l[We](t);return a()(De,{[Re]:{[Pe]:12}},void 0,a()("div",{[Re]:{[Ve]:15,[Me]:b.Z[Me].medium}},void 0,"Regex Pattern"),a()(M.Z,{value:n,[Te]:e=>{const t=e[Ue].value;r(t);try{new RegExp(t);i(t),o("")}catch(n){o("Invalid Regex.")}}}))}function rt(e){window.__c={n:"PreviewDropdownButton"};const{[je]:t,[Fe]:i,onSelectOption:o}=e,[r,s,u]=(0,d.AF)(void 0,Z.Z);return a()(U.ZP,{popupType:U.Z4.Popup,buttonPopupStore:u,renderOrigin:()=>a()(B.Z,{onClick:()=>s({...r,open:!0})},void 0,t,p.Z.chevronDown({width:10,[Pe]:4,[Ce]:4})),[Se]:()=>a()(V.Z,{menuType:F.og.Popup},void 0,a()(L.Z,{type:L.i[_e],sections:[{key:t,items:i.map((e=>({key:e,action:()=>{o(e),s({...r,open:!1})},[Se]:t=>l[Ie](T.Z,n()({},t,{[je]:e}))}))),[Se]:e=>l[Ie](R.Z,e)}],[we]:void 0}))})}function at(e){window.__c={n:"RenderedPreviewWithError"};const{previewType:t,previewState:i,rootUrl:o,rootAttributes:n,relatedUrisToAttributes:r,[Be]:d,[Le]:c}=e,[p,m]=l[We](""),v=(0,s.O7)(),[g,f]=l[We]();l.useEffect((()=>{const e=k.rn({environment:v,rootUrl:o,rootAttributes:n,relatedUrisToAttributes:r,[Be]:d});"error"in e?m(e.error):(m(""),f(e))}),[v,o,n,r,d]),l.useEffect((()=>{m(c)}),[c]);const b=(0,u.yK)((e=>({error:{[Pe]:12,[$e]:12,padding:"12px 24px",[Ne]:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return l[Ie](l.Fragment,null,p&&a()("div",{[Re]:b.error},void 0,p," "),g&&l[Ie](l.Fragment,null,a()(ve,{isInverted:!1,showInsets:!1,showSize:!1},void 0,a()(st,{previewType:t,previewState:i,previewStores:g})),a()(ve,{isInverted:!0,showInsets:!1,showSize:!1},void 0,a()(st,{previewType:t,previewState:i,previewStores:g}))))}function lt(e){window.__c={n:"RenderedHoverPreview"};const{previewStores:t}=e,i=(0,u.yK)((e=>({[ye]:{borderRadius:4,boxShadow:e.lightBoxShadow}})),[]),o=(0,d.VK)((()=>{const e=t.previewBlockStore.id;if(!e)return;return{annotation:(0,g.createExternalObjectInstanceAnnotation)(e),store:t.inlineBlockStore,token:void 0}}),[t.previewBlockStore,t.inlineBlockStore]);return o?a()("div",{[Re]:i[ye]},void 0,a()(O.D,{isHoveredTokenEditable:!0,state:o})):null}function st(e){const{previewType:t,previewState:i,previewStores:o}=e;return"preview"===t?a()(E.Z,{store:"authenticate"===i?o.emptyInstanceBlockStore:o.previewBlockStore,disabled:!1,forceActionForUIDoc:"loaded"===i?void 0:i}):"mention"===t?a()(K.Z,{store:"authenticate"===i?o.emptyInlineBlockStore:o.inlineBlockStore,disabled:!1}):"hover"===t?l[Ie](lt,e):void(0,f.unreachable)(t)}},29823:(e,t,i)=>{i.d(t,{Z:()=>p});var o=i(77094),n=i.n(o),r=(i(67294),i(480)),a=i(3909),l=i(5366),s=i(8981),d=i(43250),u=i(22131);const c=i(85).nx5;function p(){window.__c={n:"DeveloperIntegrationNotFound"};const e=(0,r.O7)();return n()(u.Z,{className:d.developerIntegrationNotFound,title:n()(l.FormattedMessage,{id:"developerIntegrationNotFound.title.label",[c]:"Not Found"}),subtitle:n()(l.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",[c]:"This integration doesn't exist."}),onNavigateBack:()=>s.A1(e),icon:a.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}},12265:(e,t,i)=>{i.r(t),i.d(t,{default:()=>H});var o=i(77094),n=i.n(o),r=i(67294),a=i(480),l=i(81954),s=i(63123),d=i(15070),u=i(59054),c=i(39248),p=i(77420),m=i(44312),v=i(49953),g=i(9844),f=i(90468),b=i(70043),h=i(97880),y=i(5366),w=i(50906),I=i(54642),S=i(8981),_=i(43250),k=i(70764),F=i(12982),x=i(38755),Z=i(79315),C=i(22230),P=i(39098),D=i(3403),T=i(91754),U=i(31278),M=i(79500),V=i(43113),L=i(29823),B=i(22131),R=i(42402);const N=i(85).g7N,A=i(85).nx5,E=i(85).LFy,O=i(85).Wku,K=i(85).nSw,z=i(85).zkl,Y=i(85).DgF;function H(e){window.__c={n:"DeveloperIntegrationView"};const{botOrIntegrationPointer:t}=e,i=(0,a.O7)(),o=(0,l.VK)((()=>Z.default.state[Y]),[]),H=(0,l.qz)(void 0,C.Z),W=(0,l.VK)((()=>H.getState().type),[H]),j=(0,l.VK)((()=>H.getState().startingRecord),[H]),$=(0,l.VK)((()=>H.getState().status),[H]),G=(0,l.VK)((()=>{const e=(0,k.QS)();return(0,F.H)(W,e)}),[W]),[J,q]=(0,r.useState)("secrets"),Q="published"===$&&"secrets"!==J,X=(0,l.VK)((()=>{if(t&&o){const e=t[z],i=o[K](t);if(i){const n=e===g.K2&&((0,d.Be)(i[O])||(0,d.Uz)(i[O]))&&o[K]({[z]:v.r9,id:t.id});return{botOrIntegrationRecord:{value:i,[z]:t[z]},maybeExternalAuthRecord:n?{[z]:v.r9,value:n}:void 0}}}}),[o,t]),[{value:ee}]=(0,u.r5)((async()=>{if(!o||!X||X.botOrIntegrationRecord[z]!==g.K2)return[];const e=X.botOrIntegrationRecord.value.id,t=await I.getIntegrationDomainVerifications(i,{integrationId:e});if("success"===t.type){return t.data.verificationIds.map((e=>o[K]({[z]:m.Jd,id:e}))).filter(h.isDefined)}if("failed"===t.type)throw t.error;return(0,h.unreachable)(t)}),[i,X,o]);(0,r.useEffect)((()=>{if(!X)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=X;H.initializeNewForm(e,t,ee||[]),w.trackDeveloperIntegrationsViewVisit(i,{[z]:e[z]})}),[H,i,X,ee]);const te=(0,l.VK)((()=>{if(!o||!X)return;const{botOrIntegrationRecord:e}=X;if(e.value[E]!==f.bx)return;const t=P.H2.createChildStore(o,{id:e.value.parent_id,[z]:e.value[E]});return(0,x.rn)(i,t)}),[X,o,i]),ie=(0,s.V)({value:j});if("rejected"===ie.status||!t)return n()(L.Z,{});if("pending"===ie.status)return n()(D.Z,{});const oe=ie.value,ne=i.currentUser.id;if(oe[z]===g.K2&&oe.value.parent_id!==ne)return n()(L.Z,{});const re=oe.value.name,ae=oe[z]===p.cZ?oe.value.icon:oe.value.info.icon,le={id:oe.value.id,[z]:oe[z]},se=ae?{pointer:le,icon:ae}:void 0;return n()(B.Z,{className:_.developerIntegrationView,title:re,subtitle:n()(y.FormattedMessage,{id:"developerIntegrationView.subtitle.genericLabel",[A]:"Review and edit integration information."}),onNavigateBack:()=>S.A1(i),icon:n()(U.Z,{disabled:!0,icon:se,title:re,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:b.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:n()(M.T,{supportedPages:G,selectedPage:J,setSelectedPage:q,integrationFormStore:H})},void 0,Q&&n()(T.Z,{type:T.$.Red,isMobile:!1,style:{[N]:20}},void 0,n()(y.FormattedMessage,{id:"developerIntegrationView.publishedIntegrationWarning.label",[A]:"Saving changes to your integration will immediately update its listing on Notion's <integrationgallerylink>Integration Gallery.</integrationgallerylink> ",values:{integrationgallerylink:e=>n()(R.Z,{disableHover:!0,href:(0,c.E)(oe.value.id,oe.value.name||"")},void 0,e)}})),n()(V.Z,{integrationFormStore:H,currentPage:J,setSelectedPage:q,spaceName:te}))}},50526:(e,t,i)=>{i.d(t,{Z:()=>U});var o=i(97464),n=i.n(o),r=i(77094),a=i.n(r),l=i(67294),s=i(480),d=i(81954),u=i(3909),c=i(19889),p=i(97880),m=i(7928),v=i(70782),g=i(33929),f=i(87279),b=i(79315),h=i(64921),y=i(52275),w=i(78140),I=i(32163),S=i(44532),_=i(72495),k=i(64369),F=i(45653);const x=i(85).FqN,Z=i(85).D7I,C=i(85).wgE,P=i(85).NF1,D=i(85).Sgw,T=i(85).Dd5;function U(e){let{[T]:t}=e;window.__c={n:"DeveloperIntegrationsAccountSwitcher"};const i=(0,s.O7)(),[o,n]=(0,l.useState)(!1),r=()=>n(!1),u=(0,d.VK)((()=>b.default.state.currentUserStore),[]),m=(0,d.VK)((()=>u?i.currentUser.loggedInUserIds.map((e=>u.getRecordModel({table:c.KJ,id:e}))).filter(p.isDefined):[]),[u,i]),v=(0,d.VK)((()=>null==u?void 0:u.getValue()),[u]);return v?a()(S.ZP,{popupType:S.kQ.Popup,origin:a()(M,{onClick:()=>n(!0),currentUserValue:v}),render:()=>a()(V,{users:m,[D]:v.id,[T]:t,onClose:r}),placementToOrigin:S.ZP.Placement.Bottom,alignmentToOrigin:S.ZP.Alignment.End,onDismiss:r,open:o}):null}function M(e){const{onClick:t,currentUserValue:i}=e;return a()("div",{style:{marginLeft:18}},void 0,a()(h.Z,{onClick:t,style:{[P]:"100%"}},void 0,a()(F.Z,{userValue:i,size:32})))}function V(e){window.__c={n:"OpenedSwitcherMenu"};const t=(0,s.O7)(),{users:i,[D]:o,onClose:r,[T]:d}=e;return a()(w.Z,{menuType:f.og.Popup},void 0,a()(I.Z,{type:I.i.Vertical,initialFocus:void 0,sections:[{key:"developer-integration-accounts",items:i.map((e=>({key:e.id,action:async()=>{const i=await v.x({[C]:t,newCurrentUserId:e.id});null==d||d(i),r()},render:t=>l[Z](L,n()({},t,{user:e,[x]:e.id===o}))}))),render:e=>l[Z](_.Z,e)}]}))}const L=l.forwardRef(((e,t)=>{window.__c={n:"AccountMenuItem"};const{user:i,[x]:o,...r}=e,s=g.default.getIntl(),c=(0,d.VK)((()=>(0,m.Nz)(s,i)),[s,i]),p=(0,d.VK)((()=>i.email),[i]);return l[Z](y.Z,n()({},r,{ref:t,title:a()(k.Z,{className:"notranslate"},void 0,c),icon:a()(F.Z,{userValue:i,size:28}),caption:a()(k.Z,{isSmall:!0},void 0,p),right:o&&u.Z.thinCheck({width:12,height:12})}))}))},22131:(e,t,i)=>{i.d(t,{Z:()=>De});var o=i(77094),n=i.n(o),r=i(67294),a=i(13991),l=i(41892),s=i(8848),d=i(3909),u=i(89101),c=i(82990),p=i(5366),m=i(8981),v=i(43250),g=i(34859),f=i(64921),b=i(16354),h=i(89728),y=i(18647),w=i(50526),I=i(81954),S=i(70043),_=i(51454),k=i(38381),F=i(74194),x=i(53953);const Z=i(85).OtN,C=i(85).nx5,P=i(85).PXg,D=i(85).FOQ,T=i(85).nLZ,U=i(85).cZW,M=i(85).g7N,V=i(85).IaW,L=i(85).ChN,B=i(85).$bT,R=i(85).EMU,N=i(85).d7L,A=i(85).D7I,E=i(85).Scd,O=i(85).Exd,K=i(85).NF1;function z(){window.__c={n:"DeveloperIntegrationsDialog"};const e=(0,I.Kw)(k.Z);return n()(x.Z,{open:e.open,overlayZIndex:_.dialogModal,onDismiss:()=>{k.Z.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",[K]:3,padding:"24px 32px",width:336,[O]:16,boxShadow:S.Z.frontDialogShadow,[E]:s.ZP.white},render:()=>r[A](Y,e)})}function Y(e){const[t,i]=r.useState(""),[o,a]=r.useState(!1);if(!e.open)return null;const{title:l,message:d,onConfirm:u}=e,m=i=>{const{deleteIntegrationIfConfirmationInputMatch:o}=i;e[N]&&e.deleteMatchText!==t?a(!0):o&&(u(),k.Z.reset())};return n()("div",{style:{display:R,[B]:"column"}},void 0,n()("div",{style:{[O]:16,[L]:c.Z[L].semibold}},void 0,l),n()("div",{style:{[O]:14,color:s.ZP[V],margin:"8px 0 16px"}},void 0,d),e[N]&&n()("div",{style:{[M]:12}},void 0,n()(F.Z,{autoFocus:!0,[U]:e.deleteMatchText,value:t,onChange:t=>{const n=t.target.value;o&&e.deleteMatchText===n&&a(!1),i(n)},onSubmit:()=>m({deleteIntegrationIfConfirmationInputMatch:!1})}),o&&n()("div",{style:{[T]:4,color:s.ZP.frontRed,[O]:12}},void 0,e.deleteMatchError)),n()("div",{style:{display:R}},void 0,n()(f.Z,{onClick:()=>{k.Z.reset()},style:{...W[D],border:`1px solid ${s.ZP.uiLightBorder}`,[P]:8,[O]:15}},void 0,n()(p.FormattedMessage,{id:"developerIntegration.confirmationModal.cancelLabel",[C]:"Cancel"})),n()(H,{onSubmit:()=>m({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e[N]||e.isWarning,confirmationMessage:e.confirmationMessage})))}function H(e){const{onSubmit:t,confirmationMessage:i,isWarning:o}=e;return n()(f.Z,{onClick:t,style:{...W[D],[E]:o?s.ZP.frontPrimaryButtonBackground:s.ZP.blue,color:s.ZP.white,[O]:15},hoveredStyle:{[Z]:o?s.ZP.frontPrimaryButtonBackgroundHovered:s.ZP.frontBlueButtonHoveredBackground},pressedStyle:{[Z]:o?s.ZP.frontPrimaryButtonBackgroundPressed:s.ZP.frontBlueButtonPressedBackground}},void 0,i)}const W={[D]:{padding:6,[K]:3,[R]:1,textAlign:"center"}};var j=i(36360);const $=i(85).Tk1,G=i(85).$Vg,J=i(85).ChN,q=i(85).Oc6,Q=i(85).IaW,X=i(85).wNq,ee=i(85).Xg,te=i(85).P29,ie=i(85).as7,oe=i(85).O1L,ne=i(85).lsp,re=i(85).Fdn,ae=i(85).Pbu,le=i(85).qpZ,se=i(85).PG2,de=i(85).Exd,ue=i(85).FOQ,ce=i(85).rps,pe=i(85).$bT,me=i(85).g7N,ve=i(85).nLZ,ge=i(85).h8z,fe=i(85).UPJ,be=i(85).Dd5,he=i(85).BQ6,ye=i(85).XNW,we=i(85).jkI,Ie=i(85).H1U,Se=i(85).EMU,_e=i(85).sM5,ke=i(85).e5W,Fe=i(85).xm3,xe=i(85).nx5,Ze=i(85).Yzm,Ce=i(85).AEv,Pe=i(85).lGm;function De(e){window.__c={n:"DeveloperIntegrationsContainer"};const{[Pe]:t,title:i,[Ce]:o,onNavigateBack:r,navigateBackMessage:a,children:s,icon:c,sideContent:I,innerContainerStyles:S}=e,_=(0,p.useIntl)();return n()(j.Z,{title:_[Ze]({id:"developerIntegrationsLayout.document.title",[xe]:"My integrations | Notion Developers"})},void 0,n()(y.Z,{[Pe]:t,[he]:Te.scroller,type:g.Z.Y},void 0,n()(z,{}),n()("div",{[Pe]:v.developerIntegrationsContainer,[he]:Te.topBar},void 0,n()("div",{},void 0,n()(b.Z,{href:u._j.developerPortal,external:!0},void 0,n()("img",{src:l.Z[ke][Fe].notionDevsLogoGaSvg}))),n()("div",{[he]:{[_e]:Se,[Ie]:we}},void 0,n()(b.Z,{[he]:{[_e]:Se,[ye]:-6},href:u._j.developerPortal,external:!0},void 0,n()(h.Z,{icon:d.Z.alias,isSmall:!0},void 0,"View documentation")),n()(w.Z,{[be]:e=>{m.A1(e)}}))),n()("div",{[he]:{...Te.innerContainer,...S}},void 0,n()("div",{[he]:{[_e]:Se,[fe]:ge,[ve]:80,[me]:80}},void 0,n()("div",{[he]:{[_e]:Se,[pe]:ce,width:"66%",[fe]:we}},void 0,n()(f.Z,{[he]:{...Te[ue],...!r&&{[_e]:"none"}},[se]:r},void 0,n()("div",{[he]:{...Te.buttonContent,[de]:20}},void 0,d.Z.historyBack(Te.arrowIcon),n()("div",{[he]:{[ye]:12}},void 0,a||n()(p.FormattedMessage,{id:"developerIntegrationsLayout.backButton.label",[xe]:"My integrations"})))),n()("div",{[he]:Te[le]},void 0,i),n()("div",{[he]:Te[Ce]},void 0,o)),n()("div",{[he]:{[_e]:Se,[Ie]:"flex-end",[fe]:we,[Se]:1}},void 0,c)),I?n()("div",{[he]:Te.gridContainer},void 0,n()("div",{[he]:Te.leftColumn},void 0,I),n()("div",{[he]:Te.rightColumn},void 0,s)):s),n()("footer",{[he]:Te.footerContainer},void 0,n()(ne,{[he]:Te.footerColophon},void 0,n()("h1",{[he]:Te.footerLogo},void 0,n()("img",{src:l.Z[ke][Fe].notionFooterLogoSvg})),n()("h6",{[he]:Te.footerCopy},void 0,ae),n()("h6",{[he]:Te.footerCopy},void 0,`©${(new Date).getFullYear()} Notion Labs, Inc.`),n()(b.Z,{external:!0,href:u._j.termsAndPrivacy,[he]:Te[re]},void 0,"Terms & Privacy")),n()("nav",{[he]:{...Te.footerNav,[oe]:7}},void 0,n()("h5",{[he]:Te[ie]},void 0,"Developers"),n()(b.Z,{external:!0,href:"https://developers.notion.com/docs",[he]:Te[re]},void 0,"Guides"),n()(b.Z,{external:!0,href:"https://developers.notion.com/reference",[he]:Te[re]},void 0,"API Reference"),n()(b.Z,{external:!0,href:u._j[te],[he]:Te[re]},void 0,"My integrations"),n()(b.Z,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",[he]:Te[re]},void 0,"FAQs"),n()(b.Z,{external:!0,href:u._j.developerTerms,[he]:Te[re]},void 0,"Developer terms")),n()("nav",{[he]:Te.footerNav},void 0,n()("h5",{[he]:Te[ie]},void 0,"Notion"),n()(b.Z,{external:!0,href:u._j[ee],[he]:Te[re]},void 0,"Product"),n()(b.Z,{external:!0,href:u._j.teams,[he]:Te[re]},void 0,"Teams"),n()(b.Z,{external:!0,href:u._j[X],[he]:Te[re]},void 0,"Enterprise"),n()(b.Z,{external:!0,href:u._j.blog,[he]:Te[re]},void 0,"Blog"),n()(b.Z,{external:!0,href:u._j.careers,[he]:Te[re]},void 0,"Careers")),n()("nav",{[he]:Te.footerNav},void 0,n()("h5",{[he]:Te[ie]},void 0,"Social"),n()(b.Z,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",[he]:Te[re]},void 0,"Developer newsletter"),n()(b.Z,{external:!0,href:"http://twitter.com/notionapi",[he]:Te[re]},void 0,"Twitter")))))}const Te={[re]:{color:s.ZP[Q],cursor:"pointer",textDecoration:"none",[_e]:"block",[me]:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",[me]:16},footerLogo:{margin:"0 auto 20px",[de]:0,[_e]:"block"},[ie]:{fontFamily:c.Z[q](a.SP).mono,[J]:c.Z[J].medium,margin:"0 auto 8px",[me]:"1.1em",[de]:15},footerCopy:{[de]:15,[J]:c.Z[J].regular,lineHeight:"1.5em",color:s.ZP[Q],margin:"0 auto 8px",[me]:"1.1em"},footerContainer:{padding:"70px 30px",[Ie]:G,justifyItems:G,[Se]:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${s.ZP.dividerColor}`,[_e]:"grid",[$]:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:s.ZP.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",[_e]:Se,[Ie]:we,[ve]:13,[me]:10,[fe]:ge},[le]:{[J]:c.Z[J].bold,fontFamily:c.Z[q](a.SP).sans,[de]:50,color:s.ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},[Ce]:{[J]:c.Z[J].regular,[de]:24,color:s.ZP[Q],letterSpacing:"0.015em"},[ue]:{[_e]:"inline-flex",color:s.ZP[Q],borderRadius:3,padding:6,[de]:15,width:"fit-content"},buttonContent:{[_e]:Se,[Ie]:we},arrowIcon:{width:20,height:20},gridContainer:{[_e]:"grid",[$]:"180px auto",paddingBottom:120,gap:60},leftColumn:{[oe]:1,gridColumnEnd:2},rightColumn:{[oe]:2,gridColumnEnd:3}}},15933:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Re});var o=i(77094),n=i.n(o),r=i(67294),a=i(480),l=i(81954),s=i(63123),d=i(41892),u=i(8848),c=i(59054),p=i(3909),m=i(77420),v=i(9844),g=i(97880),f=i(82990),b=i(63143),h=i(5366),y=i(50906),w=i(54642),I=i(43250),S=i(71776),_=i(77907),k=i(79315),F=i(97122),x=i(89728),Z=i(19889),C=i(70043),P=i(7928),D=i(8981),T=i(39098),U=i(64921),M=i(31278),V=i(97464),L=i.n(V),B=i(87279),R=i(38381),N=i(52275),A=i(78140),E=i(32163),O=i(44532),K=i(72495);const z=i(85).j7K,Y=i(85).D7I,H=i(85).rpY,W=i(85).d7L,j=i(85).wgE,$=i(85).nx5,G=i(85).piI,J=i(85).y79,q=i(85).NF1,Q=i(85).zkl;function X(e){window.__c={n:"DeveloperIntegrationCardPopup"};const{integrationOrBot:t}=e,i=(0,l.VK)((()=>t.name||""),[t]),o=(0,a.O7)(),s=(0,l.VK)((()=>k.default.state.currentUserStore),[]),[d,c]=r.useState(!1),[m,v]=(0,l.AF)(R.Z);if(!s)return null;const g=(0,T.Kv)(s,{id:t.id,[Q]:t[Q]});return n()(O.ZP,{popupType:O.ZP.PopupType.Popup,open:d,placementToOrigin:O.ZP.Placement.Bottom,alignmentToOrigin:O.ZP.Alignment.End,onDismiss:()=>c(!1),origin:n()(U.Z,{onClick:()=>{c(!0),y.trackDeveloperIntegrationsOpenCardDropdownClick(o,{[Q]:g[Q]})},style:{padding:"3px 6px",[q]:3}},void 0,p.Z.dots({width:18,height:18})),[H]:()=>n()(A.Z,{menuType:B.og.Popup},void 0,n()(E.Z,{type:E.i[J],[z]:0,sections:[{key:"integration-card-dropdown",items:[{key:"delete-integration",action:()=>{y.trackDeveloperIntegrationsDeleteClick(o,{[Q]:g[Q]}),v({open:!0,title:n()(h.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationTitle",[$]:"Delete {integrationName}?",values:{[G]:i}}),message:n()(h.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationMessage",[$]:"This public integration will be deactivated and removed from all workspaces it has been added to. To confirm, type in the name of this integration."}),confirmationMessage:n()(h.FormattedMessage,{id:"developerIntegration.confirmationModal.deleteLabel",[$]:"Delete"}),onConfirm:async()=>{await D.uU({[j]:o,recordStore:g})},[W]:!0,deleteMatchText:i,deleteMatchError:n()(h.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationError",[$]:"Input did not match integration name."})})},[H]:e=>r[Y](N.Z,L()({},e,{title:n()(h.FormattedMessage,{id:"developerIntegrationCard.dropdown.delete",[$]:"Delete this integration"}),style:{color:u.ZP.frontRed}}))}],[H]:e=>r[Y](K.Z,e)}]}))})}const ee=i(85).nAm,te=i(85).QZR,ie=i(85).NF1,oe=i(85).AEP,ne=i(85).Scd,re=i(85).IY7,ae=i(85).Hco,le=i(85).X_m,se=i(85).PG2,de=i(85).Exd,ue=i(85).XNW,ce=i(85).LlE,pe=i(85).jkI,me=i(85).H1U,ve=i(85).h8z,ge=i(85).UPJ,fe=i(85).BQ6,be=i(85).EjX,he=i(85).nx5;function ye(e){window.__c={n:"DeveloperIntegrationCard"};const{integrationOrBot:t}=e,i=(0,a.O7)(),o=(0,h.useIntl)(),s=(0,l.VK)((()=>t.table===v.K2?t.getInfo().tagline||n()(h.FormattedMessage,{id:"developerIntegrationCard.integrationTagline.placeholder",[he]:"Public integration."}):n()(h.FormattedMessage,{id:"developerIntegrationCard.botTagline.placeholder",[he]:"Internal integration."})),[t]),d=(0,l.VK)((()=>t.table===v.K2?t.getInfo().icon:t.icon),[t]),u=(0,l.VK)((()=>({id:t.id,table:t.table})),[t]),c=(0,l.VK)((()=>k.default.state.currentUserStore),[]),p=(0,l.VK)((()=>{if(!c)return;if(t[be]===c.id)return n()(h.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",[he]:"Created by you"});const e=T.U6.createChildStore(c,{table:Z.KJ,id:t[be]}),i=e.getModel();return e.isReady()&&i?n()(h.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.placeholder",[he]:"Created by {userFullDisplayName}",values:{userFullDisplayName:(0,P.Nz)(o,i)}}):void 0}),[t,o,c]),m=(0,r.useCallback)((()=>{D.V2(i,u)}),[i,u]),g=(0,l.VK)((()=>t.name),[t]);return n()(U.Z,{[fe]:Se.containerCard,[se]:m},void 0,n()("div",{[fe]:Se.innerDetailsContainer},void 0,n()(M.Z,{disabled:!0,icon:d?{pointer:u,icon:d}:void 0,title:g,isEmptyPage:!1,size:48,isLarge:!0,useInvertedColors:!0}),n()("div",{[fe]:Se.name},void 0,g),n()("div",{[fe]:Se.creatorTagline},void 0,p),n()("div",{[fe]:Se.typeTagline},void 0,s)),n()("div",{[fe]:{width:"100%",display:"flex",[ge]:ve,[me]:pe}},void 0,n()(x.Z,{[se]:m,[fe]:{...Se.blueButton,[ce]:8,[ue]:-8,[de]:15}},void 0,n()(h.FormattedMessage,{id:"developerIntegrationsList.viewIntegration.buttonText",[he]:"View integration"})),n()(X,{integrationOrBot:t})))}function we(e){const{[se]:t}=e;return n()(U.Z,{[se]:t,[fe]:{...Se.containerCard,...Se.addNewCard}},void 0,p.Z.plus({width:24,[le]:24,color:u.ZP[ae]}),n()("div",{[fe]:{[le]:12}}),n()(h.FormattedMessage,{id:"developerIntegrationCard.placeholderCard.label",[he]:"Create new integration"}))}function Ie(){return n()(U.Z,{[fe]:{...Se.containerCard,[re]:"none",[ne]:"rgba(0,0,0,0.02)",border:"none"}},void 0,n()("div",{[fe]:Se.innerDetailsContainer},void 0,n()("div",{[fe]:{...Se.placeholderGradient,[oe]:.7,width:48,[le]:48,[ie]:4}}),n()("div",{[fe]:{...Se.name,...Se.placeholderGradient,[oe]:.7,width:"50%",[le]:24}})))}const Se={containerCard:{[re]:C.Z.frontCardShadow,border:`1px solid ${u.ZP.blackWithAlpha(.1)}`,[ne]:u.ZP.white,[le]:240,width:320,[ie]:5,[ce]:24,paddingTop:28,display:"flex",flexDirection:"column",[me]:"flex-start",[ge]:ve},addNewCard:{[ne]:"transparent",[re]:void 0,[me]:pe,[ge]:pe,color:u.ZP[te],fill:u.ZP[te]},innerDetailsContainer:{width:"100%"},name:{fontWeight:f.Z.fontWeight.semibold,[de]:18,marginTop:12,textOverflow:"ellipsis",overflow:ee,whiteSpace:"nowrap"},creatorTagline:{lineHeight:"24px",[de]:14,color:u.ZP[te],maxHeight:72,overflow:ee},typeTagline:{lineHeight:"24px",[de]:14,color:u.ZP[te],maxHeight:72,overflow:ee,marginTop:10},blueButton:{[ce]:0,[ne]:void 0,color:u.ZP.blue,fill:u.ZP.blue},placeholderGradient:{backgroundColor:"rgba(0,0,0,0.05)"}};var _e=i(22131);const ke=i(85).Tk1,Fe=i(85).xm3,xe=i(85).tBn,Ze=i(85).D7I,Ce=i(85).nLZ,Pe=i(85).PG2,De=i(85).XNW,Te=i(85).jx_,Ue=i(85).gGi,Me=i(85).g7N,Ve=i(85).nx5,Le=i(85).DgF,Be=i(85).JgF;function Re(){window.__c={n:"DeveloperIntegrationsList"};const e=(0,a.O7)(),[t,i]=r[Be](!1),[o,s]=r[Be]([]),[d,u]=r[Be]([]),f=(0,l.VK)((()=>k.default.state.currentUserStore),[]),Z=(0,l.VK)((()=>k.default.state[Le]),[]),C=(0,l.VK)((()=>Z?Z.getAdminSpaceStores():[]),[Z]),[P,D]=r[Be]("all");(0,r.useEffect)((()=>{s([]),u([])}),[e.currentUser.id]);const T=(0,r.useCallback)((e=>{const{id:t,table:i}=e;i===m.cZ?u((e=>e.includes(t)?e:e.concat(t))):i===v.K2?s((e=>e.includes(t)?e:e.concat(t))):(0,g.unreachable)(i)}),[]),U=(0,r.useCallback)((()=>{i(!0),y.trackDeveloperIntegrationsNewClick(e)}),[e]);(0,r.useEffect)((()=>{y.trackDeveloperIntegrationSiteVisit(e)}),[e]);const[{status:M,error:V,value:L}]=(0,c.r5)((async()=>{const t=C.map((e=>e.id)),i=await w.getDeveloperBotsAndIntegrations(e,{ownedSpaceIds:t});if("success"===i.type)return i.data;if("failed"===i.type)throw i.error;return(0,g.unreachable)(i)}),[e,C]),B=null==L?void 0:L.integrationIds;(0,r.useEffect)((()=>{B&&s((e=>(0,b.uniq)([...e,...B])))}),[B]);const R=null==L?void 0:L.botIds;(0,r.useEffect)((()=>{R&&u((e=>(0,b.uniq)([...e,...R])))}),[R]);const N=(0,l.VK)((()=>{if(f){return(0,S.GU)({ids:o,table:v.K2,userStore:f}).filter((e=>e.alive))}return[]}),[f,o]),A=(0,l.VK)((()=>{if(f){return(0,S.GU)({ids:d,table:m.cZ,userStore:f}).filter((e=>e.alive))}return[]}),[f,d]),E=(0,l.VK)((()=>(0,S.cr)([...N,...A])),[N,A]),O=(0,l.VK)((()=>({all:E,internal:A,public:N}[P])),[P,E,A,N]);return t?n()(_.LazyDeveloperIntegrationCreateV2,{onClose:()=>i(!1),onSuccess:T}):n()(_e.Z,{className:I.developerIntegrationsList,title:n()(h.FormattedMessage,{id:"developerIntegrationsList.title",[Ve]:"My integrations"}),subtitle:n()(h.FormattedMessage,{id:"developerIntegrationsList.subtitle",[Ve]:"Create, review, and edit development info and credentials."}),icon:n()(Ae,{}),sideContent:r[Ze](r[xe],null,n()(F.h,{[Pe]:U,styles:{[Me]:12,width:Ue}},void 0,p.Z.plus({width:16,height:16,fill:Te}),n()("div",{style:{[De]:8}},void 0,n()(h.FormattedMessage,{id:"developerIntegrationsList.addNewButton.label",[Ve]:"New integration"}))),n()("div",{style:{[Ce]:8}},void 0,S.$Z.map((t=>n()("div",{},t,n()(x.Z,{[Pe]:()=>{D(t),y.trackDeveloperIntegrationsFilterClick(e,{type:t})},isSmall:!0,style:{...Oe.filterButton,...t===P&&Oe.selectedFilterButton}},void 0,Ne[t]))))))},void 0,n()(Ee,{isLoading:!f||"pending"===M||"idle"===M,error:V,integrationOrBotRecords:O,onCreateNewClick:U}))}const Ne={all:n()(h.FormattedMessage,{id:"developerIntegrationsList.allFilter.label",[Ve]:"View all"}),internal:n()(h.FormattedMessage,{id:"developerIntegrationsList.internalFilter.label",[Ve]:"Internal"}),public:n()(h.FormattedMessage,{id:"developerIntegrationsList.publicFilter.label",[Ve]:"Public"})};function Ae(){return n()("img",{alt:"Funky build icon",src:d.Z.images[Fe].funkyManagementIconPng,style:{height:130,width:130}})}function Ee(e){window.__c={n:"CardGrid"};const{isLoading:t,error:i,integrationOrBotRecords:o,onCreateNewClick:a}=e,{status:l}=(0,s.V)({value:o,validateLoaded:e=>e.length>0});return i?n()("div",{style:Oe.error},void 0,i.message):n()("div",{style:{display:"grid",[ke]:"1fr 1fr",gridAutoRows:"auto",gap:28,minHeight:508}},void 0,"pending"===l||t?r[Ze](r[xe],null,n()(Ie,{}),n()(Ie,{}),n()(Ie,{})):r[Ze](r[xe],null,o.map((e=>n()(ye,{integrationOrBot:e},e.id))),n()(we,{[Pe]:a})))}const Oe={filterButton:{fontSize:15,height:28,[Ce]:4,color:u.ZP.frontTextLight,width:Ue},selectedFilterButton:{color:u.ZP.frontText,fontWeight:f.Z.fontWeight.medium},error:{color:u.ZP.frontRed}}},36360:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(83355);class n extends o.Z{willMount(e){document.title=e.title}willUpdate(e){document.title=e.title}renderComponent(){return this.props.children}}n.displayName="DocumentTitle";const r=n},46978:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(77094),n=i.n(o),r=i(67294),a=i(24405);const l=i(85).C_1,s=i(85).L97;function d(e,t){let{isSelected:i}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:o,dotStyle:d}=(0,a.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:i?e.blueColor:e[s],border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e[l],transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return r.createElement("div",{ref:t,style:o},n()("div",{style:d}))}const u=r.forwardRef(d)},97122:(e,t,i)=>{i.d(t,{h:()=>d});var o=i(77094),n=i.n(o),r=(i(67294),i(8848)),a=i(82990),l=i(64921);const s=i(85).Scd;function d(e){const{onClick:t,children:i,disabled:o}=e;return n()(l.Z,{onClick:t,style:{...u.button,...e.styles||{}},hoveredStyle:u.hovered,pressedStyle:u.pressed,disabled:o},void 0,i)}const u={button:{[s]:r.ZP.frontBlackButtonBackground,color:r.ZP.white,fill:r.ZP.white,display:"inline-flex",alignItems:"center",borderRadius:3,padding:"6px 18px",fontSize:15,height:36,fontWeight:a.Z.fontWeight.medium},hovered:{[s]:r.ZP.frontBlackButtonBackgroundHovered},pressed:{[s]:r.ZP.frontBlackButtonBackgroundPressed}}},12982:(e,t,i)=>{i.d(t,{sY:()=>Pe,mP:()=>Te,vb:()=>Ue,H:()=>Me,aP:()=>Ve,m0:()=>Le,Z6:()=>Be,Xr:()=>Ne,tm:()=>Ae,Qo:()=>Ee,fP:()=>Oe,yb:()=>Ye,x6:()=>He,hl:()=>je,oX:()=>$e,_R:()=>Ge,w8:()=>Je,bK:()=>qe,hs:()=>Qe});var o=i(77094),n=i.n(o),r=i(96486),a=i.n(r),l=(i(67294),i(33728)),s=i(21202),d=i(90468),u=i(97880),c=i(44876),p=i(64002),m=i(5366),v=i(95477),g=i(81236),f=i(39098),b=i(91924),h=i(43348),y=i(91996),w=i(65270),I=i(84210),S=i(33929),_=i(33665);const k=i(85).BXb,F=i(85).ivl,x=i(85).r5K,Z=i(85).plY,C=i(85).gnz,P=i(85).v32,D=i(85).kzm,T=i(85).br2,U=i(85).Wnn,M=i(85).OI,V=i(85).TLr,L=i(85).wgE,B=i(85).HFH,R=i(85).nC_,N=i(85).fol,A=i(85).nSN,E=i(85).iD5,O=i(85).PwI,K=i(85).F4o,z=i(85).e1X,Y=i(85).sfC,H=i(85).ueK,W=i(85)._tk,j=i(85).dcn,$=i(85).pcd,G=i(85).kwU,J=i(85).HG1,q=i(85).MFQ,Q=i(85).L1A,X=i(85).egv,ee=i(85).H6R,te=i(85).aM5,ie=i(85).T04,oe=i(85).LOo,ne=i(85).Vhk,re=i(85).QvU,ae=i(85).aK6,le=i(85).yCe,se=i(85).R0B,de=i(85).Dtz,ue=i(85).m$Y,ce=i(85).q4P,pe=i(85).S2e,me=i(85).vWE,ve=i(85).TKs,ge=i(85).Lpg,fe=i(85).wt8,be=i(85).HkP,he=i(85).xE2,ye=i(85).tmX,we=i(85).BN6,Ie=i(85).zsu,Se=i(85).Gte,_e=i(85).Yzm,ke=i(85).wZM,Fe=i(85).AJ4,xe=i(85).Wku,Ze=i(85).xn4,Ce=i(85).nx5,Pe=(0,m.defineMessages)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",[Ce]:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",[Ce]:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",[Ce]:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",[Ce]:"Basic Information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",[Ce]:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",[Ce]:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",[Ce]:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",[Ce]:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",[Ce]:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",[Ce]:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",[Ce]:"Basic Information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",[Ce]:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",[Ce]:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",[Ce]:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",[Ce]:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",[Ce]:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",[Ce]:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",[Ce]:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",[Ce]:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",[Ce]:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",[Ce]:"Name to identify your integration to users"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",[Ce]:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",[Ce]:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",[Ce]:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",[Ce]:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",[Ce]:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",[Ce]:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",[Ce]:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",[Ce]:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",[Ce]:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",[Ce]:"Redirect URIs"},redirectUrisBetaSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri_link_preview_beta.subtitle",[Ce]:"If you are creating a integration with Link Preview capabilities, redirect to notion.so. Otherwise, populate this field with the URI that users will be redirected to after they complate authentication with Notion. The URI will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",[Ce]:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",[Ce]:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",[Ce]:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",[Ce]:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",[Ce]:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",[Ce]:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",[Ce]:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",[Ce]:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",[Ce]:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",[Ce]:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",[Ce]:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",[Ce]:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",[Ce]:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",[Ce]:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",[Ce]:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",[Ce]:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",[Ce]:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",[Ce]:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",[Ce]:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",[Ce]:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",[Ce]:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",[Ce]:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",[Ce]:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",[Ce]:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",[Ce]:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",[Ce]:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",[Ce]:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",[Ce]:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",[Ce]:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",[Ce]:"OAuth Client Secret"}});function De(e){return`${a().camelCase(e)}Label`}const Te=(0,u.makeTypeGuard)((e=>"distribution"===e||"secrets"===e||"basic"===e||"linkPreview"===e||"capabilities"===e?{true:e}:{false:e})),Ue={basic:{key:"basic",title:S.default[_e](Pe.basicPageTitle),subsections:[]},[Ze]:{key:Ze,title:S.default[_e](Pe.secretPageTitle),subsections:[]},[xe]:{key:xe,title:S.default[_e](Pe.capabilitiesPageTitle),subsections:[]},[Fe]:{key:Fe,title:S.default[_e](Pe.distributionPageTitle),subsections:[{key:"organization",title:S.default[_e](Pe.organizationSectionTitle)},{key:"oauth",title:S.default[_e](Pe.oauthSectionTitle)}]},[ke]:{key:ke,title:S.default[_e](Pe.linkPreviewPageTitle),subsections:[{key:"external_oauth",title:S.default[_e](Pe.externalOauthSectionTitle)},{key:Se,title:S.default[_e](Pe.unfurlingSectionTitle)}]}},Me=(e,t)=>{const i=["basic",Ze,xe,Fe];switch(t&&i.push(ke),e){case Ie:return["basic"];case we:case ye:return["basic",Ze,xe,Fe];case he:case be:default:return i}},Ve={type:{[fe]:{[Ie]:!0,[we]:!0,[ye]:!0,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},name:{[fe]:{[Ie]:!0,[we]:!0,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!0,[we]:!0,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},icon:{[fe]:{[Ie]:!0,[we]:!0,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!0}},space:{[fe]:{[Ie]:!0,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1},[me]:{[Ie]:!0,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[xe]:{[fe]:{[Ie]:!1,[we]:!0,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},token:{[fe]:{[Ie]:!1,[we]:!0,[ye]:!0,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[pe]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!0,[ge]:!1,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[ce]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!0,[ge]:!1,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[ue]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!0,[ge]:!1,[ve]:!1,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[de]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!1,[ve]:!1,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!1,[ve]:!1,[he]:!1}},[se]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[le]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},[ae]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},[re]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[ne]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},[oe]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},[ie]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!0,[be]:!0,[ge]:!0,[ve]:!0,[he]:!0}},[te]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[ee]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!0,[he]:!0}},[X]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!0,[he]:!0},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!0,[he]:!0}},[Q]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!1,[he]:!1}},[q]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!1,[he]:!1}},[J]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}},[G]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!1,[he]:!1}},[$]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!1,[he]:!1}},[j]:{[fe]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!0,[ve]:!0,[he]:!1},[me]:{[Ie]:!1,[we]:!1,[ye]:!1,[be]:!1,[ge]:!1,[ve]:!1,[he]:!1}}};function Le(e){const{formData:t,setFormData:i,formStateType:o,currentFieldNames:n}=e,r=function(e){const{formData:t,formStateType:i,currentFieldNames:o}=e;return o.filter((e=>{const o=t[e].value;return Ve[e][me][i]&&!o}))}({formData:t,formStateType:o,currentFieldNames:n});return r[W]((e=>{const t=De(e);i({field:e,error:S.default[_e](Pe.missingValuesError,{[H]:S.default[_e](Pe[t])})})})),r}function Be(e){const{formData:t,formStateType:i,[Y]:o,setFormData:r,currentFieldNames:a}=e,l=function(e){const{formData:t,formStateType:i,[Y]:o,currentFieldNames:n}=e,r=[];return n[W]((e=>{const n=t[e].value,a=Ve[e][fe][i],l=y.developerIntegrationsFormFieldValidations[e];if(a&&n&&l){const i=l({value:n,formData:t,[Y]:o});var s;i.validated||r.push({[H]:e,[z]:null===(s=i[z])||void 0===s?void 0:s.map((e=>{let{descriptor:t,values:i}=e;return{descriptor:t,values:i??{}}}))})}})),r}({formData:t,formStateType:i,[Y]:o,currentFieldNames:a});return l[W]((e=>{r({field:e[H],error:e[z]?e[z].map(((e,t)=>{let{descriptor:i,values:o}=e;return n()("div",{},`validation-error-${t}`,S.default[_e](i,o))})):S.default[_e](Pe.invalidInputError,{[H]:Pe[De(e[H])][Ce]})})})),l}function Re(e){if(!e)return;const t={};return Object.entries(e)[W]((e=>{let[i,o]=e;o&&(t[i]=!0)})),t}function Ne(e){return{token:e.token.value,[pe]:e[pe].value,[ce]:e[ce].value,[ue]:e[ue].value,name:e.name.value,icon:e.icon.value,space:e.space.value,[de]:(e[de].value||[]).map((e=>y[K](e))),[ae]:y[K](e[ae].value),[re]:e[re].value,[ne]:y[K](e[ne].value),[oe]:y[K](e[oe].value),[O]:(0,_.getBlockIdFromUrl)(e[se].value??"")??null,[ie]:l.H3(e[ie].value),[xe]:Re(e[xe].value),[le]:e[le].value,[te]:e[te].value,[ee]:e[ee].value,[X]:e[X].value,[Q]:y[K](e[Q].value),[q]:y[K](e[q].value),[G]:e[G].value,[$]:e[$].value,[J]:e[J].value,[j]:y[K](e[j].value)}}function Ae(e){const{formData:t,formStateType:i,currentFieldNames:o}=e;return o.some((e=>Ve[e][fe][i]&&t[e].error))}const Ee=e=>e.flatMap((e=>e.fields)),Oe={read_content:!1,[E]:!1,[A]:!1,[N]:!1,[R]:!1,read_comment:!1,[B]:!1,link_preview:!1,synced_database:!1};function Ke(e){const t={...Oe};return e&&Object.entries(e)[W]((e=>{let[i,o]=e;o&&(t[i]=!0)})),t}const ze={value:void 0,error:void 0},Ye={type:ze,name:ze,icon:ze,space:ze,[xe]:ze,token:ze,[ue]:ze,[ce]:ze,[pe]:ze,[re]:ze,[ie]:ze,[ae]:ze,[ne]:ze,[oe]:ze,[se]:ze,[de]:ze,[le]:ze,[Q]:ze,[q]:ze,[G]:ze,[$]:ze,[J]:ze,[j]:ze,[te]:ze,[ee]:ze,[X]:ze};function He(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function We(e){const{pageId:t,store:i,[L]:o}=e;if(!i||!t)return;const n=f.G[V](i,{table:s.iU,id:t});return await n.load(),(0,I.ZP)({store:n,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=g.Z.getPublicSpaceData(o,n.getSpaceId()))||void 0===e?void 0:e[ee]},pageVisitSource:void 0})}async function je(e){const{userRootStore:t,formStoreState:i,[L]:o}=e;if("create-bot"===i.type){const e=t?t.getAdminSpaceStores():[];return{token:void 0,[pe]:void 0,[ce]:void 0,[ue]:void 0,space:e[0],[le]:void 0,[re]:void 0,[ie]:void 0,[ae]:void 0,[ne]:void 0,[oe]:void 0,[se]:void 0,[de]:void 0,[xe]:{read_content:!0,[A]:!0,[E]:!0,read_comment:!1,[B]:!1,[R]:!1,[N]:!1,link_preview:!1,synced_database:!1},[te]:void 0,[ee]:void 0,[X]:void 0,[Q]:void 0,[q]:void 0,[G]:void 0,[$]:void 0,[J]:void 0,[j]:void 0}}if("update-bot"===i.type||"create-guest-integration"===i.type){const e=i[M].value,o=t&&f.H2[V](t,{id:e.space_id,table:d.bx});return{token:i[M],[pe]:void 0,[ce]:void 0,[ue]:void 0,name:e.name,icon:e.icon,space:o,[re]:void 0,[ie]:void 0,[ae]:void 0,[ne]:void 0,[oe]:void 0,[se]:void 0,[de]:void 0,[xe]:Ke(e[xe]),[le]:void 0,[te]:void 0,[ee]:void 0,[X]:void 0,[Q]:void 0,[q]:void 0,[G]:void 0,[$]:void 0,[J]:void 0,[j]:void 0}}if("update-guest-integration"===i.type){const e=i[M].value;return{token:void 0,[pe]:i[M],[ce]:i[M],[ue]:(0,p.getPublicIntegrationAuthUrl)({baseUrl:(0,b.k2)(v.default.env),clientId:i[M].value.id,[U]:i[M].value[de][0]}),name:e.name,icon:e[T].icon,space:void 0,[re]:e[T][re],[ie]:e[T][ie],[ae]:e[T][ae],[ne]:e[T][ne],[oe]:e[T][oe],[se]:await We({pageId:e[T][O],store:t,[L]:o}),[de]:e[de],[xe]:Ke(e[xe]),[le]:e[T][le],[te]:void 0,[ee]:void 0,[X]:void 0,[Q]:void 0,[q]:void 0,[G]:void 0,[$]:void 0,[J]:void 0,[j]:void 0}}if("create-third-party-external-integration"===i.type){const e=i[M].value;return{token:void 0,[pe]:i[M],[ce]:i[M],[ue]:(0,p.getPublicIntegrationAuthUrl)({baseUrl:(0,b.k2)(v.default.env),clientId:i[M].value.id,[U]:i[M].value[de][0]}),name:e.name,icon:e[T].icon,space:void 0,[re]:e[T][re],[ie]:e[T][ie],[ae]:e[T][ae],[ne]:e[T][ne],[oe]:e[T][oe],[se]:await We({pageId:e[T][O],store:t,[L]:o}),[de]:void 0,[xe]:Ke(e[xe]),[le]:e[T][le],[te]:void 0,[ee]:{[D]:w.nZ,verifiedDomains:[],[P]:[]},[X]:[w.VH],[Q]:void 0,[q]:void 0,[G]:void 0,[$]:void 0,[J]:void 0,[j]:void 0}}if("update-third-party-external-integration"===i.type){var n,r;const e=i[M].value,a=null===(n=i.startingAuthRecord)||void 0===n?void 0:n.value,l=i[P],s=e[T][C]||[],d={[D]:(null===(r=e[T].development_url_domains)||void 0===r?void 0:r[0])||"",verifiedDomains:e[T][Z]||[],[P]:l},m=s.map((t=>{var i;if(!0!==(null===(i=t[x])||void 0===i?void 0:i.collection))return{name:(0,h.R)({patternName:t.name,[F]:e.id}),regex:t.regex,[k]:((null==t?void 0:t[k])??[]).map(c.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(u.isDefined);return{token:void 0,[pe]:i[M],[ce]:i[M],[ue]:(0,p.getPublicIntegrationAuthUrl)({baseUrl:(0,b.k2)(v.default.env),clientId:i[M].value.id,[U]:i[M].value[de][0]}),name:e.name,icon:e[T].icon,space:void 0,[re]:e[T][re],[ie]:e[T][ie],[ae]:e[T][ae],[ne]:e[T][ne],[oe]:e[T][oe],[se]:await We({pageId:e[T][O],store:t,[L]:o}),[de]:e[de],[xe]:Ke(e[xe]),[le]:e[T][le],[ee]:d,[X]:m,[te]:e[T][te],[Q]:null==a?void 0:a.oauth_authorize_url,[q]:null==a?void 0:a.oauth_token_url,[G]:null==a?void 0:a[pe],[$]:null==a?void 0:a[ce],[J]:null==a?void 0:a.scopes,[j]:null==a?void 0:a.deletion_url}}if("update-first-party-external-integration"===i.type){var a;const e=i[M].value,t=e[T][C]||[],o={[D]:(null===(a=e[T].development_url_domains)||void 0===a?void 0:a[0])||"",verifiedDomains:e[T][Z]??[],[P]:[]},n=t.map((t=>{var i;if(!0!==(null===(i=t[x])||void 0===i?void 0:i.collection))return{name:(0,h.R)({patternName:t.name,[F]:e.id}),regex:t.regex,[k]:((null==t?void 0:t[k])??[]).map(c.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(u.isDefined);return{token:void 0,[pe]:i[M],[ce]:i[M],[ue]:void 0,name:e.name,icon:e[T].icon,space:void 0,[re]:e[T][re],[ie]:e[T][ie],[ae]:e[T][ae],[ne]:e[T][ne],[oe]:e[T][oe],[se]:void 0,[de]:e[de],[xe]:Ke(e[xe]),[le]:e[T][le],[ee]:o,[X]:n,[te]:e[T][te],[Q]:void 0,[q]:void 0,[G]:void 0,[$]:void 0,[J]:void 0,[j]:void 0}}(0,u.unreachable)(i)}function $e(e){return"create-bot"===e||"create-guest-integration"===e||"create-third-party-external-integration"===e}function Ge(e){return"create-guest-integration"===e?"internal":"create-third-party-external-integration"===e?"public":void 0}function Je(e){return"create-third-party-external-integration"===e}function qe(e){return`developer-integration-section-header-${e}`}function Qe(e,t){return!("secrets"===e)&&!("distribution"===e&&"update-bot"===t)&&!("linkPreview"===e&&"update-guest-integration"===t)}},43348:(e,t,i)=>{i.d(t,{R:()=>a,X:()=>l});var o=i(5500),n=i(95477);const r=i(85).ivl;function a(e){const{patternName:t,[r]:i}=e;if((0,o.BP)({[r]:i,env:n.default.env}))return t;{const e=t.indexOf("_");return e<0?"entity_item":t.slice(e+1)}}function l(e){const{patternName:t,[r]:i}=e;return(0,o.BP)({[r]:i,env:n.default.env})?t:`${i}_${t}`}},91996:(e,t,i)=>{i.r(t),i.d(t,{getValidJSON:()=>x,validateUrlsAgainstRegexPattern:()=>D,sanitizeUrlWithoutHangingSlash:()=>T,developerIntegrationsFormFieldValidations:()=>V});var o=i(33728),n=i(20270),r=i(74181),a=i(89602),l=i(97880),s=i(44876),d=i(64002),u=i(63143),c=i(36054),p=i(5366),m=i(95477),v=i(67669),g=i(33665);const f=i(85).dcn,b=i(85).MFQ,h=i(85).L1A,y=i(85).egv,w=i(85).fol,I=i(85).kzm,S=i(85).e1X,_=i(85).eFI,k=i(85).nx5,F=(0,p.defineMessages)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",[k]:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",[k]:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",[k]:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",[k]:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",[k]:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",[k]:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",[k]:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",[k]:"Linked template must be public."}});function x(e){let t;try{t=JSON.parse(e)}catch(i){t=void 0}return t}function Z(e){const{value:t}=e,i=d.sanitizeUrlStrict(t);if(!i)return{[_]:!1};return d.parse(i).hostname?{[_]:!0}:{[_]:!1}}function C(e){try{return new RegExp(e),{[_]:!0}}catch{return{[_]:!1}}}function P(e){if((0,c.Gu)(a.$1,e))return{[_]:!1};for(const t of e){const e=(0,s.GY)(t);if(!(0,n.nj)(e))return{[_]:!1}}return{[_]:!0}}function D(e){const{domains:t,regex:i,urls:o}=e;if(0===o.length)return[];const n=[];for(const r of o){const e=(0,s.XR)({url:r,domains:t,regex:new RegExp(i)});"invalid_url"===e.type?n.push({descriptor:F.sampleUrlMissingDomain,value:r}):"url_does_not_match_domain"===e.type?n.push({descriptor:F.sampleUrlDoesNotMatchProvidedDomain,value:r}):"url_does_not_match_regex"===e.type?n.push({descriptor:F.sampleUrlDoesNotMatchProvidedRegexes,value:r}):"success"===e.type||(0,l.unreachable)(e)}return n}function T(e){const t=d.sanitizeUrlStrict(e);if(!t||!e)return;const i=t[t.length-1],o=e[e.length-1];return"/"===i&&"/"!==o?t.slice(0,t.length-1):t}const U={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,read_user_with_email:!1,[w]:!1},M=(0,l.objectKeys)(U).filter((e=>U[e]));const V={email:function(e){const{value:t}=e,i=o.H3(t);return i?{[_]:o.oH(i).valueOf()}:{[_]:!1}},redirect_uris:function(e){const{value:t}=e;return{[_]:t.every((e=>(0,r.mb)(m.default.domainBaseUrl,e)))}},website_url:Z,privacy_policy_url:Z,terms_of_use_url:Z,template_url:function(e){const{value:t,templateStore:i}=e;return d.sanitizeUrlStrict(t)?(0,g.getBlockIdFromUrl)(t)?i&&(0,v.isPagePublic)(i)?{[_]:!0}:{[_]:!1,[S]:[{descriptor:F.templateUrlCannotBeDuplicated}]}:{[_]:!1,[S]:[{descriptor:F.templateUrlIsNotNotionPage}]}:{[_]:!1}},capabilities:function(e){const{value:t}=e;return M.some((e=>t[e]))?{[_]:!0}:{[_]:!1,[S]:[{descriptor:F.capabilityErrorMessage}]}},unfurl_url:Z,[y]:function(e){const{value:t,formData:i}=e,o=[];for(const a of t){if(C(a.regex)[_]){var n;const e=D({domains:(r=null===(n=i.domain)||void 0===n?void 0:n.value,r?(0,u.uniq)([...r[I]&&[r[I]],...r.domainVerifications.map((e=>{let{domain:t}=e;return t})),...r.verifiedDomains]):[]),regex:a.regex,urls:a.sampleUrls});o.push(...e)}else o.push({descriptor:F.regexPatternErrorMessage,value:a.name});P(a.attributes)[_]||o.push({descriptor:F.regexAttributesErrorMessage,value:a.name})}var r;return o.length>0?{[_]:!1,[S]:o.map((e=>{let{descriptor:t,value:i}=e;return{descriptor:t,values:{value:i}}}))}:{[_]:!0}},[h]:Z,[b]:Z,[f]:Z}},65270:(e,t,i)=>{i.d(t,{TG:()=>D,rn:()=>T,C:()=>U,Az:()=>M,nZ:()=>V,e_:()=>L,P4:()=>B,VH:()=>R,SV:()=>N,VR:()=>O,Hx:()=>K});var o=i(26263),n=i(41432),r=i(20270),a=i(4615),l=i(21202),s=i(19889),d=i(70203),u=i(97880),c=i(44876),p=i(63143),m=i(39098);const v=i(85).gnz,g=i(85).jxN,f=i(85).sGR,b=i(85).YNC,h=i(85).Qd_,y=i(85).lsp,w=i(85).jtM,I=i(85).Zij,S=i(85).J$i,_=i(85).OSs,k=i(85).bni,F=i(85).LFy,x=i(85).OYO,Z=i(85).KTR,C=i(85).BXb,P=i(85).MsU;function D(e){return(0,p.uniq)(e.flatMap((e=>{if("relation"===e.type)return e[P].uri})).filter(u.isDefined))}function T(e){const{environment:t,integration:i,rootUrl:u,rootAttributes:p,relatedUrisToAttributes:v}=e,g=(0,a.default)(),f=t.currentUser.id,b=new o.Z({name:"developerIntegrationLabHelpers.getBlockStores"}),h=[],y={};for(const[o,n]of Object.entries(v)){const e=(0,a.default)();h.push({id:e,uri:o,[C]:n}),y[o]=e}const w=[{id:"rootInstanceId",original_url:u,[C]:p,[Z]:y},...h].map((e=>{const t=[];for(const i of e[C]){const e=(0,c.GY)(i);(0,r.nj)(e)&&t.push(e)}return{...e,[C]:t}}));if("success"!==(0,c.ny)({url:u,integrations:[i],currentSpaceId:g}).type)return{error:"Sample URL does not match provided integration regex."};const P={table:l.iU,id:(0,a.default)(),spaceId:g};let D;for(const o of w){const e={table:l.iU,id:o.id,spaceId:g},t={...o,domain:"test"},i={id:o.id,type:n.Ti[x],version:0,created_at:0,created_by_table:s.KJ,created_by_id:(0,a.default)(),last_edited_time:0,last_edited_by_table:s.KJ,last_edited_by_id:(0,a.default)(),[F]:l.iU,parent_id:(0,a.default)(),space_id:g,alive:!0,domain:"",format:t};if(b[k]({pointer:e,userId:f},{role:_,value:i}),o===w[0]){const o={...i,format:{...t,[C]:void 0}};b[k]({pointer:P,userId:f},{role:_,value:o}),D=e}}if(!D)return{error:"Root external object was not defined."};const T=new m.G(t,P,{[S]:b}),U=new m.G(t,D,{[S]:b}),M={table:l.iU,id:(0,a.default)(),spaceId:g},V=new m.G(t,M,{[S]:b}),L={id:M.id,type:"text",version:0,space_id:g,parent_id:(0,a.default)(),[F]:l.iU,alive:!0,properties:{[I]:[(0,d.createMentionToken)((0,d.createExternalObjectInstanceAnnotation)(P.id))]}};b[k]({pointer:M,userId:f},{role:_,value:L});const B={table:l.iU,id:(0,a.default)(),spaceId:g},R=new m.G(t,B,{[S]:b}),N={id:B.id,type:"text",version:0,space_id:g,parent_id:(0,a.default)(),[F]:l.iU,alive:!0,properties:{[I]:[(0,d.createMentionToken)((0,d.createExternalObjectInstanceAnnotation)(w[0].id))]}};return b[k]({pointer:B,userId:f},{role:_,value:N}),{emptyInstanceBlockStore:T,previewBlockStore:U,emptyInlineBlockStore:V,inlineBlockStore:R}}const U=(0,a.default)(),M="https://acme.com/items/23487",V="acme.com",L="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",B=[{id:I,name:"Title",type:w,[w]:{[I]:{value:"Acme Item #$<itemNo>",[y]:I}}},{id:"itemId",name:"Item Id",type:w,[w]:{plain_text:{value:"#$<itemNo>",[y]:h}}},{id:"site",name:"Site",type:w,[w]:{plain_text:{value:"$<site>",[y]:b}}}],R={name:"item",regex:L,[C]:B,sampleUrls:[M]},N=[{id:I,name:"Title",type:w,[w]:{[I]:{value:"Feature Request: Link Previews",[y]:I}}},{id:"state",name:"State",type:P,[P]:{uri:"acme:item_state/open",mention:{[y]:"primary"}}},{id:"itemId",name:"Item Id",type:w,[w]:{plain_text:{value:"#23487",[y]:h}}},{id:"itemIcon",name:"Item Icon",type:w,[w]:{color:{value:{r:247,g:247,b:42},[y]:"entity"}}},{id:"user",name:"User",type:P,[P]:{uri:"https://acme.com/fig-ment",extension:[{id:I,[y]:b},{id:f,[y]:"avatar"}]}},{id:"description",name:"Description",type:w,[w]:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",[y]:"body"}}},{id:"updated_at",name:"Updated At",type:w,[w]:{datetime:{value:"2022-01-11T19:53:18.829Z",[y]:b}}},{id:"label",name:"Label",type:w,[w]:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},[y]:"primary"}}}],A={uri:"https://acme.com/fig-ment",[C]:[{id:I,name:"User Name",type:w,[w]:{[I]:{value:"fig"}}},{id:f,name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},E={uri:"acme:item_state/open",[C]:[{id:I,name:"Title",type:w,[w]:{[I]:{value:"Open",[y]:I}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:g,image:{[y]:"avatar"}}},{id:"color",name:"Color",type:w,[w]:{color:{value:{r:235,g:64,b:52},[y]:"background"}}}]};function O(){const e=[A,E],t=D(N),i={};for(const o of t){const t=e.find((e=>e.uri===o));t&&(i[o]=t[C])}return i}function K(e){const{domain:t,regex:i,currentIntegration:o}=e,n=o.info,a=e[C].map((e=>{const t=(0,c.GY)(e);if((0,r.nj)(t))return t})).filter(u.isDefined),l={...n,original_url_domains:[t],[v]:[{name:"acme-issue",regex:i,[C]:a}]};return{...o,info:l}}},22230:(e,t,i)=>{i.d(t,{Z:()=>F});var o=i(49085),n=i(74181),r=i(77420),a=i(9844),l=i(5500),s=i(97880),d=i(95477),u=i(52507);const c=i(85).TKs,p=i(85).Gte,m=i(85).xE2,v=i(85).HkP,g=i(85).Lpg,f=i(85).BN6,b=i(85).tmX,h=i(85).Wp_,y=i(85).QmD,w=i(85).rpv,I=i(85).d6L,S=i(85).TAG,_=i(85).OI;class k extends o.default{getInitialState(){return{type:"create-bot",[_]:void 0,[S]:"internal",[I]:w}}updateRecordTypeOnSwitch(e){if("update-bot"===this[y].type){if("public"!==e)return;this[h]({type:b,[_]:this[y][_],[S]:e,[I]:w})}else if("create-guest-integration"===this[y].type){if("internal"!==e)return;this[h]({type:f,[_]:this[y][_],[S]:e,[I]:w})}else if("update-guest-integration"===this[y].type){if("unfurling"!==e)return;this[h]({type:g,[_]:this[y][_],[S]:e,startingAuthRecord:void 0,[I]:w})}else if("create-third-party-external-integration"===this[y].type){if("public"!==e)return;this[h]({type:v,[_]:this[y][_],[S]:e,[I]:w})}else"create-bot"===this[y].type||"update-third-party-external-integration"===this[y].type||"update-first-party-external-integration"===this[y].type||(0,s.unreachable)(this[y])}initializeNewForm(e,t,i){if(e.table===r.cZ)this[h]({type:f,[_]:e,[S]:"internal",[I]:w});else if(e.table===a.K2)if((0,n.VM)(e.value)||(0,n.t9)(e.value))if((0,l.BP)({integrationId:e.value.id,env:d.default.env}))this[h]({type:m,[_]:{table:e.table,value:e.value},[S]:p,[I]:e.value[I]});else{if(!t)return;const o=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this[h]({type:c,[_]:{table:e.table,value:e.value},startingAuthRecord:t,[S]:p,[I]:e.value[I],domainVerifications:o,domainVerificationStore:"update-third-party-external-integration"===this[y].type?this[y].domainVerificationStore:new u.ZP})}else"guest"===e.value.type&&this[h]({type:v,[_]:{table:e.table,value:e.value},[S]:"public",[I]:e.value[I]});else(0,s.unreachable)(e)}}const F=k},38381:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const r=new n},89602:(e,t,i)=>{i.d(t,{$1:()=>j});var o=i(14710),n=i(74487);const r=i(85).JA7,a=i(85).BWf,l=i(85).W$p,s=i(85).R7D,d=i(85).riT,u=i(85).NgF,c=i(85).tX7,p=i(85).w6l,m=i(85).YNC,v=i(85).pk7,g=i(85).uRr,f=i(85).lsp,b=i(85).fB_,h=i(85).S7Z,y=i(85).w_r,w=i(85).JP6,I=i(85).f8x,S=i(85).D_K,_=n[S]({[I]:{r:n.lte(n.gte(n.integer(),0),255),g:n.lte(n.gte(n.integer(),0),255),b:n.lte(n.gte(n.integer(),0),255)},[w]:{}}),k=n[S]({[I]:{value:n.union([n[y](),n[h](n[b](n[y]()))])},[w]:{[f]:n[g](o.kE.avatar,o.kE.identifier,o.kE[v],o.kE[m],o.kE.body)}}),F=n[S]({[I]:{value:n.union([n[p](),n[h](n[b](n[p]()))])},[w]:{}}),x=n[S]({[I]:{value:n.union([n[c](),n[h](n[b](n[c]()))])},[w]:{}}),Z=n[S]({[I]:{value:n.union([n[y](),n[h](n[b](n[y]()))])},[w]:{color:_,[f]:n[g](o.kE[v])}}),C=n[S]({[I]:{value:n.union([n[y](),n.tuple([n[y]()])])},[w]:{color:_,[f]:n[u](o.kE.title)}}),P=n[S]({[I]:{value:n.union([_,n[h](n[b](_))])},[w]:{[f]:n[g](o.kE.entity,o.kE.background)}}),D=n[S]({[I]:{value:n.union([n[d](),n[h](n[b](n[d]()))])},[w]:{[f]:n[g](o.kE[v],o.kE[m])}}),T=n[S]({[I]:{value:n.union([n[d](),n[h](n[b](n[d]()))])},[w]:{[f]:n[g](o.kE[v],o.kE[m])}}),U=n[S]({[I]:{value:n.union([n[d](),n.tuple([n[d]()])])},[w]:{[f]:n[g](o.kE[v],o.kE[m])}}),M=n[S]({[I]:{value:n.union([n[d](),n.tuple([n[d]()])])},[w]:{[f]:n[g](o.kE[v],o.kE[m])}}),V=n.union([n[S]({[I]:{plain_text:k},[w]:{type:n[u]("plain_text")}}),n[S]({[I]:{[p]:F},[w]:{type:n[u](p)}}),n[S]({[I]:{[c]:x},[w]:{type:n[u](c)}}),n[S]({[I]:{enum:Z},[w]:{type:n[u]("enum")}}),n[S]({[I]:{title:C},[w]:{type:n[u]("title")}}),n[S]({[I]:{color:P},[w]:{type:n[u]("color")}}),n[S]({[I]:{date:D},[w]:{type:n[u]("date")}}),n[S]({[I]:{datetime:T},[w]:{type:n[u]("datetime")}}),n[S]({[I]:{[s]:U},[w]:{type:n[u](s)}}),n[S]({[I]:{[l]:M},[w]:{type:n[u](l)}})]),L=n[S]({[I]:{},[w]:{[f]:n[u](o.kE[a])}}),B=n[S]({[I]:{},[w]:{[f]:n[u](o.kE[a])}}),R=n[S]({[I]:{},[w]:{[f]:n[u](o.kE[a])}}),N=n[S]({[I]:{},[w]:{[f]:n[u](o.kE[a])}}),A=n[S]({[I]:{},[w]:{format:n.nullable(n[g]("icon")),[f]:n[g](o.kE.avatar,o.kE.entity,o.kE[a])}}),E=n.intersection([n[S]({[I]:{src_url:n.union([n[y](),n[h](n[b](n[y]()))])},[w]:{default_height:n[c](),default_width:n[c]()}}),n.union([n[S]({[I]:{html:L},[w]:{type:n[u]("html")}}),n[S]({[I]:{pdf:B},[w]:{type:n[u]("pdf")}}),n[S]({[I]:{audio:R},[w]:{type:n[u]("audio")}}),n[S]({[I]:{video:N},[w]:{type:n[u]("video")}}),n[S]({[I]:{image:A},[w]:{type:n[u]("image")}})])]),O=n.union([n[y](),n[h](n[b](n[y]()))]),K=n[S]({[I]:{uri:O},[w]:{type:n[u]("mention"),mention:n[S]({[I]:{},[w]:{[f]:n[u](o.kE[v])}}),[r]:n.isNull()}}),z=n[S]({[I]:{uri:O},[w]:{type:n[u](r),[r]:n[h](n[b](n[S]({[I]:{id:n[y]()},[w]:{[f]:n[g](o.kE.avatar,o.kE[a],o.kE[v],o.kE[m])}}))),mention:n.isNull()}}),Y=n.union([K,z]),H=n[S]({[I]:{uri:O},[w]:{}}),W=n.intersection([n[S]({[I]:{id:n[y](),name:n[y]()},[w]:{}}),n.union([n[S]({[I]:{inline:V},[w]:{type:n[u]("inline")}}),n[S]({[I]:{[a]:E},[w]:{type:n[u](a)}}),n[S]({[I]:{relation:Y},[w]:{type:n[u]("relation")}}),n[S]({[I]:{people:H},[w]:{type:n[u]("people")}})])]),j=n[b](W)}}]);