"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5845],{48298:(e,s,t)=>{t.r(s),t.d(s,{resolveMembershipRequest:()=>C,loadUnreadSpaceMembershipRequestCount:()=>_,getPendingMembershipRequests:()=>k});var i=t(58129),o=t(90468),a=t(19889),n=t(50906),r=t(54642),l=t(76464),d=t(9953),c=t(12359),m=t(39098),u=t(98905);const p=t(85).uOz,g=t(85).fEm,b=t(85).int,h=t(85).YsR,f=t(85).TTZ,v=t(85).nj3,y=t(85).H6e,M=t(85).Rtp,w=t(85).f5o,R=t(85).wgE,C=async e=>{const{[R]:s,store:t,[w]:i,forActor:o,status:r,from:m}=e,u=s.currentUser.id;if("approved"===r){const e={type:"existingUser",value:o,spaceRole:M};if(!(await l[y]({[R]:s,store:t,[y]:[e],inviteRole:M,isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return}c.createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",[R]:s,perform:e=>{d.updateValue({store:i,transaction:e,data:{granted_time:Date.now(),granted_by_table:a.KJ,granted_by_id:u,resolved_time:Date.now(),resolved_by_table:a.KJ,resolved_by_id:u,status:r}})}}),n.trackResolveMembershipRequest(s,{status:r,request_id:i.id,from:m,[v]:o.id,space_role:t.getRole()})};async function _(e){if(u.Z.reset(),!e.canAdmin)return;const{[R]:s,spaceId:t}=e,i=await r.getUnreadAccessRequestCount(s,{parentTable:o.bx,parentId:t,size:1});"success"===i.type&&u.Z.setState({spaceId:t,count:i.data.count})}function k(e,s){const t=new Map;for(const o of s){const s=(0,m.Kv)(e,{table:i.J8,id:o}),n=s.getValue();if(!n)continue;if(n[f]!==a.KJ||n[h]!==a.KJ)continue;const r=(0,m.Kv)(e,{table:n[f],id:n[v]}).getValue();if(!r)continue;const l=(0,m.Kv)(e,{table:n[h],id:n.created_by_id}).getValue();if(l)if(t.has(n[v])){const e=t.get(n[v]);if(!e)continue;n[b]>e.latestRequestTime?t.set(n[v],{...e,[g]:[{actor:l,reason:n.message},...e[g]],[p]:n,[w]:s,latestRequestTime:n[b]}):t.set(n[v],{...e,[g]:[...e[g],{actor:l,reason:n.message}]})}else t.set(n[v],{forActor:r,[g]:[{actor:l,reason:n.message}],[p]:n,[w]:s,latestRequestTime:n[b]})}return Array.from(t.values())}},15025:(e,s,t)=>{t.d(s,{zq:()=>y,ac:()=>M,VR:()=>w});var i=t(77094),o=t.n(i),a=(t(67294),t(24405)),n=t(3909),r=t(5366);const l=t(85).nC_,d=t(85).fol,c=t(85).jpH,m=t(85).HFH,u=t(85).iD5,p=t(85).nSN,g=t(85).nx5,b=t(85).oOV,h=t(85).L_E,f=t(85).N4Y;function v(e){window.__c={n:"CapabilityItem"};const{[f]:s,labelIfEnabled:t,labelIfDisabled:i}=e,r=(0,a.yK)((e=>({[h]:{color:s?e.mediumTextColor:e.lightTextColor}})),[s]);return o()("div",{style:r[h]},void 0,function(e){const s={width:12,display:"inline",verticalAlign:"middle"};return e?n.Z.thinCheck(s):n.Z.close(s)}(s)," ",s?t:i)}function y(e){const s="none"!==e;return[o()(v,{[f]:s&&e[b],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",[g]:"Can read content."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",[g]:"Cannot read content."})},b),o()(v,{[f]:s&&e[p],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",[g]:"Can insert content."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",[g]:"Cannot insert content."})},p),o()(v,{[f]:s&&e[u],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",[g]:"Can update content."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",[g]:"Cannot update content."})},u),o()(v,{[f]:s&&e[m],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.insertComment.enabled",[g]:"Can comment."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.insertComment.disabled",[g]:"Cannot comment."})},m),o()(v,{[f]:s&&e[c],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.readComment.enabled",[g]:"Can read comments."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.readComment.disabled",[g]:"Cannot read comments."})},c)]}function M(e){return[o()(v,{[f]:e[d],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",[g]:"Can view users."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",[g]:"Cannot view users."})},d),o()(v,{[f]:e[l],labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",[g]:"Can view user email addresses."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",[g]:"Cannot view user email addresses."})},l)]}function w(e){return[o()(v,{[f]:e.link_preview,labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.enabled",[g]:"Can preview links."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.disabled",[g]:"Cannot preview links."})},"link_preview"),o()(v,{[f]:e.synced_database,labelIfEnabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.enabled",[g]:"Can sync databases."}),labelIfDisabled:o()(r.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.disabled",[g]:"Cannot sync databases."})},"synced_database")]}},84015:(e,s,t)=>{t.d(s,{_:()=>b});var i=t(97464),o=t.n(i),a=t(77094),n=t.n(a),r=t(67294),l=t(480),d=t(26825),c=t(5366),m=t(15025),u=t(28992);const p=t(85).nLZ,g=t(85).Yzm;function b(e){window.__c={n:"CumulativeBotBlockRoleTooltip"};const{role:s}=e,t=(0,c.useIntl)(),{device:i}=(0,l.O7)(),a=(0,m.zq)(s);return r.createElement(u.Z,o()({},e,{title:t[g]((0,d.getLabelAndCaptionForCumulativeRole)(s,void 0).label),shouldWrapCaption:!0,style:i.isMobile?{padding:"12px 4px"}:{padding:4,[p]:2,marginBottom:2},captionStyle:{[p]:4},caption:n()("div",{},void 0,a)}))}},47240:(e,s,t)=>{t.d(s,{Z:()=>K});var i=t(77094),o=t.n(i),a=t(67294),n=t(81954),r=t(24405),l=t(80951),d=t(14215),c=t(67266),m=t.n(c),u=t(96486),p=t.n(u),g=t(5242),b=t.n(g),h=t(15095),f=t(70203),v=t(97880);const y=t(85).vcv,M=t(85).n9p,w=t(85).sNz,R=t(85).upK,C=t(85).R_r,_=t(85).gl5,k=t(85)._S$,T=t(85).z5A;let A;function P(e){const{before:s,after:t}=e,i={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},o=e=>{const s=i.encoding[e];if(s)return s;{const s=String[T](i.count);return i.count++,i.encoding[e]=s,i.decoding[s]=e,s}},a=e=>{const s=m()(e),t=i.annotationEncoding[s];if(t)return t;{const t=String[T](i.count);return i.count++,i.annotationEncoding[s]=t,i.annotationDecoding[t]=e,t}},n=e=>p().flatten(f.getTokens(e).map((e=>{const s=h[k](e[0]).map(o);if(f.isMentionToken(e)){const t=f[_](e),i=f.findMentionAnnotation(t);i&&(s[0]=a({type:"mention",value:i}),t.forEach((e=>{f[C](e)||f.isEquationAnnotation(e)||f[R](e)||(s.unshift(a({type:"start",value:e})),s.push(a({type:"end",value:e})))})))}else if(f.isEquationToken(e)){const t=f[_](e),i=f.findEquationAnnotation(t);if(i){s[0]=a({type:"equation",value:i});for(const e of t)f[C](e)||f.isEquationAnnotation(e)||f[R](e)||(s.unshift(a({type:"start",value:e})),s.push(a({type:"end",value:e})))}}else if(f.isAnnotatedTextToken(e)){f[_](e).forEach((e=>{s.unshift(a({type:"start",value:e})),s.push(a({type:"end",value:e}))}))}return s}))).join("");if(i.count>65535)throw new Error("This string has way too many different characters.");const r=function(e,s){const t=new(b())({timeout:2,editCost:6}),i=t.main(s,e);return t.cleanupSemantic(i),i}(n(t),n(s)),l=[];let d=[];return r.forEach((e=>{let[s,t]=e;t.split("").forEach((e=>{if(i.decoding[e]){const t=i.decoding[e];s===A.added?l.push([t,[...d,["+"]]]):s===A.removed?l.push([t,[...d,["-"]]]):s===A.same&&l.push([t,d])}else{const t=i.annotationDecoding[e];if(s===A.added)if("mention"===t.type)l.push([f[w],[...d,["+"],t.value]]);else if("start"===t.type)d=[...d,t.value];else if("end"===t.type)d=d.filter((e=>!p().isEqual(e,t.value)));else if("equation"===t.type){const e=f[M](t.value),s=f[y](e,[...d,["+"]]);l.push(s)}else(0,v.unreachable)(t);else if(s===A.removed){if("mention"===t.type)l.push([f[w],[...d,["-"],t.value]]);else if("equation"===t.type){const e=f[M](t.value),s=f[y](e,[...d,["-"]]);l.push(s)}}else if(s===A.same)if("mention"===t.type)l.push([f[w],[...d,t.value]]);else if("start"===t.type)d=[...d,t.value];else if("end"===t.type)d=d.filter((e=>!p().isEqual(e,t.value)));else if("equation"===t.type){const e=f[M](t.value),s=f[y](e,d);l.push(s)}else(0,v.unreachable)(t)}}))})),f.normalizeTextValue(l)}!function(e){e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same"}(A||(A={}));var I=t(3909),Z=t(21202),F=t(39098),S=t(63867);const x=t(85).L_E,E=t(85).nSw,D=t(85).aqg,U=t(85).lsv,L=t(85).Ql2,q=t(85).CNJ,W=t(85).biQ,V=t(85).xa7,B=t(85).D7I,O=t(85).OBh;function K(e){const s=e[O].type;switch(s){case"title":case"text":return a[B](N,e);case"relation":return o()(z,{[O]:e[O],beforeValue:e.beforeValue,afterValue:e.afterValue,[V]:e[V]});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case W:case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case q:case"location":case"verification":return a[B](Y,e);default:(0,v.unreachable)(s)}}function N(e){const s={value:P({before:e.beforeValue.value,after:e.afterValue.value}),[L]:e.beforeValue[L]};return o()(S.Z,{value:s,[O]:e[O],[V]:e[V]})}function z(e){window.__c={n:"RelationPropertyDiff"};const{beforeValue:s,afterValue:t,[O]:i,[V]:a}=e,r=(0,n.VK)((()=>{const e=(0,l.toRelationValueAsPointers)(s.value),o=(0,l.toRelationValueAsPointers)(t.value),n=(0,d.N)(e,o,(e=>`${e.id}${e.table}`)),r=new Set(l[U]({[D]:n.created,[E]:a[E],[O]:i})),c=new Set(l[U]({[D]:n.deleted,[E]:a[E],[O]:i})),m=[...r,...c];return m.flatMap(((e,s)=>{const t=F.G.createChildStore(a,{table:Z.iU,id:e.id}).getPropertyValue("title")||[],i=[],o=f.getTokens(t);for(const a of o)if(f.isStringToken(a)){const s=r.has(e)?"+":"-",t=[a[0],[[s]]];i.push(t)}else i.push(a);return s<m.length-1&&i.push(f.createToken("\n")),i}))}),[s,t,i,a]);return o()(S.Z,{value:{value:r,[L]:s[L]},[O]:{type:"title",name:"Title"},[V]:a})}function Y(e){window.__c={n:"ArrowPropertyDiff"};const s=(0,r.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return o()("div",{style:s.arrowDiffWrap},void 0,o()(S.Z,{value:e.beforeValue,[O]:e[O],[V]:e[V]}),o()(H,{}),o()(S.Z,{value:e.afterValue,[O]:e[O],[V]:e[V]}))}function H(){window.__c={n:"Arrow"};const e=(0,r.yK)((e=>({[x]:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return o()("div",{style:e[x]},void 0,I.Z.arrowRightSmaller(e.icon))}},33241:(e,s,t)=>{t.d(s,{d:()=>M,M:()=>w});var i=t(97464),o=t.n(i),a=t(77094),n=t.n(a),r=t(67294),l=t(24405),d=t(8848),c=t(3909),m=t(26825),u=t(90468),p=t(97880),g=t(5366),b=t(89728);const h=t(85).$cP,f=t(85).g4H,v=t(85).D7I,y=t(85).icY;function M(e){let{role:s,events:t,disabled:i,buttonStyle:a,buttonContents:d,icon:m,table:u,isRemovable:p,isCurrentUser:h}=e;window.__c={n:"PermissionRoleButton"};const f=(0,l.yK)((e=>({button:{marginRight:8,...a},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[a]),M=m||!i&&c.Z.chevronDownRounded;return r[v](b.Z,o()({},t,{disabled:i,style:f.button}),d||n()("span",{className:"notranslate"},void 0,r[v](g.FormattedMessage,w(s,u,p,h)[y])),M&&M(f.icon))}function w(e,s,t,i){if("access"===e)return{[y]:m.permissionRoleMessages.canAccessLabel};if("limited"===e)return{[y]:m.permissionRoleMessages.limitedAccessLabel};if((0,m.isCumulativeRole)(e))return(0,m.getLabelAndCaptionForCumulativeRole)(e,s);switch(e){case"editor":return s===u.bx?{[y]:m.permissionRoleMessages.workspaceOwnerLabel,[f]:m.permissionRoleMessages.workspaceOwnerCaption}:{[y]:m.permissionRoleMessages.fullAccessLabel,[f]:m.permissionRoleMessages.fullAccessCaption};case"membership_admin":return s===u.bx?{[y]:m.permissionRoleMessages.membershipAdminLabel,[f]:m.permissionRoleMessages.membershipAdminCaption}:{[y]:m.permissionRoleMessages.canEditLabel,[f]:m.permissionRoleMessages.canEditCaption};case"read_and_write":return s===u.bx?{[y]:m.permissionRoleMessages.memberLabel,[f]:m.permissionRoleMessages.memberCaption}:{[y]:m.permissionRoleMessages.canEditLabel,[f]:m.permissionRoleMessages.canEditCaption};case h:return{[y]:m.permissionRoleMessages.canEditContentLabel,[f]:m.permissionRoleMessages.canEditContentCaption};case"reader":return{[y]:m.permissionRoleMessages.canReadLabel,[f]:m.permissionRoleMessages.canReadCaption};case"comment_only":return{[y]:m.permissionRoleMessages.canCommentLabel,[f]:m.permissionRoleMessages.canCommentCaption};case"none":return t?s===u.bx?i?{[y]:m.permissionRoleMessages.leaveWorkspaceLabel,style:{color:d.ZP.red}}:{[y]:m.permissionRoleMessages.removeFromWorkspaceLabel,style:{color:d.ZP.red}}:{[y]:m.permissionRoleMessages.removeWorkspaceLabel,style:{color:d.ZP.red}}:{[y]:m.permissionRoleMessages.noAccessLabel,style:{color:d.ZP.red}};default:(0,p.unreachable)(e)}}},7567:(e,s,t)=>{t.d(s,{QH:()=>Le,jV:()=>qe,ZP:()=>We});var i=t(97464),o=t.n(i),a=t(77094),n=t.n(a),r=t(67294),l=t(83355),d=t(41892),c=t(3909),m=t(26825),u=t(27006),p=t(90468),g=t(47425),b=t(97880),h=t(5366),f=t(47307),v=t(93678),y=t(95477),M=t(43250),w=t(33929),R=t(87279),C=t(98742),_=t(67669),k=t(33665),T=t(21115),A=t(8323),P=t(61766),I=t(31194),Z=t(52275),F=t(31945),S=t(78140),x=t(28992),E=t(32163),D=t(74136),U=t(72495),L=t(58032),q=t(64369),W=t(84015),V=t(42402),B=t(33241),O=t(60442),K=t(42115);const N=t(85).CRw,z=t(85).TUD,Y=t(85).x6c,H=t(85).FYR,G=t(85).RWY,J=t(85).C7g,$=t(85).$cP,j=t(85).Dsi,Q=t(85).XNW,X=t(85).lGJ,ee=t(85).FYE,se=t(85).wuN,te=t(85).PXg,ie=t(85).jkI,oe=t(85).H1U,ae=t(85).EMU,ne=t(85).sM5,re=t(85).ESK,le=t(85).fII,de=t(85).j7K,ce=t(85).y79,me=t(85).z$9,ue=t(85).g4H,pe=t(85).rpY,ge=t(85).ccq,be=t(85).ELX,he=t(85).pkR,fe=t(85).D7I,ve=t(85).zkl,ye=t(85).icY,Me=t(85).DIE,we=t(85).c9r,Re=t(85).P0R,Ce=t(85).bsV,_e=t(85).BQ6,ke=t(85).dLQ,Te=t(85).nLZ,Ae=t(85).dMt,Pe=t(85).IY7,Ie=t(85).Au,Ze=t(85).Ixx,Fe=t(85).OtN,Se=t(85).wgE,xe=t(85).LtW,Ee=t(85).nx5,De=(0,h.defineMessages)({fullAccessTeamGuestsDisabledMessage:{id:"permissionRoleSelect.teamGuestPermissionItem.disabledPermissionitem.tooltip",[Ee]:"Teamspace guests can't have full access."}});class Ue extends l.Z{constructor(){super(...arguments),this.storeTypes={[xe]:P.Z},this.renderPermissionOverrideLabel=()=>{const{device:e}=this[Se];return n()(q.Z,{[_e]:{padding:12,[Fe]:this[Ie][Ze],[Pe]:`0 -1px 0 ${this[Ie][Ae]}`,[Te]:e[ke]?28:1},isMultiline:!0,isSmall:!0},void 0,n()(h.FormattedMessage,{id:"permissionRoleSelect.overrideMessage.caption",[Ee]:"You’ll override permissions from the parent page if you change this role."}))},this.isRemovingSelfRole=e=>this[Re][Ce]&&(0,m.getMostPermissiveRole)(this[Re][we],e)===this[Re][we]&&"none"===e,this.isDowngradingSelfRole=e=>this[Re][Ce]&&(0,m.getMostPermissiveRole)(this[Re][we],e)===this[Re][we]}renderComponent(){const{device:e}=this[Se],s=!!this[Re][Ce];return n()(F.ZP,{onClick:e=>{e[Me]()},popupType:e[ke]?F.Z4.SlideUp:F.Z4.Popup,[xe]:this.stores[xe],renderOrigin:e=>this[Re].origin?this[Re].origin:this[Re].isMenuItem?r[fe](Z.Z,o()({},e,{title:r[fe](h.FormattedMessage,(0,B.M)(this[Re][we],this[Re][ve],this.isRemovable(),s)[ye]),focused:!1,showExtensionArrow:!0})):n()(B.d,{[we]:this[Re][we],events:e,[he]:this[Re][he],buttonContents:this[Re].buttonContents,[be]:this[Re][be],[ve]:this[Re][ve],isRemovable:this.isRemovable(),isCurrentUser:s}),[ge]:this[Re][ge]?this[Re][ge]:I.Iw.Bottom,alignmentToOrigin:this[Re].alignmentToOrigin,[pe]:s=>{const t=this[Re][we];let i,a;if((0,m.isCumulativeRole)(t))i=[{key:"mixed_role_section",[pe]:e=>r[fe](U.Z,o()({},e,{topBorder:!1})),items:[{key:"mixed_role_description",[pe]:()=>n()(W._,{[we]:t}),action:()=>{}}]},{key:"bot_capabilities_warning",[pe]:e=>r[fe](U.Z,o()({},e,{topBorder:!0})),items:[{key:"warning_details",[pe]:e=>r[fe](x.Z,o()({},e,{shouldWrapCaption:!0,[ue]:"Integration permissions cannot be changed on a page. You can manage integrations in settings."})),action:()=>{}}]},{key:"remove_bot",[pe]:e=>r[fe](U.Z,o()({},e,{topBorder:!0})),items:[{key:me,[pe]:e=>this.getItem({[we]:me},e.focused,e),action:()=>{this.handleSelect(me),s.close()}}]}];else{const e=this.getAvailableRoles();i=[{key:"roles",[pe]:e=>r[fe](U.Z,o()({},e,{topBorder:0!==e.index})),items:e.map((e=>({key:e[we],[pe]:s=>this.getItem(e,s.focused,s),action:()=>{this.handleSelect(e[we]),s.close()}})))}]}return a=e[ke]?{menuType:R.og.Modal,title:n()(h.FormattedMessage,{id:"userPermissionsMenu.mobile.title",[Ee]:"Select role"}),right:n()(h.FormattedMessage,{id:"userPermissionsMenu.mobile.doneButton.label",[Ee]:"Done"}),onClickRight:s.close}:{menuType:R.og.Popup,width:264},r[fe](S.Z,o()({className:M.sharingPermissionRoleSelect,header:this[Re].header,footer:this[Re].footer},a),n()(E.Z,{type:E.i[ce],[de]:void 0,sections:i}),this[Re].showPermissionOverrideWarning&&this.renderPermissionOverrideLabel())}})}getItem(e,s,t){const i=!!this[Re][Ce];return this.renderItem({...(0,B.M)(e[we],this[Re][ve],this.isRemovable(),i),focused:s,[Re]:t,[le]:this.getItemDisabledReason(e[we]),availableRole:e})}renderItem(e){const{device:s}=this[Se],{onClick:t,key:i,...a}=e[Re],l=e.availableRole.disabledInfo;return l&&l.isDisabled?n()(L.Z,{delayThreshold:0,renderTooltip:e=>r[fe]("div",e,l[le]),placement:L.Z[re].Right,textWrap:!0,[pe]:t=>r[fe](Z.Z,o()({},t,{focused:e.focused,[he]:!0,disabledFeedback:!0,right:this[Re][we]===e.availableRole[we]?n()("div",{[_e]:{width:s[ke]?16:14}},void 0,c.Z.check()):void 0,title:n()("div",{[_e]:{[ne]:ae,[oe]:ie}},void 0,n()("div",{[_e]:{...e[_e],[te]:e[le]?6:0}},void 0,r[fe](h.FormattedMessage,e[ye]))),[ue]:e[ue]&&n()("span",{[_e]:{color:this[Ie][se]}},void 0,r[fe](h.FormattedMessage,e[ue])),shouldWrapCaption:!0}))}):n()(K.Z,{requireUpgradeToTier:Boolean(e[le])&&T[ee](this[Se]),analyticsName:this[Re].upgradeButtonName,renderUpgradeTooltip:()=>e[le],tooltipPlacement:L.Z[re].Left,onClick:t,onUpgradeClick:this[Re][X],[pe]:(t,i)=>{const{focused:l,...d}=(0,C.Z)(a,t);return r[fe](Z.Z,o()({},d,{focused:l||e.focused,right:this[Re][we]===e.availableRole[we]?n()("div",{[_e]:{width:s[ke]?16:14}},void 0,c.Z.check()):void 0,title:n()("div",{[_e]:{[ne]:ae,[oe]:ie}},void 0,n()("div",{[_e]:{...e[_e],[te]:e[le]?6:0}},void 0,r[fe](h.FormattedMessage,e[ye])),i,e.availableRole.tag&&n()(D.Z,{desktopStyle:{[Q]:7}},void 0,e.availableRole.tag)),[ue]:e[ue]&&n()("span",{[_e]:{color:this[Ie][se]}},void 0,r[fe](h.FormattedMessage,e[ue])),shouldWrapCaption:!0,[he]:!!s[ke]&&Boolean(e[le])}))}},i)}getItemDisabledReason(e){const s=(0,A.getSubscriptionTier)();if((0,g.QM)(s)){if((this[Re][ve]===p.bx?u.isMember(e):u.canEdit(e)&&!u.canAdmin(e))&&"public_permission"!==this[Re].type&&"bot_permission"!==this[Re].type)return this[Re][ve]===p.bx?n()(O.Z,{imageURL:d.Z.images[j].upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,[ue]:n()(h.FormattedMessage,{[Ee]:"Members cannot change workspace settings or invite new members.",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.caption"}),title:n()(h.FormattedMessage,{[Ee]:"Upgrade to add non-admin members",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.title"})}):n()(O.Z,{imageURL:d.Z.images[j].upsells.userReadAndWritePng,imageWidth:240,imageHeight:100,[ue]:n()(h.FormattedMessage,{[Ee]:"Users with edit access can edit a page but not share it with others.",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.caption"}),title:n()(h.FormattedMessage,{[Ee]:"Upgrade to add editors",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.title"})})}return!1}getAvailableRoles(){const{type:e,[ve]:s,isInvite:t,[we]:i,availableRoleItems:o,blockType:a}=this[Re];if(o&&o.length>0)return o;const n=[];return"explicit_team_guest_permission"===e?n.push({[we]:"editor",disabledInfo:{isDisabled:!0,[le]:w.default.formatMessage(De.fullAccessTeamGuestsDisabledMessage)}}):"bot_permission"!==e&&n.push({[we]:"editor"}),"space"===s&&(0,_.shouldShowMembershipAdmin)()&&n.push({[we]:"membership_admin"}),n.push({[we]:"read_and_write"}),"collection_view"!==a&&"collection_view_page"!==a||"bot_permission"===e&&"content_only_editor"!==i||n.push({[we]:$}),s!==p.bx&&("bot_permission"!==e&&n.push({[we]:"comment_only"}),"bot_permission"===e&&"reader"!==i||n.push({[we]:"reader"})),t||n.push({[we]:me}),n}isRemovingSpaceUser(e){return this[Re][ve]===p.bx&&"none"===e}isRemovable(){const e=this[Re].type;if(void 0!==this[Re].isRemovableOverride)return this[Re].isRemovableOverride;switch(e){case"user_permission":case"bot_permission":case"group_permission":return!0;case"space_permission":case J:case"team_permission":case G:case H:case Y:case z:case N:return!1;default:(0,b.unreachable)(e)}}async handleSelect(e){const{[ve]:s,[we]:t}=this[Re];if(t===e)return;const i=()=>{this[Re].onChange&&this[Re].onChange(e)};if(this.getItemDisabledReason(e)&&!y.default.isAdminMode)v.y(this[Se],{from:this[Re].upgradeButtonName,for:T[ee](this[Se])||"plus"}),this[Re][X]&&this[Re][X]();else if(this.isRemovingSelfRole(e))f.showDialog({showCancel:!0,keepFocus:!1,message:s===p.bx?n()(h.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromWorkspace.confirmationMessage",[Ee]:"Are you sure you want to remove your own access? You will lose access to the workspace, and any private pages will be lost."}):n()(h.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromPage.confirmationMessage",[Ee]:"Are you sure you want to remove your own access?"}),items:[{[ye]:n()(h.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfButton.label",[Ee]:"Remove"}),color:"red",onAccept:i}]});else if(this.isDowngradingSelfRole(e))f.showDialog({showCancel:!0,keepFocus:!1,message:n()(h.FormattedMessage,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfFromWorkspaceOrPage.confirmationMessage",[Ee]:"Are you sure you want to downgrade your own access?"}),items:[{[ye]:n()(h.FormattedMessage,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfButton.label",[Ee]:"Downgrade"}),color:"red",onAccept:i}]});else if(this.isRemovingSpaceUser(e))if(this[Re].onRemoveMemberClick)this[Re].onRemoveMemberClick();else{await qe({message:Le(!0)})&&i()}else i()}}function Le(e){return e&&(0,A.isEnterpriseTier)()?n()(h.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.enterprise.confirmationMessage",[Ee]:"If you remove this member, they will lose workspace access. After their removal, you may transfer their private pages to another member. <transferpagelink>Learn more</transferpagelink>.",values:{transferpagelink:e=>n()(V.Z,{href:(0,k.getLocalizedUrl)("guides.transferContent"),external:!0},void 0,e)}}):n()(h.FormattedMessage,e?{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.confirmationMessage",[Ee]:"Are you sure you want to remove this person? They will lose access to the workspace, and any private pages will be lost."}:{id:"userPermissionsMenu.removePermissionsModal.removeUserFromPage.confirmationMessage",[Ee]:"Are you sure you want to remove this person?"})}async function qe(e){const{message:s}=e;return new Promise((e=>{f.showDialog({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),message:s,items:[{[ye]:n()(h.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserButton.label",[Ee]:"Remove"}),color:"red",onAccept:()=>e(!0)}]})}))}Ue.displayName="PermissionRoleSelect";const We=Ue},93963:(e,s,t)=>{t.d(s,{z:()=>d});var i=t(77094),o=t.n(i),a=(t(67294),t(24405)),n=t(5366);const r=t(85).nx5,l=t(85).Yzm;function d(e){let{color:s,size:t,style:i}=e;window.__c={n:"StatusDot"};const d=(0,n.useIntl)(),c=(0,a.yK)((e=>({dot:{height:t||8,width:t||8,background:s||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...i}})),[t,s,i]);return o()("div",{role:"img","aria-label":d[l]({id:"statusDot.ariaLabel",[r]:"New"}),style:c.dot})}},42115:(e,s,t)=>{t.d(s,{Z:()=>b});var i=t(77094),o=t.n(i),a=(t(67294),t(83355)),n=t(93678),r=t(98742),l=t(58032),d=t(91718);const c=t(85).qc1,m=t(85).sOA,u=t(85).Joh,p=t(85).bSA;class g extends a.Z{renderComponent(){const{render:e,requireUpgradeToTier:s,[p]:t,renderUpgradeTooltip:i,onUpgradeClick:a,alwaysAllowClick:g,tooltipPlacement:b,upgradeButtonDesktopStyle:h,upgradeButtonMobileStyle:f}=this.props;let v,{onClick:y,[u]:M}=this.props;return s&&(v=o()(d.Z,{subscriptionTier:s,[p]:t,desktopStyle:{display:m,[c]:"none",...h},mobileStyle:{display:m,[c]:"none",...f}}),g||(y=e=>{n.y(this.environment,{from:t,for:s}),a&&a(e)},M=i)),o()(l.Z,{[u]:M||(()=>null),render:s=>e((0,r.Z)(s,{onClick:y}),v),disableTooltip:!M,placement:b})}}g.displayName="UpsellGate";const b=g},98905:(e,s,t)=>{t.d(s,{Z:()=>a});var i=t(49085);class o extends i.default{getInitialState(){return{count:0}}}const a=new o}}]);