"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4863],{21714:(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var o=t(77094),r=t.n(o),i=t(67294),a=t(480),l=t(81954),s=t(8848),c=t(7057),d=t(33728),u=t(24211),m=t(77671),f=t(35253),g=t(47307),h=t(92625),p=t(58985),w=t(5978),k=t(95477),v=t(12955),y=t(79315),C=t(73329),_=t(28121),x=t(91754),$=t(65162);const b=t(85).wgE;function A(){return i.useEffect((()=>{if(k.default.isAdminMode)return f.displayBanner({bannerStore:C.Z,id:"AdminModeBanner",render:()=>r()(E,{}),type:x.$.Blue,prepend:!0}),()=>{f.removeBanner({bannerStore:C.Z,id:"AdminModeBanner"})}}),[]),null}const B={marginLeft:12,color:s.ZP.white,border:`1px solid ${s.ZP.white}`};function E(){window.__c={n:"AdminModeBannerContent"};const e=(0,a.O7)(),n=(0,l.VK)((()=>y.default.state.currentUserStore),[]),t=(0,l.VK)((()=>null==n?void 0:n.getEmail()),[n]),o="makenotion.com"===(0,d.Gd)(t??""),[s,c]=i.useState("");if(i.useEffect((()=>{!async function(){try{const n=await(0,v.getCookie)(e,"notion_ghost_preferred_role");c((e=>n??""))}catch(n){console.error(n)}}()})),!t)return null;const u="full"===s?"restricted":"full";return r()("div",{},void 0,`You are currently logged in as ${t}`,r()("i",{},void 0,s&&o?` (${_.v[s].text} access)`:""),".",s&&o&&r()(Z,{[b]:e,currentUserEmail:t,alternateLoginRole:u}),r()($.Z,{style:B,onClick:()=>{w.navigate({[b]:e,url:"/__admin"})}},void 0,"Back to Admin Console"),r()($.Z,{style:B,onClick:()=>{m.B(e)}},void 0,"Logout as user"))}function Z(e){let{[b]:n,currentUserEmail:t,alternateLoginRole:o}=e;const a=i.useCallback((async()=>{const e=await m.N(n,{email:t,intercomLink:"switch role",preferredLoginRole:o});if("failed"===e.type)h.close(),g.showError(e);else{const{userId:r}=e.data,i=`Success! click "Continue" to enter account for "${t}" in ${_.v[o].text} mode.`,a=e.data.expiryTime?`${i} The user has granted access until ${(0,c.Yx)(e.data.expiryTime,"medium_with_time",u.al)}.`:i;h.close(),g.showDialog({message:a,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{p.loginAsAdmin({userId:r,[b]:n})}}]})}}),[n,t,o]);return r()($.Z,{style:B,onClick:a},void 0,`Switch to ${_.v[o].text} mode`)}}}]);