"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9259],{31263:(e,t,i)=>{i.r(t),i.d(t,{AppsSetup:()=>Ze});var o=i(77094),a=i.n(o),r=i(96486),n=i.n(r),d=i(67294),s=i(13991),l=i(480),p=i(81954),c=i(24405),u=i(66673),v=i(21202),g=i(82990),m=i(5366),f=i(54885),h=i(51127),w=i(6467),b=i(28020),x=i(93959),k=i(54258),S=i(29987),y=i(79315),B=i(12768),_=i(82136),C=i(39098),I=i(42922),Z=i(68785),P=i(90530),H=i(3909),L=i(64921);const W=i(85).jx_,A=i(85).RvT,M=i(85).rBf,F=i(85).bb$,T=i(85).ewQ,U=i(85).L97,E=i(85).OtN,R=i(85).X_m,D=i(85).UPJ,K=i(85).rOg,O=i(85).jkI,$=i(85).H1U,V=i(85).L_E;function X(e){window.__c={n:"AppSelector"};const{appTemplate:t,isSelected:i}=e,[o,r]=(0,d.useState)(!1),n=(0,p.VK)((()=>(0,x.SP)(t.uri)),[t.uri]),s=(0,c.yK)((e=>({[V]:{position:"relative",display:"flex",flexDirection:"column",[$]:O},appButton:{display:K,[$]:O,[D]:O,width:62,[R]:62,[E]:e[U],boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e[T].gray[200]:e[U]},selectedWrapper:{boxShadow:e[F],background:"dark"===e.mode?e[T].gray[200]:e.buttonBackground},logo:{width:32,[R]:32},logoSelected:{filter:"invert(41%) sepia(77%) saturate(2017%) hue-rotate(191deg) brightness(93%) contrast(89%)"},badge:{width:26,[R]:26,display:K,[$]:O,[D]:O,[E]:e[M],borderRadius:50,position:"absolute",top:-9,right:-9,border:`2px solid ${e.sidebarBackground}`,webkitBackdropFilter:"blur(12px)",opacity:1,[A]:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{[E]:e[M]},selectedBadge:{[E]:e.blueButtonBackground},deselectBadge:{[E]:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:O},buttonBadgeIcon:{width:16,[R]:16,fill:W}})),[]),l=(0,d.useCallback)((()=>{i?e.onDeSelect(t.uri):e.onSelect(t.uri),r(!1)}),[t.uri,i,e]);return a()("div",{style:s[V],onMouseEnter:()=>{r(!0),e.onHover()},onMouseLeave:()=>{r(!1),e.onUnhover()}},void 0,a()(L.Z,{style:{...s.appButton,...i?s.selectedWrapper:{}},onClick:l,ignoreLocalHoverState:!0},void 0,a()("img",{style:{...s.logo,...i?s.logoSelected:{}},src:n?n.logo:t.icon})),a()(L.Z,{style:{...s.badge,...i?o?s.deselectBadge:s.selectedBadge:o?s.selectBadge:{opacity:0,[A]:"scale(0.4)"}},onClick:l,ignoreLocalHoverState:!0},void 0,i?o?H.Z.closeSmall({width:16,[R]:16,fill:W}):H.Z.thinCheck({width:15,[R]:15,fill:W}):H.Z.plusThick({width:16,[R]:16,fill:W})),a()("div",{style:s.appName},void 0,n?n.name:t.shortName))}const G=i(85).PG2,N=i(85).fbO,z=i(85).nx5,j=i(85)._hx,q=i(85).xj_,J=i(85).AEv,Q=i(85).ChN,Y=i(85).qpZ,ee=i(85).P4,te=i(85).rps,ie=i(85).H1U,oe=i(85).UPJ,ae=i(85).$bT,re=i(85).EMU,ne=i(85).sM5,de=i(85).L_E,se=i(85).Ubh,le=i(85).qJ8,pe=i(85).GiO,ce=i(85).DgF,ue=i(85).TtP,ve=i(85).BQ6,ge=i(85).mFu,me=i(85).tLG,fe=i(85).pkR,he=i(85).Exd,we=i(85)._V5,be=i(85).xOW,xe=i(85).fBv,ke=i(85).gGi,Se=i(85).X_m,ye=i(85).Mcv,Be=i(85).Mm1,_e=n().compact(x.pP.map((e=>{var t;return null===(t=(0,x.SP)(e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function Ce(e){window.__c={n:"AppPreview"};const t=(0,l.O7)(),i=(0,p.VK)((()=>{const e=(0,b.getPageViewBlockDefaultPaddingLeftRight)(t),i=P.Z[Be](t),o=P.Z.defaultPageCoverHeight(t);return{left:e,[ye]:e,bottom:i,coverHeight:o}}),[t]),o=d.useMemo((()=>{const e={};return _e.forEach((i=>{var o;const a=i.uri.startsWith("notion://wiki")?(0,k.L)(i):null===(o=i.previews)||void 0===o?void 0:o.find((e=>"previewRootId"in e));a&&(e[i.uri]=new C.G(t,{id:a.previewRootId,table:v.iU,spaceId:a.spaceId}))})),e}),[t]),r=e.presetUri.startsWith("notion://wiki"),n=o[e.presetUri];return n?a()("div",{[ve]:{minWidth:900,[Se]:ke,[xe]:be,[we]:r?0:"10%"}},void 0,a()(P.Z,{store:n,loadingContainerStore:void 0,context:_.S.InAppTemplatePreview,titleStyle:r?{[he]:28}:void 0,[Be]:i.bottom,paddingLeft:i.left,paddingRight:i[ye],pageCoverHeight:i.coverHeight,[fe]:!0},n.id),a()("div",{[ve]:{[xe]:me,left:0,top:0,width:ke,[Se]:ke,opacity:1,zIndex:999,cursor:ge}})):null}function Ie(e){window.__c={n:"Carousel"};const t=(0,d.useCallback)(((e,t)=>(e%t+t)%t),[]),i=(0,u.Kt)(e.forceIndex,200,((e,t)=>e===t)),[o,r]=(0,d.useState)(0);(0,d.useEffect)((()=>{if(void 0===i)return;const a=t(-o,e.items[ue]),n=t(i-a,e.items[ue]);r((e=>e-n))}),[o,r,i,t,e.items[ue]]),(0,d.useEffect)((()=>{const t=setInterval((()=>{void 0===i&&r((e=>e-1))}),e.rotationDelayMs??2500);return()=>{clearInterval(t)}}),[r,i,e.rotationDelayMs]);const s=(0,c.yK)((e=>({item:{[xe]:me,top:0,left:0,bottom:0,[ye]:0,background:"white",borderRadius:"8px 0 0 8px",border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),l=e.items[ue],p=t(-o,l),v=e.items[t(p-1,l)].node,g=e.items[p].node,m=[...n().times(l,(e=>({key:`before${e}`,node:null}))),...e.items,...n().times(l,(e=>({key:`after${e}`,node:null})))],f=m.map(((i,r)=>{let{key:n}=i;const d=t(r+o,m[ue]),p=d>=l&&d<2*l,c=`translateX(${(d-l)*(e.offset??12)}px) translateY(${(d-l)*(e.offset??16-1.5*(d-l))}px)`,u=p?1-.15*(d-l):0;return a()("div",{[ve]:{...s.item,zIndex:m[ue]-d,transform:c,opacity:u}},n,d===l?g:d===l-1?v:void 0)}));return a()("div",{[ve]:{[xe]:be,...e[ve]}},void 0,f)}function Ze(e){window.__c={n:"AppsSetup"};const[t]=(0,p.AF)(B.default),{[ce]:i,[pe]:o,[le]:r,[se]:u}=(0,p.VK)((()=>{const{[ce]:e,[pe]:t,[le]:i,[se]:o}=y.default.state;return{[ce]:e,[pe]:t,[le]:i,[se]:o}}),[]),v=(0,l.O7)(),[b,x]=(0,d.useState)(!1),[k,_]=(0,d.useState)(void 0),P=(0,c.yK)((e=>({[de]:{backgroundColor:e.sidebarBackground,width:ke,[ne]:re,[ae]:"row",[oe]:"center",[ie]:"center",borderLeft:`1px solid ${e.lightDividerColor}`},left:{maxWidth:375,minWidth:320,maxHeight:ke,[re]:1,[ne]:re,[ae]:te,[ie]:ee,marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},[ye]:{[re]:1,[Se]:"70%",overflow:"visible"},[Y]:{[xe]:be,textAlign:"left",[Be]:42},title:{[Q]:g.Z[Q].semibold,[he]:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:g.Z.getHeaderFontFamily({locale:s.SP}),marginBottom:16,width:"90%"},[J]:{[he]:18,lineHeight:1.45,[we]:2,color:e.mediumTextColor,[Q]:g.Z[Q].regular},apps:{marginBottom:48,[ne]:"inline-flex",flexWrap:"wrap",[oe]:"space-between"},previewImage:{width:ke,[Se]:ke}})),[]),H=(0,p.VK)((()=>v.device.isPhone),[v]);if(!o||!i||!u)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const L=e=>{const i=n().uniq([...t[q],e]),o=n().sortBy(i,(e=>_e.findIndex((t=>t.uri===e))));B.default.setState({...t,[q]:o}),f.X3(v,{action:"select",preset:e})},W=e=>{const i=t[q].filter((t=>t!==e));B.default.setState({...t,[q]:i}),f.X3(v,{action:"deselect",preset:e})},A=t[q][ue]>0?t[q]:_e.map((e=>e.uri)),M=A.findIndex((e=>(null==k?void 0:k.uri)===e)),F=a()(Ie,{[ve]:{width:ke,[Se]:ke},items:A.map((e=>({key:e,node:a()(Ce,{presetUri:e})}))),forceIndex:M>-1?M:void 0});return d.createElement(d.Fragment,null,a()("div",{[ve]:P[de]},void 0,a()("div",{[ve]:P.left},void 0,a()("div",{[ve]:{[ne]:re,[ie]:ee,[ae]:te}},void 0,a()("div",{[ve]:P[Y]},void 0,a()("div",{[ve]:P.title},void 0,a()(m.FormattedMessage,{id:"apps.workspacesetup.header.title",[z]:"Get started with Notion"})),a()("div",{[ve]:P[J]},void 0,a()("div",{},void 0,a()(m.FormattedMessage,{id:"apps.workspacesetup.header.description",[z]:"Add templates to your workspace, and customize them in a few simple steps."})))),a()("div",{[ve]:P.apps},void 0,_e.map((e=>a()(X,{appTemplate:e,isSelected:t[q][N](e.uri),onSelect:L,onDeSelect:W,onHover:()=>_(e),onUnhover:()=>_(void 0)})))),t[q][ue]>0?a()(I.Z,{isLarge:!0,[ve]:{[Se]:40},[G]:async()=>{var e;if(!r||!o)return;x(!0);const i=S.default.mark("continue_with_apps"),a=null===(e=o.getTeamsStores()[0])||void 0===e?void 0:e.id,n=C.zX.createChildStore(r,{table:"team",id:a,spaceId:r.id}),d=o[j]()?[]:await h.installAppsInTeam({environment:v,presets:t[q],spaceStore:r,spaceViewStore:o,teamStore:n});d[ue]>0&&(t.redirectData={type:"redirect_page",pageId:d[0].id,spaceId:r.id},B.default.setState(t)),await w.next(v,t),S.default.measure(i,{environment:v,data:{appsSelected:t[q]}})},[fe]:b},void 0,b?a()(Z.Z,{isWhite:!0}):a()(m.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",[z]:"{num, plural, one {Continue with 1 template} other {Continue with {num} templates}}",values:{num:t[q][ue]}})):a()(I.Z,{isLarge:!0,[ve]:{[Se]:40},[G]:async()=>{x(!0),await w.next(v,t)},[fe]:b},void 0,b?a()(Z.Z,{isWhite:!0}):a()(m.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",[z]:"I'll add templates later"})))),!H&&a()("div",{[ve]:P[ye]},void 0,F)))}}}]);