"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3830],{56940:(e,t,o)=>{o.d(t,{Z:()=>P});var i=o(83355),s=o(1302),n=o(24677),a=o(98104),r=o(80935),d=o(63334),l=o(27724),c=o(24666);const u=o(85).ZG6,m=o(85).mPA,p=o(85).t5q,h=o(85).kzQ,g=o(85).Wp_,v=o(85).P0R,y=o(85).l81,f=o(85).Gnd,T=o(85).QmD,S=o(85).NHZ,M=o(85).yKO,w=o(85).XtO;class I extends i.Z{constructor(){super(...arguments),this.storeTypes={[w]:d.Z},this[M]=()=>{const{savedHref:e,savedSelectionStoreState:t,[S]:o}=this[f][w][T];window[y].href===e&&(this[v].ignoreBlockSelection&&t&&l.default[g]({...l.default[T],...t}),o&&"editing"===o.mode&&c.default[g]({...c.default[T],...o})),this[h]()}}willMount(){this[v][p]&&(this[m]=document.createElement(m),this[m].style.position="fixed",this[m].style.top="-9999px",this[m].style.left="-9999px",document.body.appendChild(this[m])),this[v].capture&&(this.saveSelection(),this[v][p]&&s.default[u]((()=>{this[m].focus()})))}willUpdate(e){this[v].capture?e.capture||(e[M]?this[M]():this[h]()):e.capture&&(this.saveSelection(),this[v][p]&&s.default[u]((()=>{this[m].focus()})))}willUnmount(){this[v].capture&&(this[v][M]?this[M]():this[h]()),this[v][p]&&document.body.removeChild(this[m])}renderComponent(){return this[v].render(this[M])}saveSelection(){this[f][w][g]({...this[f][w][T],savedHref:window[y].href,savedSelectionStoreState:l.default.cloneState(),[S]:c.default.cloneState(),savedTextSelectionRect:r.getSelectionRect()}),this[v].ignoreBlockSelection?n.clear(this.environment):a.clear(this.environment)}[h](){this[f][w][g]({...this[f][w][T],savedHref:void 0,savedSelectionStoreState:void 0,[S]:void 0,savedTextSelectionRect:void 0});const e=this[m];s.default[u]((()=>{e&&document.activeElement===e&&e.blur()}))}}I.displayName="IgnoreSelectionArea";const P=I},43568:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(77094),s=o.n(i),n=o(67294),a=o(24405),r=o(36596);const d=o(85).vvq,l=o(85).XEN;function c(e){let{paragraphs:t}=e;window.__c={n:"LoadingShimmerArray"};const o=(0,a.yK)((e=>({skeletonRect:{borderRadius:3,backgroundColor:e.lightDividerColor}})),[]),i=null==t?void 0:t.map(((e,t)=>{const i={height:e.lineHeight,marginTop:e.lineMargin,marginBottom:e.lineMargin},a={marginTop:e[l],marginBottom:e[l]},c=[...Array(e.repeat||1)].map(((t,n)=>s()("div",{style:a},n,e[d].map(((e,t)=>s()(r.Z,{style:{...o.skeletonRect,...i,width:`${e}%`}},t))))));return s()(n.Fragment,{},t," ",c," ")}));return n.createElement(n.Fragment,null," ",i," ")}},13380:(e,t,o)=>{o.d(t,{s:()=>p});var i=o(77094),s=o.n(i),n=o(97464),a=o.n(n),r=o(67294),d=o(480),l=o(24405),c=o(82990);var u=o(58032);const m=o(85).D7I;function p(e){let{children:t,style:o}=e;window.__c={n:"TextOverflowWithTooltip"};const{isSafari:i}=(0,d.Fy)(),n=(0,r.useRef)(null),p=function(e){const[t,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const i="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==i||i.observe(t),()=>null==i?void 0:i.unobserve(t)}),[]),t}(n),h=(0,l.yK)((()=>({overflowText:{...c.Z.textOverflowStyle,...o}})),[o]);return s()(u.Z,{delayThreshold:500,placement:u.Z.Placement.Bottom,forceVisibleState:!(i||!p)&&void 0,renderTooltip:()=>p?t:void 0,render:e=>r[m]("div",a()({ref:n,style:h.overflowText},e),t)})}},23830:(e,t,o)=>{o.d(t,{Z:()=>ts,s:()=>Ji});var i=o(97464),s=o.n(i),n=o(77094),a=o.n(n),r=o(96486),d=o.n(r),l=o(67294),c=o(83355),u=o(41892),m=o(23482),p=o(58573),h=o(3909),g=o(21202),v=o(97880),y=o(82990),f=o(5366),T=o(88295),S=o(60870),M=o(31299),w=o(52275),I=o(61519),P=o(1743),b=o(56940),Z=o(68894),k=o(3386),B=o(16354),C=o(68785),A=o(78140),x=o(89728),F=o(31278),N=o(72495),R=o(14871),O=o(33411),E=o(58032),z=o(64369),_=o(45653),L=o(13380),D=o(60442),U=o(28020),K=o(87279),W=o(98742),V=o(44499),G=o(98165),H=o(58239),q=o(33665),X=o(38755),Q=o(23537),Y=o(79315),j=o(88632),$=o(63334),J=o(29798),ee=o(49085);const te=o(85).GiO,oe=o(85).Qm1;class ie extends ee.default{getInitialState(){return{chosenSpaceId:void 0}}getChosenSpaceId(){const{chosenSpaceId:e}=this.state,{currentSpaceStore:t}=Y.default.state;return e||(null==t?void 0:t.id)}getChosenSpaceStore(){var e;return null===(e=this[oe]())||void 0===e?void 0:e.getSpaceStore()}[oe](){const{chosenSpaceId:e}=this.state,{[te]:t,currentUserRootStore:o}=Y.default.state;if(!e&&t)return t;if(e&&o){return o.getSpaceViewStores().find((t=>t.getSpaceId()===e))}}}const se=ie;var ne=o(42330),ae=o(39098),re=o(72087),de=o(32163),le=o(43765),ce=o(77137);const ue=o(85).nx5,me=o(85).i_Y,pe=o(85).G_Z,he=o(85).j7K,ge=o(85).nQ3,ve=o(85).kBp,ye=o(85).P0G;function fe(e){let{query:t,spaceId:o,[ye]:i,[ve]:s,getAutocompleteItems:n}=e;return a()(ce.Z,{request:{query:t,spaceId:o},render:(e,o)=>a()(Te,{[ge]:o,error:e,[ye]:i,[he]:Boolean(t)?0:void 0}),[ve]:s,debounce:M[pe],performRequest:n})}function Te(e){let{[ge]:t,error:o,[ye]:i,[he]:s}=e;return o?a()(N.Z,{},void 0,a()(le.Z,{title:a()(f.FormattedMessage,{[ue]:me,id:"moveBlockMenu.errorOnMove.label"})})):t&&0===t.length?a()(N.Z,{},void 0,a()(le.Z,{title:a()(f.FormattedMessage,{[ue]:"No results",id:"moveBlockMenu.noResults.label"})})):a()(de.Z,{type:de.i.Vertical,[he]:s,[ge]:t||[],store:i})}var Se=o(6287),Me=o(90468),we=o(29369),Ie=o(4708),Pe=o(65598),be=o(81954),Ze=o(24405),ke=o(11470),Be=o(76798);const Ce=o(85).L_E,Ae=o(85).Wt6,xe=o(85).nx5,Fe=o(85).Joh,Ne=o(85).D7I,Re=o(85).ESK;function Oe(e){let{store:t,menuListItemProps:o,hidePath:i,showLockIcon:n}=e;window.__c={n:"MoveToMenuItem"};const r=(0,be.VK)((()=>function(e){if(!(0,Ie.isMoveToUndoEnabled)())return;if((0,Pe.isBlockStore)(e)&&!e.canEdit())return a()(f.FormattedMessage,{id:"moveBlockMenu.needEditAccess.tooltip",[xe]:'You need "Can edit" access to "{parentName}" to move this page',values:{parentName:a()(Be.Z,{store:e,shouldWrap:!0})}});if((0,Pe.isTeamStore)(e)&&!e[Ae]())return a()(f.FormattedMessage,{id:"moveBlockMenu.TeamSidebarLocked.tooltip",[xe]:"This teamspace has its sidebar locked. You must be a teamspace owner to move to this teamspace."})}(t)),[t]),d=Boolean(r),c=(0,Ze.yK)((e=>({disabledTooltip:{maxWidth:240},recordMenuItem:d?{color:e.mediumTextColor}:{}})),[d]);return a()(E.Z,{placement:E.Z[Re].Left,textWrap:!0,style:c.disabledTooltip,disableTooltip:!d,[Fe]:()=>r,render:e=>l[Ne](ke.Z,s()({},(0,W.Z)(o,e),{disabled:d,store:t,hidePath:i,style:c.recordMenuItem,right:n?a()(Ee,{}):void 0}))})}function Ee(){window.__c={n:"MenuItemRightIconWithTooltip"};const e=(0,Ze.yK)((()=>({[Ce]:{display:"flex"},lockIcon:{width:16,height:16}})),[]);return(0,Ie.useIsMoveToUndoEnabled)()?null:a()("div",{style:e[Ce]},void 0,a()(E.Z,{placement:E.Z[Re].Bottom,[Fe]:()=>a()(f.FormattedMessage,{[xe]:"No edit access",id:"moveBlockMenu.noEditAccess.tooltip"}),render:t=>l[Ne]("div",t,h.Z.lockedDocument(e.lockIcon))}))}var ze=o(480),_e=o(86176),Le=o(75081),De=o(75024);const Ue=o(85).nx5,Ke=o(85).XCs,We=o(85).YDv,Ve=o(85).$bT,Ge=o(85).wgE,He=o(85).D7I,qe=o(85).g4H,Xe=o(85).oWD,Qe=o(85).Wqi;function Ye(e){let{[Qe]:t,[Xe]:o,menuListItemProps:i}=e;window.__c={n:"MoveToModalTypedItem"};const n=(0,ze.O7)(),r=(0,Ze.yK)((e=>({[qe]:{color:e.lightTextColor,fontSize:(0,De.yv)(n,"UISmall")}})),[n]);return l[He](ke.Z,s()({[qe]:a()("div",{style:r[qe]},void 0,a()(je,{[Qe]:t,[Xe]:o})),store:o},i))}function je(e){let{[Qe]:t,[Xe]:o}=e;window.__c={n:"PathCaption"};const i=(0,ze.O7)(),s=(0,be.VK)((()=>function(e){let{[Ge]:t,[Qe]:o,[Xe]:i}=e;const s=(0,Le.tV)({[Ge]:t,[Qe]:o,[Xe]:i});switch(s){case"team":return null;case"private":return a()(f.FormattedMessage,{id:"moveToHelpers.privatePageCaptionPrefix",[Ue]:"Private"});case"other":return a()(f.FormattedMessage,{id:"moveToHelpers.sharedPageCaptionPrefix",[Ue]:"Shared"});default:(0,v.unreachable)(s)}}({[Ge]:i,[Qe]:t,[Xe]:o})),[i,t,o]),n=(0,be.VK)((()=>(0,_e.L)(o)),[o])&&a()(_e.Z,{store:o,showFullPathInTooltip:!0});return n&&s?a()("div",{style:{display:"flex",[Ve]:"row"}},void 0,s,a()("div",{style:{[We]:4,[Ke]:4}},void 0,"/"),n):n&&!s?n:l[He](l.Fragment,null,s)}const $e=o(85).Oat,Je=o(85).TLr,et=o(85).Wqi;function tt(e){let{[et]:t,value:o,showPath:i,isCreateIn:s,onAccept:n}=e;const r=function(e){let{[et]:t,value:o}=e;const{type:i}=o;switch(i){case"page":return ae.G[Je](t,{table:g.iU,id:o.id});case"collection":return ae.NW[Je](t,{table:Se.v,id:o.id});case"space":return ae.H2[Je](t,{table:Me.bx,id:o.id});case"team":return ae.zX[Je](t,{table:we.e0,id:o.id});case $e:return;default:(0,v.unreachable)(i)}}({[et]:t,value:o});if(r)return(0,V.Hn)()&&r instanceof ae.NW?{key:r.id,render:e=>a()(Ye,{[et]:t,collectionStore:r,menuListItemProps:e}),action:()=>n(o)}:{key:r.id,render:e=>a()(Oe,{store:r,menuListItemProps:e,hidePath:!!s&&!i,showLockIcon:(0,Pe.isBlockStore)(r)&&!r.canEdit()}),action:()=>{(!(0,Ie.isMoveToUndoEnabled)()&&r.canEdit()||(0,Ie.isMoveToUndoEnabled)())&&n(o)}}}var ot=o(59054),it=o(69327),st=o(41432),nt=o(50906),at=o(64921),rt=o(93686),dt=o(5210),lt=o(35026);const ct=o(85).PG2,ut=o(85).Oat,mt=o(85).BCA,pt=o(85).nx5,ht=o(85).Hco,gt=o(85).fsm,vt=o(85).XNW,yt=o(85).jkI,ft=o(85).H1U,Tt=o(85).X_m,St=o(85).$bT,Mt=o(85).EMU,wt=o(85).sM5,It=o(85).Y7T;function Pt(e){return 14*(e+1)}function bt(e){window.__c={n:"MoveToOutlinerItem"};const{store:t,spaceStore:o,[It]:i,depth:s,isAlias:n}=e,r=(0,ze.O7)(),d=(0,Ze.Fg)(),[c,u]=l.useState(!1),m=(0,Ze.yK)((e=>({noChildrenLabelItem:{paddingLeft:Pt(s)+24,fontSize:14,paddingBottom:6.5,color:e.lightTextColor},outlinerItem:{[wt]:Mt,[St]:"row",fontSize:14,[Tt]:28,paddingLeft:Pt(s),color:e.regularTextColor,[ft]:yt},icon:{[wt]:Mt,[ft]:yt,justifyContent:yt,flexShrink:0,flexGrow:0,width:22,[Tt]:18,marginRight:4,position:"relative"}})),[s]);function p(){const e=ne.ZP.state;e.isOpen&&(u(!c),nt.trackMoveToToggleClick(r,{flowId:e.flowId,is_toggled:!c,destination_type:t?t.table:"private_pages"}))}const v=(0,be.VK)((()=>{if(t){const e=a()("div",{},void 0,h.Z.pageLinkIndicator({position:"absolute",width:"50%",[Tt]:"50%",right:0,bottom:0}));return t instanceof ae.zX?a()("div",{style:m.icon},void 0,a()(rt.p,{disabled:!0,store:t,size:18})):a()("div",{style:m.icon},void 0,a()(F.Z,{icon:t instanceof ae.G?t.getIcon():void 0,isEmptyPage:t instanceof ae.G&&t.isEmptyPage(),title:void 0,size:18,disabled:!0}),n&&e)}return a()(_.Z,{size:16,userStore:(0,U.getCurrentUserStore)(r),style:{[vt]:3}})}),[t,m.icon,r,n]),y=(0,be.VK)((()=>t?t.table===we.e0?"private"!==t.getTeamAccessLevel()?a()("div",{style:{[gt]:"80%"}},void 0,a()(Be.Z,{store:t})):a()("div",{style:{[wt]:Mt,[St]:"row",[ft]:yt,[gt]:"80%"}},void 0,a()(Be.Z,{store:t}),h.Z.lockedFilled({width:14,[Tt]:14,[vt]:4,fill:d[ht]})):a()("div",{style:{[gt]:"80%"}},void 0,a()(Be.Z,{store:t})):a()("div",{style:{[wt]:Mt,[ft]:yt,[vt]:7}},void 0,a()(f.FormattedMessage,{[pt]:"Private pages",id:"outliner.addToPrivatePages"}),a()("div",{style:{[vt]:2}},void 0,h.Z.locked({width:14,[Tt]:14,fill:d[ht],[vt]:4})))),[t,d[ht]]),T=(0,be.VK)((()=>{const e=new Set([st.Ti.page,st.Ti.collectionViewPage,st.Ti.collectionView,st.Ti.alias]),o=new Set([st.Ti.factory]);let s=[];return t?t instanceof ae.zX?s=t.getTeamPagesStores():t instanceof ae.G&&(s=(0,lt.Q2)(t,o,e)):s=i.getPrivatePages(r),s}),[t,i,r]);const S=0!==T.length?a()(At,{spaceStore:o,[It]:i,itemStores:T,depth:s+1,[mt]:e[mt],targets:e.targets}):a()("div",{style:m.noChildrenLabelItem},void 0,a()(f.FormattedMessage,{[pt]:"No pages inside",id:"outliner.NoPagesInside.placeholder"}));return l.createElement(l.Fragment,null,a()(at.Z,{[ct]:function(){e.moveToPagesOnly&&(null==t?void 0:t.table)!==g.iU?p():t?t instanceof ae.G?e[mt]({type:"page",id:t.id,spaceId:o.id}):e[mt]({type:"team",id:t.id,spaceId:o.id}):e[mt]({type:ut,spaceId:o.id})}},void 0,a()("div",{style:m.outlinerItem},void 0,a()(dt.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:c,color:d[ht],[ct]:p}),v,y)),c&&s<100&&S)}const Zt=o(85).BCA,kt=o(85).RRb,Bt=o(85).Wt6,Ct=o(85).Y7T;function At(e){window.__c={n:"MoveToOutliner"};const{spaceStore:t,[Ct]:o,itemStores:i,depth:s}=e,n=(0,be.VK)((()=>{const n=i?d().compact(i.map((i=>{if(i instanceof ae.zX&&i[Bt]()||i instanceof ae.G&&(0,V.Xk)(i,e[kt])&&i.canEdit()){const n=i instanceof ae.G&&i.getType()===st.Ti.alias,r=n?i.getAliasTargetStore():void 0,d=r instanceof ae.G?r:i;return a()(bt,{spaceStore:t,[Ct]:o,store:d,depth:s,[Zt]:e[Zt],[kt]:e[kt],isAlias:n,moveToPagesOnly:e.moveToPagesOnly})}}))):[];return e.addedItems?[...e.addedItems,...n]:n}),[i,e.addedItems,e.moveToPagesOnly,e[kt],e[Zt],t,o,s]),r=(0,Ze.yK)((e=>({sectionHeader:{color:e.mediumTextColor,fontSize:12,fontWeight:y.Z.fontWeight.medium,padding:"12px 14px 4px 14px"}})),[]);return a()(P.Z,{capture:!0},void 0,e.title&&a()("div",{style:r.sectionHeader},void 0,a()(z.Z,{isSmall:!0},void 0,e.title)),a()("div",{},void 0,n))}const xt=o(85).fmU,Ft=o(85).PzB,Nt=o(85).o9u,Rt=o(85).nx5,Ot=o(85).Yzm,Et=o(85).rps,zt=o(85).$bT,_t=o(85).BCA,Lt=o(85).TtP,Dt=o(85).Wt6,Ut=o(85).eiN,Kt=o(85).wgE,Wt=o(85).gGi,Vt=o(85).RRb,Gt=o(85).Y7T,Ht=o(85).Wqi;function qt(e){window.__c={n:"MoveToModal"};const{[Ht]:t,[Gt]:o,[Vt]:i,moveToPagesOnly:s}=e,n=(0,be.VK)((()=>Y.default.state.currentUserStore),[]),r=(0,ze.O7)(),l=(0,f.useIntl)(),c=(0,Ze.yK)((()=>({modal:{height:374,maxHeight:"70vh",paddingBottom:12},body:{width:Wt}})),[]),[u]=(0,ot.r5)((async()=>t&&n?await(0,Q.qX)({[Kt]:r,[Ht]:t,currentUserId:n.id}):[]),[r,t,n]),m=(0,be.VK)((()=>{if(!u.value)return;const e=o.getTeamsStores()[Ut]((e=>e[Dt]()));return e[Lt]>=7?e:d().uniqBy([...e,...u.value||[]],(e=>e.id))[Ut]((e=>e[Dt]())).slice(0,7)}),[o,u.value]),p=(0,be.VK)((()=>Xt({[Ht]:t,[Vt]:i})),[t,i]),h=(0,be.VK)((()=>o.getWorkspacePages()[Ut]((e=>(0,V.Xk)(e,i)&&e.canEdit()))),[o,i]),g=(0,be.VK)((()=>{if(Qt({[Kt]:r,[Vt]:i,chosenSpaceStore:t}))return a()(bt,{[Ht]:t,[Gt]:o,store:void 0,depth:0,[_t]:e[_t],[Vt]:e[Vt],moveToPagesOnly:s})}),[r,s,e,t,o,i]);return t&&o?a()("div",{style:c.modal},void 0,a()("div",{style:c.body},void 0,a()("div",{style:{display:"flex",[zt]:Et,height:Wt}},void 0,a()(At,{[Ht]:t,[Gt]:o,itemStores:p,addedItems:[g],moveToPagesOnly:s,depth:0,title:l[Ot]({[Rt]:"Suggested",id:"moveToModal.suggestedSection.title"}),[_t]:e[_t],[Vt]:e[Vt]}),m&&m[Lt]>0&&a()(At,{[Ht]:t,[Gt]:o,itemStores:m,moveToPagesOnly:s,depth:0,title:l[Ot]({[Rt]:"Teamspaces",id:"moveToModal.teamsSection.title"}),[_t]:e[_t],[Vt]:e[Vt]}),h[Lt]>0&&a()(At,{[Ht]:t,[Gt]:o,itemStores:h,moveToPagesOnly:s,depth:0,title:l[Ot]({[Rt]:"Workspace",id:"moveToModal.workspaceSection.title"}),[_t]:e[_t],[Vt]:e[Vt]})))):null}function Xt(e){let{[Ht]:t,[Vt]:o}=e,i=it.Z[Nt](t.id).map((e=>{let{store:t}=e;return t}))[Ut]((e=>e[Ft]()&&!o.some((t=>"block"===t.table&&t.id===e.id))));const s=o[Ut]((e=>"block"===e.getParentTable())).map((e=>e.getParentId())),n=s[Lt]===o[Lt],a=[...new Set(s)];return n&&1===a[Lt]&&(i=i[Ut]((e=>e.id!==a[0]))),i.slice(0,7)}function Qt(e){let{[Kt]:t,[Vt]:o,chosenSpaceStore:i}=e;const s=(0,X.Cx)(i),n=o.every((e=>e[xt]({[Ht]:i,[Kt]:t})));return!s&&!n}var Yt=o(73063),jt=o(43568),$t=o(54814),Jt=o(45811);const eo=o(85).fBu,to=o(85).Wqi,oo=o(85).wgE;function io(e){let{[oo]:t,[to]:o,joinedTeamIds:i,[eo]:s,moveToTargets:n}=e;const a=(0,be.VK)((()=>{const e=null==o?void 0:o.id;if(e)return function(e){if(!ne.ZP.state.isOpen||"typedInitialized"!==ne.ZP.state.variant)return;if(e!==ne.ZP.state.spaceId)return;return ne.ZP.state.typedDatabases}(e)}),[null==o?void 0:o.id]),[{value:r,status:d}]=(0,ot.r5)((async()=>{if(a)return a;if(!o)return;const e=ne.ZP.getTargetsDatabaseType();if(!e)return;const r=await $t.rG({[oo]:t,spaceId:o.id,databaseType:e,[eo]:s})??[],d=(0,Jt.m)({[oo]:t,typedDatabases:r,[to]:o,blocksToFilterParents:n,joinedTeamIds:i});return ne.ZP.setState({...ne.ZP.state,variant:"typedInitialized",typedDatabases:d,spaceId:o.id}),d}),[t,o,s,i,n,a]);return a?{success:!0,typedDatabases:a}:"resolved"===d&&r?{success:!0,typedDatabases:r}:{success:!1}}const so=o(85).nx5,no=o(85).AEv,ao=o(85).ChN,ro=o(85).wuN,lo=o(85).jkI;function co(e){window.__c={n:"MoveToModalTypedEmptyState"};const{onClick:t,databaseType:o}=e,i=(0,ze.O7)(),s=(0,Ze.yK)((e=>({modal:{display:"flex",flexDirection:"column",justifyContent:lo,alignItems:lo,marginTop:32,marginBottom:32},icon:{width:20,fill:e[ro]},title:{marginTop:6,[ao]:y.Z[ao].semibold,color:e[ro]},[no]:{marginTop:2,marginLeft:14,marginRight:14,textAlign:lo},button:{[ao]:y.Z[ao].semibold,fontSize:(0,De.yv)(i,"UISmall")}})),[i]),n=(0,m.hf)(o)[so],r=(0,m.u5)(o)[so];return a()("div",{style:s.modal},void 0,h.Z.boxedPerson(s.icon),a()(z.Z,{isSmall:!0,style:s.title},void 0,a()(f.FormattedMessage,{id:"moveToModalTypedEmptyState.title",[so]:"No other {singleItemName} databases",values:{singleItemName:n}})),a()(z.Z,{isSmall:!0,isMultiline:!0,style:s[no]},void 0,a()(f.FormattedMessage,{id:"moveToModalTypedEmptyState.subtitle",[so]:"Try adding {pluralItemName} to another teamspace",values:{pluralItemName:r}})),a()(x.Z,{isBlue:!0,onClick:t,style:s.button},void 0,a()(f.FormattedMessage,{id:"moveToModalTypedEmptyState.button",[so]:"Move somewhere else"})))}const uo=o(85).Yzm,mo=o(85).D7I,po=(o(85).ezV,o(85).nx5),ho=o(85).XEN,go=o(85).vvq,vo=o(85).OM8,yo=o(85).P0G,fo=o(85).Y7T,To=o(85).Wqi;function So(e){let{[To]:t,[fo]:o,targets:i,[yo]:n,onAccept:r}=e;window.__c={n:"MoveToModalTyped"};const c=(0,ze.O7)(),u=(0,Ze.yK)((()=>({modal:{maxHeight:"70vh"},loadingShimmer:{padding:16}})),[]),p=(0,be.VK)((()=>o.getTeamsStores().map((e=>e.id))),[o]),h=io({environment:c,[To]:t,parentStore:t,joinedTeamIds:p,moveToTargets:i}),g=(0,be.VK)((()=>h.success?h.typedDatabases.map((e=>function(e){const{store:t,[To]:o,onAccept:i}=e;return{key:t.id,render:e=>a()(Ye,{[To]:o,collectionStore:t,menuListItemProps:e}),action:()=>i({type:"collection",id:t.id,spaceId:o.id})}}({store:e,[To]:t,onAccept:r}))):[]),[h,t,r]),v=(0,be.VK)((()=>ne.ZP.getTargetsDatabaseType()),[]);if(!h.success)return a()("div",{style:u.loadingShimmer},void 0,a()(jt.Z,{paragraphs:[{[vo]:18,lineMargin:4,[go]:[100],repeat:1,[ho]:0},{[vo]:14,lineMargin:4,[go]:[100,40],repeat:1,[ho]:-2}]}));if(!v)throw new Error("Trying to show typed moveTo modal when database type is not available.");if(0===g.length)return a()(co,{databaseType:v,onClick:()=>{ne.ZP.state.isOpen&&ne.ZP.setState({...ne.ZP.state,variant:"untyped"})}});const y=(0,m.hf)(v)[po],T=[{key:"suggested",render:e=>l[mo](N.Z,s()({},e,{title:a()(f.FormattedMessage,{[po]:"{typedItemName} databases",id:"moveToModalTyped.suggestedMenuSection.title",values:{typedItemName:d().capitalize(y)}}),right:a()(Mo,{typedItemName:y})})),items:g.slice(0,7)}];return a()("div",{style:u.modal},void 0,a()(de.Z,{initialFocus:0,type:de.i.Vertical,sections:T||[],store:n}))}function Mo(e){let{typedItemName:t}=e;window.__c={n:"TypedMoveToTooltip"};const o=(0,Ze.yK)((e=>({icon:{width:13,height:13,fill:e.mediumIconColor},iconButton:{height:18,width:18,padding:0,marginTop:-4,marginBottom:-4,marginRight:-4}})),[]),i=(0,f.useIntl)();return(0,ze.Fy)().isMobile?null:a()(E.Z,{placement:E.Z.Placement.Bottom,style:{width:220},textWrap:!0,renderTooltip:()=>a()(f.FormattedMessage,{[po]:"{typedItemName} properties will be kept when moving to these locations",id:"moveTypedMenu.tooltip",values:{typedItemName:d().capitalize(t)}}),render:e=>l[mo](Yt.Z,s()({ariaLabel:i[uo]({id:"moveToModalTyped.helpIcon.ariaLabel",[po]:"Help icon for moving typed pages."}),icon:h.Z.help,iconStyle:o.icon,style:o.iconButton},e))})}const wo=o(85).GiO,Io=o(85).Oat,Po=o(85).Hco,bo=o(85).uPK,Zo=(o(85).ezV,o(85).RDp),ko=o(85).Mm1,Bo=o(85)._V5,Co=o(85).rI1,Ao=o(85).NF1,xo=o(85).XNW,Fo=o(85).nLZ,No=o(85).Au,Ro=o(85).ewQ,Oo=o(85).Scd,Eo=o(85).g7N,zo=o(85).VFs,_o=o(85).iB2,Lo=o(85).LlE,Do=o(85).H1U,Uo=o(85).rps,Ko=o(85).$bT,Wo=o(85).EMU,Vo=o(85).sM5,Go=o(85).BQ6,Ho=o(85).PXg,qo=o(85).ChN,Xo=o(85).pkR,Qo=o(85).Wp_,Yo=o(85).Yzm,jo=o(85).otN,$o=o(85).Y7T,Jo=o(85).Qm1,ei=o(85).t5q,ti=o(85).yKO,oi=o(85).GGR,ii=o(85).dLQ,si=o(85).oLs,ni=o(85).WCo,ai=o(85).JBY,ri=o(85).EIp,di=o(85).XUz,li=o(85).LWI,ci=o(85).AVP,ui=o(85).Q1R,mi=o(85).OaH,pi=o(85).Zij,hi=o(85).g5n,gi=o(85).BCA,vi=o(85).jUc,yi=o(85).OdC,fi=o(85).D7I,Ti=o(85).rpY,Si=o(85).TtP,Mi=o(85).uM3,wi=o(85).eiN,Ii=o(85).k$k,Pi=o(85).PkS,bi=o(85).Aw$,Zi=o(85).hID,ki=o(85).KuQ,Bi=o(85).RRb,Ci=o(85).eQV,Ai=o(85).TLr,xi=o(85).d73,Fi=o(85).gaz,Ni=o(85).v2u,Ri=o(85).Ql2,Oi=o(85).P0R,Ei=o(85).n4d,zi=o(85).wgE,_i=o(85).g65,Li=o(85).Sgw,Di=o(85).Wqi,Ui=o(85).Gnd,Ki=o(85).mGb,Wi=o(85).VMs,Vi=o(85).QmD,Gi=o(85).qJ8,Hi=o(85).tDk,qi=o(85).DgF,Xi=o(85).P0G,Qi=o(85).kBp,Yi=o(85).hZ1,ji=o(85).UhS,$i=o(85).nx5,Ji=(0,f.defineMessages)({createSubpage:{id:"moveToOrCreateMenu.createSubpage.description",[$i]:"Create a new sub-page where your cursor is, inside the current block."},newPageIn:{id:"moveToOrCreateMenu.newPageIn.description",[$i]:"Create a new page inside any existing page, then link to it in one go."},turnInto:{id:"moveToOrCreateMenu.turnInto.description",[$i]:"Turn blocks into new pages inside any existing database or page."},privatePagesTitle:{[$i]:"Private Pages",id:"moveBlockMenu.privatePagesMenuTitle"}});class es extends c.Z{constructor(){super(...arguments),this.storeTypes={[ji]:$.Z,[Yi]:se,[Qi]:re.Z,[Xi]:J.Z},this.getAutocompleteItems=async e=>{const{[qi]:t,[Hi]:o,[Gi]:i}=Y.default[Vi],{[Wi]:s}=e,n=this[Ui][Yi][Ki]();if(!(t&&n&&o&&i))return[];const a=(0,H.lX)({[Di]:n,[Li]:this[zi][_i].id}),[r,d,l,c]=await this.getPageAndCollectionResults(n,s),u=await a;return(0,V.Hn)()?this.getTypedAutoCompleteItems({chosenSpaceStore:n,savedQuickAddParent:u,[Wi]:s,blockResults:r,recentPageResults:c}):this[Oi][Ei]?this.createAutoCompleteItems(n,s,r,d,l,c):this.getAutoCompleteItems(n,u,s,r,d,l,c)},this.getPageAndCollectionResults=async(e,t)=>{const o=[],i=[],s=[];let n=[];if(t&&this.shouldAllowSearch()){const i=await M.searchPageIds({[zi]:this[zi],[Wi]:t,limit:20,[Ri]:e.id,[Ni]:!1,[Fi]:!1,source:"move_to_menu",[xi]:!0});for(const t of i.results){const i=ae.G[Ai](e[Ci](),{table:g.iU,id:t});if((0,V.Xk)(i,this[Oi][Bi])){const e={[ki]:i.id,[Zi]:i[bi]()};this[Pi](i)?s[Ii](e):o[Ii](e)}}}else{n=(await S.I0(e,e.id)).map((t=>{const o=ae.G[Ai](e[Ci](),{table:g.iU,id:t});return{[ki]:o.id,[Zi]:o[bi]()}})),n=n[wi]((t=>{let{[ki]:o}=t;const i=ae.G[Ai](e[Ci](),{table:g.iU,id:o});if((0,V.Xk)(i,this[Oi][Bi])){const e={[ki]:i.id,[Zi]:i[bi]()};return!this[Pi](i)||(s[Ii](e),!1)}}));const t=U.getCurrentSearchablePages(this[zi]);for(const e of t)if((0,V.Xk)(e,this[Oi][Bi])){const t={[ki]:e.id,[Zi]:e[bi]()};this[Pi](e)?s[Ii](t):i[Ii](t)}}return[o,i,s,n]},this.createAutoCompleteItems=(e,t,o,i,n,r)=>{const{isAddTo:c,isTurnIntoPage:u}=this[Oi],m=[],p=new Set,h=e=>{if(!e)return!1;const{key:t}=e;return!p.has(t)&&(p.add(t),!0)},g=d()[Mi]([this.getCurrentBlockMenuItem({[Wi]:t})]);!g[Si]||Boolean(u)||Boolean(c)||m[Ii]({key:"defaults",[Ti]:e=>l[fi](N.Z,e),items:g});const v=d()[Mi]([...r[yi](0,5).map((t=>{let{[ki]:o}=t;return tt({[Di]:e,value:{type:vi,id:o,[Ri]:e.id},showPath:!Boolean(u)&&!Boolean(c),[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})})),...o[yi](0,10).map((o=>{let{[ki]:i}=o;return tt({[Di]:e,value:{type:vi,id:i,[Ri]:e.id},showPath:!t,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})})),...i[yi](0,10).map((o=>{let{[ki]:i}=o;return tt({[Di]:e,value:{type:vi,id:i,[Ri]:e.id},showPath:!t,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})}))][yi](0,20)[wi](h));v[Si]>0&&m[Ii]({key:hi,[Ti]:e=>l[fi](N.Z,s()({},e,{[pi]:a()(f.FormattedMessage,{[$i]:"Suggested",id:"moveBlockMenu.suggestedSection.title"}),topBorder:m[Si]>0&&!Boolean(u)&&!Boolean(c)})),items:v});const y=d()[Mi](this[mi](t)[wi](h));y[Si]>0&&(0,Q.bq)()&&m[Ii]({key:"teams",[Ti]:e=>l[fi](N.Z,s()({},e,{isTitleUppercase:!0,[pi]:a()(f.FormattedMessage,{[$i]:"Teamspaces",id:"moveBlockMenu.teamsSection.title"}),topBorder:m[Si]>0})),items:y});const T=d()[Mi](n[yi](0,5).map((t=>{let{[ki]:o}=t;return tt({[Di]:e,value:{type:vi,id:o,[Ri]:e.id},showPath:!0,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})}))[wi](h));return T[Si]>0&&m[Ii]({key:ui,[Ti]:e=>l[fi](N.Z,s()({},e,{isTitleUppercase:!0,[pi]:a()(f.FormattedMessage,c?{[$i]:"Add from template",id:"moveBlockMenu.addFromTemplate.title"}:{[$i]:"Move to template",id:"moveBlockMenu.moveToTemplate.title"}),topBorder:m[Si]>0})),items:T}),g[Si]&&(Boolean(u)||Boolean(c))&&m[Ii]({key:"defaults",[Ti]:e=>l[fi](N.Z,s()({},e,{topBorder:m[Si]>0})),items:g}),m},this.getAutoCompleteItems=(e,t,o,i,n,r,c)=>{const u=this.getSuggestedMenuSection(o,e),m=[...c[yi](0,3),...i[yi](0,20)],p={key:ci,[Ti]:e=>l[fi](N.Z,s()({},e,{[pi]:a()(f.FormattedMessage,{[$i]:"Pages",id:"moveBlockMenu.pagesSection.title"})})),items:d().uniqBy(d().flatMap(d()[Mi]([this[li]({[Wi]:o,savedQuickAddParent:t}),...m.map((t=>{let{[ki]:i}=t;return tt({[Di]:e,value:{type:vi,id:i,[Ri]:e.id},showPath:!o,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})}))])),(e=>e.key))};return[u,{key:"teams",[Ti]:e=>l[fi](N.Z,s()({},e,{[pi]:a()(f.FormattedMessage,{[$i]:"Teamspaces",id:"moveBlockMenu.teamsSection.title"})})),items:d()[Mi](this[mi](o))[yi](0,10)},p][wi]((e=>e.items[Si]>0))},this[di]=this[ri]((()=>this[Oi][Bi].every((e=>e[ai]()))))}renderComponent(){if(!this[Oi].isAddTo&&!this[Oi][Ei]&&!ne.ZP[Vi][ni])return l[fi](l.Fragment,null);const{device:e}=this[zi],{[si]:t,isAddTo:o,isTurnIntoPage:i}=this[Oi],{[Qi]:n,[Xi]:r}=this[Ui],d=!n[Vi].ready&&t[Si]>0;let c,u;return c=this.shouldAllowSearch()?e[ii]?this.renderInputMenuItem(d):a()(N.Z,{isInput:!0},void 0,this.renderInputMenuItem(d)):void 0,u=e[ii]?{[oi]:this[Oi][oi],menuType:K.og.Modal,[pi]:a()(f.FormattedMessage,i?{[$i]:"Add to another page",id:"moveBlockMenu.mobileNewPageInj.label"}:o?{[$i]:"Add new page in",id:"moveBlockMenu.mobileAddTo.label"}:{[$i]:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:a()(f.FormattedMessage,{[$i]:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:this[Oi].onCancel,header:c}:{[oi]:this[Oi][oi],menuType:K.og.Popup,width:this[Oi].desktopWidth,header:c},a()(P.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,allowTabUntab:!1,allowUndo:!1},void 0,a()(k.Z,{capture:!0,onEsc:this[Oi].onCancel}),a()(b.Z,{store:this[Ui][ji],capture:this[Oi].captureSelection,ignoreBlockSelection:!1,[ei]:!1,[ti]:this[Oi][ti],[Ti]:()=>{var e;const t=!Boolean(this[Oi][si])&&!this[zi].device[ii]||(0,V.Hn)()&&!Boolean(this[Oi][si]);return l[fi](A.Z,s()({},u,{footer:this.renderFooter()}),t?this.renderMoveToModal():a()(fe,{[Wi]:this[Oi][si],[Ri]:null===(e=this[Ki]())||void 0===e?void 0:e.id,[Xi]:r,[Qi]:n,getAutocompleteItems:this.getAutocompleteItems}))}}))}renderMoveToModal(){const e=this[Ki](),t=this[Jo]();if(!t||!e)return;if((0,V.Hn)())return a()(So,{[Di]:e,[$o]:t,[gi]:this[Oi][gi],[Bi]:this[Oi][Bi],[Xi]:this[Ui][Xi]});const o=(0,X.Cx)(e);return a()(qt,{[Di]:e,[$o]:t,[gi]:this[Oi][gi],[Bi]:this[Oi][Bi],moveToPagesOnly:!this[di][Vi]||o})}renderFooter(){const{[Ei]:e,isAddTo:t,intl:o}=this[Oi],{[qi]:i,[Gi]:n}=Y.default[Vi],r=this[Ui][Yi][Ki]();if(!i||!r||!n)return;if(!(this[di][Vi]&&!n[jo]()&&!e&&!t))return null;const c=i.getSpaceViewStores(),u=d().uniqBy(d()[Mi](c.map((e=>{const t=e.getSpaceStore();return!(0,X.Cx)(t)&&t}))),(e=>e.id)),m={menuTitle:o[Yo]({[$i]:"Workspaces",id:"moveBlockMenu.spaceSwitcher.menuTitle"}),items:u,selectedItem:r,onSelect:e=>{this[Ui][Yi][Qo]({chosenSpaceId:e.id})},getKey:e=>e.id,renderItem:e=>l[fi](w.Z,s()({},e,{checkState:e.value.id===r.id,[pi]:(0,X.rn)(this[zi],e.value),icon:a()(F.Z,{icon:(0,X.Wd)(this[zi],e.value),isEmptyPage:!1,size:20,[Xo]:!0,[pi]:(0,X.rn)(this[zi],e.value)})})),renderOrigin:e=>l[fi](x.Z,s()({isSmall:!0,[Go]:{[qo]:"normal",fontSize:12,flexShrink:1}},e),a()(F.Z,{[Xo]:!0,icon:r.getIcon(),isEmptyPage:!1,size:16,[pi]:r.getName(),[Go]:{[Ho]:4}}),a()(L.s,{},void 0,(0,X.rn)(this[zi],r)),h.Z.chevronDown(this.getSpaceChevronStyle())),width:150};return a()("div",{},void 0,a()(I.Z,{vertical:!1,size:1}),a()("div",{[Go]:{[Vo]:Wo,[Ko]:Uo,[Do]:"flex-end",[Lo]:"4px"}},void 0,l[fi](R.Z,s()({key:"space-switcher"},m))))}renderInputMenuItemLabel(){const{intl:e,isAddTo:t,isTurnIntoPage:o}=this[Oi];if(this.isMovingToAnotherSpace())return e[Yo]({[$i]:"Duplicate page…",id:"moveToMenuRenderer.duplicateToSpace.label"});if(o)return e[Yo]({[$i]:"Search page to add in…",id:"moveToMenuRenderer.addNewPageIn.label"});if(t)return e[Yo]({[$i]:"Search page to add to…",id:"moveToMenuRenderer.addTo.label"});if((0,V.Hn)()){const t=(0,m.hf)(ne.ZP.getTargetsDatabaseType())[$i];return e[Yo]({[$i]:"Move {typedItemName} to…",id:"moveToMenuRenderer.moveTo.typedLabel"},{typedItemName:t})}return e[Yo]({[$i]:"Move page to…",id:"moveToMenuRenderer.moveTo.teamLabel"})}renderInputMenuItem(e){const{device:t}=this[zi],{[si]:o}=this[Oi],i=(0,V.Hn)()&&ne.ZP[Vi][ni]&&"typedUninitialized"===ne.ZP[Vi].variant;return l[fi](l.Fragment,null,a()(Z.ZP,{onCancel:()=>{ne.ZP[Vi][ni]&&ne.ZP[Qo]({...ne.ZP[Vi],[ni]:!1})},[Xo]:i,focus:!t[ii]||void 0,focusAfterAnimation:!0,value:o,onChange:e=>{this[Oi].onAutocompleteQueryChange(e.target.value),this[Ui][Xi][Qo]({...this[Ui][Xi][Vi],focus:{section:0,[_o]:0,[zo]:0}})},placeholder:this.renderInputMenuItemLabel(),inputLeft:a()(Z.f_,{icon:h.Z.search}),inputRight:a()(O.Z,{show:e,showDelay:400,showHold:0,[Ti]:e=>e&&a()(C.Z,{[Go]:{[Ho]:2}})}),[Go]:{[Eo]:-2}}),this.isMovingToAnotherSpace()&&a()(z.Z,{isMultiline:!0,isSecondaryColor:!1,[Go]:{[Oo]:this[No][Ro].gray[30],[Fo]:12,[xo]:12,[Ho]:12,[Lo]:8,[Ao]:6}},void 0,h.Z.warning({fill:this[No][Ro].orange[400],width:14,height:14,[Ho]:4,alignSelf:"center",[Vo]:"inline-block",[Co]:"text-bottom"}),a()("span",{},void 0,a()(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.message",[$i]:"You can only duplicate pages into another workspace — not move them."})),a()(B.Z,{href:(0,q.getLocalizedUrl)("guides.duplicateToSpace"),[Go]:{color:this[No][Ro].gray[500],[qo]:y.Z[qo].semibold,[Fo]:4}},void 0,a()(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.learnMoreLink",[$i]:"Learn more"}))))}getTypedAutoCompleteItems(e){let{chosenSpaceStore:t,savedQuickAddParent:o,[Wi]:i,blockResults:n,recentPageResults:r}=e;const{typedSuggestedMenuSection:c,typedSuggestedResults:u}=this.getTypedSuggestedMenuSection(i);let m=(0,V.XQ)({recentPageResults:r,blockResults:n,suggestedPages:u});const p=new Set((0,V.qB)(this[Oi][Bi]));p.size>0&&(m=m[wi]((e=>!p.has(e[ki]))));const h=d().uniqBy(d().flatMap(d()[Mi]([this[li]({[Wi]:i,savedQuickAddParent:o}),...m.map((e=>{let{[ki]:o}=e;return tt({[Di]:t,value:{type:vi,id:o,[Ri]:t.id},showPath:!i,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})}))])),(e=>e.key)),g=d()[Mi](this[mi](i))[yi](0,5),v=c.items[Si]>0,y={key:"teams",[Ti]:e=>l[fi](N.Z,s()({},e,{desktopStyle:{[Bo]:v?0:6,[ko]:6},[pi]:a()(f.FormattedMessage,{[$i]:"Teamspaces",id:"typedMoveBlockMenu.teamsSection.title"})})),items:g},T=c.items[Si]>0&&0===y.items[Si];return[c,y,{key:ci,[Ti]:e=>l[fi](N.Z,s()({},e,{desktopStyle:{[Bo]:T?0:6,[ko]:6},[pi]:a()(f.FormattedMessage,{[$i]:"Pages",id:"typedMoveBlockMenu.pagesSection.title"})})),items:h}][wi]((e=>e.items[Si]>0))}getSuggestedMenuSection(e,t){const o=0===e[Si]&&t?Xt({[Di]:t,[Bi]:this[Oi][Bi]}):[];return{key:Zo,[Ti]:e=>l[fi](N.Z,s()({},e,{[pi]:a()(f.FormattedMessage,{[$i]:"Suggested",id:"moveBlockMenu.suggestedSection.title"})})),items:d()[Mi]([this.getPrivatePagesMenuItem({[Wi]:e,chosenSpaceStore:t}),...o[wi]((e=>(0,V.Xk)(e,this[Oi][Bi]))).map((e=>tt({[Di]:t,value:{type:vi,id:e.id,[Ri]:t.id},showPath:!1,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})))])}}getTypedSuggestedMenuSection(e){if(!ne.ZP[Vi][ni]||"untyped"===ne.ZP[Vi].variant||"typedUninitialized"===ne.ZP[Vi].variant)throw new Error("Trying to render section when it's either not open, untyped, or typed but uninitialized (i.e. the typed databases are not fetched yet)");const{typedDatabases:t}=ne.ZP[Vi],o=this.getTypedMoveToMenuItems({[Wi]:e,typedDatabases:t}),i=(0,m.hf)(ne.ZP.getTargetsDatabaseType())[$i];return{typedSuggestedMenuSection:{key:Zo,[Ti]:e=>l[fi](N.Z,s()({},e,{[pi]:a()(f.FormattedMessage,{[$i]:"{typedItemName} databases",id:"moveBlockMenu.typedSuggestedSection.title",values:{typedItemName:d().capitalize(i)}}),right:a()(Mo,{typedItemName:i})})),items:o[yi](0,5)},typedSuggestedResults:t}}getCurrentBlockMenuItem(e){const t=this[Oi];if(!t.isAddTo||!t[Ei])return;if(e[Wi])return;const o=Y.default[Vi][Hi];if(!o)return;const i=t[bo]?ae.G[Ai](o,{table:g.iU,id:t[bo]}):void 0,n=T.gt(i);return n?{key:n.pageStore.id,[Ti]:e=>{const o=o=>l[fi](w.Z,s()({},(0,W.Z)(o||{},e),{icon:h.Z.plus({width:14}),[pi]:t[Bi][Si]>1?a()(f.FormattedMessage,{id:"moveBlockMenu.currentPage.pluralAddTitle",[$i]:"New sub-pages"}):a()(f.FormattedMessage,{id:"moveBlockMenu.currentPage.singleAddTitle",[$i]:"New sub-page"})}));return this[zi].device[ii]?o():a()(E.Z,{renderTooltip:()=>a()(D.Z,{imageURL:u.Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:l[fi](f.FormattedMessage,Ji.createSubpage)}),placement:E.Z.Placement.Right,delayThreshold:0,[Ti]:e=>o(e)})},action:()=>t[gi](n.createInValue)}:void 0}getPrivatePagesMenuItem(e){var t;const{[Wi]:o,chosenSpaceStore:i}=e,n=Ji.privatePagesTitle,r=this[Oi].intl[Yo](n).replace(/<[^>]*>/g,""),d=o?null===(t=(0,p.C6)(o,r))||void 0===t?void 0:t.score:void 0,c=o&&(d||0)>=p.V5;if((!o||c)&&this[di][Vi]&&(!i||Qt({[zi]:this[zi],[Bi]:this[Oi][Bi],chosenSpaceStore:i})))return{key:"private",[Ti]:e=>l[fi](w.Z,s()({icon:a()(_.Z,{size:22,userStore:(0,U.getCurrentUserStore)(this[zi])}),[pi]:a()("div",{[Go]:{[Vo]:Wo,[Ko]:"row"}},void 0,a()("span",{},void 0,l[fi](f.FormattedMessage,n)),(0,Q.bq)()&&a()("div",{[Go]:{[xo]:2}},void 0,h.Z.locked({width:14,height:14,fill:this[No][Po]})))},e)),action:()=>{this[Oi][gi]({type:Io})}}}[li](e){const{isAddTo:t}=this[Oi],{[Wi]:o,savedQuickAddParent:i}=e,s=this[Ki]();if(s)return t&&!o&&"space"===i.type||"page"===i.type?tt({[Di]:s,value:i,showPath:!0,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]}):void 0}getTypedMoveToMenuItems(e){const{[Wi]:t,typedDatabases:o}=e,i=this[Ki]();if(!i||!t||!o)return[];return(0,p.ZP)(t,o,(e=>{const t=String(e.getName())||"",o=(0,G.getNonSpaceRootAncestor)(e);return[t,o instanceof ae.zX&&o.getName()||""].join(" ")})).map((e=>tt({[Di]:i,value:{type:"collection",id:e.id,[Ri]:i.id},showPath:!0,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})))[wi](v.isDefined)}[mi](e){if(e&&!this[di][Vi])return[];const t=this[Ki](),o=this[Jo]();if(!t||!o)return[];let i=o.getTeamsStores();return e&&(i=(0,p.ZP)(e,i,(e=>e.getName()||""))),i.map((e=>tt({[Di]:t,value:{type:"team",id:e.id,[Ri]:t.id},showPath:!1,[Ei]:this[Oi][Ei],[gi]:this[Oi][gi]})))[wi](v.isDefined)}shouldAllowSearch(){return j.Z[Vi].online}[Pi](e){return!!this[Oi][Ei]&&e.isTemplate()}getSpaceChevronStyle(){return{width:10,[xo]:4,fill:this[No].lightIconColor}}isMovingToAnotherSpace(){var e;const{[Yi]:t}=this[Ui];return!!t&&t.getChosenSpaceId()!==(null===(e=Y.default[Vi][Gi])||void 0===e?void 0:e.id)}[Ki](){return this[Ui][Yi][Ki]()??Y.default[Vi][Gi]}[Jo](){return this[Ui][Yi][Jo]()??Y.default[Vi][wo]}}es.displayName="MoveToOrCreateMenu";const ts=(0,f.injectIntl)(es)},63334:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(49085);class s extends i.default{getInitialState(){return{}}}const n=s}}]);