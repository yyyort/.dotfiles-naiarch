"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8400],{13658:(t,e,i)=>{i.d(e,{Z:()=>p});var o=i(77094),r=i.n(o),n=(i(67294),i(83355)),s=i(49085),a=i(5366),d=i(64921);const c=i(85).nx5,l=i(85).cx2,h=i(85).ij9,u=i(85).P0R,b=i(85).wfR;class f extends n.Z{constructor(){super(...arguments),this.storeTypes={open:s.default[b](!1)},this.handleOpen=()=>{this.stores.open.setState(!0)}}renderComponent(){return this.stores.open.state||this[u].items.length<=this[u][h]?r()("div",{},void 0,this[u].items):r()("div",{},void 0,this[u].items.slice(0,this[u][h]),r()(d.Z,{onClick:this.handleOpen,style:this[l]()},void 0,r()(a.FormattedMessage,{[c]:"View {moreCount} more",id:"activity.viewMoreButton.label",values:{moreCount:this[u].items.length-this[u][h]}})))}[l](){return{display:"flex",alignItems:"center",height:28,fontSize:12,color:this.theme.lightTextColor,padding:0,paddingLeft:52,paddingRight:16}}}f.displayName="ViewMore";const p=f},78976:(t,e,i)=>{i.d(e,{Z:()=>O});var o=i(77094),r=i.n(o),n=i(67294),s=i(480),a=i(81954),d=i(24405),c=i(15145),l=i(21202),h=i(6287),u=i(90468),b=i(29369),f=i(97880),p=i(57688),v=i(62820),m=i(84076),g=i(31278),y=i(76798),A=i(17022),k=i(22649);const C=i(85).D7I,S=i(85).wgE,T=i(85).pXY,w=i(85).L_E,x=i(85).voC;function P(t){window.__c={n:"Title"};const{titledRecordStore:e,[x]:i,activity:o,tabArgs:P}=t,O=(0,a.VK)((()=>e.getModel()),[e]),M=(0,s.O7)(),U=(0,a.VK)((()=>null==O?void 0:O.getRenderIcon({[x]:i})),[O,i]),R=(0,d.yK)((()=>({[w]:k.lS,icon:k.e9,[T]:(0,k.TL)(void 0!==U)})),[U]),_=(0,n.useCallback)((()=>{const t=e.table;switch(t){case l.iU:case h.v:case u.bx:(0,A.V3)({[S]:M,activity:o,...P});break;case b.e0:(0,A.dG)({[S]:M,activity:o,...P}),p.openTeamHome({[S]:M,teamStore:e,shouldScroll:!0}),v.Z.setState({...v.Z.state,open:!1});break;default:(0,f.unreachable)(t)}}),[o,M,P,e]),B=(0,a.VK)((()=>{if(O&&O.table!==b.e0)return O.getRenderUrl({[x]:i,pageVisitSource:c.tY.Notification})}),[O,i]);return O?r()(m.Z,{href:B,onClick:_,external:!1,innerStyle:R[w],inline:!0},void 0,U&&n[C](n.Fragment,null,r()(g.Z,{disabled:!0,icon:U,isEmptyPage:!1,size:18,style:R.icon}),r()("span",{},void 0," ")),r()(y.Z,{store:e,style:R[T]})):null}const O=n.memo(P)},17022:(t,e,i)=>{i.d(e,{ME:()=>u,dG:()=>b,V3:()=>f,BE:()=>p,h9:()=>m});var o=i(15145),r=i(82813),n=i(64002),s=i(50906),a=i(19719),d=i(51456),c=i(4761);const l=i(85).wGD,h=i(85).wgE;function u(t){return(0,n.addQueryParams)(t,{[o.$X]:o.tY.Notification})}function b(t){const e=t.mightCloseTab??!0;v({target:"body",...t,mightCloseTab:e})}function f(t){const e=t.mightCloseTab??!0;v({target:"title",...t,mightCloseTab:e})}function p(t){v({target:"add_reaction",...t,mightCloseTab:!1})}function v(t){const{target:e,[h]:i,activity:o,notification:n,source:u,tab:b,mightCloseTab:f}=t,p="notifications_tab"===u?c.ZP.state.sessionId:void 0,v="notifications_tab"===u?c.ZP.isFilteredToUnreadOnly():void 0;s.trackClickUpdate(i,{target:e,activity_id:o.id,notification_id:null==n?void 0:n.id,sessionId:p,is_filtered:v,tab:b}),f&&a.maybeTrackCloseUpdatesTabOnAction({[h]:i,target:e}),n&&r.e((0,d.getClientEventTracker)(i),{alreadyRead:n.read,[l]:n.id,activityId:n.activity_id,from:e,sessionId:p})}function m(t){const{notification:e,activity:i,[h]:o,tab:r}=t,n={[h]:o,activity:i,[l]:null==e?void 0:e.id,alreadyRead:Boolean(null==e?void 0:e.read),tab:r};return{onBacklinkClicked:t=>a.trackNotificationBacklinkClick({...n,backlinkPageId:t}),onArchiveClicked:()=>a.trackArchiveNotification(n),onMarkAsReadClicked:()=>a.trackMarkNotificationAsRead(n),onMarkAsUnreadClicked:()=>a.trackMarkNotificationAsUnread(n),onNotificationFrameClicked:()=>a.trackNotificationFrameClicked(n)}}},90097:(t,e,i)=>{i.d(e,{uA:()=>bt,XW:()=>ut,P6:()=>ht,cr:()=>vt,jC:()=>pt,N8:()=>ft});var o=i(96486),r=i.n(o),n=i(66897),s=i(77094),a=i.n(s),d=i(67294),c=i(5366),l=(i(41892),i(8848)),h=i(7057),u=(i(3909),i(24211)),b=(i(54368),i(77420)),f=i(19889),p=(i(97880),i(82990)),v=i(15145),m=i(76725),g=i(55384),y=i(63306),A=i(64002);class k extends d.PureComponent{render(){const{href:t}=this.props;return a()("a",{href:(0,A.sanitizeUrl)({str:t,allowNoProtocol:!0}),style:this.getStyle(),className:"notion-email-button-hover"},void 0,this.props.children)}getStyle(){return{display:this.props.inline?"inline":"block",color:l.ZP.inherit,textDecoration:"none",cursor:"pointer",...this.props.style}}}const C=k,S=i(85).Uie,T=i(85).rI1,w=i(85).sOA,x=i(85).Wkb,P=i(85).voC,O=i(85).CwG,M=i(85).XCs,U=i(85).YDv;class R extends d.PureComponent{render(){const t=this.getPathWithoutDomain();return t.length>0?a()("div",{},void 0,this.props.left,(0,m.Z)(t,(t=>a()("span",{style:{[U]:4,[M]:4}},`slash:${t}`,"/"))),this.props.right):null}getPathWithoutDomain(){const{getRecordValue:t,blockId:e,intl:i}=this.props,o=y.uJ({table:"block",id:e},t),n=g.om[O](t);return r().initial(o.reverse()).map((t=>{const e=g.kk.fromBlock(t),o=e.getRenderTitle({[P]:n,[x]:this.props[x],intl:i})||i.formatMessage({id:"recordPath.untitledBlock.placeholder",defaultMessage:"Untitled"}),r=e.getRenderUrl({[P]:n,pageVisitSource:v.tY.Email});return a()(C,{href:`${this.props.baseUrl}${r}`,style:{display:w,maxWidth:120,[T]:"top",...p.Z[S]}},t.id,o)}))}}const _=(0,c.injectIntl)(R);i(43593),i(17755),i(58102);i(85).gGi;d.PureComponent;const B=i(85).Gpy,N=i(85).nx5,D=i(85).TtP,I=(i(85).OtN,i(85).TEz),Z=i(85).Gp0,W=i(85).nSw,V=i(85).Dy6,E=i(85).g7N,F=i(85).xoW,$=i(85).Wkb,G=i(85).zkl,Y=i(85).$XE,z=i(85).BQ6,K=i(85).$W2,L=i(85).rI1,X=i(85).Mm1,H=i(85)._V5,j=i(85).P0R,q=i(85).rGB,J=i(85).Au;class Q extends d.PureComponent{constructor(){super(...arguments),this[J]=(0,l.gh)({[J]:"light"})}render(){const{[q]:t}=this[j];return a()(G,{[z]:{[H]:12,[X]:t?0:8,borderSpacing:0,width:"100%",borderCollapse:"separate"}},void 0,a()("tr",{},void 0,a()("td",{[z]:{[L]:"top",width:Q[K]+6,minWidth:Q[K]+6,[H]:2}},void 0,this[j].icon),a()("td",{},void 0,this.renderHeader())),a()("tr",{},void 0,a()("td",{}),a()("td",{[z]:{maxWidth:400}},void 0,t&&this.renderChildren())),this[Y]())}[Y](){const{isLast:t}=this[j];if(!t)return a()("tr",{},void 0,a()("td",{colSpan:2},void 0,a()("div",{[z]:this.getBorderBottomStyle()})))}renderHeader(){const{timestamp:t,header:e,intl:i}=this[j],o=(0,h.Yx)(Math.min(t,Date.now()),"medium_with_time",(0,u.E2)(i),this[j][$]);return a()("div",{[z]:Q[F]},void 0,a()("div",{},void 0,e),a()(G,{[z]:{...this.getPathAndTimeStyle(),marginTop:4,[E]:this[j][q]?8:4,borderSpacing:0}},void 0,a()("tr",{},void 0,a()("td",{},void 0,o),a()("td",{},void 0,this[j][V]&&a()(_,{[W]:this[j][W],blockId:this[j][V],[Z]:this[j][Z],left:a()("span",{[z]:this.getDotStyle()},void 0,"Â·"),[$]:this[j][$]})))))}renderChildren(){return a()("div",{},void 0,this[j][q])}getBorderBottomStyle(){return{borderBottom:`1px solid ${this[j][J].regularDividerColor}`,[E]:4}}getPathAndTimeStyle(){return{fontSize:12,color:this[J][I],whiteSpace:"nowrap"}}getDotStyle(){return{color:this[J][I],marginLeft:4,marginRight:4}}}Q[K]=28,Q[F]={fontSize:14,lineHeight:1.4};const tt={fontWeight:p.Z.fontWeight.semibold};(0,c.injectIntl)(Q);var et=i(21202),it=i(6287),ot=i(33709),rt=i(90468),nt=i(70203),st=i(33929),at=i(67669),dt=i(79315),ct=i(39098);const lt=i(85).TLr;function ht(t){const{edits:e,rootStore:i}=t,o=r().uniqWith(e.flatMap((t=>t.authors||[])),r().isEqual);return r().compact(o.map((t=>bt(t,i))))}function ut(t){const{currentUserStore:e}=dt.default.state,i=null==e?void 0:e.id;return function(t,e,i){const o=e.find((t=>t.id===i)),r=e.map((e=>(0,n.$4)(t,e)));if(1===e[D])return a()("span",{},void 0,a()(c.FormattedMessage,o?{[N]:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label",[B]:{b:t=>a()("span",{[z]:tt},void 0,t)}}:{[N]:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.label",[B]:{author:r[0],b:t=>a()("span",{[z]:tt},void 0,t)}}));if(2===e[D]){if(o){const i=e.filter((t=>t!==o)).map((e=>(0,n.$4)(t,e)));return a()("span",{},void 0,a()(c.FormattedMessage,{[N]:"<b>{firstAuthor}</b> and you",id:"activitySection.authorPhrase.forTwoAuthorsCurrentUser.label",[B]:{firstAuthor:i[0],b:t=>a()("span",{[z]:tt},void 0,t)}}))}return a()("span",{},void 0,a()(c.FormattedMessage,{[N]:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>",id:"activitySection.authorPhrase.forTwoAuthors.label",[B]:{firstAuthor:r[0],secondAuthor:r[1],b:t=>a()("span",{[z]:tt},void 0,t)}}))}if(r[D]>2){if(o){const i=e.filter((t=>t!==o)).map((e=>(0,n.$4)(t,e))),r=a()(c.FormattedMessage,{[N]:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b> and you} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthorsCurrentUser.label",[B]:{numberOfOtherAuthors:i[D]-2,firstAuthor:i[0],secondAuthor:i[1],b:t=>a()("span",{[z]:tt},void 0,t)}});return a()("span",{},void 0,r)}{const t=a()(c.FormattedMessage,{[N]:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthors.label",[B]:{numberOfOtherAuthors:r[D]-2,firstAuthor:r[0],secondAuthor:r[1],b:t=>a()("span",{[z]:tt},void 0,t)}});return a()("span",{},void 0,t)}}return a()("span",{[z]:tt},void 0,a()(c.FormattedMessage,{[N]:"Nobody",id:"activitySection.authorPhrase.forNoAuthors.label"}))}(st.default.getIntl(),t,i)}function bt(t,e){if(t.table===f.KJ){const i=ft(t.id,e);if(i)return(0,n.dp)(i)}else{const i=function(t,e){return(0,ct.Kv)(e,{table:b.cZ,id:t}).getValue()}(t.id,e);if(i)return(0,n.D$)(i)}}function ft(t,e){return ct.U6[lt](e,{table:f.KJ,id:t}).getValue()}function pt(t){const{tab:e,recordId:i,recordType:o,rootStore:r,environment:n}=t;if("all"===e){if(!i)return!1;let t;return t="block"===o?ct.G[lt](r,{table:et.iU,id:i}):"collection"===o?ct.NW[lt](r,{table:it.v,id:i}):ct.H2[lt](r,{table:rt.bx,id:i}),(0,at.isRecordPrivateToUser)(n,t)}return!1}function vt(t){const{activity:e,rootStore:i}=t;if("commented"!==e.type)return;const o=i.getRecordModel({table:ot.qF,id:e.discussion_id,spaceId:e.space_id});if(!o)return;const r=o.getContext();if(!r)return;const n=(0,nt.filterAnnotations)(r,(t=>!(0,nt.isDiscussionAnnotation)(t)||(0,nt.getDiscussionAnnotationData)(t)===o.id));return{id:o.id,context:n}}},22649:(t,e,i)=>{i.d(e,{lS:()=>d,e9:()=>c,nP:()=>l,OD:()=>h,c3:()=>u,_W:()=>b,TL:()=>f,b9:()=>p});var o=i(82990);const r=i(85).XCs,n=i(85).YDv,s=i(85).ChN,a={userSelect:"text",WebkitUserSelect:"text"},d={padding:1,...a},c={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},l={[s]:o.Z[s].semibold};function h(t){return{padding:0,[n]:u(t),[r]:16,paddingBottom:3,...a}}function u(t){const{source:e,isMobile:i}=t;return"notifications_tab"===e?52+(i?3:2):52}function b(t){return{height:26,[n]:8,[r]:8,color:t.mediumTextColor}}function f(t){return{display:"inline",whiteSpace:"normal",marginRight:t?3:0,wordBreak:"break-word",...l}}function p(t){return{boxShadow:t.plainButtonBoxShadow,height:26,[n]:8,[r]:8,[s]:500,color:t.regularTextColor}}}}]);