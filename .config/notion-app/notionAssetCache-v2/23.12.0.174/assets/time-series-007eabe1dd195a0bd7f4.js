"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7994],{16444:(t,e,o)=>{o.r(e),o.d(e,{TimeSeries:()=>q,useTimeSeriesPalette:()=>G});var a=o(77094),r=o.n(a),i=o(41788),n=o(29223),s=o(33592),l=o(50953),d=o(92667),u=o(68414),c=o(98649),m=o(89163),f=o(42816),h=o(93382),p=o(70186),y=o(37495),k=o(67294),M=o(17126),v=o(59730),x=o(63143);function g(t){if(void 0===t)return M.ou.utc();const e={zone:"utc"};return"number"==typeof t?M.ou.fromMillis(t,e):M.ou.fromISO(t,e)}function w(t,e){const o=e?g(e):M.ou.utc(),a=g(t??function(t){const{days:e,endDate:o,startDate:a}=t;if(e<=0)throw new v.p8("Days must be greater than 0");const r=o?g(o):M.ou.utc();if(!r.isValid)throw new v.p8(`endDate ${o} is in an invalid format`);const i=a?g(a).toMillis():0,n=r.minus({days:e-1}).toMillis();return Math.max(n,i)}({days:7,endDate:e}));if(!a.isValid)throw new v.p8(`startDate ${t} is in an invalid format`);if(!o.isValid)throw new v.p8(`endDate ${e} is in an invalid format`);if(a>o)throw new v.p8(`startDate ${t} => ${a.toISO()} is after endDate ${e} => ${o.toISO()}`);return{startTimestamp:a.toMillis(),endTimestamp:o.toMillis()}}var D=o(8848),T=o(7057),b=o(53877),S=o(51454),Z=o(13991),L=o(24405);const O=o(85).ewQ,$=o(85).BQ6,F=o(85).H1U,C=o(85).u6Q,_=o(85).$bT,I=o(85).sM5,P=o(85).IY7,A=o(85).NF1,U=o(85).Scd,V=o(85)._Fe,Q=o(85).Exd,W=o(85).Hco,Y=o(85).qc1,j=o(85).a3v,z=o(85).KS0,B=o(85).Gpy,E=o(85).X_m,H=o(85).tw8,N={top:7,right:0,[H]:25,left:16};const q=(0,p.Z)((function(t){window.__c={n:"TimeSeriesWithTooltip"};const{width:e,[E]:o,layers:a,showTooltip:p,hideTooltip:M,tooltipData:v,tooltipTop:D=0,tooltipLeft:O=0,curveType:q="curveLinear",renderTooltipSubLabel:G}=t,K=(0,L.Fg)(),X=(0,k.useMemo)((()=>{let e;try{e=function(t,e){const{startTimestamp:o,endTimestamp:a}=w(t,e),r=[];for(var i=o;i<=a;)r.push(g(i).toISODate()),i+=x.DayMs;return r}(t.startDate,t.endDate)}catch(i){return[]}const o=(0,x.groupBy)(t.data,(t=>t.ds)),r=Object.fromEntries(a.map((t=>[t.key,0])));return e.map((t=>{const e=o.get(t);return{ds:t,[B]:e?e[0][B]:r}}))}),[a,t.data,t.endDate,t.startDate]),J=(0,k.useMemo)((()=>Math.max(...X.flatMap((t=>a.map((e=>{let{key:o}=e;return t[B][o]})))))),[X,a]),R=(0,k.useMemo)((()=>{const t=Math.max(0,Math.floor(Math.log10(J)));return N.left+10+8*t}),[J]),tt=(0,k.useMemo)((()=>X.length<5?N.right+24:N.right),[X.length]),et={domain:[0,J],range:[o-N[H],N.top]},ot=(0,d.Z)(et),at=X.map((t=>new Date(t.ds).valueOf())),rt={domain:[Math.min(...at),Math.max(...at)],range:[R,e-tt]},it=(0,d.Z)(rt),[nt,st]=function(t,e){const o=t.range[1]-t.range[0],a=e.range[0]-e.range[1],r=t.domain[0],i=t.domain[1],n=i-r,s=e.domain[1];return[(0,k.useMemo)((()=>{if(n<6*x.DayMs)return Array.from({length:1+n/x.DayMs},((t,e)=>r+e*x.DayMs));const t=Math.floor(o/312*9),e=Math.max(1,Math.floor(n/t)),a=Math.ceil(e/x.DayMs)*x.DayMs;return Array.from({length:t},((t,e)=>r+(2*e+1)*a)).filter((t=>t<i))}),[o,n,r,i]),(0,k.useMemo)((()=>{const t=Math.floor(a/142*6),e=Math.max(1,Math.floor(s/t)+1);return Array.from({length:t},((t,o)=>(o+1)*e)).filter((t=>t<=s))}),[a,s])]}(rt,et),lt=(0,k.useMemo)((()=>(0,y.Z)((t=>new Date(t.ds).getTime())).center),[]),dt=(0,k.useCallback)((t=>{const{x:e}=(0,l.Z)(t)||{x:0},o=it.invert(e),r=lt(X,o),i=X[r],n=it(new Date(i.ds));p({tooltipData:i,tooltipLeft:n,tooltipTop:ot(i[B][a[0].key])})}),[X,p,it,ot,lt,a]);return r()("div",{},void 0,r()("svg",{width:e,[E]:o},void 0,a.map((t=>{let{key:e,stroke:o,fill:a}=t;return r()(u.Z,{data:X,x:t=>it(new Date(t.ds).valueOf()),y:t=>ot(t[B][e]),yScale:ot,stroke:o,fill:a,curve:s[q]},e)})),r()(c.Z,{width:e,[E]:o,fill:z,onTouchStart:dt,onTouchMove:dt,onMouseMove:dt,onMouseLeave:M}),v&&r()("g",{},void 0,r()(m.Z,{from:{x:R,y:D},to:{x:O,y:D},stroke:K[j],strokeWidth:1,[Y]:"none",strokeDasharray:"5,2"}),r()(m.Z,{from:{x:O,y:D},to:{x:O,y:o-N[H]},stroke:K[j],strokeWidth:1,[Y]:"none",strokeDasharray:"5,2"}),r()("circle",{cx:O,cy:D,r:5,fill:a[0].stroke,[Y]:"none"})),r()(i.Z,{left:R,scale:ot,stroke:K[W],tickStroke:K[j],tickLength:10,hideZero:!0,tickValues:st,tickFormat:t=>`${t}`,tickLabelProps:()=>({dx:"-0.25em",dy:"0.25em",[Q]:12,fill:K[V],textAnchor:"end"})}),r()(n.Z,{top:o-N[H],scale:it,stroke:K[W],tickStroke:K[j],tickValues:nt,tickLength:10,tickFormat:t=>(0,T.Yx)(t.valueOf(),"month_day",Z.SP,"UTC"),tickLabelProps:()=>({[Q]:12,fill:K[V],textAnchor:"middle"})})),v&&r()("div",{},void 0,r()(f.Z,{top:D-5,left:O-4,[$]:{...h.j,[U]:"#36352F",padding:6,[A]:3,color:"white",[Q]:12,[P]:"0px 4px 8px rgba(0, 0, 0, 0.04), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)",zIndex:S.sidePeekOverlay}},void 0,r()("div",{[$]:{[I]:"flex",[_]:"column",gap:7}},void 0,r()("div",{},void 0,`On ${(0,T.Yx)(b[C].isoToUnixMs(v.ds,"UTC")??Date.now(),"medium",Z.SP,"UTC")}`),a.map((t=>{let{key:e,stroke:o,renderLabel:a}=t;return r()("div",{},e,r()("div",{[$]:{[I]:"flex",gap:5,[F]:"center"}},void 0,r()("div",{[$]:{[U]:o,[A]:3,width:12,[E]:12}}),r()("div",{},void 0,a(v[B][e]))),G&&G())}))))))}));function G(){const t=(0,L.Fg)();return{blueLayer:{stroke:t.blueColor,fill:"dark"===t.mode?t[O].blue[300]:t[O].blue[50]},yellowLayer:{stroke:D.FN.light.yellow[300],fill:"dark"===t.mode?t[O].yellow[300]:t[O].yellow[50]}}}}}]);