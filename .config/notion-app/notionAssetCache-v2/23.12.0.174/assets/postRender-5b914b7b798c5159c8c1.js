"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8586],{41311:(e,t,i)=>{i.r(t),i.d(t,{GET_STARTED_DATA_SUFFIX:()=>G,authWithAsana:()=>q,disconnectAsana:()=>j,getAsanaProjects:()=>Q,getAsanaWorkspacesNames:()=>J,importToAsana:()=>$,updateAsanaToNotionTeamMapping:()=>Y,openModal:()=>X,closeModal:()=>ee});var o=i(65917),n=i(4615),a=i(98459),s=i(51859),r=i(64002),l=i(5366),d=i(95477),c=i(77373),u=i(93959),m=i(70538),p=i(91924),g=i(79315),h=i(22756),v=i(67940),f=i(50906),y=i(54642),b=i(51127),S=i(47307),w=i(84908),M=i(30738),k=i(15356),C=i(12359);const Z=i(85).L7H,T=i(85).Y7T,P=i(85).Ef7,I=i(85).yDk,F=i(85).p4K,_=i(85).vWz,x=i(85).GiO,A=i(85).Wqi,B=i(85)._37,D=i(85).Vy4,E=i(85).HVc,L=i(85).o8N,R=i(85).Hmd,N=i(85).gNv,O=i(85).eJX,U=i(85).QmD,V=i(85).Wp_,W=i(85).wgE,K=i(85).IV6,z=i(85).nx5,G="_get_started_data_feature",H=(0,l.defineMessages)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",[z]:"Authenticating with Asana…"},[K]:{id:"asanaActions.loginWithAsanaPopupModal.title",[z]:"Asana login"}});async function q(e){const{[W]:t,flowId:i}=e;await y.disconnectAsana(t,{});const o=(0,p.eC)(t);let n=(0,s.s1)(d.default.domainBaseUrl,{authType:o,userId:t.currentUser.id});if(n=o.redirectToAuth?n:await(0,p.HU)(t,n),t.device.isElectron)return h.Z[V]({...h.Z[U],[O]:!0}),void w.openExternalUrl(n);const a=await k.M(t,{width:580,height:800,url:n,[K]:H[K]});if(!a)return;const l=r.parse(a);if(!l.query.code||!l.query[U])return;h.Z[V]({...h.Z[U],[O]:!0});const c=await y.authWithAsana(t,{code:l.query.code,encryptedState:l.query[U]}),u=await y.getAsanaWorkspacesNames(t,{});if("failed"===c.type)f[N](t,{[R]:"asana",data:{import_type:"api",status:"failure",[L]:c[L]},flowId:i}),console[L](c[L]),S.showError(c);else if(f[N](t,{[R]:"asana",data:{import_type:"api",status:"success"},flowId:i}),"success"===u.type){const{data:{account:e,[E]:t}}=u;h.Z[V]({...h.Z[U],[O]:!1,account:e,[E]:t,[D]:"selectData",isModalOpen:!0})}}async function j(e){const{[W]:t}=e;h.Z[V]({...h.Z[U],isAccountDelinkingInProgress:!0});const i=await y.disconnectAsana(t,{});"failed"===i.type?(console[L](i[L]),S.showError(i)):(f[B](t,{integration_name:"asana"}),"success"===i.type&&h.Z[V]({...h.Z[U],isAccountDelinkingInProgress:!1,account:void 0,[E]:[]}))}async function Q(e){const{selectedWorkspace:t,[W]:i}=e;h.Z[V]({...h.Z[U],isLoadingProjects:!0});const o=await y.getTeamsAndProjectsInAsanaWorkspace(i,{workspaceId:t,size:5});"success"===o.type&&h.Z[V]({...h.Z[U],teamsAndProjects:o.data,isLoadingProjects:!1})}async function J(e){let{[W]:t}=e;h.Z[V]({...h.Z[U],isLoadingAsanaWorkspaces:!0});const i=await y.getAsanaWorkspacesNames(t,{});"success"===i.type&&h.Z[V]({...h.Z[U],account:i.data.account,[E]:i.data[E],isLoadingAsanaWorkspaces:!1})}async function $(e){let{[W]:t,[A]:i,[x]:s,teamsStores:r,flowId:l}=e;const d=h.Z[U].selectedWorkspace;if(!d)return;h.Z[V]({...h.Z[U],[_]:!0});const p={},S={};try{for(const e in h.Z[U][F]){if(0===h.Z[U][F][e][I].length)continue;let o;const n=h.Z[U][F][e],{[P]:a}=n;if(!a)continue;const l=r.find((e=>e.id===n[P]));if(o=l||i,S[a])p[e]=S[a];else{const{serverCommitResult:i,performResult:n}=C.createAndCommit({[W]:t,perform:e=>{const i={type:"preset",uri:m._F};if("preset"===i.type&&!i.uri.startsWith("notion://wiki")){var n;const a=i.uri,r=null===(n=(0,u.SP)(a))||void 0===n?void 0:n.uri;if(!r)return;const l=(0,c.p)().find((e=>e.uri===r));if(null==l?void 0:l.presets.find((e=>e.uri===a))){return b.initializeApp({[W]:t,[T]:s,appParentStore:o,appUri:r,presetUri:a,transaction:e,from:"asana_import"})}return[]}},userAction:"importActions.importAsana"});p[e]=n,S[a]=n,await i}}}catch(q){return void h.Z[V]({...h.Z[U],[_]:!1,[D]:"failure"})}const w=[],k=g.default[U][x];if(!k)return;const B=M.Ym({[W]:t,[A]:i,[T]:k,append:!0});await B.deferred.promise;const N=B.pageId;h.Z[V]({...h.Z[U],loggerPageId:N});const O=new Set,K=[],z=[];for(const o in p){const e=h.Z[U][F][o],t=p[o];if(!(t&&e[P]&&e[I].length))continue;const n="string"==typeof e[I]?[]:e[I];K.push(...n),O.add(e[P]),z.push(o),w.push({collectionViewBlocks:t.map((e=>({id:e.id,spaceId:(0,a.CG)(i.id)}))),projectIds:n,asanaTeamId:o,notionTeamSpaceId:e[P],importAllProjects:"all"===e[I],importOnlyIncompleteProjects:"in_complete"===e[I]})}const G=y.parallelAsanaImport(t,{importParams:w,spaceId:(0,a.CG)(i.id),asanaWorkspaceId:d,[Z]:h.Z[U][Z],loggerPageId:N,flowId:l||(0,n.default)()});h.Z[V]({...h.Z[U],[_]:!1,[D]:"importingData"}),v.Z.reset();const H=h.Z[U][E].find((e=>e.gid===d));H&&function(e,t,i){try{f.trackImportSourceInput(e,{[R]:"asana",data:t,flowId:i})}catch(n){o.log({level:L,from:"asanaV2Actions",type:"parallelAsanaImport",[L]:{miscDataString:JSON.stringify({[L]:n,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceName:H.name,teams:z,[I]:K,numberOfTeamspacesUsed:O.size,completedTasks:h.Z[U][Z],userId:t.currentUser.id,spaceId:(0,a.CG)(i.id)},l);for await(const o of G){if(!h.Z[U].isModalOpen)break;if(o[L])return void h.Z[V]({...h.Z[U],[D]:"failure"});"success"===o.taskStatus&&h.Z[V]({...h.Z[U],[D]:"confirm",result:o.value.status,isComplete:!0})}}function Y(e){var t;let{teamId:i,spaceId:o}=e;h.Z[V]({...h.Z[U],[F]:{...h.Z[U][F],[i]:{[I]:(null===(t=h.Z[U][F][i])||void 0===t?void 0:t[I])||[],[P]:o}}})}function X(){h.Z[V]({...h.Z[U],isModalOpen:!0})}function ee(){h.Z[V]({...h.Z[U],isModalOpen:!1})}},30738:(e,t,i)=>{i.d(t,{Ym:()=>Ae,A1:()=>Ee,am:()=>De,ro:()=>xe,su:()=>Be});var o=i(96486),n=i.n(o),a=i(13991),s=i(41432),r=i(7057),l=i(7406),d=i(65917),c=i(59730);const u=i(85).N_c,m=i(85).itc,p=[i(85).znQ,"application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],g=[m,".md",".mdown",".markdown",".mkdn",".mkd",".Rmd",".md.txt"],h={markdown:g,csv:[m,".csv"],html:[u],docx:p,gdocs:p,dropbox:p,quip:[u,g],workflowy:[m],confluence:["application/zip"],genericImporter:["application/zip"]};var v=i(2911),f=i(32056),y=i(29477),b=i(4615),S=i(98459),w=i(21202),M=i(5366),k=i(72340),C=i(33954),Z=i(8989),T=i(33929),P=(i(46190),i(78900)),I=i(90365),F=i(82066),_=i(39098),x=i(50906),A=i(54642),B=i(47307),D=i(94419),E=i(92625),L=i(9953),R=i(29974),N=i(12359),O=i(53471);const U=i(85).J$i,V=i(85).Xi_,W=i(85).FHE,K=i(85).Und,z=i(85).Wp_,G=i(85).irb,H=i(85).c3A,q=i(85).eQV,j=i(85).N1Z,Q=i(85).Ql2,J=i(85).vV,$=i(85).Juc,Y=i(85).fKq,X=i(85).UVz,ee=i(85).TEm,te=i(85).LCr,ie=i(85).itH,oe=i(85).wC6,ne=i(85).qCU,ae=i(85).Yzm,se=i(85).nxU,re=i(85).Drs,le=i(85).JJj,de=i(85).gio,ce=i(85).n$5,ue=i(85).P7Q,me=i(85).SPm,pe=i(85).sM5,ge=i(85).U2w,he=i(85).mVI,ve=i(85).XB4,fe=i(85).q6H,ye=i(85).iqf,be=i(85).o8N,Se=i(85).mFA,we=i(85).Hmd,Me=i(85).gNv,ke=i(85).TtP,Ce=i(85).Y7T,Ze=i(85).Wqi,Te=i(85).wgE,Pe=i(85).WZj,Ie=i(85).nx5,Fe=(0,M.defineMessages)({uploadingOneFile:{id:"importActions.uploadingOneFile.loadingMessage",[Ie]:"Uploading… ({percentComplete}%)"},uploadingMultipleFilesNotStarted:{id:"importActions.uploadingMultipleFilesNotStarted.loadingMessage",[Ie]:"Uploaded 0 of {totalNumberOfFiles}"},uploadingMultipleFilesInProgress:{id:"importActions.uploadingMultipleFilesInProgress.loadingMessage",[Ie]:"Uploaded {numberOfUploadedFiles} of {totalNumberOfFiles}"},uploadingMultipleFilesComplete:{id:"importActions.uploadingMultipleFilesComplete.loadingMessage",[Ie]:"Uploaded {totalNumberOfFiles} of {totalNumberOfFiles}"},importingOneFile:{id:"importActions.importingOneFile.loadingMessage",[Ie]:"Importing…"},importingMultipleFilesNotStarted:{id:"importActions.importingMultipleFilesNotStarted.loadingMessage",[Ie]:"Imported 0 of {totalNumberOfFiles}"},[Pe]:{id:"importActions.importingMultipleFilesInProgress.loadingMessage",[Ie]:"Imported {numberOfImportedFiles} of {totalNumberOfFiles}"},importingMultipleFilesComplete:{id:"importActions.importingMultipleFilesComplete.loadingMessage",[Ie]:"Imported {totalNumberOfFiles} of {totalNumberOfFiles}"},importingFromTrelloMessage:{id:"importActions.importingFromTrello.loadingMessage",[Ie]:"{importingCount, plural, one {Importing {importingCount} board from Trello} other {Importing {importingCount} boards from Trello}}"},importingFromAsanaMessage:{id:"importActions.importingFromAsana.loadingMessage",[Ie]:"{importingCount, plural, one {Importing {importingCount} project from Asana} other {Importing {importingCount} projects from Asana}}"},importingFromEvernoteMessage:{id:"importActions.importingFromEvernote.loadingMessage",[Ie]:"{importingCount, plural, one {Importing {importingCount} notebook from Evernote} other {Importing {importingCount} notebooks from Evernote}}"},importingFromConfluenceViaAPIMessage:{id:"importActions.importingFromConfluenceViaAPI.loadingMessage",[Ie]:"Importing confluence space: {confluenceSpaceKey}."},importFailed:{id:"importActions.importFailedError.message",[Ie]:"Import failed."},fileImportFailedSizeTooLarge:{id:"importActions.fileImportFailedError.sizeTooLarge.message",[Ie]:"Import failed: file exceeds 5MB."},trelloImportFailed:{id:"importActions.trelloImportFailedError.message",[Ie]:"Trello import failed."},asanaImportFailed:{id:"importActions.asanaImportFailedError.message",[Ie]:"Asana import failed."},evernoteImportFailed:{id:"importActions.evernoteImportFailedError.message",[Ie]:"Evernote import failed."},confluenceImportViaAPIFailed:{id:"importActions.confluenceImportViaAPIFailedError.message",[Ie]:"Confluence space import failed."},importTitle:{id:"importActions.importTitle",[Ie]:"Import {date}"},importTitleForGenericFileImporter:{id:"importActions.importTitleForGenericFileImporter",[Ie]:"Generic File Import {date}"}}),_e=1073741824;async function xe(e){const{[Te]:t,pageStore:i,[Ze]:o,isTeamPage:n,[Ce]:s,uploadType:u,flowId:m}=e;let p;try{const l=await O.openFilePicker({multiple:!0,accept:h[u].join(",")});if(0===l[ke])return;const d=1===l[ke];if("confluence"===u){const i=(Number((0,k.$6)(t))||15)*_e;if(l[0].size>i)throw x[Me](e[Te],{[we]:Se,data:{import_type:"file",status:"failure",[be]:ye,fileSize:l[0].size},flowId:m}),new c.nY(ye,{[fe]:{type:ve,[he]:{maxSize:f.td(i,1)}}})}else if("genericImporter"===u){const i=(0,Z.b)(t)||15,o=i*_e;if(l[0].size>o)throw x[Me](e[Te],{[we]:"file",data:{import_type:"file",status:"failure",[be]:ye,fileSize:l[0].size},flowId:m}),new c.p8(ye,{[fe]:{type:ve,[he]:{maxSize:`${i} GB}`}}})}const g=await new Promise(((e,i)=>{O.uploadFiles({[Te]:t,uploadType:u,files:l,bucket:"temporary",[ge]:!0,flowId:m,onBatchStart:()=>{E[pe]({[me]:d?Fe.uploadingOneFile:Fe.uploadingMultipleFilesNotStarted,[ue]:{[ce]:l[ke],percentComplete:0}})},onBatchProgress:e=>{let{uploadedFiles:t,[de]:i}=e;E[pe]({[me]:d?Fe.uploadingOneFile:Fe.uploadingMultipleFilesInProgress,[ue]:{numberOfUploadedFiles:t,[ce]:l[ke],percentComplete:i}})},onBatchComplete:t=>{E[pe]({[me]:d?Fe.uploadingOneFile:Fe.uploadingMultipleFilesComplete,[ue]:{[ce]:l[ke],percentComplete:100}}),e(t)},onBatchError:i})}));let v,S;if(i&&i.isEmptyPage())l[ke]>1||i.isInsideCollection()?(v=i.id,S="AppendToBlock"):(v=i.id,S="ReplaceBlock");else{const{performResult:e}=N[le]({[re]:"importActions.result",[Te]:t,[se]:e=>{const i=T.default[ae]("genericImporter"===u?Fe.importTitleForGenericFileImporter:Fe.importTitle,{date:(0,r.Yx)(Date.now(),"medium",a.SP)}),d=R[ne]({[Te]:t,[Ze]:o,[Ce]:s,[oe]:!n,[ie]:!n,title:i,[te]:e});let c;c=l[ke]>1?"AppendToBlock":"ReplaceBlock";const m=y[ee]();return e[X].push((e=>{e?m.reject(e):m[Y]()})),{[ee]:m,createdPage:d,[$]:d.id,importType:c}}});p=e.createdPage,v=e[$],S=e.importType,await e[ee][J]}const M=g.map(((e,t)=>({fileURL:e,fileName:l[t].name})));let C=0;E[pe]({[me]:d?Fe.importingOneFile:Fe[Pe],[ue]:{numberOfImportedFiles:C,[ce]:l[ke]}});for(const{fileURL:e,fileName:i}of M){if("confluence"===u){x[Me](t,{[we]:Se,data:{import_type:"file",status:"success",fileSize:l[0].size},flowId:m});const n=Ae({[Te]:t,[Ze]:o,[Ce]:s});await n[ee][J];const a=n[$],r=A.parallelImportConfluenceExport(t,{fileURL:e,fileName:i,page:{id:v,[Q]:o.id},loggerPageId:a,flowId:m||(0,b.default)()});for await(const e of r){if(e[be])throw e[be];e.value.isComplete||E[pe](e.value.status)}}else if("AppendToBlock"===S){const n={fileURL:e,fileName:i,importType:S,block:{id:v,[Q]:o.id},flowId:m};x.trackImportSourceInput(t,{[we]:"file",data:n,flowId:m});const{value:a}=await A.importFile(t,n).next();if(a[be])throw a[be]}else if("ReplaceBlock"===S){const n={fileURL:e,fileName:i,importType:S,block:{id:v,[Q]:o.id},flowId:m};x.trackImportSourceInput(t,{[we]:"file",data:n,flowId:m});const{value:a}=await A.importFile(t,n).next();if(a[be])throw a[be]}C++,E[pe]({[me]:d?Fe.importingOneFile:Fe[Pe],[ue]:{numberOfImportedFiles:C,[ce]:l[ke]}})}return E[j](),_.G.createChildStore(o,{table:w.iU,id:v})}catch(M){var g,S;let e;d.log({level:be,from:"importFiles",type:"importFilesFailure",[be]:(0,v.Ui)(M),data:{[Q]:o.id}}),E[j](),N[le]({[re]:"importActions.importFiles",[Te]:t,[se]:e=>{p&&D.remove({parent:o[q](),[H]:p,[te]:e})}});let i=null,n=null;throw M instanceof c.hm&&M[fe]?(i=M[fe],C.Em[M[fe].type]&&"ImportFileSizeTooLargeError"===(0,l.tg)(M)[me]?n=C.Em[M[fe].type]:C.$5[M[fe].type]&&"CsvImportError"===(0,l.tg)(M)[me]?n=C.$5[M[fe].type]:C.zP[M[fe].type]&&(n=C.zP[M[fe].type])):M instanceof c.nY&&"upload_file_size_exceeded"===(null===(g=M.body)||void 0===g||null===(S=g[fe])||void 0===S?void 0:S.type)&&C.zP[M.body[fe].type]&&(i=M.body[fe],n=C.zP[i.type]),e=i&&n?T.default[ae](n,i[he]):"ImportFileSizeTooLargeError"===(0,l.tg)(M)[me]?T.default[ae](Fe.fileImportFailedSizeTooLarge):T.default[ae](Fe.importFailed),B[G](e),M}}function Ae(e){const{[Te]:t,[Ze]:i,[Ce]:o,append:n}=e,{performResult:s}=N[le]({[re]:"importActions.result",[Te]:t,[se]:e=>{const s=T.default[ae](Fe.importTitle,{date:(0,r.Yx)(Date.now(),"medium",a.SP)}),l=R[ne]({[Te]:t,[Ze]:i,[Ce]:o,[oe]:!0,[ie]:!n,title:`${s} Logs`,[te]:e}),d=y[ee]();return e[X].push((e=>{e?d.reject(e):d[Y]()})),{[ee]:d,[$]:l.id}}});return s}async function Be(e){const{[Te]:t,boards:i,[Ze]:o,[Ce]:n}=e;E[pe]({[me]:Fe.importingFromTrelloMessage,[ue]:{importingCount:i[ke]}}),F.Z[z]({open:!1});const{performResult:{[ee]:a,pages:s}}=N[le]({[re]:"importActions.importTrello",[Te]:t,[se]:e=>{const a=i.map((i=>R[ne]({[Te]:t,[Ze]:o,[Ce]:n,[oe]:!0,[ie]:!0,loading:!0,title:i.name,[te]:e}))),s=y[ee]();return e[X].push((e=>{e?s.reject(e):s[Y]()})),{[ee]:s,pages:a}}});await a[J];try{return await Promise.all(s.map((async(e,o)=>{const n=i[o],{value:a}=await A.importTrello(t,{boardId:n.id,block:{id:e.id,[Q]:(0,S.CG)(e.pointer[Q])}}).next();if(a[be])throw a[be]}))),E[j](),s[0]}catch(r){throw N[le]({[re]:"importActions.importTrello",[Te]:t,[se]:e=>{for(const t of s)D.remove({parent:o[q](),[H]:t,[te]:e})}}),B[G](T.default[ae](Fe.trelloImportFailed)),E[j](),new Error((0,l.tg)(r)[me])}}async function De(e){const{[Te]:t,[Ze]:i,[Ce]:o,notebooks:a,[K]:r}=e;if(0===a[ke])throw new Error("Expected at least one notebook");E[pe]({[me]:Fe.importingFromEvernoteMessage,[ue]:{importingCount:a[ke]}}),I.Z[z]({open:!1});const l=await async function(e){const{[Te]:t,[Ze]:i,[Ce]:o,notebooks:a}=e,{serverCommitResult:r,performResult:{blockStores:l}}=N[le]({[re]:"importActions.createStacks",[Te]:t,[se]:e=>{const r=n().uniq(n().compact(a.map((e=>e.stack)))).sort().reverse(),l={};let d=e=>!0;return a[ke]>1&&r[ke]>0&&(r.forEach((n=>{const r=R[ne]({[Te]:t,[Ze]:i,[Ce]:o,[oe]:!0,[ie]:!0,loading:!1,title:n,[te]:e}),d=r[V]();a.filter((e=>e.stack===n)).forEach((i=>{const o=L.createBlock({[Te]:t,type:s.Ti.copyIndicator,[U]:r[U],[te]:e,[Q]:d.pointer[Q]});D.append({parent:d,append:o,[te]:e}),l[i.guid]=o}))})),d=e=>!Boolean(e.stack)),a.filter(d).reverse().forEach((n=>{const a=R[ne]({[Te]:t,[Ze]:i,[Ce]:o,[oe]:!0,[ie]:!0,loading:!0,title:n.title,[te]:e});l[n.guid]=a})),{blockStores:l}}});return await r,l}({[Te]:t,[Ze]:i,[Ce]:o,notebooks:a}),d=l[a[0].guid];try{return await async function(e){const{[Te]:t,[Ze]:i,[Ce]:o,notebooks:n,waitForNotebook:a,notebookMapping:s,[K]:r}=e;let l;if(y.batch(n,2,(async e=>{await Promise.all(e.map((async e=>{const i=s[e.guid];if(!i)throw new Error(`Missing notebook page ${e.guid}`);const o=y[ee]();i===a&&(l=o),await async function(e){const{[Te]:t,notebookStore:i,notebook:o,firstCompleted:n}=e,a=A.importEvernote(t,{notebookId:o.guid,block:{id:i.id,[Q]:(0,S.CG)(i.pointer[Q])},timestamp:Date.now(),parentTable:w.iU}),{value:s}=await a.next();s[be]&&(console[be](s[be]),N[le]({[re]:"importActions.importEvernoteNotebook",[Te]:t,[se]:e=>{const t=i.getParentBlockStore();if(t){const o=t[V]();D.remove({parent:o,[H]:i,[te]:e})}}}),B[G](T.default[ae](Fe.evernoteImportFailed)));n[Y](void 0)}({[Te]:t,notebookStore:i,notebook:e,firstCompleted:o})})))})),!l)throw new Error("waitForNotebookFirstCompleted not defined.");const d=r.getSettings();null!=d&&d[W]||await R.createGettingStartedPageInSpace({[Te]:t,type:"evernote",[Ze]:i,[Ce]:o,[K]:r});await l[J]}({[Te]:t,waitForNotebook:d,notebookMapping:l,notebooks:a,[Ze]:i,[Ce]:o,[K]:r}),E[j](),d}catch(c){throw E[j](),B[G](T.default[ae](Fe.evernoteImportFailed)),c}}async function Ee(e){const{[Te]:t,[Ze]:i,[Ce]:o,space:n,flowId:s}=e;if(!t.currentUser.id)throw new Error("User does not exist.");E[pe]({[me]:Fe.importingFromConfluenceViaAPIMessage,[ue]:{confluenceSpaceKey:n.name}}),P.Z[z]({open:!1});const c=Ae({[Te]:t,[Ze]:i,[Ce]:o});await c[ee][J];const u=c[$],{performResult:m}=N[le]({[re]:"importActions.importConfluenceViaApi",[Te]:t,[se]:e=>{const n=T.default[ae](Fe.importTitle,{date:(0,r.Yx)(Date.now(),"medium",a.SP)}),s=R[ne]({[Te]:t,[Ze]:i,[Ce]:o,[oe]:!0,[ie]:!0,title:n,[te]:e}),l=y[ee]();return e[X].push((e=>{e?l.reject(e):l[Y]()})),{[ee]:l,createdPage:s,[$]:s.id}}});await m[ee][J];const p=m.createdPage;try{if(!p)throw new Error("No root page");const e=A.parallelImportConfluenceViaApi(t,{userId:t.currentUser.id,confluenceSpaceKey:n.key,page:{id:m[$],[Q]:i.id},loggerPageId:u,flowId:s});for await(const t of e){if(t[be])throw t[be];t.value.isComplete||E[pe](t.value.status)}return E[j](),p}catch(g){throw d.log({level:be,from:"importConfluenceViaAPI",type:"importConfluenceViaAPIFailure",[be]:(0,v.Ui)(g),data:{[Q]:i.id}}),N[le]({[re]:"importActions.importConfluenceViaApi",[Te]:t,[se]:e=>{p&&D.remove({parent:i[q](),[H]:p,[te]:e})}}),B[G](T.default[ae](Fe.confluenceImportViaAPIFailed)),E[j](),new Error((0,l.tg)(g)[me])}}},3444:(e,t,i)=>{i.d(t,{cP:()=>Yi,ZP:()=>$i,a_:()=>Ji});var o=i(77094),n=i.n(o),a=i(67294),s=i(13991),r=i(480),l=i(81954),d=i(24405),c=i(7057),u=i(3909),m=i(74181),p=i(77420),g=i(9844),h=i(90965),v=i(5500),f=i(9038),y=i(97880),b=i(82990),S=i(7928),w=i(63143),M=i(5366),k=i(95477),C=i(38755),Z=i(79315),T=i(39098),P=i(20454),I=i(97464),F=i.n(I),_=i(8848),x=i(58573),A=i(19889),B=i(50906),D=i(76463),E=i(5978),L=i(64964),R=i(12359),N=i(87279),O=i(33665),U=i(61766),V=i(74021),W=i(24736),K=i(26825),z=i(15025),G=i(28992);const H=i(85).nLZ,q=i(85).Yzm,j=i(85).Wku;function Q(e){window.__c={n:"BotCapabilitiesTooltip"};const{[j]:t}=e,i=(0,M.useIntl)(),{device:o}=(0,r.O7)(),s=(0,K.getCumulativeBotBlockRoleFromCapabilities)(t),l=(0,K.getUserCapabilitiesFromCapabilities)(t),d=(0,K.getExternalCapabilitiesFromCapabilities)(e[j]),c=[...(0,z.zq)(s),...(0,z.ac)(l),...(0,z.VR)(d)];return a.createElement(G.Z,F()({},e,{title:i[q]((0,K.getLabelAndCaptionForCumulativeRole)(s,void 0).label),shouldWrapCaption:!0,style:o.isMobile?{padding:"12px 4px"}:{padding:4,[H]:2,marginBottom:2},captionStyle:{[H]:4},caption:n()("div",{},void 0,c)}))}var J=i(52275),$=i(31945),Y=i(68894),X=i(68785),ee=i(78140),te=i(32163),ie=i(53953),oe=i(63296),ne=i(44532),ae=i(72495),se=i(64369),re=i(29302);const le=i(85).cbT,de=i(85).LtW,ce=i(85).KOz,ue=(i(85).NZS,i(85).Gpy),me=i(85).OtN,pe=i(85).pkR,ge=i(85).tlN,he=i(85).XCs,ve=i(85).ChN,fe=i(85).twM,ye=i(85).fCB,be=i(85).Wku,Se=i(85).g7N,we=i(85).nLZ,Me=i(85).PG2,ke=i(85).$W2,Ce=i(85).AIq,Ze=i(85).h8z,Te=i(85).UPJ,Pe=i(85).jkI,Ie=i(85).EMU,Fe=i(85).sM5,_e=i(85).Lbi,xe=i(85).Csb,Ae=i(85).sI1,Be=i(85).wJk,De=i(85).oSF,Ee=i(85).g4H,Le=i(85).Zij,Re=i(85).an9,Ne=i(85).piI,Oe=i(85).Jkr,Ue=i(85).ceT,Ve=i(85).j7K,We=i(85).nQ3,Ke=i(85).y79,ze=i(85).Ie8,Ge=i(85).PXg,He=i(85).XNW,qe=i(85).pHx,je=i(85).tBn,Qe=i(85).wgE,Je=i(85).D7I,$e=i(85).rpY,Ye=i(85).BQ6,Xe=i(85).nx5,et=i(85).Yzm,tt=i(85).dLQ,it=i(85).LlE,ot=i(85).TtP,nt=i(85).JJs,at=i(85).hcx,st=i(85).TLr,rt=i(85).T04,lt=i(85).Lfz,dt=i(85).qJ8,ct=i(85).ivl;function ut(e){window.__c={n:"AdminIntegrationSettingsActionMenu"};const{[ct]:t,integrationTable:i,isLegacy:o,disableDisconnectUser:s,disableDisconnectAll:d,disableDisallow:c,botIds:u}=e,f=(0,l.VK)((()=>Z.default.state[dt]),[]),b=(0,r.Fy)(),S=(0,r.O7)(),w=(0,M.useIntl)(),C=Pt(),[I,_]=(0,a.useState)(void 0),[B,D]=(0,a.useState)(!1),[E,L]=(0,a.useState)(!1),[U,V]=(0,a.useState)(!1),[K,z]=(0,a.useState)(void 0),G=(0,l.VK)((()=>f&&i?(0,T.Kv)(f,{table:i,id:t}):void 0),[f,t,i]),H=(0,l.VK)((()=>{if(o){const e=m.ns.find((e=>e.id===t));return{[lt]:null==e?void 0:e[lt],url:(0,O.getLocalizedUrl)("guides.connectedApps")}}if(f&&i){const o=f.getRecordModel({table:i,id:t});if(i===g.K2&&!(0,v.BP)({[ct]:t,env:k.default.env})){var e,n;const t=o;return{[lt]:null==o?void 0:o[lt],url:null==t||null===(e=t.getInfo())||void 0===e?void 0:e.website_url,[rt]:null==t||null===(n=t.getInfo())||void 0===n?void 0:n[rt]}}return{[lt]:null==o?void 0:o[lt]}}}),[f,t,i,o]),q=(0,l.VK)((()=>u&&!s?u.map((e=>f&&G?T.t1[st](G,{table:p.cZ,id:e,spaceId:f.id}):void 0)):[]),[f,u,G,s]).filter(y.isDefined),j=(0,l.VK)((()=>q.filter((e=>e.getAlive()))),[q]),Q=(0,l.VK)((()=>{if(f&&j&&!s){return j.map((e=>e[at]())).filter(y.isDefined).map((e=>P.U[st](f,{table:A.KJ,id:e}))).filter((e=>e.isDefined()))}return[]}),[j,f,s]),J=(0,l.VK)((()=>null==f?void 0:f.getBotSettingsStore().getValue()),[f]),X=(0,l.VK)((()=>null==j?void 0:j.reduce(((e,t)=>{const i=Q.find((e=>e.id===t[at]()));return e[t.id]={[nt]:i,botCapabilities:t.getCapabilities()},e}),{})),[j,Q]),oe=(0,l.VK)((()=>I?(0,x.ZP)(I,Object.entries(X),(e=>{let[,{[nt]:t}]=e;return t.getSearchName(w)})):Object.entries(X)),[X,I,w]),ne=!s&&(null==u?void 0:u[ot])&&n()(ae.Z,{isInput:!0,[Ye]:{[it]:8}},void 0,n()(Y.ZP,{textWrapperStyle:{margin:0},focus:!b[tt]||void 0,focusAfterAnimation:!0,value:I||"",onChange:e=>_(e.target.value),placeholder:w[et]({id:"integrationInstallerFilter.userSearch.placeholder",[Xe]:"Filter by user"})})),se=oe[ot]?[{key:"disconnect user section",[$e]:e=>a[Je](ae.Z,e),items:pt({users:oe,disableDisconnectUser:s,showDisplayModal:()=>L(!0),setSelectedUser:z,intl:w})}]:[],re=(null==H?void 0:H.url)||(null==H?void 0:H[rt]),le=Boolean(null==u?void 0:u[ot])||(0,h.CJ)(J)&&!c,de=a[Je](a[je],null,re&&n()(ae.Z,{topBorder:Boolean(oe[ot])},"app-links",(null==H?void 0:H.url)&&n()(ht,{[Qe]:S,developerWebsite:H.url}),(null==H?void 0:H[rt])&&n()(vt,{[Qe]:S,developerEmail:H[rt]})),le&&n()(ae.Z,{topBorder:Boolean(oe[ot]||re)},void 0,Boolean(null==u?void 0:u[ot])&&n()(ft,{showDisplayModal:()=>V(!0)}),(0,h.CJ)(J)&&!c&&n()(yt,{showDisplayModal:()=>D(!0)})));return(re||le)&&H?n()($.ZP,{popupType:b[tt]?$.Z4[qe]:$.Z4.Popup,renderOrigin:e=>a[Je](W.Z,F()({},e,{[tt]:b[tt],[Ye]:{[He]:8,[Ge]:8}})),[$e]:()=>a[Je](a[je],null,n()(ee.Z,{[Ue]:b[tt]?N.og[ze]:N.og.Popup,header:!s&&ne,footer:de,[Oe]:230},void 0,n()(te.Z,{type:te.i[Ke],[We]:se,[Ve]:void 0})),n()(ie.Z,{open:!s&&E,[Be]:()=>{L(!1)},disableAnimation:!0,showCloseIcon:!0,[Ae]:C.innerModal,[$e]:()=>n()(bt,{[Le]:n()(Ct,{[Ne]:H[lt]}),[Ee]:n()(Zt,{[Ne]:H[lt],userName:null==K?void 0:K.userName}),type:Re,[De]:()=>{L(!1),z(void 0)},handleConfirmation:async()=>{K&&(await mt({botIds:[K.botId],[Qe]:S}),z(void 0)),L(!1)}})}),n()(ie.Z,{open:!d&&U,[Be]:()=>{V(!1)},disableAnimation:!0,showCloseIcon:!0,[Ae]:C.innerModal,[$e]:()=>n()(bt,{[Le]:n()(Mt,{[Ne]:H[lt]}),[Ee]:n()(kt,{[Ne]:H[lt]}),type:Re,[De]:()=>V(!1),handleConfirmation:async()=>{await mt({botIds:u,[Qe]:S}),V(!1)}})}),n()(ie.Z,{open:!c&&B,[Be]:()=>{D(!1)},disableAnimation:!0,showCloseIcon:!0,[Ae]:C.innerModal,[$e]:()=>n()(bt,{[Le]:n()(St,{[Ne]:H[lt]}),[Ee]:n()(wt,{[Ne]:H[lt],disableDisconnectAll:d}),type:"disapprove",[De]:()=>D(!1),handleConfirmation:async()=>{!function(e){const{[dt]:t,[Qe]:i,[ct]:o}=e;t&&R.createAndCommit({userAction:"AdminIntegrationSettingsActionMenu.handleDisapproveIntegration",[Qe]:i,perform:e=>{R.applyOperation({store:t,operation:{pointer:t.pointer,path:["bot_settings",xe],command:"update",args:{[o]:null}},transaction:e})}})}({[dt]:f,[Qe]:S,[ct]:t}),d||await mt({botIds:u,[Qe]:S}),D(!1)}})}))}):null}async function mt(e){let{botIds:t,[Qe]:i}=e;t&&await Promise.all(t.map((e=>D.P0({[Qe]:i,botId:e,onSuccess:()=>{B.trackDeveloperIntegrationsDisconnectClick(i,{type:"public"})}}))))}function pt(e){const{intl:t,disableDisconnectUser:i,users:o,showDisplayModal:a,setSelectedUser:s}=e;return i?[]:o.map((e=>{let[i,{[nt]:o,botCapabilities:r}]=e;return{key:o.id,[$e]:e=>n()(gt,{buttonMenuProps:e,[nt]:o,botCapabilities:r,selectAction:()=>{a(),s({botId:i,userName:o[_e](t)})}}),action:()=>{a(),s({botId:i,userName:o[_e](t)})}}}))}function gt(e){window.__c={n:"UserMenuActionItem"};const{buttonMenuProps:t,[nt]:i,botCapabilities:o,selectAction:s}=e,l=(0,r.Fy)(),[d,c]=(0,a.useState)(!1);return n()(ne.ZP,{popupType:l[tt]?$.Z4[qe]:$.Z4.Popup,placementToOrigin:$.pO.Right,open:d,[Be]:()=>c(!1),origin:a[Je](J.Z,F()({},t,{[Le]:n()("div",{[Ye]:{[Fe]:Ie,alignContent:Pe,[Te]:Ze}},void 0,n()(re.Z,{[nt]:i,[ke]:18,inline:!0,avatarShouldShowShadow:!0,[Ye]:{[Ce]:1}})),textWrapperStyle:{[He]:12,[Ge]:12},focused:!1,[Me]:()=>c(!0)})),[$e]:()=>n()(ee.Z,{[Oe]:240,[Ue]:l[tt]?N.og[ze]:N.og.Popup,header:n()("div",{[Ye]:{[it]:2,[we]:4,[Se]:4}},void 0,n()(Q,{[be]:o}))},void 0,n()(te.Z,{type:te.i[Ke],[We]:[{key:"integration capabilities",[$e]:e=>a[Je](ae.Z,F()({},e,{topBorder:!0})),items:[{key:"remove",[$e]:e=>a[Je](J.Z,F()({},e,{focused:!1,[Le]:n()("div",{[Ye]:{color:_.ZP.red}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.revokeUserAccess.label",[Xe]:"Disconnect user"}))})),action:s}]}],[Ve]:void 0}))})}function ht(e){let{[Qe]:t,developerWebsite:i}=e;return n()(J.Z,{[Me]:()=>{E[ye]({[Qe]:t,url:i}),B.trackDeveloperIntegrationsVisitDeveloperWebsiteClick(t,{href:i,from:fe})},[Le]:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.visitDeveloperWebsite.label",[Xe]:"Visit developer website"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{[He]:12,[Ge]:12}})}function vt(e){let{[Qe]:t,developerEmail:i}=e;return n()(J.Z,{[Me]:()=>{E[ye]({[Qe]:t,url:`mailto:${i}`}),B.trackDeveloperIntegrationsContactDeveloperClick(t,{from:fe})},[Le]:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.contactDeveloperSupport.label",[Xe]:"Contact support"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{[He]:12,[Ge]:12}})}function ft(e){let{showDisplayModal:t}=e;return n()(J.Z,{[Me]:t,[Le]:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.label",[Xe]:"Disconnect all users"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{[He]:12,[Ge]:12,color:_.ZP.red}})}function yt(e){let{showDisplayModal:t}=e;return n()(J.Z,{[Me]:t,[Le]:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.label",[Xe]:"Remove from approved list"}),focused:!1,textWrapperStyle:{[He]:12,[Ge]:12,color:_.ZP.red}})}function bt(e){let{[Le]:t,[Ee]:i,handleConfirmation:o,[De]:s,type:r}=e;window.__c={n:"ModalContent"};const[l,d]=(0,a.useState)(!1);return n()("div",{[Ye]:{[it]:20,[Oe]:333}},void 0,n()(se.Z,{isMultiline:!0,[Ye]:{[Se]:8,[ve]:b.Z[ve].semibold,[he]:30}},void 0,t),n()(se.Z,{isMultiline:!0,isSecondaryColor:!0,[Ye]:{[Se]:8}},void 0,i),n()("div",{[Ye]:{[Fe]:Ie,[we]:12}},void 0,n()(oe.Z,{[Ye]:{[Oe]:140,[Ge]:9},isLarge:!0,[Me]:s,[pe]:l},void 0,n()(se.Z,{},void 0,n()(M.FormattedMessage,{id:ge,[Xe]:"Cancel"}))),n()(oe.Z,{[Ye]:{[Oe]:140},isLarge:!0,[Me]:async()=>await o(d),[me]:_.ZP.red,[pe]:l},void 0,n()(se.Z,{[Ye]:{color:_.ZP.white}},void 0,"disconnect"===r&&!0===l&&n()(X.Z,{isWhite:!0}),"disconnect"===r&&!1===l&&n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.disconnect",[Xe]:"Disconnect"}),"disapprove"===r&&n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.remove",[Xe]:"Remove"})))))}function St(e){let{[Ne]:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.title",[Xe]:"Remove {integrationName} from approved integrations",[ue]:{[Ne]:t}})}function wt(e){let{[Ne]:t,disableDisconnectAll:i}=e;return n()(M.FormattedMessage,i?{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.caption",[Xe]:"Prevent members from installing {integrationName}.",[ue]:{[Ne]:t}}:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApprovalAndDisconnectAll.caption",[Xe]:"Revoke access for {integrationName} for all users in this workspace and prevent members from installing {integrationName}.",[ue]:{[Ne]:t}})}function Mt(e){let{[Ne]:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.label",[Xe]:"Disconnect {integrationName} for all users in workspace",[ue]:{[Ne]:t}})}function kt(e){let{[Ne]:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.caption",[Xe]:"Revoke access for {integrationName} for all users in this workspace.",[ue]:{[Ne]:t}})}function Ct(e){let{[Ne]:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.label",[Xe]:"Disconnect {integrationName}?",[ue]:{[Ne]:t}})}function Zt(e){let{[Ne]:t,userName:i}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.caption",[Xe]:"Revoke access for {integrationName} for {userName}",[ue]:{[Ne]:t,userName:i}})}function Tt(e){window.__c={n:"AdminComplianceIntegrationSettingsActionMenu"};const{[ct]:t,webhookSubscription:i}=e,o=(0,r.Fy)(),s=(0,r.O7)(),[l,d]=(0,a.useState)(!1),c=Pt(),u=(0,f.oh)(t);if(!u)return null;const m=f.$C[u],p=m.info.developer_name;if(!p)return null;const g=new U.Z,h={key:"manage",action:()=>{V.Z.setState({open:!0,[ct]:t,webhookSubscriptionId:null==i?void 0:i.id}),g.setState({open:!1})},[$e]:e=>a[Je](J.Z,F()({},e,{[Le]:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.actionMenu.manage",[Xe]:"Manage"})}))},v={key:Re,action:()=>{g.setState({open:!1}),d(!0)},[$e]:e=>a[Je](J.Z,F()({},e,{[Le]:n()("span",{[Ye]:c[Re]},void 0,n()(M.FormattedMessage,{id:"complianceIntegrationSettings.actionMenu.disconnect",[Xe]:"Disconnect"}))}))},y=[...m.info.oauth?[]:[h],v];return a[Je](a[je],null,n()($.ZP,{popupType:o[tt]?$.Z4[qe]:$.Z4.Popup,renderOrigin:e=>a[Je](W.Z,F()({},e,{[tt]:o[tt],[Ye]:{[He]:8,[Ge]:8}})),[de]:g,[$e]:()=>n()(ee.Z,{[Ue]:o[tt]?N.og[ze]:N.og.Popup,[Oe]:230},void 0,n()(te.Z,{type:te.i[Ke],[We]:[{key:ce,[$e]:e=>a[Je](ae.Z,e),items:y}],[Ve]:void 0}))}),n()(ie.Z,{open:l,[Be]:()=>d(!1),disableAnimation:!0,showCloseIcon:!0,[Ae]:c.innerModal,[$e]:()=>n()(bt,{[Le]:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.disconnectModal.title",[Xe]:"Disconnect {integrationName}?",[ue]:{[Ne]:p}}),[Ee]:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.disconnectModal.subtitle",[Xe]:"Revoke {integrationName}'s access to this workspace. Workspace events will no longer be sent to {integrationName}.",[ue]:{[Ne]:p}}),type:Re,[De]:()=>d(!1),handleConfirmation:async()=>{const e=null==i?void 0:i.bot_id;e&&(await D.P0({[Qe]:s,botId:e,onSuccess:()=>{}}),B.trackSecurityAndComplianceIntegrationUninstall(s,{[le]:t}),L.oV({label:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.snackbar.title",[Xe]:"Disconnected {integrationName} from your workspace",[ue]:{[Ne]:p}})}))}})}))}function Pt(){return(0,d.yK)((()=>({[Re]:{color:_.ZP.red},innerModal:{borderRadius:10}})),[])}var It=i(74136),Ft=i(31278),_t=i(69219),xt=i(58032),At=i(45653),Bt=i(15070),Dt=i(59054),Et=i(43132);const Lt=i(85).twM,Rt=i(85).uGP,Nt=i(85).OtN,Ot=i(85).PG2,Ut=i(85).tlN,Vt=i(85).nLZ,Wt=i(85).EMU,Kt=i(85).sM5,zt=i(85).ChN,Gt=i(85).g7N,Ht=i(85).Jkr,qt=i(85).j7K,jt=i(85).Gpy,Qt=i(85).nx5,Jt=i(85).piI,$t=i(85).rG,Yt=i(85).rpY,Xt=i(85).y79,ei=i(85).BQ6,ti=i(85).D7I,ii=i(85).PXg,oi=i(85).XNW,ni=i(85).dLQ,ai=i(85).wgE;function si(e){window.__c={n:"InternalIntegrationActionMenu"};const{botId:t}=e,[,,i]=(0,l.AF)(void 0,U.Z),o=(0,r.Fy)(),s=(0,r.O7)(),d=(0,l.VK)((()=>Z.default.state.currentSpaceStore),[]),[c,u]=(0,a.useState)(!1),m=(0,l.VK)((()=>d?T.t1.createChildStore(d,{table:p.cZ,id:t,spaceId:d.id}):void 0),[t,d]),g=(0,l.VK)((()=>(0,Bt.Mh)(null==m?void 0:m.getModel())),[m]),[{value:h}]=(0,Dt.r5)((async()=>{if(m){return await D.VG({[ai]:s,botId:null==m?void 0:m.id})}}),[s,m]);if(!m)return null;let v;return v=o[ni]?{menuType:N.og.ActionSheet}:{menuType:N.og.Popup},n()($.ZP,{popupType:o[ni]?$.Z4.SlideUp:$.Z4.Popup,buttonPopupStore:i,renderOrigin:e=>a[ti](W.Z,F()({[ni]:o[ni]},e,{[ei]:{[oi]:8,[ii]:8}})),[Yt]:()=>a[ti](a.Fragment,null,a[ti](ee.Z,v,n()(te.Z,{type:te.i[Xt],sections:[{key:"integration options",[Yt]:e=>a[ti](ae.Z,e),items:[...ri({[ai]:s,botToken:h}),{key:$t,action:()=>u(!0),[Yt]:e=>a[ti](J.Z,F()({title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegrationButton.label",[Qt]:"Disconnect {integrationName}",[jt]:{[Jt]:g}}),[ei]:{color:_.ZP.red}},e))}]}],[qt]:void 0})),n()(ie.Z,{open:c,onDismiss:()=>{u(!1)},disableAnimation:!0,[Yt]:()=>n()("div",{[ei]:{padding:20,[Ht]:333}},void 0,n()(se.Z,{isMultiline:!0,[ei]:{[Gt]:8,[zt]:b.Z[zt].semibold}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.title",[Qt]:"Disconnect {integrationName} in workspace",[jt]:{[Jt]:g}})),n()(se.Z,{isMultiline:!0,isSecondaryColor:!0,[ei]:{[Gt]:8}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.caption",[Qt]:"Revoke access for {integrationName} in workspace",[jt]:{[Jt]:g}})),n()("div",{[ei]:{[Kt]:Wt,[Vt]:12}},void 0,n()(oe.Z,{[ei]:{[Ht]:140,[ii]:9},isLarge:!0,[Ot]:()=>u(!1)},void 0,n()(se.Z,{},void 0,n()(M.FormattedMessage,{id:Ut,[Qt]:"Cancel"}))),n()(oe.Z,{[ei]:{[Ht]:140},isLarge:!0,[Ot]:async()=>{u(!1),await D.P0({[ai]:s,botId:m.id,onSuccess:()=>{B.trackDeveloperIntegrationsDisconnectClick(s,{type:"internal"})}})},[Nt]:_.ZP.red},void 0,n()(se.Z,{[ei]:{color:_.ZP.white}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegration..modal.button.disconnect",[Qt]:"Disconnect"})))))}))})}function ri(e){const{botToken:t,[ai]:i}=e;return t?[{key:"copy bot token",action:()=>{Et.copyString({[ai]:i,stringValue:t,copiedMessage:Et.clipboardMessages[Rt]}),B.trackDeveloperIntegrationsCopySecret(i,{from:Lt,table:p.cZ})},[Yt]:e=>a[ti](J.Z,F()({title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.copyInternalIntegrationTokenButton.label",[Qt]:"Copy internal integration token"})},e))}]:[]}var li=i(40235);const di=i(85).ChN,ci=i(85).int,ui=i(85).JJs,mi=i(85).$Vg,pi=i(85).$bT,gi=i(85).Lbi,hi=i(85).Joh,vi=i(85).rBf,fi=i(85).ESK,yi=i(85).EjX,bi=i(85).YsR,Si=i(85).PXg,wi=i(85).voC,Mi=i(85).XNW,ki=i(85).vK9,Ci=i(85).ivl,Zi=i(85).TLr,Ti=i(85).D7I,Pi=i(85)._dJ,Ii=i(85).SEy,Fi=i(85).GPw,_i=i(85).UPJ,xi=i(85).jkI,Ai=i(85).H1U,Bi=i(85).EMU,Di=i(85).sM5,Ei=i(85).TEz,Li=i(85).gGi,Ri=i(85).X_m,Ni=i(85).htl,Oi=i(85).Jkr,Ui=i(85).BQ6,Vi=i(85).qpZ,Wi=i(85).VUQ,Ki=i(85).TtP,zi=i(85).iOr,Gi=i(85).Csb,Hi=i(85).GTJ,qi=i(85).qJ8,ji=i(85).wZM,Qi=i(85).nx5,Ji={internal:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.internal",[Qi]:"INTERNAL"}),databaseSync:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.sync",[Qi]:"SYNC"}),[ji]:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.preview",[Qi]:"LINK PREVIEW"}),importer:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.importer",[Qi]:"IMPORTER"})};function $i(e){window.__c={n:"AdminIntegrationSettingsTable"};const{integrationIdToBotIds:t,internalIntegrationIds:i,integrationIdToUsers:o}=e,s=(0,l.VK)((()=>Z.default.state[qi]),[]),r=(0,d.Fg)(),c=(0,l.VK)((()=>null==s?void 0:s.getBotSettingsStore().getValue()),[s]),u=(0,l.VK)((()=>"approved_or_built_by_notion"===(null==c?void 0:c[Hi])),[c]),f=(0,l.VK)((()=>Boolean(null==c?void 0:c[Hi])),[c]),y=(0,l.VK)((()=>null!=c&&c[Gi]?Object.keys(c[Gi]):[]),[c]),b=y.filter((e=>!Object.keys(t).includes(e)&&!m.T2.includes(e))),S=b.some((e=>e===v.iK.google_drive.id)),w=(0,l.VK)((()=>null==s?void 0:s.id),[s]),k=t?Object.entries(t).map((e=>{let[t,i]=e;return Xi({[zi]:{table:g.K2,id:t},userStores:o[t],botIds:i,autoApproveBuiltByNotion:u})})):[],C=w?i.map((e=>Xi({[zi]:{table:p.cZ,id:e,spaceId:w},userStores:o[e],botIds:[e]}))):[],T=f?b.map((e=>Xi({[zi]:{table:g.K2,id:e},userStores:[],botIds:[],autoApproveBuiltByNotion:u}))):[],P=m.ns.filter((e=>!(0,h.CJ)(c)||y.includes(e.id)&&(e.id!==m._o||!S))).map((e=>function(e){const{legacyIntegration:t}=e,{id:i,name:o,info:a}=t;return{key:i,[Ni]:[n()("div",{[Ui]:{[Di]:Bi,[Ai]:xi,maxWidth:300}},0,n()("img",{src:a.icon,[Ui]:{[Ri]:28}}),n()("div",{[Ui]:{[ki]:0,[Mi]:15}},void 0,n()("div",{[Ui]:{[Di]:Bi}},void 0,n()(se.Z,{},void 0,o)),n()(se.Z,{isSmall:!0,[Ui]:{[Di]:Bi}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.legacy",[Qi]:"Notion Connected App"})))),n()(so,{renderedUsers:void 0,displayUsers:!1},1),n()("div",{},2,n()(ut,{[Ci]:i,isLegacy:!0,disableDisconnectAll:!0,disableDisconnectUser:!0}))]}}({botSettings:c,legacyIntegration:e}))),I=k[Ki]+C[Ki]+T[Ki]+P[Ki];return a[Ti](a.Fragment,null,n()(li.Z,{[Ni]:[{key:Wi,[Vi]:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.connectionsTable.connectionsColumn.title",[Qi]:"Connection"}),[Ui]:{[Oi]:"40%"}},{key:"added_by",[Vi]:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.connectionsTable.creationInfoColumn.title",[Qi]:"Users and access"})},{key:"more",[Vi]:void 0,[Ui]:{[Oi]:"5%"}}],rows:[...k,...C,...T,...P]}),0===I?n()("div",{[Ui]:{[Ri]:120,[Oi]:Li,fontSize:12,color:r[Ei],[Di]:Bi,[Ai]:xi,[_i]:xi,[Fi]:`1px solid ${r[Ii]}`}},void 0,n()(M.FormattedMessage,{id:Pi,[Qi]:"No integration installed"})):void 0)}function Yi(e){window.__c={n:"AdminIntegrationComplianceSettingsTable"};const{botIdToWebhookSubscription:t}=e,i=(0,d.yK)((e=>({emptyTable:{[Ri]:120,[Oi]:Li,fontSize:12,color:e[Ei],[Di]:Bi,[Ai]:xi,[_i]:xi,[Fi]:`1px solid ${e[Ii]}`}})),[]),o=(0,l.VK)((()=>Z.default.state[qi]),[]),s=(0,l.VK)((()=>o?(0,w.objectFromEntries)(Object.keys(t).map((e=>{var t;const i=T.Qx[Zi](o,{table:p.cZ,id:e,spaceId:o.id});return[i.id,null===(t=i.getIntegrationId())||void 0===t?void 0:t.toString()]}))):{}),[t,o]),r=Object.keys(t||[]).map((e=>{const i=s[e];if(i)return function(e){const{[zi]:t,botId:i,botIdToWebhookSubscription:o}=e,a=t.id,s=(0,f.oh)(a);if(!s)return;const r=f.$C[s];if(!r)return;const l=i?o[i]:void 0;return{key:`${a}:${i}`,[Ni]:[n()(eo,{integrationTable:g.K2,[Ci]:a},"integration-title"),n()(no,{webhookSubscription:l},"integration-installer"),n()(ao,{webhookSubscription:l},"integration-installed-at"),n()(Tt,{[Ci]:r.id,webhookSubscription:l},"integration-menu")]}}({[zi]:{table:g.K2,id:i},botId:e,botIdToWebhookSubscription:t})})).filter(y.isDefined);return a[Ti](a.Fragment,null,n()(li.Z,{[Ni]:[{key:Wi,[Vi]:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.connectionsColumn.title",[Qi]:"Connection"}),[Ui]:{[Oi]:"40%"}},{key:"integration-installer",[Vi]:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationInstallerColumn.title",[Qi]:"Added by"}),[Ui]:{[Oi]:"20%"}},{key:"integration-installed-at",[Vi]:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationDateAdded.title",[Qi]:"Date added"})},{key:"more",[Vi]:void 0,[Ui]:{[Oi]:"5%"}}],rows:r,tableStyle:{borderTop:"none"}}),0===r[Ki]?n()("div",{[Ui]:i.emptyTable},void 0,n()(M.FormattedMessage,{id:Pi,[Qi]:"No integration installed"})):void 0)}function Xi(e){const{[zi]:t,userStores:i,botIds:o,autoApproveBuiltByNotion:a}=e;if(t.table===g.K2){const e=t.id,s=(0,v.BP)({[Ci]:e,env:k.default.env});return{key:e,[Ni]:[n()(eo,{integrationTable:g.K2,[Ci]:e},"integration-title"),n()(so,{renderedUsers:i,displayUsers:!s},"integration-installer-info"),n()(ut,{[Ci]:e,integrationTable:g.K2,botIds:o,disableDisconnectUser:s||void 0,disableDisallow:s&&a},"admin-integration-settings-menu")]}}if(t.table===p.cZ)return{key:t.id,[Ni]:[n()(eo,{integrationTable:p.cZ,[Ci]:t.id},"integration-title"),n()(so,{renderedUsers:i,displayUsers:!1},"integration-installer-info"),n()(si,{botId:t.id},"integration-settings-menu")]};(0,y.unreachable)(t)}function eo(e){window.__c={n:"IntegrationTitle"};const{[Ci]:t,integrationTable:i}=e,o=(0,l.VK)((()=>Z.default.state[qi]),[]),a=(0,l.VK)((()=>{if(o)return o[wi]({table:i,id:t})}),[o,t,i]),[s,r,d,c]=(0,l.VK)((()=>{if(!a)return[];let e;const o=[];let s;if(i===p.cZ){const r=a;r.icon&&(e={pointer:{table:i,id:t},icon:r.icon}),o.push("internal"),s=n()(to,{botId:r.id})}else if(i===g.K2){const r=a,l=r.getInfo();l.icon&&(e={pointer:{table:i,id:t},icon:l.icon}),(0,m.mo)(r)&&(o.push(ji),(0,m.zc)(r)&&o.push("databaseSync")),s=(0,f.DB)(r.id)?null:n()(io,{[Ci]:r.id})}else(0,y.unreachable)(i);return[null==a?void 0:a.name,e,o,s]}),[i,t,a]);return a&&d?n()("div",{[Ui]:{[Di]:Bi,[Ai]:xi,maxWidth:300}},void 0,n()(Ft.Z,{disabled:!0,icon:r,title:s,isEmptyPage:!1,size:28,isLarge:!0,useInvertedColors:!0}),n()("div",{[Ui]:{[ki]:0,[Mi]:15}},void 0,n()("div",{[Ui]:{[Di]:Bi,[Si]:16}},void 0,n()(se.Z,{},void 0,s),d.map((e=>e&&n()(It.Z,{desktopStyle:{[Mi]:4}},void 0,Ji[e])))),c)):n()(X.Z,{})}const to=e=>{let{botId:t}=e;window.__c={n:"InternalIntegrationDeveloperName"};const i=(0,l.VK)((()=>Z.default.state[qi]),[]),o=(0,M.useIntl)(),a=(0,l.VK)((()=>null==i?void 0:i[wi]({table:p.cZ,id:t})),[i,t]),s=(0,l.VK)((()=>{if(i&&a){const e=i[wi]({table:a[bi],id:a[yi]});return(0,S.Nz)(o,e)}}),[i,a,o]);return s?n()(se.Z,{className:"notranslate",isSmall:!0},void 0,s):n()(oo,{})},io=e=>{let{[Ci]:t}=e;window.__c={n:"PublicIntegrationDeveloperName"};const i=(0,l.VK)((()=>Z.default.state[qi]),[]),o=(0,d.Fg)(),s=(0,l.VK)((()=>{const e=null==i?void 0:i[wi]({table:g.K2,id:t});return null==e?void 0:e.getInfo().developer_name}),[i,t]);return(0,v.BP)({[Ci]:t,env:k.default.env})?n()(se.Z,{isSmall:!0,[Ui]:{[Di]:Bi,[Ai]:xi}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.notion",[Qi]:"Notion {icon}",values:{icon:n()(xt.Z,{[hi]:()=>n()("div",{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfo.notion.tooltip",[Qi]:"Developed by Notion"})),placement:xt.Z[fi].Right,render:e=>a[Ti]("div",e,u.Z.integrationSecurity({[Oi]:12,[Ri]:12,fill:o[vi]}))})}})):s?n()(se.Z,{className:"notranslate",isSmall:!0},void 0,s):n()(oo,{})},oo=()=>n()(se.Z,{isSmall:!0},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.label.unverifiedDeveloper",[Qi]:"Unverified developer"}));function no(e){window.__c={n:"AdminComplianceInstaller"};const{webhookSubscription:t}=e,i=(0,M.useIntl)(),o=(0,l.VK)((()=>{const e=Z.default.state[qi];if(!e)return;const i=t?{id:t[yi],table:t[bi]}:void 0;return e&&i?P.U[Zi](e,i):void 0}),[t]),a=(0,l.VK)((()=>null==o?void 0:o[gi](i)),[o,i]);return o&&a?n()("div",{[Ui]:{[Di]:Bi,[pi]:"row",[_i]:mi,gap:8,[Ai]:xi,[Oi]:Li}},void 0,n()(At.Z,{[ui]:o,size:18}),n()(se.Z,{},void 0,a)):null}function ao(e){const{webhookSubscription:t}=e;return t?n()(_t.i,{useThinTitle:!0,title:(0,c.Yx)(Number(null==t?void 0:t[ci]),"medium_with_time",s.SP)}):null}function so(e){window.__c={n:"IntegrationInstallerInfo"};const{renderedUsers:t,displayUsers:i}=e,o=(0,l.VK)((()=>Z.default.state[qi]),[]),s=(0,M.useIntl)(),d=(0,r.O7)(),c=(0,l.VK)((()=>{if(o)return(0,C.rn)(d,o)}),[d,o]),u=(0,a.useMemo)((()=>t&&t[Ki]),[t]),m=(0,l.VK)((()=>t&&t[Ki]>0?t[0]:void 0),[t]),p=(0,l.VK)((()=>m?m[gi](s):void 0),[m,s]);return i&&void 0!==u?m?n()("div",{[Ui]:{[Di]:Bi,[Ai]:xi}},void 0,n()(At.Z,{[ui]:m,avatarShouldShowShadow:!0,[Ui]:{[Si]:8},size:28}),n()(se.Z,{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.listOfUsers",[Qi]:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} +{remainingCount}} other {{firstUser} +{remainingCount}}}",values:{firstUser:p,remainingCount:u-1}}))):n()(se.Z,{isSecondaryColor:!0,[Ui]:{[Di]:Bi,[Ai]:xi}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.noUsers",[Qi]:"No users"})):n()(se.Z,{[Ui]:{[Di]:Bi,[Ai]:xi}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.anyone",[Qi]:"Anyone in {spaceName}",values:{spaceName:n()(se.Z,{[Ui]:{[di]:b.Z[di].medium}},void 0,c)}}))}},66309:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var o=i(77094),n=i.n(o),a=(i(67294),i(480)),s=i(81954),r=i(24405),l=i(27328),d=i(24677),c=i(98104),u=i(95477),m=i(33665),p=i(34859),g=i(69454),h=i(36488),v=i(28451),f=i(53953),y=i(44532),b=i(18647),S=i(32662);const w=i(85).Vyz,M=i(85).jkI,k=i(85).H1U,C=i(85).rps,Z=i(85).$bT,T=i(85).gGi,P=i(85).NF1,I=i(85).Scd,F=i(85)._lc,_=i(85).O8Z,x=i(85).$SM,A=i(85).Xte,B=i(85).mEi;function D(e){window.__c={n:"AnnouncementModal"};const t=(0,a.O7)(),i=(0,r.Fg)(),o=(0,a.Fy)(),D=(0,s.VK)((()=>(0,m.isTabbedRouterStoreEnabled)(t)),[t]),E=(0,s.VK)((()=>t.TabbedRouterStore),[t.TabbedRouterStore]),L=(0,s.VK)((()=>(0,l.w_)(E.state)),[E]);let R=e[B]&&!u.default.isAdminMode;const N=(0,s.VK)((()=>t[A].isLandscape()),[t[A]]),O=(0,s.VK)((()=>{const e=g.Z.state.phase===g.i.hidden||g.Z.state.phase===g.i.willHide;let i=g.Z[x]();return o[_]&&(i+=32),e?t[A].getSafePaddingBottomPx(i):i}),[o[_],t[A]]);if(o.isPhone){if(D){var U;const e="web"===L.type&&((null===(U=L.redirectedTo)||void 0===U?void 0:U.route)||L.route);R=e&&"page"===e.name}function o(){var i;null===(i=e.onModalShow)||void 0===i||i.call(e),d.clear(t),c.blurActiveElement()}return n()(v.g,{calloutId:e.calloutId,[B]:R,onShow:o},void 0,n()(y.ZP,{open:!0,forceFullScreenSlideUp:!0,hidesMobileNativeBottomBar:!0,[w]:!0,popupType:y.ZP[F].SlideUp,style:{[I]:i.sidebarBackground,[P]:0,width:T,height:T,...e.mobileInnerStyle},render:()=>n()(b.Z,{type:p.Z.Y,style:{width:N?"80%":T,height:T,display:"flex",[Z]:C,[k]:M}},void 0,n()(S.Z,{size:N?200:0}),e.mobileRenderInner(),n()(S.Z,{size:O}))}))}return n()(v.g,{calloutId:e.calloutId,[B]:e[B],onShow:e.onModalShow},void 0,n()(f.Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:e.desktopOnDismiss,innerStyle:{[I]:i.sidebarBackground,[P]:12,...e.desktopInnerStyle},render:()=>n()(h.Z,{capture:!0,allowEsc:!0,render:e.desktopRenderInner})}))}},65941:(e,t,i)=>{i.r(t),i.d(t,{default:()=>kR});var o=i(77094),n=i.n(o),a=i(67294),s=i.t(a,2),r=i(480),l=i(81954),d=i(23537),c=i(77907),u=i(73008);function m(){window.__c={n:"MessageStoreDebugPanelWrapper"};return(0,l.VK)((()=>u.Z.state.open),[],{debugName:"MessageStoreDebugPanelWrapper.isOpen"})?n()(c.LazyMessageStoreDebugPanel,{}):null}var p=i(79315),g=i(19671),h=i(13023),v=i(41464),f=i(54564),y=i(10663),b=i(45094),S=i(24229),w=i(83355),M=i(41432),k=i(5366),C=i(78089),Z=i(87279),T=i(65598),P=i(34859),I=i(87521),F=i(36488),_=i(72897),x=i(3386),A=i(78140),B=i(40721),D=i(37064),E=i(66957);const L=i(85).wuN,R=i(85).qc1,N=i(85).Exd,O=i(85).g7N,U=i(85).dMt,V=i(85).Tay,W=i(85).vIB,K=i(85).TtP,z=i(85).MOk,G=i(85).D7I,H=i(85).fTK,q=i(85).nx5,j=i(85).dLQ,Q=i(85).wgE,J=i(85).tge,$=i(85).YGn,Y=i(85).lZM,X=i(85).MpA,ee=i(85).hDW,te=i(85).P0R,ie=i(85).a$o,oe=i(85).EIp,ne=[S.u.Open,S.u.Resolved];class ae extends w.Z{constructor(){super(...arguments),this.deepDiscussionsStores=this[oe]((()=>{const{[ie]:e}=this[te],{[ee]:t,[X]:i}=this[te];return T.getDiscussionStores(t,{[X]:i}).filter((t=>!e||e.includes(t.id)||(0,C.De)(t)))})),this.handleChangeTab=e=>{const t=S.Z.state;t.open&&S.Z.setState({...t,tab:ne[e]})},this[Y]=e=>{null==e||e[$](),f[J]()}}renderComponent(){if((0,b.updateSidebarIsExpanded)(this[Q]))return null;const{device:e}=this[Q];let t;return t=e[j]?{menuType:Z.og.Modal,title:n()(k.FormattedMessage,{[q]:"Comments",id:"blockDiscussionMenu.mobileMenu.title"}),header:this[H](),right:n()(B.DoneMenuText,{}),onClickRight:f[J],whiteBackground:!0}:{menuType:Z.og.Popup,header:this[H](),width:480,maxHeight:"50vh",onClickOutside:f[J]},n()(_.Z,{capture:!0,preventType:P.Z.All},void 0,n()(F.Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>n()(x.Z,{capture:!0,onEsc:f[J],onBackspace:this[Y],onDelete:this[Y]},void 0,n()(D.Z,{store:this[te][ee],droppable:!0,render:()=>a[G](A.Z,t,this.renderMenuContent())},this[te][ee].id))}))}[H](){const{device:e}=this[Q],{resolved:t,unresolved:i}=T[z](this.deepDiscussionsStores.state),o=i[K],a=t[K];return 0===a||0===o?null:n()(E.Z,{tabs:[n()(k.FormattedMessage,{[q]:"Open ({numberOfOpenDiscussions})",id:"blockDiscussionMenu.openDiscussionsTab.title",values:{numberOfOpenDiscussions:o}}),n()(k.FormattedMessage,{[q]:"Resolved ({numberOfResolvedDiscussions})",id:"blockDiscussionMenu.resolvedDiscussionsTab.title",values:{numberOfResolvedDiscussions:a}})],selectedIndex:ne.indexOf(this[te].tab),onChange:this.handleChangeTab,style:{...e.isAndroid&&{borderBottom:"none"}}})}renderMenuContent(){const{device:e}=this[Q],{resolved:t,unresolved:i}=T[z](this.deepDiscussionsStores.state);if(this[te].tab===S.u.Open){if(i[K]){const t=i.map(((e,t,i)=>n()(c.LazyDiscussion,{store:e,format:C.O2.Menu,isFirst:0===t,isOnly:1===i[K],[W]:"block_menu",[V]:!0,[ee]:this[te][ee],onDismiss:f[J]},e.id))),o=this[te][ee].getType(),s=o&&M.p2[o];if(e[j]&&s){const e=I.h(this[te][ee]);return e?n()(a.Fragment,{},void 0,n()("div",{style:{padding:"12px 16px",boxShadow:`0 1px 0 ${this.theme[U]}`,[O]:1}},void 0,n()(e,{store:this[te][ee],disabled:!0,hideContent:!0,style:{[N]:14,[R]:"none"},isQuickFind:!0})),t):t}return t}return this.renderEmptyState(n()(k.FormattedMessage,{[q]:"No comments to show.",id:"blockDiscussionMenu.emptyState.noCommentsMessage"}))}return t[K]?t.map(((e,t,i)=>n()(c.LazyDiscussion,{store:e,format:C.O2.Menu,isFirst:0===t,isOnly:1===i[K],[W]:"block_menu",[V]:!0,[ee]:this[te][ee],onDismiss:f[J]},e.id))):this.renderEmptyState(n()(k.FormattedMessage,{[q]:"No resolved comments.",id:"blockDiscussionMenu.emptyState.noResolvedCommentsMessage"}))}renderEmptyState(e){const{device:t}=this[Q];return n()("div",{style:{textAlign:"center",padding:t[j]?"64px 18px":"32px 18px 36px",[N]:14,color:this.theme[L]}},void 0,e)}}ae.displayName="BlockDiscussionMenu";const se=ae;var re=i(44532);const le=i(85).HVF,de=i(85).tge,ce=i(85)._lc,ue=i(85).MpA,me=i(85).a$o,pe=i(85).hDW,ge=i(85).QmD;const he=function(){window.__c={n:"BlockDiscussionMenuPopup"};const e=(0,r.O7)(),{device:t}=e,i=(0,l.VK)((()=>S.Z[ge].rect),[]),o=(0,l.VK)((()=>!(0,b.updateSidebarIsExpanded)(e)&&S.Z[ge].open&&!(0,y.az)(e,S.Z[ge][pe])),[e]),s=(0,a.useCallback)((()=>{if(S.Z[ge].open&&!(0,b.updateSidebarIsExpanded)(e))return n()(se,{rect:S.Z[ge].rect,tab:S.Z[ge].tab,[pe]:S.Z[ge][pe],[me]:S.Z[ge][me],[ue]:S.Z[ge][ue]})}),[e]);return n()(re.ZP,{popupType:t.isMobile?re.ZP[ce].SlideUp:re.ZP[ce].Popup,open:o,originRect:i,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,disableMouseCapture:!0,originGap:4,render:s,preventScaleTransition:!0,[le]:!0,onDismiss:f[de]})};var ve=i(96486),fe=i.n(ve),ye=i(29369),be=i(50906),Se=i(6404),we=i(75079),Me=i(33665),ke=i(35328),Ce=i(8949),Ze=i(39098),Te=i(27724),Pe=i(13713),Ie=i(80209),Fe=i(48019),_e=i(68894),xe=i(72495),Ae=i(83182);const Be=i(85).Yzm,De=i(85).Vyz,Ee=i(85)._lc,Le=i(85).C$B,Re=i(85).Ezy,Ne=i(85).qLW,Oe=i(85).vN2,Ue=i(85).bSA,Ve=i(85).TLr,We=i(85).qJ8,Ke=i(85).MiB,ze=i(85).CtD,Ge=i(85).P24,He=i(85).P3s,qe=i(85).D7I,je=i(85).HYJ,Qe=i(85).j7K,Je=i(85).BCA,$e=i(85).nQ3,Ye=i(85).Rbl,Xe=i(85).DRl,et=i(85).iVN,tt=i(85).nx5,it=i(85).ceT,ot=i(85).E6w,nt=i(85).YOX,at=i(85).Gnd,st=i(85).PlO,rt=i(85).loK,lt=i(85).Ixn,dt=i(85).QmD,ct=i(85).wgE,ut=i(85).Jhh;class mt extends w.Z{constructor(){super(...arguments),this[ut]=()=>{const{device:e}=this[ct],t=Ce.Z[dt];if(!t[lt])return;const{originBlockRect:i,actions:o,[rt]:s,[st]:r}=t,l={[ct]:this[ct],blocks:t[at],[nt]:i,[st]:r},d=t.showInput&&this.renderInputSection(),c=t[at][0];let u;return u=e[ot]?{[it]:Z.og.Modal,title:n()(k.FormattedMessage,{[tt]:"Actions",id:"blockMenu.actionButton.label"}),right:n()(B.DoneMenuText,{}),[et]:this[Xe],header:d}:{[it]:Z.og.Popup,width:265,header:d},n()(x.Z,{capture:!0,onBackspace:fe()[Ye]},void 0,a[qe](A.Z,u,n()(Fe.Z,{filter:s,context:l,[$e]:o,[Je]:this.handleAccept,[Qe]:s?0:void 0}),!s&&this.renderBlockAuthorInfo(),!s&&n()(Ie.Z,{store:c}),!s&&c[je]()&&this.renderCollectionHelpButton()))},this[Xe]=()=>{Se.xv()},this.handleAccept=e=>{const t=Ce.Z[dt];if(!t[lt])return;const{[at]:i}=Te.default[dt],{[He]:o,[Ge]:n}=t,a=i[0];if(a){const t=a[ze](),i=a.getType();if(i&&t){let s;if(t===ye.e0){const e=a[Ke](),{[We]:t}=p.default.getState();t&&void 0!==e&&(s=Ze.zX[Ve](t,{table:ye.e0,id:e}))}const r=(0,we.getCollectionAnalyticsContext)(n)||{};be.trackBlockAction(this[ct],{[Ue]:e[Ue],from:o,block_id:a.id,[Oe]:i,parentTeamStore:s,is_toggleable:(0,ke.isToggleOrToggleableFormatBlockType)(i,a[Ne]()),...r})}}e[Re]&&Se.xv()},this[Le]=e=>{Ce.Z[dt][lt]&&Ce.Z.setState({...Ce.Z[dt],[rt]:e.target.value})}}renderComponent(){const{device:e}=this[ct],t=Ce.Z[dt];return n()(re.ZP,{popupType:e[ot]?re.ZP[Ee].SlideUp:re.ZP[Ee].Popup,open:t[lt],[nt]:t[lt]?t.originBlockRect:void 0,onDismiss:this[Xe],placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:0,preventScaleTransition:!0,render:this[ut],[De]:e.isMobile})}renderBlockAuthorInfo(){const e=Ce.Z[dt];if(this[ct].currentUser.isLoggedIn()&&e[lt]&&!(e[at].length>1))return n()(Pe.Z,{store:e[at][0],isPageMoreButton:!1})}renderInputSection(){const{device:e}=this[ct],{intl:t}=this.props,i=Ce.Z[dt];if(!i[lt]||e[ot])return;const{[rt]:o}=i;return n()(xe.Z,{isInput:!0},void 0,n()(_e.ZP,{value:o,onChange:this[Le],focus:!0,focusAfterAnimation:!0,placeholder:t[Be]({[tt]:"Search actions…",id:"blockMenu.filterForActions.placeholder"}),preventCaptureDeleteWhenEmpty:!0}))}renderCollectionHelpButton(){return n()(xe.Z,{topBorder:!0},void 0,n()(Ae.Z,{title:n()(k.FormattedMessage,{[tt]:"Learn about databases",id:"blocks.blockMenu.collectionHelpButton"}),href:(0,Me.getLocalizedUrl)("guides.database"),[He]:"block_menu"}))}}mt.displayName="BlockMenu";const pt=(0,k.injectIntl)(mt);var gt=i(97464),ht=i.n(gt),vt=i(62965),ft=i(79554),yt=i(43250),bt=i(33929),St=i(61207),wt=i(52275),Mt=i(32163);const kt=i(85).Yzm,Ct=i(85)._lc,Zt=i(85).t4B,Tt=i(85).g5n,Pt=i(85).Sjp,It=i(85).D7I,Ft=i(85).j7K,_t=i(85).y79,xt=i(85).Ie8,At=i(85).ceT,Bt=i(85).dLQ,Dt=i(85).wgE,Et=i(85).nx5,Lt=(0,k.defineMessages)({createTransclusion:{[Et]:"Paste and sync",id:"blockPasteMenu.actions.createTransclusion.title"},linkToPage:{[Et]:"Link to page",id:"blockPasteMenu.actions.linkToPage.title"},dismissItem:{[Et]:"Dismiss",id:"blockPasteMenu.actions.dismiss.title"}});class Rt extends w.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this[Dt],t=St.Z.state;if(!t.open)return;const i=this.getSections(t);let o;return o=e[Bt]?{[At]:Z.og[xt]}:{[At]:Z.og.Popup,width:320,maxHeight:"40vh"},a[It](A.Z,ht()({},o,{className:yt.embedMenu}),n()(Mt.Z,{type:Mt.i[_t],sections:i,[Ft]:0}))},this[Pt]=()=>{ft.xv()}}willMountOrUpdate(){const e=St.Z.state;if(e.open){const{stores:t,phase:i}=Te.default.state;(0,vt.Z)(t,e[Tt])&&i===Te.SelectionPhase.Selected||ft.xv()}}renderComponent(){const{device:e}=this[Dt],t=St.Z.state;return n()(re.ZP,{popupType:e[Zt]&&!e.isTablet?re.ZP[Ct].SlideUp:re.ZP[Ct].Popup,open:t.open,originRect:t.open?t.rect:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e[Bt],keepFocus:e[Bt],render:this.renderMenu,onDismiss:this[Pt]})}getSections(e){const{[Tt]:t}=e,i=[];if("blocks"===e.type){const{copiedStores:o,pageSource:n}=e;ft.H8({[Tt]:t,copiedStores:o})&&i.push({name:bt.default[kt](Lt.createTransclusion),action:async()=>{await ft.ry({[Dt]:this[Dt],[Tt]:t,copiedBlockIds:o.map((e=>e.id))})}}),ft.wK({[Tt]:t})&&i.push({name:bt.default[kt](Lt.linkToPage),action:async()=>ft.Dq({[Dt]:this[Dt],[Tt]:t,source:{type:Tt,copiedStores:o,pageSource:n}})})}"links"===e.type&&i.push({name:bt.default[kt](Lt.linkToPage),action:async()=>ft.Dq({[Dt]:this[Dt],[Tt]:t,source:{type:"links",copiedLinks:e.copiedLinks}})});return[{key:"embed section",render:e=>a[It](xe.Z,e),items:[{key:"dismiss",render:e=>a[It](wt.Z,ht()({},e,{title:bt.default[kt](Lt.dismissItem)})),action:this[Pt]},...i.map((e=>{let{name:t,action:i}=e;return{key:`embed ${t}`,render:e=>a[It](wt.Z,ht()({},e,{title:t})),action:i}}))]}]}}Rt.displayName="BlockPasteMenu";const Nt=Rt;var Ot=i(87143),Ut=i(74194),Vt=i(64369);const Wt=i(85).z$9,Kt=i(85).qc1,zt=i(85).nLZ,Gt=i(85).Exd,Ht=i(85).gGi,qt=i(85).Rbl,jt=i(85)._lc,Qt=i(85).nx5,Jt=i(85).t4B,$t=i(85).se3,Yt=i(85).DRl;class Xt extends w.Z{constructor(){super(...arguments),this[Yt]=e=>{Ot.Z.setState({...Ot.Z.state,active:!1,[$t]:""})}}renderComponent(){const{device:e}=this.environment,{active:t,[$t]:i}=Ot.Z.state,o=window.innerWidth/2-150,a=window.innerHeight/2,s=e[Jt]?n()(k.FormattedMessage,{[Qt]:"Tap to copy the link above",id:"clipboardInputRenderer.copyLink.mobile_message"}):n()(k.FormattedMessage,{[Qt]:"Right click and copy the link above",id:"clipboardInputRenderer.copyLink.message"});return n()(re.ZP,{popupType:e[Jt]?re.ZP[jt].SlideUp:re.ZP[jt].Popup,open:t,originRect:{top:a,left:o},onDismiss:this[Yt],placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:0,render:()=>n()(x.Z,{capture:!0,onEnter:fe()[qt],onCommandEnter:fe()[qt],onCommandShiftEnter:fe()[qt],onCommandSlash:fe()[qt],onDelete:fe()[qt],onBackspace:fe()[qt],onEsc:fe()[qt],onLeft:fe()[qt],onRight:fe()[qt],onUntab:fe()[qt],onTab:fe()[qt],onSelectAll:fe()[qt],onRedo:fe()[qt],onUndo:fe()[qt],onToggleBold:fe()[qt],onToggleItalics:fe()[qt],onToggleStrike:fe()[qt],onToggleCode:fe()[qt],onCut:fe()[qt],onCopy:fe()[qt],onPaste:fe()[qt],onKeypress:fe()[qt]},void 0,n()("div",{style:{padding:8,width:300}},void 0,n()(Ut.Z,{style:{width:Ht,[Gt]:12},value:i,focus:!0,textarea:!0,selectAll:!0,readOnly:!0}),n()(Vt.Z,{isSmall:!0,style:{[zt]:6,[Kt]:Wt}},void 0,s)))})}}Xt.displayName="ClipboardInputRenderer";const ei=Xt;var ti=i(1302),ii=i(24405),oi=i(99036),ni=i(80951),ai=i(23482),si=i(3909),ri=i(21202),li=i(6287),di=i(3791),ci=i(70203),ui=i(95371),mi=i(97880),pi=i(82990),gi=i(63143),hi=i(51365),vi=i(26797),fi=i(77162),yi=i(98834),bi=i(64434),Si=i(19785),wi=i(4636),Mi=i(9953),ki=i(79978),Ci=i(12359),Zi=i(66890),Ti=i(28020),Pi=i(49616),Ii=i(78316),Fi=i(99417),_i=i(17809),xi=i(88804),Ai=i(29987),Bi=i(79576),Di=i(69454),Ei=i(78291),Li=i(73420),Ri=i(56940),Ni=i(91839),Oi=i(68785),Ui=i(89728),Vi=i(73935),Wi=i(47307),Ki=i(27153),zi=i(53471),Gi=i(83279),Hi=i(13401),qi=i(79131),ji=i(1743),Qi=i(95538),Ji=i(43593),$i=i(54604),Yi=i(5978),Xi=i(95477),eo=i(49085);class to extends eo.default{getInitialState(){return{open:!1}}}const io=to;var oo=i(24736),no=i(31945),ao=i(81865);const so=i(85).j7K,ro=i(85).lsp,lo=i(85).y79,co=i(85).B6G,uo=i(85).nx5,mo=i(85).ToB,po=i(85).PG2,go=i(85).sI1,ho=i(85).$Vg,vo=i(85).H1U,fo=i(85).Mm1,yo=i(85)._V5,bo=i(85).UD6,So=i(85).f8h,wo=i(85).Wp_,Mo=i(85).Omf,ko=i(85).rpY,Co=i(85).I9F,Zo=i(85).Ifi,To=i(85).jkI,Po=i(85).fsm,Io=i(85).gGi,Fo=i(85).I7L,_o=i(85).xOW,xo=i(85).fBv,Ao=i(85).XtO,Bo=i(85).mFu,Do=i(85).HyO,Eo=i(85).D7I,Lo=i(85).Dd5,Ro=i(85).cZW,No=i(85).BQ6,Oo=i(85).LKh,Uo=i(85).P0R,Vo=i(85).loK,Wo=i(85).GDw,Ko=i(85).aCU,zo=i(85).Jkr,Go=i(85).Ie8,Ho=i(85).ceT,qo=i(85).dLQ,jo=i(85).Gnd,Qo=i(85).wgE,Jo=i(85).zdz;class $o extends w.Z{constructor(){super(...arguments),this.storeTypes={[Jo]:io},this.imageNode=void 0,this.renderRenameMenu=()=>{const{device:e}=this[Qo],t=this[jo][Jo].state;if(!t.open)return;let i;return i=e[qo]?{[Ho]:Z.og[Go]}:{[Ho]:Z.og.Popup,[zo]:380},a[Eo](A.Z,i,n()("div",{[No]:this[Ko]()},void 0,n()(Ut.Z,{[No]:this[Wo](),value:t[Vo],[Ro]:Ji.getFileNameFromUrl(this[Uo].url),[Lo]:this[Oo],onSubmit:this.handleCloseRename,focusInitial:!0,selectAll:!0})))},this[Do]=()=>{$i.openFullscreen({[Qo]:this[Qo],renderFullScreenNode:()=>n()(ao.Z,{url:this[Uo].url,[Zo]:!0,[Co]:this[Uo][Ao][Bo],[zo]:300,[ko]:(e,t)=>n()("img",{src:t,[No]:{[xo]:_o,[Fo]:Io,[Po]:Io,margin:0,alignSelf:To,[zo]:Io}})}),fullScreenNodeRect:this.imageNode[Mo](),block:this[Uo][Ao],imageUrl:this[Uo].url})},this.handleRename=()=>{this[jo][Jo][wo]({open:!0,[Vo]:this[Uo].name})},this.handleCloseRename=()=>{this[jo][Jo][wo]({open:!1})},this[Oo]=e=>{const t=this[jo][Jo].state;if(!t.open)return;const i=e.target.value;this[jo][Jo][wo]({...t,[Vo]:i});const o=Ji.getFileDisplayName({title:i,source:this[Uo].url});this[Uo][Lo]({url:this[Uo].url,name:o})},this.handleViewOriginal=()=>{const{url:e,name:t}=this[Uo];Yi.openFileUrl(this[Qo],{url:e,type:"file",from:"view_original",[So]:t,[Co]:this[Uo][Ao][Bo]})},this.handleDownload=()=>{const{url:e,name:t}=this[Uo];be.trackDownloadFile(this[Qo],{url:e,fileName:t,from:"FilePropertyMenuItem"}),Yi.downloadFileUrl(this[Qo],{url:e,download:!0,[So]:t,[Co]:this[Uo][Ao][Bo]})},this[bo]=()=>{this[Uo].onDelete(this[Uo].url)}}renderComponent(){const{url:e}=this[Uo];return Qi.SR({url:e})?this.renderImage(e):this.renderFile()}renderImage(e){const{device:t}=this[Qo],{disabled:i}=this[Uo];return n()(wt.Z,{focused:!1,showDragHandle:!i&&!t[qo],[No]:{[yo]:t[qo]?12:8,[fo]:t[qo]?12:8,[vo]:ho},title:n()(ao.Z,{url:e,[Zo]:!0,[Co]:this[Uo][Ao][Bo],[zo]:300,[ko]:(e,t)=>n()("div",{[No]:$o[go]},void 0,a[Eo]("img",{src:t,[No]:$o.imageStyle,[po]:this[Do],ref:e=>this.imageNode=e}))}),right:this[mo](!0),dontShrinkRight:!0})}renderFile(){const{device:e}=this[Qo],{disabled:t}=this[Uo],{name:i}=this[Uo];return n()(re.GI,{open:this[jo][Jo].state.open,popupType:e[qo]?no.Z4.SlideUp:no.Z4.Popup,origin:n()(wt.Z,{focused:!1,showDragHandle:!t&&!e[qo],[po]:this.handleViewOriginal,title:i,icon:n()("div",{[No]:{[zo]:e[qo]?16:14}},void 0,si.Z.file()),right:this[mo](!1),dontShrinkRight:!0}),[ko]:this.renderRenameMenu,onDismiss:this.handleCloseRename})}getActionMenuItems(e){const{device:t}=this[Qo],{url:i,disabled:o}=this[Uo],s=[];return e&&s.push({key:"fullscreen",[ko]:e=>a[Eo](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[uo]:"Full screen",id:"database.actionMenu.fileProperty.fullscreen.title"})})),action:this[Do]}),(Ji[co](i,[Xi.default.secureFileS3.url,Xi.default.secureFileS3V2.url])||t.isNative)&&s.push({key:"download",[ko]:e=>a[Eo](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[uo]:"Download",id:"database.actionMenu.fileProperty.download.title"})})),action:this.handleDownload}),s.push({key:"original",[ko]:e=>a[Eo](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[uo]:"View original",id:"database.actionMenu.fileProperty.viewOriginal.title"})})),action:this.handleViewOriginal}),o||e||s.push({key:"rename",[ko]:e=>a[Eo](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[uo]:"Rename",id:"database.actionMenu.fileProperty.rename.title"})})),action:this.handleRename}),o||s.push({key:"delete",[ko]:e=>a[Eo](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[uo]:"Delete",id:"database.actionMenu.fileProperty.delete.title"})})),action:this[bo]}),s}[mo](e){const{device:t}=this[Qo];return n()(no.ZP,{popupType:t[qo]?no.Z4.SlideUp:no.Z4.Popup,renderOrigin:e=>a[Eo](oo.Z,ht()({[qo]:t[qo]},e)),[ko]:i=>{let o;return o=t[qo]?{[Ho]:Z.og[Go]}:{[Ho]:Z.og.Popup,[zo]:200},a[Eo](A.Z,o,n()(Mt.Z,{type:Mt.i[lo],[so]:0,onAccept:i.close,sections:[{key:ro,[ko]:e=>a[Eo](xe.Z,e),items:this.getActionMenuItems(e)}]}))}})}[Ko](){return{display:"flex",[vo]:To,color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}[Wo](){return{display:"flex",[vo]:To,flexGrow:1,fontSize:14,lineHeight:"20px",[yo]:4,[fo]:4,paddingLeft:10,paddingRight:10,[zo]:Io,borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",[xo]:_o}}}$o.displayName="FilePropertyMenuItem",$o.imageStyle={display:"block",[Po]:Io,[Fo]:180,cursor:"zoom-in"},$o[go]={flex:"auto",overflow:"hidden"};const Yo=$o;var Xo=i(28992),en=i(32854);const tn=i(85).gio,on=i(85).PXg,nn=i(85).nLZ;class an extends w.Z{renderComponent(){return n()(Xo.Z,{title:n()("div",{style:{display:"flex"}},void 0,n()(Oi.Z,{style:{[nn]:1,[on]:6}}),n()(en.Z,{percentage:this.props[tn]}))})}}an.displayName="ProgressMenuItem";const sn=an,rn=i(85).Omf,ln=i(85).TVJ,dn=i(85).D7I,cn=i(85).Mm1,un=i(85)._V5,mn=i(85).nx5,pn=i(85).irb,gn=i(85).KT9,hn=i(85).C1,vn=i(85).gio,fn=i(85).xYh,yn=i(85).Gnd,bn=i(85).Wp_,Sn=i(85).Wdr,wn=i(85).vpH,Mn=i(85).Dd5,kn=i(85).XtO,Cn=i(85).dLQ,Zn=i(85).P0R,Tn=i(85).pkR,Pn=i(85).wgE,In=i(85).F1p,Fn=i(85).drZ;class _n extends w.Z{constructor(){super(...arguments),this[Fn]=void 0,this.storeTypes={[In]:Gi.Z},this.renderFile=e=>{const{device:t}=this[Pn],{value:i,[Tn]:o}=this[Zn],a=i.find((t=>t.url===e));if(a){const e=a.url,i=a.name;return t[Cn]?n()(xe.Z,{},e,n()(Yo,{[kn]:this[Zn][kn],name:i,url:e,onDelete:this.handleFileDelete,[Mn]:this.handleFileChange,[Tn]:o})):n()(Yo,{[kn]:this[Zn][kn],name:i,url:e,onDelete:this.handleFileDelete,[Mn]:this.handleFileChange,[Tn]:o},e)}},this.handleAddFileMount=e=>{e&&(this.addFileButton=e)},this.handleAddFileClick=e=>{this[wn]()},this.handleDraggableDrop=e=>{const{[Mn]:t,value:i}=this[Zn];t({value:fe().sortBy(i,(t=>{const i=t.url;return i?e.indexOf(i):1/0}))})},this.handleMediaPickerUploadStart=e=>{Ki[Sn](),this[yn][In][bn]({[fn]:!0,[vn]:0}),this[Fn]=[e]},this.handleMediaPickerUploadComplete=e=>{const{value:t,[Mn]:i}=this[Zn];if(!this[Fn])return;const o=this[Fn][0];if(!o)return;i({value:[...t,{name:o.name||e,url:e}]}),this[yn][In][hn](),Ki[Sn]()},this.handleMediaPickerEmbedComplete=e=>{const{value:t,[Mn]:i}=this[Zn];i({value:[...t,{name:e,url:e}]}),this[yn][In][hn](),Ki[Sn]()},this.handleUploadFilesStart=e=>{this[yn][In][bn]({[fn]:!0,[vn]:0}),this[Fn]=e},this.handleUploadFilesComplete=e=>{const{value:t,[Mn]:i}=this[Zn];if(!this[Fn])return;i({value:[...this[Fn].map(((t,i)=>{const o=e[i];return{name:t.name||o,url:o}})),...t]}),this[yn][In][hn]()},this[gn]=e=>{const{[vn]:t}=e;this[yn][In][bn]({...this[yn][In].state,[vn]:t})},this.handleUploadError=()=>{this[yn][In][hn](),Wi[pn](n()(k.FormattedMessage,{id:"filePropertyMenu.uploadFileFailedError.message",[mn]:"Upload failed."}))},this.handleFileChange=e=>{const{value:t,[Mn]:i}=this[Zn];i({value:t.map((t=>t.url===e.url?{name:e.name,url:e.url}:t))})},this.handleFileDelete=e=>{const{value:t,[Mn]:i}=this[Zn];i({value:t.filter((t=>t.url!==e))})}}didMount(){const{device:e}=this[Pn],{uploadFiles:t,[kn]:i}=this[Zn];t?zi.uploadFiles({[Pn]:this[Pn],files:t,bucket:"secure",record:i.pointer,onBatchStart:this.handleUploadFilesStart,onBatchProgress:this[gn],onBatchComplete:this.handleUploadFilesComplete,onBatchError:this.handleUploadError}):this.isEmpty()&&!e[Cn]&&this[wn]()}willUnmount(){Ki[Sn]()}renderComponent(){const{device:e}=this[Pn],{[Tn]:t}=this[Zn],i=this.isEmpty(),{[fn]:o,[vn]:s}=this[yn][In].state;let r;return r=e[Cn]?{menuType:Z.og.Modal,title:n()(k.FormattedMessage,{[mn]:"File property",id:"database.fileProperty.mobileMenu.title"}),right:n()(B.DoneMenuText,{}),onClickRight:this[Zn].onDismiss}:{menuType:Z.og.Popup},n()(ji.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0},void 0,a[dn](A.Z,r,this.renderFiles(),n()(xe.Z,{topBorder:!i&&!t,desktopStyle:{...i&&{[un]:3,[cn]:3}}},void 0,o&&n()(sn,{[vn]:s}),!o&&!t&&a[dn](Hi.Z,{focused:!1,onClick:this.handleAddFileClick,title:n()(k.FormattedMessage,{id:"database.fileProperty.focusedLabel",[mn]:"Add a file or image"}),ref:this.handleAddFileMount}))))}renderFiles(){const{device:e}=this[Pn],{value:t,[Tn]:i}=this[Zn],o=fe().compact(t.map((e=>e.url)));return 0===o.length?void 0:e[Cn]||i?n()(a.Fragment,{},void 0,o.map(this.renderFile)):n()(xe.Z,{},void 0,n()(qi.ZP,{direction:ln,keys:o,renderKey:this.renderFile,onDrop:this.handleDraggableDrop}))}isEmpty(){const{value:e}=this[Zn];return 0===e.length}[wn](){const{[kn]:e}=this[Zn],t=Vi.findDOMNode(this.addFileButton);if(!t)return;if(!(t instanceof Element))return;const i=bt.default.getIntl();Ki.show(this[Pn],{originRect:t[rn](),originGap:3,isSmallWidth:!0,showArrow:!0,title:i.formatMessage({id:"filePropertyMenu.header",[mn]:"File"}),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:t=>{zi.uploadFile({[Pn]:this[Pn],file:t,bucket:"secure",record:e.pointer,onStart:this.handleMediaPickerUploadStart,onProgress:this[gn],onComplete:this.handleMediaPickerUploadComplete,onError:this.handleUploadError})}},{type:"embed",[Mn]:this.handleMediaPickerEmbedComplete}]})}}_n.displayName="FilePropertyMenu";const xn=_n;var An=i(72589),Bn=i(37770),Dn=i(66897),En=i(19889),Ln=i(31299),Rn=i(28463),Nn=i(43765),On=i(77137),Un=i(92864),Vn=i(47082),Wn=i(97680);const Kn=i(85).Yzm,zn=i(85).D7I,Gn=i(85).i_Y,Hn=i(85).dLQ,qn=i(85).nSw,jn=i(85).wgE,Qn=i(85).Wp_,Jn=i(85).Dd5,$n=i(85).TtP,Yn=i(85).P0R,Xn=i(85).yUP,ea=i(85).loK,ta=i(85).nx5,ia=(0,k.defineMessages)({searchForPerson:{[ta]:"Search for a person…",id:"database.personPropertyValue.searchPlaceholder"}});class oa extends w.Z{constructor(){super(...arguments),this[ea]=eo.default[Xn](""),this.handlePersonPropertyMenuChange=e=>{const{schema:t,property:i}=this[Yn],o=t[i];if(!o||"person"!==o.type)return;let n;n=1===o.limit?e[$n]>0?[e[e[$n]-1]]:[]:e,this[Yn][Jn]({value:n}),this[ea][Qn]("")}}willMount(e){super.willMount(e),e.insertChar&&this[ea][Qn](e.insertChar)}renderComponent(){const{device:e}=this[jn],{disabled:t,intl:i,schema:o,property:s}=this[Yn],r=o[s];if(!r||"person"!==r.type)return;const l=this[Yn].value.map((i=>{const o=(0,Dn.Hl)({pointer:i,[qn]:this[Yn].parentStore[qn]});return n()(Un.ZP,{actor:o,format:e[Hn]?Un.ZP.Format.Large:Un.ZP.Format.Medium,showRemoveButton:!t,onClickRemove:()=>{const e=this[Yn].value.filter((e=>e.id!==i.id));this[Yn][Jn]({value:e})},shouldShrink:!0,isSingle:!1},i.id)})),d={request:{query:this[ea].state,actors:this[Yn].value},performRequest:async e=>{let{query:t,actors:i}=e;const{users:o}=await Ln.searchSpaceActors({[jn]:this[jn],query:t,membersOnly:!1});return{users:o.filter((e=>!i.some((t=>t.id===e.id)))).slice(0,20)}},render:(e,t,i)=>{if(e)return n()(xe.Z,{title:(0,Rn.$)(r.limit),loading:!i},void 0,n()(Nn.Z,{title:n()(k.FormattedMessage,{[ta]:Gn,id:"database.personPropertyMenu.searchErrorMessage"})}));if(t&&0===t.users[$n])return n()(xe.Z,{title:(0,Rn.$)(r.limit),loading:!i},void 0,n()(Nn.Z,{title:n()(k.FormattedMessage,{[ta]:"No results",id:"database.personPropertyMenu.noSearchResults.message"})}));const o=fe().compact((t&&t.users||[]).map((e=>({key:e.id,render:t=>a[zn](Wn.Z,ht()({},t,{actor:(0,Dn.dp)(e)})),action:()=>{this.handlePersonPropertyMenuChange([...this[Yn].value,{table:En.KJ,id:e.id}])}})))),s=[];return o[$n]>0&&s.push({key:"person section",render:e=>a[zn](xe.Z,ht()({},e,{title:(0,Rn.$)(r.limit),loading:!i})),items:o}),n()(Mt.Z,{type:Mt.i.Vertical,initialFocus:this[ea].state[$n]>0?0:void 0,sections:s})}},c=n()(Vn.Z,{focus:!e[Hn]||void 0,focusAfterAnimation:!0,format:Vn.Z.Format.Person,tokens:l,placeholder:i[Kn](ia.searchForPerson),hideInput:t,onRemoveLastToken:()=>{this[Yn][Jn]({value:this[Yn].value.slice(0,this[Yn].value[$n]-1)})},value:this[ea].state,[Jn]:e=>this[ea][Qn](e.target.value),dontShowBorderBottom:e.isAndroid});let u;return u=e[Hn]?{menuType:Z.og.Modal,title:r.name,right:n()(B.DoneMenuText,{}),onClickRight:this[Yn].onDismiss,header:c}:{menuType:Z.og.Popup,header:c,tokenInputHeader:!0,maxHeight:333},t?a[zn](A.Z,u):a[zn](A.Z,u,a[zn](On.Z,d))}}oa.displayName="PersonPropertyMenu";const na=(0,k.injectIntl)(oa);var aa=i(58613),sa=i(18145),ra=i(43261),la=i.n(ra),da=i(84619),ca=i(4615),ua=i(71644),ma=i(10161),pa=i(29798);const ga=i(85).Az2;class ha extends eo.default{getInitialState(){return{inputValue:"",[ga]:void 0}}}const va=ha;var fa=i(12534),ya=i(33846),ba=i(73456),Sa=i(22084);const wa=i(85).D7I,Ma=i(85).PXg,ka=i(85).dLQ,Ca=i(85).Soo,Za=i(85).wgE,Ta=i(85).E0z,Pa=i(85).P0R,Ia=i(85).OBh,Fa=i(85).Q1_,_a=i(85).Dd5,xa=i(85).P3s,Aa=i(85).N20,Ba=i(85).ffk,Da=i(85).z7L,Ea=i(85).zTc;class La extends w.Z{constructor(){super(...arguments),this.storeTypes={[Ea]:ya.Z},this[Da]=()=>{const{[Ba]:e,[Aa]:t,[xa]:i,[_a]:o,onCloseActionMenu:a,actionMenuOpen:s,focused:r,[Fa]:l,[Ia]:d}=this[Pa],{[Ta]:c}=this[Za];return n()(ba.Z,{open:s,origin:n()(oo.Z,{onClick:this[Ca],[ka]:c[ka],style:{opacity:r||c[ka]?1:0}}),[Fa]:l,[Ia]:d,[Ba]:e,[Aa]:t,[xa]:i,[_a]:o,onClose:a})},this[Ca]=e=>{(0,fa.ZP)({event:e,context:fa.Af.MenuListClick,callback:()=>this[Pa].onOpenActionMenu(this[Pa][Fa].value)})}}willMountOrUpdate(e){e.actionMenuOpen&&!this[Pa].actionMenuOpen&&this.stores[Ea].setState({...this.stores[Ea].state,inputValue:this[Pa][Fa].value})}renderComponent(){const{locked:e,[Fa]:t}=this[Pa];return n()(x.Z,{capture:this[Pa].actionMenuOpen,onEnter:fe().identity},void 0,a[wa](wt.Z,ht()({},this[Pa],{title:n()(Sa.a,{format:this[Za][Ta][ka]?da.l.Large:da.l.Medium,value:t.value,color:t.color,showRemoveButton:!1,isSingle:!0,showEllipsis:!0}),desktopTitleStyle:{[Ma]:6},isTokenTitle:!0,right:!e&&this[Da]()})))}}La.displayName="SelectPropertyMenuItem",La.contextTypes={...Z.mw,...w.w};const Ra=La,Na=i(85).OM8,Oa=i(85).PXg,Ua=i(85).TVJ,Va=i(85).rGB,Wa=i(85).D7I,Ka=i(85).BCA,za=i(85).t4B,Ga=i(85).Yzm,Ha=i(85).dLQ,qa=i(85).Uk6,ja=i(85).Mez,Qa=i(85).nx5,Ja=i(85).OSu,$a=i(85).e7B,Ya=i(85).TpH,Xa=i(85).mYq,es=i(85).P24,ts=i(85).wgE,is=i(85).Mt_,os=i(85).xnB,ns=i(85).ErU,as=i(85).Cpo,ss=i(85).mFu,rs=i(85).OBh,ls=i(85).unR,ds=i(85).C0P,cs=i(85).UA5,us=i(85).uM3,ms=i(85).TtP,ps=i(85).P3s,gs=i(85).N20,hs=i(85).loK,vs=i(85).SW0,fs=i(85).Az2,ys=i(85).QmD,bs=i(85).Gnd,Ss=i(85).Wp_,ws=i(85).Dd5,Ms=i(85).Gco,ks=i(85).eiN,Cs=i(85).KOz,Zs=i(85).aW,Ts=i(85).P0R,Ps=i(85).Kiu,Is=i(85).ffk,Fs=i(85).P0G,_s=i(85).XtO;class xs extends w.Z{constructor(){super(...arguments),this.storeTypes={[_s]:va,[Fs]:pa.Z},this.handleSelectPropertyMenuItemChange=e=>{const{[Is]:t,[Ps]:i}=this[Ts],o=i[t];if(!o)return;if(!oi[Zs](o))return;const n=o[Cs]||[],a=[...n],s={},r=this[Ts].value[ks]((e=>{const t=n.find((t=>t.value===e));return!t||a.some((e=>e.id===t.id))}));s[Ms]=e,fe().isEqual(r,this[Ts].value)||(s.value=r),this[Ts][ws](s)},this.handleCloseActionMenu=()=>{this[bs][_s][Ss]({...this[bs][_s][ys],[fs]:void 0})},this.handleOpenActionMenu=e=>{this[bs][_s][Ss]({...this[bs][_s][ys],[fs]:e})},this[vs]=e=>{this[bs][_s][Ss]({...this[bs][_s][ys],[hs]:""});const{[gs]:t,allowMultiple:i,[Is]:o,[Ps]:n,[ws]:a,[ps]:s}=this[Ts],r=n[o];if(!r)return;if(!oi[Zs](r))return;const l=r[Cs]||[];let d;d=i?e:e[ms]>0?[e[e[ms]-1]]:[];const c=fe().uniq(fe()[us](d.map((e=>{const t=l.find((t=>t.value===e));if(t)return t.value})))),u=d.find((e=>!l.find((t=>t.value===e)))),m={value:c.concat(fe()[us]([u]))};if(u){const e={id:(0,ca.default)(),value:u,[cs]:this.createSelectColor};let i;i="alphabetical"!==r[ds]&&"reverse_alphabetical"!==r[ds]||!ma.default[ls]("collection_properties_select_auto_sort_options")?[{[ss]:{table:li.v,id:t},[as]:ns,path:[Ps,o,Cs],args:{value:e}}]:[(0,Ii.getAutoSortInsertOperation)({[gs]:t,[Is]:o,[rs]:r,newOption:e,isAscending:"alphabetical"===r[ds]})],m[Ms]=i,this[os](),be[is](this[ts],{...(0,we.getCollectionAnalyticsContext)(this.context[es]),[Xa]:r.type,action:"select_add_option",from:s})}a(m)},this[Ya]=e=>{const{[gs]:t,[Is]:i,[Ps]:o,[ws]:n}=this[Ts],a=(0,Ii.getReorderSelectOptionsOperations)({newOptions:e,[gs]:t,[Is]:i,[Ps]:o});if(a){const e=o[i];if(e&&oi[Zs](e)){"manual"!==(e[ds]||"manual")&&a.push({[ss]:{table:li.v,id:t},[as]:$a,path:[Ps,i],args:{[ds]:Ja}})}n({[Ms]:a})}this[bs][Fs].reset()}}willMount(e){if(this[os](),e.insertChar){const t=e.insertChar;this[bs][_s][Ss]({...this[bs][_s][ys],[hs]:t})}}renderNoOptionsFound(){return n()(k.FormattedMessage,{id:"database.selectPropertyEditMenu.noResults",[Qa]:"No options found"})}renderSelectOnlyPrompt(){return n()(k.FormattedMessage,{id:"database.selectPropertyEditMenu.selectOnlyPrompt",[Qa]:"Select an option"})}[ja](){return n()(k.FormattedMessage,{id:"database.selectPropertyEditMenu.selectOrCreatePrompt",[Qa]:"Select an option or create one"})}renderComponent(){const{device:e}=this[ts],{disabled:t,[qa]:i}=this[Ts],o=this[Ts][Ps][this[Ts][Is]];if(!o)return;if(!oi[Zs](o))return;const s=o[Cs]||[],r=this.renderCurrentTokens(s),l=this.getTokenResults(this[bs][_s][ys][hs],s),d=0===l[ms],c=n()(Vn.Z,{focus:e[Ha]?void 0:!this[bs][_s][ys][fs],focusAfterAnimation:!0,format:Vn.Z.Format.Select,tokens:r,placeholder:this[Ts].intl[Ga]({id:"database.selectPropertyEditMenu.searchPlaceholder",[Qa]:"Search for an option..."}),onRemoveLastToken:()=>{this[vs](this[Ts].value.slice(0,this[Ts].value[ms]-1))},value:this[bs][_s][ys][hs],disabled:t,hideInput:t,[ws]:e=>this[bs][_s][Ss]({...this[bs][_s][ys],[hs]:e.target.value}),dontShowBorderBottom:e.isAndroid});let u;return u=e[Ha]?{menuType:Z.og.Modal,title:o.name,right:n()(B.DoneMenuText,{}),onClickRight:this[Ts].onDismiss,header:c}:{menuType:Z.og.Popup,header:c,tokenInputHeader:!0},t?a[Wa](A.Z,u):a[Wa](A.Z,u,d?n()(xe.Z,{title:i?this[ja]():this.renderNoOptionsFound()},void 0,e[za]&&n()(Nn.Z,{title:this.renderNoOptionsFound()})):n()(Mt.Z,{type:Mt.i.Vertical,initialFocus:this[bs][_s][ys][hs][ms]>0?0:void 0,sections:[{key:0,render:e=>this.renderMenuListSection(e,l),items:this.getSelectMenuListItems(l,s)}],[Ka]:(e,t,i)=>{this[Ts][Ka](i)},[_s]:this[bs][Fs]}))}renderMenuListSection(e,t){const{[qa]:i}=this[Ts];return i?a[Wa](xe.Z,ht()({},e,{title:this[ja](),[Va]:n()(qi.ZP,{direction:Ua,keys:t,renderKey:i=>e[Va][t.indexOf(i)],onDrop:this[Ya]})})):a[Wa](xe.Z,ht()({},e,{title:this.renderSelectOnlyPrompt(),[Va]:e[Va]}))}renderFoundSelectPropertyMenuItem(e,t){const{[Ps]:i,[Is]:o}=this[Ts],n=i[o];if(n&&oi[Zs](n))return a[Wa](Ra,ht()({},e,{option:t,showDragHandle:this[Ts][qa],locked:!this[Ts][qa],[Is]:this[Ts][Is],[ps]:this[Ts][ps],[gs]:this[Ts][gs],[ws]:this.handleSelectPropertyMenuItemChange,actionMenuOpen:this[bs][_s][ys][fs]===t.value,[rs]:n,onCloseActionMenu:this.handleCloseActionMenu,onOpenActionMenu:this.handleOpenActionMenu}))}renderCreateSelectPropertyMenuItem(e,t,i){const{device:o}=this[ts];return a[Wa](wt.Z,ht()({},e,{title:n()("div",{style:{display:"flex",minWidth:0}},void 0,n()("div",{style:{[Oa]:6,[Na]:1.3}},void 0,n()(k.FormattedMessage,{id:"database.selectPropertyEditMenu.createLabel",[Qa]:"Create"})),n()(Sa.a,{value:t.value,[cs]:t[cs],showRemoveButton:!1,isSingle:!0,format:o[Ha]?da.l.Large:da.l.Medium,showEllipsis:!0})),isTokenTitle:!0}))}getSelectMenuListItems(e,t){return e.map((e=>{const i=t.find((t=>t.value===e));return{key:e,render:t=>{if(i)return this.renderFoundSelectPropertyMenuItem(t,i);{const i={id:(0,ua.ZP)(),value:e,[cs]:this.createSelectColor};return this.renderCreateSelectPropertyMenuItem(t,i,e)}},action:()=>{this[vs]([...this[Ts].value,e])}}}))}renderCurrentTokens(e){const{disabled:t}=this[Ts],{device:i}=this[ts];return fe()[us](this[Ts].value.map((o=>{const a=(0,ni.matchSelectOption)(e,o);if(a)return n()(Sa.a,{value:a.value,[cs]:a[cs],showRemoveButton:!t,isSingle:!1,format:i[Ha]?da.l.Large:da.l.Medium,shouldShrink:!0,onClickRemove:()=>{this[vs](this[Ts].value[ks]((e=>e!==o)))},showEllipsis:!0},a.id)})))}getTokenResults(e,t){const i=t.map((e=>e.value));let o;if(e){o=la()[ks](e,i).map((e=>e.original));!t.find((t=>t.value===e))&&e.trim()[ms]>0&&this[Ts][qa]&&o.push(e.trim().replace(/,/g,""))}else o=i;return o}[os](){const{[Ps]:e,[Is]:t}=this[Ts],i=e[t];if(!i)return;if(!oi[Zs](i))return;const o=i[Cs]||[],n=(0,oi.getRandomSelectColor)(o);this.createSelectColor=n}}xs.displayName="SelectPropertyMenu",xs.contextTypes={...w.w,...Zi.xm};const As=(0,k.injectIntl)(xs);var Bs=i(40652),Ds=i(42875),Es=i(59054),Ls=i(23014),Rs=i(54642),Ns=i(5149),Os=i(97180),Us=i(58032);const Vs=i(85).BCA,Ws=i(85).FZz,Ks=i(85).ffk,zs=i(85).HxR,Gs=i(85).Cr4,Hs=i(85).x1G,qs=i(85).Joh,js=i(85).D7I,Qs=i(85).pkR,Js=i(85).nx5,$s=i(85).Yzm,Ys=i(85).Dd5,Xs=i(85).dLQ,er=i(85).UA5,tr=i(85).OBh,ir=i(85).Uk6,or=i(85).P24,nr=i(85).$pZ;function ar(e){window.__c={n:"StatusPropertyMenu"};const{device:t}=(0,r.O7)(),[i,o]=a.useState(e.initialValue??""),[s,d]=a.useState(""),c=(0,k.useIntl)(),u=(0,l.VK)((()=>{const t=e[nr].state;if(t.isOpen)return t[or]}),[e[nr]]),m=(0,l.VK)((()=>(null==u?void 0:u.permissionScopes.state[ir])&&"collectionPage"!==(null==u?void 0:u.contextType)),[u]),p=e[tr].options??[],g=(0,ni.matchSelectOption)(p,i),h=e[tr].groups??[],v=g&&h.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(g.id)})),f=g&&n()(Sa.F,{value:g.value,[er]:g[er],groupColor:null==v?void 0:v[er],isSingle:!1,format:t[Xs]?da.l.Large:da.l.Medium,onClickRemove:()=>{o(""),e[Ys]("")},showRemoveButton:!0,shouldShrink:!0,showEllipsis:!0}),y=n()(Vn.Z,{focus:!t[Xs]||void 0,focusAfterAnimation:!0,format:Vn.Z.Format.Select,tokens:[f],placeholder:c[$s]({id:"database.selectPropertyEditMenu.searchStatusPlaceholder",[Js]:"Search for an option"}),onRemoveLastToken:()=>{},value:s,[Qs]:e[Qs],hideInput:e[Qs],[Ys]:e=>{d(e.target.value)},dontShowBorderBottom:t.isAndroid});let b;if(b=t[Xs]?{menuType:Z.og.Modal,title:e[tr].name,right:n()(B.DoneMenuText,{}),onClickRight:e.onDismiss,header:y}:{menuType:Z.og.Popup,header:y,tokenInputHeader:!0},e[Qs])return a[js](A.Z,b);const{[tr]:S}=e,w=S.options??[];let M=w;if(""!==s){const e=la().filter(s,w.map((e=>e.value))).map((e=>e.original));M=w.filter((t=>e.includes(t.value)))}const C=(S.groups??[]).map((e=>{const t=M.filter((t=>{var i;return null===(i=e.optionIds)||void 0===i?void 0:i.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(mi.isDefined),T=C.length>1,P=C.map(((i,o)=>{let{group:s,groupOptions:r}=i;return{items:r.map((i=>{const o=e.shouldDisableOption?e.shouldDisableOption(i.id):{[Qs]:!1};return{key:i.value,render:e=>a[js](wt.Z,ht()({},e,{[Qs]:o[Qs],disabledFeedback:!0,focused:e.focused,title:n()(Us.Z,{disableTooltip:!o[Qs]||!o.disableReasonMessage,[qs]:()=>o[Qs]&&o.disableReasonMessage,render:e=>a[js](Sa.F,ht()({},e,{value:i.value,[er]:i[er],groupColor:s[er],showRemoveButton:!1,isSingle:!0,format:t[Xs]?da.l.Large:da.l.Medium}))}),isTokenTitle:!0})),action:()=>{e[Ys](i.value)}}})),key:`group-${o}`,render:e=>a[js](a.Fragment,null,a[js](xe.Z,ht()({},e,{topBorder:e.index>0,title:T&&n()(Os.r_,{group:s,showColor:!1,style:{fontSize:12}})})))}})),I=u&&m?{items:[{key:"edit property",render:e=>a[js](wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{[Js]:"Edit property",id:Hs}),icon:si.Z.options({width:14})})),action:()=>{const t=u.settingsStore,i=u.collectionStore();i&&(e.onDismiss(),bi[Gs]({[or]:u}),Ns.openSettings({[or]:u,[zs]:t}),Ns.navigateToItem({[zs]:t,item:{type:Ks,formatKey:u[Ws](),[Ks]:e[Ks],collectionPointer:i.pointer}}))}}],key:"edit-property",render:e=>a[js](xe.Z,ht()({},e,{topBorder:e.index>0}))}:void 0;return a[js](A.Z,b,n()(Mt.Z,{type:Mt.i.Vertical,initialFocus:s.length>0?0:void 0,sections:fe().compact([...P,I]),[Vs]:(t,i,o)=>{e[Vs](o)}}))}const sr=i(85).ykC,rr=i(85).pek,lr=i(85).Yzm,dr=i(85).wgE,cr=i(85).NRr,ur=i(85).qq3,mr=i(85).$pZ,pr=i(85).nx5,gr=(0,k.defineMessages)({cannotSetSprintToCurrentTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToCurrentTooltip",[pr]:"Current sprint already exists"},cannotSetSprintToNextTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToNextTooltip",[pr]:"Next sprint already exists"}});function hr(e){window.__c={n:"SprintStatusPropertyMenu"};const{[mr]:t}=e,i=(0,r.O7)(),o=(0,Zi.Y$)(),n=(0,l.VK)((()=>o[ur].state),[o[ur]]),s=function(e){let{sprintCollectionStore:t,[dr]:i,normalizedBlockSchema:o}=e;const[{value:n,status:a}]=(0,Es.r5)((async()=>{var e;if(!t)return;const n=Ls.qB[Bs.p$].current.reducer.get(o),a=Ls.qB[Bs.p$].next.reducer.get(o);if(!n)return;if(!a)return;const s={type:"reducer",userId:i.currentUser.id,userTimeZone:(0,Ds.r)(),searchQuery:void 0,reducers:{[Bs.SF]:n,[Bs.YE]:a}},r=null===(e=t.getParentBlockStore())||void 0===e?void 0:e[rr]()[0],l=t.getSpaceId();if(!r)return;const d=await Rs.queryCollection(i,{source:{type:"collection",id:t.id,spaceId:l},collectionView:{id:r.id,spaceId:l},loader:s},void 0,{src:"sprint_status_overlay_check"});if("success"!==d.type)return;const c=d.data.result[sr][Bs.SF],u=d.data.result[sr][Bs.YE];return"results"===c.type&&"results"===u.type?{hasCurrentSprint:c.blockIds.length>0,hasNextSprint:u.blockIds.length>0}:void 0}),[i,o,t]);if("resolved"!==a||!n)return;return n}({sprintCollectionStore:(0,l.VK)((()=>{const e=t.state;if(e.isOpen)return e.store[cr]()}),[t]),[dr]:i,normalizedBlockSchema:n}),d=(0,k.useIntl)(),c=(0,a.useCallback)((e=>void 0===s&&[Bs.YE,Bs.SF].includes(e)?{disabled:!0}:e===Bs.YE&&null!=s&&s.hasNextSprint?{disabled:!0,disableReasonMessage:d[lr](gr.cannotSetSprintToNextTooltip)}:e===Bs.SF&&null!=s&&s.hasCurrentSprint?{disabled:!0,disableReasonMessage:d[lr](gr.cannotSetSprintToCurrentTooltip)}:{disabled:!1}),[s,d]);return a.createElement(ar,ht()({},e,{shouldDisableOption:c}))}var vr=i(65187),fr=i(53877),yr=i(4308);const br=i(85).nx5,Sr=i(85).XNW;function wr(e){const{onClick:t}=e;return n()(xe.Z,{topBorder:!0},void 0,n()(wt.Z,{focused:!1,icon:si.Z.close({width:14,[Sr]:0}),title:n()(k.FormattedMessage,{[br]:"Remove verification",id:"VerificationPropertyOverlayMenu.removeVerificationButton"}),onClick:t,style:{fontSize:14}}))}var Mr=i(17126),kr=i(66653),Cr=i(93289);const Zr=i(85).oki,Tr=i(85).iDK,Pr=i(85).jb_,Ir=i(85).CFT,Fr=i(85).Yzm,_r=i(85).Mm1,xr=i(85).cZW,Ar=(0,k.defineMessages)({[xr]:{id:"VerificationExpiryMenu.pickSpecificDate.placeholder",defaultMessage:"Pick a date"}});function Br(e){window.__c={n:"VerificationCustomDatePicker"};const{onChange:t,clearCustomDatePicker:i}=e,o=(0,a.useRef)(e.today),s=(0,a.useRef)(e.today.plus({days:1})),[r,d]=(0,a.useState)(!1),c=(0,l.VK)((()=>Ti.userSettingsStartOfWeekStore.state),[]);return n()(xe.Z,{mobileStyle:{[_r]:10},style:{padding:"12px 0"}},void 0,n()(kr.Z,{[xr]:bt.default[Fr](Ar[xr]),focused:r,value:"verified"!==e.verificationState.type||e.verificationState.isIndefinite?void 0:fr[Ir](e.verificationState.dateTimeRange.end),onUpdate:e=>{if(e.error)return;const n=e.value&&fr[Pr](e.value);n?t({start:o[Tr],end:n.start}):i()},onFocus:()=>d(!0),onBlur:()=>d(!1),onClearButtonClick:i,hideClearButton:!0}),n()(Cr.Z,{firstDayOfWeek:c,value:s[Tr].toMillis(),selectValue:!1,onChange:e=>{t({start:o[Tr],end:Mr.ou[Zr](e)})},disabledDays:{before:new Date(s[Tr].toMillis())}}))}var Dr=i(70693);const Er=i(85).lMs,Lr=i(85).PG2,Rr=i(85).Yzm,Nr=i(85).nx5,Or=i(85).nLZ,Ur=i(85).XNW,Vr=i(85).Zij,Wr=i(85).iDK;function Kr(e){window.__c={n:"VerificationExpiryPickerMenu"};const{verificationState:t,onChange:i,onCustomDateClick:o}=e,s=(0,k.useIntl)(),r=(0,a.useRef)(e.today),l=(0,ii.yK)((e=>({[Vr]:{fontSize:14,color:e.regularTextColor},optionsContainer:{width:"100%"},clockIconStyle:{width:14,[Ur]:0,[Or]:2}})),[]),d="expired"===t.type||"none"===t.type?n()(k.FormattedMessage,{[Nr]:"Verify page",id:"VerificationExpiryPicker.verify.header"}):n()(k.FormattedMessage,{[Nr]:"Reverify page",id:"VerificationExpiryPicker.reverify.header"}),c="verified"===t.type&&t.isIndefinite,u="verified"===t.type&&!t.isIndefinite&&t.dateTimeRange.end;return n()(xe.Z,{[Vr]:d},void 0,yr.Xs.map((e=>{const t=u&&yr.fm({start:r[Wr],end:u})===e;return n()(wt.Z,{focused:!1,icon:si.Z.alarmClock(l.clockIconStyle),inline:!1,[Vr]:n()("span",{style:l[Vr]},void 0,n()(k.FormattedMessage,{[Nr]:"For {numDays} days",id:"VerificationExpiryMenu.preset.title",values:{numDays:e}})),caption:s[Rr]({[Nr]:"Until {date}",id:"VerificationExpiryMenu.preset.subtitle"},{date:Dr.mb({dateTime:yr.z5(e,r[Wr]).end,intl:s,shortenDateAndRange:!0})}),checkState:!!t,[Lr]:()=>{return t=e,void i({start:r[Wr],end:r[Wr].plus({days:t})});var t}},e)})),n()(wt.Z,{focused:!1,icon:si.Z.infinity({width:14,[Ur]:0,[Or]:1}),inline:!1,[Vr]:n()("span",{style:l[Vr]},void 0,n()(k.FormattedMessage,{[Nr]:"Indefinitely",id:"VerificationExpiryPicker.option.indefinitely"})),[Lr]:()=>i(),checkState:c},"indefinite"),n()(wt.Z,{focused:!1,icon:si.Z.calendar({width:14,[Ur]:0}),[Vr]:n()("span",{style:l[Vr]},void 0,n()(k.FormattedMessage,{[Nr]:"Pick a date",id:"VerificationExpiryPicker.option.customDate"})),[Lr]:o},Er))}const zr=i(85).nx5,Gr=i(85).g7N,Hr=i(85).dLQ,qr=i(85).nSw;function jr(e){window.__c={n:"VerificationMetadata"};const{[qr]:t,actorPointer:i,lastVerifiedDate:o}=e,a=(0,r.Fy)(),s=(0,k.useIntl)(),d=(0,l.VK)((()=>(0,Dn.$4)(s,(0,Dn.Hl)({pointer:i,[qr]:t}))),[t,s,i]);return n()("div",{style:{padding:"8px 14px"}},void 0,n()(Vt.Z,{isSmall:!0,isSecondaryColor:!0,[Hr]:a[Hr],isMultiline:!0,style:{[Gr]:4}},void 0,n()(k.FormattedMessage,{[zr]:"Last verified by {user}",id:"VerificationMetadata.lastVerified",values:{user:d}})),n()(Vt.Z,{isSmall:!0,isSecondaryColor:!0,[Hr]:a[Hr]},void 0,(0,Dr.mb)({dateTime:o,intl:s})))}var Qr=i(11028);const Jr=i(85).tBn,$r=i(85).D7I,Yr=i(85).GPw,Xr=i(85).H1U,el=i(85).Je3,tl=i(85).Scd,il=i(85).YDv,ol=i(85).dLQ,nl=i(85).dMt,al=i(85).iDK,sl=i(85).Dd5,rl=i(85).nSw;function ll(e){window.__c={n:"VerificationPropertyOverlayMenu"};const{verificationValue:t,[rl]:i,[sl]:o,blockId:s,propertyName:l,onClose:d}=e,c=(0,r.O7)(),u=(0,r.Fy)(),m=(0,ii.Fg)(),[p,g]=(0,a.useState)(!1),h=(0,a.useMemo)((()=>yr.WN(t)),[t]),v="verified"===h.type,f=(0,a.useRef)(fr.todayLuxon((0,Ds.r)())),y=(0,a.useRef)(fr.todayLuxon((0,Ds.r)()).plus({days:1})),b=e=>{var t;const i=null===(t=c.currentUser)||void 0===t?void 0:t.id;if(!i)return;if(null!=e&&e.end&&e.end.toMillis()<y[al].toMillis())return;const n={table:En.KJ,id:i},a=e?fr.convert.toPersistedDateTimeRange(e):fr.convert.toPersistedDateTime(f[al].toMillis()),r="none"===h.type?"add":"update";be.trackVerificationUpdate(c,{action:r,verification_page_id:s,verification_expiry:e?e.end.toMillis():void 0}),o({value:[n,a]})};let S={menuType:Z.og.Popup,footer:"none"!==h.type&&n()("div",{style:{borderTop:`1px solid ${m[nl]}`}},void 0,n()(jr,{lastVerifiedDate:v&&h.isIndefinite?h.startDateTime:h.dateTimeRange.start,[rl]:i,actorPointer:h.actorPointer}))};return u[ol]&&(S={...S,title:l,menuType:Z.og.Modal,right:n()(B.DoneMenuText,{}),onClickRight:d}),a[$r](A.Z,ht()({},S,{header:!p&&"none"!==h.type&&a[$r](a[Jr],null,n()("div",{style:{padding:u[ol]?10:7,[il]:u[ol]?20:7,[tl]:u[ol]?m[el]:m.tokenInputMenuItemBackground,display:"flex",[Xr]:"center",[Yr]:`1px solid ${m[nl]}`}},void 0,n()(Qr.z,{verificationValue:t})))}),p?n()(Br,{today:f[al],verificationState:h,[sl]:e=>b(e),clearCustomDatePicker:()=>g(!1)}):a[$r](a[Jr],null,n()(Kr,{today:f[al],verificationState:h,[sl]:e=>b(e),onCustomDateClick:()=>g(!0)}),(v||"expired"===h.type)&&n()(wr,{onClick:()=>{be.trackVerificationUpdate(c,{action:"remove",verification_page_id:s}),o({value:void 0})}})))}var dl=i(32056),cl=i(83197);const ul=i(85).GDw,ml=i(85).raT,pl=i(85).Rbl,gl=i(85).Dd5,hl=i(85).loK,vl=i(85).QmD,fl=i(85).Gnd,yl=i(85).Wp_,bl=i(85).C$B,Sl=i(85).K0Z;class wl extends w.Z{constructor(){super(...arguments),this.storeTypes={[Sl]:ya.Z},this[bl]=e=>{const t=e.target.value;this[fl][Sl][yl]({...this[fl][Sl][vl],[hl]:t}),this.props[gl](this.parseInputChange(t))}}willMount(e){super.willMount(e);const{value:t,format:i,insertChar:o,intl:n}=e;o?(this[fl][Sl][yl]({...this[fl][Sl][vl],[hl]:o}),this.props[gl](this.parseInputChange(o))):this[fl][Sl][yl]({...this[fl][Sl][vl],[hl]:dl.uf(t,i,n)||""})}renderComponent(){const{disabled:e}=this.props;return n()(x.Z,{capture:!e,onDelete:fe()[pl],onSpace:fe()[pl],onBackspace:fe()[pl],onLeft:fe()[pl],onRight:fe()[pl],onUp:fe()[pl],onDown:fe()[pl],onSelectAll:fe()[pl],onRedo:fe()[pl],onUndo:fe()[pl],onCut:fe()[pl],onCopy:fe()[pl],onPaste:fe()[pl],onKeypress:fe()[pl]},void 0,n()(Ut.Z,{style:{...cl.F,display:"block"},value:this[fl][Sl][vl][hl],format:Ut.Z.Format[ml],[gl]:this[bl],inputStyle:this[ul](),focus:!e,disabled:e}))}[ul](){const{isTable:e}=this.props;return{textAlign:e?"right":"left"}}parseInputChange(e){this[fl][Sl][yl]({...this[fl][Sl][vl],[hl]:e});let t=dl.p3(e);return"percent"===this.props.format&&void 0!==t&&(t/=100),t}}wl.displayName="NumberPropertyValue";const Ml=(0,k.injectIntl)(wl),kl=i(85).raT,Cl=i(85).Rbl,Zl=i(85).loK,Tl=i(85).Gnd,Pl=i(85).Wp_,Il=i(85).Dd5,Fl=i(85).C$B,_l=i(85).K0Z;class xl extends w.Z{constructor(){super(...arguments),this.storeTypes={[_l]:ya.Z},this[Fl]=e=>{const{[Il]:t}=this.props,i=e.target.value;this[Tl][_l][Pl]({...this[Tl][_l].state,[Zl]:i}),t(i)}}willMount(e){super.willMount(e);const{value:t}=e;this[Tl][_l][Pl]({...this[Tl][_l].state,[Zl]:t||""})}renderComponent(){const{disabled:e}=this.props;return n()(x.Z,{capture:!e,onDelete:fe()[Cl],onSpace:fe()[Cl],onBackspace:fe()[Cl],onLeft:fe()[Cl],onRight:fe()[Cl],onUp:fe()[Cl],onDown:fe()[Cl],onSelectAll:fe()[Cl],onRedo:fe()[Cl],onUndo:fe()[Cl],onCut:fe()[Cl],onCopy:fe()[Cl],onPaste:fe()[Cl],onKeypress:fe()[Cl]},void 0,n()(Ut.Z,{type:this.props.inputType,style:{...cl.F,display:"block"},value:this[Tl][_l].state[Zl],format:Ut.Z.Format[kl],[Il]:this[Fl],focus:!e,disabled:e}))}}xl.displayName="URLPropertyValue";const Al=xl;var Bl=i(78030),Dl=i(64964),El=i(45145),Ll=i(68709),Rl=i(24118);i(85).v7k;const Nl=i(85).YyW,Ol=i(85).P24,Ul=i(85).DKV,Vl=i(85).U8D,Wl=i(85).MRL,Kl=i(85).bey,zl=i(85).ELX,Gl=i(85).u3c,Hl=i(85).Je3,ql=i(85).Scd,jl=i(85).F7y,Ql=i(85).NLk,Jl=i(85).OM8,$l=i(85).NF1,Yl=i(85).tLG,Xl=i(85).OBh,ed=i(85).wJk,td=i(85).dLQ,id=i(85).V72,od=i(85).nx5,nd=i(85).iYy,ad=i(85).wgE,sd=i(85).ffk;function rd(e,t){const i=(0,r.O7)(),o=(0,k.useIntl)(),[n,s]=(0,a.useState)(),[d,c]=(0,a.useState)(!1),u=(0,l.VK)((()=>{const o=oi.getAiInferenceFromPropertySchema(t);return!(0,Rl.bb)({store:e.store,schema:e.store.getSchema(),[sd]:e[sd],userId:i.currentUser.id})&&(null==o?void 0:o.auto_update_on_edit)&&!d}),[e[sd],e.store,t,d,i]),m=(0,a.useCallback)((()=>{s(void 0)}),[]),p=(0,a.useCallback)((e=>{wi.submitFeedbackForAiAutofill({[ad]:i,feedbackType:e.type,userContent:e.userContent,[nd]:e[nd]}),c(!0),Dl.oV({label:o.formatMessage({id:"database.propertyValues.submitAIAutofillFeedbackThanks",[od]:"Thank you for making Notion better!"})})}),[i,o]);return{feedbackState:n,setFeedbackState:s,handleFeedbackButtonDismiss:m,handleFeedbackButtonSubmit:p,[id]:Boolean(u)}}function ld(e){let{autofillBlockPropertyValueFeedbackButtonsState:t}=e;window.__c={n:"AutofillBlockPropertyValueFeedbackButtons"};const i=(0,r.O7)(),o=(0,ii.yK)((()=>({iconButtonStyles:{height:i.device[td]?24:28,width:i.device[td]?24:28}})),[i.device[td]]);return n()(a.Fragment,{},void 0,n()(El.d,{type:"thumbsup",ariaLabel:"thumbs-up",onClick:()=>{t.setFeedbackState({type:"thumbsup",userContent:"",[nd]:!0})},feedbackState:t.feedbackState,[ed]:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:fe().noop,userOptIn:!1,iconButtonStyles:o.iconButtonStyles}),n()(El.d,{type:"thumbsdown",ariaLabel:"thumbs-down",onClick:()=>{t.setFeedbackState({type:"thumbsdown",userContent:"",[nd]:!0})},feedbackState:t.feedbackState,[ed]:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:fe().noop,userOptIn:!1,iconButtonStyles:o.iconButtonStyles}))}function dd(e){let{overlayState:t,theme:i,[Xl]:o}=e;window.__c={n:"AutofillUpdateButtonSection"};const a=(0,l.VK)((()=>Bi.W.isWriting()),[]),s=(0,r.O7)(),d=rd(t,o);return s.device[td]||a?null:n()(Ll.p,{allowSelectionWithin:!1},void 0,n()("div",{style:{position:Yl,top:-36,right:0,[$l]:5,fontSize:14,[Jl]:1.2,display:"flex",[Ql]:jl,[ql]:i[Hl],boxShadow:i[Gl],zIndex:-1,padding:2}},void 0,n()(cd,{overlayState:t,[Xl]:o}),d[id]&&n()(ld,{autofillBlockPropertyValueFeedbackButtonsState:d})))}function cd(e){let{overlayState:t,[Xl]:i}=e;window.__c={n:"AutofillUpdateButton"};const o=(0,r.O7)(),a=(0,ii.yK)((e=>({[zl]:{display:"flex",height:28},[Kl]:{height:16,width:16,fill:e[Wl]},updateTextStyle:{fontWeight:500,color:e[Wl]}})),[]);return n()(Ui.Z,{style:a[zl],onClick:()=>{i&&wi[Vl]({[ad]:o,stores:[t.store],[sd]:t[sd],[Xl]:i,userEventForAnalytics:Ul,[Ol]:t[Ol],from:Pi[Nl](t.format)})}},void 0,n()(Li.X2,{gap:4},void 0,si.Z.magicWand(a[Kl]),n()("span",{style:a.updateTextStyle},void 0,n()(k.FormattedMessage,{[od]:"Update",id:"database.propertyValues.reGenerateAiAutofill"}))))}function ud(e){let{overlayState:t,[Xl]:i,showSeparator:o}=e;window.__c={n:"AutofillBlockPropertyValueOverlayFeedbackButtonsMobile"};const s=rd(t,i),r=(0,ii.yK)((e=>({dot:{color:e.lightTextColor}})),[]);return s[id]?a.createElement(a.Fragment,null,o?n()("div",{style:r.dot},void 0,"•"):null,n()(ld,{autofillBlockPropertyValueFeedbackButtonsState:s})):null}i(85).v7k;const md=i(85).uzK,pd=i(85).cTO,gd=i(85).A3y,hd=i(85).du2,vd=i(85).NRr,fd=i(85).KiL,yd=i(85).qD$,bd=i(85).Q_9,Sd=i(85).S39,wd=i(85).HVF,Md=i(85).Pmb,kd=i(85).dPb,Cd=i(85).$SM,Zd=i(85).oc3,Td=i(85).CZN,Pd=i(85).veG,Id=i(85).NzY,Fd=i(85).bF2,_d=i(85).qUc,xd=i(85).mYq,Ad=i(85).Mt_,Bd=i(85).eHP,Dd=i(85).E5B,Ed=i(85).ejZ,Ld=i(85).n4d,Rd=i(85).sfC,Nd=i(85).TLr,Od=i(85).V5q,Ud=i(85).T7S,Vd=i(85).yaV,Wd=i(85).giE,Kd=i(85).J$i,zd=i(85).tOn,Gd=i(85).v8g,Hd=i(85).v1$,qd=i(85).LFy,jd=i(85).JZr,Qd=i(85).mFu,Jd=i(85).B2i,$d=i(85).zkl,Yd=i(85).i6g,Xd=i(85).mEj,ec=i(85).Gco,tc=i(85).ZG6,ic=i(85).YGn,oc=i(85).feQ,nc=i(85).CNJ,ac=i(85).biQ,sc=i(85).yL5,rc=i(85).Udk,lc=i(85).int,dc=i(85).uUT,cc=i(85).RFq,uc=i(85).o3Z,mc=i(85).Nq1,pc=i(85).EIp,gc=i(85).UPJ,hc=i(85)._V5,vc=i(85).Dif,fc=i(85).zsX,yc=i(85).nSw,bc=i(85).sbn,Sc=i(85).yP6,wc=i(85).LCr,Mc=i(85).HA$,kc=i(85).Sjh,Cc=i(85).WYi,Zc=i(85).nxU,Tc=i(85).Drs,Pc=i(85).JJj,Ic=i(85).QQh,Fc=i(85).mEV,_c=i(85).N6$,xc=i(85).dIU,Ac=i(85).hDW,Bc=i(85).oWD,Dc=i(85).iED,Ec=i(85).rGA,Lc=i(85).sX0,Rc=i(85).fBu,Nc=i(85).$pZ,Oc=i(85).BCA,Uc=i(85).P3s,Vc=i(85).Kiu,Wc=i(85).N20,Kc=i(85).xJT,zc=i(85).Bc_,Gc=i(85).Uk6,Hc=i(85).KOz,qc=i(85).kk0,jc=i(85).UBi,Qc=i(85)._9S,Jc=i(85).wJk,$c=i(85).N1Z,Yc=i(85).T04,Xc=i(85).vWK,eu=i(85)._Mm,tu=i(85).tBn,iu=i(85).D7I,ou=i(85).cZW,nu=i(85).S3,au=i(85).MWD,su=i(85).OM8,ru=i(85).wuN,lu=i(85).Gpy,du=i(85)._tz,cu=i(85).NLk,uu=i(85).qI$,mu=i(85).dMt,pu=i(85).X_m,gu=i(85).gGi,hu=i(85).Jkr,vu=i(85).Q_p,fu=i(85).urI,yu=i(85).YyW,bu=i(85).DKV,Su=i(85).U8D,wu=i(85).iJ_,Mu=i(85).OBh,ku=i(85).XCs,Cu=i(85).TEz,Zu=i(85).YDv,Tu=i(85).E0z,Pu=i(85).dLQ,Iu=i(85).jkI,Fu=i(85).TUY,_u=i(85).y6y,xu=i(85)._U_,Au=i(85).XNW,Bu=i(85).nx5,Du=i(85).g7N,Eu=i(85).nLZ,Lu=i(85).ChN,Ru=i(85).H1U,Nu=i(85).Au,Ou=i(85).MRL,Uu=i(85).UA5,Vu=i(85).Exd,Wu=i(85).wgE,Ku=i(85).KE$,zu=i(85).rpY,Gu=i(85).t5q,Hu=i(85).yKO,qu=i(85).pkR,ju=i(85).Dd5,Qu=i(85).MHP,Ju=i(85).EHj,$u=i(85).jtM,Yu=i(85).Ubc,Xu=i(85).UoE,em=i(85).AAM,tm=i(85).Dg8,im=i(85).BQ6,om=i(85).f57,nm=i(85).rps,am=i(85).$bT,sm=i(85).EMU,rm=i(85).sM5,lm=i(85).P24,dm=i(85).Rbl,cm=i(85).iJA,um=i(85).ffk,mm=i(85).WCo,pm=i(85).P0R,gm=i(85).XtO,hm=i(85).QmD,vm=i(85).Jhh,fm=i(85).tOk;class ym extends w.Z{constructor(){super(...arguments),this[fm]=void 0,this[vm]=()=>{const e=this[pm][gm][hm];if(e[mm])return n()(x.Z,{capture:!0,onTab:this.handleTab,onUntab:this.handleUntab,onEnter:this[cm],onDelete:fe()[dm],onBackspace:fe()[dm]},`${e[gm].id}${e[um]}`,n()(Zi.L1,{value:e[lm]},void 0,this.renderAutofillUpdateButton(e),n()("div",{[im]:{[rm]:sm,[am]:nm,overflowY:om,flexGrow:1}},void 0,this.renderOverlayContent(e))))},this[tm]=(e,t)=>{const{clonedStore:i}=e;return n()(Ri.Z,{capture:!0,ignoreBlockSelection:!0,[Hu]:!0,[Gu]:!1,[zu]:()=>n()("div",{[im]:ym.titleStyle},void 0,n()(vr.Z,{[gm]:i[em]()||i[Xu](e[um]),[Ju]:!0,onEnter:this[cm],onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,[Qu]:!0,disableShiftEnter:!0,[ju]:()=>this.handleTextChange(e,t),[qu]:this[Yu](e),pasteBehavior:$u}))})},this.aiAutofillExplanationTextIfAIProperty=e=>{var t;const i=this[Ku](e),o=(0,oi.getAiInferenceFromPropertySchema)(i);if(!(0,Fi.Zt)(this[Wu]))return!1;if(Bi.W.isWriting())return n()(Vt.Z,{isSecondaryColor:!0,[im]:{[Vu]:12,[Uu]:this[Nu][Ou],[rm]:sm,[Ru]:$u,[Lu]:500,[Eu]:6,[Du]:2},isSmall:!0,isMultiline:!0},void 0,n()(k.FormattedMessage,{[Bu]:"AI is writing",id:"BlockPropertyValueOverlay.AIActionText.overlay"}),n()("div",{[im]:{[Au]:4}},void 0,n()(Ni.Z,{})));const a=(0,Fi.RT)(this[Wu],null===(t=this[xu])||void 0===t?void 0:t[_u][hm],e[gm]);return null!=o&&o[Fu]?n()("div",{[im]:{[rm]:sm,[Ru]:Iu,[Eu]:6,[Du]:2}},void 0,n()(Vt.Z,{isSecondaryColor:!0,[im]:{[Vu]:12},isSmall:!0,isMultiline:!0},void 0,n()(k.FormattedMessage,{[Bu]:"Auto-updated by AI",id:"BlockPropertyValueOverlay.helpText.overlay"})),this[Wu][Tu][Pu]&&a&&n()("div",{[im]:{[Zu]:2,[rm]:"flex",[Ru]:"center"}},void 0,n()("div",{[im]:{[Uu]:this[Nu][Cu]}},void 0,"•"),n()(bm,{overlayState:e,[Mu]:i,[im]:{[Zu]:2,[ku]:2}}),n()(ud,{overlayState:e,[Mu]:i,showSeparator:!0}))):this[Wu][Tu][Pu]&&o&&a?n()(bm,{overlayState:e,[Mu]:i,[im]:{[Eu]:6,[Du]:2}}):void 0},this.handleBulkAutofillClick=(e,t)=>{const{collectionsBulkActionsToolbarStore:i}=e;if(i)if(t){const t=i[hm][wu];if(!(0,mi.isNonEmptyArray)(t))return;const o=this[Ku](e);if(!o)return;wi[Su]({[Wu]:this[Wu],stores:t,[um]:e[um],[Mu]:o,userEventForAnalytics:bu,isBulkAction:!0,from:Pi[yu](e[fu]),[lm]:e[lm]})}else wi.triggerAiAutofillUpsell({[Wu]:this[Wu],from:"ai_autofill_bulk_fill"})},this.bulkAutofillButton=e=>{var t;const{[gm]:i,collectionsBulkActionsToolbarStore:o}=e,a=this[Ku](e),s=null==a?void 0:a.name;if((0,Fi.RT)(this[Wu],null===(t=this[xu])||void 0===t?void 0:t[_u][hm],i)&&(0,oi.getAiInferenceFromPropertySchema)(a)&&o){var r;const t=o[vu](),i=(null===(r=Ei.default[hm].data)||void 0===r?void 0:r.addOns)??[],a=(0,di.de)(i)||t<=5;return n()(Ui.Z,{[im]:{[hu]:gu,[pu]:om,borderTop:`1px solid ${this[Nu][mu]}`},onClick:()=>this.handleBulkAutofillClick(e,a)},void 0,n()(Li.X2,{gap:8,padding:8,[Ru]:uu},void 0,si.Z.magicWand({[hu]:18,fill:this[Nu][Ou]}),n()(Li.sg,{gap:4},void 0,n()("div",{[im]:{[Vu]:14,[cu]:"normal"}},void 0,n()(k.FormattedMessage,s?{[Bu]:'Update "{propertyName}" with AI',id:"BlockPropertyValueOverlay.bulkAiAutofillButton.titleWithPropertyName",[lu]:{[du]:s}}:{[Bu]:"Update with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.title"})),n()("div",{[im]:{[Vu]:12,[Uu]:this[Nu][ru],[cu]:"normal",[su]:"1.4em"}},void 0,n()(k.FormattedMessage,a?{[Bu]:"{numPages, select, 1 {Update {numPages} page} other {Update {numPages} pages}}",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.countAndDescription",[lu]:{numPages:t}}:{[Bu]:"Get the AI add-on to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage",[lu]:{maxItems:5}})))))}},this.renderText=(e,t)=>{var i;const{clonedStore:o}=e,s=this[Ku](e);let r;return"text"===(null==s?void 0:s[au])&&null!==(i=s[nu])&&void 0!==i&&i[Fu]&&(r="Empty"),n()(Ri.Z,{capture:!0,ignoreBlockSelection:!0,[Hu]:!0,[Gu]:!1,[zu]:()=>a[iu](a[tu],null,n()("div",{[im]:cl.F},void 0,n()(vr.Z,{[gm]:o[Xu](e[um]),[Ju]:!0,onEnter:this[cm],onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,[ju]:()=>this.handleTextChange(e,t),[qu]:this[Yu](e),pasteBehavior:$u,[ou]:r}),this.aiAutofillExplanationTextIfAIProperty(e)),this.bulkAutofillButton(e))})},this.renderURL=(e,t)=>{const i=ni[eu](this[Xc](e));let o="url";return"phone_number"===t?o="tel":"email"===t&&(o=Yc),n()(Al,{value:i,inputType:o,[qu]:this[Yu](e),[ju]:this.handleURLValueChange,[Jc]:this[$c]})},this.renderNumber=e=>{const t=e[fu]===Bl.C.Table,i=ni.toNumberValue(this[Xc](e)),o=this[Ku](e);if(o&&"number"===o[au])return n()(Ml,{value:i,isTable:t,[fu]:o[Qc]||"number",[qu]:this[Yu](e),insertChar:e.insertChar,[ju]:this.handleNumberValueChange})},this.renderSelect=e=>{const t=this[jc](e),i=this[qc](e),o=this[Ku](e);if(!i||!o||"select"!==o[au])return;const a=o[Hc]||[],s=ni.toSelectValue(this[Xc](e),a);return n()(As,{allowMultiple:!1,value:s?[s]:[],[um]:e[um],[Wc]:i.id,[Vc]:t,[qu]:this[Yu](e),[Gc]:this[Gc](e),[ju]:this[zc],[Uc]:this[yu](e),insertChar:e.insertChar,[Oc]:this[Kc],[Jc]:this[$c]})},this.renderMultiSelect=e=>{const t=this[jc](e),i=this[qc](e),o=this[Ku](e);if(!i||!o||"multi_select"!==o[au])return;const a=o[Hc]||[],s=ni.toMultiSelectValue(this[Xc](e),a);return n()(As,{allowMultiple:!0,value:s,[um]:e[um],[Wc]:i.id,[Vc]:t,[qu]:this[Yu](e),[Gc]:this[Gc](e),[ju]:this[zc],[Uc]:this[yu](e),insertChar:e.insertChar,[Oc]:this[Kc],[Jc]:this[$c]})},this.renderStatus=e=>{const t=this[qc](e),i=this[Ku](e);if(!t||!i||"status"!==i[au])return;const o={initialValue:ni.toStatusValue(this[Xc](e),i),[um]:e[um],[Mu]:i,[qu]:this[Yu](e),[Jc]:this[$c],[ju]:e=>{this[zc]({value:e?[e]:[]})},[Oc]:this[Kc],[Nc]:this[pm][gm]};return e[um]===ai.b0.StatusV2?a[iu](hr,o):a[iu](ar,o)},this.renderPerson=e=>{const t=this[jc](e),i=this[Ku](e);if(!i||"person"!==i[au])return;const o=ni.toPersonValue({textValue:this[Xc](e),[Mu]:i});return n()(na,{value:o,[um]:e[um],[Vc]:t,[qu]:this[Yu](e),[ju]:this.handlePersonPropertyMenuUpdate,insertChar:e.insertChar,[Jc]:this[$c],[Rc]:e[gm]})},this[Lc]=e=>{const t=this[jc](e),i=ni[Ec](this[Xc](e)),o=this[qc](e);if(o)return n()(aa.Z,{value:i,[um]:e[um],[Bc]:o,[Vc]:t,[qu]:this[Yu](e),[Gc]:this[Gc](e),[ju]:this[Dc],[Uc]:this[yu](e),insertChar:e.insertChar,[Jc]:this[$c],[Ac]:e[gm],[Nc]:this[pm][gm],overlayMode:e.mode})},this.renderRollup=e=>{const t=this[jc](e);return n()(sa.Z,{context:sa.t.BlockPropertyOverlay,[um]:e[um],[Vc]:t,[qu]:this[Yu](e)||!this[Gc](e)||this.isTypedPropertyStore[hm],[ju]:this.handleRollupPropertyMenuUpdate,[Rc]:e[gm],[Uc]:this[yu](e),[Jc]:this[$c]})},this.renderDate=e=>{const t=this[Ku](e);if(!t||"date"!==t[au])return;const i=ni.toDateValue(this[Xc](e));return n()(c.DependencyConsumer,{[Ic]:c.deps.menus},void 0,(o=>{let{DatePropertyMenu:a}=o;return n()(a,{firstDayOfWeek:Ti.userSettingsStartOfWeekStore[hm],value:i,[Fc]:this.handleDatePropertyValueChange,dateFormat:t[xc],onChangeDateFormat:this.handleDatePropertyDateFormatChange,timeFormat:t[_c],[qu]:this[Yu](e),[Gc]:this[Gc](e),onChangeTimeFormat:this.handleDatePropertyTimeFormatChange,[Jc]:this[$c],shouldShowReminder:!0})}))},this.renderFile=e=>{const t=this[jc](e),i=ni.toFileValue(this[Xc](e));return n()(xn,{[gm]:e[gm],value:i,[um]:e[um],[Vc]:t,[Jc]:this[$c],uploadFiles:e.uploadFiles,[qu]:this[Yu](e),[ju]:t=>{Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.renderFile",[Wu]:this[Wu],[Zc]:i=>{if(gi[Cc](t[Vc])||this.setSchema(t[Vc],i),!gi[Cc](t.value)){const o=ni.fromFileValue(t.value);for(const t of this[kc](e))Mi[Mc]({[gm]:t,value:o,[wc]:i});this[Sc](e)}}})}})},this.renderFormula=e=>{const{[Tu]:t}=this[Wu],o=this[jc](e),{[gm]:a}=e,s=a[bc](),r=this[qc](e),l=this[Ku](e),d=this[Yu](e)||!this[Gc](e)||this.isTypedPropertyStore[hm];if((0,_i.formulasPrototypeEnabled)()){if(s&&r&&l&&"formula"===l[au])return n()(c.DependencyConsumer,{[Ic]:c.deps.formulas},void 0,(t=>n()(An.Z,{onClickClose:this[$c],[um]:e[um],[yc]:a[yc],[Mu]:l,[Bc]:r,handleCodeChange:this[fc],formulas:t,[qu]:d})))}else if(s)return n()(Bn.Z,{fetch:()=>i.e(71).then(i.bind(i,73240)),loading:e=>t[Pu]?n()(A.Z,{menuType:Z.og.Modal,title:n()(k.FormattedMessage,{[Bu]:"Formula",id:"database.propertyValues.mobileFormulaMenu.title"}),left:n()(B.CancelMenuText,{}),onClickLeft:this[vc]},void 0,n()("div",{[im]:{[hu]:gu,[hc]:"2em",[rm]:sm,[Ru]:Iu,[gc]:Iu}},void 0,e&&n()(Oi.Z,{}))):n()("div",{[im]:{[pu]:358,[hu]:580,[rm]:sm,[Ru]:Iu,[gc]:Iu}},void 0,e&&n()(Oi.Z,{})),[zu]:t=>{let{default:i}=t;return n()(i,{[um]:e[um],exampleBlock:s,[qu]:d,[Vc]:o,[ju]:this.handleFormulaPropertyMenuUpdate,onClickCancel:this[vc],[Uc]:this[yu](e)})}})},this.renderVerificationOverlay=e=>{const t=this[Ku](e);if("verification"!==(null==t?void 0:t[au]))return;const i=ni.toVerificationValue(this[Xc](e));return n()(ll,{[du]:t.name,[ju]:t=>{Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.verification",[Wu]:this[Wu],[Zc]:i=>{const o=ni.fromVerificationValue(t.value);for(const t of this[kc](e))Mi[Mc]({[gm]:t,value:o,[wc]:i});this[Sc](e)}}),this[$c]()},verificationValue:i,[yc]:e[gm][yc],blockId:e[gm].id,onClose:()=>this[$c]()})},this.isTypedPropertyStore=this[pc]((()=>{var e;const t=this[pm][gm][hm];if(!t[mm])return!1;const i=null===(e=t[lm])||void 0===e?void 0:e[Bc]();if(!i)return!1;const o=t[um];return Boolean(i[mc]()&&i.isTypedProperty(o))})),this.renderFunctions={title:this[tm],text:this.renderText,relation:this[Lc],rollup:this.renderRollup,select:this.renderSelect,[uc]:this.renderMultiSelect,status:this.renderStatus,person:this.renderPerson,number:this.renderNumber,date:this.renderDate,file:this.renderFile,url:this.renderURL,[cc]:this.renderURL,[Yc]:this.renderURL,formula:this.renderFormula,checkbox:void 0,[dc]:void 0,[lc]:void 0,[rc]:void 0,[sc]:void 0,[ac]:void 0,button:void 0,[nc]:void 0,location:void 0,[oc]:this.renderVerificationOverlay},this.handleBgClick=()=>{hi.onBgClick({[Wu]:this[Wu],[Nc]:this[pm][gm]})},this.handleEsc=()=>{hi.onEsc({[Wu]:this[Wu],[Nc]:this[pm][gm]})},this.handleTab=e=>{e[ic](),hi.onTab({[Wu]:this[Wu],[Nc]:this[pm][gm]})},this.handleUntab=e=>{e[ic](),hi.onUntab({[Wu]:this[Wu],[Nc]:this[pm][gm]})},this[cm]=()=>{hi.onEnter({[Wu]:this[Wu],[Nc]:this[pm][gm]})},this[Kc]=e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=this[Ku](t);!i||"select"!==i[au]&&"status"!==i[au]||ti.default[tc]((()=>{e?hi.onEnter({[Wu]:this[Wu],[Nc]:this[pm][gm]}):hi.onEsc({[Wu]:this[Wu],[Nc]:this[pm][gm]})}))},this[zc]=e=>{const t=this[pm][gm][hm];t[mm]&&Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleSelectPropertyMenuUpdate",[Wu]:this[Wu],[Zc]:i=>{if(gi[Cc](e[ec])||this.applyOperationsToSchema(e[ec],i),!gi[Cc](e.value)){const o=ni.fromMultiSelectValue(e.value);for(const e of this[kc](t))Mi[Mc]({[gm]:e,value:o,[wc]:i});this[Sc](t)}}})},this.handlePersonPropertyMenuUpdate=e=>{const t=this[pm][gm][hm];t[mm]&&Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handlePersonPropertyMenuUpdate",[Wu]:this[Wu],[Zc]:i=>{if(gi[Cc](e[Vc])||this.setSchema(e[Vc],i),!gi[Cc](e.value)){const o=ni[Xd](e.value);for(const e of this[kc](t))Mi[Mc]({[gm]:e,value:o,[wc]:i});this[Sc](t)}}})},this[Dc]=async e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=this[Ku](t);if(!i||"relation"!==i[au])return;const o="relation"===i[au]&&oi[Yd](i),n=o&&new Ze.NW(this[Wu],{[$d]:li.v,id:o});n&&await n.load();const a=this[jc](t);Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleRelationPropertyMenuUpdate",[Wu]:this[Wu],[Zc]:i=>{if(e.newPage&&o&&n){const o=ci[Jd](e.newPage.name),a=n.getRootPagePointer(),s=a??n[Qd],r={id:e.newPage.id,[jd]:0,[au]:M.Ti.page,parent_id:s.id,[qd]:s[$d],[Hd]:{title:o},alive:!0,[Gd]:void 0,space_id:e.newPage.spaceId},l=Mi[zd]({[Wu]:this[Wu],[$d]:ri.iU,value:r,[Kd]:t[gm][Kd],[wc]:i});if(a){const e=new Ze.G(this[Wu],{[$d]:a[$d],id:a.id}),t=new Ze.G(this[Wu],{[$d]:ri.iU,id:r.id});Si[Wd]({[Rc]:e,[Vd]:t,[wc]:i})}const d=n[Ud]();d&&yi[Od]({title:{text:o},[Wu]:this[Wu],[gm]:Ze.G[Nd](n,l[Qd]),[Rd]:d,isKeyboard:!1,[Ld]:!1,[wc]:i,from:"relation_property_menu_update"})}if(e.value){for(const o of this.getAllEditStores(t))ki.tG({[Wu]:this[Wu],[gm]:o,pointers:e.value,[Ed]:t[um],[wc]:i});this[Sc](t)}if(e.rollupPropertyId&&e.rollupPropertySchema){const t={...a,[e.rollupPropertyId]:e.rollupPropertySchema};this.setSchema(t,i)}}}),e.rollupPropertyId&&(await ti.default[tc](),hi[Dd]({[Wu]:this[Wu],[Nc]:this[pm][gm],openProperty:e.rollupPropertyId}))},this.handleDatePropertyValueChange=e=>{const t=this[pm][gm][hm];t[mm]&&Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleDatePropertyValueChange",[Wu]:this[Wu],[Zc]:i=>{for(const o of this.getAllEditStores(t))vi.xD({[Wu]:this[Wu],[gm]:o,[au]:Bd,[Bd]:e,[Ed]:t[um],[wc]:i});e||hi.onEsc({[Wu]:this[Wu],[Nc]:this[pm][gm]}),this[Sc](t)}})},this.handleDatePropertyDateFormatChange=e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=this[Ku](t);if(!i||"date"!==i[au])return;const o=this[jc](t),n={...i,[xc]:e},a={...o,[t[um]]:n};var s;(Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleDatePropertyDateFormatChange",[Wu]:this[Wu],[Zc]:e=>{this.setSchema(a,e)}}),n)&&(this[yu](t),be[Ad](this[Wu],{[xd]:n[au],action:"date_change_format",from:this[yu](t),[Gd]:null===(s=this[qc](t))||void 0===s?void 0:s.id}))},this.handleDatePropertyTimeFormatChange=e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=this[Ku](t);if(!i||"date"!==i[au])return;const o=this[jc](t),n={...i,[_c]:e},a={...o,[t[um]]:n};var s;(Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleDatePropertyTimeFormatChange",[Wu]:this[Wu],[Zc]:e=>{this.setSchema(a,e)}}),n)&&(this[yu](t),be[Ad](this[Wu],{[xd]:n[au],action:"date_change_format",from:this[yu](t),[Gd]:null===(s=this[qc](t))||void 0===s?void 0:s.id}))},this[fc]=e=>{const{newValue:t,newType:i,[Mu]:o,[um]:n,[Bc]:a}=e,s=t?{...o,[_d]:{code:t,[Fd]:i},[jd]:"v2"}:{...o,[_d]:void 0,[jd]:"v2"};Ci[Pc]({[Tc]:Id,[Wu]:this[Wu],[Zc]:e=>{bi[Pd]({[Wu]:this[Wu],[Bc]:a,update:{[n]:s},[wc]:e})}})},this.handleFormulaPropertyMenuUpdate=e=>{let{[Mu]:t,[$c]:i}=e;const o=this[pm][gm][hm];o[mm]&&(Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleFormulaPropertyMenuUpdate",[Wu]:this[Wu],[Zc]:e=>{this.updateSchema({[o[um]]:t},e)}}),i&&this[$c]())},this.handleNumberValueChange=e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=ni.fromNumberValue(e);Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleNumberValueChange",[Wu]:this[Wu],[Zc]:e=>{for(const o of this[kc](t))Mi[Mc]({[gm]:o,value:i,[wc]:e})}}),this[Sc](t)},this.handleURLValueChange=e=>{const t=this[pm][gm][hm];if(!t[mm])return;const i=ni.fromUrlValue(e);Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleURLValueChange",[Wu]:this[Wu],[Zc]:e=>{for(const o of this[kc](t))Mi[Mc]({[gm]:o,value:i,[wc]:e})}}),this[Sc](t),be.trackUrlPaste(this[Wu],{pastedText:e,source:"url_property"})},this.handleTextChange=(e,t)=>{this[Td](e,t);const{[gm]:i,[um]:o,additionalStores:n}=e,a=i[Xu](o)[bc]();Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleTextChange",[Wu]:this[Wu],[Zc]:e=>{for(const t of n)Mi[Mc]({[gm]:t[Xu](o),value:a,[wc]:e})}}),this[Sc](e)},this.handleRollupPropertyMenuUpdate=e=>{const t=this[pm][gm][hm];t[mm]&&Ci[Pc]({[Tc]:"BlockPropertyValueOverlay.handleRollupPropertyMenuUpdate",[Wu]:this[Wu],[Zc]:i=>{this.updateSchema({[t[um]]:e[Mu]},i)}})},this[vc]=()=>{this[pm][gm].setState({...this[pm][gm][hm],[mm]:!1})},this[$c]=()=>{hi[$c]({[Wu]:this[Wu],[Nc]:this[pm][gm]})}}willMount(e){super.willMount(e),this[Zd]({isFirstRender:!0})}willUpdate(e){super.willUpdate(e),this[Zd]({isFirstRender:!1})}renderComponent(){const{[Tu]:e}=this[Wu],t=this[pm][gm][hm];let i,o,n;if(t[mm]){const a=t[fu]===Bl.C.Page,c=this[Ku](t),u=c&&c[au],m=t[gm].canEdit();let p=t.rect.top,g=t.rect.left,h=t.rect[hu],v=t.rect[pu];if(a?(g-=1,h+=1):(p-=1,g-=1,h+=1,v+=2),"number"===u)o={[hu]:h};else if("date"===u)p+=v-1,o={};else if("relation"===u){const e=aa.Z[hu];o={[hu]:Math.max(e,h),minHeight:m?65:void 0,overflow:"hidden"}}else if("person"===u)o={[hu]:Math.max(240,h),minHeight:m?100:void 0};else if("formula"===u)p+=v-1,o={borderRadius:8};else if("select"===u||"multi_select"===u)o={[hu]:Math.max(300,h)};else if("rollup"===u)p+=v-1,o={};else if("text"!==u&&"title"!==u||!e[Pu])if("file"===u)o={minWidth:Math.max(240,h)};else if("verification"===u)o={[hu]:fe().clamp(h,265,365)};else{const e=24+(this[Md](t)?28:0);o={[hu]:Math.max(240,h),minHeight:Math.min(v,window.innerHeight-e),maxHeight:window.innerHeight-e,overflow:"visible",[rm]:sm,[am]:nm}}else{const e=Di.Z[Cd]()+24;n={overflowY:om,[kd]:"touch",[hu]:Math.max(240,h),maxHeight:`calc(100vh - ${e}px)`}}const f=t[lm];if(f){var s,r,l,d;const e=f.subitemTreeStore[hm],i=(0,ui.DY)(e.children,(e=>e.value[gm]===t[gm])),n=null==i?void 0:i.length,a=null===(s=f.formatStore())||void 0===s||null===(r=s.getFormat())||void 0===r||null===(l=r.table_properties)||void 0===l?void 0:l.filter((e=>e.visible)),c=a&&(null===(d=a[0])||void 0===d?void 0:d[um])===t[um];n&&c&&(o={...o,...u&&oi.isTextEditableType(u)&&{[hu]:Math.max(90,h)}})}i=new DOMRect(g,p,h,0)}if(t[mm]||!this[fm]){const s=this.getPopupType(),r=!e[Pu]||s===re.ZP.PopupType.Popup,l={key:this.getPopupKey(),popupType:s,open:t[mm],originRect:i,[im]:e[Pu]?{[hu]:o?o[hu]:void 0,...n}:o,alignmentToOrigin:re.ZP.Alignment.Start,placementToOrigin:re.ZP.Placement.Bottom,preventScaleTransition:r,[wd]:r,[zu]:this[vm],[Jc]:this.handleBgClick};return this[fm]=l,a[iu](re.ZP,l)}{const e={...this[fm],open:!1};return a[iu](re.ZP,e)}}[Zd](e){let{isFirstRender:t}=e;const i=this[pm][gm][hm];if(!i[mm]||!i[lm])return;const o=Ai.default.mark(Sd);Ai.default[bd](o,{[Wu]:this[Wu],getData:()=>{var e;return{...we[yd](i[lm]),is_first_render:t,[xd]:null===(e=this[Ku](i))||void 0===e?void 0:e[au],from:Pi[yu](i[fu])}}})}[Md](e){var t;const{[gm]:i}=e,o=this[Ku](e);return o&&(0,Fi.RT)(this[Wu],null===(t=this[xu])||void 0===t?void 0:t[_u][hm],i)&&oi.getAiInferenceFromPropertySchema(o)&&!e.collectionsBulkActionsToolbarStore}renderAutofillUpdateButton(e){if(this[Md](e))return n()(dd,{[Nu]:this[Nu],[Mu]:this[Ku](e),overlayState:e})}renderOverlayContent(e){const t=this[Ku](e);if(!t)return;const i=this.renderFunctions[t[au]];return i?i(e,t[au]):void 0}getPopupType(){const{[Tu]:e}=this[Wu];if(e[Pu]){const e=this[pm][gm][hm];if(!e[mm])return re.kQ.SlideUp;const t=this[Ku](e);return t?cl.m[t[au]]:re.kQ.SlideUp}return re.kQ.Popup}getPopupKey(){const e=this[pm][gm][hm];if(!e[mm])return"ignore";const t=this[Ku](e);return t?t[au]:"ignore"}[Td](e,t){const i=Ai.default.mark(fd);Ai.default[bd](i,{[Wu]:this[Wu],getData:()=>({...we[yd](e[lm]),[xd]:t,from:Pi[yu](e[fu])})})}[jc](e){return e[gm][jc]()||{}}[Ku](e){return this[jc](e)[e[um]]}[qc](e){return e[gm][vd]()}[kc](e){return this.getAllEditStores(e).map((t=>t[Xu](e[um])))}[Xc](e){return e[gm][Xc](e[um])}updateSchema(e,t){const i=this[pm][gm][hm];if(i[mm]&&i[mm]){const o=this[qc](i);o&&bi[Pd]({[Wu]:this[Wu],[Bc]:o,update:e,[wc]:t})}}setSchema(e,t){const i=this[pm][gm][hm];if(i[mm]&&i[mm]){const o=this[qc](i);o&&bi.updateCollection({[Wu]:this[Wu],[Bc]:o,update:{[Vc]:e},[wc]:t})}}applyOperationsToSchema(e,t){const i=this[pm][gm][hm];if(i[mm]&&i[mm]){const o=this[qc](i);if(o){const i=o[jc]();for(const a of e)Ci.applyOperation({[gm]:(0,Ze.Kv)(o,a[Qd]),operation:a,[wc]:t});const n=o[jc]();bi.handleCollectionSchemaUpdated({[Wu]:this[Wu],[Bc]:o,oldSchema:i,newSchema:n,[wc]:t})}}}[Sc](e){const t=e[gm].getType(),i=this[Ku](e),{[lm]:o}=e;t&&i&&o&&fi[hd]({[Wu]:this[Wu],[lm]:o,block_id:e[gm].id,[um]:e[um],[xd]:i[au],from:this[yu](e),[gd]:Pi[pd](this[pm][gm])})}[yu](e){return Pi[yu](e[fu])}getAllEditStores(e){return[e[gm],...e.additionalStores]}[Gc](e){const t=this[qc](e),i=null==t?void 0:t.getParentBlockStore();return Ii[Gc]({[Bc]:t,[md]:i,checkNavigableAncestorLocked:!1})}[Yu](e){const t=this[Ku](e),i=(0,oi.getAiInferenceFromPropertySchema)(t);return!!(i&&i[Fu]&&(0,Fi.Zt)(this[Wu]))||((0,xi.N)(this[Wu],e[gm])||ni.isExternalPropertyId(e[um]))}}function bm(e){let{overlayState:t,[Mu]:i,[im]:o}=e;window.__c={n:"AutofillUpdateMobileLink"};const a=(0,r.O7)(),s=(0,ii.yK)((e=>({linkStyle:{[Uu]:e[Ou],[Vu]:12,...o}})),[o]);return n()("div",{[im]:s.linkStyle,onClick:()=>{i&&wi[Su]({[Wu]:a,stores:[t[gm]],[um]:t[um],[Mu]:i,userEventForAnalytics:bu,[lm]:t[lm],from:Pi[yu](t[fu])})}},void 0,n()(k.FormattedMessage,{[Bu]:"Update",id:"database.propertyValues.reGenerateAiAutofill"}))}ym.displayName="BlockPropertyValueOverlay",ym.titleStyle={...cl.F,[Lu]:pi.Z[Lu].medium};const Sm=ym;var wm=i(51454),Mm=i(86080),km=i(81700),Cm=i(53953),Zm=i(63296);const Tm=i(85).Mm1,Pm=i(85).lUt,Im=i(85).irb,Fm=i(85).nQ3,_m=i(85).j7K,xm=i(85).y79,Am=i(85).cZW,Bm=i(85).Dd5,Dm=i(85).C$B,Em=i(85).loK,Lm=i(85).Rbl,Rm=i(85).SPm,Nm=i(85).g7N,Om=i(85).UPJ,Um=i(85).jkI,Vm=i(85).H1U,Wm=i(85).EMU,Km=i(85).sM5,zm=i(85).jms,Gm=i(85).oSF,Hm=i(85).nx5,qm=i(85).v8Q,jm=i(85).BQ6,Qm=i(85).D7I,Jm=i(85).ELX,$m=i(85).rpY,Ym=i(85).GOX,Xm=i(85).gzw;class ep extends w.Z{constructor(){super(...arguments),this[Xm]=void 0,this.renderModal=()=>{if(!this[Xm])return;const{[Ym]:e,requiredInputValue:t}=this[Xm],i=[{key:"accept",[$m]:t=>a[Qm](Zm.Z,ht()({isRed:!0,isLarge:!0,[jm]:ep[Jm],[qm]:t.focused},t),e),action:this.handleAccept},{key:"cancel",[$m]:e=>a[Qm](Zm.Z,ht()({isLarge:!0,[jm]:ep[Jm],[qm]:e.focused},e),n()(k.FormattedMessage,{id:"confirmationInputDialog.cancelButton.label",[Hm]:"Cancel"})),action:this[Gm]}];return n()(_.Z,{capture:!0,preventType:P.Z.All},void 0,n()("div",{},void 0,n()("div",{[jm]:{[zm]:64,[Km]:Wm,[Vm]:Um,[Om]:Um,[Nm]:16}},void 0,this[Xm][Rm]),n()(x.Z,{capture:!0,onLeft:fe()[Lm],onRight:fe()[Lm],onSelectAll:fe()[Lm],onRedo:fe()[Lm],onUndo:fe()[Lm],onToggleBold:fe()[Lm],onToggleItalics:fe()[Lm],onToggleCode:fe()[Lm],onCut:fe()[Lm],onCopy:fe()[Lm],onPaste:fe()[Lm],onKeypress:fe()[Lm],onDelete:fe()[Lm],onBackspace:fe()[Lm]},void 0,n()(Ut.Z,{value:this[Xm][Em],[Bm]:this[Dm],[jm]:{height:38,[Nm]:2},[Am]:t})),n()(Mt.Z,{type:Mt.i[xm],[_m]:void 0,[Fm]:[{key:"dialog",[$m]:e=>a[Qm](xe.Z,e),items:i}]})))},this.handleAccept=()=>{const e=km.Z.state;e.open&&(this.cleanAcceptInput(e[Em])===this.cleanAcceptInput(e.requiredInputValue)?Mm.x({didConfirm:!0}):Wi[Im](n()(k.FormattedMessage,{id:"confirmDialogInput.incorrectInputError.message",[Hm]:'Please type "{requiredInputValue}" to continue',values:{requiredInputValue:e.requiredInputValue}})))},this.cleanAcceptInput=e=>e.trim()[Pm]().replace(/’/g,"'"),this[Gm]=()=>{Mm.x({didConfirm:!1})},this[Dm]=e=>{const t=km.Z.state;t.open&&km.Z.setState({...t,[Em]:e.target.value})}}renderComponent(){const e=km.Z.state;return e.open&&(this[Xm]={...e}),n()(Cm.Z,{open:e.open,keepFocus:!0,overlayZIndex:wm.dialogModal,onDismiss:this[Gm],preventHideChildrenWhileOpening:!0,innerStyle:{borderRadius:3,paddingTop:24,[Tm]:16,paddingLeft:32,paddingRight:32,width:this[Xm]&&this[Xm].width||336,fontSize:16,boxShadow:this.theme.largeBoxShadow,background:this.theme.modalBackground,maxHeight:"90vh",overflowY:"scroll",marginLeft:24,marginRight:24},[$m]:this.renderModal})}}ep.displayName="ConfirmInputDialogRenderer",ep[Jm]={width:"100%",marginTop:16};const tp=ep;var ip=i(55367),op=i(8958),np=i(41046);const ap=i(85).EIp,sp=i(85).qnp,rp=i(85).QmD;class lp extends w.Z{constructor(){super(...arguments),this.renderGhost=()=>{const e=ip.ZP[rp];if(!e[sp])return;const t=e.draggedStores.map(((t,i)=>n()(op.Z,{store:t,ghostElement:e.ghostElements[i]},`${i}`)));return n()("div",{style:this.getGhostStyle()},void 0,t)},this[sp]=this[ap]((()=>ip.ZP[rp][sp]))}renderComponent(){return n()(np.Z,{open:this[sp][rp]},void 0,this.renderGhost())}getGhostStyle(){const e=ip.ZP[rp];if(!e[sp])return;const{startX:t,startY:i,currentX:o,currentY:n}=e;return{position:"absolute",top:0,left:0,transform:`translate3d(${o-t}px, ${n-i}px, 0)`}}}lp.displayName="DragOverlay";const dp=lp;var cp=i(12768);const up=i(85).p06,mp=i(85).EmK,pp=i(85).con,gp=i(85).YGn,hp=i(85).g65,vp=i(85).FqN,fp=i(85).D4q,yp=i(85).Jaf,bp=i(85).wDG,Sp=i(85).wgE,wp=i(85).I7D;class Mp extends w.Z{constructor(){super(...arguments),this[wp]=e=>{const{device:t}=this[Sp];t[bp]||cp.default[yp]||(0,fa.ZP)({event:e,context:fa.Af.EditorContextMenu,callback:()=>{t[fp]||this[Sp][hp][vp]()&&e[gp]()}})},this[pp]=e=>{e[gp]()}}didMount(){window[mp]("contextmenu",this[wp]),window[mp]("dragstart",this[pp])}willUnmount(){window[up]("contextmenu",this[wp]),window[up]("dragstart",this[pp])}}Mp.displayName="PreventDefaultListener";const kp=Mp;var Cp=i(67133),Zp=i(28748);const Tp=i(85).IK4,Pp=i(85).wJk,Ip=i(85).mEV,Fp=i(85).Uk6,_p=i(85).YOX,xp=i(85)._lc,Ap=i(85).LCr,Bp=i(85).HA$,Dp=i(85).nxU,Ep=i(85).wgE,Lp=i(85).Drs,Rp=i(85).JJj,Np=i(85).gB9,Op=i(85).G0x,Up=i(85).TmH,Vp=i(85).eHP,Wp=i(85).WsS,Kp=i(85).N6$,zp=i(85).dIU,Gp=i(85).k66;class Hp extends w.Z{constructor(){super(...arguments),this.handleChangeValue=e=>{if(!e)return void this.removeDateAnnotation();const t=this[Gp]();if(!t)return;const{[zp]:i,[Kp]:o}=t;this[Wp]({[zp]:i,[Kp]:o,...e})},this.handleChangeDateFormat=e=>{const t=this[Gp]();if(!t)return;const{[Vp]:i,[Kp]:o}=t;this[Wp]({[zp]:e,[Kp]:o,...i})},this.handleChangeTimeFormat=e=>{const t=this[Gp]();if(!t)return;const{[Vp]:i,[zp]:o}=t;this[Wp]({[zp]:o,[Kp]:e,...i})},this[Wp]=e=>{const t=this[Gp]();if(!t)return;const{[Up]:i,[Op]:o,tokenIndex:n,annotations:a}=t,s=o.map(((t,i)=>{if(i===n){const i=a.map((t=>ci.isDateAnnotation(t)?["d",e]:t));return ci[Np](t[0],i)}return t}));Ci[Rp]({[Lp]:"DateMentionMenu.setDateAnnotationData",[Ep]:this[Ep],[Dp]:e=>{Mi[Bp]({store:i,value:s,[Ap]:e})}})},this.removeDateAnnotation=()=>{const e=this[Gp]();if(!e)return;const{[Up]:t,[Op]:i,tokenIndex:o}=e,n=i.filter(((e,t)=>t!==o));Ci[Rp]({[Lp]:"DateMentionMenu.removeDateAnnotation",[Ep]:this[Ep],[Dp]:e=>{Mi[Bp]({store:t,value:n,[Ap]:e})}})}}renderComponent(){const{device:e}=this[Ep],t=Zp.Z.state;return n()(re.ZP,{popupType:e.isMobile?re.ZP[xp].SlideUp:re.ZP[xp].Popup,open:t.open,[_p]:t[_p],[Pp]:Cp.x,render:()=>{const e=this[Gp]();if(!e)return null;const{[zp]:i,[Kp]:o,[Vp]:a}=e;return n()(c.DependencyConsumer,{dependency:c.deps.menus},void 0,(e=>{let{DatePropertyMenu:s}=e;return n()(s,{firstDayOfWeek:Ti.userSettingsStartOfWeekStore.state,value:a,[Fp]:!0,[Ip]:this.handleChangeValue,dateFormat:i,onChangeDateFormat:this.handleChangeDateFormat,timeFormat:o,onChangeTimeFormat:this.handleChangeTimeFormat,[Pp]:Cp.x,disabled:!1,shouldShowReminder:!!t.open&&t.allowReminders})}))}})}[Gp](){const e=Zp.Z.state;if(e.open){const{[Up]:t,tokenIndex:i}=e,o=t.getValue();if(o){const e=o[i];if(e){const n=ci.getTokenAnnotations(e),a=ci.findDateAnnotation(n);if(a){const{[zp]:s,[Kp]:r,...l}=ci[Tp](a);return{[Up]:t,[Op]:o,tokenIndex:i,token:e,annotations:n,[zp]:s,[Kp]:r,[Vp]:l}}}}}}}Hp.displayName="DateMentionMenu";const qp=Hp;var jp=i(51859),Qp=i(89951),Jp=i(68056),$p=i(64233),Yp=i(88923),Xp=i(24666);const eg=i(85).OXp,tg=i(85).h2B,ig=i(85).Aa9,og=i(85).Er,ng=i(85).HYJ,ag=i(85).cNm,sg=i(85).hF9,rg=i(85).TLr,lg=i(85).W_R,dg=i(85).j_T,cg=i(85).pek,ug=i(85).Zs0,mg=i(85).xcH,pg=i(85).BPk,gg=i(85)._lc,hg=i(85).t4B,vg=i(85).Sjp,fg=i(85).D7I,yg=i(85).j7K,bg=i(85).y79,Sg=i(85).Ie8,wg=i(85).ceT,Mg=i(85).dLQ,kg=i(85).N1Z,Cg=i(85).QmD,Zg=i(85).wgE,Tg=i(85).Yzm,Pg=i(85).MaF,Ig=i(85).nx5,Fg=(0,k.defineMessages)({image:{[Ig]:"Embed image",id:"embedMenu.action.image"},video:{[Ig]:"Embed video",id:"embedMenu.action.video"},tweet:{[Ig]:"Embed Tweet",id:"embedMenu.action.tweet"},drive:{[Ig]:"Embed Google Drive",id:"embedMenu.action.drive"},gist:{[Ig]:"Embed GitHub Gist",id:"embedMenu.action.gist"},figma:{[Ig]:"Embed Figma",id:"embedMenu.action.figma"},invision:{[Ig]:"Embed Invision project",id:"embedMenu.action.invision"},abstract:{[Ig]:"Embed Abstract project",id:"embedMenu.action.abstract"},framer:{[Ig]:"Embed Framer prototype",id:"embedMenu.action.framer"},whimsical:{[Ig]:"Embed Whimsical board",id:"embedMenu.action.whimsical"},mixpanel:{[Ig]:"Embed Mixpanel project",id:"embedMenu.action.mixpanel"},sketch:{[Ig]:"Embed Sketch document",id:"embedMenu.action.sketch"},[Pg]:{[Ig]:"Embed excalidraw",id:"embedMenu.action.excalidraw"},replit:{[Ig]:"Embed a repl",id:"embedMenu.action.replit"},miro:{[Ig]:"Embed Miro board",id:"embedMenu.action.miro"},audio:{[Ig]:"Embed audio",id:"embedMenu.action.audio"},maps:{[Ig]:"Embed Google Map",id:"embedMenu.action.maps"},loom:{[Ig]:"Embed Loom",id:"embedMenu.action.loom"},typeform:{[Ig]:"Embed Typeform",id:"embedMenu.action.typeform"},codepen:{[Ig]:"Embed CodePen",id:"embedMenu.action.codepen"},pdf:{[Ig]:"Embed PDF",id:"embedMenu.action.pdf"},embed:{[Ig]:"Create embed",id:"embedMenu.action.createEmbed"},hex:{[Ig]:"Embed Hex",id:"embedMenu.action.hex"},deepnote:{[Ig]:"Embed Deepnote",id:"embedMenu.action.deepnote"},drawing:{[Ig]:"Embed a drawing",id:"embedMenu.action.drawing"}}),_g=(0,k.defineMessages)({linkToPage:{[Ig]:"Link to page",id:"embedMenu.actions.linkToPage.title"},mentionPage:{[Ig]:"Mention page",id:"embedMenu.actions.mentionPage.title"},mentionBlock:{[Ig]:"Mention block",id:"embedMenu.actions.mentionBlock.title"},createLinkedDatabase:{[Ig]:"Create linked database",id:"embedMenu.actions.createLinkedDatabase.title"},createLinkedViewOfDatabase:{[Ig]:"Create linked view of database",id:"embedMenu.actions.createLinkedViewOfDatabase.title"},bookmarkMenuItem:{[Ig]:"Create bookmark",id:"embedMenu.actions.createBookmark.title"},createTransclusionItem:{[Ig]:"Paste and sync",id:"embedMenu.actions.createTransclusion.title"},dismissItem:{[Ig]:"Dismiss",id:"embedMenu.actions.dismiss.title"}}),xg={image:bt.default[Tg](Fg.image),video:bt.default[Tg](Fg.video),tweet:bt.default[Tg](Fg.tweet),drive:bt.default[Tg](Fg.drive),gist:bt.default[Tg](Fg.gist),figma:bt.default[Tg](Fg.figma),invision:bt.default[Tg](Fg.invision),abstract:bt.default[Tg](Fg.abstract),framer:bt.default[Tg](Fg.framer),whimsical:bt.default[Tg](Fg.whimsical),mixpanel:bt.default[Tg](Fg.mixpanel),miro:bt.default[Tg](Fg.miro),sketch:bt.default[Tg](Fg.sketch),[Pg]:bt.default[Tg](Fg[Pg]),replit:bt.default[Tg](Fg.replit),audio:bt.default[Tg](Fg.audio),maps:bt.default[Tg](Fg.maps),loom:bt.default[Tg](Fg.loom),typeform:bt.default[Tg](Fg.typeform),codepen:bt.default[Tg](Fg.codepen),pdf:bt.default[Tg](Fg.pdf),embed:bt.default[Tg](Fg.embed),hex:bt.default[Tg](Fg.hex),deepnote:bt.default[Tg](Fg.deepnote),drawing:bt.default[Tg](Fg.drawing)};class Ag extends w.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this[Zg],t=$p.Z[Cg];if(!t.open)return;const i=this.getSections(t);let o;return 0===i.length&&Qp[kg](),o=e[Mg]?{[wg]:Z.og[Sg]}:{[wg]:Z.og.Popup,width:320,maxHeight:"40vh"},a[fg](A.Z,ht()({},o,{className:yt.embedMenu}),n()(Mt.Z,{type:Mt.i[bg],sections:i,[yg]:0}))},this[vg]=()=>{const e=$p.Z[Cg],{url:t}=e;be.trackEmbedMenuSelection(this[Zg],{url:t,type:kg}),Qp[kg]()},this.handleAccept=e=>{const t=$p.Z[Cg],{url:i}=t;Qp.accept({[Zg]:this[Zg],type:e}),be.trackEmbedMenuSelection(this[Zg],{url:i,type:e})}}willMountOrUpdate(){const e=$p.Z[Cg];if(e.open){const t=Xp.default[Cg];if("editing"===t.mode){const{multiSelection:i}=t;(0,Jp.qS)(i)&&i.start.store.id===e.textStore.id&&i.end.index===e.urlSelection.endIndex||Qp[kg]()}}}renderComponent(){const{device:e}=this[Zg],t=$p.Z[Cg];return n()(re.ZP,{popupType:e[hg]&&!e.isTablet?re.ZP[gg].SlideUp:re.ZP[gg].Popup,open:t.open,originRect:t.open?t.selectionRect:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e[Mg],keepFocus:e[Mg],render:this.renderMenu,onDismiss:this[vg]})}[pg](e){const t=e[mg]();return t instanceof Ze.G&&void 0!==t[ug]()}isCollectionViewWithContent(e,t){const i=e[cg](),o=fe().find(i,(e=>e.id===t&&"page"===e.getType()));return Boolean(o)}getSections(e){const{device:t}=this[Zg],{url:i,textStore:o}=e,n=ma.default.checkGate("reorder_embed_menu"),s=[],r=(0,jp.Wj)({url:i,baseUrl:Xi.default[dg],[lg]:Xi.default[lg],[Mg]:t[Mg],protocol:Xi.default.protocol,currentUrl:window.location.href});if("page"===r.name){const e=Ze.G[rg](o,{table:ri.iU,id:r.blockId}),t=r[sg]?Ze.G[rg](o,{table:ri.iU,id:r[sg]}):void 0;s.push({name:bt.default[Tg](_g.createLinkedViewOfDatabase),[ag]:()=>!t&&e[ng]()&&!this[pg](o)&&(!e[og]()||!this.isCollectionViewWithContent(e,r.collectionViewId))&&!Yp.default.isMiniPeekOpen(),type:M.Ti.collectionView}),n&&s.push({name:bt.default[Tg](void 0===t?_g.mentionPage:_g.mentionBlock),[ag]:()=>!0,type:ig}),s.push({name:bt.default[Tg](_g.createTransclusionItem),[ag]:()=>Boolean(t&&!t.isNavigableBlock()&&!this[pg](o)&&!t.isLocked()&&!t[tg]()&&t.canEdit()),type:eg}),n||s.push({name:bt.default[Tg](void 0===t?_g.mentionPage:_g.mentionBlock),[ag]:()=>!0,type:ig}),s.push({name:bt.default[Tg](_g.linkToPage),[ag]:()=>!t&&!e[ng]()&&!this[pg](o),type:M.Ti.page})}const l=gi.keys(xg);for(const a of l)"embed"!==a&&s.push({name:xg[a],[ag]:Qi.Wb[a],type:a});s.push({name:bt.default[Tg](_g.bookmarkMenuItem),[ag]:e=>!this[pg](o)&&Qi.Cm(e),type:M.Ti.bookmark}),s.push({name:xg.embed,[ag]:e=>!this[pg](o)&&Qi.Wb.embed(e),type:"embed"});const d=fe().compact(s.map((e=>{let{name:t,[ag]:o,type:n}=e;if(o({url:i,baseUrl:Xi.default[dg],[lg]:Xi.default[lg]})){return{key:`embed ${t}`,render:e=>a[fg](wt.Z,ht()({},e,{title:t})),action:()=>this.handleAccept(n)}}}))),c={key:"dismiss",render:e=>a[fg](wt.Z,ht()({},e,{title:bt.default[Tg](_g.dismissItem)})),action:this[vg]};if(0===d.length)return[];n&&"page"===r.name?d.push(c):d.unshift(c);return[{key:"embed section",render:e=>a[fg](xe.Z,e),items:d}]}}Ag.displayName="EmbedMenu";const Bg=Ag;var Dg=i(4727),Eg=i(31352),Lg=i(88833),Rg=i(38797);const Ng=i(85)._lc,Og=i(85).XQm,Ug=i(85).oSF,Vg=i(85).LCr,Wg=i(85).Drs,Kg=i(85).JJj,zg=i(85).piL,Gg=i(85).D7I,Hg=i(85).l6S,qg=i(85).TSg,jg=i(85).N1Z,Qg=i(85).Ie8,Jg=i(85).ceT,$g=i(85).t4B,Yg=i(85).Dv6,Xg=i(85).QmD,eh=i(85).wgE;class th extends w.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this[eh],t=Lg.Z[Xg],i=a[Yg]();if(!t.open)return;let o;return o=e[$g]&&!e.isTablet?{[Jg]:Z.og[Qg]}:{[Jg]:Z.og.Popup,width:Rg.ZP.desktopEmojiPickerOnlyPopupWidth,maxHeight:Rg.ZP.desktopEmojiPickerOnlyPopupHeight,onClickOutside:Dg[jg]},a[Gg](A.Z,ht()({innerRef:i},o),n()(Rg.ZP,{filter:this[qg](t)||"",onSubmit:this[Hg],onNoResults:this.handleNoResults,isCallout:!1,menuRef:i}))},this.handleNoResults=()=>{const e=Lg.Z[Xg];if(!e.open)return;const t=this[qg](e);if(!t)return;const i=fe().last(t);i&&(/\s/g.test(i)?Dg[jg]():this.trackNoResultsDebounced(t))},this.trackNoResultsDebounced=fe().debounce((e=>{be.trackEmojiNoResults(this[eh],{[zg]:e})}),500),this[Hg]=e=>{Ci[Kg]({[Wg]:"EmojiMenu.handleSubmit",[eh]:this[eh],perform:t=>{Dg.accept({[eh]:this[eh],emoji:e,[Vg]:t})}})},this[Ug]=()=>{Dg[jg]()}}willMountOrUpdate(){const e=Lg.Z[Xg];if(e.open){var t;const i=Xp.default[Xg],o=this[qg](e);if("editing"!==i.mode)return void Dg[jg]();const n=ci.getChars(i[Og].start.store.getValue())[i[Og].start.index-1];if(!o&&":"!==n)return void Dg[jg]();((null===(t=(0,Jp.QY)(i[Og]))||void 0===t?void 0:t.store)!==e.textStore||void 0===o||":"===o||o.startsWith("\n")||o.startsWith(" "))&&Dg[jg]()}}renderComponent(){const{device:e}=this[eh],t=Lg.Z[Xg];let i=!1;if(t.open){const e=this[qg](t);e&&e.length>0&&(i=!0),t.showPopupWithEmptyFilter&&(i=!0)}return n()(re.ZP,{popupType:e[$g]&&!e.isTablet?re.ZP[Ng].SlideUp:re.ZP[Ng].Popup,open:i,originRect:t.open?t.selectionRect:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:this[Ug],render:this.renderMenu,keepFocus:!0})}[qg](e){return Eg[qg](e.textStore,e.oldTextValue,!0)}}th.displayName="EmojiMenu";const ih=th;var oh=i(8848),nh=i(42858),ah=i(24677),sh=i(39500),rh=i(17504),lh=i(58202),dh=i(38302),ch=i(23063),uh=i(56813);const mh=i(85).NF1,ph=i(85).Scd,gh=i(85).N8h,hh=i(85).gdQ,vh=i(85).$P$,fh=i(85).bzR,yh=i(85).LlE,bh=i(85).vjK,Sh=i(85).pkR,wh=i(85).hMU,Mh=i(85).od_,kh=i(85).nx5,Ch=i(85).Joh,Zh=i(85).$Vg,Th=i(85).H1U,Ph=i(85).tBn,Ih=i(85).PXg,Fh=i(85).KLF,_h=i(85).wj5,xh=i(85).g65,Ah=i(85).j_T,Bh=i(85).gYY,Dh=i(85).tb8,Eh=i(85).YGn,Lh=i(85).Kj2,Rh=i(85).NMF,Nh=i(85).$tx,Oh=i(85).khk,Uh=i(85).DEY,Vh=i(85).N1Z,Wh=i(85).TtP,Kh=i(85).DIE,zh=i(85).Tpb,Gh=i(85).fTy,Hh=i(85).PG2,qh=i(85).D7I,jh=i(85).i7F,Qh=i(85).Un1,Jh=i(85).GjK,$h=i(85).Wp_,Yh=i(85).jkI,Xh=i(85).UPJ,ev=i(85).I7L,tv=i(85).fsm,iv=i(85).LZJ,ov=i(85).EMU,nv=i(85).sM5,av=i(85).A7Y,sv=i(85).rpY,rv=i(85).Bgg,lv=i(85).BQ6,dv=i(85).UGi,cv=i(85).cx2,uv=i(85).Rbl,mv=i(85).rSD,pv=i(85).z$9,gv=i(85).AEP,hv=i(85).X_m,vv=i(85).vj5,fv=i(85).Aoy,yv=i(85).p06,bv=i(85).EmK,Sv=i(85).WCo,wv=i(85).Jhh,Mv=i(85).wgE,kv=i(85).Xte,Cv=i(85).QmD,Zv=i(85).Jkr,Tv=i(85).EIp,Pv=i(85).fHn,Iv=i(85).yUP,Fv=i(85).z0Q,_v=i(85).r98,xv=i(85).c4c,Av=i(85).WRA;class Bv extends w.Z{constructor(){var e;super(...arguments),e=this,this.zoomFocusPercentageX=0,this.zoomFocusPercentageY=0,this[Av]=!1,this[xv]=void 0,this[_v]=void 0,this[Fv]=eo.default[Iv](!1),this.contentDimensions=eo.default[Iv](void 0),this[Pv]=eo.default[Iv](!1),this.responsiveSettings=this[Tv]((()=>{const e=this[Mv][kv][Cv][Zv];return{edgePadding:$i.getFullScreenEdgePadding(e),backgroundOpacity:.8}})),this[wv]=()=>{const{[Sv]:e,renderFullScreenNode:t,fullScreenNodeRect:i,contentAspectRatio:o,zoomScale:s,panOffset:r,skipAnimations:l}=dh.Z[Cv];if(!i)return;e&&!this[Av]?(window[bv]("wheel",this.handleWheel,{passive:!1}),this[Av]=!0):!e&&this[Av]&&(window[yv]("wheel",this.handleWheel),this[Av]=!1);const{edgePadding:d,backgroundOpacity:c}=this.responsiveSettings[Cv],u=window[fv],m=window[vv]-2*d;let p=u-2*d;const g=o||i[hv]/i[Zv];let h=p*g;if(h>m){const e=h/m;h/=e,p/=e}const v={[gv]:0},f={scale:s,[gv]:1,translateX:r.x,translateY:r.y};let y,b;return t&&(y=t()),b=this[Pv][Cv]?s>=1.5?"zoom-out":"zoom-in":pv,(0,rh.Z)((t=>n()(x.Z,{capture:e,onEsc:()=>{this[mv](!0)},onEnter:fe()[uv],onSpace:()=>this[mv](!0),onCommandEnter:()=>this[mv](!0),onCommandShiftEnter:fe()[uv],onCommandSlash:fe()[uv],onUp:fe()[uv],onDown:fe()[uv],onDelete:fe()[uv],onBackspace:fe()[uv],onLeft:()=>this.handlePrevious(!0),onRight:()=>this.handleNext(!0),onUntab:fe()[uv],onTab:fe()[uv],onSelectAll:fe()[uv],onRedo:fe()[uv],onUndo:fe()[uv],onToggleBold:fe()[uv],onToggleItalics:fe()[uv],onToggleStrike:fe()[uv],onToggleCode:fe()[uv],onCut:fe()[uv],onCopy:fe()[uv],onPaste:fe()[uv],onKeypress:this.handleKeypress},void 0,n()(_.Z,{capture:e,preventType:P.Z.All},void 0,a[qh]("div",ht()({[lv]:this[cv]({[Sv]:e})},t,{[Hh]:this.handleBackgroundClick,onMouseMove:this[dv]}),n()(ch.Z,{[rv]:e,enterAnimationStyle:{[gv]:0},exitAnimationStyle:{[gv]:0},animationStyle:{[gv]:c},[sv]:()=>n()("div",{[lv]:this.getBackgroundStyle()}),onAnimationEnd:this.handleBackgroundAnimationEnd}),n()(ch.Z,{[rv]:e,enterAnimationStyle:v,exitAnimationStyle:v,animationStyle:f,skipAnimation:l,springConfig:{scale:this[av](),translateX:this[av](),translateY:this[av]()},[sv]:()=>a[qh]("div",{[lv]:{[nv]:ov,[iv]:b,[tv]:p,[ev]:h,[Xh]:Yh},ref:e=>{e&&this.contentDimensions[$h]({[Zv]:e.clientWidth,[hv]:e.clientHeight})},[Hh]:this.handleContentClick,onMouseDown:this[Jh],onMouseUp:this[Qh],onMouseLeave:this[Qh],onMouseMove:this[jh]},y),onAnimationEnd:this.handleFullscreenNodeAnimationEnd}),this.renderBottomBar())))))},this[Gh]=()=>{this[xv]&&clearTimeout(this[xv])},this[dv]=()=>{const{isSaving:e}=dh.Z[Cv];this[Pv][$h](!0),this[Gh](),this[Fv][Cv]||e||(this[xv]=setTimeout((()=>this[Pv][$h](!1)),2e3))},this.enableZoomEditing=()=>{this[Fv][$h](!0),this[Gh]()},this[zh]=()=>{this[Fv][$h](!1),this[dv]()},this.handleBackgroundClick=e=>{(0,sh.mouseDidDrag)(e)||this[mv]()},this.handleContentClick=e=>{const{zoomScale:t,panOffset:i}=dh.Z[Cv];if(e[Kh](),(0,sh.mouseDidDrag)(e))return;let o,n;o=t<1?1:t<1.5?1.5:1,n=o<=1?{x:0,y:0}:this.clampPanOffset({x:(window[fv]/2-e.clientX)/(o/(o-1)),y:(window[vv]/2-e.clientY)/(o/(o-1))})??i,dh.Z[$h]({...dh.Z[Cv],zoomScale:o,panOffset:n}),this[dv](),this[zh]()},this[mv]=function(){let t=arguments[Wh]>0&&void 0!==arguments[0]&&arguments[0];$i[Vh](),e.resetControls(),be[Uh](e[Mv],{type:Vh,triggered_by:t?"keypress":"click"}),ah.clear(e[Mv]),e[Qh]()},this.handleResize=()=>{const{[Sv]:e}=dh.Z[Cv];e&&this[Oh]()},this.handleBackgroundAnimationEnd=()=>{const{[Sv]:e}=dh.Z[Cv];e||dh.Z[$h]({...dh.Z[Cv],backgroundAnimationComplete:!0})},this.handleFullscreenNodeAnimationEnd=()=>{const{[Sv]:e}=dh.Z[Cv];e||dh.Z[$h]({...dh.Z[Cv],fullscreenNodeAnimationComplete:!0})},this.cancelBackgroundClick=e=>{e[Kh]()},this.handlePrevious=function(){let t=arguments[Wh]>0&&void 0!==arguments[0]&&arguments[0];e.moveToImageOffset(-1,t)},this.handleNext=function(){let t=arguments[Wh]>0&&void 0!==arguments[0]&&arguments[0];e.moveToImageOffset(1,t)},this.handleZoomInputSubmit=e=>{const t=e.target,i=parseInt(t.value);if(!isNaN(i)){const e=i/100;be[Uh](this[Mv],{type:"set_zoom",new_zoom:e}),this.setZoomScale(e)}this[zh]()},this.handleZoomOut=function(){let t=arguments[Wh]>0&&void 0!==arguments[0]&&arguments[0];const{zoomScale:i}=dh.Z[Cv];let o=Math.ceil((i-Bv.ZOOM_STEP)*Bv[Nh])/Bv[Nh];i-o<Bv.ZOOM_THRESHOLD&&(o-=Bv.ZOOM_STEP),be[Uh](e[Mv],{type:"zoom_out",new_zoom:o,triggered_by:t?"keypress":"click"}),e.setZoomScale(o)},this.handleZoomIn=function(){let t=arguments[Wh]>0&&void 0!==arguments[0]&&arguments[0];const{zoomScale:i}=dh.Z[Cv];let o=Math.floor((i+Bv.ZOOM_STEP)*Bv[Nh])/Bv[Nh];o-i<Bv.ZOOM_THRESHOLD&&(o+=Bv.ZOOM_STEP),be[Uh](e[Mv],{type:"zoom_in",new_zoom:o,triggered_by:t?"keypress":"click"}),e.setZoomScale(o)},this[Rh]=e=>{const{zoomScale:t}=dh.Z[Cv];this.setZoomScale(t+e)},this.setZoomScale=e=>{const{panOffset:t}=dh.Z[Cv];this[dv]();const i=Math.max(Math.min(e,Bv[Lh]),Bv.MIN_ZOOM),o=i<=1?{x:0,y:0}:t;dh.Z[$h]({...dh.Z[Cv],zoomScale:i,panOffset:o})},this.handleWheel=e=>{const{[Sv]:t,panOffset:i}=dh.Z[Cv];t&&(e[Eh](),e.ctrlKey?e.deltaY?this[Rh](e.deltaY*Bv.TRACK_PAD_SCALE):e.deltaX&&this[Rh](e.deltaX*Bv.TRACK_PAD_SCALE):e.metaKey?e.deltaY?this[Rh](e.deltaY*Bv.MOUSE_WHEEL_SCALE):e.deltaX&&this[Rh](e.deltaX*Bv.MOUSE_WHEEL_SCALE):this.canPan()&&this.setPanOffset({x:i.x-e.deltaX,y:i.y-e.deltaY}))},this[Jh]=e=>{const{panOffset:t,zoomScale:i}=dh.Z[Cv];dh.Z[$h]({...dh.Z[Cv],panStartPosition:{x:e.clientX/i-t.x,y:e.clientY/i-t.y},skipAnimations:!0})},this[Qh]=()=>{dh.Z[$h]({...dh.Z[Cv],skipAnimations:!1})},this[jh]=e=>{const{panStartPosition:t,zoomScale:i}=dh.Z[Cv];this.contentDimensions[Cv]&&1===e.buttons&&this.canPan()&&this.setPanOffset({x:e.clientX/i-t.x,y:e.clientY/i-t.y})},this.handleDownload=e=>{const{block:t,imageUrl:i}=dh.Z[Cv];if(!t||!this.canDownload())return;dh.Z[$h]({...dh.Z[Cv],isSaving:!0}),this[Gh]();const o=null==t?void 0:t[Dh]();let n;if(n=i||ci.getText(null==o?void 0:o[Bh]),!n)return;const a=ci.getText(null==o?void 0:o.caption);(0,Ji.downloadImage)(n,null==t?void 0:t.pointer,Xi.default[Ah],this[Mv][xh].id,a).then((()=>{dh.Z[$h]({...dh.Z[Cv],isSaving:!1}),be[Uh](this[Mv],{type:"download",triggered_by:"click"}),this[dv]()}))},this.handleKeypress=e=>{switch(e.key){case"+":case"=":this.handleZoomIn(!0);break;case"-":case"_":this.handleZoomOut(!0)}}}didMount(){super.didMount(),window[bv]("resize",this.handleResize)}willUnmount(){super.willUnmount(),window[yv]("resize",this.handleResize),window[yv]("wheel",this.handleWheel),this[Av]=!1}renderComponent(){const{[Sv]:e,fullscreenNodeAnimationComplete:t,backgroundAnimationComplete:i}=dh.Z[Cv];return n()(np.Z,{open:e||!t||!i},void 0,this[wv]())}getAllImageBlocksOnPage(){const e=Te.default.getCurrentRootStore();return lh.R[_h]({filter:t=>t instanceof uh.Z&&Boolean(t.props.store[Fh]((t=>Boolean(e&&t===e))).ancestor)}).map((e=>e.props.store)).filter((e=>Boolean(e[Dh]()[Bh])))}renderBottomBar(){const{[Sv]:e}=dh.Z[Cv];if(!this[Mv].device.isMobile)return n()(ch.Z,{[rv]:this[Pv][Cv],enterAnimationStyle:{[gv]:1},exitAnimationStyle:{[gv]:0},animationStyle:{[gv]:1},[sv]:()=>n()("div",{[lv]:this.getBottomContainerStyle(e),[Hh]:e=>{this.cancelBackgroundClick(e),this[dv](),this[zh]()}},void 0,n()("div",{[lv]:{...Bv.controlBarStyle,[Ih]:10}},void 0,this.renderPrevNextButtons()),n()("div",{[lv]:Bv.controlBarStyle},void 0,this.renderZoomControls(),this.renderVerticalLine(),this.canDownload()?a[qh](a[Ph],null,this.renderDownloadButton(),this.renderVerticalLine()):void 0,this.renderCloseButton()))})}renderZoomControls(){const{zoomScale:e}=dh.Z[Cv],t=(100*e).toFixed(0);return n()("div",{[lv]:{[Th]:Yh,[nv]:ov,[hv]:"100%",justifySelf:Zh}},void 0,n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{id:"fullScreenRenderer.zoomOut",[kh]:"Zoom out"}),secondaryText:"-"}),disableTooltip:e<=Bv.MIN_ZOOM,[sv]:t=>a[qh](Ui.Z,ht()({},t,{[Sh]:e<=Bv.MIN_ZOOM,[lv]:{...this[Mh](e<=Bv.MIN_ZOOM),...Bv.firstButtonPadding},[Hh]:()=>this.handleZoomOut(),icon:e=>si.Z.minus({...e,fill:this[wh](),[hv]:16,margin:0,[Zv]:16})}))}),this[Fv][Cv]?n()(Dv,{initialValue:t,onSubmit:this.handleZoomInputSubmit,onCancel:this[zh],primaryColor:this[wh](),secondaryColor:this[bh]()}):n()(Ui.Z,{[Hh]:e=>{e[Kh](),this.enableZoomEditing()},[lv]:{color:this[bh](),margin:0,[Zv]:46,[yh]:0,[Xh]:Yh}},void 0,`${t}%`),n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{id:"fullScreenRenderer.zoomIn",[kh]:"Zoom in"}),secondaryText:"+"}),disableTooltip:e>=Bv[Lh],[sv]:t=>a[qh](Ui.Z,ht()({},t,{[Sh]:e>=Bv[Lh],[lv]:this[Mh](e>=Bv[Lh]),[Hh]:()=>this.handleZoomIn(),icon:e=>si.Z.plus({...e,fill:this[wh](),[hv]:16,margin:0,[Zv]:16})}))}))}renderPrevNextButtons(){const{block:e}=dh.Z[Cv],t=this.getAllImageBlocksOnPage(),i=(null==t?void 0:t[Wh])??0,o=(null==t?void 0:t.findIndex((t=>t===e)))??-1;return i<=1||o<0?n()("div",{}):a[qh](a[Ph],null,n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{id:"fullScreenRenderer.previous",[kh]:"Back"}),secondaryText:this[fh](o-1,i)}),disableTooltip:0===o,[sv]:e=>a[qh](Ui.Z,ht()({},e,{[Sh]:o<=0,[lv]:{...this[Mh](o<=0),...Bv.firstButtonPadding},[hh]:Bv[vh],[Hh]:()=>this.handlePrevious(),icon:e=>si.Z.arrowLeft({...e,fill:this[wh](),[hv]:16,margin:0,[Zv]:16})}))}),n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{id:"fullScreenRenderer.next",[kh]:"Next"}),secondaryText:this[fh](o+1,i)}),disableTooltip:o+1===i,[sv]:e=>a[qh](Ui.Z,ht()({},e,{[Sh]:o>=i-1,[lv]:{...this[Mh](o>=i-1),...Bv.lastButtonPadding},[hh]:Bv[vh],[Hh]:()=>this.handleNext(),icon:e=>si.Z.arrowRight({...e,fill:this[wh](),[hv]:16,margin:0,[Zv]:16})}))}))}renderDownloadButton(){const{isSaving:e}=dh.Z[Cv];return n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{id:"fullScreenRenderer.download",[kh]:"Download"})}),[sv]:t=>a[qh](Ui.Z,ht()({},t,{[Sh]:e,[Hh]:this.handleDownload,[lv]:this[Mh](!1),[hh]:Bv[vh]}),e?n()(Oi.Z,{[lv]:{[Zv]:16}}):si.Z.download({fill:this[wh](),[Zv]:16}))})}renderCloseButton(){return n()(Us.Z,{[Ch]:()=>this[Ch]({primaryText:n()(k.FormattedMessage,{[kh]:"Close",id:"fullscreenRenderer.closeButton.label"}),secondaryText:"esc"}),[sv]:e=>a[qh](Ui.Z,ht()({},e,{[Hh]:()=>this[mv](),[lv]:{...this[Mh](!1),...Bv.lastButtonPadding},[hh]:Bv[vh],icon:e=>si.Z.collapse({...e,fill:this[wh](),[hv]:16,margin:0,[Zv]:16})}))})}[fh](e,t){return n()(k.FormattedMessage,{values:{currentIndex:e+1,totalCount:t},[kh]:"{currentIndex} of {totalCount}",id:"fullscreenRenderer.imageCount.label"})}[Ch](e){const{primaryText:t,secondaryText:i}=e;return a[qh](a[Ph],null,n()("span",{[lv]:{[Ih]:i?4:void 0}},void 0,t),i?n()("span",{[lv]:{color:this[bh]()}},void 0,i):void 0)}renderVerticalLine(){return n()("span",{[lv]:{borderLeft:`1px solid ${oh.ZP[gh](.25)}`,[hv]:"100%"}})}scrollToZoomFocus(e){const t=window[fv]/2,i=window[vv]/2,o=e.scrollWidth*this.zoomFocusPercentageX,n=e.scrollHeight*this.zoomFocusPercentageY;e.scrollLeft=o-t,e.scrollTop=n-i}resetControls(){this[Fv][$h](!1),dh.Z[$h]({...dh.Z[Cv],zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}})}canPan(){const{zoomScale:e}=dh.Z[Cv];return e>1}clampPanOffset(e){const t=this.contentDimensions[Cv];if(!t)return;let i,o;i=t[Zv]*Bv[Lh]>window[fv]?(t[Zv]*Bv[Lh]-window[fv])/(2*Bv[Lh]):(window[fv]-t[Zv]*Bv[Lh])/(2*Bv[Lh]),o=t[hv]*Bv[Lh]>window[vv]?(t[hv]*Bv[Lh]-window[vv])/(2*Bv[Lh]):(window[vv]-t[hv]*Bv[Lh])/(2*Bv[Lh]);return{x:Math.min(Math.max(e.x,-1*i),i),y:Math.min(Math.max(e.y,-1*o),o)}}setPanOffset(e){const{panStartPosition:t}=dh.Z[Cv],i=this.clampPanOffset(e);i&&(e.x!==i.x&&(t.x=t.x+(e.x-i.x)),e.y!==i.y&&(t.y=t.y+(e.y-i.y)),dh.Z[$h]({...dh.Z[Cv],panOffset:i,panStartPosition:t}))}canDownload(){var e;const{block:t,imageUrl:i}=dh.Z[Cv];return t&&(i||(null===(e=t[Dh]())||void 0===e?void 0:e[Bh])&&ci.getText(t[Dh]()[Bh]))}moveToImageOffset(e){let t=arguments[Wh]>1&&void 0!==arguments[1]&&arguments[1];const{block:i}=dh.Z[Cv],o=this.getAllImageBlocksOnPage();if(!o)return;const n=o.findIndex((e=>e===i));if(n+e<0||n+e>=o[Wh])return;be[Uh](this[Mv],{type:e>0?"next":"previous",image_count:o[Wh],image_index:n+e,triggered_by:t?"keypress":"click"}),dh.Z[$h]({...dh.Z[Cv],skipAnimations:!0}),this[_v]&&clearTimeout(this[_v]),this[_v]=setTimeout((()=>{dh.Z[$h]({...dh.Z[Cv],skipAnimations:!1})}),250);const a=o[n+e];nh.fullScreen({blocks:[a]}),this.resetControls()}[av](){return{stiffness:100,damping:10,precision:.001}}[cv](e){const{[Sv]:t}=e;return{zIndex:wm.overlayContainer,position:"fixed",top:0,left:0,right:0,bottom:0,[nv]:ov,[Xh]:Yh,[Th]:Yh,pointerEvents:t?"auto":pv,[iv]:this[Pv][Cv]?void 0:pv}}getBackgroundStyle(){return{position:"absolute",top:0,left:0,right:0,bottom:0,[ph]:oh.ZP.black}}getBottomContainerStyle(e){return{bottom:30,[nv]:e?ov:pv,fontSize:14,left:"50%",lineHeight:1.2,position:"absolute",transform:"translate(-50%, 0)"}}[wh](){return oh.ZP.white}[bh](){return oh.ZP[gh](.5)}[Mh](e){return{[mh]:4,[gv]:e?.4:1,[yh]:6}}}function Dv(e){window.__c={n:"ZoomInput"};const[t,i]=(0,a.useState)(e.initialValue);return n()(Ut.Z,{[lv]:{[Zv]:46,color:e.primaryColor},inputStyle:{textAlign:Yh,border:"solid 1px rgba(45, 156, 219, 0.72)",[mh]:3,boxShadow:"0px 0px 0px 3px rgba(45, 156, 219, 0.2)"},[Hh]:e=>e[Kh](),onChange:e=>{const t=e.target;i(t.value)},value:t,onSubmit:e.onSubmit,focusInitial:!0,selectAll:!0,format:Ut.B.Transparent,right:n()("span",{[lv]:{color:e.secondaryColor}},void 0,"%"),onKeyDown:t=>{t[Kh](),"Escape"===t.key?e.onCancel():"Tab"===t.key&&e.onSubmit(t)}})}Bv.displayName="FullScreenRenderer",Bv[Lh]=2,Bv.MIN_ZOOM=.5,Bv.ZOOM_STEP=.5,Bv[Nh]=1/Bv.ZOOM_STEP,Bv.ZOOM_THRESHOLD=.25,Bv.MOUSE_WHEEL_SCALE=-.002,Bv.TRACK_PAD_SCALE=-.004,Bv.controlBarStyle={[nv]:ov,[mh]:4,[ph]:oh.ZP.blackWithAlpha(.65)},Bv.firstButtonPadding={[yh]:"6px 6px 6px 10px"},Bv.lastButtonPadding={[yh]:"6px 10px 6px 6px"},Bv[vh]={[ph]:"rgba(255, 255, 255, 0.055)"};const Ev=Bv;var Lv=i(27830),Rv=i(36280),Nv=i(73959),Ov=i(89086),Uv=i(66949),Vv=i(3702);const Wv=i(85).D7I,Kv=i(85).AEq,zv=i(85).LEy,Gv=i(85).gzu,Hv=i(85).gz4,qv=i(85).tEG,jv=i(85).WH,Qv=i(85).XQm,Jv=i(85).Ubc,$v=i(85).wtr,Yv=i(85).Q0u,Xv=i(85).dnY,ef=i(85).RMz,tf=i(85).Fli,of=i(85).iDK,nf=i(85).rSD,af=i(85).LCr,sf=i(85).wgE,rf=i(85).Drs,lf=i(85).JJj,df=i(85).l6S,cf=i(85).QmD,uf=i(85).WCo,mf=i(85).C$B,pf=i(85).Dv6,gf=i(85).mPA;class hf extends w.Z{constructor(){super(...arguments),this[gf]=a[pf](),this[mf]=(e,t)=>{Uv.Z[uf]()&&Uv.Z.setState({...Uv.Z[cf],value:e,error:t})},this[df]=()=>{Ci[lf]({[rf]:"InlineEquationOverlay.handleSubmit",[sf]:this[sf],perform:e=>{Rv.gt({[sf]:this[sf],equationStore:Uv.Z,[af]:e})}})},this[nf]=()=>{Rv.Wj()},this.handleLeft=e=>{if(!this[gf][of])return;const t=this[gf][of][tf]();t&&"altKey"in e&&!e[ef]&&"shiftKey"in e&&!e[Xv]&&0===t[Yv]&&0===t[$v]&&(this[df](),Rv.Wj(Uv.P.Backward))},this.handleRight=e=>{if(!Uv.Z[uf]())return;if(!this[gf][of])return;const t=this[gf][of][tf]();if(!t)return;const i=Uv.Z[cf].value.length;"altKey"in e&&!e[ef]&&"shiftKey"in e&&!e[Xv]&&t[Yv]===i&&t[$v]===i&&(this[df](),Rv.Wj())},this[Jv]=()=>{var e;if("editing"!==Xp.default[cf].mode&&!Uv.Z[uf]())return!0;const t=Uv.Z[uf]()?null===(e=(0,Jp.QY)(Uv.Z[cf][jv][Qv]))||void 0===e?void 0:e.store:void 0;if(t&&!t.canEdit())return!0;if(t){const e=(0,Nv.J2)(t);if(e&&e.isLocked())return!0}const i={[ci.annotationType.User]:ci.annotationType.User,[ci.annotationType.Page]:ci.annotationType.Page,[ci.annotationType.Comment]:ci.annotationType.Comment,[ci.annotationType.Bot]:ci.annotationType.Bot,[ci.annotationType.Date]:ci.annotationType.Date,[ci.annotationType[qv]]:ci.annotationType[qv],[ci.annotationType.TemporaryPage]:ci.annotationType.TemporaryPage,[ci.annotationType[Hv]]:ci.annotationType[Hv],[ci.annotationType[Gv]]:ci.annotationType[Gv],[ci.annotationType[zv]]:ci.annotationType[zv],[ci.annotationType[Kv]]:ci.annotationType[Kv],[ci.annotationType.Group]:ci.annotationType.Group};for(const o of Object.values(i))if((0,Ov.J6)(o))return!0;return!1},this.INPUT_ORIGIN_GAP_PX=8}renderComponent(){if(!Uv.Z[uf]())return;const e=!Uv.Z[uf](),t=this[Jv](),i=this.getInputOriginRect(),o=Uv.Z[cf].value,s=Uv.Z[cf].error;return n()(c.DependencyConsumer,{dependency:c.deps.prismjs},void 0,(n=>{if(!e)return a[Wv](Vv.Z,{Prism:n,ref:this[gf],[uf]:!0,equationValue:o,error:s,displayMode:"inline",disabled:t,originRect:i,originGap:this.INPUT_ORIGIN_GAP_PX,onDismiss:this[nf],onChange:this[mf],onSubmit:this[df],onLeft:this.handleLeft,onRight:this.handleRight})}))}getInputOriginRect(){if(Uv.Z[uf]())return Uv.Z[cf].savedTextSelectionRect}}hf.displayName="InlineEquationOverlay";const vf=hf;var ff=i(84908),yf=i(94416);const bf=i(85).PR5,Sf=i(85).MkE,wf=i(85).rSD,Mf=i(85).Wp_;class kf extends w.Z{constructor(){super(...arguments),this.handleOpen=()=>{yf.Z[Mf]({open:!0})},this[wf]=()=>{yf.Z[Mf]({open:!1})}}willMount(){ff[Sf].started.addListener(this.handleOpen),ff[Sf].stopped.addListener(this[wf])}willUnmount(){ff[Sf].started[bf](this.handleOpen),ff[Sf].stopped[bf](this[wf])}}kf.displayName="InPageSearchListener";const Cf=kf;var Zf=i(96313),Tf=i(73744),Pf=i(70726),If=i(48863),Ff=i(33411);const _f=i(85).nx5,xf=i(85)._lc,Af=i(85).GGR,Bf=i(85).W_R,Df=i(85).cNm,Ef=i(85).D7I,Lf=i(85).jkI,Rf=i(85).UPJ,Nf=i(85).VFs,Of=i(85).Z97,Uf=i(85).QmD,Vf=i(85).q5h,Wf=i(85).wgE,Kf=i(85).mEk;function zf(e){switch(e){case Pf.Z.Preview:return n()(k.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsPreview.title",[_f]:"Paste as preview"});case Pf.Z.Mention:return n()(k.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsMention.title",[_f]:"Paste as mention"});case Pf.Z.Link:return n()(k.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsLink.title",[_f]:"Paste as link"});default:(0,mi.unreachable)(e)}}const Gf=function(){window.__c={n:"InternalUnfurlingMenu"};const e=(0,r.O7)(),t=(0,a.useRef)(null),[i]=(0,l.AF)(If.Z),o=(0,a.useCallback)((t=>{if(i.open){var o;if(!t)Zf.pg({[Kf]:i.focusedIndex,[Wf]:e,[Vf]:null===(o=i.args[Vf])||void 0===o?void 0:o[Uf],useTempStores:!1});If.Z.setState({open:!1})}}),[e,i]),s=(0,a.useCallback)((e=>{i.open&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&o(void 0)}),[o,i.open]),d=(0,a.useCallback)((e=>{const n=t.current;if(!i.open||!e.target||!n)return;const a=Vi.findDOMNode(n);a&&(a.contains(e.target)||o(void 0))}),[o,i.open]);(0,a.useEffect)((()=>((0,Tf.addPassiveEventListener)(window,"keydown",s),(0,Tf.addPassiveEventListener)(window,Of,d),()=>{(0,Tf.removePassiveEventListener)(window,"keydown",s),(0,Tf.removePassiveEventListener)(window,Of,d)})),[s,d]);const c=(0,a.useRef)(!1);function u(t){var o;i.open&&void 0!==t[Nf]&&(If.Z.setState({...i,focusedIndex:t[Nf]}),Zf.pg({[Kf]:t[Nf],[Wf]:e,[Vf]:null===(o=i.args[Vf])||void 0===o?void 0:o[Uf],useTempStores:!0}))}(0,l.VK)((()=>{var t,o;const n=(i.open&&(null===(t=i.args[Vf])||void 0===t?void 0:t[Uf])&&(null===(o=i.args[Vf][Uf])||void 0===o?void 0:o.isReady()))??!1;var a;n&&!c.current&&i.open&&Zf.pg({[Kf]:i.focusedIndex,[Wf]:e,[Vf]:null===(a=i.args[Vf])||void 0===a?void 0:a[Uf],useTempStores:!0});c.current=n}),[e,i]);const m=(0,l.VK)((()=>e.device.isMobileNative&&!e.device.isTablet),[e]),p=e.device.isMobile;return n()(re.ZP,{popupType:m?re.ZP[xf].SlideUp:re.ZP[xf].Popup,open:i.open,originRect:i.open?i.selectionRect:void 0,placementToOrigin:re.ZP.Placement.Top,alignmentToOrigin:re.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:p,keepFocus:p,render:function(){var o;const{device:s}=e;if(!i.open)return;const r=function(t){const{url:i,args:o}=t,n=[];n.push({title:zf(Pf.Z.Preview),[Df]:()=>!0,type:Pf.Z.Preview}),n.push({title:zf(Pf.Z.Mention),[Df]:()=>!0,type:Pf.Z.Mention}),n.push({title:zf(Pf.Z.Link),[Df]:()=>!0,type:Pf.Z.Link});return[{key:"menu section",render:e=>a[Ef](xe.Z,e),items:fe().compact(n.map((t=>{let{title:n,[Df]:s,type:r}=t;if(s({url:i,baseUrl:Xi.default.domainBaseUrl,[Bf]:Xi.default[Bf]})){return{key:`item ${r}`,render:t=>a[Ef](wt.Z,ht()({},t,{title:n,[Af]:i=>{var n;t[Af](i),Zf.pg({[Kf]:r,[Wf]:e,[Vf]:null===(n=o[Vf])||void 0===n?void 0:n[Uf],useTempStores:!0})}})),action:()=>{var t;return Zf.pg({[Kf]:r,[Wf]:e,[Vf]:null===(t=o[Vf])||void 0===t?void 0:t[Uf],useTempStores:!1})}}}})))}]}(i);let l;return l=s.isMobile?{menuType:Z.og.ActionSheet}:{menuType:Z.og.Popup,width:320,maxHeight:"40vh"},null!==(o=i.args[Vf])&&void 0!==o&&o[Uf]&&i.args[Vf][Uf].isReady()?a[Ef](A.Z,ht()({},l,{className:yt.embedMenu,ref:t}),n()(Mt.Z,{type:Mt.i.Vertical,sections:r,onKeyboardArrow:u,initialFocus:0,priority:1,disallowBackspace:!0})):n()(Ff.Z,{show:!0,showDelay:500,showHold:0,render:()=>a[Ef](A.Z,ht()({},l,{className:yt.embedMenu,ref:t}),n()(xe.Z,{style:{display:"flex",[Rf]:Lf}},void 0,n()(Oi.Z,{})))})},onDismiss:()=>o(void 0)})};var Hf=i(64572),qf=i(88295),jf=i(45990),Qf=i(21325),Jf=i(48709),$f=i(23210),Yf=i(64921),Xf=i(31278),ey=i(76798);const ty=i(85).PXg,iy=i(85).L_E;function oy(e){window.__c={n:"RecordButton"};const{store:t,onClick:i}=e,o=(0,r.O7)(),a=(0,r.MO)(),s=(0,l.VK)((()=>t.getIcon()),[t]),d=(0,l.VK)((()=>t instanceof Ze.G&&t.isEmptyPage()),[t]),c=(0,ii.yK)((e=>({[iy]:{display:"flex",alignItems:"center",padding:"4px 6px",marginLeft:12,[ty]:12,borderRadius:3,boxShadow:e.inputBoxShadow,background:e.inputBackground,height:28,fontSize:14,lineHeight:"120%"},phoneContainer:{display:"flex",alignItems:"center",padding:"4px 16px",boxShadow:`${e.regularDividerColor} 0px 1px 0px`,background:e.modalBackground,height:46}})),[]);return n()(Yf.Z,{style:a?c.phoneContainer:c[iy],onClick:i},void 0,n()(Xf.Z,{disabled:!0,icon:s,isEmptyPage:d,size:o.device.isMobile?24:20,style:{[ty]:4}}),n()(ey.Z,{store:t}))}var ny=i(23178);const ay=i(85).nx5,sy=i(85).Yzm;function ry(e){window.__c={n:"LinkMenuInput"};const{state:t,focusInitial:i,defaultValue:o,onBlur:a,onKeyDown:s,style:l}=e,d=(0,r.MO)(),c=(0,k.useIntl)(),u=c[sy]({[ay]:"Paste link or search pages",id:"selectionLinkButton.search.createNewLinkPlaceholder"}),m=c[sy]({[ay]:"Edit link or search pages",id:"selectionLinkButton.search.editLinkPlaceholder"}),p=!d||!t.showCreateIn,g=d?void 0:!t.showCreateIn&&t.focusLinkInput,h=t.editingToken?m:u;return p?n()(_e.ZP,{onFocus:Jf.FV,placeholder:h,value:o||t.url,onChange:ly,onBlur:a,onKeyDown:s,focus:g,focusInitial:i,focusAfterAnimation:!0,preventCaptureArrowShortcuts:!0,style:l}):null}const ly=e=>{const t=ny.Z.state;t.open&&ny.Z.setState({...t,url:e.target.value,focusLinkInput:!0})};function dy(e){window.__c={n:"LinkMenuInputWithPreview"};const{state:t,showPreview:i,store:o}=e,a=(0,r.MO)(),s=(0,Jf.Fs)(t),{editingToken:l,focusTitleInput:d}=t;return i&&o?n()(oy,{store:o,onClick:Jf.FV}):n()(ry,{state:t,onBlur:Jf.cX,onKeyDown:cy,defaultValue:i?s:void 0,style:l?void 0:{marginTop:6},focusInitial:!Boolean(l)||a&&!d})}const cy=e=>{"Escape"===e.key&&(e.stopPropagation(),(0,Jf.hy)())},uy=i(85).WH,my=i(85).Mm1,py=i(85).wgE;function gy(e){window.__c={n:"LinkMenuTitleInput"};const{title:t,focus:i,defaultTitle:o}=e,s=(0,r.O7)(),l=(0,r.MO)(),[d,c]=(0,a.useState)(),u=(0,a.useRef)(!1),m=(0,a.useMemo)((()=>({[py]:s,defaultTitle:o,setPlaceholder:c,hasTitleChanged:u})),[o,s]);return(0,a.useEffect)((()=>{const e=u.current;return()=>{e&&be.trackLinkTitleEditAction(s)}}),[u,s]),n()(_e.ZP,{focus:i,focusInitial:l,onFocus:fy,onBlur:()=>yy(m),onChange:e=>hy(e,m),onKeyDown:e=>by(e,m),value:d?"":t,placeholder:d,preventCaptureArrowShortcuts:!0,style:{[my]:8}})}const hy=(e,t)=>{vy(e.target.value,t)},vy=(e,t)=>{const i=ny.Z.state;if(!i.open)return;const{editingToken:o,[uy]:n}=i;if(!o)return;if(!e)return void ny.Z.setState({...i,title:""});const{[py]:a,setPlaceholder:s,hasTitleChanged:r}=t;Ci.createAndCommit({userAction:"LinkMenu.updateTitle",[py]:a,perform:t=>{const l=jf.updateTitle({[py]:a,title:e,transaction:t,editingToken:o,[uy]:n});l&&ny.Z.setState({...i,...l,title:e}),s(void 0),r.current=!0}})},fy=()=>{(0,Jf.ZG)(!0)},yy=e=>{Sy(e),(0,Jf.ZG)(!1)},by=(e,t)=>{"Enter"!==e.key&&"Escape"!==e.key||(e.stopPropagation(),yy(t))},Sy=e=>{const t=ny.Z.state;if(!t.open)return;const{defaultTitle:i,setPlaceholder:o}=e;t.title||(vy(i,e),o(i))};var wy=i(88632),My=i(18466),ky=i(11470),Cy=i(15447);const Zy=i(85).hF9,Ty=i(85).QLQ,Py=i(85).u1T,Iy=i(85).uJR,Fy=i(85).nx5,_y=i(85).dj8,xy=i(85).WH;const Ay=i(85).nx5;const By=i(85).WH,Dy=i(85).D7I,Ey=i(85).nx5,Ly=i(85).rpY,Ry=i(85).veP,Ny=i(85).W_R,Oy=i(85).QmD;function Uy(e){const{[Oy]:t}=e,i=(0,a.useMemo)((()=>(0,Jf.uP)(t)),[t]),o=(0,a.useMemo)((()=>(0,Jf.dY)(i)),[i]),s=function(e){const{[Oy]:t,inputUrl:i,query:o,handleLinkSelection:s}=e,{url:d}=t,c=(0,r.O7)(),u=(0,r.MO)(),m=(0,l.VK)((()=>wy.Z[Oy].online),[]),p=!!d;return(0,a.useMemo)((()=>{let e,r=!1;if(!i&&p)e=n()(k.FormattedMessage,{[Ey]:"Type a complete URL to link",id:"selectionLinkButton.invalidUrl"}),r=!0;else{if(!i)return;if("notion"===i.type&&m)return;"web"===i.type?e=n()(k.FormattedMessage,{id:"selectionLinkButton.linkToWebPage",[Ey]:"Link to web page"}):"notion"===i.type?e=n()(k.FormattedMessage,{id:"selectionLinkButton.linkToPage",[Ey]:"Link to page"}):"other"===i.type?e=n()(k.FormattedMessage,{id:"selectionLinkButton.linkToURL",[Ey]:"Link to URL"}):(0,mi.unreachable)(i.type)}return{key:"link to url",action:()=>s(c,t,o,u),[Ly]:t=>a[Dy](wt.Z,ht()({},t,{title:d,caption:e,icon:si.Z.globe2({width:16,paddingTop:4}),disabled:r}))}}),[t,o,c,u,m,i,s,p,d])}({[Oy]:t,inputUrl:o,query:i,handleLinkSelection:Vy}),d=function(e){const{[Oy]:t,inputUrl:i,query:o,additionalItem:s}=e,{editingToken:d}=t,c=function(e){const{state:t,inputUrl:i,query:o,handleLinkSelection:s,disableEmptyQueryResults:d}=e,{[xy]:c}=t,u=(0,r.O7)(),m=(0,r.MO)(),[{online:p}]=(0,l.AF)(wy.Z),g=(0,a.useMemo)((()=>{var e;const t=null===(e=(0,Jp.QY)(c.multiSelection))||void 0===e?void 0:e.store;if(t&&(0,T.isBlockStore)(t))return t}),[c]),[{value:h,status:v}]=(0,Es.r5)((async()=>p?o?(await Ln.searchMentionablePages({nearBlock:g,environment:u,query:o,source:"mention_menu",limit:10})).map((e=>e.id)):d?[]:Cy.X4.state.map((e=>e.pageId)):[]),[o,g,u,p,d]),f=(0,a.useMemo)((()=>{if(i&&"notion"===i.type){const e=h?fe().without(h,i[_y].blockId):[];return[i,...e]}return h}),[h,i]);return(0,a.useMemo)((()=>{if(!f||0===f.length)return;if(i&&"web"===i.type&&i.url===o)return;const e=My.Z.withListenerIgnored(Ti.getCurrentRootStore);if(!e)return;const r=t.url?5:3,l=n()(k.FormattedMessage,{id:"selectionLinkButton.linkToPage.linkToBlock",[Fy]:"Link to block"}),d=n()(k.FormattedMessage,{[Fy]:"Link to page",id:"selectionLinkButton.linkToPageSection.title"});return{items:f.map(((i,o)=>{const r="object"==typeof i?i[_y][Iy]||i[_y].blockId:i,d=Ze.G.createChildStore(e,{table:ri.iU,id:r});return{key:o,action:()=>{if("object"==typeof i){const e=(0,Hf.nR)({pageId:i[_y].blockId,[Iy]:i[_y][Iy],peekMode:i[_y].peekMode,[Py]:i[_y][Py],[Ty]:i[_y][Ty],[Zy]:i[_y][Zy]});s(u,t,e,m)}else s(u,t,(0,Hf.nR)({pageId:r}),m)},render:e=>{const t="object"==typeof i&&i[_y][Zy];return a.createElement(ky.Z,ht()({},e,{store:d,caption:t?l:void 0,placeholder:n()(Ff.Z,{showHold:300,showDelay:300,show:"resolved"===v,render:e=>n()(k.FormattedMessage,e?{id:"selectionLinkButton.linkToPage.unknownBlock",[Fy]:"Unknown block"}:{id:"selectionLinkButton.linkToPage.loading",[Fy]:"Loading..."})})}))}}})).slice(0,r),title:f.some((e=>Boolean("object"==typeof e&&e[_y][Zy])))?l:d}}),[f,t,u,m,o,i,v,s])}({[Oy]:t,inputUrl:i,query:o,handleLinkSelection:Vy,disableEmptyQueryResults:!!d});return(0,a.useMemo)((()=>{if(c||s){return{key:"results",items:fe().compact([...(null==c?void 0:c.items)||[],s]),[Ly]:e=>a[Dy](xe.Z,ht()({},e,{title:d||o?void 0:n()(k.FormattedMessage,{id:"selectionLinkButton.recents.title",[Ey]:"Recents"})}))}}}),[c,s,d,o])}({[Oy]:t,inputUrl:o,query:i,additionalItem:s}),c=(0,Jf.Fs)(t),u=c&&(0,Hf.A5)({url:c,baseUrl:Xi.default.domainBaseUrl,[Ny]:Xi.default[Ny]}),m=(0,l.VK)((()=>{if(!u)return;const e=(0,Ti.getCurrentRootStore)();return e?Ze.G.createChildStore(e,{table:ri.iU,id:u}):void 0}),[u]),p=function(e){const{[Oy]:t,url:i,isEmptyResults:o,[Ry]:s}=e;return(0,a.useMemo)((()=>{let e=n()(k.FormattedMessage,{[Ey]:"Page or URL",id:"selectionLinkButton.currentInfo.pageOrUrl"});const r=!t.focusLinkInput&&o;let l;return s?l={key:"link to page",action:()=>{},[Ly]:()=>n()(dy,{[Oy]:t,showPreview:r,store:s})}:i?l={key:"link to web",action:()=>{},[Ly]:()=>n()(dy,{[Oy]:t,showPreview:!0})}:(e=void 0,l={key:"create link",action:()=>{},[Ly]:()=>n()(dy,{[Oy]:t,showPreview:r})}),{key:"page or url",[Ly]:t=>a[Dy](xe.Z,ht()({title:e},t)),items:[l]}}),[t,i,o,s])}({[Oy]:t,url:c,isEmptyResults:!Boolean(d),[Ry]:m}),g=function(e){const{[Oy]:t,url:i,[Ry]:o}=e,{editingToken:s,title:r,focusTitleInput:d}=t,c=(0,l.VK)((()=>o?ci.getText(o.getTitleValue()):void 0),[o]);return(0,a.useMemo)((()=>{if(s)return{key:"link title",[Ly]:e=>a[Dy](xe.Z,ht()({title:n()(k.FormattedMessage,{[Ey]:"Link title",id:"selectionLinkButton.currentInfo.linkTitle"})},e)),items:[{key:"update title",action:()=>{},[Ly]:()=>n()(gy,{title:r,defaultTitle:c??i,focus:d})}]}}),[s,r,d,i,c])}({[Oy]:t,url:c,[Ry]:m}),h=function(e){const{[Oy]:t}=e,i=function(e){const{state:t}=e,i=(0,r.O7)();return(0,a.useMemo)((()=>{if(t.editingToken)return{key:"unlink",action:()=>{jf.unlinkSelection(i);const e=(0,Jf.Fs)(t);be.trackLinkEditAction(i,{type:"remove_link",url:e})},render:e=>a.createElement(wt.Z,ht()({},e,{title:n()(k.FormattedMessage,{id:"selectionLinkButton.removeLink",[Ay]:"Remove link"}),icon:si.Z.trash({width:16})}))}}),[t,i])}({[Oy]:t});return(0,a.useMemo)((()=>{const e=fe().compact([i]);if(0!==e.length)return{key:"link actions",[Ly]:e=>a[Dy](xe.Z,ht()({topBorder:!0},e)),items:e}}),[i])}({[Oy]:t});let v,f;return d?(f=1,v=fe().compact([p,d])):(f=void 0,v=fe().compact([p,g,h])),{initialFocus:f,sections:v}}function Vy(e,t,i,o){const n=(0,$f.D)(i);if(!n)return;const{editingToken:a,[By]:s,title:r}=t;Ci.createAndCommit({userAction:"LinkMenu.handleLinkSelection",environment:e,perform:i=>{const l=jf.linkSelection({environment:e,transaction:i,url:n,title:r,editingToken:a,[By]:s});l?(be.trackLinkEditAction(e,{type:"edit_link",url:n}),ny.Z.setState({...t,...l,url:"",focusLinkInput:!1,focusTitleInput:Boolean(o)})):(be.trackLinkEditAction(e,{type:"create_link",url:n}),ny.Z.reset())}})}var Wy=i(23830);const Ky=i(85).wgE,zy=i(85).ZYq,Gy=i(85).D7I,Hy=i(85).t5q,qy=i(85).yKO,jy=i(85).Vyz,Qy=i(85)._lc,Jy=i(85).dLQ,$y=i(85).WH,Yy=i(85).E_3,Xy=i(85).XQm,eb=i(85).QmD;function tb(){window.__c={n:"LinkMenu"};const e=(0,l.VK)((()=>ny.Z[eb]),[]),t=(0,r.Fy)(),i=(0,l.VK)(d.bq,[]),o=(0,l.VK)((()=>{if(!e.open)return!1;if(e.focusLinkInput||e.focusTitleInput)return!1;const t=Xp.default[eb];if("editing"!==t.mode)return!0;const i=(0,Jp.QY)(t[Xy]);if(!i)return!0;const{store:o,selection:n}=i;return(0,Ov.wd)(n)?!ci[Yy](o.getValue(),n.startIndex,n.endIndex,ci.annotationType.Link):!(0,Jp._v)(t[Xy],e[$y][Xy])}),[e]);return(0,a.useEffect)((()=>{o&&jf.closeLinkAnnotationMenu()}),[o]),n()(re.ZP,{popupType:t[Jy]?t.isTablet?re.ZP[Qy].Popup:re.ZP[Qy].SlideUp:re.ZP[Qy].Popup,style:{width:rb(i)},keepFocus:t.isPhone,open:e.open,originRect:e.open?e.selectionRect:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,originGap:8,disableContentScroll:!0,onDismiss:jf.closeLinkAnnotationMenu,render:()=>e.open?n()(ib,{[eb]:e}):void 0,[jy]:!t[Jy]})}function ib(e){window.__c={n:"LinkMenuContent"};const{[eb]:t}=e,i=(0,r.MO)(),[o,s]=(0,a.useState)(!0);if((0,a.useEffect)((()=>s(!1)),[]),t.showCreateIn&&!i)return n()(nb,{[eb]:t});let l;return l=i?{menuType:Z.og.Modal,title:n()(k.FormattedMessage,{defaultMessage:"Link",id:"selectionLinkButton.mobile.title"}),right:n()(B.CancelMenuText,{}),onClickRight:jf.closeLinkAnnotationMenu,footer:n()(re.ZP,{popupType:re.ZP[Qy].SlideUp,open:t.showCreateIn||!1,render:()=>n()(nb,{[eb]:t})})}:{menuType:Z.og.Popup},n()(ji.Z,{capture:t.open&&(o||t.focusLinkInput||t.focusTitleInput),allowEsc:!0},void 0,a[Gy](A.Z,l,n()(Ri.Z,{capture:i&&!t.focusLinkInput&&!t.focusTitleInput,ignoreBlockSelection:!0,[qy]:!0,[Hy]:!0,render:()=>n()(ob,{[eb]:t,useMenuList:Uy})})),n()(x.Z,{capture:!0,onCommandSlash:Jf.FV}))}function ob(e){window.__c={n:"LinkMenuList"};const{[eb]:t,useMenuList:i}=e,{initialFocus:o,sections:a}=i({[eb]:t});return n()(Mt.Z,{type:Mt.i.Vertical,initialFocus:o,sections:a})}function nb(e){var t;window.__c={n:"LinkCreateInMenu"};const{[eb]:i}=e,o=(0,r.O7)(),s=(0,a.useCallback)((async e=>{var t;if(!Qf.validateCanCreate(o))return;const n=null===(t=(0,Jp.QY)(i[$y][Xy]))||void 0===t?void 0:t.store;if(!n)return;const{performResult:{createInState:a}}=await Ci[zy]({[Ky]:o,userAction:"LinkMenu.LinkCreateInMenu",waitForServerCommit:!0,perform:async t=>{const a=qf.f8({[Ky]:o,transaction:t,titleText:i.url||"",createInValue:e,recordStoreParent:n}),[s]=a.createdPages;return s&&(jf.linkSelection({[Ky]:o,url:(0,Hf.nR)({pageId:s.id}),transaction:t,editingToken:i.editingToken,[$y]:i[$y]}),ny.Z.reset()),await a.moveToStorePromise,{createInState:a}}});await qf.c_({analyticsFrom:"link_menu",createInState:a})}),[i,o]),c=null===(t=(0,Jp.QY)(i[$y][Xy]))||void 0===t?void 0:t.store,u=c&&"block"===c.table?c.id:void 0,m=(0,l.VK)(d.bq,[]);return n()(Wy.Z,{targets:[],isAddTo:!0,isCreateIn:!0,onAccept:s,captureSelection:!1,[qy]:!1,parentBlockId:u,onAutocompleteQueryChange:ab,autocompleteQuery:i.createInQuery||"",desktopWidth:rb(m),onCancel:sb})}function ab(e){const t=ny.Z[eb];t.open&&ny.Z.setState({...t,createInQuery:e})}function sb(){const e=ny.Z[eb];e.open&&ny.Z.setState({...e,showCreateIn:!1,createInQuery:""})}function rb(e){return e?400:330}var lb=i(91390),db=i(65792),cb=i.n(db),ub=i(79362),mb=i(91584),pb=i(96802),gb=i(34809),hb=i(5385);const vb="fileTypeAnyFiles",fb="fileTypeImages",yb="fileTypeVideos",bb="fileTypeNone";var Sb=i(4323),wb=i(21115);class Mb extends eo.default{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const kb=Mb;var Cb=i(78609);class Zb extends eo.default{getInitialState(){return{random_id:""}}}const Tb=Zb;var Pb=i(4391);const Ib=i(85).MHP,Fb=i(85).lp0,_b=i(85).XuB,xb=i(85).EHj,Ab=i(85).cZW;function Bb(e){window.__c={n:"AiSourcePickerQueryInput"};const{[Ab]:t,onSubmit:i}=e,o=(0,ii.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},[Ab]:{minHeight:60}})),[]),s=(0,a.useCallback)((e=>{if(i&&!e.shiftKey)i();else{if("editing"!==Xp.default.state.mode)return}}),[i]);return n()("div",{style:o.wrap,className:yt.focusableWithin},void 0,n()(vr.Z,{[Ab]:t,disabled:!1,store:e.store,style:o.text,placeholderStyle:o[Ab],pasteBehavior:"inline",[xb]:!0,disableEmbedMenu:!0,[_b]:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:s,disableMobileActionBar:!1,[Fb]:!0,[Ib]:!0}))}var Db=i(73657),Eb=i(6202);const Lb=i(85).g4H,Rb=i(85).K1V,Nb=i(85).tBn,Ob=i(85).D7I,Ub=i(85).nx5,Vb=i(85).cZW;function Wb(e){window.__c={n:"AiSourcePickerInputWrapper"};const{tab:t}=e,i=(0,r.O7)(),{store:o}=(0,_i.useMockTextStore)({initialValue:void 0,onChange:ve.identity}),l=(0,ii.yK)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:i.device.isMobile?"left":"center"}})),[i.device.isMobile]),d=(0,a.useCallback)((async()=>{const i=o.getValue();if(!i)return;const n=[];for(const e of i){var a;if("‣"===e[0]&&null!==(a=e[1])&&void 0!==a&&a.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;n.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:i}=p.default.state;if(!i)return{users:[],bots:[]};const o=Ze.U6.createChildStore(i,{table:En.KJ,id:t});await o.load();const a=o.getEmail();n.push(a||"")}}else n.push(e[0])}const s=n.join(""),r=t.integration;if(s){e.store.setState({...e.store.state,loading:!0});const i=await t.getResults(s,r);e.store.setState({...e.store.state,loading:!1,result:i.results})}}),[o,e.store,t]);return n()("div",{},void 0,n()(xe.Z,{desktopStyle:l.desktopStyle},void 0,n()(Bb,{[Vb]:e[Vb],onSubmit:d,store:o})),n()(xe.Z,{},void 0,n()(Eb.Z,{onClick:d,title:t.buttonText||s[Ob](s[Nb],null,n()(k.FormattedMessage,{[Ub]:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),n()("div",{},void 0,si.Z.sparkles(l.sparkleStyle))),fullWidth:e[Rb]})),t[Lb]&&n()(Db.Z,{shouldWrapCaption:!0,[Lb]:t[Lb],style:l.captionStyle}))}var Kb=i(42922),zb=i(55118);function Gb(e){let{type:t,dropTargetKey:i,children:o,dropzoneStyle:s,onDropFile:r}=e;window.__c={n:"FileDropTarget"};const d=(0,l.VK)((()=>p.default.state.currentSpaceStore),[]);if(!d)return a.createElement(a.Fragment,null,o);const c=e=>1===e.length&&function(e){let{fileMimeType:t,allowedType:i}=e;switch(i){case vb:return!0;case fb:return function(e){return e.startsWith("image")&&!e.includes("photoshop")}(t);case yb:return function(e){return e.startsWith("video")}(t);case bb:return!1;default:(0,mi.unreachable)(i)}}({allowedType:t,fileMimeType:e[0]}),u=e=>{let{files:t}=e;c(t.map((e=>e.type)))?r({type:"validFileDrop",file:t[0]}):r({type:"invalidFileDrop",file:t[0]})};return n()(D.Z,{store:d,droppable:!0,render:()=>n()(zb.G,{dropTargetKey:i,canNativeDropOnto:!0,onNativeDrop:u,keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,dropzoneStyle:s,canAcceptDrop:e=>e.isNativeDrag},void 0,o)})}var Hb=i(51077),qb=i(71669),jb=i(16354),Qb=i(62385),Jb=i(30506),$b=i(91718),Yb=i(43001),Xb=i(23321),eS=i(37181),tS=i(98742),iS=i(61766),oS=i(73063),nS=i(86825),aS=i(57670);const sS=i(85).$bT,rS=i(85).LlE,lS=i(85).Yjn,dS=i(85).X_m,cS=i(85).JgJ,uS=i(85).dLQ,mS=i(85).Joh,pS=i(85).rpY,gS=i(85).LtW,hS=i(85).Vyz,vS=i(85).wgE,fS=i(85).D7I,yS=i(85).a3v,bS=i(85).TWK,SS=i(85).ESK,wS=i(85).Yzm,MS=i(85).Ubh,kS=i(85).nx5,CS=(0,k.defineMessages)({selectSpecificIconColor:{[kS]:"Select icon color {iconColor}",id:"iconPickerColorPicker.selectSpecificColor"},selectIconColor:{[kS]:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{[kS]:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{[kS]:"no color",id:"iconPickerColorPicker.noColor"}});function ZS(){window.__c={n:"IconPickerColorPicker"};const e=(0,l.VK)((()=>{var e,t,i;return null===(e=p.default.state)||void 0===e||null===(t=e[MS])||void 0===t||null===(i=t.getSettings())||void 0===i?void 0:i.icon_picker_color}),[]),t=(0,k.useIntl)(),i=(0,r.O7)(),o=(0,ii.Fg)(),s=(0,r.Fy)(),d=(0,l.qz)(void 0,iS.Z);return n()(Us.Z,{[mS]:()=>t[wS](CS.selectIconColor),placement:Us.Z[SS].Bottom,[pS]:r=>n()(no.ZP,{[hS]:!0,[gS]:d,popupType:no.Z4.Popup,renderOrigin:i=>a[fS](_e.DO,ht()({ariaLabel:t[wS](CS.selectIconColorWithCurrentColor,{iconColor:t[wS](e?ub.ICON_COLOR_STRINGS[e]:CS.noIconColor)}),icon:t=>si.Z.colorPickerCircle({...t,stroke:e?ub.IconColorVariationsMap[o.mode][e]:ub.IconColorVariationsMap[o.mode][bS],fill:e?ub.IconColorVariationsMap[o.mode][e]:o[yS]})},(0,tS.Z)(i,r))),[pS]:r=>function(e){const{parent:t,[vS]:i,currentIconPickerColor:o,theme:s,device:r,intl:l}=e,d=ub.IconColorVariations.map((e=>({key:e,action:o=>{t.close(),TS({[vS]:i,color:e})},[pS]:t=>n()(Us.Z,{[mS]:()=>l[wS](ub.ICON_COLOR_STRINGS[e]),placement:Us.Z[SS].Bottom,[pS]:i=>a[fS](oS.Z,ht()({},(0,tS.Z)(i,t),{ariaLabel:l[wS](CS.selectSpecificIconColor,{iconColor:l[wS](ub.ICON_COLOR_STRINGS[e])}),style:{...r[uS]?{width:aS.Z[cS],[dS]:aS.Z[cS]}:{width:aS.Z[lS],[dS]:aS.Z[lS]}},icon:t=>si.Z.colorPickerCircle({...t,[dS]:r[uS]?18:14,width:r[uS]?18:14,stroke:ub.IconColorVariationsMap[s.mode][e],fill:ub.IconColorVariationsMap[s.mode][e]})}))})})));return d.push({key:"askEveryTime",action:()=>{t.close(),TS({[vS]:i,color:void 0})},[pS]:e=>a[fS](nS.Z,ht()({},e,{title:n()(k.FormattedMessage,{id:"iconPickerColorPicker.askEveryTime",[kS]:"Ask every time"}),onClick:()=>{TS(void 0!==o?{[vS]:i,color:void 0}:{[vS]:i,color:"gray"})},on:void 0===o,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:r[uS]?10:6},rightStyle:{marginRight:4}}))}),n()(ji.Z,{capture:!0,allowEsc:!0},void 0,n()(Mt.Z,{type:Mt.i.Grid,itemsPerRow:5,initialFocus:o?Math.max(ub.IconColorVariations.indexOf(o),0):10,sections:[{key:"variations",[pS]:e=>a[fS]("div",e),items:d}],renderRow:(e,t)=>n()("div",{style:{display:"flex",[rS]:4,...t<2&&void 0===o&&{opacity:.5},...2===t&&{[rS]:"0 0 4px 0",[sS]:"row-reverse"}}},t,e)}))}({parent:r,[vS]:i,currentIconPickerColor:e,theme:o,device:s,intl:t})})})}function TS(e){const{[vS]:t,color:i}=e,{[MS]:o}=p.default.state;o&&Ci.createAndCommit({userAction:"mediaPicker.setIconPickerColor",[vS]:t,perform:e=>{const t=void 0!==i?i:null;eS.updateUserSettings({userSettingsStore:o,transaction:e,data:{icon_picker_color:t}})}})}var PS=i(42402),IS=i(78948);const FS=i(85).K07,_S=i(85).XeC,xS=i(85).YDv,AS=i(85).ChN,BS=i(85).nrD,DS=i(85).IY7,ES=i(85).OtN,LS=i(85).W3n,RS=i(85).OP1,NS=i(85).FFM,OS=i(85).YjJ,US=i(85).GDQ,VS=i(85).BVP,WS=i(85).uuj,KS=i(85).gL0,zS=i(85).bSA,GS=i(85).eAn,HS=i(85).FYE,qS=i(85).Jaf,jS=i(85).UPJ,QS=i(85).H1U,JS=i(85).h0C,$S=i(85).fz9,YS=i(85).GmX,XS=i(85).qKK,ew=i(85).Scd,tw=i(85).Ods,iw=(i(85).Ish,i(85).SBJ),ow=i(85).rjh,nw=i(85).zwB,aw=i(85)._V5,sw=i(85).xgV,rw=i(85).Syz,lw=i(85).Ttb,dw=i(85).G_Z,cw=i(85).nm$,uw=i(85).Ifi,mw=i(85).S6b,pw=i(85).C_1,gw=i(85).NLk,hw=i(85).fBv,vw=i(85).AEv,fw=i(85).UCi,yw=i(85).pjV,bw=i(85).Mm1,Sw=i(85).u3H,ww=i(85).XNW,Mw=i(85).kdC,kw=i(85).cZW,Cw=i(85).Joh,Zw=i(85).ESK,Tw=i(85).Yzm,Pw=i(85).E6w,Iw=i(85).GPw,Fw=i(85).ewQ,_w=i(85).Wmz,xw=i(85).$bT,Aw=i(85).EMU,Bw=i(85).sM5,Dw=i(85).PXg,Ew=i(85).rpY,Lw=i(85).D7I,Rw=i(85).fsm,Nw=i(85).Zij,Ow=i(85).PpY,Uw=i(85).x1C,Vw=i(85).N_Z,Ww=i(85).Vy4,Kw=i(85).Ek1,zw=i(85).Ixn,Gw=i(85).Jg7,Hw=i(85).Wp_,qw=i(85).QyM,jw=i(85).MBf,Qw=i(85).MWD,Jw=i(85).Dd5,$w=i(85).bkZ,Yw=i(85).Gnd,Xw=i(85).QmD,eM=i(85).loK,tM=i(85).cRy,iM=i(85).Gpy,oM=i(85).kCE,nM=i(85).g7N,aM=i(85).nLZ,sM=i(85).PG2,rM=i(85).gdQ,lM=i(85).NF1,dM=i(85).wcE,cM=i(85).X_m,uM=i(85).gGi,mM=i(85).AEP,pM=i(85).LlE,gM=i(85).dLQ,hM=i(85).Jkr,vM=i(85).wgE,fM=i(85).E0z,yM=i(85).g4H,bM=i(85).Au,SM=i(85).wuN,wM=i(85).UA5,MM=i(85).jkI,kM=i(85).hMp,CM=i(85).P0R,ZM=i(85).K1V,TM=i(85).MLn,PM=i(85).TtP,IM=i(85).BQ6,FM=i(85).RfB,_M=i(85).mpm,xM=i(85).R6f,AM=i(85).BK$,BM=i(85).$Xg,DM=i(85).Dv6,EM=i(85).nx5,LM=(0,k.defineMessages)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",[EM]:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",[EM]:"Filter…"},unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",[EM]:"Search for an image…"},giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",[EM]:"Search GIPHY"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",[EM]:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",[EM]:"Ai is fetching"}});class RM extends w.Z{constructor(){super(...arguments),this.menuRef=a[DM](),this.storeTypes={[BM]:ya.Z,emojiInputStore:ya.Z,iconInputStore:ya.Z,iconPickerStore:Pb.Z,[AM]:ya.Z,[xM]:ya.Z,giphyRandomIdStore:Tb,[_M]:kb},this.renderUnsplashResults=(e,t,i,o)=>o?!i||i&&!i[PM]?n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()(k.FormattedMessage,{[EM]:"No results found.",id:"mediaPicker.unsplash.noResultsText"}),[IM]:{[TM]:this[CM][ZM]?kM:MM,[wM]:this[bM][SM]}}):n()(a.Fragment,{},void 0,i.map((t=>this.renderUnsplashImage(e,t))),n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()(k.FormattedMessage,{[EM]:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),[IM]:{[TM]:this[CM][ZM]?kM:MM,[wM]:this[bM][SM]}})):n()("div",{[IM]:this[FM]()},void 0,n()(Oi.Z,{})),this.renderUnsplashImage=(e,t)=>{const{[fM]:i}=this[vM];return n()("div",{[IM]:{[hM]:i[gM]?"33%":"25%",[pM]:3}},t.id,n()(Yf.Z,{[rM]:{[mM]:.85},[sM]:()=>this.handleSelectUnsplashImage(e,t)},void 0,n()(qb.Z,{src:t.thumbUrl,[IM]:{[hM]:uM,[cM]:64,objectFit:"cover",[dM]:"center 0%",[lM]:3}})),n()(Vt.Z,{isSmall:!0,isSecondaryColor:!0,[IM]:{[aM]:2,[nM]:4}},void 0,n()(k.FormattedMessage,{[EM]:oM,id:"mediaPicker.unsplash.byAuthor",[iM]:{authorName:t.authorName,inlinetextlink:e=>n()(PS.Z,{external:!0,href:t.unsplashUrl},void 0,e)}})))},this.renderGiphyResults=(e,t,i,o)=>o?!i||i&&!i[PM]?n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()(k.FormattedMessage,{[EM]:"No results found.",id:"mediaPicker.giphy.noResultsText"}),[IM]:{[TM]:this[CM][ZM]?kM:MM,[wM]:this[bM][SM]}}):n()(a.Fragment,{},void 0,i.map((t=>this.renderGiphyImage(e,t))),n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()(k.FormattedMessage,{[EM]:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),[IM]:{[TM]:this[CM][ZM]?kM:MM,[wM]:this[bM][SM]}})):n()("div",{[IM]:this[FM]()},void 0,n()(Oi.Z,{})),this.renderGiphyImage=(e,t)=>{const{[fM]:i}=this[vM];return n()("div",{[IM]:{[hM]:i[gM]?"33%":"25%",[pM]:3}},t.id,n()(Yf.Z,{[rM]:{[mM]:.85},[sM]:()=>this.handleSelectGiphyImage(e,t)},void 0,n()(qb.Z,{src:t.thumbUrl,[IM]:{[hM]:uM,[cM]:64,objectFit:"cover",[dM]:"center 0%",[lM]:3}})),n()(Vt.Z,{isSmall:!0,isSecondaryColor:!0,[IM]:{[aM]:2,[nM]:4}},void 0,n()(k.FormattedMessage,{[EM]:oM,id:"mediaPicker.giphy.byAuthor",[iM]:{authorName:t.authorName||"GIPHY",inlinetextlink:e=>n()(PS.Z,{external:!0,href:t.imageUrl},void 0,e)}})))},this[tM]=e=>()=>{const t=this[Yw][BM][Xw][eM];if(t){const i=(0,Ji.getNormalizedUrlFromSecureFileUrl)(t,Xi.default.secureFileS3.url,Xi.default.secureFileS3V2.url,Xi.default[$w].rootPath,Xi.default[$w].hostname),o=i?i.link:t;e[Jw](o),be.trackUrlPaste(this[vM],{pastedText:o,source:"media_picker"})}},this.handleAiSourcePickerSubmit=(e,t)=>()=>{e&&t[Jw](e)},this.handleSelectUnsplashImage=async(e,t)=>{const i=await(0,gb.ZP)({[vM]:this[vM],url:t.downloadUrl,method:"GET",format:"json"});"success"===i[Qw]&&e[Jw]({url:i[jw].url})},this.performGiphyGetRandomIdRequest=async()=>{const{giphyRandomIdStore:e}=this[Yw];if(!fe().isEmpty(e[qw]().random_id))return e[qw]().random_id;const t=await Rs.getGiphyRandomId(this[vM],{});return"success"===t[Qw]?(e[Hw]({...e[Xw],random_id:t[jw].random_id}),t[jw].random_id):void 0},this.handleSelectGiphyImage=async(e,t)=>{var i;if(e[Jw]({url:t.imageUrl}),null!==(i=t[Gw])&&void 0!==i&&i.onclick)try{var o;await Rs.postGiphyAnalytics(this[vM],{url:null===(o=t[Gw])||void 0===o?void 0:o.onclick.url,timestamp:Date.now(),random_id:this[Yw].giphyRandomIdStore[Xw].random_id})}catch(n){}},this.handleSwipeLeft=()=>{if(!lb.Z[Xw][zw])return;const e=this.getTabs(),t=e.map((e=>e[Qw]))[Kw](lb.Z[Xw][Ww]),i=e[t+1];void 0!==i&&this[Vw](i[Qw])},this.handleSwipeRight=()=>{if(!lb.Z[Xw][zw])return;const e=this.getTabs(),t=e.map((e=>e[Qw]))[Kw](lb.Z[Xw][Ww]),i=e[t-1];void 0!==i&&this[Vw](i[Qw])},this[Vw]=e=>{lb.Z[Xw][zw]&&(lb.Z[Hw]({...lb.Z[Xw],[Ww]:e}),"icon"===e&&lb.Z[Xw][Uw]&&be.trackMediaPicker(this[vM],"select_icon_tab",lb.Z[Xw][Uw]))},this.handleRandomEmojiClick=()=>{const{[fM]:e}=this[vM],t=this.getTabs().find((e=>e[Qw]===this[CM][Ww]));if(t&&"emoji"===t[Qw]){const i=pb.getRandomPageEmojiIcon();t[Jw](i,{keepVisible:!e[gM]})}},this.handleRandomIconClick=()=>{const{[fM]:e}=this[vM],{iconPickerStore:t}=this[Yw],i=this.getTabs().find((e=>e[Qw]===this[CM][Ww]));if(i&&"icon"===i[Qw]){const o=i.enforceIconColor??hb.x(),n=`/icons/${fe().sample(Object.keys(t[qw]().allIcons))}_${o??fe().sample(ub.IconColorVariations)}.svg`;i[Jw](n,{keepVisible:!e[gM]})}},this.handleFilterChange=e=>{const{emojiInputStore:t,iconInputStore:i,iconPickerStore:o}=this[Yw],n=this.getNumIconPerRow()*(this[vM][fM][gM]?Rg.pq:Rg.II),a=this.getNumIconPerRow()*(this[vM][fM][gM]?Xb.L6:Xb.OF);t[Hw]({...t[Xw],[eM]:e[Ow].value}),Cb.Z[Hw]({...Cb.Z[Xw],loadEmojiCount:n}),i[Hw]({...i[Xw],[eM]:e[Ow].value}),o[Hw]({...o[Xw],loadIconCount:a})}}renderComponent(){const{[fM]:e}=this[vM],t=this.renderTabsHeader(),i=this.renderInputHeader(),o=(t||i)&&n()(a.Fragment,{},void 0,t,i);let s;if(e[gM])s={menuType:Z.og.Modal,[Nw]:this[CM][Nw],header:o,right:n()(k.FormattedMessage,{[EM]:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:this[CM].onCancel,[kM]:this[CM].onDelete&&n()(k.FormattedMessage,{[EM]:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:this[CM].onDelete};else{s={menuType:Z.og.Popup,header:o};const e=this.getTabs().find((e=>e[Qw]===this[CM][Ww])),t=e&&"custom"===e[Qw]?e.tabHeight:void 0;s[hM]=this[CM].popupWidth||300,s[cM]=t||this[CM].popupHeight,s.maxHeight=this[CM].maxHeight,s[Rw]=this[CM][Rw]}return n()(Jb.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,[Ew]:e=>a[Lw](A.Z,ht()({},s,e,{className:yt.mediaMenu,innerRef:this.menuRef}),this.renderCurrentTab())})}renderTabsHeader(){const{[fM]:e}=this[vM];if(!(this.getTabs()[PM]<=1)||this[CM].onDelete){const t={gallery:n()(k.FormattedMessage,{id:"mediaPicker.tabs.gallery",[EM]:"Gallery"}),embed:n()(k.FormattedMessage,{id:"mediaPicker.tabs.embedLink",[EM]:"Embed link"}),file:n()(k.FormattedMessage,{id:"mediaPicker.tabs.upload",[EM]:"Upload"}),emoji:n()(k.FormattedMessage,{id:"mediaPicker.tabs.emoji",[EM]:"Emoji"}),icon:n()(k.FormattedMessage,{id:"mediaPicker.tabs.icon",[EM]:"Icon"}),custom:n()(k.FormattedMessage,{id:"mediaPicker.tabs.custom",[EM]:"Custom"}),unsplash:n()(a.Fragment,{},void 0,si.Z.unsplashLogo({[hM]:12,[Dw]:4,[cM]:12}),n()("span",{},void 0,"Unsplash")),giphy:n()(a.Fragment,{},void 0,si.Z.giphyLogo({[hM]:12,[Dw]:4,[cM]:12}),n()("span",{},void 0,"GIPHY")),drive:n()(k.FormattedMessage,{id:"mediaPicker.tabs.browse",[EM]:"Browse"}),box:n()(k.FormattedMessage,{id:"mediaPicker.tabs.browse",[EM]:"Browse"}),aiSourcePicker:n()("div",{[IM]:{[Bw]:Aw,[xw]:"row"}},void 0,n()(k.FormattedMessage,{id:"mediaPicker.tabs.ask",[EM]:"Ask"}),si.Z.sparkles({[hM]:16,[cM]:16,[Dw]:4,[wM]:this[bM][Fw][_w][400]}))},i=this.getTabs(),o=i.findIndex((e=>e[Qw]===this[CM][Ww])),s=i.map((e=>e[Nw]||t[e[Qw]])),r=i.find((e=>e[Qw]===this[CM][Ww])),l=r&&"emoji"!==r[Qw]&&e.isAndroid;return n()(E.Z,{tabs:s,selectedIndex:o,[Jw]:e=>{const t=i[e];this[Vw](t[Qw])},right:this[CM].onDelete&&!e[gM]&&n()(Ui.Z,{isGray:!0,[sM]:this[CM].onDelete},void 0,n()(k.FormattedMessage,{id:"mediaPicker.tabs.remove",[EM]:"Remove"})),[IM]:{...l&&{[Iw]:"none"}}})}}renderInputHeader(){const{[Pw]:e,[gM]:t,isAndroid:i}=this[vM][fM],o=this.getTabs().find((e=>e[Qw]===this[CM][Ww]));if(o&&("emoji"===o[Qw]||"icon"===o[Qw])){const s="emoji"===o[Qw]?this[Yw].emojiInputStore[Xw][eM]:this[Yw].iconInputStore[Xw][eM],r="emoji"===o[Qw]?this.handleRandomEmojiClick:this.handleRandomIconClick,l=this.renderColorPicker({hasRandomButtonOnLeft:!o.hideRandomButton});return n()("div",{[IM]:{[Bw]:Aw,...e?{}:{[aM]:16,[nM]:10}}},void 0,n()(_e.ZP,{value:s,[kw]:bt.default[Tw](LM.filterPlaceholder),autoFocus:!t||void 0,focus:!t||void 0,[Mw]:!0,inputLeft:n()(_e.f_,{icon:si.Z.search}),[Jw]:this.handleFilterChange,right:n()("div",{[IM]:{[Bw]:Aw}},void 0,null!=o&&o.hideRandomButton?void 0:n()(Us.Z,{[Cw]:()=>n()(k.FormattedMessage,{id:"mediaPicker.emojiTab.random",[EM]:"Random"}),placement:Us.Z[Zw].Bottom,[Ew]:e=>a[Lw](_e.DO,ht()({icon:si.Z.shuffle,[sM]:r},e))}),l),isRightLastElementOfInput:!0,[IM]:{...i&&{[Iw]:"none"}}}))}}renderColorPicker(e){const t=this.getTabs().find((e=>e[Qw]===this[CM][Ww]));if(!t)return null;let i;return"emoji"===(null==t?void 0:t[Qw])?i=n()(Yb.Z,{}):"icon"===(null==t?void 0:t[Qw])&&void 0===t.enforceIconColor&&(i=n()(ZS,{})),e.hasRandomButtonOnLeft&&i?n()("div",{[IM]:{[ww]:6}},void 0,i):i}renderCurrentTab(){const e=this.getTabs().find((e=>e[Qw]===this[CM][Ww]));if(!e)return n()(k.FormattedMessage,{[EM]:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(e[Qw]){case"embed":return this.renderEmbedTab(e);case"file":return this.renderUploadTab(e);case"emoji":return this.renderEmojiTab(e);case"icon":return this.renderIconTab(e);case"gallery":return this.renderGalleryTab(e);case"unsplash":return this.renderUnsplashTab(e);case"giphy":return this.renderGiphyTab(e);case"drive":return this.renderGoogleDriveTab(e);case"box":return this.renderBoxTab(e);case"aiSourcePicker":return this.renderAiSourcePickerTab(e);case"custom":return this.renderCustomEmbedUploadTab(e)}}renderEmojiTab(e){return n()(Rg.ZP,{onSubmit:e[Jw],filter:this[Yw].emojiInputStore[Xw][eM]||"",isCallout:this[CM].isCallout,[Sw]:this[CM][Uw],menuRef:this.menuRef})}renderIconTab(e){return n()(Xb.ZP,{store:this[Yw].iconPickerStore,filter:this[Yw].iconInputStore[Xw][eM]||"",onSubmit:e[Jw],[Sw]:this[CM][Uw],enforceIconColor:e.enforceIconColor,menuRef:this.menuRef})}renderGalleryTab(e){return n()("div",{[IM]:{[bw]:8}},void 0,fe().map(Sb.Z,((t,i)=>n()(xe.Z,{[Nw]:n()(jb.Z,{[IM]:{[ww]:-5},href:t.url,external:!0},void 0,n()(Qb.Z,{},void 0,bt.default[Tw](t[Nw]))),isTitleUppercase:!0,noTextOverflow:!0},i,n()("div",{[IM]:this[yw]()},void 0,t.items.map(((t,i)=>{let{[fw]:o,[Nw]:s,[vw]:r,[hw]:l}=t;return n()("div",{[IM]:{[hM]:"25%",[pM]:3}},i,n()(Us.Z,{originGap:0,placement:Us.Z[Zw].Bottom,delayThreshold:600,[Cw]:()=>n()("div",{[IM]:{[Rw]:180,[gw]:"normal"}},void 0,n()("span",{[IM]:{[wM]:this[bM][pw]}},void 0,bt.default[Tw](s))," ",n()("span",{[IM]:{[wM]:this[bM][mw]}},void 0,r&&bt.default[Tw](r))),[Ew]:t=>a[Lw](Yf.Z,ht()({[rM]:{[mM]:.85}},t,{[sM]:()=>{e[Jw]({url:o,[hw]:l})}}),n()(ao.Z,{url:o,[hM]:200,[uw]:!1,[Ew]:(e,t)=>t&&n()(qb.Z,{src:t,[IM]:{[hM]:"100%",[cM]:64,objectFit:"cover",[dM]:`center ${100*(l||0)}%`,[lM]:3}})}))}))})))))))}renderUnsplashTab(e){const{[fM]:t}=this[vM];return n()("div",{[IM]:{[bw]:8}},void 0,n()(xe.Z,{desktopStyle:{[aM]:8,[nM]:6}},void 0,n()(_e.ZP,{value:this[Yw][AM][Xw][eM],[kw]:bt.default[Tw](LM.unsplashPlaceholder),[Mw]:!0,focus:!t[gM]||void 0,[Jw]:e=>{this[Yw][AM][Hw]({...this[Yw][AM][Xw],[eM]:e[cw].value})}})),n()("div",{[IM]:this[yw]()},void 0,n()(On.Z,{[rw]:this[Yw][AM][Xw][eM],debounce:Ln[dw],[sw]:async e=>{const t=await Rs.searchUnsplashImages(this[vM],{query:e,page:0});if("success"===t[Qw])return t[jw][lw];throw t.error},[Ew]:(t,i,o)=>this.renderUnsplashResults(e,t,i,o)})))}renderGiphyTab(e){const{[fM]:t}=this[vM];return n()("div",{[IM]:{[bw]:8}},void 0,n()(xe.Z,{desktopStyle:{[aM]:8,[nM]:6}},void 0,n()(_e.ZP,{value:this[Yw][xM][Xw][eM],[kw]:bt.default[Tw](LM.giphyPlaceholder),[Mw]:!0,focus:!t[gM]||void 0,[Jw]:e=>{this[Yw][xM][Hw]({...this[Yw][xM][Xw],[eM]:e[cw].value})}})),n()("div",{[IM]:this[yw]()},void 0,n()(On.Z,{[rw]:this[Yw][xM][Xw][eM],debounce:Ln[dw],[sw]:async e=>{await this.performGiphyGetRandomIdRequest();const t=await Rs.searchGiphyImages(this[vM],{query:e,page:0});if("success"===t[Qw])return t[jw][lw];throw t.error},[Ew]:(t,i,o)=>this.renderGiphyResults(e,t,i,o)})))}renderCustomEmbedUploadTab(e){const{[fM]:t}=this[vM],{[jw]:i}=Ei.default[Xw],o=n()(Kb.Z,{[sM]:this[tM](e),disabled:0===this[Yw][BM][Xw][eM][PM],hovered:!1},void 0,e.buttonText||n()(k.FormattedMessage,{[EM]:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})),s=n()(xe.Z,{desktopStyle:{[aM]:16,[Bw]:Aw,[aw]:0,[bw]:12}},void 0,n()(_e.ZP,{[Qw]:"url",value:this[Yw][BM][Xw][eM],[kw]:e[nw]||bt.default[Tw](LM.embedPlaceholder),autoFocus:!t[gM]||void 0,[Mw]:!0,focus:!t[gM]||void 0,onSubmit:this[tM](e),[Jw]:e=>{this[Yw][BM][Hw]({...this[Yw][BM][Xw],[eM]:e[cw].value})},inputRight:t[Pw]?o:void 0,right:t[Pw]?void 0:o,isRightLastElementOfInput:!0})),r=n()(Gb,{[Qw]:this[ow](e)??bb,dropTargetKey:"uploadTab",onDropFile:t=>{"invalidFileDrop"!==t[Qw]?e.onUpload(t.file):Dl.oV({label:n()(k.FormattedMessage,{id:iw,[EM]:tw})})},dropzoneStyle:{[ew]:(0,oh.fn)([oh.ZP[XS](.14),cb()(this[bM][YS]).alpha(.5).css()])}},void 0,n()("div",{[IM]:{[aM]:-24,[aw]:24}},void 0,e.fileUpload&&n()(xe.Z,{desktopStyle:{[aM]:this[CM][ZM]?8:24}},void 0,n()(Eb.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),[sM]:()=>this.handleUpload(e),fullWidth:this[CM][ZM]})),this.renderMediaCapture(e),e[yM]&&n()(Db.Z,{shouldWrapCaption:!0,[yM]:e[yM],[IM]:{[TM]:this[CM][ZM]?"left":"center",[wM]:this[bM][SM]}}),e[$S]||i&&wb[JS](i)&&n()("div",{[IM]:{[cM]:8}}),i&&!e[$S]&&!wb[JS](i)&&n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()("div",{[IM]:{[Bw]:"flex",[QS]:"center",[jS]:this[CM][ZM]?"flex-start":"center"}},void 0,n()("div",{[IM]:{[Dw]:6,[wM]:this[bM][SM]}},void 0,n()(k.FormattedMessage,{[EM]:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",[iM]:{filesize:zi.maxFreeAccountFileSizeInt}})),!cp.default[qS][Xw]&&n()($b.Z,{[GS]:wb[HS](this[vM])||"plus",[sM]:()=>{this[CM].onCancel&&this[CM].onCancel()},[zS]:"media_picker",desktopStyle:{[nM]:1}}))})));return a[Lw](a.Fragment,null,s,r)}renderUploadTab(e){const{[jw]:t}=Ei.default[Xw];return n()(Gb,{[Qw]:this[ow](e)??bb,dropTargetKey:"uploadTab",onDropFile:t=>{"invalidFileDrop"!==t[Qw]?e.onUpload(t.file):Dl.oV({label:n()(k.FormattedMessage,{id:iw,[EM]:tw})})},dropzoneStyle:{[ew]:(0,oh.fn)([oh.ZP[XS](.14),cb()(this[bM][YS]).alpha(.5).css()])}},void 0,n()("div",{[IM]:{[aM]:-24,[aw]:24}},void 0,e.fileUpload&&n()(xe.Z,{desktopStyle:{[aM]:this[CM][ZM]?8:24}},void 0,n()(Eb.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),[sM]:()=>this.handleUpload(e),fullWidth:this[CM][ZM]})),this.renderMediaCapture(e),e[yM]&&n()(Db.Z,{shouldWrapCaption:!0,[yM]:e[yM],[IM]:{[TM]:this[CM][ZM]?"left":"center",[wM]:this[bM][SM]}}),e[$S]||t&&wb[JS](t)&&n()("div",{[IM]:{[cM]:8}}),t&&!e[$S]&&!wb[JS](t)&&n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()("div",{[IM]:{[Bw]:"flex",[QS]:"center",[jS]:this[CM][ZM]?"flex-start":"center"}},void 0,n()("div",{[IM]:{[Dw]:6,[wM]:this[bM][SM]}},void 0,n()(k.FormattedMessage,{[EM]:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",[iM]:{filesize:zi.maxFreeAccountFileSizeInt}})),!cp.default[qS][Xw]&&n()($b.Z,{[GS]:wb[HS](this[vM])||"plus",[sM]:()=>{this[CM].onCancel&&this[CM].onCancel()},[zS]:"media_picker",desktopStyle:{[nM]:1}}))})))}renderMediaCapture(e){if(e.imageUpload||e.videoUpload)return n()(xe.Z,{desktopStyle:{[aM]:4,[Bw]:Aw,[jS]:MM,[Dw]:12,[ww]:12}},void 0,e.imageUpload&&n()(Zm.Z,{isLarge:!0,[sM]:()=>this.handleUpload(e,"image/*"),[IM]:{[hM]:"100%"}},void 0,n()(k.FormattedMessage,{[EM]:"Upload file",id:"mediaPicker.chooseImage.buttonText"})),e.videoUpload&&n()(Eb.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),[sM]:()=>this.handleUpload(e,"video/*"),fullWidth:this[CM][ZM]}))}renderEmbedTab(e){const{[fM]:t}=this[vM];return n()(a.Fragment,{},void 0,n()(xe.Z,{desktopStyle:{[aM]:8,[nM]:6}},void 0,n()(_e.ZP,{[Qw]:"url",value:this[Yw][BM][Xw][eM],[kw]:e[nw]||bt.default[Tw](LM.embedPlaceholder),autoFocus:!t[gM]||void 0,[Mw]:!0,focus:!t[gM]||void 0,onSubmit:this[tM](e),[Jw]:e=>{this[Yw][BM][Hw]({...this[Yw][BM][Xw],[eM]:e[cw].value})}})),n()(xe.Z,{},void 0,n()(Eb.Z,{[sM]:this[tM](e),[Nw]:e.buttonText||n()(k.FormattedMessage,{[EM]:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:this[CM][ZM]})),e[yM]&&n()(Db.Z,{shouldWrapCaption:!0,[yM]:e[yM],[IM]:{[TM]:t[gM]?"left":"center"}}))}renderGoogleDriveTab(e){return"accounts"in e?this[KS](e):n()(On.Z,{[rw]:this[vM],[sw]:mb.vQ,[Ew]:(t,i,o)=>{if(!o)return n()(xe.Z,{},void 0,n()(IS.Z,{}));const a=i&&i.accounts?i.accounts:[];return this[KS](e,a)}})}[KS](e,t){return"accounts"in e?e.accounts&&0===e.accounts[PM]?this[WS](e):n()(a.Fragment,{},void 0,n()(xe.Z,{},void 0,e.accounts.map(((t,i)=>n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:VS,id:US,[iM]:{accountName:t.account_name}}),[sM]:()=>e.onSelect(t),focused:!1},t.account_key)))),n()(xe.Z,{topBorder:!0},void 0,n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:OS,id:NS}),[sM]:()=>e.onSelect(),[IM]:{[wM]:this[bM][SM]},focused:!1}))):t?0===t[PM]?this[WS](e):n()(a.Fragment,{},void 0,n()(xe.Z,{},void 0,t.map(((t,i)=>n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:VS,id:US,[iM]:{accountName:t.accountName}}),[sM]:()=>e.onSelect(t),focused:!1},t.accountId)))),n()(xe.Z,{topBorder:!0},void 0,n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:OS,id:NS}),[sM]:()=>e.onSelect(),[IM]:{[wM]:this[bM][SM]},focused:!1}))):void 0}[WS](e){return n()(xe.Z,{},void 0,n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),[sM]:()=>e.onSelect(),focused:!1,[IM]:{[wM]:this[bM][RS]}}),n()(Db.Z,{shouldWrapCaption:!1,[yM]:n()(k.FormattedMessage,{[EM]:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})}))}renderAiSourcePickerTab(e){var t,i;return n()(a.Fragment,{},void 0,this[Yw][_M][Xw].result&&!1===this[Yw][_M][Xw][LS]&&(0===(null===(t=this[Yw][_M][Xw].result)||void 0===t?void 0:t[PM])?n()(Db.Z,{shouldWrapCaption:!0,[yM]:n()(k.FormattedMessage,{[EM]:"No results found.",id:"mediaPicker.aiSourcePicker.noResultsText"}),[IM]:{[TM]:this[CM][ZM]?"left":"center",[wM]:this[bM][SM]}}):null===(i=this[Yw][_M][Xw].result)||void 0===i?void 0:i.map((t=>n()("div",{[IM]:{cursor:"pointer",[wM]:this[bM][SM],[TM]:"left",hyphens:"auto",[pM]:"10px 8px",[ES]:this[Yw][_M][Xw].hover===t.url?"rgba(55,53,47,0.08)":"",[Bw]:"flex",[xw]:"row"},[sM]:this.handleAiSourcePickerSubmit(t.url,e),onMouseEnter:()=>{this[Yw][_M][Hw]({...this[Yw][_M][Xw],hover:t.url})}},t.url,n()(Hb.Z,{imageURL:"NONE"===t.avatar?e.defaultAvatar:t.avatar,size:24,imageStyle:{[lM]:34,[DS]:"0 2px 4px rgba(15, 15, 15, 0.1)"},[Qw]:"image_url"}),n()("div",{[IM]:{[gw]:"nowrap",overflow:"hidden",[BS]:"ellipsis",[wM]:"rgb(55, 53, 47)",[AS]:500,fontSize:"14px",[xS]:8}},void 0,t[Nw]))))),this[Yw][_M][Xw][LS]&&n()("div",{[IM]:{[Aw]:1,[wM]:this[bM][Fw][_w][400],[AS]:500,[xw]:"row",gap:6,[Bw]:"flex",[QS]:"center",[pM]:"12px 12px",[ww]:10}},void 0,n()(k.FormattedMessage,{id:"aiSourcePicker.loadingMessage.fetching",[EM]:bt.default[Tw](LM.aiIsFetchingLoader)}),n()(Ni.Z,{[IM]:{[ES]:this[bM][Fw][_w][400]}})),!this[Yw][_M][Xw].result&&!this[Yw][_M][Xw][LS]&&n()(Wb,{tab:e,[kw]:e[nw]||bt.default[Tw](LM.aiSourcePickerPlaceholder),store:this[Yw][_M],[ZM]:this[CM][ZM]}))}renderBoxTab(e){const{accounts:t}=e;return 0===t[PM]?n()(xe.Z,{},void 0,n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),[sM]:()=>e.onSelect(),focused:!1,[IM]:{[wM]:this[bM][RS]}}),n()(Db.Z,{shouldWrapCaption:!1,[yM]:n()(k.FormattedMessage,{[EM]:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})):a[Lw](a.Fragment,null,n()(xe.Z,{},void 0,t.map((t=>n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:VS,id:US,[iM]:{accountName:t.account_name}}),[sM]:()=>e.onSelect(t),focused:!1},t.account_key)))),n()(xe.Z,{topBorder:!0},void 0,n()(wt.Z,{[Nw]:n()(k.FormattedMessage,{[EM]:OS,id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),[sM]:()=>e.onSelect(),[IM]:{[wM]:this[bM][SM]},focused:!1})))}getTabs(){return this[CM].tabs}[ow](e){return e.fileUpload?vb:e.imageUpload?fb:e.videoUpload?yb:void 0}async handleUpload(e,t){const i=await zi.openFilePicker({multiple:!1,accept:t});i[PM]&&e.onUpload(i[0])}getNumIconPerRow(){var e,t,i,o;return null!==(e=this.menuRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.offsetWidth?((null===(i=this.menuRef)||void 0===i||null===(o=i.current)||void 0===o?void 0:o.offsetWidth)-24)/32:12}[FM](){return{[Bw]:Aw,[QS]:MM,[jS]:MM,minHeight:320,[Aw]:1}}[yw](){const{[fM]:e,WindowSizeStore:t}=this[vM];return{[Bw]:Aw,flexWrap:"wrap",alignContent:"flex-start",[ew]:this[bM].popoverBackground,[aw]:e[Pw]?12:0,[bw]:e[Pw]?12:0,[xS]:e[Pw]?t[_S](14):12,paddingRight:e[Pw]?t[FS](14):12,[DS]:e[Pw]?`0 1px 0 ${this[bM].regularDividerColor}`:""}}}RM.displayName="MediaPicker";const NM=RM,OM=i(85).D7I,UM=i(85).Rbl,VM=i(85).YOX,WM=i(85).Ixn,KM=i(85)._lc;class zM extends w.Z{constructor(){super(...arguments),this.handleCloseOverlay=()=>{Ki.clear()}}renderComponent(){const{device:e}=this.environment,{state:t}=lb.Z;return n()(re.ZP,{popupType:e.isMobile?re.ZP[KM].SlideUp:re.ZP[KM].Popup,open:t[WM],[VM]:t[WM]?t[VM]:void 0,originGap:t[WM]?t.originGap:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,preventScaleTransition:!0,onDismiss:this.handleCloseOverlay,render:()=>{if(t[WM])return n()(x.Z,{capture:!0,onUp:fe()[UM],onDown:fe()[UM]},void 0,a[OM](NM,ht()({},t,{onCancel:this.handleCloseOverlay})))}})}}zM.displayName="MediaMenu";const GM=zM;var HM=i(97762),qM=i(15145),jM=i(41892),QM=i(40506),JM=i(7057),$M=i(84795),YM=i(58573),XM=i(92338),ek=i(44805),tk=i(7928),ik=i(47798),ok=i(993),nk=i(17731),ak=i(80084),sk=i(83089),rk=i(14568),lk=i(63334),dk=i(19111),ck=i(72087);const uk=i(85).nx5,mk={...pi.Z.textOverflowStyle,fontWeight:pi.Z.fontWeight.medium,maxWidth:160,display:"inline-block",verticalAlign:"bottom"};function pk(e){const{pageTitle:t}=e;return n()(k.FormattedMessage,t?{[uk]:"New “{filterText}” page in…",id:"createPageMenuItem.title.withPageName",values:{filterText:n()("span",{style:mk},void 0,t)}}:{[uk]:"Add new page in…",id:"createPageMenuItem.title.withoutPageName"})}function gk(e){const{pageTitle:t}=e;return n()(k.FormattedMessage,t?{[uk]:"New “{filterText}” sub-page",id:"createSubpageMenuItem.title.withPageName",values:{filterText:n()("span",{style:mk},void 0,t)}}:{[uk]:"Add new sub-page",id:"createSubpageMenuItem.title.withoutPageName"})}var hk=i(85215),vk=i(60442);const fk=i(85).wuX,yk=i(85).Neb,bk=i(85).XBA,Sk=i(85).FtZ,wk=i(85).wuN,Mk=i(85).Joh,kk=i(85).e5W,Ck=i(85).Dsi,Zk=i(85).TLr,Tk=i(85).voC,Pk=i(85).Au,Ik=i(85).Hco,Fk=i(85).PXg,_k=i(85).rI1,xk=i(85).sOA,Ak=i(85).doS,Bk=i(85).NOy,Dk=i(85).XNW,Ek=i(85).sM5,Lk=i(85).nAm,Rk=i(85).ij9,Nk=i(85).NJt,Ok=i(85).jkI,Uk=i(85).ypD,Vk=i(85).rh1,Wk=i(85).NMs,Kk=i(85).kA6,zk=i(85).jtM,Gk=i(85).g4H,Hk=i(85).FlB,qk=i(85).Wkb,jk=i(85).zTs,Qk=i(85).TOg,Jk=i(85).xgV,$k=i(85).Syz,Yk=i(85).kBp,Xk=i(85).v2u,eC=i(85).gaz,tC=i(85).uVN,iC=i(85).KXm,oC=i(85)._Bw,nC=i(85).G_Z,aC=i(85).lC9,sC=i(85).atl,rC=i(85).Zn,lC=i(85).rpY,dC=i(85).ESK,cC=i(85)._lc,uC=i(85).pHx,mC=i(85).Omf,pC=i(85).NHZ,gC=i(85).W5t,hC=i(85).P38,vC=i(85).fBu,fC=i(85).VMs,yC=i(85).U3F,bC=i(85).XY1,SC=i(85).GiO,wC=i(85).qJ8,MC=i(85).OdC,kC=i(85).cvs,CC=i(85).EIp,ZC=i(85).EHj,TC=i(85).XuB,PC=i(85).$Lq,IC=i(85).sUt,FC=i(85).FcT,_C=i(85).LCr,xC=i(85).nxU,AC=i(85).Drs,BC=i(85).JJj,DC=i(85).XtO,EC=i(85).XQm,LC=i(85).P3s,RC=i(85).YGn,NC=i(85).oLs,OC=i(85).uPK,UC=i(85).yKO,VC=i(85).n4d,WC=i(85).Gnd,KC=i(85).mjD,zC=i(85).TmH,GC=i(85).DJ7,HC=i(85).j7K,qC=i(85).y79,jC=i(85).ViH,QC=i(85).dLQ,JC=i(85).$SM,$C=i(85).Ie8,YC=i(85).ceT,XC=i(85).wgE,eZ=i(85).E0z,tZ=i(85).D7I,iZ=i(85).ad8,oZ=i(85).waY,nZ=i(85).Yzm,aZ=i(85).y4s,sZ=i(85).czy,rZ=i(85).HZQ,lZ=i(85).Zij,dZ=i(85).weq,cZ=i(85).UWK,uZ=i(85).TtP,mZ=i(85).e3Y,pZ=i(85).nQ3,gZ=i(85).Iww,hZ=i(85).Ryu,vZ=i(85).QmD,fZ=i(85).P0R,yZ=i(85).kD3,bZ=i(85).UhS,SZ=i(85).b7Q,wZ=i(85).nx5,MZ=i(85).OtN,kZ=i(85).X_m,CZ=i(85).Jkr,ZZ=i(85).Q$b;function TZ(e){window.__c={n:"SvgWorkaroundForChromiumBug"};const{svg:t,viewBox:i,fill:o}=e,s=(0,a.useMemo)((()=>{const e=(0,HM.renderToString)(n()("svg",{xmlns:ZZ,viewBox:i},void 0,t));return`url("${`data:image/svg+xml,${encodeURIComponent(e)}`}")`}),[t,i]);return n()("div",{style:{[CZ]:"100%",[kZ]:"100%",[MZ]:o,WebkitMaskImage:s,maskImage:s}})}const PZ=(0,k.defineMessages)({mentionAll:{[wZ]:"Mention a person, page, or date…",id:"mentionMenu.personPageDate.prompt2"},mentionPersonPage:{[wZ]:"Mention a person or page…",id:"mentionMenu.personPage.prompt2"},mentionPersonDate:{[wZ]:"Mention a person or date…",id:"mentionMenu.personDate.prompt2"},mentionPageDate:{[wZ]:"Mention a page or date…",id:"mentionMenu.pageDate.prompt2"},mentionPerson:{[wZ]:"Mention a person…",id:"mentionMenu.person.prompt2"},mentionDate:{[wZ]:"Mention a date…",id:"mentionMenu.date.prompt2"},mentionPage:{[wZ]:"Type to link or add page…",id:"mentionMenu.page.prompt2"},addPage:{[wZ]:"Type to add or link page…",id:"mentionMenu.addPage.prompt2"}}),IZ=(0,k.defineMessages)({autocompleteToday:{[wZ]:"Today",id:"mentionMenu.date.autocomplete.today"},autocompleteNextTuesday:{[wZ]:"Next Tuesday 3pm",id:"mentionMenu.date.autocomplete.nextTuesday"},autocompleteReminder:{[wZ]:"Remind tomorrow 9am",id:"mentionMenu.date.autocomplete.reminder"},[SZ]:{[wZ]:"Remind {dateTime}",id:"mentionMenu.date.remindAtDateTime"},noResults:{[wZ]:"No results",id:"mentionMenu.noSearchResults.title"},groupMentionCaption:{[wZ]:"{numMembersInGroup, plural, one {{numMembersInGroup} member} other {{numMembersInGroup} members}}",id:"mentionMenu.group.caption"}});class FZ extends w.Z{constructor(){super(...arguments),this.storeTypes={[bZ]:lk.Z,[yZ]:ck.Z,localCachePageMentionRequestStore:ck.Z},this.renderMentionResult=(e,t)=>{const{intl:i}=this[fZ],o=dk.Z[vZ],s=o[hZ]&&o[gZ],r={[pZ]:[],[mZ]:()=>r[pZ][uZ]>0,addSection(e){e&&this[pZ].push(e)}};"+"===s&&r.addSection(this.getCreatePageMenuSection(r[mZ]())),r.addSection(this.getDateResultsMenuSection(t,r[mZ]())),r.addSection(this.getUserResultsMenuSection(t,r[mZ]())),r.addSection(this.getGroupResultsMenuSection(t,r[mZ](),this[fZ].intl)),r.addSection(this.getPageResultsMenuSection(t,r[mZ]())),("@"===s&&this[cZ][vZ]||"[["===s)&&r.addSection(this.getCreatePageMenuSection(r[mZ]()));const{[pZ]:l}=r;let d,c;if(wy.Z[vZ][dZ]){const e=o[sZ][rZ],t=o[sZ].page,n=o[sZ][aZ];let a="";const s=PZ;e&&t&&n?a=i[nZ](s.mentionAll):e&&t?a=i[nZ](s.mentionPersonPage):e&&n?a=i[nZ](s.mentionPersonDate):t&&n?a=i[nZ](s.mentionPageDate):e?a=i[nZ](s.mentionPerson):n?a=i[nZ](s.mentionDate):t&&o&&(a=o[hZ]&&"+"===o[gZ]?i[nZ](PZ.addPage):i[nZ](s.mentionPage)),this[oZ]({[lZ]:a,icon:this.renderTemporaryInputEmptyIcon(),[iZ]:!1}),d=void 0}else d=n()(Nn.Z,{[lZ]:n()(k.FormattedMessage,{[wZ]:"Please go online to mention a person or page.",id:"mentionMenu.offlineMessage"})});0===l[uZ]&&(c=n()(xe.Z,{},void 0,n()(Nn.Z,{[lZ]:a[tZ](k.FormattedMessage,IZ.noResults)})));const{[eZ]:u}=this[XC];let m;return m=this.isActionSheet()?{[YC]:Z.og[$C],disableBottomPadding:!0,[kZ]:`calc(70vh - ${Di.Z[JC]()}px)`}:{[YC]:Z.og.Popup,[CZ]:this.getMenuDesktopWidth(),maxHeight:u[QC]?"30vh":"40vh",onClickOutside:this[jC]()},a[tZ](A.Z,ht()({},m,{header:d}),n()(x.Z,{capture:dk.Z[vZ][hZ],onBackspace:this.shouldCaptureBackspace()?this.handleEmptyBackspace:void 0,onTab:this.handleTab}),n()(Mt.Z,{type:Mt.i[qC],[HC]:this.getMenuInitialFocus(),[pZ]:l,onEmptyEnter:this[jC]()}),c)},this.handleCreateInAutocompleteQueryChange=e=>{this[GC]({createInQuery:e})},this.renderCreateInMenu=()=>{const e=dk.Z[vZ];if(!e[hZ])return;const t="block"===e[zC].table?e[zC].id:void 0;return n()(Wy.Z,{targets:[],isAddTo:!0,[VC]:!0,onAccept:e=>{ik.Br({[XC]:this[XC],titleText:this[KC](),[bZ]:this[WC][bZ],createInValue:e,menuListItemAction:void 0})},captureSelection:!0,[UC]:!0,[OC]:t,onAutocompleteQueryChange:this.handleCreateInAutocompleteQueryChange,[bZ]:this[WC][bZ],[NC]:e.createInQuery,desktopWidth:this.getMenuDesktopWidth(),onCancel:this.handleCreateInCancel})},this.handleCreateInStart=()=>{this[GC]({showCreateIn:!0})},this.handleCreateInCancel=()=>{this[GC]({showCreateIn:!1,createInQuery:""})},this.handleEmptyBackspace=e=>{this.shouldCaptureBackspace()&&e[RC](),this[jC]()()},this[jC]=()=>{const e=dk.Z[vZ],t=this[KC](),i=ik.WI();let o=Date.now();return e[hZ]&&(o=e.openTime),()=>{be.trackMentionMenuAbandon(this[XC],{timeToAbandonInMs:Date.now()-o,queryLength:t[uZ],[LC]:i}),ik.xv()}},this.handleTab=e=>{e[RC]();const t=this.tabCompletionString;if(!t)return;const i=Xp.default[vZ];if("editing"!==i.mode)return;const o=(0,Jp.QY)(i[EC]);if(!o)return;const n=dk.Z[vZ];n[hZ]&&n[zC]===o[DC]&&Ci[BC]({[AC]:"MentionMenu.handleTab",[XC]:this[XC],[xC]:e=>{ok.insertString({[XC]:this[XC],[_C]:e,string:t,[DC]:o[DC],[FC]:o[FC],[IC]:!0,[PC]:!0,[TC]:!0,[ZC]:!0})}})},this.tabCompletionString=void 0,this.inputSelectionsStore=this[CC]((()=>{const e=dk.Z[vZ];if(e[hZ])return Eg.getInputSelections(e[zC],e[kC],e.isEmptyPageTitle?"":e[gZ])})),this[cZ]=this[CC]((()=>{const e=this.inputSelectionsStore[vZ],t=dk.Z[vZ];if(e&&t[hZ])return Eg.getFilterFromSelections(t[zC],e)})),this.popupOpenStore=this[CC]((()=>{const e=dk.Z[vZ];return!!e[hZ]&&("+"!==e[gZ]||""!==this[KC]())})),this.performUserMentionRequest=async e=>{const t=dk.Z[vZ];if(!t[hZ])return;const i=t[sZ][rZ]?await this.getUserResults(e):[];return""===e?i[MC](0,2):i[MC](0,20)},this.performLocalCachePageMentionRequest=async()=>{const{[wC]:e,[SC]:t}=p.default[vZ];if(!e)return;return ak.getLocalSearchableBlocks({[XC]:this[XC],[wC]:e,[SC]:t})},this.performLocalPageMentionRequest=async e=>{const{localCachePageMentionRequestStore:t}=this[WC],i=t[vZ].result;if(!i)return;const o=Ti[bC]();return o&&this[KC]()?Promise.resolve(ak[yC]({[fC]:e,localCachedPages:i,[vC]:o,isOnline:wy.Z[vZ][dZ],[XC]:this[XC],shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0})):void 0},this.performServerPageMentionRequest=async e=>{const t=dk.Z[vZ];return t[hZ]&&this[KC]()&&t[sZ].page?await this.getPageResults(e):[]},this.getUserResults=async e=>{if(wy.Z[vZ][dZ]){return await Ln.searchVisibleSpaceUsers({[XC]:this[XC],[fC]:e,membersOnly:!1})}return[]},this.getGroupResults=e=>{var t;if(!dk.Z[vZ][hZ])return[];const i=(null===(t=p.default[vZ][wC])||void 0===t?void 0:t[hC]())||[];return(0,YM.ZP)(e,i,(e=>e.name||""))},this.getPageResults=async e=>{if(!wy.Z[vZ][dZ])return[];const t=dk.Z[vZ],i=t[hZ]&&(0,T.isBlockStore)(t[zC])&&t[zC];return await Ln.searchMentionablePages({nearBlock:i||void 0,[XC]:this[XC],[fC]:e,source:"mention_menu",limit:20})},this.getDateResults=e=>{const t=dk.Z[vZ];if(!t[hZ])return[];const{intl:i}=this[fZ],o=t[sZ][SZ];return t[sZ][aZ]?function(e,t,i){if(0===e[uZ])return fe().compact([{label:i[nZ](IZ.autocompleteToday),value:()=>fr.today((0,Ds.r)())},t?void 0:{label:i[nZ](IZ.autocompleteNextTuesday),value:()=>{const e=fr.todayLuxon((0,Ds.r)()),t=e.set({weekday:2,hour:15}),i=t<=e?t.plus({week:2}):t.plus({week:1});return{type:"datetime",[yk]:i.toFormat(fr[fk]),start_time:i.toFormat(QM.persistedTimeFormat),time_zone:(0,Ds.r)()}}},t?{label:i[nZ](IZ.autocompleteReminder),value:()=>{const e=fr.tomorrow((0,Ds.r)());return{type:"datetime",[yk]:e[yk],start_time:"09:00",[SZ]:{unit:"day",value:0,time:QM.defaultDateReminderTime,defaultTimeZone:(0,Ds.r)()},time_zone:(0,Ds.r)()}}}:void 0]);const o=e.normalize("NFKD"),n=t?$M.parsePersistedDateWithOptionalReminder(o,i):$M.parsePersistedDate(o,i);if(n){let e=(0,JM.ZV)({value:n,date_format:"relative",[qk]:(0,Ds.r)(),intl:i,[Hk]:!0});return n[SZ]&&(e=i[nZ](IZ[SZ],{dateTime:e})),[{label:e,value:()=>n}]}return[]}(e,o,i)[MC](0,6):[]},this.getTemplateVariableResults=e=>{const t=dk.Z[vZ];if(!t[hZ])return[];if(!t[sZ][gC])return[];const{intl:i}=this[fZ];return ci.searchTemplateVariables(e,i)}}willMountOrUpdate(){const e=dk.Z[vZ],t=this[cZ][vZ];if(e[hZ]){var i;const o=Xp.default[vZ],n="editing"===o.mode?(0,Jp.QY)(o[EC]):void 0,a=(null==n?void 0:n[DC])===e[zC],s=this[WC][bZ][vZ][pC],r=s&&"editing"===s.mode&&(null===(i=(0,Jp.QY)(s[EC]))||void 0===i?void 0:i[DC])===e[zC];if(!a&&!r)return void ik.xv();const l=a&&(null==n?void 0:n[FC]),d=this.inputSelectionsStore[vZ];if(d&&l&&(l.startIndex<d.filter.startIndex||l.endIndex>d.filter.endIndex))return void ik.xv();const c=this[cZ][vZ]&&this[cZ][vZ][0];if("+"===e[gZ]&&c&&!c.match(sk.Ff))return void ik.xv();if(void 0===t&&!e.isEmptyPageTitle)return void ik.xv()}}renderComponent(){const{[eZ]:e}=this[XC],t=dk.Z[vZ],i=rk.Z.find((e=>e[fZ].capture)),o=this.popupOpenStore[vZ];let s;if(i&&e[QC]){var r;const e=null===(r=i[WC][DC][vZ].node)||void 0===r?void 0:r[mC]();e&&(s={[kZ]:`calc(100vh - ${e[kZ]}px)`})}const l=t[hZ]&&t.showCreateIn;return n()(re.ZP,{popupType:this.isActionSheet()?re.ZP[cC][uC]:re.ZP[cC].Popup,[hZ]:o,originRect:t[hZ]?t.selectionRect:void 0,slideUpWrapStyle:s,placementToOrigin:re.ZP[dC].Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:8,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:this[jC](),disableDarkOverlayBackground:e[QC],keepFocus:!0,[lC]:()=>e[QC]?a[tZ](a.Fragment,null,this.renderMentionSearch(),n()(re.ZP,{popupType:re.ZP[cC][uC],[lC]:this.renderCreateInMenu,[hZ]:l,keepFocus:!0})):l?this.renderCreateInMenu():this.renderMentionSearch()})}renderMentionSearch(){const e=this[KC](),t=dk.Z[vZ],i=Ai.default.mark(rC),o={field:"relevance"};return n()(On.Z,{[Yk]:t[sC],[$k]:e,[Jk]:this.performUserMentionRequest,[lC]:a=>n()(On.Z,{[Yk]:t[aC],[$k]:e,[Jk]:this.performServerPageMentionRequest,debounce:Ln[nC],[lC]:t=>n()(On.Z,{[Yk]:this[WC].localCachePageMentionRequestStore,[$k]:p.default[vZ][wC]&&p.default[vZ][wC].id,[Jk]:this.performLocalCachePageMentionRequest,[lC]:s=>n()(On.Z,{[Yk]:this[WC][yZ],debounce:Ln.defaultLocalSearchDebounce,[$k]:{[fC]:{text:e,filters:XM[oC]({[iC]:!1,[tC]:!0,[eC]:!0,[Xk]:void 0}),sort:o},limit:5},[Jk]:this.performLocalPageMentionRequest,[lC]:e=>this.renderMentionResult(a||t||e,this.getCurrentMentionResults(i))})})})})}getDateResultsMenuSection(e,t){const{dateResults:i}=e,{intl:o}=this[fZ],s=this[KC](),r=this[Qk](e,aZ);if(0===i[uZ]&&0===r[uZ])return;const l=i.map((e=>{let{label:t,value:i}=e;return{key:t,[lC]:e=>{if(e.focused&&this[oZ]({[lZ]:t,icon:this[jk](),[iZ]:!0}),$M.parseRelativeDate(t,o)){const n=(0,JM.ZV)({value:i(),[qk]:(0,Ds.r)(),intl:o,[Hk]:!1});return a[tZ](wt.Z,ht()({},e,{[lZ]:t,[Gk]:n,[zk]:!0}))}return a[tZ](wt.Z,ht()({},e,{[lZ]:t}))},action:e=>{Ci[BC]({[AC]:Kk,[XC]:this[XC],[xC]:t=>{ik.RL({[XC]:this[XC],[Wk]:["d",{...i(),date_format:"relative"}],[_C]:t,menuListItemAction:e,[fC]:s,mentionType:aZ})}})}}}));return this[Vk](aZ,{key:"date results",[lC]:e=>a[tZ](xe.Z,ht()({},e,{[lZ]:n()(k.FormattedMessage,{[wZ]:"Date",id:"mentionMenu.dateSection.title"}),topBorder:t,isTitleUppercase:!0})),items:r.concat(l)})}[Qk](e,t){const{templateVariableResults:i}=e,{intl:o}=this[fZ],n=this[KC]();return i.filter((e=>ci.isTemplateVariableCategory(e,t))).map((e=>({key:e,[lC]:t=>{const i=ci[Uk](e,o),n=ci.getTemplateVariableAnnotationDescription(e,o);return t.focused&&this[oZ]({[lZ]:i,icon:this[jk](),[iZ]:!0}),a[tZ](wt.Z,ht()({},t,{[lZ]:i,[Gk]:n,[zk]:!0}))},action:t=>{Ci[BC]({[AC]:Kk,[XC]:this[XC],[xC]:i=>{ik.RL({[XC]:this[XC],[Wk]:["tv",{type:e}],[_C]:i,menuListItemAction:t,[fC]:n,mentionType:gC})}})}})))}renderSpinner(e){return n()(Ff.Z,{show:e,showDelay:500,showHold:300,[lC]:e=>n()(Oi.Z,{style:{textAlign:Ok,[Nk]:e?Rk:Lk,[Ek]:zk,[Dk]:8}})})}renderTemporaryInputEmptyIcon(){const e=dk.Z[vZ];if(e[hZ])return"+"===e[gZ]?this[Bk]():n()("span",{style:{[CZ]:Ak,[kZ]:Ak,[Ek]:xk,[_k]:"-0.15em",[Fk]:"0.2em"}},void 0,a[tZ](TZ,ht()({},si.X.search,{fill:this[Pk][Ik]})))}[Bk](){return n()("span",{style:{[CZ]:Ak,[kZ]:Ak,[Ek]:xk,[_k]:"-0.15em",[Fk]:"0.2em"}},void 0,a[tZ](TZ,ht()({},si.X.plus,{fill:this[Pk][Ik]})))}renderTemporaryInputPageIcon(e){return(0,ek.renderPageMentionIcon)({pageModel:e.getModel(),pageRole:e.getRole(),showEmojiInline:!0,emojiType:(0,nk.e_)(this[XC]),baseUrl:Xi.default.domainBaseUrl,[Tk]:e[Tk],isClient:!0,isSafariOrIOS:this[XC][eZ].isSafari||this[XC][eZ].isIOS,currentUserId:this[XC].currentUser.id,[Pk]:this[Pk]})}[jk](){return n()("span",{style:{[CZ]:Ak,[kZ]:Ak,[Ek]:xk,[_k]:"-0.15em",[Fk]:"0.2em"}},void 0,a[tZ](TZ,ht()({},si.X.at,{fill:this[Pk][Ik]})))}getUserResultsMenuSection(e,t){const{userResults:i}=e,o=this[KC](),s=this[Qk](e,rZ);if(0===i[uZ]&&0===s[uZ])return;const r=fe().compact(i.map((e=>({key:e.id,[lC]:t=>(t.focused&&this[oZ]({[lZ]:(0,tk.Nz)(this[fZ].intl,e),icon:this[jk](),[iZ]:!0}),a[tZ](Wn.Z,ht()({},t,{actor:(0,Dn.dp)(e),useEmailAsTooltip:!0}))),action:t=>{Ci[BC]({[AC]:Kk,[XC]:this[XC],[xC]:i=>{ik.RL({[XC]:this[XC],[Wk]:(0,ci.createUserAnnotation)(e.id),[_C]:i,menuListItemAction:t,[fC]:o,mentionType:rZ})}})}}))));return this[Vk](rZ,{key:"user results",[lC]:e=>a[tZ](xe.Z,ht()({},e,{[lZ]:n()(k.FormattedMessage,{[wZ]:"People",id:"mentionMenu.peopleSection.title"}),topBorder:t,isTitleUppercase:!0})),items:s.concat(r)})}getGroupResultsMenuSection(e,t,i){const{groupResults:o}=e;if(0===o[uZ])return;const s=this[KC](),r=fe().compact(o.map((e=>{var t;const o=i[nZ](IZ.groupMentionCaption,{numMembersInGroup:(null===(t=e.user_ids)||void 0===t?void 0:t[uZ])||0});return{key:e.id,[lC]:t=>(t.focused&&this[oZ]({[lZ]:e.name||"",icon:this[jk](),[iZ]:!0}),n()(hk.l,{menuListItemProps:{...t,[Gk]:o},group:e})),action:t=>{var i;const o=null===(i=p.default[vZ][wC])||void 0===i?void 0:i.id;o&&Ci[BC]({[AC]:"MentionMenu.groupMention",[XC]:this[XC],[xC]:i=>{ik.RL({[XC]:this[XC],[Wk]:ci.createGroupAnnotation(e.id,o),[_C]:i,menuListItemAction:t,[fC]:s,mentionType:"group"})}})}}})));return this[Vk]("group",{key:"group results",[lC]:e=>a[tZ](xe.Z,ht()({},e,{[lZ]:n()(k.FormattedMessage,{[wZ]:"Groups",id:"mentionMenu.groupSection.title"}),topBorder:t,isTitleUppercase:!0})),items:r})}getPageResultsMenuSection(e,t){const{pageResults:i}=e,o=this[KC](),s=a[tZ](a.Fragment,null,0===i[uZ]?a[tZ](k.FormattedMessage,IZ.noResults):n()(k.FormattedMessage,{[wZ]:"Link to page",id:"mentionMenu.pagesSection.title2"}),this.renderSpinner(dk.Z[vZ][aC][vZ].loading));return this[Vk]("page",{key:"page results",[lC]:e=>a[tZ](xe.Z,ht()({},e,{[lZ]:s,topBorder:t,isTitleUppercase:!0})),items:fe().compact(i.map((e=>{const t=Ti[bC]();if(!t)return;const i=Ze.G[Zk](t,{table:ri.iU,id:e});return{key:e,[lC]:e=>{if(e.focused){const e=i.getModel();if(e){const t=e.getRenderTitle({[Tk]:i[Tk],[qk]:(0,Ds.r)(),intl:this[fZ].intl});this[oZ]({[lZ]:t||"",icon:this.renderTemporaryInputPageIcon(i),[iZ]:!0})}}return a[tZ](ky.Z,ht()({},e,{[DC]:i}))},action:t=>{Ci[BC]({[AC]:"MentionMenu.getPageResultsMenuSection",[XC]:this[XC],[xC]:i=>{ik.RL({[XC]:this[XC],[Wk]:["p",e],[_C]:i,menuListItemAction:t,[fC]:o,mentionType:"page"})}})}}})))})}getCreatePageMenuSection(e){if(!this.canCreatePage())return;const t=dk.Z[vZ];if(!t[hZ])return;const{intl:i}=this[fZ],o=this[KC](),s="@"===t[gZ]?n()(k.FormattedMessage,{id:"mentionMenu.createPageSection.title",[wZ]:"New page"}):void 0;return{key:"create page",[lC]:t=>a[tZ](xe.Z,ht()({[lZ]:s,isTitleUppercase:!0},t,{topBorder:e})),items:[{key:"add new subpage",action:async e=>{const i=qf.gt(t[zC]);i&&await ik.Br({[XC]:this[XC],[bZ]:this[WC][bZ],titleText:this[KC](),createInValue:i.createInValue,onPageCreated:e=>{e&&""===ci.getText(e.getTitleValue())&&Yi.navigateToBlock({[XC]:this[XC],[DC]:e,pageVisitSource:qM.tY.Create})},menuListItemAction:e})},[lC]:e=>{e.focused&&this[oZ]({[lZ]:0===o[uZ]?i[nZ](PZ.addPage):"",icon:this[Bk](),[iZ]:!1});const t=t=>a[tZ](wt.Z,ht()({},(0,tS.Z)(t||{},e),{icon:si.Z.plus({[CZ]:16}),[lZ]:n()(gk,{pageTitle:this[KC]()})}));return this[XC][eZ][QC]?t():n()(Us.Z,{[Mk]:()=>n()(vk.Z,{imageURL:jM.Z[kk][Ck].pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,[Gk]:a[tZ](k.FormattedMessage,Wy.s.createSubpage)}),placement:Us.Z[dC].Right,delayThreshold:0,[lC]:e=>t(e)})}},{key:"open create in menu",action:this.handleCreateInStart,[lC]:e=>{e.focused&&this[oZ]({[lZ]:0===o[uZ]?i[nZ](PZ.addPage):"",icon:this[Bk](),[iZ]:!1});const t=n()(pk,{pageTitle:this[KC]()}),s=i=>a[tZ](wt.Z,ht()({},(0,tS.Z)(i||{},e),{icon:si.Z.alias({[CZ]:16}),[lZ]:t}));return this[XC][eZ][QC]?s():n()(Us.Z,{[Mk]:()=>n()(vk.Z,{imageURL:jM.Z[kk][Ck].pageMenu.newPageInPng,imageWidth:140,imageHeight:100,[Gk]:a[tZ](k.FormattedMessage,Wy.s.newPageIn)}),placement:Us.Z[dC].Right,delayThreshold:0,[lC]:e=>s(e)})}}]}}[Vk](e,t){const i=dk.Z[vZ];if(!i[hZ])return t;if(i.expandSection&&i.expandSection===e)return t;const{items:o}=t,s=this[XC][eZ].isPhone?3:5;if(o[uZ]<=s)return t;const r=[...o[MC](0,s),{key:"show more",[lC]:e=>a[tZ](wt.Z,ht()({},e,{icon:si.Z.dots({[CZ]:16,fill:this[Pk][wk]}),[lZ]:n()("span",{style:{color:this[Pk][wk]}},void 0,n()(k.FormattedMessage,{[wZ]:"{numberMore} more results",id:"mentionMenu.showMoreResultsButton.title",values:{numberMore:o[uZ]-s}}))})),action:()=>{this[GC]({expandSection:e})}}];return{...t,items:r}}[GC](e){const t=dk.Z[vZ];t[hZ]&&dk.Z.setState({...t,...e})}[KC](){const e=this[cZ][vZ];return e?dk.Z[vZ][hZ]&&"@"===dk.Z[vZ][gZ]&&this[XC][eZ].isAndroid&&e.startsWith("@")?e[MC](1).trim():dk.Z[vZ][hZ]&&"[["===dk.Z[vZ][gZ]&&e.endsWith("]]")?e[MC](0,-2).trim():e.trim():""}[oZ](e){const t=dk.Z[vZ];if(!t[hZ])return;if(!e)return void t[Sk].setState(void 0);const{[eZ]:i}=this[XC],{[lZ]:o,icon:n,[iZ]:a}=e,s=this[cZ][vZ]||"",r=o.toLowerCase().startsWith(s)?o[MC](s[uZ]):"";this.tabCompletionString=a?r:void 0;const l=i.isFirefox?void 0:n;t[Sk].setState({prefix:t[gZ],suffix:"[["===t[gZ]&&s.endsWith("]]")?"]]":"",completion:r,prefixIcon:l})}getCurrentMentionResults(e){const t=dk.Z[vZ],i=t[sC][vZ].result||[],o=t[aC][vZ].result||[],n=this.getDateResults(this[KC]()),a=this.getTemplateVariableResults(this[KC]()),s=t[sZ].group?this.getGroupResults(this[KC]()):[];let r=o;const{result:l}=this[WC][yZ][vZ];if(l&&!l.error){const e=l.value.results,t=Ti[bC]();r=t?ak.combineResults({localResults:e,serverResults:o.map(((e,i)=>({...e,[bk]:void 0,originalPosition:i,[DC]:Ze.G[Zk](t,{table:ri.iU,id:e.id})})))})||[]:e}let d;d=this[KC]()?r.map((e=>e.id)):Cy.X4[vZ].map((e=>e.pageId));const c=t[sC][vZ].ready&&t[aC][vZ].ready;return c&&Ai.default.measure(e,{[XC]:this[XC]}),{userResults:i,groupResults:s,pageResults:d,dateResults:n,templateVariableResults:a,ready:c}}canCreatePage(){return!!dk.Z[vZ][sZ].createPage}isActionSheet(){const{[eZ]:e}=this[XC];return e.isMobileNative&&!e.isTablet}shouldCaptureBackspace(){return""===this[cZ][vZ]}getMenuInitialFocus(){if(""!==this[KC]())return 0}getMenuDesktopWidth(){return(0,d.bq)()?400:330}}FZ.displayName="MentionMenu";const _Z=(0,k.injectIntl)(FZ);var xZ=i(42239);const AZ=i(85).p06,BZ=i(85).EmK,DZ=i(85).Q6q,EZ=i(85).LCr,LZ=i(85).P3s,RZ=i(85).wgE,NZ=i(85).Drs,OZ=i(85).JJj,UZ=i(85).YGn;class VZ extends w.Z{constructor(){super(...arguments),this.cancelDragTimeout=void 0,this.handleDragOver=e=>{e[UZ](),this.startDrag(e),this.continueDragThrottled(e)},this.handleDrop=e=>{e[UZ]();const t=Array.from(e.dataTransfer.files);t.length>0&&Ci[OZ]({[NZ]:"NativeDragHandler.handleDrop",[RZ]:this[RZ],perform:e=>{xZ._4({[RZ]:this[RZ],files:t,[LZ]:"native_drag",[EZ]:e})}})},this.startDrag=e=>{xZ.f$(this[RZ],{startX:e.clientX,startY:e.clientY,stores:[],isNativeDrag:!0,getGhostElement:void 0})&&ah.clear(this[RZ])},this.continueDrag=e=>{this.cancelDragTimeout&&window.clearTimeout(this.cancelDragTimeout),this.cancelDragTimeout=window[DZ](this.cancelDrag,this.getCancelDragTimeoutMS()),xZ.td(this[RZ],{currentX:e.clientX,currentY:e.clientY})},this.continueDragThrottled=fe().throttle(this.continueDrag,VZ.dragOverThrottleMS),this.cancelDrag=()=>{xZ.cQ(this[RZ])}}didMount(){super.didMount(),window[BZ]("dragover",this.handleDragOver),window[BZ]("drop",this.handleDrop)}willUnmount(){super.willUnmount(),window[AZ]("dragover",this.handleDragOver),window[AZ]("drop",this.handleDrop)}getCancelDragTimeoutMS(){const{device:e}=this[RZ];return e.isLinux?2e3:200}}VZ.displayName="NativeDragHandler",VZ.dragOverThrottleMS=62.5;const WZ=VZ;var KZ=i(40902),zZ=i(44615),GZ=i(65311),HZ=i(19719),qZ=i(2688),jZ=i(12252),QZ=i(76487);const JZ=i(85).voC,$Z=i(85).EmK,YZ=i(85).s8y,XZ=i(85).LIR,eT=i(85).nSw,tT=i(85).GiO,iT=i(85).s3p,oT=i(85).SZh,nT=i(85).PR5,aT=i(85)._Xz,sT=i(85).xa7,rT=i(85).c0M,lT=i(85).FAH,dT=i(85).hkS,cT=i(85).kdG,uT=i(85).wT$,mT=i(85).Ttb,pT=i(85).wgE,gT=i(85).Ks4,hT=i(85).sq7,vT=i(85).tcW;class fT extends w.Z{constructor(){super(...arguments),this.lastEmitValue=-1,this[vT]=void 0,this[hT]=void 0,this[gT]=async(e,t)=>{if(t===this.lastEmitValue)return;if(this.lastEmitValue=t,!this.shouldFetchUserNotifications(String(t)))return;const i=await Rs.getUserNotifications(this[pT],{size:1e3});if("failed"===i.type)return;const{[mT]:o}=i.data;QZ.Z.setState({[mT]:o}),this.syncInitialBadgeNumber();const n=fe().union.apply(null,o.map((e=>e.unreceived.notificationIds)));for(const a of n)this.displayNotification(a)},this.handleNotificationEmitThrottled=fe().throttle(this[gT],1e3),this.handleNotificationEmitWhenActive=(e,t)=>{jZ.Z.whenActive((()=>{this.handleNotificationEmitThrottled(e,t)}))},this.listenerReference=void 0,this[uT]=()=>{const{[cT]:e}=this[pT],{allSpaces:t,[dT]:i}=this.getBadgeCounts();e&&(t===this[vT]&&i===this[hT]||e.setBadgeNumber(t,i),this[hT]=i),t!==this[vT]&&(t>0?ff.setBadge(`${t}`):ff.setBadge("")),this[vT]=t},this.syncInitialBadgeNumber=fe().once(this[uT])}willMount(){this[lT](),QZ.Z[rT](this[uT]),this[pT][cT]&&p.default[rT](this[uT])}didUpdate(e){e[sT].userId!==this.props[sT].userId&&(this[aT](),this[lT](),this[gT]("initializeListener",-1))}willUnmount(){this[aT](),QZ.Z[nT](this[uT]),this[pT][cT]&&p.default[nT](this[uT])}[lT](){const{[oT]:e}=p.default.state;if(e){const t=(0,zZ.getNotificationEventKey)(e.id);this.listenerReference=qZ.Z[rT](t,this.handleNotificationEmitWhenActive,void 0,this[pT])}}[aT](){this.listenerReference&&qZ.Z[nT](this.listenerReference,this[pT])}getBadgeCounts(){const e=QZ.Z.getTotalUnreadMentionsCount(),t=QZ.Z[iT]().mentions;return{allSpaces:e,[dT]:t}}async displayNotification(e){const t=(0,Ze.Kv)(this.props[sT],{table:GZ.uX,id:e});await t.load();const i=t.getValue();if(!i)return;const o=(0,T.getActivityStore)(t,i.activity_id,i.space_id);await o.load();const n=o.getValue(),a=o.getModel(),{[oT]:s,[tT]:r}=p.default.state;if(s&&r&&n&&a&&!n.invalid&&!KZ.isAuthoredByUser(n,s.id)&&await ff.isMainTabOrWindow()&&"undefined"!=typeof Notification){if(await r.load(),!r.isDefined())return;if(!a.isMentionType())return;if(!r.getNotifyDesktop())return;if(!this[pT].device.isDesktop)return;const e=(0,(await c.deps.desktop.loader()).Notification)({activity:n,[eT]:t[eT],userTimeZone:(0,Ds.r)(),intl:this.props.intl,[XZ]:qM.tY.PushNotification});if(!e)return;const{subject:i,body:s}=e,l=new Notification(i,{body:s,silent:!0}),d=KZ[YZ](n.type),u={medium:"desktop_push",type:d,badge_number:this.getBadgeCounts().allSpaces,notification_id:t.id,activity_id:o.id},m=e=>HZ.trackDesktopPushAction({[pT]:this[pT],args:u,action:e});m("sent"),l[$Z]("show",(()=>m("shown"))),l[$Z]("close",(()=>m("closed"))),l[$Z]("click",(()=>{const e=KZ.getUrlForActivity({activity:a,[JZ]:t[JZ],baseUrl:Xi.default.domainBaseUrl,[XZ]:qM.tY.PushNotification}),i=(0,qM.k6)(e,[d,"desktop_push"],qM.tY.PushNotification);Yi.navigate({[pT]:this[pT],url:i}),m("clicked")}))}}shouldFetchUserNotifications(e){return 0===QZ.Z.state[mT].length||(!document.hasFocus()||!e.includes("unreadCount"))}}fT.displayName="NotificationListener";const yT=(0,k.injectIntl)(fT);var bT=i(22889),ST=i(80935),wT=i(58261);const MT=i(85).Jrl,kT=i(85).Q0u,CT=i(85).XQm,ZT=i(85).EIp,TT=i(85).LIR,PT=i(85).wgE,IT=i(85).jDA,FT=i(85).TLr,_T=i(85).YGn,xT=i(85).XtO,AT=i(85).Juc,BT=i(85).ik9,DT=i(85).QmD,ET=i(85).tBn,LT=i(85).D7I,RT=i(85).S6b,NT=i(85).nx5,OT=i(85).iJA,UT=i(85).Joh;class VT extends w.Z{constructor(){super(...arguments),this[UT]=()=>n()(x.Z,{capture:!0,onEnter:this[OT],onCommandEnter:this.handleCommandEnter},void 0,a[LT](a[ET],null,n()(k.FormattedMessage,{[NT]:"Open page",id:"pageMentionOverlay.openPage"}),n()("div",{},void 0,n()(wT.Z,{onlyShowFirst:!0,name:"enter",style:{color:this.theme[RT]}})))),this[OT]=e=>{const t=this[BT][DT];if(!t)return;const{[AT]:i,[xT]:o}=t;if(!i)return;e[_T]&&e[_T]();const n=Ze.G[FT](o,{table:ri.iU,id:i});Yi[IT]({[xT]:n,[PT]:this[PT],visitType:bT.vu.Link,[TT]:qM.tY.MentionInPage})},this.handleCommandEnter=e=>{const t=this[BT][DT];if(!t)return;const{[AT]:i,[xT]:o}=t;if(!i)return;e[_T]();const n=Ze.G[FT](o,{table:ri.iU,id:i});Yi[IT]({[xT]:n,[PT]:this[PT],visitType:bT.vu.Link,openInNew:"tab",[TT]:qM.tY.MentionInPage})},this[BT]=this[ZT]((()=>{const e=Xp.default[DT];if("editing"!==e.mode)return;const t=(0,Jp.QY)(e[CT]);if(!t)return;const{[xT]:i,selection:o}=t;if(o.endIndex!==o[kT]+1)return;const n=i.getValue(),a=ci[MT](n,o[kT]);if(!a||!ci.isPageMentionToken(a))return;const[s]=ci.getPageMentions([a]);return{[AT]:s,[xT]:i}}))}renderComponent(){if(this[PT].device.isMobile)return;const e=ST.getSelectionRect(),t=this[BT][DT];return n()(Us.Z,{render:()=>{},[UT]:this[UT],originRect:e,forceVisibleState:Boolean(t&&e),placement:Us.Z.Placement.Bottom})}}VT.displayName="PageMentionOverlay";const WT=VT;var KT=i(52989),zT=i(69784);const GT=i(85).p06,HT=i(85).yrh,qT=i(85).EmK,jT=i(85).Un1,QT=i(85).i7F,JT=i(85).dnY,$T=i(85).wgE,YT=i(85).YGn,XT=i(85).QmD,eP=i(85).Ixn;class tP extends w.Z{constructor(){super(...arguments),this.handleKey=e=>{zT.Z[XT][eP]&&(e[YT](),KT.continueRectangularSelection({[$T]:this[$T],currentX:zT.Z[XT].currentX,currentY:zT.Z[XT].currentY,toggle:e[JT]}))},this[QT]=e=>{zT.Z[XT][eP]&&(e[YT](),KT.continueRectangularSelection({[$T]:this[$T],currentX:e.clientX,currentY:e.clientY,toggle:e[JT]}))},this[jT]=e=>{zT.Z[XT][eP]&&((0,sh.isPageNavigationEvent)(e)||e[YT](),KT.completeRectangularSelection(this[$T]))}}willMount(){window[qT]("keydown",this.handleKey),window[qT]("keyup",this.handleKey),window[qT](HT,this[QT]),window[qT]("mouseup",this[jT])}willUnmount(){window[GT]("keydown",this.handleKey),window[GT]("keyup",this.handleKey),window[GT](HT,this[QT]),window[GT]("mouseup",this[jT])}renderComponent(){return null}}tP.displayName="RectangularSelectionListener";const iP=tP;var oP=i(43008),nP=i(98104),aP=i(64951);const sP=i(85).cZW,rP=i(85).XuB,lP=i(85).EHj,dP=i(85).jtM,cP=i(85).GDw,uP=i(85).GBw,mP=i(85).nx5,pP=i(85).Yzm,gP=i(85).ncO,hP=i(85).AAM,vP=i(85).N1Z,fP=i(85)._lc,yP=i(85).hDW,bP=i(85).wgE,SP=i(85).XjH;class wP extends w.Z{constructor(){super(...arguments),this.renderPopupContent=()=>n()(kP,{})}[SP](){const{device:e}=this[bP],{[yP]:t,originRect:i}=aP.Z.state;return n()(re.ZP,{popupType:e.isMobile?re.ZP[fP].SlideUp:re.ZP[fP].Popup,open:Boolean(t),originRect:i,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,originGap:4,onDismiss:()=>oP[vP](this[bP]),render:this.renderPopupContent})}}wP.displayName="RenameFileMenuPopup";class MP extends w.Z{didMount(){const{[yP]:e}=aP.Z.state;if(!e)return;const t=e[hP]();t&&nP.selectAllText({[bP]:this[bP],store:t,canSelectAllBlocks:!1})}[SP](){const{device:e}=this[bP],{[yP]:t}=aP.Z.state;if(!t)return;const i=t[hP]();if(!i)return;let o;return o=e.isMobile?{menuType:Z.og.ActionSheet}:{menuType:Z.og.Popup,width:380},a.createElement(A.Z,o,n()("div",{style:this[gP]()},void 0,n()(vr.Z,{store:i,disabled:!t.canEdit(),onEsc:()=>oP[vP](this[bP]),onEnter:()=>oP[vP](this[bP]),[lP]:!0,[rP]:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,[sP]:this.props.intl[pP]({[mP]:uP,id:"renameFileMenuPopup.input.placeholder"}),style:this[cP](),pasteBehavior:dP})))}[gP](){return{display:"flex",alignItems:"center",color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}[cP](){return{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",position:"relative"}}}MP.displayName="LocalizableRenameFileMenu";const kP=(0,k.injectIntl)(MP),CP=wP;var ZP=i(52771),TP=i(82187);const PP=i(85).voC,IP=i(85).mPB,FP=i(85).v8g,_P=i(85).ULC,xP=i(85).cZW,AP=i(85).MHP,BP=i(85).XuB,DP=i(85).EHj,EP=i(85).pkR,LP=i(85).jtM,RP=i(85).GDw,NP=i(85).Aw$,OP=i(85).ncO,UP=i(85).AAM,VP=i(85).LCr,WP=i(85).Drs,KP=i(85).JJj,zP=i(85).xrO,GP=i(85).N1Z,HP=i(85)._lc,qP=i(85).wgE,jP=i(85).XjH,QP=i(85).QmD;class JP extends w.Z{constructor(){super(...arguments),this.renderPopupContent=()=>{const{renderDelete:e}=TP.Z[QP];return n()(YP,{renderDelete:Boolean(e)})}}[jP](){const{device:e}=this[qP],{clonedBlockStore:t,originRect:i}=TP.Z[QP];return n()(re.ZP,{popupType:e.isMobile?re.ZP[HP].SlideUp:re.ZP[HP].Popup,open:Boolean(t),originRect:i,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,originGap:4,onDismiss:()=>ZP[GP](this[qP]),render:this.renderPopupContent})}}JP.displayName="RenamePageMenuPopup";class $P extends w.Z{constructor(){super(...arguments),this[zP]=e=>{const{clonedBlockStore:t}=TP.Z[QP];if(t){const i=t.getIconStore();i&&Ci[KP]({[WP]:"RenamePageMenuPopup.handleRecordIconChange",[qP]:this[qP],perform:t=>{Mi.setValue({store:i,value:e,[VP]:t})}})}}}didMount(){const{clonedBlockStore:e}=TP.Z[QP];if(!e)return;const t=e[UP]();t&&nP.selectAllText({[qP]:this[qP],store:t,canSelectAllBlocks:!1})}[jP](){const{device:e}=this[qP],{clonedBlockStore:t}=TP.Z[QP];if(!t)return;const i=t[UP]();if(!i)return;const{renderDelete:o}=this.props;let s;return s=e.isMobile?{menuType:Z.og.ActionSheet}:{menuType:Z.og.Popup,width:380},a.createElement(A.Z,s,n()("div",{style:this[OP]()},void 0,this.renderIcon(t),n()(vr.Z,{store:i,[EP]:!t[NP](),onEsc:()=>ZP[GP](this[qP]),onEnter:()=>ZP[GP](this[qP]),[DP]:!0,[BP]:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,[AP]:!0,[xP]:this.renderEmptyTitlePlaceholder(),style:this[RP](),pasteBehavior:LP}),o&&t[NP]()&&this.renderDeleteButton()))}renderDeleteButton(){return n()(oS.Z,{icon:e=>si.Z.trash({height:20,width:20,...e}),style:{marginLeft:6},hasBackground:!0,isDarkIconColor:!0,showShadow:!0,onClick:async()=>{const{originalBlockStore:e}=TP.Z[QP];e&&await nh[_P]({[qP]:this[qP],blocks:[e]}),ZP[GP](this[qP])}})}renderIcon(e){const t={width:28,height:28,marginRight:6,flexShrink:0,flexGrow:0,boxShadow:`inset 0 0 0 1px ${this.theme.darkDividerColor}`};if(e[NP]()){var i,o;const a=null===(i=e.getIconStore())||void 0===i?void 0:i.table;return n()(Xf.Z,{[EP]:!1,bucket:"secure",store:e,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:18,style:t,iconLoggingData:{recordTable:a,source:"breadcrumb",block_type:e.getType(),[FP]:"collection"===a?null===(o=e.getIconStore())||void 0===o?void 0:o.id:void 0},onChange:this[zP]})}return n()(Xf.Z,{[EP]:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:18,style:t})}renderEmptyTitlePlaceholder(){const{clonedBlockStore:e}=TP.Z[QP],{intl:t}=this.props;if(null!=e&&e.isDefined())return e.getModel()[IP]({[PP]:e[PP],userTimeZone:(0,Ds.r)(),intl:t})}[OP](){return{display:"flex",alignItems:"center",color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}[RP](){return{display:"block",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",position:"relative"}}}$P.displayName="LocalizableRenamePageMenu";const YP=(0,k.injectIntl)($P),XP=JP;var eI=i(4083),tI=i(13264);const iI=i(85)._lc,oI=i(85).D7I,nI=i(85).Tay,aI=i(85).wJk,sI=i(85).O8Z,rI=i(85).nKY,lI=i(85).iVN,dI=i(85).nx5,cI=i(85).ceT,uI=i(85).dLQ,mI=i(85).vIB,pI=i(85).hDW,gI=i(85).DZV,hI=i(85).cS_,vI=i(85).wgE,fI=i(85).MMc;class yI extends w.Z{constructor(){super(...arguments),this[fI]=()=>{const{device:e}=this[vI];if(tI.Z.state.open){const{[hI]:t,[gI]:i,[pI]:o,[mI]:s}=tI.Z.state;let r;return r=e[uI]?{[cI]:Z.og.Modal,title:n()(k.FormattedMessage,{[dI]:"Comments",id:"discussion.mobileReplyMenu.title"}),right:n()(k.FormattedMessage,{[dI]:"Close",id:"discussion.mobileReplyMenu.closeButton.label"}),[lI]:()=>eI[rI](this[vI]),whiteBackground:!0}:{[cI]:Z.og.Popup,width:420,maxWidth:e[sI]?"80vw":"100%"},a[oI](A.Z,ht()({className:yt.discussionReplyMenu},r),n()(F.Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>n()(c.LazyDiscussion,{store:t,[gI]:i,[aI]:()=>eI[rI](this[vI]),format:C.O2.Menu,isFirst:!0,isOnly:!0,[mI]:s,[nI]:!0,[pI]:o})}))}}}renderComponent(){const{device:e}=this[vI],{open:t,rect:i}=tI.Z.state;return n()(re.ZP,{popupType:e[uI]?re.ZP[iI].SlideUp:re.ZP[iI].Popup,open:t,originRect:i,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Center,originGap:4,[aI]:()=>eI[rI](this[vI]),render:this[fI]})}}yI.displayName="ReplyDiscussionMenu";const bI=yI;var SI=i(70279),wI=i(80503),MI=i(93286),kI=i(56863),CI=i(92022),ZI=i(23223),TI=i(40959),PI=i(87078),II=i(45162),FI=i(67669),_I=i(15723),xI=i(45214),AI=i(17903),BI=i(4548),DI=i(42057),EI=i(49557),LI=i(4935),RI=i(99757),NI=i(13966),OI=i(64131),UI=i(82945),VI=i(40464),WI=i(32404),KI=i(73383);const zI=i(85)._Fe,GI=i(85).$p1,HI=i(85).W5t,qI=i(85).Er3,jI=i(85).sQ5,QI=i(85).Wmz,JI=i(85).ypL,$I=i(85).GPw,YI=i(85).auS,XI=i(85).PXg,eF=i(85).NbQ,tF=i(85).tvI,iF=i(85).ChN,oF=i(85).S6b,nF=i(85).UA5,aF=i(85).PG2,sF=i(85).X5t,rF=i(85).PLZ,lF=i(85).vN2,dF=i(85).Ryv,cF=i(85).bSA,uF=i(85).qLW,mF=i(85).PlO,pF=i(85).Joh,gF=i(85).a3v,hF=i(85).XNW,vF=i(85).F7y,fF=i(85).NLk,yF=i(85).jkI,bF=i(85).Yzm,SF=i(85).nx5,wF=i(85).Isv,MF=i(85).Q$G,kF=i(85).YGn,CF=i(85).u3c,ZF=i(85).NF1,TF=i(85).Au,PF=i(85).Je3,IF=i(85).H1U,FF=i(85).rOg,_F=i(85).PR5,xF=i(85).c0M,AF=i(85).mhc,BF=i(85).QJh,DF=i(85).FOQ,EF=i(85).QSf,LF=i(85).Aw$,RF=i(85).y6y,NF=i(85)._U_,OF=i(85).qI$,UF=i(85).CtD,VF=i(85).EIp,WF=i(85).LKA,KF=i(85).lAz,zF=i(85).Wp_,GF=i(85).Xte,HF=i(85).l9D,qF=i(85).X_m,jF=i(85).xcH,QF=i(85).jYy,JF=i(85).h2B,$F=i(85).zPU,YF=i(85).wgE,XF=i(85).g65,e_=i(85).FqN,t_=i(85).zkl,i_=i(85).XtO,o_=i(85).XQm,n_=i(85).o1V,a_=i(85).Ljm,s_=i(85).D7I,r_=i(85).LlE,l_=i(85).BQ6,d_=i(85).vK9,c_=i(85).AIq,u_=i(85).Jkr,m_=i(85).EMU,p_=i(85).sM5,g_=i(85).tLG,h_=i(85).z$9,v_=i(85).qc1,f_=i(85).WDO,y_=i(85).AEP,b_=i(85).QmD,S_=i(85).Ixn,w_=i(85).Jhh,M_=i(85).ywA;class k_ extends w.Z{constructor(){super(...arguments),this.mouseIsDownExternally=!1,this[M_]=void 0,this.completionContextOnOpen=void 0,this[w_]=()=>{const{[S_]:e}=EI.Z[b_];return n()(ch.Z,{isVisible:e,enterAnimationStyle:{[y_]:0},animationStyle:{[y_]:1},exitAnimationStyle:{[y_]:0},springConfig:{[y_]:{stiffness:100,damping:10,precision:1e-4}},render:this.renderAnimated,onAnimationEnd:this[f_]})},this.renderAnimated=()=>{const{top:e,left:t}=EI.Z[b_],i=this.canOnlyDiscussStore[b_],o=Math.max(i?t:t-k_.leftOffset,0),s=i?"12px 0":12;return n()("div",{className:yt.textActionMenu,[l_]:{[v_]:h_,position:g_,top:e,left:0,[p_]:m_,[u_]:"100%"}},void 0,n()("div",{[l_]:{[c_]:1,[u_]:o,[d_]:24}}),(0,rh.Z)((e=>a[s_]("div",ht()({[l_]:{[v_]:h_,[r_]:s}},e),this[M_]&&this.renderMenu(this[M_])))),n()("div",{[l_]:{flexGrow:1,[c_]:1,[d_]:36}}))},this[a_]=()=>{const e=EI.Z[b_];if(ny.Z[b_].open||LI.Z[b_].open)return;if(RI.n[b_])return kI[n_]();const t=Xp.default[b_];if("empty"===t.mode)return kI[n_]();const i=(0,II.L5)(t[o_]);if(0===i.length)return kI[n_]();if(!i.every((e=>{let{[i_]:t}=e;return t[t_]===ri.iU||t[t_]===SI.x_||t[t_]===li.v})))return kI[n_]();if(!this[YF][XF][e_]()||!i.every((e=>{let{[i_]:t}=e;return t.canComment()})))return;const o=ST.get();if(Ti.isEditingCurrentPage())return kI[n_]();if(i.some((e=>{let{editable:t}=e;return t.props.disableAnnotation})))return kI[n_]();if(i.some((e=>{let{editable:t}=e;return t.props.disabled})))return kI[n_]();const n=i.map((e=>{let{editable:t}=e;return t[$F]()}));if(n.some(((e,t)=>e&&i[t][i_][t_]!==SI.x_&&(e.isLocked()||e[JF]()))))return kI[n_]();if(this.mouseIsDownExternally&&e[QF]!==n[0])return kI[n_]();const a=i.some((e=>{let{[i_]:t}=e;const i=t[jF]();if(!(i instanceof Ze.G))return!1;const o=i.getValue();return!!o&&k_.richTextMenuBlockTypesDenylist[o.type]}));if(a)return kI[n_]();const s=o?ST.getRect(o):void 0;if(s&&!_I.kK(s,(0,PI.Z)()))return kI[n_]();if(TP.Z[S_]()||aP.Z[S_]()||Uv.Z.isOpen()||a||!o||!this.hasNonCollapsedTextSelection()||xI.Z[b_].open)return kI[n_]();let r=0,l=0;if(s){r=s.left;const e=25,t=s.top-k_[qF]-e,i=wI.R6(this[YF].device[HF]),o=this[YF][GF][b_][qF]-k_[qF]-e;l=Math.min(Math.max(t,i),o)}0===Math.abs(EI.Z[b_].top-l)&&Math.abs(EI.Z[b_].left-r)<10&&(l=EI.Z[b_].top,r=EI.Z[b_].left),EI.Z[zF]({...EI.Z[b_],[S_]:!0,isAnimatingClosed:!1,top:l,left:r,[QF]:Te.default[b_].stores[0]})},this[KF]=fe().throttle(this[a_],200,{leading:!1}),this[f_]=()=>{EI.Z[b_][S_]||EI.Z[zF]({...EI.Z[b_],isAnimatingClosed:!1}),this[M_]=this[WF][b_]},this[WF]=this[VF]((()=>{const{[S_]:e,[QF]:t}=EI.Z[b_],i=Xp.default[b_];if(!e||"empty"===i.mode)return;const{[o_]:o}=i,n=(0,Jp.qS)(o),a=Xp.default.isEditingComment(),s=Xp.default.isEditingCaption(),r=t&&t[UF]()===li.v,l=n&&t&&o[OF][i_]===t.getCollectionViewSourceDescriptionStore(),d=this[NF]&&this[NF][RF][b_],c=!(0,FI.hasPublicEditModeButCannotEdit)(d)&&(o[OF][i_][LF]()&&o.end[i_][LF]()),u=t&&t[EF](),m=u&&k_.richTextMenuActionsDenylist[u],p=null==t?void 0:t.isType(DF),g=(0,ZI.td)(o[OF][i_])||(0,ZI.td)(o.end[i_]),h={isSingleStoreSelection:n,showTurnInto:Boolean(n&&!a&&!r&&!l&&!s&&t&&c&&!p&&!Yp.default.isMiniPeekOpen()),showBold:Boolean(c),showItalic:Boolean(c),showStrikethrough:Boolean(c),showUnderline:Boolean(c),showCode:Boolean(c),showLink:Boolean(n&&c),showHighlight:Boolean(c),showDiscuss:Boolean(!a&&t&&!r&&!l&&!g&&!Yp.default.isMiniPeekOpen()),showEquation:Boolean(n&&c),showMention:Boolean(n&&!a&&t&&!r&&c),[BF]:Boolean(n&&!a&&!s&&t&&!r&&!Yp.default.isMiniPeekOpen()),[QF]:t,isComment:a,[AF]:Boolean((0,Fi.GD)(this[YF],d)&&c&&!a&&!s&&t&&!r&&!l&&!p&&!g)};if(m&&m.size>0)for(const v of m)h[v]=!1;return h})),this.canOnlyDiscussStore=this[VF]((()=>{const e=this[WF][b_];return e&&e.showDiscuss&&!e.showBold}))}didMount(){Te.default[xF](this[KF]),Xp.default[xF](this[KF]),AI.Z[xF](this[a_]),DI.Z[xF](this[a_]),BI.Z[xF](this[a_])}willUnmount(){Xp.default[_F](this[KF]),Te.default[_F](this[KF]),AI.Z[_F](this[a_]),DI.Z[_F](this[a_]),BI.Z[_F](this[a_])}willMountOrUpdate(){const e=this[WF][b_];e&&(this[M_]=e)}renderComponent(){const{[S_]:e,isAnimatingClosed:t}=EI.Z[b_];return n()(np.Z,{open:e||t},void 0,this[w_]())}renderMenu(e){const{[S_]:t}=EI.Z[b_];return n()("div",{[l_]:{[p_]:FF,[IF]:"stretch",[qF]:k_[qF],background:this[TF][PF],overflow:"hidden",fontSize:14,lineHeight:1.2,[ZF]:5,boxShadow:this[TF][CF],[v_]:t?"auto":h_},onMouseDown:e=>e[kF]()},void 0,e[AF]&&this.renderCompletionsButton(),e.showTurnInto&&e[QF]&&this.renderTurnInto(e[QF]),e.showLink&&this.renderLinkButton(!0),e.showDiscuss&&e[QF]&&this.renderCommentButton(e[QF]),n()("div",{[l_]:{[p_]:m_}},void 0,e.showBold&&this.renderBoldButton(),e.showItalic&&this.renderItalicButton(),e.showUnderline&&this.renderUnderlineButton(),e.showStrikethrough&&this.renderStrikethroughButton(),e.showCode&&this.renderCodeButton(),e.showEquation&&this.renderEquationButton()),e.showHighlight&&n()(OI.Z,{[l_]:this[MF]()}),e.showMention&&this.renderMention(),e[BF]&&e[QF]&&this[wF](e[QF]))}renderTurnInto(e){let t=n()(k.FormattedMessage,{[SF]:"Turn into",id:"richTextMenu.turnIntoButton.label"});const{intl:i}=this.props,o=e[EF]();if(o){const e=TI.Hc[o];t=e&&e.displayName||t}return n()(no.ZP,{popupType:no.Z4.Popup,buttonPopupStore:LI.Z,originGap:4,renderOrigin:e=>n()(Us.Z,{[pF]:()=>i[bF]({[SF]:"Turn into",id:"richTextMenu.turnIntoButton.tooltip"}),render:i=>a[s_](Yf.Z,ht()({[l_]:{[p_]:m_,[IF]:yF,[r_]:"0 8px",[fF]:vF,...this[MF]()}},(0,tS.Z)(e,i)),t,si.Z.chevronDown({[u_]:10,[hF]:4,fill:this[TF][gF]}))}),render:()=>n()(A.Z,{menuType:Z.og.Popup},void 0,n()(Fe.Z,{context:{blocks:[e],[YF]:this[YF],[mF]:void 0},sections:[MI.gH],onAccept:t=>{const i=e[EF](),o=e[uF]();kI[n_](),be.trackBlockAction(this[YF],{[cF]:t[cF],from:dF,block_id:e.id,[lF]:i,is_toggleable:i?(0,ke.isToggleOrToggleableFormatBlockType)(i,o):void 0})}})),[aF]:()=>{be[rF](this[YF],{[sF]:"turn_into"})}})}renderBoldButton(){return n()(VI.Z,{type:"b",tooltipLabel:n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Bold",id:"richTextMenu.boldButton.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"toggleBold"})))},void 0,n()("span",{[l_]:{[iF]:pi.Z[iF].semibold}},void 0,"B"))}renderItalicButton(){return n()(VI.Z,{type:"i",tooltipLabel:n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Italicize",id:"richTextMenu.italicsButton.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"toggleItalics"})))},void 0,n()("span",{[l_]:{fontStyle:"italic"}},void 0,"i"))}renderStrikethroughButton(){return n()(VI.Z,{type:"s",tooltipLabel:n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Strike-through",id:"richTextMenu.strikeThroughButton.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"toggleStrike"})))},void 0,n()("span",{[l_]:{[tF]:"line-through"}},void 0,"S"))}renderUnderlineButton(){return n()(VI.Z,{type:"_",tooltipLabel:n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Underline",id:"richTextMenu.underlineButton.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"toggleUnderline"})))},void 0,n()("span",{[l_]:{[tF]:eF}},void 0,"U"))}renderCodeButton(){return n()(VI.Z,{type:"c",[l_]:{[r_]:"0 6px"},tooltipLabel:n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Mark as code",id:"richTextMenu.markAsCodeButton.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"toggleCode"})))},void 0,si.Z.code({[u_]:15,[qF]:15}))}renderLinkButton(e){const t=this[YF].device.isMobile;return n()(KI.Z,{[l_]:this[MF]()},void 0,e&&si.Z.alias({[u_]:t?18:16,[qF]:t?18:16,[XI]:4,fill:this[TF][YI]}),n()("span",{[l_]:{[$I]:`1px solid ${this[TF][JI]}`}},void 0,n()(k.FormattedMessage,{[SF]:"Link",id:"richTextMenu.linkButton.tooltip"})))}renderCompletionsButton(){const{intl:e}=this.props;return n()(Us.Z,{[pF]:()=>a[s_](a.Fragment,null,n()("div",{},void 0,e[bF]({[SF]:"Ask AI to help edit, review, or generate text.",id:"richTextMenu.assist.tooltip"})),n()("div",{},void 0,n()(wT.Z,{[l_]:{[nF]:this[TF][oF]},name:"commandJ"}))),render:e=>a[s_](Yf.Z,ht()({[l_]:{[p_]:m_,[IF]:yF,[r_]:"0 8px",[fF]:vF,...this[MF]()}},e,{[aF]:()=>{(0,CI.hr)({from:dF,[YF]:this[YF]}),be[rF](this[YF],{[sF]:"completions"})}}),si.Z.sparkles({[u_]:16,[qF]:16,fill:oh.FN.light[QI][jI],[XI]:4}),n()("span",{[l_]:{[nF]:oh.FN.light[QI][jI],[iF]:500}},void 0,n()(k.FormattedMessage,{[SF]:"Ask AI",id:"richTextMenu.assistButton.label"})))})}renderEquationButton(){return n()(WI.Z,{[l_]:this[MF](),[aF]:()=>{be[rF](this[YF],{[sF]:"e"}),kI[n_]()}},void 0,si.Z.equation({[u_]:16,[qF]:16}))}renderMention(){return n()(Us.Z,{[pF]:()=>n()(a.Fragment,{},void 0,n()("div",{},void 0,n()(k.FormattedMessage,{[SF]:"Mention a person,{br}page, or date",id:"richTextMenu.mentionButton.tooltip",values:{br:n()("br",{})}})),n()("div",{[l_]:{[nF]:this[TF][oF]}},void 0,"@")),render:e=>a[s_](Yf.Z,ht()({[l_]:{...this[MF](),[r_]:"0 8px"}},e,{[aF]:()=>{ik.lZ(this[YF],{page:!0,[qI]:!0,user:!0,bot:!0,date:!0,reminder:!0,[HI]:!0,group:!0}),be[rF](this[YF],{[sF]:GI})}}),si.Z[GI]({[u_]:14,fill:this[TF][zI]}))})}renderCommentButton(e){return n()(UI.Z,{[l_]:this[MF](),blockStore:e})}[wF](e){return n()(NI.Z,{[i_]:e,[l_]:{borderRight:h_,[ZF]:0,[r_]:0,[u_]:30,[qF]:h_},iconStyle:{fill:this[TF][zI]},fadeIn:!1,[aF]:()=>{be[rF](this[YF],{[sF]:"more"})}})}hasNonCollapsedTextSelection(){const e=ST.get();return!!e&&!e.collapsed&&"empty"!==Xp.default[b_].mode&&!(0,Jp.iG)(Xp.default[b_][o_])}[MF](){return{boxShadow:`1px 0 0 ${this[TF].regularDividerColor}`,[XI]:1}}}k_.displayName="RichTextMenu",k_.richTextMenuBlockTypesDenylist={[M.Ti.factory]:!0},k_.richTextMenuActionsDenylist={[M.Ti.code]:new Set(["showMention","showCode",AF]),[M.Ti[t_]]:new Set(["showTurnInto",BF,AF]),[M.Ti.tableRow]:new Set(["showTurnInto",BF,AF])},k_.leftOffset=60,k_[qF]=32;const C_=(0,k.injectIntl)(k_);var Z_=i(14248),T_=i(14714),P_=i(70183),I_=i(93959),F_=i(92628),__=i(12211),x_=i(50628);const A_=i(85).X_m,B_=i(85).sy7,D_=i(85).wUz,E_=i(85).E0z,L_=i(85).GCx,R_=i(85).nm$,N_=i(85).P0R,O_=200;var U_;function V_(e){return e.type===U_.Selectable?{type:ip.Dl.Selectable,store:e[R_][N_].store,[L_]:e[L_]}:{type:ip.Dl.DropTarget,key:e[R_][N_].dropTargetKey,[L_]:e[L_]}}function W_(e){const{[R_]:t,[E_]:i,[L_]:o,points:n}=e;return o===ip.vh.Onto||!i.isPhone||t[N_].dropzoneShouldNeverUseOrigin?n.mousePoint:{x:n.originPoint.x,y:n.mousePoint.y}}function K_(e){return e instanceof F_.Z?{type:U_.Selectable,[R_]:e}:{type:U_.DropTarget,[R_]:e}}function z_(e){if(!(e&&e instanceof F_.Z))return!1;let t=e;const i=ip.ZP.state;if(!i.isDragging)return!1;const{draggedStores:o}=i;for(;t;){if(o.indexOf(t[N_].store)>=0)return!0;t=t[D_]()}return!1}function G_(e){const{[B_]:t,[E_]:i}=e;return t?0:i.isPhone?9999:0}function H_(e){switch(e[L_]){case ip.vh.Onto:return function(e){const{[E_]:t,isNativeDrag:i,rect:o,[R_]:n,points:a,priority:s,canAcceptDrop:r}=e,l=ip.vh.Onto,d=W_({[E_]:t,[R_]:n,[L_]:l,points:a});if((i?n[N_].canNativeDropOnto:n[N_].canDropOnto)&&j_(d,o)&&!z_(n)&&r(n,l))return{...K_(n),[L_]:l,left:o.left,top:o.top,width:o.width,[A_]:o[A_],priority:s}}(e);case ip.vh.Left:return function(e){const{[E_]:t,isNativeDrag:i,rect:o,[R_]:n,points:a,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=ip.vh.Left,c=W_({[E_]:t,[R_]:n,[L_]:d,points:a});if((i?n[N_].canNativeDropLeft:n[N_].canDropLeft)&&o&&c.y>=o.top&&c.y<=o.bottom&&Math.abs(c.x-o.left)<=200&&(r||!z_(n))&&l(n,d))return{...K_(n),[L_]:d,left:o.left,top:o.top,width:0,[A_]:o[A_],priority:s}}(e);case ip.vh.Right:return function(e){const{[E_]:t,isNativeDrag:i,rect:o,[R_]:n,points:a,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=ip.vh.Right,c=W_({[E_]:t,[R_]:n,[L_]:d,points:a});if((i?n[N_].canNativeDropRight:n[N_].canDropRight)&&o&&c.y>=o.top&&c.y<=o.bottom&&Math.abs(c.x-o.right)<=O_&&(r||!z_(n))&&l(n,d))return{...K_(n),[L_]:d,left:o.right,top:o.top,width:0,[A_]:o[A_],priority:s}}(e);case ip.vh.Above:return function(e){const{[E_]:t,isNativeDrag:i,rect:o,[R_]:n,points:a,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=G_({[B_]:n[N_][B_],[E_]:t}),c=ip.vh.Above,u=W_({[E_]:t,[R_]:n,[L_]:c,points:a});if((i?n[N_].canNativeDropAbove:n[N_].canDropAbove)&&o&&u.x>=o.left-14-d&&u.x<=o.right+d&&(r||!z_(n))&&l(n,c))return{...K_(n),[L_]:c,left:o.left,top:o.top,width:o.width,[A_]:0,priority:s}}(e);case ip.vh.Below:return function(e){const{[E_]:t,isNativeDrag:i,rect:o,[R_]:n,points:a,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=G_({[B_]:n[N_][B_],[E_]:t}),c=ip.vh.Below,u=W_({[E_]:t,[R_]:n,[L_]:c,points:a});if((i?n[N_].canNativeDropBelow:n[N_].canDropBelow)&&o&&u.x>=o.left-14-d&&u.x<=o.right+d&&(r||!z_(n))&&l(n,ip.vh.Below))return{...K_(n),[L_]:ip.vh.Below,left:o.left,top:o.bottom,width:o.width,[A_]:0,priority:s}}(e)}}function q_(e){const{[E_]:t,rect:i,[R_]:o,points:n,optionKeyDown:a}=e;return j_(W_({[E_]:t,[R_]:o,[L_]:ip.vh.Onto,points:n}),i)&&z_(o)&&!a}function j_(e,t){return Boolean(t&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)}!function(e){e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget"}(U_||(U_={}));var Q_=i(28314),J_=i(19109),$_=i(35026),Y_=i(17031),X_=i(27406),ex=i(81844),tx=i(16339),ix=i(95802),ox=i(91681),nx=i(86486);const ax=i(85).KLF,sx=i(85)._kn,rx=i(85).C64,lx=i(85).mFu,dx=i(85).TLr,cx=i(85).w3Q,ux=i(85).sP9,mx=i(85).NRr,px=i(85).fBu,gx=i(85).i8v,hx=i(85).zof,vx=i(85).Rzc,fx=i(85).wj5,yx=i(85).ML3,bx=i(85).GCx,Sx=i(85).XML,wx=i(85).osL,Mx=i(85).eiN,kx=i(85).pAK,Cx=i(85).P0R,Zx=i(85).wUz,Tx=i(85).XtO,Px=i(85)._fk,Ix=i(85).ED5,Fx=i(85).tTd,_x=i(85).NvW,xx=i(85).n8q,Ax=i(85).Wp_,Bx=i(85).PR5,Dx=i(85).JgC,Ex=i(85).c0M,Lx=i(85).yrh,Rx=i(85).A_N,Nx=i(85).KMS,Ox=i(85).y6y,Ux=i(85)._U_,Vx=i(85).PlO,Wx=i(85).R2n,Kx=i(85).n3m,zx=i(85).JRM,Gx=i(85).q$P,Hx=i(85).SbU,qx=i(85).$9W,jx=i(85).dBs,Qx=i(85).ZG6,Jx=i(85).VDc,$x=i(85).QBz,Yx=i(85).xHZ,Xx=i(85).Amb,eA=i(85).unR,tA=i(85).E6w,iA=i(85).wgE,oA=i(85).E0z,nA=i(85).qnp,aA=i(85).nm$,sA=i(85).WCo,rA=i(85).QmD,lA=i(85).eet,dA=i(85).B3G,cA=i(85).iIE;class uA extends w.Z{constructor(){super(...arguments),this[cA]=!1,this.didTouchEnd=!1,this[dA]=void 0,this[lA]=e=>{const t=nx.default[rA];if(!e||t[sA]&&t.menuIsOpen||(this[dA]={[aA]:e[aA],x:e.clientX,y:e.clientY}),this.didTouchEnd)return void(this.didTouchEnd=!1);const{[nA]:i}=ip.ZP[rA];if(i){this.updateDragState();const{[oA]:e}=this[iA];e[tA]&&ma.default[eA]("mobile_show_six_dot_menu")&&(this[dA]=void 0)}else{if(!this[dA])return;this.updateHoverState(this[dA][aA],this[dA].x,this[dA].y)}},this[Xx]=()=>{this[cA]||this[Yx](void 0)},this[Yx]=fe().throttle((e=>My.Z[$x]((()=>this[lA](e)))),60),this[Jx]=()=>{const{[nA]:e}=ip.ZP[rA];ti.default[Qx]((()=>{this[dA]&&!e&&this.updateHoverState(this[dA][aA],this[dA].x,this[dA].y)}))},this[jx]=fe().throttle(this[Jx],60),this[qx]=()=>{const{[nA]:e}=ip.ZP[rA];e&&this.updateDragState()},this[Hx]=()=>{this.didTouchEnd=!0},this.handleWindowScroll=()=>{ah[Gx](),this.clearHoverState()},this[zx]=()=>{ah[Gx]();const{[oA]:e}=this[iA];e[tA]&&ma.default[eA]("mobile_show_six_dot_menu")||this.clearHoverState()},this[Kx]=()=>{const e=nx.default[rA],t=Ti.menuIsOpenStore[rA];e[sA]&&!e.menuIsOpen&&t&&nx.default.reset(),this[iA][oA][tA]&&ma.default[eA]("mobile_show_six_dot_menu")&&(this[dA]=void 0)},this[Wx]=new WeakMap,this.memoizedCanDrag=e=>{const t=this[Wx].get(e);if(this[Wx].has(e))return t;const i=(0,P_.canDrag)({[iA]:this[iA],blocks:e,[Vx]:this[Ux]&&this[Ux][Ox][rA]});return this[Wx].set(e,i),i},this[Nx]=e=>(null==e?void 0:e.priority)??0}didMount(){super.didMount();const{[oA]:e}=this[iA];Tf[Rx](window,Lx,this[Yx]),Te.default[Ex](this[jx]),e.isIOS&&Tf[Rx](window,"touchend",this[Hx]),Tf[Rx](window,"keydown",this[qx]),Tf[Rx](window,"keyup",this[qx]),ip.ZP[Ex](this[Xx]),Tf[Rx](window,"scroll",this.handleWindowScroll,!0),Tf[Rx](window,"resize",this[zx]),Ti.menuIsOpenStore[Ex](this[Kx]),ah.recomputeSelectableRects()}willUnmount(){super.willUnmount();const{[oA]:e}=this[iA];Tf[Dx](window,Lx,this[Yx]),Te.default[Bx](this[jx]),e.isIOS&&Tf[Dx](window,"touchend",this[Hx]),Tf[Dx](window,"keydown",this[qx]),Tf[Dx](window,"keyup",this[qx]),ip.ZP[Bx](this[Xx]),Tf[Dx](window,"scroll",this.handleWindowScroll,!0),Tf[Dx](window,"resize",this[zx]),Ti.menuIsOpenStore[Bx](this[Kx])}updateDragState(){if(this[cA])throw new Error("Assertion failure, updateDragState() called when this.isUpdatingDragState === true!");this[cA]=!0;try{this.updateDragStateInner()}finally{this[cA]=!1}}updateDragStateInner(){const e=ip.ZP[rA];if(!e[nA])return;const{draggedStores:t,currentX:i,currentY:o,offsetX:n,offsetY:a,isNativeDrag:s}=e,r={x:i,y:o},l={x:i-n,y:o-a},d=this.findNearbyDropZones({mousePoint:r,originPoint:l},t[0],s);if(d.ontoDropZone)ip.ZP[Ax]({...e,[xx]:d.ontoDropZone,[_x]:[],[Fx]:void 0});else if(d.verticalDropZone)ip.ZP[Ax]({...e,[xx]:d.verticalDropZone,[_x]:[],[Fx]:void 0});else{if(d[Ix].length>0){const t=d[Ix][0],i=fe().tail(d[Ix]);if(t.type===ip.Dl.Selectable){const o=ix.C[Px](t[Tx]);if(o){const n=o[Zx]();let a;return n&&n[Cx][Tx]!==t[Tx]&&n[Cx].shouldShowParentHalo&&(a=n[Cx][Tx]),void ip.ZP[Ax]({...e,[xx]:t,[_x]:i,[Fx]:a})}}else{if(X_.Z.findDropTargetFromKey(t.key))return void ip.ZP[Ax]({...e,[xx]:t,[_x]:i,[Fx]:void 0})}}ip.ZP[Ax]({...e,[xx]:void 0,[_x]:[],[Fx]:void 0})}}clearHoverState(){const e=nx.default[rA];e[sA]&&!e.menuIsOpen&&nx.default.reset()}updateHoverState(e,t,i){const o=nx.default[rA];if(!o[sA]||!o.menuIsOpen){const n=this.findHoverMenuTarget(e,t,i);n?o[sA]&&n[kx][Cx][Tx]===o.currentStore||nx.default[Ax]({[sA]:!0,currentStore:n[kx][Cx][Tx],container:n.container,menuIsOpen:!1}):nx.default.reset()}}getHighestDropZonePriorityRects(e){const t=this[Nx](fe().maxBy(e,this[Nx]));return e[Mx]((e=>this[Nx](e)===t))}getSelectableContainerPriority(e){return(Te.default[rA][wx]||[]).indexOf(e)}findNearbyDropZones(e,t,i){const{[oA]:o}=this[iA],n=Q_.yA(),a=function(){const{selectableRectMap:e}=x_.Z.state,{dropTargetRectMap:t}=__.Z.state,i=new Map;return e.forEach(((e,t)=>{i.set(t,e)})),t.forEach(((e,t)=>{i.set(t,e)})),i}(),s=a.keys();let r=s.next();const l=ix.C[Px](t),d=l?l[Sx]():void 0;let c=[];for(;!r.done;){const t=r.value;r=s.next();const l=a.get(t),u=t[Sx]();if(o[tA]&&u!==d)continue;if(!u||u[Cx].disable)continue;const m=this.getSelectableContainerPriority(u),p={[oA]:this[iA][oA],isNativeDrag:i,rect:l,[aA]:t,points:e,priority:m,optionKeyDown:n.option,canAcceptDrop:(e,t)=>this.selectableCanAcceptDrop(e,t,n.option)};if(q_(p))return{ontoDropZone:void 0,verticalDropZone:void 0,[Ix]:[]};c.push(...fe().compact([H_({...p,[bx]:ip.vh.Onto}),H_({...p,[bx]:ip.vh.Left}),H_({...p,[bx]:ip.vh.Right}),H_({...p,[bx]:ip.vh.Above}),H_({...p,[bx]:ip.vh.Below})]))}c=this.getHighestDropZonePriorityRects(c);const u=c[Mx]((e=>e[bx]===ip.vh.Above||e[bx]===ip.vh.Below)),m=fe().minBy(u,(t=>Math.abs(t.top-this[yx](t,e).y)));let p=u[Mx]((e=>{let{top:t}=e;return Math.abs(t-(m?m.top:0))<=uA.competingHorizontalDropZoneMinDist}));if(p.length>1){p=p[Mx]((t=>{const i=this[yx](t,e).x,o=G_({[oA]:this[iA][oA]});return i>=t.left-o&&i<=t.left+t.width+o})),p=fe().sortBy(p,(e=>{let{left:t}=e;return t}));let t=0;for(;t<p.length-1;t++){const i=p[t+1],o=this[yx](i,e).x;if(i.left>o)break}p=p.slice(0,t+1),p.reverse()}const g=p.map(V_);let h;const v=c[Mx]((e=>e[bx]===ip.vh.Onto)),f=fe().minBy(v,(e=>e.height));if(f){u.some((t=>{const i=this[yx](t,e).y;return Math.abs(t.top-i)<uA.competingOntoDropZoneVerticalOffset}))||(h=V_(f))}let y;const b=c[Mx]((e=>e[bx]===ip.vh.Left||e[bx]===ip.vh.Right));let S=fe().minBy(b,(t=>{const i=this[yx](t,e).x;return Math.abs(t.left-i)}));if(S){const e=S,t=b[Mx]((t=>Math.abs(t.left-e.left)<uA.verticalDropZoneAmbiguousDist));t.length>0&&(S=fe().minBy(t,(e=>e.left)))}if(S){const e=S;u.some((t=>t.top>=e.top&&t.top+t.height<=e.top+e.height))||(y=V_(S))}return{ontoDropZone:h,verticalDropZone:y,[Ix]:g}}findHoverMenuTarget(e,t,i){if(ox.Z[rA].isResizing||ip.ZP[rA][nA]||zT.Z[rA].isActive||Ti.menuIsOpenStore[rA])return;const{selectableRectMap:o}=x_.Z[rA],n=tx.Z[fx]({[Mx]:t=>{const i=t.getNode();return Boolean(i&&i.contains(e))}})[0],a=Te.default[vx](),s=n||a;if(!s)return;const r=o.keys();let l=r.next();const d=[];for(;!l.done;){const e=l.value,n=o.get(e);(e[Cx].shouldShowHoverMenu||e[Cx].shouldShowCommentMenu)&&e[Sx]()===s&&n&&i>=n.top&&i<=n.bottom&&t>=n.left-uA.hoverMaxHorizontalOffset&&t<=n.right&&d.push(e),l=r.next()}const c=fe().sortBy(d,(e=>{const t=o.get(e);return t?-t.left:1/0})),u=c.find((e=>{const t=e.getNode();if(t){if(c.find((i=>{if(i!==e){const e=i.getNode();return Boolean(e&&t.contains(e))}return!1})))return!1}return!0}));return u?{[kx]:u,container:s}:void 0}selectableCanAcceptDrop(e,t,i){if(g.Z[rA][sA]&&!Yp.default[rA].open)return!1;if(h.Z[rA][sA])return!1;const o=ip.ZP[rA],n=o[nA]?o.draggedStores:[],a=!!o[nA]&&o.isNativeDrag;let s,r,l,d=!1,c=!1;n.find((e=>{const t=ex.Z[hx](e);return!!t&&(s=t,r=t.type,d=t[gx],!0)}));const u=e instanceof F_.Z?ex.Z[hx](e[Cx][Tx]):void 0,m=null==u?void 0:u[px];var p;u&&(l=u.type,c=u[gx]||"team"===(null===(p=u[px])||void 0===p?void 0:p.table));if(this.isDraggingSharedPageOutOfTopLevelTeamSection({draggingOutlinerItem:s,selectableOutlinerItemParent:m,[bx]:t}))return!1;if(!(e instanceof F_.Z))return e[Cx].canAcceptDrop({[bx]:t,draggingStores:n,isNativeDrag:a});const v=e[Cx][Tx],f=v[mx]();if(t===ip.vh.Onto&&f){const e=f.id,t=(0,Ii.getCollectionContextStoreFromBlock)(v),i=null==t?void 0:t.collectionViewStore();if(i&&"page"!==i.getType()){if(n.find((t=>{const i=t[mx]();return Boolean(t instanceof Ze.G&&i&&i.id===e)})))return!1}}if(e[Cx][ux]){if(e[Cx][ux].find((e=>!(0,Z_.WL)(e)))){if(n.find((t=>{var i;const o=ix.C[Px](t);return(null==o||null===(i=o[Cx])||void 0===i?void 0:i[ux])&&e[Cx][ux]&&!(0,T_.HH)(o[Cx][ux],e[Cx][ux])})))return!1}}if((0,J_.ru)({targets:n,destination:v,[bx]:t,draggingOutlinerType:r}))return!1;if(i&&n.find((e=>e[cx]()||(0,I_.h7)(e))))return!1;if(u&&t!==ip.vh.Onto&&!c&&!(0,P_.canEditRenderedParent)({[iA]:this[iA],blocks:[u[Tx]],[Vx]:this[Ux]&&this[Ux][Ox][rA]}))return!1;if(l&&a)return!1;if("bookmarks"===r&&d&&("bookmarks"!==l||!c||t===ip.vh.Onto))return!1;if("bookmarks"===l&&c&&t!==ip.vh.Onto&&("bookmarks"!==r||!d))return!1;if(s&&s[gx]&&"team"===s.type&&s[px]&&s[px].table===ye.e0){const e=s[px],t=Ze.zX[dx](e,{...e[lx],table:ye.e0});if(t&&!(0,$_.si)({teamStore:t,[iA]:this[iA]}))return!1}if(u&&u[gx]&&"team"===u.type&&u[px]&&u[px].table===ye.e0){const e=u[px],t=Ze.zX[dx](e,{...e[lx],table:ye.e0});if(t&&!(0,$_.si)({teamStore:t,[iA]:this[iA]}))return!1}if("shared"===l&&c&&("shared"!==r||!d))return!1;if(l&&c&&t!==ip.vh.Onto){if(n.find((e=>{const t=e.getType();return Boolean(!t||!M.Z7[t])})))return!1}const{[oA]:y}=this[iA];if(l&&y.isMobile&&t===ip.vh.Onto&&c)return!1;if(n.find((e=>Boolean(e instanceof Ze.G&&e[rx]())))&&(t===ip.vh.Left||t===ip.vh.Right))return!1;if(n.some((e=>Boolean(Y_.Z[sx](e))))!==Boolean(Y_.Z[sx](v)))return!1;if(t===ip.vh.Onto&&v&&!(0,P_.canEdit)({[iA]:this[iA],blocks:[v],[Vx]:this[Ux]&&this[Ux][Ox][rA]}))return!1;if(!this.memoizedCanDrag(n))return!1;if(n.some((e=>e.isTransclusionType()))){if(v[ax]((e=>{if(e===v)return!1;const t=e.isTable("block")&&e.isPath([])&&e.getValue();return Boolean(t&&(0,M.nq)(t.type))})).ancestor)return!1}return!0}[yx](e,t){return W_({[oA]:this[iA][oA],[aA]:e[aA],points:t})}isDraggingSharedPageOutOfTopLevelTeamSection(e){var t;const{draggingOutlinerItem:i,selectableOutlinerItemParent:o,[bx]:n}=e;if(i&&"team"===i.type&&i[gx]&&(null===(t=i[px])||void 0===t?void 0:t[lx].table)===ye.e0){const e=i[px];if(!(i[Tx].getParentId()===e[lx].id||o&&o[lx].id===e[lx].id&&n!==ip.vh.Onto))return!0}return!1}}uA.displayName="SelectableOrDropTargetListener",uA.hoverMaxHorizontalOffset=150,uA.competingOntoDropZoneVerticalOffset=7,uA.verticalDropZoneAmbiguousDist=20,uA.competingHorizontalDropZoneMinDist=2;const mA=uA;var pA=i(74647),gA=i(49427),hA=i(7755);const vA=i(85).tDk,fA=i(85).Omf,yA=i(85).p06,bA=i(85).yrh,SA=i(85).EmK,wA=i(85).iKt,MA=i(85).Xte,kA=i(85).JRM,CA=i(85).We_,ZA=i(85).wgE,TA=i(85).QmD,PA=i(85).eet,IA=i(85).aHc,FA=i(85).kP1;class _A extends w.Z{constructor(){super(...arguments),this[FA]=void 0,this[IA]=void 0,this.mouseSpeed=1/0,this.timerId=void 0,this.setPreviousMousePosition=(e,t)=>{this[IA]={x:e,y:t},clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this[IA]=void 0}),100)},this[PA]=e=>{(0,fa.ZP)({event:e,context:fa.Af.SidebarMouseMove,callback:()=>{if(this.updatePageViewRectThrottled(),void 0!==this[IA]&&(this.mouseSpeed=Math.sqrt(Math.pow(e.clientX-this[IA].x,2)+Math.pow(e.clientY-this[IA].y,2))),this.setPreviousMousePosition(e.clientX,e.clientY),this[FA]){const{sidebarMinTriggerWidth:t,sidebarOpenWidthPercent:i}=_A,o=hA.TC[TA],n=(0,b.getCurrentSidebarWidth)(this[ZA]),a=e.clientX,s=this[FA].left,r=Math.max(s*i,t,hA.Ic[TA]);a<r&&!Yp.default[CA]()&&this.mouseSpeed<_A.mouseSpeedThreshold&&0!==this.mouseSpeed&&!o&&pA.open(),a>n&&a>r&&o&&pA.close()}}})},this.handleWindowMouseOut=e=>{e.toElement||e.relatedTarget||pA.close()},this[kA]=e=>{this[ZA][MA][TA].width<pA.OnlyOneSidebarVisibleWidthThreshold&&(0,b.updateSidebarIsExpanded)(this[ZA])&&(0,b.sidebarIsExpanded)(this[ZA])&&pA.setExpand({[ZA]:this[ZA],[wA]:!1,from:"sidebar_listener"})},this.updatePageViewRectThrottled=fe().throttle(this.updatePageViewRect,500)}didMount(){window[SA](bA,this[PA]),window[SA]("mouseout",this.handleWindowMouseOut),window[SA]("resize",this[kA])}willUnmount(){window[yA](bA,this[PA]),window[yA]("mouseout",this.handleWindowMouseOut),window[yA]("resize",this[kA])}updatePageViewRect(){const e=this.getPageViewWrapEl();this[FA]=e?e[fA]():document.body[fA]()}getPageViewWrapEl(){const{[vA]:e}=p.default[TA],t=gA.Z.find((t=>t.props.store===e));if(t){const e=t.getContentWrapEl();if(e)return e}}}_A.displayName="SidebarListener",_A.sidebarOpenWidthPercent=.38,_A.sidebarMinTriggerWidth=18,_A.mouseSpeedThreshold=5;const xA=_A;var AA=i(13991),BA=i(15944),DA=i(84084),EA=i(68204),LA=i(64286),RA=i(10743);const NA=i(85).Vyz,OA=i(85)._lc,UA=i(85).TmH,VA=i(85).Ubh,WA=i(85).TtP,KA=i(85).LCr,zA=i(85).Drs,GA=i(85).JJj,HA=i(85).vN2,qA=i(85).$SN,jA=i(85).bSA,QA=i(85).qLW,JA=i(85).D7I,$A=i(85).j7K,YA=i(85).eiN,XA=i(85).nQ3,eB=i(85).oSF,tB=i(85).PlO,iB=i(85).YOX,oB=i(85).Gnd,nB=i(85).Ie8,aB=i(85).ceT,sB=i(85).t4B,rB=i(85).TSg,lB=i(85).QmD,dB=i(85).wgE;class cB extends w.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this[dB],t=RA.Z[lB];if(!t.open)return;const i=this.getSections(t),o=this[rB](t);let s;return s=e[sB]&&!e.isTablet?{[aB]:Z.og[nB]}:{[aB]:Z.og.Popup,width:this.getWidth(),maxHeight:"40vh",onClickOutside:DA.xv},a[JA](A.Z,s,n()(Fe.Z,{[XA]:i,onAccept:this.handleAccept,context:{[dB]:this[dB],blocks:Te.default[lB][oB],[iB]:t.selectionRect,[tB]:void 0},[YA]:o,[$A]:0,onEmptyEnter:this[eB],useLimit:!0}))},this[eB]=()=>{DA.xv()},this.handleAccept=(e,t,i,o)=>{const n=Te.default[lB][oB][0];if(n){const t=n.getType(),i=n[QA]();be.trackBlockAction(this[dB],{[jA]:e[jA],from:qA,block_id:n.id,[HA]:t,is_toggleable:t?(0,ke.isToggleOrToggleableFormatBlockType)(t,i):void 0,slash_menu_filter_length:this.filterLength(),slash_menu_section:o})}Ci[GA]({[zA]:"SlashMenu.handleAccept",[dB]:this[dB],perform:e=>{DA.RL({[dB]:this[dB],[KA]:e})}})},this.filterLength=()=>{const e=RA.Z[lB];return e.open?e[YA][WA]:0}}willMountOrUpdate(){let e=RA.Z[lB];if(e.open){var t;const i=Xp.default[lB];if("editing"!==i.mode)return!1;const o=this[rB](e),n=(0,EA.fuzzyMatchActions)({[XA]:this.getSections(e),context:{blocks:Te.default[lB][oB],[dB]:this[dB],[tB]:void 0},query:o||""});let a=0;if(o)if(0===n[WA])a=o[WA]-e.lettersAtLastResult;else{const t={...e,lettersAtLastResult:(null==o?void 0:o[WA])??0,[YA]:o};RA.Z.setState(t),e=t}const{[VA]:s}=p.default[lB];!s||null!==(t=s.getSettings())&&void 0!==t&&t.pressed_slash_tooltip||!(0,LA.u)(this[dB])||BA.q(this[dB]);const{multiSelection:r}=i;(0,Jp.qS)(r)&&r.start.store===e[UA]&&!Eg.shouldCloseMenu(o,!0,n[WA],a,e[UA])||DA.xv()}}renderComponent(){const{device:e}=this[dB],t=RA.Z[lB];return n()(re.ZP,{popupType:e[sB]&&!e.isTablet?re.ZP[OA].SlideUp:re.ZP[OA].Popup,open:t.open,[iB]:t.open?t.selectionRect:void 0,placementToOrigin:re.ZP.Placement.Bottom,alignmentToOrigin:re.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,[NA]:!0,onDismiss:this[eB],render:this.renderMenu})}[rB](e){return Eg[rB](e[UA],e.oldTextValue,!e.isAddMenu)}getSections(e){const{insertActions:t,slashActions:i}=MI.wg[lB];return e.isAddMenu?t:i}getWidth(){return"fr-FR"===AA.SP?375:324}}cB.displayName="SlashMenu";const uB=cB;var mB=i(1310),pB=i(10339),gB=i(84076);const hB=i(85).PXg,vB=i(85).S6b,fB=i(85).XNW,yB=i(85).BQ6,bB=i(85).jkI,SB=i(85).H1U,wB=i(85).IY7,MB=i(85).NF1,kB=i(85).C_1,CB=i(85).Au,ZB=i(85).Scd,TB=i(85).LlE,PB=i(85).EMU,IB=i(85).sM5,FB=i(85).AEP,_B=i(85).wlm,xB=i(85).$SM,AB=i(85).dFk,BB=i(85).fBv,DB=i(85).Wp_,EB=i(85).yUP,LB=i(85).EvP;class RB extends w.Z{constructor(){super(...arguments),this[LB]=eo.default[EB](!1),this.handleShow=()=>{this[LB][DB](!0)},this.handleHide=()=>{this[LB][DB](!1)}}renderComponent(){const{currentItem:e}=mB.ZP.state,t=Boolean(e||this[LB].state);return n()(np.Z,{open:t,zIndex:201},void 0,n()(pB.Z,{render:()=>fe().compact([this.renderCurrentItem()]),onShow:this.handleShow,onHide:this.handleHide}))}renderCurrentItem(){const{currentItem:e}=mB.ZP.state;if(!e)return;const t=(null==e?void 0:e[BB])??"bottom",{WindowSizeStore:i,device:o}=this.environment;let a=24;if(o.isMobileNative&&o.isIOS){a=Di.Z.state[AB]>0?24+Di.Z[xB]():i[_B](24+Di.Z[xB]())}const s="top"===t?{top:24}:{bottom:a};return n()(ch.Z,{isVisible:!0,enterAnimationStyle:{translateY:"top"===t?-50:50,[FB]:1,scale:1},animationStyle:{translateY:0,[FB]:1,scale:1},exitAnimationStyle:{translateY:0,[FB]:0,scale:.95},render:()=>n()("div",{"aria-live":"polite",[yB]:{...s,[BB]:"fixed",left:0,width:"100%",[IB]:PB,zIndex:wm.snackbar,[TB]:4}},void 0,n()("div",{[yB]:{[ZB]:this[CB].tooltipBackground,color:this[CB][kB],[MB]:8,[TB]:"11px 16px",[wB]:this[CB].largeBoxShadow,margin:"0 auto",fontSize:14,[IB]:PB,[SB]:bB,...null==e?void 0:e[yB]}},void 0,e.label,e.helpUrl&&n()(gB.Z,{href:e.helpUrl,external:!0,[yB]:{[fB]:8,width:16,height:16,color:this[CB][kB]}},void 0,si.Z.help({fill:this[CB][vB]})),n()("div",{[yB]:{[fB]:4,[hB]:-4}},void 0,e.right)))},e.key)}}RB.displayName="SnackbarRenderer";const NB=RB;var OB=i(6906),UB=i(24684),VB=i(98459),WB=i(47425),KB=i(52801),zB=i(93678),GB=i(83420),HB=i(52533),qB=i(8323),jB=i(46096),QB=i(84787),JB=i(18647),$B=i(46247),YB=i(26263),XB=i(16691),eD=i(45953),tD=i(606),iD=i(13493),oD=i(66213),nD=i(82136),aD=i(90530);const sD=i(85).D7I,rD=i(85).XCs,lD=i(85).YDv,dD=i(85).Mm1,cD=i(85).GmX,uD=i(85).Scd,mD=i(85).nx5,pD=i(85).i_Y,gD=i(85).J$i,hD=i(85).bni,vD=i(85).zd9,fD=i(85).qLW,yD=i(85).BlJ,bD=i(85).knQ,SD=i(85).Gqc,wD=i(85).JBY,MD=i(85).DAW,kD=i(85).tb8,CD=i(85).zkl,ZD=i(85).hDW,TD=i(85).T62,PD=i(85).W57,ID=i(85).VXW,FD=i(85).JnW,_D=i(85).mFu,xD=i(85).g65,AD=i(85).T9w,BD=i(85).wgE,DD=i(85).bxW,ED=i(85).gWO;class LD extends w.Z{constructor(){super(...arguments),this[ED]=e=>{KB[DD](),Yi.navigate({[BD]:this[BD],url:e})},this.loadSnapshot=async e=>{const{[AD]:t}=e,i=e.block.id,o=await Rs.getSnapshotContents(this[BD],e);if("failed"===o.type)throw o.error;const n=eD.PF.create(o.data.contentMap),a=this[BD][xD].id,s=new YB.Z({name:"PageSnapshotPreview"});for(const{[_D]:u,model:m}of n)m&&s[FD]({[_D]:u,[ID]:a},m,PD);s[TD]={blockId:i,[AD]:t};const r=new Map,l=e=>{const t=s.getRecord({[_D]:e,[ID]:a}),i=(0,XB.dn)(e);t||!(0,ca.isUUIDWithDashes)(e.id)||r.has(i)||r.set(i,(0,Ze.Kv)(this.props[ZD],e))};for(const{model:u}of n)if(u)if(u[CD]===ri.iU){const e=u,t=e[kD](),i=tD.dr.uniq(fe().flatten(Object.keys(t).map((e=>t[e])).map(ci[MD])));for(const d of i)l(d);const o=e[wD]()?[]:e.getContentIds()||[];for(const d of o)l({[CD]:ri.iU,id:d});const n=e[SD]();n&&l(n);const a=fe().uniq(fe().flatten(Object.keys(t).map((e=>t[e])).map(ci.getUserMentions)));for(const d of a)l({[CD]:En.KJ,id:d});const s=u[bD]();s&&l(s);const r=u[yD]();r&&l(r)}else if(u[CD]===iD.n){var d;const e=null===(d=u[fD]())||void 0===d?void 0:d[vD];e&&l(e)}else if(u[CD]===SI.x_){const e=u[bD]();e&&l(e)}const c=Array.from(r.values());return await Promise.all(c.map((async e=>{await e.load();const t=e.getValue();t&&s[hD]({[_D]:e[_D],[ID]:a},{role:PD,value:t})}))),{[ZD]:new Ze.G(this[BD],{[CD]:ri.iU,id:i},{[gD]:s}),[AD]:t}}}getChildContext(){return{...this.context,overrideLinkClick:this[ED]}}renderComponent(){const e=this.props[ZD].id,t=this.props[AD],i={request:{block:{id:e,spaceId:(0,VB.CG)(this.props[ZD][_D].spaceId)},[AD]:t},performRequest:this.loadSnapshot,render:(e,t,i)=>n()(Ff.Z,{show:!i||!t,showDelay:400,showHold:400,render:i=>i?n()("div",{style:this.getSpinnerWrapperStyles()},void 0,n()(Oi.Z,{})):e?n()("div",{style:{padding:32}},void 0,n()(k.FormattedMessage,{[mD]:pD,id:"pageSnapshotPreview.unknownPreviewLoadError.message"})):t?n()(D.Z,{store:t[ZD],isDefaultContainer:!0,droppable:!0,render:e=>{let{selectableEvents:i}=e;return a[sD](JB.Z,ht()({style:{[uD]:this.theme[cD],zIndex:1,flexGrow:1},type:(0,Ti.getFrameScrollType)({[BD]:this[BD],store:t[ZD]})},i),n()(aD.Z,{store:t[ZD],disabled:!0,loadingContainerStore:void 0,context:nD.S.InAppTemplatePreview,[dD]:aD.Z[dD](this[BD]),[lD]:(0,Ti.getPageViewBlockDefaultPaddingLeftRight)(this[BD]),[rD]:(0,Ti.getPageViewBlockDefaultPaddingLeftRight)(this[BD]),pageCoverHeight:aD.Z.defaultPageCoverHeight(this[BD])}))}},t[AD]):void 0})};return n()(oD.LF,{value:this[ED]},void 0,a[sD](On.Z,i))}getSpinnerWrapperStyles(){return{padding:32,display:"flex",alignItems:"center",justifyContent:"center"}}}LD.displayName="PageSnapshotPreview",LD.contextTypes=w.w,LD.childContextTypes={...oD.wK,...w.w};const RD=LD,ND=i(85).zvh,OD=i(85).nLZ,UD=i(85).PXg,VD=i(85).YDv,WD=i(85).AIq,KD=i(85).P3s,zD=i(85).pkR,GD=i(85)._lc,HD=i(85).r$0,qD=i(85)._AI,jD=i(85).Yzm,QD=i(85).j7K,JD=i(85).y79,$D=i(85).JrN,YD=i(85).PG2,XD=i(85).bSA,eE=i(85).eAn,tE=i(85).cqO,iE=i(85).XNW,oE=i(85).h8z,nE=i(85).UPJ,aE=i(85).jkI,sE=i(85).H1U,rE=i(85).Joh,lE=i(85).NLk,dE=i(85).fsm,cE=i(85).g4H,uE=i(85).T9w,mE=i(85).Uie,pE=i(85).SFi,gE=i(85).Lbi,hE=i(85).fBu,vE=i(85).P0R,fE=i(85).f43,yE=i(85).uM3,bE=i(85).Au,SE=i(85).dMt,wE=i(85).IY7,ME=i(85).rps,kE=i(85).$bT,CE=i(85).EMU,ZE=i(85).sM5,TE=i(85).SPm,PE=i(85).vwF,IE=i(85).kJT,FE=i(85).L6j,_E=i(85).iVN,xE=i(85).ceT,AE=i(85).bxW,BE=i(85).hb7,DE=i(85).BQ6,EE=i(85).nx5,LE=i(85).aqt,RE=i(85).dU4,NE=i(85).gQr,OE=i(85).D7I,UE=i(85).o8N,VE=i(85).c0x,WE=i(85).dLQ,KE=i(85).B1C,zE=i(85).TtP,GE=i(85).rpY,HE=i(85).xgV,qE=i(85).mFu,jE=i(85).Ql2,QE=i(85).hDW,JE=i(85).wgE,$E=i(85).E0z,YE=i(85).liR;class XE extends w.Z{constructor(){super(...arguments),this[YE]=()=>{const{[$E]:e}=this[JE],t=jB.Z.state;if(!t.open)return;const i={request:{block:{id:t[QE].id,[jE]:(0,VB.CG)(t[QE][qE][jE])},size:t.size},[HE]:e=>this.loadSnapshotsList(e,t),[GE]:(i,o,a)=>n()(Ff.Z,{show:Boolean(!o||o.snapshots[zE]>=t.size&&t[KE]),showDelay:400,showHold:100,[GE]:n=>e[WE]?this.renderMobileHistory({[VE]:o?o.snapshots:[],menuState:t,[UE]:i,initialLoading:n,loadingMore:!a}):this.renderDesktopHistory({[VE]:o?o.snapshots:[],menuState:t,[UE]:i,initialLoading:n,loadingMore:!a})})};return a[OE](On.Z,i)},this.renderMobileHistory=e=>{let t,i;return e.loadingMore||0!==e[VE][zE]||(t=this[NE](XE.noSnapshotsMessage,!1)),i=e[UE]?n()("div",{[DE]:XE[RE]},void 0,n()(k.FormattedMessage,{[EE]:LE,id:"historyModal.errorMessage"})):e.initialLoading?n()("div",{[DE]:XE[RE]},void 0,n()(Oi.Z,{})):n()(a.Fragment,{},void 0,n()(JB.Z,{type:P.Z.Y},void 0,this.renderSnapshotsMenuList(e)),this.renderMobileSnapshotPreview(e.menuState)),n()(A.Z,{[xE]:Z.og.Modal,title:n()(k.FormattedMessage,{[EE]:"History",id:"historyModal.mobileHistoryMenu.title"}),left:this[BE](),right:n()(B.DoneMenuText,{}),[_E]:KB[AE],header:t},void 0,i)},this.renderDesktopHistory=e=>{let t;if(e[UE])t=n()("div",{[DE]:XE[RE]},void 0,n()(k.FormattedMessage,{[EE]:LE,id:"historyModal.desktopModal.errorMessage"}));else if(e.initialLoading)t=n()("div",{[DE]:XE[RE]},void 0,n()(Oi.Z,{}));else{const i=e.menuState[FE]&&this[IE]({[FE]:e.menuState[FE],[PE]:e.menuState[PE]});t=i?this[NE](i[TE],i.tier):e.loadingMore||0!==e[VE][zE]?this.renderDesktopSnapshotPreview(e.menuState):this[NE](XE.noSnapshotsMessage,!1)}return n()(a.Fragment,{},void 0,n()("div",{[DE]:{[ZE]:CE,[kE]:ME,width:`calc(100% - ${XE.sidebarWidth}px)`,[wE]:`1px 0 0 ${this[bE][SE]}`}},void 0,t),this.renderDesktopSidebar(e))},this.renderSnapshotsMenuList=e=>{const{[$E]:t}=this[JE],{menuState:i,loadingMore:o}=e,s=fe()[yE](e[VE].map(((o,s)=>{const r=s>0?e[VE][s-1]:void 0,l=this[IE]({[FE]:o,[PE]:r}),d=!l;return{key:o.id,action:()=>{KB.selectSnapshot({[JE]:this[JE],[FE]:o,[PE]:r})},[GE]:e=>{const s=o.authors||[],r=this[vE].intl[fE](fe()[yE](s.map((e=>(0,GB.nc)({[hE]:i[QE],[qE]:e})[gE](this[vE].intl)))),{type:pE,[DE]:"narrow"}),c=n()("div",{[DE]:{...pi.Z[mE]}},void 0,r),u=Boolean(i[FE]&&i[FE].id===o.id),m=parseInt(o[uE]),p=m>Date.now()-6*gi.DayMs?(0,JM.$b)(m,AA.SP,this[vE].intl):(0,JM.Yx)(m,"medium",AA.SP),g=(0,JM.Yx)(m,"medium_with_time",AA.SP);return n()(Us.Z,d?{[GE]:i=>a[OE](wt.Z,ht()({},(0,tS.Z)(e,i),{title:p,focused:!t[WE]&&u,[cE]:c})),[rE]:()=>n()("div",{[DE]:{[dE]:270,[lE]:"normal"}},void 0,n()("div",{},void 0,g),n()("div",{},void 0,r))}:{[GE]:i=>a[OE](wt.Z,ht()({},(0,tS.Z)(i,e),{title:n()("div",{[DE]:{[ZE]:CE,[sE]:aE,[nE]:oE}},void 0,n()("div",{[DE]:{...t[WE]&&{[ZE]:"flex",[CE]:1},...pi.Z[mE]}},void 0,p),n()($b.Z,{[eE]:l.tier,[XD]:"history_modal",desktopStyle:{[iE]:8},[YD]:()=>this[tE](l.tier)})),focused:!t[WE]&&u,[cE]:c})),[rE]:()=>n()(k.FormattedMessage,{[EE]:"Upgrade to view this snapshot.",id:"historyModal.snapshotsMenuList.upgrade.tooltip"}),disableTooltip:!WB.QM},e.key)}}}))),r=i[FE]&&i[FE].id,l=s[$D]((e=>r===e.key)),d=[{key:"snapshots",[GE]:e=>a[OE](xe.Z,e),items:s}];return n()(a.Fragment,{},void 0,n()(Mt.Z,{type:Mt.i[JD],[QD]:l,sections:d}),n()(QB.Z,{loading:o,fetchSize:i.size,resultSize:e[VE][zE],onLoadMore:KB.loadMoreSnapshots}),n()(Ff.Z,{show:o,showDelay:300,showHold:100,[GE]:e=>e&&n()("div",{[DE]:XE[RE]},void 0,n()(Oi.Z,{}))}))},this[tE]=e=>{zB.y(this[JE],{from:"history_modal",for:e})},this.getAriaLabel=()=>this[vE].intl[jD]({id:"historyModal.ariaLabel",[EE]:"Page History"}),this.loadSnapshotsList=async(e,t)=>{const{[$E]:i}=this[JE],o=await Rs[qD](this[JE],e);if("failed"===o.type)throw o[UE];const{snapshots:n}=o.data;if(t.pageHasCollection=n.some((e=>{var t;const i=null===(t=e[HD])||void 0===t?void 0:t[zE];return i&&0!==i})),t[KE]){const e=parseInt(t[KE]),i=n[$D]((t=>parseInt(t[uE])<e));0===n[zE]||(0===i?KB.selectSnapshot({[JE]:this[JE],[FE]:n[i],[PE]:void 0}):i>0?KB.selectSnapshot({[JE]:this[JE],[FE]:n[i-1],[PE]:i>1?n[i-2]:void 0}):n[zE]<t.size?KB.selectSnapshot({[JE]:this[JE],[FE]:n[n[zE]-1],[PE]:n[zE]>1?n[n[zE]-2]:void 0}):KB.loadMoreSnapshots())}else Boolean(t[FE])||i[WE]||jB.Z.setState({...t,[FE]:n[0],[PE]:void 0});return o.data},this.iconSize=()=>{const{[$E]:e}=this[JE];return e[WE]?24:20}}renderComponent(){const{[$E]:e}=this[JE],t=jB.Z.state;return e[WE]?n()(re.ZP,{ariaLabel:this.getAriaLabel(),popupType:re.ZP[GD].SlideUp,open:t.open,[GE]:this[YE],onDismiss:KB[AE]}):n()(Cm.Z,{ariaLabel:this.getAriaLabel(),open:t.open,innerStyle:{height:"80vh",width:"80vw",overflow:"hidden",[ZE]:CE},onDismiss:KB[AE],[GE]:this[YE],className:yt.historyModal})}renderMobileSnapshotPreview(e){return n()(re.ZP,{popupType:re.ZP[GD].SlideUp,open:Boolean(e[FE]),forceFullScreenSlideUp:!0,[GE]:()=>{if(!e[FE])return;const t=this[IE]({[FE]:e[FE],[PE]:e[PE]}),i=!t,o=i?n()(RD,{[QE]:e[QE],[uE]:e[FE][uE]}):this[NE](t[TE],t.tier);return n()(A.Z,{[xE]:Z.og.Modal,title:(0,JM.$b)(parseInt(e[FE][uE]),AA.SP,bt.default.getIntl()),right:n()(B.DoneMenuText,{}),[_E]:KB.clearSelectedSnapshot,leftDisabled:!i,left:n()(k.FormattedMessage,{[EE]:"Restore",id:"historyModal.mobileSnapshotMenu.restoreButton.label"}),onClickLeft:()=>KB.restoreSnapshot(this[JE]),whiteBackground:i,forceFullScreenSlideUp:!0},void 0,o)}})}hasPermissionToRestore(e){return(0,P_.canEditBlockOrCollection)({[JE]:this[JE],blocks:[e[QE]],originRect:void 0,publicEditMode:void 0})}renderDesktopSidebar(e){const{menuState:t}=e,i=Boolean(t[FE]&&!this[IE]({[FE]:t[FE],[PE]:t[PE]})&&this.hasPermissionToRestore(t));return n()("div",{[DE]:this.getSidebarStyle()},void 0,n()(JB.Z,{type:P.Z.Y,[DE]:{[CE]:1}},void 0,this.renderSnapshotsMenuList(e)),n()("div",{[DE]:{[ZE]:CE,padding:14,borderTop:`\n\t\t\t\t\t\t\t1px solid ${this[bE][SE]}\n\t\t\t\t\t\t`}},void 0,n()(Us.Z,{[rE]:()=>n()(k.FormattedMessage,{[EE]:"Upgrade to restore snapshots.",id:"historyModal.desktopModal.sidebar.upgradeMessage.tooltip"}),[GE]:e=>a[OE](Kb.Z,ht()({isLarge:!0,[YD]:()=>KB.restoreSnapshot(this[JE]),[zD]:!i},e),n()(k.FormattedMessage,{[EE]:"Restore version",id:"historyModal.desktopModal.restoreButton.label"}))}),n()(Zm.Z,{isLarge:!0,[DE]:{[iE]:12},[YD]:KB[AE]},void 0,n()(k.FormattedMessage,{[EE]:"Cancel",id:"historyModal.desktopModal.cancelButton.label"}))),n()(xe.Z,{topBorder:!0,disableDesktopPadding:!0},void 0,n()(Ae.Z,{title:n()(k.FormattedMessage,{id:"historyModal.desktopModal.learnMoreButton.label",[EE]:"Learn about page history"}),href:(0,Me.getLocalizedUrl)("guides.pageHistory"),[KD]:"page_history"})))}renderDesktopSnapshotPreview(e){if(e[FE])return n()(a.Fragment,{},void 0,n()("div",{[DE]:{[ZE]:CE,[sE]:aE,[WD]:0,height:45,fontSize:14,[VD]:14}},void 0,e[QE].hasIcon()&&n()(Xf.Z,{[zD]:!0,icon:e[QE].getIcon(),isEmptyPage:e[QE].isEmptyPage(),size:this.iconSize(),[DE]:{[UD]:6}}),n()(ey.Z,{store:e[QE]})),n()(RD,{[QE]:e[QE],[uE]:e[FE][uE]}))}deviceSupportsUpgrade(e){const{[$E]:t}=this[JE];return!t[WE]||"personal"===e&&(0,HB.S$)({[JE]:this[JE]})}[NE](e,t){const{[$E]:i}=this[JE],o=Ei.default.state.data;let a=this.deviceSupportsUpgrade(t);const s=o&&wb.isAdmin(o);return a&&(0,HB.S$)({[JE]:this[JE]})&&"personal"===t&&!s&&(a=!1),n()("div",{[DE]:this.getUnavailableMessageStyle()},void 0,this.deviceSupportsUpgrade(t)&&this.renderVersionHistoryIcon(),n()("div",{[DE]:{...!i[WE]&&{[dE]:340}}},void 0,e),a&&t&&n()(Kb.Z,{isLarge:!0,[YD]:()=>this[tE](t),[DE]:{[OD]:16}},void 0,n()(k.FormattedMessage,{[EE]:"Upgrade",id:"historyModal.upgradeForHistoryButton.label"})))}renderVersionHistoryIcon(){return si.Z.versionHistory({width:64,height:"auto",fill:this[bE].lightIconColor,marginBottom:12})}[BE](){return n()($B.Z,{href:(0,Me.getLocalizedUrl)("guides.pageHistory"),[KD]:"page_history"})}[IE](e){var t;if(Xi.default.isAdminMode)return;const{[PE]:i}=e;if(!i)return;const o=this.snapshotDaysOld(i);if((0,qB.isSinglePlayerTier)()&&o<=UB.hy.plus.days)return;const a=this.getTiersSupportingSnapshotAge(o);if((0,qB.tiersIncludeCurrentTier)(a))return;const s=a[0]??"enterprise";return(0,WB.QM)(s)?void 0:{tier:s,[TE]:n()(k.FormattedMessage,{[EE]:"Please upgrade to the {upsellTier} Plan to access versions older than {snapshotLimitDays} days.",id:"historyModal.upsell.message",values:{upsellTier:(0,OB.Z)((0,WB.eR)(s)?"plus":s),snapshotLimitDays:(null===(t=this.getPlanBelow(s))||void 0===t?void 0:t.days)??Math.floor(o)}})}}getTiersSupportingSnapshotAge(e){return this[ND]().filter((t=>t.days>e)).map((e=>e.tier))}getPlanBelow(e){const t=this[ND](),i=t[$D]((t=>t.tier===e));if(!(i<=0))return t[i-1]}[ND](){return UB.sb.filter((e=>"personal"!==e.tier))}snapshotDaysOld(e){return(Date.now()-parseInt(e[uE]))/gi.DayMs}getSidebarStyle(){return{[ZE]:CE,[kE]:ME,[WD]:0,width:XE.sidebarWidth}}getUnavailableMessageStyle(){const{[$E]:e}=this[JE];return{[ZE]:CE,[kE]:ME,[sE]:aE,[nE]:aE,[OD]:28,padding:16,textAlign:aE,fontSize:14,...e[WE]?{position:"relative",zIndex:1,background:this[bE].popoverBackground,[wE]:`\n\t\t\t\t\t\t\t0 -1px 0 ${this[bE][SE]},\n\t\t\t\t\t\t\t0 1px 0 ${this[bE][SE]}\n\t\t\t\t\t\t`}:{height:"100%"}}}}XE.displayName="HistoryModal",XE.sidebarWidth=240,XE.noSnapshotsMessage=n()(k.FormattedMessage,{[EE]:"This page does not have any snapshots yet. Allow up to 10 minutes for the first snapshot to be generated.",id:"historyModal.noSnapshotsYet.message"}),XE[RE]={[ZE]:CE,[nE]:aE,padding:32};const eL=(0,k.injectIntl)(XE);var tL=i(94507),iL=i(61464);const oL=i(85).Sq3,nL=i(85).Ql2,aL=i(85).VXW;function sL(){window.__c={n:"UserJoinedTeamsListener"};const e=(0,r.O7)(),{currentSpaceStore:t}=(0,l.Kw)(p.default),i=e.currentUser.id,o=(0,l.VK)((()=>null==t?void 0:t.id),[t]);return(0,a.useEffect)((()=>{if(!o||!i)return;const t=qZ.Z.addListener((0,zZ.getUserJoinedTeamsInSpaceEventKey)({[aL]:i,[nL]:o}),(async(t,n)=>{(function(e){var t;let{[nL]:i,[aL]:o,emitValue:n}=e;const a=null===(t=iL.Z[oL]({[aL]:o,[nL]:i}))||void 0===t?void 0:t.lastEmitValue;if(a===n)return!1;if(void 0===a&&iL.Z.getHasFetched({[aL]:o,[nL]:i}))return!1;return!0})({[nL]:o,[aL]:i,emitValue:n})&&await tL.m({environment:e,[nL]:o,[aL]:i,emitValue:n});const a=iL.Z[oL]({[aL]:i,[nL]:o});a&&iL.Z.setUserJoinedTeamsState({[aL]:i,[nL]:o,state:{...a,lastEmitValue:n}})}),void 0,e);return function(){t&&qZ.Z.removeListener(t,e)}}),[e,i,o]),null}var rL=i(30397);const lL=i(85).Sgw;const dL=function(){window.__c={n:"TeamsInSpaceListener"};const e=(0,r.O7)(),{currentSpaceStore:t,currentUserStore:i}=(0,l.Kw)(p.default),[,o,n]=(0,l.AF)(rL.Z),s=null==i?void 0:i.id;return(0,a.useEffect)((()=>{if(!t||!s)return;const i=qZ.Z.addListener((0,zZ.getTeamsInSpaceEventKey)(t.id),(async(i,a)=>{if(!n.shouldRefetchTeamsInSpace({[lL]:s,currentSpaceId:t.id,emitValue:a}))return;const r=await(0,d.qX)({environment:e,spaceStore:t,includeArchived:!1,[lL]:s});o({teams:r,lastEmitData:{spaceId:t.id,userId:s,value:a}})}),void 0,e);return function(){i&&qZ.Z.removeListener(i,e)}}),[t,s,e,o,n]),null};var cL=i(54814),uL=i(51752);const mL=i(85).Wqi;function pL(e){window.__c={n:"TypedDatabaseListener"};const{databaseType:t,[mL]:i}=e,o=(0,a.useRef)(),n=(0,r.O7)();return(0,a.useEffect)((()=>{if(!i)return;const e=(0,zZ.getCollectionTypeChangeEventKey)({spaceId:i.id,databaseType:t});return o.current=qZ.Z.addListener(e,(async()=>{const e=await cL.rG({environment:n,spaceId:i.id,parentStore:i,databaseType:t});e&&uL.Z.setCachedDatabasesForType(t,i.id,e)}),void 0,n),()=>{o.current&&(qZ.Z.removeListener(o.current,n),o.current=void 0)}}),[t,n,i,o]),null}const gL=function(){window.__c={n:"TypedDatabasesListener"};const e=(0,l.VK)((()=>p.default.state.currentSpaceStore),[]);return(0,l.VK)((()=>"control"!==ma.default.getEligibleGroup({experimentId:"quick_capture_split_button",defaultGroup:"control"})),[])?a.createElement(a.Fragment,null,n()(pL,{databaseType:ai.iS,[mL]:e}),n()(pL,{databaseType:ai.wW,[mL]:e})):null};var hL=i(77719),vL=i(4926),fL=i(1634);const yL=i(85).UPJ,bL=i(85).wuN,SL=i(85).nx5,wL=i(85).ROP,ML=i(85).MLn,kL=i(85).ChN,CL=i(85).Exd,ZL=i(85)._Fe,TL=i(85).g7N,PL=i(85).tLG,IL=i(85).fBv,FL=i(85).Au,_L=i(85).Je3,xL=i(85).jkI,AL=i(85).H1U,BL=i(85).rps,DL=i(85).$bT,EL=i(85).EMU,LL=i(85).ivl,RL=i(85).Und,NL=i(85).LCr,OL=i(85).Drs,UL=i(85).JJj,VL=i(85).Ubh,WL=i(85).vck,KL=i(85).d6F,zL=i(85).VUQ,GL=i(85).wgE,HL=i(85).qJ8,qL=i(85).QmD;class jL extends w.Z{constructor(){super(...arguments),this.handleConnectClick=async()=>{const e=fL.Z[qL],{[HL]:t}=p.default[qL];e.open&&t&&(await hL.hM({[GL]:this[GL],[zL]:e[zL],spaceId:t.id,unfurlUrl:e.unfurlUrl,[KL]:e[KL],from:"external_object_instance_inline_popup"}),this.markPopupAsDismissed(e[zL].id),fL.Z.reset())},this[WL]=()=>{const e=fL.Z[qL];e.open&&this.markPopupAsDismissed(e[zL].id),fL.Z.reset()},this.markPopupAsDismissed=e=>{const{[VL]:t}=p.default[qL];t&&Ci[UL]({[OL]:"UnfurlingInformationPopup.markPopupAsDismissed",[GL]:this[GL],perform:i=>{eS.setDismissedLinkPreviewIntegrationPopup({[NL]:i,[RL]:t,[LL]:e})}})}}renderComponent(){const e=fL.Z[qL];if(!e.open)return;const t=e[zL].info.icon;return t?n()("div",{style:{display:EL,[DL]:BL,[AL]:xL,cursor:"default",padding:16,background:this[FL][_L],borderRadius:3,boxShadow:this[FL].lightBoxShadow,[IL]:PL,bottom:65+vL.Z[qL],right:16+vL.Z[qL],width:240,zIndex:wm.helpButton,clipPath:"inset(-10px -10px -10px -10px)"}},void 0,n()(Hb.Z,{type:"image_url",imageURL:t,size:38,style:{[TL]:6}}),n()("div",{style:{color:this[FL][ZL],[CL]:14,[kL]:pi.Z[kL].semibold,[TL]:6,[ML]:xL}},void 0,n()(k.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.title",[SL]:wL,values:{[zL]:e[zL].name}})),n()("div",{style:{color:this[FL][bL],[CL]:12,[TL]:8,[ML]:xL,display:EL,[DL]:BL,[AL]:xL,[yL]:xL}},void 0,n()(k.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.caption",[SL]:"You, and anyone else who has access to this Notion page, will see rich previews that update live."}),n()(PS.Z,{href:(0,Me.getLocalizedUrl)("guides.unfurling"),external:!0},void 0,n()(k.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.learnMore.text",[SL]:"Learn more"}))),n()(Kb.Z,{onClick:this.handleConnectClick,style:{width:"100%"}},void 0,n()(k.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.connectButton",[SL]:"Connect"})),n()(oS.Z,{icon:si.Z.close,onClick:this[WL],style:{[IL]:PL,top:6,right:6}})):void 0}}jL.displayName="UnfurlingInformationPopup";const QL=(0,k.injectIntl)(jL);var JL=i(761),$L=i(80064);const YL=i(85).nx5,XL=i(85)._lc,eR=i(85).t4B,tR=i(85).Z97,iR=i(85).nm$,oR=i(85).VFs,nR=i(85).iTb,aR=i(85).LCr,sR=i(85).nxU,rR=i(85).Drs,lR=i(85).JJj,dR=i(85).j7K,cR=i(85).y79,uR=i(85).Ie8,mR=i(85).ceT,pR=i(85).dLQ,gR=i(85).Sjp,hR=i(85).LmC,vR=i(85).GGR,fR=i(85).D7I,yR=i(85).QmD,bR=i(85).wgE;class SR extends w.Z{constructor(){super(...arguments),this.menuRef=(0,a.createRef)(),this.renderMenu=()=>{const{device:e}=this[bR],t=$L.Z[yR];if(!t.open)return;const{allOptionTypes:i}=t,o={key:"embed section",render:e=>a[fR](xe.Z,e),items:i.map((e=>({key:e,render:t=>a[fR](wt.Z,ht()({},t,{title:this.renderTitleForOptionType(e),[vR]:i=>{t[vR](i),this[hR](e)}})),action:()=>this[gR](e)})))};let s;return s=e[pR]?{[mR]:Z.og[uR]}:{[mR]:Z.og.Popup,width:320,maxHeight:"40vh"},a[fR](A.Z,ht()({},s,{className:yt.unfurlingMenu,ref:this.menuRef}),n()(Mt.Z,{type:Mt.i[cR],sections:[o],[dR]:0,onKeyboardArrow:this.handleMenuListKeyboardArrow,priority:1,disallowBackspace:!0}))},this.handleDefaultDismiss=()=>{this[gR](void 0)},this[gR]=e=>{Ci[lR]({[rR]:"UnfurlingMenu.handleDismiss",[bR]:this[bR],[sR]:t=>{JL.close({[bR]:this[bR],setType:e,[aR]:t})}})},this[hR]=e=>{Ci[lR]({[rR]:"UnfurlingMenu.handleMenuListKeyboardArrow",[bR]:this[bR],[sR]:t=>{JL.setUnfurlingOptionType({[bR]:this[bR],type:e,[nR]:!0,[aR]:t,intl:this.props.intl})}})},this.handleMenuListKeyboardArrow=e=>{const t=$L.Z[yR];if(!t.open||void 0===e[oR])return;const i=t.allOptionTypes[e[oR]];i&&this[hR](i)},this.handleWindowKeydown=e=>{$L.Z[yR].open&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&this[gR](void 0)},this.handleWindowMousedown=e=>{const t=$L.Z[yR],i=this.menuRef.current;if(!t.open||!e[iR]||!i)return;const o=Vi.findDOMNode(i);o&&(o.contains(e[iR])||this[gR](void 0))}}willMount(){(0,Tf.addPassiveEventListener)(window,"keydown",this.handleWindowKeydown),(0,Tf.addPassiveEventListener)(window,tR,this.handleWindowMousedown)}willUnmount(){(0,Tf.removePassiveEventListener)(window,"keydown",this.handleWindowKeydown),(0,Tf.removePassiveEventListener)(window,tR,this.handleWindowMousedown)}renderComponent(){const{device:e}=this[bR],t=$L.Z[yR];return n()(re.ZP,{popupType:e[eR]&&!e.isTablet?re.ZP[XL].SlideUp:re.ZP[XL].Popup,open:Boolean(t.open&&t.renderRect),originRect:t.open?t.renderRect:void 0,placementToOrigin:re.ZP.Placement.Top,alignmentToOrigin:re.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e[pR],keepFocus:e[pR],render:this.renderMenu,onDismiss:this.handleDefaultDismiss})}renderTitleForOptionType(e){return"preview"===e?n()(k.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsPreview.title",[YL]:"Paste as preview"}):"mention"===e?n()(k.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsMention.title",[YL]:"Paste as mention"}):"link"===e?n()(k.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsLink.title",[YL]:"Paste as link"}):"collection"===e?n()(k.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsDatabase.title",[YL]:"Paste as database"}):void(0,mi.unreachable)(e)}}SR.displayName="UnfurlingMenu";const wR=(0,k.injectIntl)(SR),MR=i(85).qJ8;const kR=function(){window.__c={n:"AppComponents"};const e=(0,r.Fy)(),t=(0,r.O7)(),{isMobile:i,isElectron:o}=e;(0,a.useEffect)((()=>{if(i){function e(e){e.preventDefault()}return document.addEventListener("gesturestart",e),()=>{document.removeEventListener("gesturestart",e)}}}),[i]);const{[MR]:s,teamsEnabled:u}=(0,l.VK)((()=>({[MR]:p.default.state[MR],teamsEnabled:(0,d.bq)()})),[]),f=t.currentUser.isLoggedIn();return n()(a.Fragment,{},void 0,n()(Cf,{}),n()(he,{}),n()(c.LazyNewDiscussionMenu,{}),n()(bI,{}),n()(m,{}),n()(kp,{}),n()(v.Z,{priority:-1,capture:!0}),n()(mA,{}),f&&!i&&n()(xA,{}),f&&s&&n()(yT,{rootStore:s}),f&&n()(dL,{}),f&&u&&n()(sL,{}),n()(dp,{}),n()(WZ,{}),n()(pt,{}),n()(XP,{}),n()(CP,{}),n()(Ev,{}),n()(ei,{}),!i&&n()(C_,{}),n()(vf,{}),n()(WT,{}),n()(GM,{}),n()(Sm,{store:g.Z}),n()(Sm,{store:h.Z}),n()(_Z,{}),n()(uB,{}),n()(ih,{}),n()(Bg,{}),n()(wR,{}),n()(Gf,{}),n()(QL,{}),n()(Nt,{}),n()(NB,{}),n()(tb,{}),o&&n()(c.LazyElectronContextMenu,{}),n()(qp,{}),n()(tp,{}),n()(iP,{}),f&&n()(eL,{}),n()(Lv.s,{}),n()(gL,{}))}},80209:(e,t,i)=>{i.d(t,{Z:()=>A});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(26825),l=i(82990),d=i(5366),c=i(47307),u=i(76464),m=i(18878),p=i(70183),g=i(98165),h=i(64921),v=i(64369);const f=i(85).ChN,y=i(85).nLZ,b=i(85).dMt,S=i(85).Ixx,w=i(85).OtN,M=i(85).wgE,k=i(85).zDZ,C=i(85).nx5,Z=i(85).s6j,T=i(85).GOX,P=i(85).PPM,I=i(85).H1l,F=i(85).iru,_=i(85).o63;class x extends s.Z{constructor(){super(...arguments),this.handleRestorePermissionAction=async()=>{const{store:e}=this.props,t=e[_](),i=g[F](e),o=i?r.getInheritedPermissionItems(g[I](i)):[],a={type:"restore",permissionChanges:r.getPermissiveChangesFromRestoringInheritance(t,o)};await c[P]({message:(0,m.mX)(a),[T]:(0,m.nH)(a),cancelLabel:n()(d.FormattedMessage,{id:Z,[C]:"Close"}),[k]:n()(m.mo,{openState:a})})&&u.adminRestoreInheritedPermissions({[M]:this[M],store:e})}}renderComponent(){const{store:e}=this.props,t={[M]:this[M],blocks:[e],publicEditMode:void 0};if(p.and([p.isRestricted,p.not(p.canEdit)])(t)){const{device:e}=this[M],i=p.and([p.isSpaceAdmin,p.not(p.canAdmin)])(t);return a.createElement(a.Fragment,null,n()("div",{style:{[w]:this.theme[S],boxShadow:`0 -1px 0 ${this.theme[b]}`,[y]:e.isMobile?28:1}},void 0,n()(h.Z,{disabled:!i,style:{padding:12},onClick:this.handleRestorePermissionAction},void 0,n()(v.Z,{isMultiline:!0,isSmall:!0},void 0,n()(d.FormattedMessage,{id:"blockMenuRestrictedMessage.label",[C]:"You don’t have permission to edit this block because it is restricted."})),i&&n()(v.Z,{style:{[y]:6,[f]:l.Z[f].semibold}},void 0,n()(d.FormattedMessage,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",[C]:"Restore permissions"})))))}}}x.displayName="BlockMenuRestrictedMessage";const A=x},74687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>st});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(83355),u=i(41892),m=i(8848),p=i(3909),g=i(30845),h=i(82990),v=i(5366),f=i(50906),y=i(33929),b=i(49085);class S extends b.default{getInitialState(){return{step:"initial"}}}const w=S;var M=i(73796),k=i(52275),C=i(63296),Z=i(14871);const T=i(85).L97,P=i(85).I$G,I=i(85).a3v,F=i(85).TEz,_=i(85).Au,x=i(85)._Fe,A=i(85).jkI,B=i(85).H1U,D=i(85).GDw,E=i(85).D7I,L=i(85).nx5,R=(i(85).qE5,i(85).enN);class N extends c.Z{renderComponent(){const{intl:e,question:t}=this.props,i={setup_trial:s()(v.FormattedMessage,{id:R,[L]:"Setup an enterprise trial"}),setup_enterprise_trial:s()(v.FormattedMessage,{id:R,[L]:"Setup an enterprise trial"}),setup_business_trial:s()(v.FormattedMessage,{id:"contactModalQuestionSelect.question.setup_business_trial",[L]:"Setup a business trial"}),live_demo:s()(v.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.live_demo",[L]:"Schedule a live demo"}),plan_help:s()(v.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.plan_help",[L]:"Need help choosing a plan"}),other:s()(v.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.other",[L]:"Other"})},o={menuTitle:e.formatMessage({[L]:"Your question",id:"enterpriseContactModal.yourQuestion.title"}),items:["setup_enterprise_trial","setup_business_trial","live_demo","plan_help","other"],width:"auto",minWidth:280,getKey:e=>e,selectedItem:t,originGap:4,onSelect:e=>{this.props.onSelect(e)},renderItem:e=>d[E](k.Z,n()({title:i[e.key]},e)),renderOrigin:e=>d[E](C.Z,n()({},e,{isLarge:!0,style:{...this[D](),...this.props.invalid&&{border:`1px solid ${m.ZP.red}`}}}),s()("div",{style:{display:"flex",[B]:A,color:t?this[_][x]:this[_][F]}},void 0,t?i[t]:s()(v.FormattedMessage,{[L]:"Select question",id:"enterpriseContactModal.selectQuestion.label"})),p.Z.expand({width:10,fill:this[_][I]}))};return d[E](Z.Z,n()({key:P},o))}[D](){const{device:e}=this.environment;return{backgroundColor:this[_][T],height:31,...e.isMobile&&{height:42},padding:"2px 10px",display:"flex",[B]:A,justifyContent:"space-between",borderRadius:3,border:0,transition:"box-shadow 0.3s ease",boxShadow:`0 0 0 1px ${this[_].outlineButtonBorder}`,background:this[_].buttonBackground}}}N.displayName="ContactModalQuestionSelect";const O=(0,v.injectIntl)(N);var U=i(23063),V=i(42922),W=i(64921),K=i(74194),z=i(3386),G=i(53953),H=i(89728),q=i(58032),j=i(29551);const Q=i(85).L97,J=i(85).UPJ,$=i(85).lWm,Y=i(85).Je3,X=i(85).Joh,ee=i(85).D7I,te=i(85).C1,ie=i(85)._gx,oe=i(85).tLG,ne=i(85).fBv,ae=i(85).UVY,se=i(85).ypd,re=i(85).Bgg,le=i(85).Rbl,de=i(85).AEP,ce=i(85).rpY,ue=i(85).gdQ,me=i(85).yzD,pe=i(85).Scd,ge=i(85).oSF,he=i(85).Yzm,ve=i(85).Fr2,fe=i(85).j2G,ye=i(85).GXX,be=i(85).kVk,Se=i(85).PG2,we=i(85).KL9,Me=i(85).SPm,ke=i(85).tdR,Ce=i(85).T04,Ze=i(85).Dd5,Te=i(85).cZW,Pe=i(85).aKS,Ie=i(85).URJ,Fe=i(85).wgE,_e=i(85).FZk,xe=i(85).nm$,Ae=i(85).Lfz,Be=i(85).Wp_,De=i(85).GDw,Ee=i(85).PXg,Le=i(85).nLZ,Re=i(85).OTW,Ne=i(85).Au,Oe=i(85).wuN,Ue=i(85).Mm1,Ve=i(85)._V5,We=i(85).ChN,Ke=i(85).Exd,ze=i(85).X_m,Ge=i(85).gGi,He=i(85).Jkr,qe=i(85).LlE,je=i(85).Gnd,Qe=i(85).QmD,Je=i(85).H1U,$e=i(85).BQ6,Ye=i(85).jkI,Xe=i(85).NDn,et=i(85).GZ0,tt=i(85).XtO,it=i(85).nx5,ot=i(85).Jjd,nt=(0,v.defineMessages)({[ot]:{id:"enterpriseContactModal.additionalFeedback.placeholder",[it]:"What would you like to learn more about?"}});class at extends c.Z{constructor(){super(...arguments),this.storeTypes={[tt]:w},this.renderMenu=()=>s()("div",{[$e]:this[et]()},void 0,this.renderCancel(),s()(j.gq,{[$e]:this[Xe](),[Je]:Ye,alignContent:Ye},void 0,this.renderStep())),this.renderInitial=()=>{const{invalidField:e}=this[je][tt][Qe];if(M.Z[Qe].open)return s()("div",{[$e]:{...this.getSlideUpStyle(),[qe]:20}},void 0,p.Z.speechBubbleThin({[He]:Ge,[ze]:24}),s()("div",{[$e]:{[Ke]:14,[We]:h.Z[We].semibold,[Ve]:6,[Ue]:4}},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.header",[it]:"Get in touch with sales"})),s()("div",{[$e]:{[Ke]:12,color:this[Ne][Oe],[He]:200,margin:"0 auto"}},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.caption",[it]:"We'll work with you on your setup and help you land on the best plan."})),s()("div",{[$e]:{...this[Re](),[Le]:24}},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.nameLabel",[it]:"Your name"})),s()(K.Z,{focusInitial:!0,value:this.getName(),[Te]:"Ada Lovelace",[$e]:{[Ee]:4,...this[De](),..."name"===e&&this.getInvalidInputStyle()},[Ze]:e=>{M.Z[Be]({...M.Z[Qe],open:!0,[Ae]:void 0}),this[je][tt][Be]({...this[je][tt][Qe],[Ae]:e[xe].value}),f[_e](this[Fe],{[Ie]:Ae,[Pe]:e[xe].value})}}),s()("div",{[$e]:this[Re]()},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.emailLabel",[it]:"Your work email"})),s()(K.Z,{value:this.getEmail(),[Te]:"ada@lovelace.app",type:Ce,[$e]:{[Ee]:4,...this[De](),..."email"===e&&this.getInvalidInputStyle()},[Ze]:e=>{M.Z[Be]({...M.Z[Qe],open:!0,[Ce]:void 0}),this[je][tt][Be]({...this[je][tt][Qe],[Ce]:e[xe].value}),f[_e](this[Fe],{[Ie]:Ce,[Pe]:e[xe].value})}}),s()("div",{[$e]:this[Re]()},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.companySizeLabel",[it]:"Company size"})),s()(j.gq,{},void 0,this[ke]().map((e=>{let{type:t,[Me]:i,[$e]:o}=e;return s()(H.Z,{isLightGray:!0,isLarge:!0,[$e]:{...this.getBaseButtonStyle(),...this[je][tt][Qe][we]===t&&this.getSelectedButtonStyle(),...o},[Se]:()=>{this[je][tt][Be]({...this[je][tt][Qe],[we]:t}),f[_e](this[Fe],{[Ie]:we,[Pe]:t})}},t,i)}))),s()("div",{[$e]:this[Re]()},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.questionLabel",[it]:"Your question"})),s()(O,{[be]:this.getQuestion(),invalid:"question"===e,onSelect:e=>{this[je][tt][Be]({...this[je][tt][Qe],[be]:e,step:"other"===e?ye:fe}),f[_e](this[Fe],{[Ie]:be,[Pe]:"other"===e?ye:fe})}}),s()(K.Z,{textarea:!0,textareaElementAttributes:{[$e]:this.getInnerTextAreaStyle()},[$e]:this.getTextAreaStyle(),focus:"additional_input"===this[je][tt][Qe].step,value:this[je][tt][Qe][ve],[Te]:y.default[he](nt[ot]),[Ze]:e=>{this[je][tt][Be]({...this[je][tt][Qe],[ve]:e[xe].value}),f[_e](this[Fe],{[Ie]:ve,[Pe]:e[xe].value})}}))},this.renderCancel=()=>s()(W.Z,{[Se]:()=>{f.trackEnterpriseSalesContactDismissed(this[Fe]),this[ge]()},[$e]:this.getCancelStyle(),[ue]:{[pe]:this[Ne][me]}},void 0,p.Z.closeSmall({[He]:14,fill:this[Ne][Oe]})),this.renderThanks=()=>s()("div",{},void 0,s()("img",{[$e]:{[He]:165,[ze]:80},src:u.Z.images.feedbackThankYouPng}),s()("div",{[$e]:this.getThanksHeaderStyle()},void 0,s()(v.FormattedMessage,{id:"enterpriseContactModal.thanks.caption",[it]:"We've received your inquiry and will be contacting you via email shortly."}))),this[ge]=()=>{M.Z[Be]({open:!1})}}renderComponent(){return s()(G.Z,{preventHideChildrenWhileOpening:!0,open:M.Z[Qe].open,[ce]:this.renderMenu,onDismiss:this[ge]})}renderStep(){const{step:e,[we]:t}=this[je][tt][Qe],i="1_100"===t;return d[ee](d.Fragment,null,s()(U.Z,{[re]:"initial"===e||"additional_input"===e,enterAnimationStyle:{[de]:1},exitAnimationStyle:{[de]:0},[ce]:()=>s()(z.Z,{capture:!0,onBackspace:l()[le],onLeft:l()[le],onRight:l()[le],onSelectAll:l()[le],onRedo:l()[le],onUndo:l()[le],onCut:l()[le],onCopy:l()[le],onPaste:l()[le],onKeypress:l()[le],onDelete:l()[le],onTab:l()[le]},void 0,this.renderInitial())}),s()(U.Z,{[re]:"thanks"===e,animationStyle:this[se]("thanks"===e),enterAnimationStyle:this[ae](),exitAnimationStyle:this[ae](),[ce]:this.renderThanks}),s()(U.Z,{[re]:"initial"===e||"additional_input"===e,enterAnimationStyle:{[de]:1},exitAnimationStyle:{[de]:0},[ce]:()=>s()(q.Z,{[$e]:{[He]:"auto"},textWrap:!0,[X]:()=>i?s()(v.FormattedMessage,{id:"enterpriseContactModal.companySize.error.label",[it]:"The company size selected is not eligible for a sales assisted plan. Please message support if you have any questions."}):null,[ce]:e=>d[ee](V.Z,n()({},e,{disabled:i,isLarge:!0,[$e]:{[Le]:17,[He]:284,[ne]:oe,bottom:20},[Se]:()=>{const e=this[ie]();if(e){const{[be]:t}=this[je][tt][Qe];this[je][tt][Be]({...this[je][tt][Qe],step:fe,invalidField:e,[be]:"other"===t?this.getQuestion():t})}else this[je][tt][Be]({...this[je][tt][Qe],invalidField:void 0,step:"thanks"}),M.Z[Qe].open&&f.trackEnterpriseSalesContact(this[Fe],{[Ce]:M.Z[Qe][Ce],[Ae]:M.Z[Qe][Ae],[be]:M.Z[Qe][be],...this[je][tt][Qe]}),l().delay((()=>{M.Z[te](),l().delay((()=>{this[je][tt][te]()}),1e3)}),2e3)}}),s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.sendLabel",[it]:"Send"}))})}))}getName(){if(M.Z[Qe].open)return this[je][tt][Qe][Ae]||M.Z[Qe][Ae]}getEmail(){if(M.Z[Qe].open)return this[je][tt][Qe][Ce]||M.Z[Qe][Ce]}getQuestion(){if(M.Z[Qe].open)return this[je][tt][Qe][be]||M.Z[Qe][be]}[ie](){const e=this.getEmail(),t=this.getName(),{[we]:i}=this[je][tt][Qe];return t?e&&g.test(e,"email")?i?this.getQuestion()?void 0:be:"company_size":Ce:Ae}[ke](){return[{type:"1_100",[Me]:s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.1_100Label",[it]:"1-100"})},{type:"101_1000",[Me]:s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.101_1000Label",[it]:"101-1,000"}),[$e]:{marginLeft:8,[Ee]:8}},{type:"1001+",[Me]:s()(v.FormattedMessage,{id:"enterpriseContactModal.initial.1000PlusLabel",[it]:"1,001+"})}]}getThanksHeaderStyle(){return{color:this[Ne].regularTextColor,[We]:h.Z[We].semibold,[Ke]:14}}[et](){return{[pe]:this[Ne][Y],borderRadius:5,boxShadow:this[Ne].mediumBoxShadow}}getCancelStyle(){return{[ne]:oe,top:"10px",right:"10px",[pe]:this[Ne][$],borderRadius:Ge,[He]:20,[ze]:20,display:"flex",[Je]:Ye,[J]:Ye,zIndex:10}}[Xe](){return{[He]:320,[ze]:470,overflow:"hidden",[ne]:"relative",[qe]:20,cursor:"default",textAlign:Ye,[J]:Ye}}[Re](){return{[Le]:17,[Ke]:12,color:this[Ne][Oe],[We]:h.Z[We].medium,lineHeight:"135%",marginBottom:4,textAlign:"left"}}[De](){return{backgroundColor:this[Ne][Q],[ze]:31}}getInvalidInputStyle(){return{border:`1px solid ${m.ZP.red}`}}[se](e){return{[de]:e?1:0,scale:e?1:.96}}[ae](){return{[de]:0,scale:.96}}getBaseButtonStyle(){return{border:"1px solid #E7E6E5",flexGrow:1,[J]:Ye}}getSelectedButtonStyle(){return{color:m.ZP.blue,border:`1px solid ${m.ZP.blue}`}}getSlideUpStyle(){const{step:e}=this[je][tt][Qe];return{[ne]:oe,transition:"transform 200ms ease",transform:"initial"===e?"translateY(153px)":"translateY(-180px)"}}getInnerTextAreaStyle(){return{[He]:Ge,[ze]:Ge,[pe]:"none",border:"none",resize:"none"}}getTextAreaStyle(){return{[He]:Ge,[pe]:this[Ne][Y],display:"block",[qe]:"7px 10px",[ze]:310,[Le]:17,marginBottom:17,transition:"opacity 200ms ease-in",[de]:"additional_input"===this[je][tt][Qe].step?1:.001}}}at.displayName="ContactModal";const st=at},85324:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(24405),c=i(41892),u=i(86658),m=i(82990),p=i(63143),g=i(5366),h=i(92108),v=i(36867),f=i(45293),y=i(10182),b=i(42922),S=i(89728),w=i(92660),M=i(29551);const k=i(85).D7I,C=i(85).Wp_,Z=i(85).OS1,T=i(85).$eU,P=i(85).qNc,I=i(85).H1U,F=i(85).UPJ,_=i(85).$bT,x=i(85).zDZ,A=i(85).nx5,B=i(85).BQ6,D=i(85).jkI,E=i(85).rps;function L(){window.__c={n:"SaveAllButton"};const e=(0,d.yK)(O,[]),t=(0,l.O7)();return s()(b.Z,{isLarge:!0,[B]:e.acceptAllButton,onClick:()=>{h.a9(t,{[P]:!0,preference:!0,[T]:!0,[Z]:!0}),f.Z[C]({open:!1}),h.qo()}},void 0,r[k](g.FormattedMessage,u.ze.acceptAllButtonLabel))}function R(){window.__c={n:"RejectAllButton"};const e=(0,d.yK)(O,[]),t=(0,l.O7)();return s()(S.Z,{isLarge:!0,isGray:!0,[B]:e.moreOptionsButton,onClick:()=>{h.a9(t,{[P]:!0,preference:!1,[T]:!1,[Z]:!1}),f.Z[C]({open:!1}),h.qo()}},void 0,r[k](g.FormattedMessage,u.ze.rejectAllButtonLabel))}function N(){window.__c={n:"MoreOptionsButton"};const e=(0,d.yK)(O,[]);return s()(y.Z,{hasDismissButton:!0,onDismiss:()=>{f.Z[C]({open:!1})},renderOrigin:t=>r[k](S.Z,n()({},t,{isLarge:!0,isGray:!0,[B]:e.moreOptionsButton}),r[k](g.FormattedMessage,u.ze.moreOptionsButtonLabel))})}function O(e){return{modal:{maxWidth:400,padding:24},image:{height:100},title:{marginTop:8,color:e.regularTextColor,fontWeight:m.Z.fontWeight.semibold,fontSize:18},[x]:{color:e.mediumTextColor,textAlign:D,fontSize:14,marginTop:8,marginBottom:18},acceptAllButton:{width:"100%",marginBottom:6},moreOptionsButton:{width:"100%",display:"flex",[I]:D,[F]:D}}}const U=(0,g.injectIntl)((function(){window.__c={n:"CookieModal"};const e=(0,l.O7)().currentUser.id;(0,r.useEffect)((()=>{if(!e)return;(0,v._)(e);const t=window.setInterval((()=>{(0,v._)(e)}),p.DayMs);return()=>{window.clearInterval(t)}}),[e]);const t=(0,d.yK)(O,[]);return s()(w.Z,{onDismiss:()=>{},render:()=>s()("div",{[B]:t.modal},void 0,s()(M.gq,{[_]:E,[F]:D,[I]:D},void 0,s()("img",{[B]:t.image,src:c.Z.images.feedbackThankYouPng}),s()("div",{[B]:t.title},void 0,s()(g.FormattedMessage,{id:"cookieModal.requestConsent.title",[A]:"Set your cookie preferences"})),s()("div",{[B]:t[x]},void 0,(0,u.Fd)(h.Tz,"banner")),s()(L,{}),s()(R,{}),s()(N,{}))),requireOnline:!0,modalStore:f.Z})}))},42333:(e,t,i)=>{i.r(t),i.d(t,{default:()=>We});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(83355),d=i(18466),c=i(41892),u=i(3909),m=i(82990),p=i(51454),g=i(5366),h=i(54642),v=i(73409),f=i(10482);const y=i(85).QWv;function b(e,t,i){if(i){const{templateId:o}=i;return e.some((e=>e.milestone===t&&e.template_id===o))}return e.some((e=>e.milestone===t))}var S=i(33929),w=i(38755),M=i(8323),k=i(79315),C=i(4926),Z=i(49085);const T="rate",P="send",I="thanks";class F extends Z.default{getInitialState(){return{starRating:void 0,step:T}}}const _=F;var x=i(5188),A=i(23063),B=i(42922),D=i(64921),E=i(74194),L=i(3386),R=i(31278),N=i(29551);const O=i(85).lWm,U=i(85).Je3,V=i(85).ChN,W=i(85)._Fe,K=i(85).NDn,z=i(85).GZ0,G=i(85).A7Y,H=i(85).Und,q=i(85).rps,j=i(85).$bT,Q=i(85).EMU,J=i(85).sM5,$=i(85).Wu_,Y=i(85).Ql2,X=i(85).wgE,ee=i(85).GGR,te=i(85).tLG,ie=i(85).fBv,oe=i(85).Hco,ne=i(85).od_,ae=i(85).cZW,se=i(85).Wp_,re=i(85).Yzm,le=i(85).Rbl,de=i(85).Fr2,ce=i(85).mhx,ue=i(85).Ker,me=i(85).UqM,pe=i(85).H1U,ge=i(85).UPJ,he=i(85).jkI,ve=i(85).tDk,fe=i(85).X_m,ye=i(85).D7I,be=i(85).UVY,Se=i(85).ypd,we=i(85).rpY,Me=i(85).Bgg,ke=i(85).Mm1,Ce=i(85).AEP,Ze=i(85).qJ8,Te=i(85).Gnd,Pe=i(85).QmD,Ie=i(85).gdQ,Fe=i(85).BQ6,_e=i(85).PG2,xe=i(85).wuN,Ae=i(85).Jkr,Be=i(85).Au,De=i(85).yzD,Ee=i(85).Scd,Le=i(85).oSF,Re=i(85).C50,Ne=i(85).nx5,Oe=i(85).Jjd,Ue=(0,g.defineMessages)({[Oe]:{id:"csatPopup.additionalFeedback.placeholder",[Ne]:"Tell us more..."}});class Ve extends l.Z{constructor(){super(...arguments),this.storeTypes={[Re]:_},this.renderCancel=()=>n()(D.Z,{[_e]:this[Le],[Fe]:this.getCancelStyle(),[Ie]:{[Ee]:this[Be][De]}},void 0,u.Z.closeSmall({[Ae]:14,fill:this[Be][xe]})),this.renderStep=()=>{const{step:e}=this[Te][Re][Pe],{[Ze]:t}=k.default[Pe];let i;if(t){const e=t.getInitialUseCases();e&&(i=s().sample(e))}return r[ye](r.Fragment,null,n()(A.Z,{[Me]:e===T,enterAnimationStyle:{[Ce]:1},exitAnimationStyle:{[Ce]:0,translateY:-120},[we]:()=>n()("div",{[Fe]:{[ke]:40}},void 0,this.renderIcon(),this.renderFeedbackPrompt(i))}),n()(A.Z,{[Me]:e===T||e===P,enterAnimationStyle:{[Ce]:1},exitAnimationStyle:{[Ce]:0},[we]:()=>n()("div",{[Fe]:this.getSlideContainerStyle()},void 0,this.renderStars(i),this.renderInput(),this.renderSendButton())}),n()(A.Z,{[Me]:e===I,animationStyle:this[Se](e===I),enterAnimationStyle:this[be](),exitAnimationStyle:this[be](),[we]:this.renderThanks}))},this.renderThanks=()=>n()("div",{},void 0,n()("img",{[Fe]:{[Ae]:165,[fe]:80},src:c.Z.images.feedbackThankYouPng}),n()("div",{[Fe]:this.getThanksHeaderStyle()},void 0,n()(g.FormattedMessage,{[Ne]:"Thanks for your feedback!",id:"csatPopup.thanks.header"})),n()("div",{[Fe]:this.getThanksDescriptionStyle()},void 0,n()(g.FormattedMessage,{[Ne]:"Your feedback will help us make Notion better.",id:"csatPopup.thanks.description"}))),this.renderIcon=()=>{const{[ve]:e}=k.default[Pe];if(e){const t=e.getIcon();if(t)return n()(N.gq,{[ge]:he,[pe]:he},void 0,n()(R.Z,{icon:t,isEmptyPage:!1,size:32,disabled:!0}))}return n()(N.gq,{[ge]:he,[pe]:he},void 0,u.Z[me]({[Ae]:32,[fe]:32}))},this.renderFeedbackPrompt=e=>{switch(e){case"doc_notes":return n()("div",{[Fe]:this[ue]()},ce,n()(g.FormattedMessage,{[Ne]:"How satisfied are you with using Notion for notes & docs?",id:"csatPopup.feedbackPrompt.docNotesLabel"}));case"project_management":return n()("div",{[Fe]:this[ue]()},ce,n()(g.FormattedMessage,{[Ne]:"How satisfied are you with managing projects and tasks in Notion?",id:"csatPopup.feedbackPrompt.projManagementLabel"}));case"wiki":return n()("div",{[Fe]:this[ue]()},ce,n()(g.FormattedMessage,{[Ne]:"How satisfied are you with using Notion for team wikis?",id:"csatPopup.feedbackPrompt.wikiLabel"}));default:return this.shouldRenderAsNPS(e)?n()("div",{[Fe]:this[ue]()},ce,n()(g.FormattedMessage,{[Ne]:"How likely are you to recommend Notion to a friend?",id:"csatPopup.feedbackPrompt.enterpriseDefaultLabel"})):n()("div",{[Fe]:this[ue]()},ce,n()(g.FormattedMessage,{[Ne]:"How satisfied are you with using Notion? ",id:"csatPopup.feedbackPrompt.defaultlabel"}))}},this.renderInput=()=>{const{step:e,[de]:t}=this[Te][Re][Pe];return n()(L.Z,{capture:!0,onBackspace:s()[le],onLeft:s()[le],onRight:s()[le],onSelectAll:s()[le],onRedo:s()[le],onUndo:s()[le],onCut:s()[le],onCopy:s()[le],onPaste:s()[le],onKeypress:s()[le],onDelete:s()[le],onTab:s()[le]},void 0,n()(E.Z,{textarea:!0,[Fe]:this.getInputContainerStyle(),focus:e===P,value:t,[ae]:S.default[re](Ue[Oe]),onChange:e=>{this[Te][Re][se]({...this[Te][Re][Pe],[de]:e.target.value})}}))},this.renderSendButton=()=>n()(B.Z,{isLarge:!0,[Fe]:this[ne](),[_e]:this.handleSend},void 0,n()(g.FormattedMessage,{id:"csatPopup.sendButton.label",[Ne]:"Send"})),this.renderStars=e=>{const{starRating:t,step:i}=this[Te][Re][Pe],o=e=>{let{rating:o}=e;return n()("div",{[Fe]:this.getStarStyle(),[ee]:()=>{i===T&&this[Te][Re][se]({...this[Te][Re][Pe],starRating:o})},[_e]:()=>{this[Te][Re][se]({starRating:o,step:P})}},void 0,u.Z.star({[Ae]:18,fill:this[Be][oe],[ie]:te,[Ce]:t&&t>=o?0:1}),u.Z.starFilled({[Ae]:18,fill:"#F6C050",[ie]:te,[Ce]:t&&t>=o?1:0}))},a=()=>{const i=this.shouldRenderAsNPS(e);switch(t){case 1:return n()(g.FormattedMessage,i?{[Ne]:"Very unlikely",id:"csatPopup.stars.1StarLabelNps"}:{[Ne]:"Very dissatisfied",id:"csatPopup.stars.1StarLabel"});case 2:return n()(g.FormattedMessage,i?{[Ne]:"Somewhat unlikely",id:"csatPopup.stars.2StarLabelNps"}:{[Ne]:"Somewhat dissatisfied",id:"csatPopup.stars.2StarLabel"});case 3:return n()(g.FormattedMessage,i?{[Ne]:"Not likely nor unlikely",id:"csatPopup.stars.3StarLabelNps"}:{[Ne]:"Not dissatisfied nor satisfied",id:"csatPopup.stars.3StarLabel"});case 4:return n()(g.FormattedMessage,i?{[Ne]:"Somewhat likely",id:"csatPopup.stars.4StarLabelNps"}:{[Ne]:"Somewhat satisfied",id:"csatPopup.stars.4StarLabel"});case 5:return n()(g.FormattedMessage,i?{[Ne]:"Very likely",id:"csatPopup.stars.5StarLabelNps"}:{[Ne]:"Very satisfied",id:"csatPopup.stars.5StarLabel"});default:return n()(g.FormattedMessage,{[Ne]:"Select an option",id:"csatPopup.stars.notSpecifiedLabel"})}};return n()("div",{onMouseLeave:()=>{s().delay((()=>{this[Te][Re][Pe].step===T&&this[Te][Re][se]({...this[Te][Re][Pe],starRating:void 0})}),500)},[Fe]:this.getStarsContainerStyle()},void 0,n()("div",{[Fe]:this.getStarsStyle()},void 0,n()(o,{rating:1}),n()(o,{rating:2}),n()(o,{rating:3}),n()(o,{rating:4}),n()(o,{rating:5})),n()("div",{[Fe]:this.getStarLabelStyle()},void 0,n()(a,{})))},this[Le]=async()=>{const{[Pe]:e}=x.Z;if(!e.open)return;const{open:t,...i}=e;if(t&&"trigger"===i.type){const{[Ze]:e}=k.default[Pe];if(!e)return;await h.submitCsatFeedback(this[X],{[Y]:e.id,rating:void 0,[de]:void 0,templateId:void 0,...i})}x.Z[se]({...x.Z,open:!1})},this.handleSend=async()=>{const{[de]:e,starRating:t}=this[Te][Re][Pe],{[Ze]:i}=k.default[Pe];if(!i||!t)return;const{[Pe]:o}=x.Z;if(!o.open)return;const{open:n,...a}=o,r="passive"===a.type?await h.submitCsatFeedback(this[X],{[Y]:i.id,rating:t,[de]:e,type:a.type,milestone:void 0,templateId:void 0}):await h.submitCsatFeedback(this[X],{[Y]:i.id,rating:t,[de]:e,templateId:void 0,...a});if("success"!==r.type)throw r.error;this[Te][Re][se]({...this[Te][Re][Pe],step:I}),s().delay((()=>{x.Z[se]({...x.Z,open:!1}),s().delay((()=>{this[Te][Re].reset()}),1e3)}),2e3)},this[$]={[J]:Q,[pe]:he,[j]:q}}willMount(){const{[H]:e,blockStore:t,spaceStore:i}=this.props;if(e&&t&&i){const o=this[X];if("CsatMilestoneStore"in o){const n=d.Z.withListenerIgnored((()=>function(e,t){const{userSettingsStore:i,blockStore:o,spaceStore:n}=t,a=i.getSettings(),r=null==a?void 0:a.signup_time,{CsatMilestoneStore:l}=e,{data:d}=l.state,c=864e5,u=e=>Math.floor((Date.now()-e)/c);if(!n.isDefined()||!d)return;const{milestones:m}=d;if(!m)return;if(Math.max(...m.map((e=>e.created_time)))>Date.now()-24192e5)return;if(r){const e=u(r),t=s().sample(n.getInitialUseCases())||"legacy";if(e>=180){if(!b(m,v.Hf))return{milestone:v.Hf,useCase:t}}else if(e>=90){if(!b(m,v.Vx))return{milestone:v.Vx,useCase:t}}else if(e>=28){if(!b(m,v.Sh))return{milestone:v.Sh,useCase:t}}else if(e>=7&&!b(m,v.zK))return{milestone:v.zK,useCase:t}}const p=o[y]();return o.isDefined()&&p&&(0,f.JY)(p)&&u(o.getCreatedTime())>=7&&!b(m,v.a0,{templateId:p.id})?{milestone:v.a0,useCase:"legacy",templateId:p.id}:void 0}(o,{[H]:e,blockStore:t,spaceStore:i})));if(n){const{milestone:e,useCase:t,templateId:i}=n;s().delay((()=>{x.Z[se]({open:!0,milestone:e,type:"trigger",useCase:t,templateId:i})}),2e3)}}}}renderComponent(){const{device:e}=this[X];if(e.isMobile)return;const{[Ze]:t}=k.default[Pe];return t&&!(0,w.Cx)(t)?n()(A.Z,{[Me]:x.Z[Pe].open,animationStyle:this[Se](x.Z[Pe].open),enterAnimationStyle:this[be](),exitAnimationStyle:this[be](),springConfig:this[G](),[we]:()=>n()("div",{[Fe]:this[z]()},void 0,this.renderCancel(),n()("div",{[Fe]:this[K]()},void 0,this.renderStep()))}):void 0}shouldRenderAsNPS(e){const t=(0,M.getSubscriptionTier)(),{[Pe]:i}=x.Z,o=i.open&&"trigger"===i.type;return"enterprise"===t&&!e&&o}[G](){return{scale:{stiffness:58,damping:4.3}}}[Se](e){return{[Ce]:e?1:0,scale:e?1:.96}}[be](){return{[Ce]:0,scale:.96}}getThanksHeaderStyle(){return{color:this[Be][W],[V]:m.Z[V].semibold,fontSize:14}}getThanksDescriptionStyle(){return{color:this[Be][xe],fontSize:12}}[ne](){return{[Ae]:"calc(100% - 30px)"}}getInputContainerStyle(){const{step:e}=this[Te][Re][Pe];return{[Ae]:"calc(100% - 30px)",[J]:"block",[Ee]:this[Be][U],[fe]:80,marginTop:10,marginBottom:10,[Ce]:e===T?0:1}}getStarLabelStyle(){return{fontSize:12,color:this[Be][xe],paddingTop:4}}[ue](){return{paddingTop:12,[ke]:12,color:this[Be][W],[V]:m.Z[V].semibold,fontSize:14,lineHeight:1.4,[Ae]:188}}getStarStyle(){return{[J]:"inline-flex",[ie]:"relative",[Ae]:20,[fe]:20,marginRight:3}}getSlideContainerStyle(){const{step:e}=this[Te][Re][Pe];return{...this[$],[ie]:te,transition:"transform 200ms ease",[Ae]:240,transform:e===T?"translateY(120px)":"translateY(0px)"}}getStarsContainerStyle(){return{[Ae]:"100%",...this[$]}}getStarsStyle(){return{[J]:Q,cursor:"pointer"}}[z](){return{[Ee]:this[Be][U],borderRadius:5,boxShadow:this[Be].mediumBoxShadow,[ie]:te,bottom:65+C.Z[Pe],right:16+C.Z[Pe],zIndex:p.helpButton}}[K](){return{...this[$],[Ae]:240,[fe]:195,overflow:"hidden",[ie]:"relative",padding:12,cursor:"default",textAlign:he,[ge]:he}}getCancelStyle(){return{[ie]:te,top:"10px",right:"10px",[Ee]:this[Be][O],borderRadius:"100%",[Ae]:20,[fe]:20,[J]:Q,[pe]:he,[ge]:he,zIndex:10}}}Ve.displayName="CsatPopup";const We=(0,g.injectIntl)(Ve)},1459:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ot});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(5366),l=i(79257),d=i(11599),c=i(79315),u=i(85680),m=i(88923),p=i(44532),g=i(97464),h=i.n(g),v=i(96486),f=i.n(v),y=i(15145),b=i(6695),S=i(3909),w=i(82990),M=i(50906),k=i(96802),C=i(12359),Z=i(84210),T=i(87279),P=i(33665),I=i(92547),F=i(39098),_=i(81870),x=i(26909),A=i(44514),B=i(79131),D=i(84076),E=i(78140),L=i(28992),R=i(40721),N=i(89728),O=i(31278),U=i(76798),V=i(72495),W=i(49085),K=i(61766),z=i(43700),G=i(69872);const H=i(85).mf7,q=i(85).vAc,j=i(85).OBh,Q=i(85).NJt,J=i(85).g5Y,$=i(85).LtI,Y=i(85).jtM,X=i(85).qp3,ee=i(85).wgE,te=i(85).QmD,ie=i(85).Gnd,oe=i(85).Wp_,ne=i(85).P0R,ae=i(85).ffk,se=i(85).LtW,re=i(85).wfR,le=i(85).v8Q;class de extends s.Z{constructor(){super(...arguments),this.storeTypes={[le]:W.default[re](!1),[se]:W.default[re](new K.Z)}}renderComponent(){const{schema:e,[ae]:t,format:i,showAsSectionMenu:o,handlePageSectionClick:a}=this[ne],s=e[t];if(!s)return;const r=this.getPropertyVisibility(s);return n()(G.Z,{onMouseEnter:()=>this[ie][le][oe](!0),onMouseLeave:()=>this[ie][le][oe](!1),focused:this[ie][le][te],showDragHandle:!this[ee].device.isMobile,showExtensionArrow:!1,[j]:s,format:G.Z.DisplayFormat.Name,dontShrinkRight:!0,ignoreLocalHoverState:!0,locked:this[ne].locked,onClick:()=>{if(!this[ne].locked){const e=this[ie][se][te];e[oe]({open:!e[te].open})}},right:n()(z.Z,o&&a?{[se]:this[ie][se][te],[Q]:r,visibilityLevels:["show","hide",X,Y,$],locked:this[ne].locked,onSelect:e=>a(e,t,i),onClose:()=>this[ie][le][oe](!1),type:J,[j]:s,showAsMenu:!0}:{[se]:this[ie][se][te],[Q]:r,locked:this[ne].locked,onSelect:e=>this[q](e),onClose:()=>this[ie][le][oe](!1),type:ae,[j]:s})},t)}getPropertyVisibility(e){const{[Q]:t}=this[ne];switch(t){case X:return d.isPropertyValidHideIfEmptyType({[j]:e})?X:"show";default:return t}}[q](e){const{[ae]:t,format:i,store:o}=this[ne];C.createAndCommit({userAction:"CustomizePageMenu.handleShowAsClick",[ee]:this[ee],perform:n=>{l[H]({[ae]:t,[Q]:e,format:i,store:o,transaction:n})}})}}de.displayName="CustomizePageMenuPropertyMenuItem";const ce=de,ue=i(85).uGF,me=i(85).EvJ,pe=i(85).nR5,ge=i(85).LIR,he=i(85).XqV,ve=i(85).LtI,fe=i(85).jtM,ye=i(85).mQJ,be=i(85).rOg,Se=i(85).tBn,we=i(85).b9m,Me=i(85).RvT,ke=i(85).Rac,Ce=i(85).Wmn,Ze=i(85).GCx,Te=i(85).ZBN,Pe=i(85).AEP,Ie=i(85).UBi,Fe=i(85).YDv,_e=i(85).XNW,xe=i(85).ChN,Ae=i(85).BQ6,Be=i(85).Hco,De=i(85).Jkr,Ee=i(85).X_m,Le=i(85).XCs,Re=i(85).rI1,Ne=i(85).sOA,Oe=i(85).Mm1,Ue=i(85)._V5,Ve=i(85).wuN,We=i(85).Au,Ke=i(85).dMt,ze=i(85).jkI,Ge=i(85).UPJ,He=i(85).sM5,qe=i(85).Exd,je=i(85).D7I,Qe=i(85).Bvo,Je=i(85).nx5,$e=i(85).Zij,Ye=i(85).dLQ,Xe=i(85).YjO,et=i(85).MWD,tt=i(85).QmD,it=i(85).IGO,ot=i(85).Gnd,nt=i(85).Wo8,at=i(85).vCp,st=i(85).vhv,rt=i(85).urI,lt=i(85).mf7,dt=i(85).NJt,ct=i(85).JrN,ut=i(85).wN$,mt=i(85).TpK,pt=i(85).kk0,gt=i(85).LCr,ht=i(85).SkC,vt=i(85).nxU,ft=i(85).Drs,yt=i(85).JJj,bt=i(85).lsp,St=i(85).NlP,wt=i(85).hRh,Mt=i(85).v1$,kt=i(85).wgE,Ct=i(85).ffk,Zt=i(85).P0R,Tt=i(85).XtO,Pt=i(85).ted,It=i(85).hKK;class Ft extends s.Z{constructor(){super(...arguments),this.storeTypes={[It]:I.Z},this.handleDraggableDrop=e=>{const t=this[Pt](),i=this[Zt][Tt];if(t){const o=e.map((e=>t.find((t=>t[Ct]===e))));l.updateCollectionPageProperties({[kt]:this[kt],[Mt]:o,[Tt]:i})}},this[wt]=e=>{const t=this[St](),i=this[Zt][Tt];if(t){const o=e.map((e=>t.find((t=>t[bt]===e))));t&&C[yt]({[ft]:"CustomizePageMenu.handleDraggableDropSections",[kt]:this[kt],[vt]:e=>{l[ht]({[kt]:this[kt],pageSectionFormats:o,[Tt]:i,[gt]:e})}})}},this.handleShowAsClick=(e,t,i,o)=>{const n=d[pt]();if(!n)return!1;let a=o[mt]?f()[ut](o[mt]):[];if(!i[t])return;const s=a[ct]((e=>e[bt]===t));-1!==s?a[s]={[bt]:t,[dt]:e}:a=[...a,{[bt]:t,[dt]:e}];const r="inline"===e||"minimal"===e?bt:"show";a&&(C[yt]({[ft]:"CustomizePageMenu.handleShowAsClick",[kt]:this[kt],[vt]:e=>{l[ht]({[kt]:this[kt],pageSectionFormats:a,[Tt]:n,[gt]:e}),l[lt]({[Ct]:t,[dt]:r,[Tt]:n,[rt]:o,[gt]:e})}}),M.trackRelationShowAs(this[kt],{from:st,mode:"inline"===e?"page_section":"minimal"===e?"minimal_page_section":Ct}))},this.handleShowAsSectionMenuClick=(e,t,i)=>{const o=d[pt]();if(!o)return;let n=i[mt]?f()[ut](i[mt]):[];if("inline"===e||"minimal"===e){const a=n[ct]((e=>e[bt]===t));-1!==a?n[a]={[bt]:t,[dt]:e}:n=[...n,{[bt]:t,[dt]:e}];const s="inline"===e||"minimal"===e?bt:"show";n&&(C[yt]({[ft]:"CustomizePageMenu.handleShowAsPageSectionClick",[kt]:this[kt],[vt]:e=>{l[ht]({[kt]:this[kt],pageSectionFormats:n,[Tt]:o,[gt]:e}),l[lt]({[Ct]:t,[dt]:s,[Tt]:o,[rt]:i,[gt]:e})}}),M.trackRelationShowAs(this[kt],{from:st,mode:"minimal"===e?"minimal_page_section":"page_section"}))}else{const n=b.PropertyVisibilityRange.find((t=>t===e));if(!n)return;C[yt]({[ft]:"CustomizePageMenu.handleShowAsPropertyClick",[kt]:this[kt],[vt]:e=>{l[lt]({[Ct]:t,[dt]:n,[Tt]:o,[rt]:i,[gt]:e})}}),M.trackRelationShowAs(this[kt],{from:st,mode:Ct})}},this.handleToggleLockClick=()=>{const e=d[pt]();if(!e)return!1;const t=e[at]();t&&(C[yt]({[ft]:"CustomizePageMenu.handleToggleLockClick",[kt]:this[kt],[vt]:e=>{k.setBlockLocked({[kt]:this[kt],[Tt]:t,[nt]:!d[nt](),[gt]:e})}}),this[ot][It].setState({[it]:!this[ot][It][tt][it]}))}}renderComponent(){const{device:e}=this[kt],t=this.createComputedStore((()=>"page"===this[Zt][et]?this[Zt][Tt][Xe]():this[Zt][Tt].isSyncedCollection()));let i;i=e[Ye]?{menuType:T.og.Modal,right:n()(R.DoneMenuText,{}),onClickRight:l.close,[$e]:this[Zt].intl.formatMessage({id:"customizePageMenu.mobileHeader.label",[Je]:"Customize page"})}:{menuType:T.og.Popup,minWidth:400};const o=this[Qe]();return a[je](E.Z,h()({},i,{header:this.renderHeader()}),(this[Zt].locked||this[ot][It][tt][it])&&this.renderLockControls(),this.renderPageSectionsSectionMenuItem(o,t[tt]),this.renderPropertiesSectionMenuItem(o))}renderLockControls(){return n()("div",{[Ae]:{[qe]:12,[He]:"flex",[Ge]:ze,alignItems:ze,borderTop:`1px solid ${this[We][Ke]}`,borderBottom:`1px solid ${this[We][Ke]}`,background:this[We].sidebarBackground,color:this[We][Ve],[Ue]:6,[Oe]:6}},void 0,n()("span",{[Ae]:{[He]:Ne,[Re]:"middle",[Le]:6}},void 0,this[ot][It][tt][it]?S.Z.unlocked({[Ee]:12,[De]:12,fill:this[We][Be]}):S.Z.locked({[Ee]:12,[De]:12,fill:this[We][Be]})),this[ot][It][tt][it]?n()(r.FormattedMessage,{id:"customizePageMenu.unlocked.header",[Je]:"Settings unlocked on parent database."}):n()(r.FormattedMessage,{id:"customizePageMenu.locked.header",[Je]:"Settings locked on parent database."}),n()(N.Z,{[Ae]:{[qe]:12,color:this[We][Ve],[xe]:w.Z[xe].semibold,[_e]:2,[Fe]:4,[Le]:4,[Ee]:20},onClick:this.handleToggleLockClick},void 0,this[ot][It][tt][it]?n()(r.FormattedMessage,{id:"customizePageMenu.lock.label",[Je]:"Re-lock"}):n()(r.FormattedMessage,{id:"customizePageMenu.unlock.label",[Je]:"Unlock"})))}renderPropertiesSectionMenuItem(e){if(!this[Ie]()||"page"===this[Zt][et])return;const t=this.getPageCustomization(e);if(!t)return;const{propertyVisibility:i}=t;if(!i)return;const o=i.reduce(((e,t)=>(e[t[Ct]]=t[dt],e)),{}),a=this[St]().filter((e=>"inline"===e[dt]||"minimal"===e[dt])).map((e=>e[bt])),s=f().difference(this[Pt]().map((e=>e[Ct])),a);return n()(V.Z,{[Ae]:{[Pe]:this[Zt].locked?.5:1},[$e]:n()(r.FormattedMessage,{id:"customizePageMenu.propertiesSection.header",[Je]:"Properties"})},void 0,this.renderDraggablePageProperties(s,o,e,this.handleDraggableDrop))}renderPageSectionsSectionMenuItem(e,t){const i=this[Zt][Tt],o=this[Ie]();if(!o||!i)return;const s=this.getPageCustomization(e);if(!s)return;const{pageSectionVisibility:c}=s;if(!c)return;const u=this[St]().map((e=>e[bt])),m={topLevelDiscussions:!t,backLinks:!0,pageComments:!t};return a[je](a[Se],null,n()(V.Z,{[Ae]:{[Pe]:this[Zt].locked?.5:1},[$e]:n()(r.FormattedMessage,{id:"customizePageMenu.sectionsSection.header",[Je]:"Sections"}),topBorder:!this[Zt].locked&&!this[ot][It][tt][it]},void 0,n()("div",{[Ae]:{[_e]:8}},void 0,u.length>0&&n()(V.Z,{[Ae]:{[Pe]:this[Zt].locked?.5:1,[De]:"100%",[Oe]:0,[Ue]:0}},void 0,n()(B.ZP,{[Ze]:"vertical",keys:u,renderKey:t=>{if("collection"===this[Zt][et]&&"inline"===(0,d.getPageVisibility)(void 0,t))return this[Te](o,t,e)},onDrop:this[wt]}),n()(B.ZP,{[Ze]:"vertical",keys:u,renderKey:t=>{if("collection"===this[Zt][et]&&"minimal"===(0,d.getPageVisibility)(void 0,t))return this[Te](o,t,e)},onDrop:this[wt]})),m.topLevelDiscussions&&n()(L.Z,{[$e]:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.topLevelPageDiscussionsTitle",[Je]:"Top-level page discussions"}),icon:S.Z.speechBubbleThick({[Ee]:16,[De]:16}),right:n()(z.Z,{[dt]:c[Ce],visibilityLevels:["section_show","section_hide"],locked:this[Zt].locked,onSelect:t=>{l[ke]({[kt]:this[kt],pageSection:"comments",[dt]:t,[Tt]:i,[rt]:e})},[et]:"page"})}),m.backLinks&&n()(L.Z,{[$e]:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.backlinksTitle",[Je]:"Backlinks"}),icon:S.Z.alias({[Ee]:16,[De]:16,[Me]:"rotate(180deg)"}),right:n()(z.Z,{[dt]:c[we],locked:this[Zt].locked,visibilityLevels:["section_show","section_hide","section_collapsed"],onSelect:t=>{l[ke]({[kt]:this[kt],pageSection:"backlinks",[dt]:t,[Tt]:i,[rt]:e})},[et]:"page"})}),m.pageComments&&n()(L.Z,{[$e]:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.pageCommentsTitle",[Je]:"Page comments"}),icon:S.Z.speechBubbleThick({[Ee]:16,[De]:16}),right:n()(z.Z,{[dt]:(0,d.getPageVisibility)(c,"margin_comments"),visibilityLevels:["inline","minimal"],locked:this[Zt].locked,onSelect:t=>{l[ke]({[kt]:this[kt],pageSection:"margin_comments",[dt]:t,[Tt]:i,[rt]:e})},[et]:"page"})}))))}[Te](e,t,i){var o;return n()("div",{[Ae]:{[He]:be,[De]:"100%"}},void 0,n()(L.Z,{[$e]:null===(o=e[t])||void 0===o?void 0:o.name,icon:S.Z.typesRelation({[Ee]:14,[De]:14,color:this[We][Be],fill:this[We][Be],[xe]:w.Z[xe].medium}),disabled:this[Zt].locked,showDragHandle:!this[kt].device[Ye],right:n()(z.Z,{[dt]:(0,d.getPageVisibility)(void 0,t),visibilityLevels:[ye,fe,ve],locked:this[Zt].locked,onSelect:o=>{this.handleShowAsClick(o,t,e,i)},[et]:"page",showAsMenu:!0})}))}renderHeader(){if(this[kt].device[Ye])return;const{[Tt]:e}=this[Zt];if(e){const t=e.getIcon(),i="collection"===this[Zt][et]?this[Zt][Tt][at]():void 0,o=t&&n()(O.Z,{icon:t,isEmptyPage:!1,size:14,disabled:!0,[Ae]:{[He]:"inline-flex",marginRight:2}}),s=n()(U.Z,{[Tt]:e,[Ae]:{[He]:fe}}),d=i?n()(A.Q,{prefix:n()(r.FormattedMessage,{id:"customizePageMenu.header.allPages.label",[Je]:"Customize all pages in"}),viewName:i?a[je](a[Se],null,n()(D.Z,{onClick:l.close,href:(0,Z.ZP)({[Tt]:i,[he]:!1,[ge]:y.tY.Breadcrumb}),[fe]:!0},void 0,o,s)):a[je](a[Se],null,o,s)}):n()(r.FormattedMessage,{id:"customizePageMenu.header.singlePage.label",[Je]:"Customize this page view"});return n()(L.Z,{[Ae]:{...x.ZP.headingStyle},[$e]:d,right:n()(_.Z,{helpButtonContext:"customize_page_menu",href:(0,P.getLocalizedUrl)("guides.customizePageView")})})}}renderDraggablePageProperties(e,t,i,o){const a=this[Ie](),s=this[Zt][Tt];return s instanceof F.NW?n()(B.ZP,{[Ze]:"vertical",keys:e,renderKey:e=>{var o;const r=null===(o=a[e])||void 0===o?void 0:o[et];if("collection"===this[Zt][et])return n()(ce,"relation"===r?{schema:a,[dt]:t[e],[Ct]:e,[rt]:i,[Tt]:s,locked:this[Zt].locked,showAsSectionMenu:!0,handlePageSectionClick:this.handleShowAsSectionMenuClick}:{schema:a,[dt]:t[e],[Ct]:e,[rt]:i,[Tt]:s,locked:this[Zt].locked})},onDrop:o}):null}[Ie](){return this[Zt][et],this[Zt][Tt][Ie]()}[Qe](){const{[Tt]:e}=this[Zt],t=e.getFormat(),i=this[Ie]();if(!i)return{};return b[Qe](t,i,void 0,b.FormatContext.Collection)}[Pt](){if("collection"!==this[Zt][et])return[];return this[Qe]()[pe]||[]}[St](){if("collection"!==this[Zt][et])return[];return this[Qe]()[mt]||[]}getPageCustomization(e){return{propertyVisibility:e.property_visibility,pageSectionVisibility:e[me]}}isWikiPage(){const e=this[Zt][Tt].getParentStore();return!!(e&&e instanceof F.G)&&e[ue]()}}Ft.displayName="CustomizePageMenu";const _t=Ft,xt=i(85)._lc,At=i(85).Wo8,Bt=i(85).FH8,Dt=i(85).tDk,Et=i(85).kk0,Lt=i(85).WCo,Rt=i(85).QmD;class Nt extends s.Z{constructor(){super(...arguments),this.renderModal=()=>{if(!u.Z[Rt][Lt])return;const e=d[Et](),{[Dt]:t}=c.default[Rt],i=m.default[Rt].open&&m.default[Rt].target||t;return e?n()(_t,{store:e,type:Bt,intl:this.props.intl,locked:d[At]()}):i?n()(_t,{store:i,type:"page",intl:this.props.intl,locked:!1}):void 0}}renderComponent(){const{device:e}=this.environment,t=u.Z[Rt];return n()(p.ZP,{popupType:e.isMobile?p.ZP[xt].SlideUp:p.ZP[xt].Popup,alignmentToOrigin:p.ZP.Alignment.Center,open:t[Lt],render:this.renderModal,originRect:t[Lt]?t.rect:void 0,onDismiss:()=>l.close()})}}Nt.displayName="CustomizePageMenuRenderer";const Ot=(0,r.injectIntl)(Nt)},60043:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Jt});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(17126),c=i(67294),u=i(83355),m=i(13991),p=i(49085),g=i(8848),h=i(41797),v=i(5366),f=i(40506);const y=i(85).Yzm,b=i(85).nx5,S=(0,v.defineMessages)({none:{[b]:"None",id:"dateFormatHelpers.reminderMenuItems.none"},onTheDay:{[b]:"On day of event {formattedTimeText}",id:"dateFormatHelpers.reminderMenuItems.onTheDayOfEvent"},hoursBefore:{[b]:"{numberOfHours, plural, one {{numberOfHours} hour before} other {{numberOfHours} hours before}}",id:"dateFormatHelpers.reminderMenuItems.hoursBefore"},minutesBefore:{[b]:"{numberOfMinutes, plural, one {{numberOfMinutes} minute before} other {{numberOfMinutes} minutes before}}",id:"dateFormatHelpers.reminderMenuItems.minutesBefore"},yearsBefore:{[b]:"{numberOfYears, plural, one {{numberOfYears} year before {formattedTimeText}} other {{numberOfYears} years before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.yearsBefore"},daysBefore:{[b]:"{numberOfDays, plural, one {{numberOfDays} day before {formattedTimeText}} other {{numberOfDays} days before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.daysBefore"},monthsBefore:{[b]:"{numberOfMonths, plural, one {{numberOfMonths} month before {formattedTimeText}} other {{numberOfMonths} months before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.monthsBefore"},weeksBefore:{[b]:"{numberOfWeeks, plural, one {{numberOfWeeks} week before {formattedTimeText}} other {{numberOfWeeks} weeks before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.weeksBefore"},atTimeOf:{[b]:"At time of event",id:"dateFormatHelpers.reminderMenuItems.atTimeOfEvent"}});function w(e){const{reminder:t,shouldShowTime:i,intl:o,formatTime:n}=e;if(!t)return o[y](S.none);if(f.isDateReminder(t)){const{unit:e,value:a,time:s}=t,r=n({start_time:s,time_format:"LT",humanReadable:!0,intl:o}),l=i?`(${r})`:"";return 0===a?o[y](S.onTheDay,{formattedTimeText:l}):"day"===e?o[y](S.daysBefore,{formattedTimeText:l,numberOfDays:a}):"year"===e?o[y](S.yearsBefore,{formattedTimeText:l,numberOfYears:a}):"month"===e?o[y](S.monthsBefore,{formattedTimeText:l,numberOfMonths:a}):o[y](S.weeksBefore,{formattedTimeText:l,numberOfWeeks:a})}{const{unit:e,value:i}=t;return 0===i?o[y](S.atTimeOf):"hour"===e?o[y](S.hoursBefore,{numberOfHours:i}):o[y](S.minutesBefore,{numberOfMinutes:i})}}var M=i(7057),k=i(53877),C=i(84795),Z=i(42875),T=i(11843),P=i(3909),I=i(97880),F=i(63143),_=i(50906),x=i(87279),A=i(33665),B=i(77907),D=i(76150),E=i(52275),L=i(31945),R=i(37601),N=i(88359),O=i(1743),U=i(74194),V=i(78140),W=i(32163),K=i(72495),z=i(14871),G=i(24006),H=i(58032),q=i(64369),j=i(83182),Q=i(46247),J=i(62069);const $=i(85).OtN,Y=i(85).qKK,X=i(85).aCU,ee=i(85).qVB,te=i(85).P3s,ie=i(85).Yzm,oe=i(85).ccq,ne=i(85).j7K,ae=i(85).y79,se=i(85).PG2,re=i(85).Lj6,le=i(85).FZ1,de=i(85).rpY,ce=i(85).Joh,ue=i(85).Dd5,me=i(85).urI,pe=i(85).raT,ge=i(85).ESK,he=i(85).dzh,ve=i(85).PQi,fe=i(85).N4P,ye=i(85).Nnb,be=i(85).D7I,Se=i(85).GPw,we=i(85).jkI,Me=i(85).MLn,ke=i(85).LlE,Ce=i(85).iVN,Ze=i(85).BOM,Te=i(85).nx5,Pe=i(85).Zij,Ie=i(85).ceT,Fe=i(85).Je3,_e=i(85).Scd,xe=i(85).Au,Ae=i(85).dMt,Be=i(85).IY7,De=i(85).K07,Ee=i(85).XCs,Le=i(85).XeC,Re=i(85).YDv,Ne=i(85).Mm1,Oe=i(85).dLQ,Ue=i(85).Uk6,Ve=i(85).p06,We=i(85).Z97,Ke=i(85).EmK,ze=i(85).cFV,Ge=i(85).NNJ,He=i(85).IpN,qe=i(85).Age,je=i(85).Btx,Qe=i(85).TZJ,Je=i(85).COd,$e=i(85).OVG,Ye=i(85).ocn,Xe=i(85).Ycz,et=i(85).ASr,tt=i(85).eHP,it=i(85).wuX,ot=i(85).sl8,nt=i(85).Isj,at=i(85).wN$,st=i(85).pkR,rt=i(85).t85,lt=i(85).o8N,dt=i(85)._4y,ct=i(85).rZk,ut=i(85).TeW,mt=i(85)._yi,pt=i(85).xG0,gt=i(85)._W3,ht=i(85).AnG,vt=i(85).D7b,ft=i(85).SLe,yt=i(85).jjf,bt=i(85).bsJ,St=i(85).qI$,wt=i(85).p41,Mt=i(85).hSg,kt=i(85).jb_,Ct=i(85).Neb,Zt=i(85).E_E,Tt=i(85).nbn,Pt=i(85).K3k,It=i(85).wDG,Ft=i(85).dOt,_t=i(85).QmD,xt=i(85).Wp_,At=i(85).Gnd,Bt=i(85).E0z,Dt=i(85).C$B,Et=i(85).y4s,Lt=i(85).wgE,Rt=i(85).MWD,Nt=i(85).xjM,Ot=i(85).b7Q,Ut=i(85).mEV,Vt=i(85).tDW,Wt=i(85).DWU,Kt=i(85).P0R,zt=i(85).nm$,Gt=i(85).n8z,Ht=i(85).DJU,qt=i(85).wfR,jt=i(85).XtO;class Qt extends u.Z{constructor(){super(...arguments),this.storeTypes={[jt]:D.ZP,timezoneQuery:p.default[qt]("")},this.handleWindowKeyDown=e=>{"Escape"===e.key&&this[Ht]()},this[Gt]=e=>{e[zt]instanceof HTMLInputElement&&e[zt]===document.activeElement||this[Ht]()},this.handleDateFormatChange=e=>{var t,i;null===(t=(i=this[Kt]).onChangeDateFormat)||void 0===t||t.call(i,e)},this.handleTimeFormatChange=e=>{var t,i;const o=this[Wt]()[e];null===(t=(i=this[Kt]).onChangeTimeFormat)||void 0===t||t.call(i,o)},this.handleChangeReminder=e=>{const t=this[Vt]();var i,o;if(e){if(f.isDateReminder(e)){var n,a;null===(n=(a=this[Kt])[Ut])||void 0===n||n.call(a,{...t,[Ot]:{...e,[Nt]:(0,Z.r)()}})}else if("datetime"===t[Rt]||"datetimerange"===t[Rt]){var s,r;null===(s=(r=this[Kt])[Ut])||void 0===s||s.call(r,{...t,[Ot]:e})}}else null===(i=(o=this[Kt])[Ut])||void 0===i||i.call(o,{...t,[Ot]:e});_.trackSetReminder(this[Lt],{[Et]:t,[Ot]:e})},this[Dt]=e=>{const{[Bt]:t}=this[Lt],{[jt]:i}=this[At];i[xt]({...i[_t],[Ft]:{...i[_t][Ft],[i[_t].focus]:e[zt].value||""}}),t[It]&&this[Pt]()},this[Tt]=()=>{const{[Ft]:e}=this[At][jt][_t],t=e[Zt];if(!t)return;const i=this.parseInputDateValue(t);if(!i)return D.pd.InvalidDate;const o={...this[Vt](),[Ct]:i},n=k[kt](o);if(!n)return D.pd.InvalidRange;this[Mt]({newDate:o,[wt]:n[St],resetField:D.Hv[bt]})},this[yt]=()=>{const{[Ft]:e}=this[At][jt][_t],t=e[ft];if(!t)return;const i=this.parseInputTimeValue(t);if(!i)return D.pd.InvalidTime;const o=this[Vt]();if(f.isDateTimeRange(o)){const{newDate:e,[wt]:t}=k.getOffsetDateTimeRange({previous:o,updatedStartTime:i});this[Mt]({newDate:e,[wt]:t,resetField:D.Hv[vt]}),this[ht](D.Hv[gt]),this[ht](D.Hv.EndTime)}else{const e={...o,[pt]:i},t=k[kt](e);this[Mt]({newDate:e,[wt]:t[St],resetField:D.Hv[vt]})}},this.handleEndDateInputChange=()=>{const{[Ft]:e}=this[At][jt][_t],t=e[mt];if(!t)return;const i=this.parseInputDateValue(t);if(!i)return D.pd.InvalidDate;const o={...this[Vt](),[ut]:i},n=k[kt](o);if(!n)return D.pd.InvalidRange;this[Mt]({newDate:o,[wt]:n.end,resetField:D.Hv[gt]})},this.handleEndTimeInputChange=()=>{const{[Ft]:e}=this[At][jt][_t],t=e[ct];if(!t)return;const i=this.parseInputTimeValue(t);if(!i)return D.pd.InvalidTime;const o={...this[Vt](),[dt]:i},n=k[kt](o);if(!n)return D.pd.InvalidRange;this[Mt]({newDate:o,[wt]:n.end,resetField:D.Hv.EndTime})},this[Pt]=e=>{const{focus:t}=this[At][jt][_t];let i;t===D.Hv[bt]?i=this[Tt]():t===D.Hv[vt]?i=this[yt]():t===D.Hv[gt]?i=this.handleEndDateInputChange():t===D.Hv.EndTime&&(i=this.handleEndTimeInputChange()),i?this[At][jt][xt]({...this[At][jt][_t],[lt]:{...this[At][jt][_t][lt],[t]:i}}):this[At][jt][xt]({...this[At][jt][_t],[Ft]:{[Zt]:void 0,[ft]:void 0,[mt]:void 0,[ct]:void 0},inputIsFocused:!1,[lt]:{[Zt]:void 0,[ft]:void 0,[mt]:void 0,[ct]:void 0}})},this[rt]=()=>{const{focus:e}=this[At][jt][_t];let t;e===D.Hv[bt]?t=this[Tt]():e===D.Hv[vt]?t=this[yt]():e===D.Hv[gt]?t=this.handleEndDateInputChange():e===D.Hv.EndTime&&(t=this.handleEndTimeInputChange()),t?this[At][jt][xt]({...this[At][jt][_t],[lt]:{...this[At][jt][_t][lt],[e]:t}}):this[At][jt][xt]({...this[At][jt][_t],[Ft]:{[Zt]:void 0,[ft]:void 0,[mt]:void 0,[ct]:void 0},[lt]:{[Zt]:void 0,[ft]:void 0,[mt]:void 0,[ct]:void 0}})},this.handleDayPickerDayClick=(e,t,i)=>{if(this[Kt][st])return;let o=l()[at](this[Vt]());const{focus:n}=this[At][jt][_t],a=d.ou.fromJSDate(e).setLocale(f[ot])[nt](k[it]);if(!i.shiftKey||"date"!==o[Rt]&&"datetime"!==o[Rt])if("daterange"===o[Rt]||"datetimerange"===o[Rt]){var s,r;n===D.Hv[bt]||n===D.Hv[vt]?o={...o,[Ct]:a}:n!==D.Hv[gt]&&n!==D.Hv.EndTime||(o={...o,[ut]:a});const e=k[et](o,(0,Z.r)());if(e.end&&e.end<e[St]){if("datetimerange"===o[Rt]){const{[Ct]:e,[pt]:t,[ut]:i,[dt]:n}=o;o={...o,[Ct]:i,[pt]:n,[ut]:e,[dt]:t}}else{const{[Ct]:e,[ut]:t}=o;o={...o,[Ct]:t,[ut]:e}}this[At][jt][xt]({...this[At][jt][_t],focus:n===D.Hv[bt]||n===D.Hv[vt]?D.Hv[gt]:D.Hv[bt]})}null===(s=(r=this[Kt])[Ut])||void 0===s||s.call(r,o),this[ht](n);const t=n===D.Hv[bt]||n===D.Hv[vt]?D.Hv[gt]:D.Hv[bt];this[At][jt][xt]({...this[At][jt][_t],focus:t})}else{var c,u;const e={...o,[Ct]:a};null===(c=(u=this[Kt])[Ut])||void 0===c||c.call(u,e),this[ht](n)}else this.enableEndDate({[tt]:o,[mt]:a})},this[Xe]=e=>{this[At][jt][xt]({...this[At][jt][_t],[wt]:d.ou.fromJSDate(e)})},this[Ye]=()=>{const e=this[Vt]();if("datetimerange"===e[Rt]){var t,i;const o={[Rt]:$e,[Ct]:e[Ct],[pt]:e[pt],[Je]:e[Je],[Ot]:e[Ot]};null===(t=(i=this[Kt])[Ut])||void 0===t||t.call(i,o)}else if("daterange"===e[Rt]){var o,n;const t={[Rt]:Et,[Ct]:e[Ct],[Ot]:e[Ot]};null===(o=(n=this[Kt])[Ut])||void 0===o||o.call(n,t)}else this.enableEndDate({[tt]:e})},this.handleAllDayChange=()=>{const e=this[Vt]();if("date"===e[Rt]){var t,i;const o={[Rt]:$e,[Ct]:e[Ct],[pt]:"00:00",[Je]:(0,Z.r)(),[Ot]:e[Ot]&&f.convertToDateTimeReminder(e[Ot])};null===(t=(i=this[Kt])[Ut])||void 0===t||t.call(i,o)}else if("daterange"===e[Rt]){var o,n;const t={[Rt]:Qe,[Ct]:e[Ct],[pt]:"00:00",[ut]:e[ut],[dt]:"00:00",[Je]:(0,Z.r)(),[Ot]:e[Ot]&&f.convertToDateTimeReminder(e[Ot])};null===(o=(n=this[Kt])[Ut])||void 0===o||o.call(n,t)}else if("datetime"===e[Rt]){var a,s;const t={[Rt]:Et,[Ct]:e[Ct],[Ot]:e[Ot]&&f.convertToDateReminder(e[Ot],(0,Z.r)())};null===(a=(s=this[Kt])[Ut])||void 0===a||a.call(s,t)}else{var r,l;const t={[Rt]:je,[Ct]:e[Ct],[ut]:e[ut],[Ot]:e[Ot]&&f.convertToDateReminder(e[Ot],(0,Z.r)())};null===(r=(l=this[Kt])[Ut])||void 0===r||r.call(l,t)}},this.handleTimeZoneChange=e=>{const t=this[Vt]();if("datetime"===t[Rt]||"datetimerange"===t[Rt]){var i,o;const n={...t,[Je]:e};null===(i=(o=this[Kt])[Ut])||void 0===i||i.call(o,n)}},this[qe]=()=>{const e=this[Vt](),t=k[et](e,(0,Z.r)());this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv[bt],inputIsFocused:!0,[wt]:t[St]})},this[He]=()=>{const e=this[Vt](),t=k[et](e,(0,Z.r)());this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv[vt],inputIsFocused:!0,[wt]:t[St]})},this.handleEndInputDateFocus=()=>{const e=this[Vt](),t=k[et](e,(0,Z.r)());t.end&&this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv[gt],inputIsFocused:!0,[wt]:t.end})},this.handleEndInputTimeFocus=()=>{const e=this[Vt](),t=k[et](e,(0,Z.r)());t.end&&this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv.EndTime,inputIsFocused:!0,[wt]:t.end})},this.handleClearClick=()=>{var e,t;null===(e=(t=this[Kt])[Ut])||void 0===e||e.call(t,void 0)},this[Wt]=()=>(0,T.E)(m.SP).time,this.getSelectedTimeFormatType=()=>{const e=this[Ge](),t=this[Wt]();for(const i in t)if(t[i]===e)return i;return"12h"},this[ze]=12}willMount(e){super.willMount(e),this.openTimeFormat=k.today((0,Z.r)()),window[Ke](We,this[Gt]),window[Ke]("keydown",this.handleWindowKeyDown,!0)}willUnmount(){super.willUnmount(),window[Ve](We,this[Gt]),window[Ve]("keydown",this.handleWindowKeyDown,!0)}[Ht](){const{inputIsFocused:e}=this[At][jt][_t];e&&this[Pt]()}renderComponent(){const{[Bt]:e,WindowSizeStore:t}=this[Lt],{[st]:i,[Ue]:o,shouldShowReminder:n,header:a}=this[Kt],{inputIsFocused:r}=this[At][jt][_t],l=this[Vt](),d="datetime"===l[Rt]||"datetimerange"===l[Rt],u="daterange"===l[Rt]||"datetimerange"===l[Rt],m=s()("div",{style:{paddingTop:e[Oe]?16:8,[Ne]:e[Oe]?16:8,[Re]:e[Oe]?t[Le](16):14,[Ee]:e[Oe]?t[De](16):14,display:d?"block":"flex",...e[Oe]&&{[Be]:`\n\t\t\t\t\t\t\t0 1px 0 ${this[xe][Ae]}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},[_e]:e[Oe]?this[xe][Fe]:void 0}},void 0,this.renderStartInput(),u&&s()("div",{style:{width:12,height:8}}),this.renderEndInput(),this.renderTimeZone());let p;return p=e[Oe]?{[Ie]:x.og.Modal,[Pe]:s()(v.FormattedMessage,{[Te]:"Date",id:"LuxonDatePropertyMenu.mobileDate.title"}),right:s()(v.FormattedMessage,{[Te]:"Done",id:Ze}),left:n?this.renderRemindersHelp():void 0,[Ce]:this[Kt].onDismiss,header:m}:{[Ie]:x.og.Popup,maxHeight:"none",width:270,header:a},s()(O.Z,{capture:r,allowEsc:!0},void 0,s()(O.Z,{capture:!0,allowUndo:!0,allowEsc:!0},void 0,c[be](V.Z,p,s()(R.Z,{show:r}),s()(K.Z,{},void 0,!e[Oe]&&m,s()("div",{style:{[ke]:e[Oe]?"16px 14px 16px":"4px 0 4px",[Me]:we,...e[Oe]&&{[Se]:`1px solid ${this[xe][Ae]}`,[_e]:this[xe][Fe]}}},void 0,this.renderCalendar())),!i&&this.renderControls(),!i&&o&&s()(K.Z,{topBorder:!0},void 0,this.renderFormatPopup()),!i&&s()(K.Z,{topBorder:!0},void 0,this.renderClearButton()),!i&&!e[Oe]&&n&&s()(K.Z,{topBorder:!0},void 0,this.renderRemindersHelp()))))}getLocale(){return this[Kt].locale||this[Kt].intl.locale}renderStartInput(){const{[Bt]:e}=this[Lt],{[st]:t}=this[Kt],{focus:i,[Ft]:o,[lt]:n}=this[At][jt][_t],a=this[Vt](),r=k[et](a,(0,Z.r)(),this.getLocale()),l=Boolean(n[Zt]||n[ft]),d="datetime"===a[Rt]||"datetimerange"===a[Rt],c="daterange"===a[Rt]||"datetimerange"===a[Rt],u=i===D.Hv[bt]||i===D.Hv[vt],m=(0,F.isNotDefined)(o[Zt])?r[St][nt](this[ye]()):o[Zt],p=(0,F.isNotDefined)(o[ft])?r[St][nt](this[Ge]()):o[ft],g=(0,F.isNotDefined)(o[Zt])?r[St][nt](k[it]):o[Zt],h=(0,F.isNotDefined)(o[ft])?r[St][nt](f[fe]):o[ft];return s()("div",{style:{...l?this.getInputWrapErrorStyle():u&&c?this.getInputWrapActiveStyle():this[ve](),fontSize:e[Oe]?16:14}},void 0,s()(H.Z,{[ce]:()=>this[he](n[Zt]),originGap:this[ze],forceVisibleState:Boolean(n[Zt]),placement:H.Z[ge].Left,[de]:()=>e[Oe]?s()(U.Z,{[Rt]:Et,[me]:U.B[pe],value:g,[ue]:this[Dt],onFocus:this[qe],onBlur:this[Pt],onSubmit:this[rt],[st]:t,size:1}):s()(U.Z,{selectAll:!0,[me]:U.B[pe],value:m,focusInitial:i===D.Hv[bt],[ue]:this[Dt],onFocus:this[qe],onBlur:this[Pt],onSubmit:this[rt],[st]:t,size:1})}),d&&this.getInputSeparator(),d&&s()(H.Z,{[ce]:()=>this[he](n[ft]),originGap:this[ze],forceVisibleState:Boolean(n[ft]),placement:H.Z[ge].Right,[de]:()=>e[Oe]?s()(U.Z,{[Rt]:"time",[me]:U.B[pe],value:h,[ue]:this[Dt],onFocus:this[He],onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t}):s()(U.Z,{[me]:U.B[pe],value:p,focusInitial:i===D.Hv[vt],[ue]:this[Dt],onFocus:this[He],onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t})}))}renderEndInput(){const{[Bt]:e}=this[Lt],{[st]:t}=this[Kt],i=this[Vt](),o=k[et](i,(0,Z.r)(),this.getLocale()),n="datetime"===i[Rt]||"datetimerange"===i[Rt];if(o.end){const{focus:i,[lt]:a,[Ft]:r}=this[At][jt][_t],l=Boolean(a[mt]||a[ct]),d=i===D.Hv[gt]||i===D.Hv.EndTime,c=(0,F.isNotDefined)(r[mt])?o.end[nt](this[ye]()):r[mt],u=(0,F.isNotDefined)(r[ct])?o.end[nt](this[Ge]()):r[ct],m=(0,F.isNotDefined)(r[mt])?o.end[nt](k[it]):r[mt],p=(0,F.isNotDefined)(r[ct])?o.end[nt](f[fe]):r[ct],g=this.getDateRangeBounds(),h=g&&g.earliestValidEnd;return s()("div",{style:{...l?this.getInputWrapErrorStyle():d?this.getInputWrapActiveStyle():this[ve](),fontSize:e[Oe]?16:14}},void 0,s()(H.Z,{[ce]:()=>this[he](a[mt]),originGap:this[ze],forceVisibleState:Boolean(a[mt]),placement:H.Z[ge].Left,[de]:()=>e[Oe]?s()(U.Z,{[Rt]:Et,[me]:U.B[pe],value:m,[ue]:this[Dt],onFocus:this.handleEndInputDateFocus,onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t,inputElementAttributes:{min:h}}):s()(U.Z,{[me]:U.B[pe],value:c,focusInitial:i===D.Hv[gt],[ue]:this[Dt],onFocus:this.handleEndInputDateFocus,onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t})}),n&&this.getInputSeparator(),n&&s()(H.Z,{[ce]:()=>this[he](a[ct]),originGap:this[ze],forceVisibleState:Boolean(a[ct]),placement:H.Z[ge].Right,[de]:()=>e[Oe]?s()(U.Z,{[Rt]:"time",[me]:U.B[pe],value:p,[ue]:this[Dt],onFocus:this.handleEndInputTimeFocus,onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t}):s()(U.Z,{[me]:U.B[pe],value:u,focusInitial:i===D.Hv.EndTime,[ue]:this[Dt],onFocus:this.handleEndInputTimeFocus,onBlur:this[Pt],onSubmit:this[rt],size:1,[st]:t})}))}}renderTimeZone(){const{[Bt]:e}=this[Lt],{intl:t}=this[Kt],i=this[Vt]();if(("datetime"===i[Rt]||"datetimerange"===i[Rt])&&i[Je]!==(0,Z.r)())return s()(q.Z,{isSmall:!0,[Oe]:e[Oe],style:{marginTop:8}},void 0,(0,h.E)(t)[i[Je]])}renderCalendar(){const{firstDayOfWeek:e}=this[Kt],t=this.getDateValueForceCurrentTimeZone(),i=k[et](t,(0,Z.r)()),o=this[At][jt][_t][wt]||i[St],{focus:n}=this[At][jt][_t];if(i.end){const t=i[St].toJSDate(),a=i.end.toJSDate(),r=n===D.Hv[bt]||n===D.Hv[vt];return s()(B.LazyDayPicker,{className:"notion-date-property-menu notranslate",weekStartsOn:e,numberOfMonths:1,defaultMonth:o.toJSDate(),month:o.toJSDate(),locale:m.SP,modifiers:{range:{from:t,to:a},...r?{end:a,[St]:t}:{[St]:t,end:a}},modifiersStyles:{range:Qt.dayPickerRangeDayStyle,[St]:r?this[le]():this[re](),end:r?this[re]():this[le]()},showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayPickerDayClick,onMonthSelected:this[Xe]})}{const t=i[St].toJSDate();return s()(B.LazyDayPicker,{className:"notion-date-property-menu notranslate",numberOfMonths:1,weekStartsOn:e,defaultMonth:o.toJSDate(),month:o.toJSDate(),locale:m.SP,selected:[t],modifiers:{[St]:t},modifiersStyles:{[St]:this[le]()},showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayPickerDayClick,onMonthSelected:this[Xe]})}}renderControls(){const{[Bt]:e}=this[Lt],{shouldShowReminder:t}=this[Kt];return e[Oe]?s()(K.Z,{topBorder:!0},void 0,t&&this.renderReminderControl(),this.renderEndDateControl(),this.renderAllDayControl()):s()(c.Fragment,{},void 0,t&&s()(K.Z,{topBorder:!0},void 0,this.renderReminderControl()),s()(K.Z,{topBorder:!0},void 0,this.renderEndDateControl(),this.renderAllDayControl()))}renderEndDateControl(){const e=this[Vt]();return s()(E.Z,{focused:!1,[se]:this[Ye],[Pe]:s()(v.FormattedMessage,{[Te]:"End date",id:"LuxonDatePropertyMenu.menuItem.endDate.label"}),right:s()(G.Z,{on:"daterange"===e[Rt]||"datetimerange"===e[Rt],[se]:this[Ye]})})}renderAllDayControl(){const e=this[Vt]();return s()(E.Z,{focused:!1,[se]:this.handleAllDayChange,[Pe]:s()(v.FormattedMessage,{[Te]:"Include time",id:"LuxonDatePropertyMenu.menuItem.includeTime.label"}),right:s()(G.Z,{on:"date"!==e[Rt]&&"daterange"!==e[Rt],[se]:this.handleAllDayChange})})}renderReminderControl(){const{[Bt]:e}=this[Lt],{intl:t}=this[Kt],i=this[Vt]();return s()(L.ZP,{popupType:e[Oe]?L.Z4.SlideUp:L.Z4.Popup,[oe]:L.pO.Right,renderOrigin:o=>c[be](N.Z,n()({},o,{icon:P.Z.alarmClock({width:14}),[Pe]:s()(v.FormattedMessage,{[Te]:"Remind",id:"LuxonDatePropertyMenu.menuItem.remind.label"}),focused:!1,showExtensionArrow:e[Oe],right:w({[Ot]:i[Ot],intl:t,formatTime:M.mr})})),[de]:o=>{let a;a=e[Oe]?{[Ie]:x.og.Modal,[Pe]:s()(v.FormattedMessage,{[Te]:"Remind",id:"LuxonDatePropertyMenu.mobileRemindModal.title"}),right:s()(v.FormattedMessage,{[Te]:"Done",id:"LuxonDatePropertyMenu.mobileDoneReminderButton.label"}),[Ce]:o.close}:{[Ie]:x.og.Popup,width:250};const r=("date"===i[Rt]||"daterange"===i[Rt]?f.dateReminderOptions:f.dateTimeReminderOptions).map((e=>{const i=w({[Ot]:e,shouldShowTime:!0,intl:t,formatTime:M.mr});return{key:i,action:t=>{this.handleChangeReminder(e),o.close()},[de]:(e,t)=>c[be](E.Z,n()({},e,{[Pe]:i}))}}));return c[be](V.Z,a,s()(W.Z,{[Rt]:W.i[ae],sections:[{key:"reminder section",[de]:e=>c[be](K.Z,e),items:r}],[ne]:void 0}))}})}renderFormatPopup(){const{[Bt]:e}=this[Lt];return s()(L.ZP,{popupType:e[Oe]?L.Z4.SlideUp:L.Z4.Popup,[oe]:L.pO.Right,renderOrigin:t=>c[be](E.Z,n()({},t,{icon:P.Z.sidebarSettings({width:14}),[Pe]:s()(v.FormattedMessage,{[Te]:"Date format & timezone",id:"LuxonDatePropertyMenu.menuItem.formatAndTimezone.label"}),focused:!1,showExtensionArrow:e[Oe]})),[de]:t=>{let i;return i=e[Oe]?{[Ie]:x.og.Modal,[Pe]:s()(v.FormattedMessage,{[Te]:"Date format",id:"LuxonDatePropertyMenu.mobileDateFormatModal.title"}),right:s()(v.FormattedMessage,{[Te]:"Done",id:Ze}),[Ce]:t.close}:{[Ie]:x.og.Popup,width:250},c[be](V.Z,i,s()(K.Z,{},void 0,this.renderDateFormatControl(),this.showTimeFormatControl()&&this.renderTimeFormatControl(),this.renderTimeZoneControl()))}})}renderDateFormatControl(){const e=this[Kt].dateFormat||f.defaultDateFormat,{intl:t}=this[Kt],i={menuTitle:t[ie]({[Te]:"Date format",id:"LuxonDatePropertyMenu.dateFormatDropdownButton.label"}),items:f.dateFormatOptions,getKey:e=>e,selectedItem:e,onSelect:this.handleDateFormatChange,renderItem:e=>c[be](E.Z,n()({},e,{[Pe]:t[ie](f.dateFormatDisplayNameMap[e.value])})),renderOrigin:i=>c[be](N.Z,n()({focused:!1,[Pe]:s()(v.FormattedMessage,{[Te]:"Date format",id:"LuxonDatePropertyMenu.menuItem.format.label"}),right:e?t[ie](f.dateFormatDisplayNameMap[e]):s()(v.FormattedMessage,{[Te]:"Empty",id:"LuxonDatePropertyMenu.formatMenu.emptyButton.label"})},i))};return c[be](z.Z,i)}renderTimeFormatControl(){const e=this[Vt](),t="date"===e[Rt]||"daterange"===e[Rt],i=this[Ge](),{intl:o}=this[Kt],a=this.getSelectedTimeFormatType(),r={menuTitle:o[ie]({[Te]:"Time format",id:"LuxonDatePropertyMenu.timeFormatMenu.title"}),items:f.clockFormats,getKey:e=>e,selectedItem:a,onSelect:this.handleTimeFormatChange,renderItem:e=>c[be](E.Z,n()({},e,{[Pe]:o[ie](f.clockFormatDisplayNameMap[e.value])})),[st]:t,renderOrigin:e=>c[be](N.Z,n()({focused:!1,[Pe]:s()(v.FormattedMessage,{[Te]:"Time format",id:"LuxonDatePropertyMenu.menuItem.timeFormat.label"}),[st]:t,right:!t&&(i?o[ie](f.clockFormatDisplayNameMap[a]):s()(v.FormattedMessage,{[Te]:"Empty",id:"LuxonDatePropertyMenu.timeFormatMenu.emptyButton.label"}))},e))};return c[be](z.Z,r)}renderTimeZoneControl(){const e=this[Vt](),t="date"===e[Rt]||"daterange"===e[Rt],i=this.getTimeZone();return s()(J.Z,{renderOrigin:e=>c[be](N.Z,n()({},e,{focused:!1,[Pe]:s()(v.FormattedMessage,{[Te]:"Timezone",id:"datePropertyMenu.menuItem.time.label"}),[st]:t,right:!t&&k.timezoneAbbreviation(i)})),onSelect:e=>this.handleTimeZoneChange(e)})}renderClearButton(){return s()(E.Z,{focused:!1,[se]:this.handleClearClick,[Pe]:s()(v.FormattedMessage,{[Te]:"Clear",id:"LuxonDatePropertyMenu.clearButton.label"})})}renderRemindersHelp(){const{[Bt]:e}=this[Lt];return e[Oe]?s()(Q.Z,{href:(0,A.getLocalizedUrl)("guides.reminders"),[te]:"date_selector"}):s()(j.Z,{[Pe]:s()(v.FormattedMessage,{[Te]:"Learn about reminders",id:"LuxonDatePropertyMenu.learnMore.helpButton.label"}),href:(0,A.getLocalizedUrl)("guides.reminders"),[te]:"date_selector"})}enableEndDate(e){const{[tt]:t,[mt]:i,[ct]:o}=e;if("datetime"===t[Rt]){var n,a;const e={[Rt]:Qe,[Ct]:t[Ct],[pt]:t[pt],[ut]:i||t[Ct],[dt]:o||t[pt],[Je]:t[Je],[Ot]:t[Ot]};null===(n=(a=this[Kt])[Ut])||void 0===n||n.call(a,e),this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv[gt]})}else if("date"===t[Rt]){var s,r;const e={[Rt]:je,[Ct]:t[Ct],[ut]:i||t[Ct],[Ot]:t[Ot]};null===(s=(r=this[Kt])[Ut])||void 0===s||s.call(r,e),this[At][jt][xt]({...this[At][jt][_t],focus:D.Hv[gt]})}else(0,I.unreachable)(t)}[Vt](){const{value:e}=this[Kt];return e&&!l().isNaN(e)?e:this.openTimeFormat}getDateRangeBounds(){const e=this[Vt]();if(f.isDateRange(e)||f.isDateTimeRange(e)){const t=k[et](e,(0,Z.r)());return{earliestValidEnd:t[St][nt](k[it]),latestValidStart:t.end[nt](k[it])}}}getDateValueForceCurrentTimeZone(){const{value:e}=this[Kt];return e&&!l().isNaN(e)?"datetime"===e[Rt]||"datetimerange"===e[Rt]?{...e,[Je]:(0,Z.r)()}:e:this.openTimeFormat}[ye](){const{dateFormat:e}=this[Kt];return void 0===e||"relative"===e||"ll"===e?f.luxonDateDisplayFormat(this.getLocale()):f.convertToLuxonDateFormat(e)}[Ge](){const{timeFormat:e}=this[Kt];return e?f[ee](e):f.defaultLuxonTimeDisplayFormat}showTimeFormatControl(){return!T.S.includes(m.SP)}getTimeZone(){const e=this[Vt]();return"datetime"===e[Rt]||"datetimerange"===e[Rt]?e[Je]:(0,Z.r)()}parseInputDateValue(e){const{intl:t}=this[Kt];return this[Lt][Bt][Oe]?(0,C.parseDateValueWithInputFormat)(e,k[it],t):(0,C.parseDateValueWithInputFormat)(e,this[ye](),t)}parseInputTimeValue(e){return(0,C.parseTimeValueWithInputFormat)(e,this[Ge](),this[Kt].intl)}[Mt](e){var t,i;const{newDate:o,[wt]:n,resetField:a}=e;null===(t=(i=this[Kt])[Ut])||void 0===t||t.call(i,o),this[At][jt][xt]({...this[At][jt][_t],[wt]:n}),this[ht](a)}[ht](e){const{[_t]:t}=this[At][jt];this[At][jt][xt]({...t,[lt]:{...t[lt],[t.focus]:void 0},[Ft]:{...t[Ft],[t.focus]:void 0}})}[he](e){const{intl:t}=this[Kt];switch(e){case D.pd.InvalidDate:return t[ie]({id:"LuxonDatePropertyMenu.invalidDateError.tooltip",[Te]:"Invalid date"});case D.pd.InvalidRange:return t[ie]({id:"LuxonDatePropertyMenu.invalidDateOrTimeRangeError.tooltip",[Te]:"Invalid range"});case D.pd.InvalidTime:return t[ie]({id:"LuxonDatePropertyMenu.invalidTimeError.tooltip",[Te]:"Invalid time"});default:return}}getInputSeparator(){return s()("div",{style:{height:14,width:1,[_e]:this[xe][Ae],marginLeft:6,marginRight:12,flexShrink:0}})}[X](){return{display:"flex",alignItems:we,borderRadius:3,height:28,lineHeight:1.2,[_e]:this[xe].inputBackground,[Re]:8,[Ee]:8,flexBasis:"50%"}}[ve](){return{...this[X](),[Be]:this[xe].inputBoxShadow,flexGrow:1}}getInputWrapErrorStyle(){return{...this[X](),[Be]:`inset 0 0 0 2px ${g.ZP.red}`,[_e]:g.ZP.redWithAlpha(.15),flexGrow:1}}getInputWrapActiveStyle(){return{...this[X](),[Be]:`inset 0 0 0 2px ${g.ZP.blue}`,[_e]:g.ZP[Y](.15),flexGrow:1}}[le](){return{[$]:g.ZP.blue,color:g.ZP.white}}[re](){return{[$]:g.ZP[Y](.43)}}}Qt.displayName="DatePropertyMenu",Qt.dayPickerRangeDayStyle={[$]:g.ZP[Y](.15)};const Jt=(0,v.injectIntl)(Qt)},92660:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(77094),n=i.n(o),a=(i(67294),i(83355)),s=i(53953),r=i(44532);const l=i(85).sI1,d=i(85).wJk,c=i(85).P0R;class u extends a.Z{renderComponent(){const{render:e}=this[c],{device:t}=this.environment,i=this[c].modalStore.state;return t.isMobile?n()(r.ZP,{ariaLabel:this[c].ariaLabel,open:i.open,popupType:r.ZP.PopupType.SlideUp,origin:this[c].origin,[d]:this[c][d],render:e,style:this[c].style}):n()(s.Z,{ariaLabel:this[c].ariaLabel,open:i.open,preventHideChildrenWhileOpening:!0,render:e,[d]:this[c][d],style:this[c].style,[l]:this[c][l]})}}u.displayName="DefaultPopupOrModal"},36507:(e,t,i)=>{i.d(t,{Z:()=>I});var o=i(77094),n=i.n(o),a=i(97464),s=i.n(a),r=i(67294),l=i(83355),d=i(82990),c=i(87279),u=i(75024),m=i(28992);const p=i(85).t7b,g=i(85).Oi5,h=i(85).Dg8,v=i(85).g4H,f=i(85).OM8,y=i(85).Y9u,b=i(85).Exd,S=i(85).ChN,w=i(85).jkI,M=i(85).Mm1,k=i(85)._V5,C=i(85).Scd,Z=i(85).wgE,T=i(85).G4H;class P extends l.Z{constructor(){super(...arguments),this[T]={menuItem:{minHeight:void 0,...this[Z].device.isMobile&&{[C]:void 0,boxShadow:void 0},[k]:32,[M]:32},text:{textAlign:w},title:{margin:0,[S]:d.Z[S].medium,[b]:u.yv(this[Z],y),[f]:u.Dp(this[Z],y)},[v]:{[b]:u.yv(this[Z],y)}}}renderComponent(){const{style:e,captionStyle:t,...i}=this.props,o={...this[T].menuItem,...e},n={...this[T][v],...t};return r.createElement(m.Z,s()({},i,{title:this[h](),[v]:this[g](n),textWrapperStyle:this[T].text,style:o,captionStyle:n}))}[h](){const{title:e}=this.props;if(!e)return;const t=this[T],i=this[p](),o={...t.title,...i.title};return n()("h4",{role:"alert",style:o},void 0,e)}[g](e){const{[v]:t}=this.props;if(!t)return;const i={...e,...this[p]()[v]};return n()("div",{style:i},void 0,t)}[p](){return{title:{color:this.theme.mediumTextColor},[v]:{color:this.theme.lightTextColor}}}}P.displayName="ErrorMenuItem",P.contextTypes={...c.mw,...l.w};const I=P},13992:(e,t,i)=>{i.r(t),i.d(t,{default:()=>rt});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(83355),u=i(41892),m=i(43593),p=i(32056),g=i(98459),h=i(90468),v=i(5366),f=i(70630),y=i(93678),b=i(10161);var S=i(33929),w=i(87279),M=i(98742),k=i(61766),C=i(88632),Z=i(71071),T=i(42922),P=i(52275),I=i(1743),F=i(74194),_=i(78140),x=i(32163),A=i(89728),B=i(72495),D=i(20223),E=i(24006),L=i(24405),R=i(64369);const N=i(85).nLZ,O=i(85).L_E,U=i(85).pkR,V=e=>{let{title:t,subtitle:i,on:o,onChange:n,[U]:a,style:r}=e;window.__c={n:"SwitcherRow"};const l=(0,L.yK)((()=>({[O]:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1}})),[]);return s()("div",{style:{...l[O],...r}},void 0,s()("div",{style:l.title},void 0,t,s()(R.Z,{isSmall:!0,isMultiline:!0,style:{[N]:2,width:"95%"}},void 0,i)),s()(E.Z,{on:o,[U]:a,onClick:n}))};V.defaultProps={[U]:!1,style:{}};const W=V;var K=i(33411),z=i(58032),G=i(92660),H=i(6202),q=i(60442),j=i(42115);const Q=i(85).jms,J=i(85).h8z,$=i(85).UPJ,Y=i(85).Dd5,X=i(85).f57,ee=i(85).jkI,te=i(85).EMU,ie=i(85).bSA,oe=i(85).nLZ,ne=i(85).ESK,ae=i(85).g4H,se=i(85).e5W,re=i(85).Dsi,le=i(85).XNW,de=i(85).Exd,ce=i(85).Au,ue=i(85).TEz,me=i(85).UA5,pe=i(85).PXg,ge=i(85).X_m,he=i(85).H1U,ve=i(85).sM5,fe=i(85).$e1,ye=i(85).nDU,be=i(85).Ym3,Se=i(85).LtW,we=i(85).n79,Me=i(85).IDJ,ke=i(85).Gnd,Ce=i(85).LR2,Ze=i(85).X5t,Te=i(85).pkR,Pe=i(85).PG2,Ie=i(85).Lhq,Fe=i(85).D7I,_e=i(85).Mcv,xe=i(85).Zij,Ae=i(85).BQ6,Be=i(85).rpY,De=i(85).Yzm,Ee=i(85).Ql2,Le=i(85).l6S,Re=i(85).oSF,Ne=i(85).EkQ,Oe=i(85).cqO,Ue=i(85).wNq,Ve=i(85).voR,We=i(85).Epr,Ke=i(85).xtZ,ze=i(85).Xbz,Ge=i(85).UjG,He=i(85).dLQ,qe=i(85).Ryu,je=i(85).QmD,Qe=i(85).wgE,Je=i(85).UJT,$e=i(85).OIC,Ye=i(85).nx5,Xe=i(85).Et8,et=["pdf","html","markdown"],tt=[Xe,"all"],it=e=>e>.1&&e<2,ot=["everything","no_files"],nt=(0,v.defineMessages)({dialogLabel:{id:"exportModal.dialogLabel",[Ye]:"Export"}});class at extends c.Z{constructor(){super(...arguments),this.storeTypes={includeContentsPopupStore:k.Z,[$e]:k.Z,[Je]:k.Z,collectionViewExportTypePopupStore:k.Z},this.renderMenu=()=>{const{device:e}=this[Qe];if(!C.Z[je].online)return this.renderOffline();const t=Z.ZP[je];return t[qe]&&e[He]?this.renderMobileModal(t):t[qe]?this.renderDesktopModal(t):void 0},this.handleSelectExportType=(e,t)=>{const i=Z.ZP[je];if(!i[qe])return;const{[Ge]:o}=i;if(e===o.exportType)return;let n;n="pdf"===e?{...o,[ze]:"pdf",pdfFormat:f.GI(t)}:{...o,[ze]:e},f.BO(this[Qe],{...i,[Ge]:n})},this.handleSelectPaperFormat=e=>{const t=Z.ZP[je];t[qe]&&Z.Sw(t)&&f.BO(this[Qe],{...t,[Ge]:{...t[Ge],pdfFormat:e}})},this.handleSelectIncludeContents=e=>{const t=Z.ZP[je];t[qe]&&f.BO(this[Qe],{...t,[Ge]:{...t[Ge],includeContents:e}})},this.handleSelectCollectionExportType=e=>{const t=Z.ZP[je];t[qe]&&f.BO(this[Qe],{...t,[Ge]:{...t[Ge],[Ke]:e}})},this.handleToggleFlattenExportFiletree=()=>{const e=Z.ZP[je];e[qe]&&f.BO(this[Qe],{...e,[Ge]:{...e[Ge],[We]:!e[Ge][We]}})},this.handleToggleRecursive=()=>{const e=Z.ZP[je];if(e[qe]){if(Z.Sw(e)&&!f.y1(this[Qe]))return y.y(this[Qe],{from:Ve,for:Ue}),void this[Oe]();f.BO(this[Qe],{...e,[Ne]:!e[Ne]})}},this.handleSetScalePercent=e=>{const t=Z.ZP[je];t[qe]&&Z.Sw(t)&&f.BO(this[Qe],{...t,[Ge]:{...t[Ge],scale:e}})},this[Re]=()=>{f.Qr()},this[Le]=()=>{if(!this.canSubmit())return;const e=Z.ZP[je];e[qe]&&(f.Qr(),e.root.table===h.bx?f.AW(this[Qe],{[Ee]:e.root.id,[Ge]:e[Ge]}):f.ZO(this[Qe],{block:{id:e.root.id,[Ee]:(0,g.CG)(e.root[Ee])},[Ne]:e[Ne],[Ge]:e[Ge]}))},this[Oe]=()=>{f.Qr()}}renderComponent(){return s()(G.Z,{ariaLabel:S.default[De](nt.dialogLabel),onDismiss:this[Re],[Be]:this.renderMenu,requireOnline:!0,modalStore:Z.ZP})}renderOffline(){return s()("div",{[Ae]:this.getOfflineStyle()},void 0,s()(v.FormattedMessage,{[Ye]:"Please go online to export.",id:"exportModal.offlineMessage.description"}))}renderMobileModal(e){const t={menuType:w.og.Modal,[xe]:s()(v.FormattedMessage,{id:"exportModal.title",[Ye]:"Export"}),[_e]:s()(v.FormattedMessage,{id:"exportModal.closeButton.label",[Ye]:"Close"}),onClickRight:this[Re]};return d[Fe](_.Z,t,s()(x.Z,{type:x.i.Vertical,initialFocus:void 0,sections:[{key:Ge,[Be]:e=>d[Fe](B.Z,e),items:this.getMobileExportOptionsMenuItems(e)},{key:Ie,[Be]:e=>{let{children:t,...i}=e;return d[Fe](B.Z,n()({isSubmitButton:!0},i),t)},items:[{key:"submit",[Be]:e=>{const{[Pe]:t,...i}=e;return d[Fe](H.Z,n()({},i,{[Pe]:t||this[Le],[Te]:!this.canSubmit(),[xe]:s()(v.FormattedMessage,{id:"exportModal.exportButton.label",[Ye]:"Export"})}))},[Ze]:this[Le]}]}]}))}renderDesktopModal(e){const{device:t,currentUser:i}=this[Qe],o=Z.Sw(e)&&!f.y1(this[Qe])&&"business",a=this[Qe].device.isWindows;return s()("div",{[Ae]:this[Ce]()},void 0,s()(D.Z,{isMenuItem:t[He],[Se]:this[ke][$e],label:s()(v.FormattedMessage,{id:"exportModal.exportFormat.description",[Ye]:"Export format"}),selectedTitle:this[Me](e[Ge][ze]),renderMenuSections:e=>[{key:ze,[Be]:e=>d[Fe](B.Z,e),items:et.map((t=>this[we](t,e,i.id)))}]}),e[Ge][Ke]&&s()(D.Z,{isMenuItem:t[He],[Se]:this[ke].collectionViewExportTypePopupStore,label:s()(v.FormattedMessage,{id:"exportModal.includeDatabases.description",[Ye]:"Include databases"}),selectedTitle:this[be](e[Ge][Ke]||"currentView"),renderMenuSections:e=>[{key:"exportCollection",[Be]:e=>d[Fe](B.Z,e),items:tt.map((t=>this.getCollectionViewExportTypeMenuListItem(t,e)))}]}),s()(D.Z,{isMenuItem:t[He],[Se]:this[ke].includeContentsPopupStore,label:s()(v.FormattedMessage,{id:"exportModal.includeContents.description",[Ye]:"Include content"}),selectedTitle:this[ye](e[Ge].includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",[Be]:e=>d[Fe](B.Z,e),items:ot.map((t=>this.getIncludeContentsMenuListItem(t,e)))}]}),Z.Sw(e)&&d[Fe](d.Fragment,null,s()(D.Z,{isMenuItem:t[He],[Se]:this[ke][Je],label:s()(v.FormattedMessage,{id:"exportModal.pageFormat.description",[Ye]:"Page format"}),selectedTitle:this.getPDFFormatTitle(e[Ge].pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",[Be]:e=>d[Fe](B.Z,e),items:m.ISOPaperFormats.map((t=>this[fe](t,e)))},{key:"otherPaperFormats",[Be]:e=>d[Fe](B.Z,n()({topBorder:!0},e)),items:m.OtherPaperFormats.map((t=>this[fe](t,e)))}]}),this.renderScalePercent()),"space"!==e.root.table&&s()(j.Z,{requireUpgradeToTier:o,[ie]:"export_modal",[Pe]:this.handleToggleRecursive,[Be]:(t,i)=>d[Fe]("div",n()({},t,{[Ae]:{[ve]:"flex",[he]:"center",[ge]:32}}),s()("div",{[Ae]:{[ve]:"flex",[he]:"center",[pe]:"auto",[me]:this[ce][ue],[de]:14}},void 0,s()(v.FormattedMessage,{[Ye]:"Include subpages",id:"exportModal.includeSubpages.label"})," ",i&&s()("div",{[Ae]:{[le]:8}},void 0,i)),s()(E.Z,{on:e[Ne],[Te]:Boolean(o)})),renderUpgradeTooltip:()=>s()(q.Z,{imageURL:u.Z[se][re].upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,[xe]:s()(v.FormattedMessage,{[Ye]:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),[ae]:s()(v.FormattedMessage,{[Ye]:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:z.Z[ne].Left,upgradeButtonDesktopStyle:{[oe]:2},onUpgradeClick:this[Oe]}),s()(W,{[xe]:s()(v.FormattedMessage,{id:"exportModal.flattenExportFiletree.description",[Ye]:"Create folders for subpages"}),subtitle:"",[Ae]:{[me]:this[ce][ue],[de]:14,[ve]:te,[he]:ee,[pe]:X,[ge]:32},on:void 0===e[Ge][We]?!a:!e[Ge][We],[Te]:!e[Ne],[Y]:()=>this.handleToggleFlattenExportFiletree()}),s()("div",{[Ae]:{[ve]:te,[he]:ee,[oe]:16}},void 0,s()(A.Z,{isGray:!0,[Ae]:{[le]:X,[pe]:8},[Pe]:this[Re]},void 0,s()(v.FormattedMessage,{[Ye]:"Cancel",id:"exportModal.cancelButton.label"})),s()(T.Z,{[Pe]:this[Le],[Te]:!this.canSubmit()},void 0,s()(v.FormattedMessage,{[Ye]:"Export",id:"exportModal.exportButton.label"}))))}renderScalePercent(){const e=this.getScalePercent();return d[Fe](d.Fragment,null,s()("div",{[Ae]:{[ve]:te,[$]:J,[he]:ee,[ge]:32}},void 0,s()(R.Z,{[Ae]:{[me]:this[ce][ue]}},void 0,s()(v.FormattedMessage,{id:"exportModal.pageScale.description",[Ye]:"Scale percent"})),s()(st,{value:e,[Y]:this.handleSetScalePercent})),!it(e)&&s()(K.Z,{show:!0,showDelay:500,showHold:100,[Be]:e=>e&&s()("div",{[Ae]:{[ve]:"flex",[$]:"space-between",[he]:"center",[Q]:32,padding:"4px 0"}},void 0,s()(R.Z,{isSmall:!0,isMultiline:!0,[Ae]:{[me]:this[ce].errorText}},void 0,s()(v.FormattedMessage,{id:"exportModal.pageScale.invalidScaleError",[Ye]:"Scale percent must be a number between 10 and 200"})))}))}getMobileExportOptionsMenuItems(e){const{currentUser:t,device:i}=this[Qe];return l().compact([{key:"export type",[Be]:o=>d[Fe](D.Z,n()({},o,{isMenuItem:i[He],[Se]:this[ke][$e],label:s()(v.FormattedMessage,{[Ye]:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:this[Me](e[Ge][ze]),renderMenuSections:e=>[{key:ze,[Be]:e=>d[Fe](B.Z,e),items:et.map((i=>this[we](i,e,t.id)))}]})),[Ze]:()=>{this[ke][$e].setState({[qe]:!0})}},Z.Sw(e)&&{key:"pdf format",[Be]:t=>d[Fe](D.Z,n()({},t,{isMenuItem:i[He],[Se]:this[ke][Je],label:s()(v.FormattedMessage,{[Ye]:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:this.getPDFFormatTitle(e[Ge].pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",[Be]:e=>d[Fe](B.Z,e),items:m.ISOPaperFormats.map((t=>this[fe](t,e)))},{key:"otherPaperFormats",[Be]:e=>d[Fe](B.Z,n()({topBorder:!0},e)),items:m.OtherPaperFormats.map((t=>this[fe](t,e)))}]})),[Ze]:()=>{this[ke][Je].setState({[qe]:!0})}},"space"!==e.root.table&&{key:"recursive",[Be]:t=>{let{[Pe]:i,key:o,...a}=t;const r=Z.Sw(e)&&!f.y1(this[Qe])&&"business";return s()(j.Z,{requireUpgradeToTier:r,[ie]:"export_modal",[Pe]:i,[Be]:(t,i)=>{const o=(0,M.Z)(a,t);return d[Fe](P.Z,n()({},o,{[xe]:s()("div",{[Ae]:{[ve]:"flex",[he]:"center"}},void 0,s()(v.FormattedMessage,{[Ye]:"Include subpages",id:"exportModal.includeSubpages.label"})," ",i&&s()("div",{[Ae]:{[le]:8}},void 0,i)),[_e]:d[Fe](E.Z,n()({},o,{on:e[Ne],[Te]:Boolean(r)}))}))},renderUpgradeTooltip:()=>s()(q.Z,{imageURL:u.Z[se][re].upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,[xe]:s()(v.FormattedMessage,{[Ye]:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),[ae]:s()(v.FormattedMessage,{[Ye]:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:z.Z[ne].Left,upgradeButtonDesktopStyle:{[oe]:2},onUpgradeClick:this[Oe]},o)},[Ze]:this.handleToggleRecursive}])}[Me](e){switch(e){case"pdf":return s()(v.FormattedMessage,{id:"exportModal.exportFormatButton.pdf.label",[Ye]:"PDF"});case"markdown":return s()(v.FormattedMessage,{id:"exportModal.exportFormatButton.markdownAndCSV.label",[Ye]:"Markdown & CSV"});case"html":return s()(v.FormattedMessage,{id:"exportModal.exportFormatButton.html.label",[Ye]:"HTML"})}}[ye](e){switch(e){case"everything":return s()(v.FormattedMessage,{id:"exportModal.includeContentTypes.everything.label",[Ye]:"Everything"});case"no_files":return s()(v.FormattedMessage,{id:"exportModal.includeContentTypes.no_files.label",[Ye]:"No files or images"})}}[be](e){switch(e){case"all":return b.default.checkGate("export_collections_v1")?s()(v.FormattedMessage,{id:"exportModal.includeDatabases.all.label.defaultView",[Ye]:"Default View"}):s()(v.FormattedMessage,{id:"exportModal.includeDatabases.all.label.everything",[Ye]:"Everything"});case Xe:return s()(v.FormattedMessage,{id:"exportModal.includeDatabases.currentView.label",[Ye]:"Current view"})}}getPDFFormatTitle(e){switch(e){case"Letter":return s()(v.FormattedMessage,{id:"exportModal.pageFormatButton.letter.label",[Ye]:"Letter"});case"A3":return s()(v.FormattedMessage,{id:"exportModal.pageFormatButton.a3.label",[Ye]:"A3"});case"A4":return s()(v.FormattedMessage,{id:"exportModal.pageFormatButton.a4.label",[Ye]:"A4"});case"Legal":return s()(v.FormattedMessage,{id:"exportModal.pageFormatButton.legal.label",[Ye]:"Legal"});case"Tabloid":return s()(v.FormattedMessage,{id:"exportModal.pageFormatButton.tabloid.label",[Ye]:"Tabloid"})}}[we](e,t,i){const o=Z.ZP[je],a=o[qe]&&"pdf"===e&&"space"===o.root.table&&!f.y1(this[Qe])&&"business";return{key:e,[Ze]:()=>{if(t.close(),a)return y.y(this[Qe],{from:Ve,for:a}),void this[Oe]();this.handleSelectExportType(e,i)},[Be]:i=>{let{[Pe]:o,key:r,...l}=i;return s()(j.Z,{requireUpgradeToTier:a,[ie]:Ve,[Pe]:o,onUpgradeClick:()=>{t.close(),this[Oe]()},[Be]:(t,i)=>d[Fe](P.Z,n()({},(0,M.Z)(l,t),{[xe]:this[Me](e),[_e]:i})),renderUpgradeTooltip:()=>s()(q.Z,{imageURL:u.Z[se][re].upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,[xe]:s()(v.FormattedMessage,{[Ye]:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),[ae]:s()(v.FormattedMessage,{[Ye]:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:z.Z[ne].Left,upgradeButtonDesktopStyle:{[oe]:2}},r)}}}getIncludeContentsMenuListItem(e,t){return{key:e,[Ze]:()=>{t.close(),this.handleSelectIncludeContents(e)},[Be]:t=>d[Fe](P.Z,n()({},t,{[xe]:this[ye](e)}))}}getCollectionViewExportTypeMenuListItem(e,t){return{key:e,[Ze]:()=>{t.close(),this.handleSelectCollectionExportType(e)},[Be]:t=>d[Fe](P.Z,n()({},t,{[xe]:this[be](e)}))}}[fe](e,t){return{key:e,[Ze]:()=>{t.close(),this.handleSelectPaperFormat(e)},[Be]:t=>d[Fe](P.Z,n()({},t,{[xe]:this.getPDFFormatTitle(e)}))}}getScalePercent(){const e=Z.ZP[je];return e[qe]&&Z.Sw(e)?void 0===e[Ge].scale?1:e[Ge].scale:1}canSubmit(){return it(this.getScalePercent())}[Ce](){return{width:320,padding:24,[de]:14}}getOfflineStyle(){return{...this[Ce](),[me]:this[ce].mediumTextColor}}}function st(e){let{value:t,[Y]:i}=e;window.__c={n:"PercentInput"};const o=(0,v.useIntl)(),n=d.useCallback((e=>{const t=e.target.value,o=(0,p._g)(t)||(0,p.p3)(t);let n;"object"==typeof o?n="percent"===o.format?o.value:o.value/100:"number"==typeof o&&(n=o/100),void 0!==n&&i(n)}),[i]),[a,r]=d.useState(!1),l=d.useMemo((()=>(0,p.uf)(Math.round(100*t),"number",o)),[t,o]);return s()(I.Z,{capture:a},void 0,s()(F.Z,{value:l,[Y]:n,onFocus:()=>r(!0),onBlur:()=>r(!1),[Ae]:{width:60},inputStyle:{textAlign:_e}}))}at.displayName="ExportModal";const rt=at},79027:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),l=i(24405),d=i(41892),c=i(82990),u=i(5366),m=i(91376),p=i(17311),g=i(7844),h=i(42922),v=i(53953),f=i(62385);const y=i(85).TVJ,b=i(85).dLQ,S=i(85).PG2,w=i(85).t4B,M=i(85).nx5,k=i(85).BQ6,C=i(85).sOA,Z=i(85).sM5,T=i(85).nLZ;function P(){window.__c={n:"GoogleAuthPromptModal"};const e=(0,s.Fy)(),t=(0,r.VK)((()=>g.Z.state.open),[]),i=()=>{g.Z.state.open&&g.Z.state.onDecline&&g.Z.state.onDecline(),g.Z.setState({open:!1})},o=()=>{g.Z.state.open&&g.Z.state.onConfirm(),g.Z.setState({open:!1})},P=()=>{i(),m.openSettings({currentTab:"connected_apps"})},I=(0,l.yK)((e=>({wrap:{padding:"24px 36px 24px",minWidth:300,maxWidth:400},modalHeaderWrap:{textAlign:"center",[T]:8,marginBottom:18,justifyContent:"space-between"},modalMessage:{fontSize:16,lineHeight:1.5,fontWeight:c.Z.fontWeight.medium,[T]:15,marginBottom:20,color:e.mediumTextColor}})),[]);return n()(v.Z,{open:t,innerStyle:I.wrap,preventHideChildrenWhileOpening:!0,render:()=>n()(a.Fragment,{},void 0,n()("div",{[k]:I.modalHeaderWrap},void 0,n()("img",{src:d.Z.images.googleDriveLogoPng,[k]:{width:50,[Z]:C}}),n()("div",{[k]:I.modalMessage},void 0,n()(u.FormattedMessage,{[M]:"Notion cannot access the Google Drive file you are trying to embed.",id:"googleAuthPromptModal.noAccessFile.errorMessage"})),e[w]?n()("div",{[k]:I.modalMessage},void 0,n()(u.FormattedMessage,{[M]:"Please use Notion on desktop to connect a new account.",id:"googleAuthPromptModal.mobileUseDesktopPrompt.errorMessage"})):n()(h.Z,{isLarge:!0,[S]:o},void 0,n()(u.FormattedMessage,{[M]:"Connect to Google",id:"googleAuthPromptModal.connectToGoogleButton.label"})),!e[b]&&n()("div",{[k]:{[Z]:"block",[T]:p.Z[y].tiny}},void 0,n()(f.Z,{underlined:!0,[S]:P},void 0,n()(u.FormattedMessage,{[M]:"See my connected accounts",id:"googleAuthPromptModal.seeConnectedAccountsButton.label"}))))),onDismiss:i})}},24326:(e,t,i)=>{i.r(t),i.d(t,{default:()=>G});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(24405),u=i(3909),m=i(82990),p=i(51454),g=i(5366),h=i(79315),v=i(93278);const f=i(85).VYn;var y=i(37190),b=i(92639),S=i(10161),w=i(42922),M=i(64921),k=i(28451);const C=i(85).D7I,Z=i(85).ChN,T=i(85).OP1,P=i(85).BQ6,I=i(85).PG2,F=i(85).Und,_=i(85).wuN,x=i(85).Exd,A=i(85).paz,B=i(85).UPJ,D=i(85).Jkr,E=i(85).lWm,L=i(85).L_E,R=i(85).VYn,N=i(85).Ubh,O=i(85).$bT,U=i(85).jkI,V=i(85).AEv,W=i(85).nx5,K=(0,g.defineMessages)({title:{id:"guidedTutorialPopup.title",[W]:"Learn Notion in 3 steps"},[V]:{id:"guidedTutorialPopup.subtitle",[W]:"We'll show you how to quickly customize {workspacename}."},cta:{id:"guidedTutorialPopup.cta",[W]:"Get started"}}),z={display:"flex",alignItems:U,[O]:"column"};function G(){window.__c={n:"GuidedTutorialPopup"};const e=(0,c.Fg)(),t=(0,l.O7)(),i=(0,d.VK)((()=>h.default.state[N]),[]),o=(0,d.VK)((()=>h.default.state[R]),[]),a=(0,d.VK)((()=>{var e;return null===(e=h.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),W=(0,c.yK)((e=>({[L]:{background:e.popoverBackground,borderRadius:5,boxShadow:e.mediumBoxShadow,position:"absolute",bottom:65,right:16,zIndex:p.helpButton},cancel:{position:"absolute",top:"10px",right:"10px",background:e[E],borderRadius:"100%",[D]:20,height:20,display:"flex",alignItems:U,[B]:U,zIndex:10},[A]:{...z,[D]:299,height:204,overflow:"hidden",position:"relative",padding:12,cursor:"default",[B]:U},contentTextFlex:{display:"flex",[O]:"column",gap:8,padding:8},[V]:{[x]:14,color:e[_],paddingBottom:8,textAlign:U}})),[]),G=(0,d.VK)((()=>v.default.state.open&&h.default.state.inAppCalloutStore.canShow("guided_tutorial_popup")&&(0,b.TL)(t)),[t]),H=(0,r.useCallback)((e=>{if(!i)return;const n={x:window.innerWidth/2,y:window.innerHeight/2};switch(S.default.getEligibleGroup({experimentId:"tooltip_vs_shadow_cursor",defaultGroup:"control"})){case"shadow_cursor":y.startShadowCursorTutorial(t,{position:n,[F]:i,[R]:o});break;case"tooltip":!function(){v.default.setState({open:!1});const{[f]:e}=h.default.state;e.setState({...h.default.state[f].state,currentCursorElement:"new-page-sidebar",type:"tooltip"})}()}}),[t,i,o]),q=(0,r.useCallback)((e=>{y.updateShadowCursorSubpagePhase({environment:t,[F]:i,phase:"dismissed_modal"})}),[t,i]);return G?s()(k.P,{calloutId:"guided_tutorial_popup"},void 0,s()("div",{[P]:W[L]},void 0,s()(M.Z,{[I]:q,[P]:W.cancel},void 0,u.Z.closeSmall({[D]:14,fill:e[_]})),s()("div",{[P]:W[A]},void 0,s()("div",{[P]:W.contentTextFlex},void 0,u.Z.graduationCapInvert({[D]:24,height:24,fill:e[T],alignSelf:U}),s()("div",{[P]:{[Z]:m.Z[Z].medium,[x]:16,alignSelf:U}},void 0,r[C](g.FormattedMessage,K.title)),s()("div",{[P]:W[V]},void 0,r[C](g.FormattedMessage,n()({},K[V],{values:{workspacename:a}}))),s()(w.Z,{isLarge:!0,[P]:{[D]:"calc(100% -30px)"},[I]:H},void 0,r[C](g.FormattedMessage,K.cta)))))):null}},7523:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(15145),l=i(3909),d=i(82990),c=i(5366),u=i(50906),m=i(5978),p=i(33665),g=i(79315),h=i(47593),v=i(16354),f=i(53953),y=i(89728),b=i(15684);const S=i(85).veP,w=i(85).Ubh,M=i(85).GiO,k=i(85).tDk,C=i(85).SA1,Z=i(85).nx5,T=i(85).dU4,P=i(85).LIR,I=i(85).wgE,F=i(85).jDA,_=i(85).Wp_,x=i(85).c_6;class A extends s.Z{constructor(){super(...arguments),this[x]=()=>{h.Z[_]({open:!1})},this.handleImportComplete=e=>{h.Z[_]({open:!1}),m[F]({[I]:this[I],store:e,[P]:r.tY.Import})}}renderComponent(){const e=h.Z.state;return n()(f.Z,{open:e.open,innerStyle:A[T],preventHideChildrenWhileOpening:!0,render:()=>n()(a.Fragment,{},void 0,n()("div",{style:A.modalTopbarWrapStyle},void 0,n()("div",{style:A.modalTopbarHeaderStyle},void 0,n()(c.FormattedMessage,{id:"importModal.importButton.label",[Z]:"Import"})),this[C]()),n()("div",{},void 0,this.renderImportOptions(e))),onDismiss:this[x]})}[C](){return n()(v.Z,{href:(0,p.getLocalizedUrl)("guides.import"),onClick:()=>u.trackClickHelpButton(this[I],{from:"import"}),external:!0},void 0,n()(y.Z,{isSmall:!0,icon:l.Z.help,isGray:!0},void 0,n()(c.FormattedMessage,{id:"importModal.helpButton.label",[Z]:"Learn about importing"})))}renderImportOptions(e){const{[k]:t,currentSpaceStore:i,[M]:o,[w]:a}=g.default.state;if(t&&i&&o&&a)return n()(b.Z,{[S]:e.open&&e[S]?e[S]:t,spaceStore:i,spaceViewStore:o,userSettingsStore:a,analyticsFrom:"modal",onComplete:this.handleImportComplete,readOnlyCreditButton:!1})}}A.displayName="ImportModal",A[T]={padding:"24px 36px 24px",minWidth:300},A.modalTopbarWrapStyle={display:"flex",alignItems:"center",marginTop:8,marginBottom:18},A.modalTopbarHeaderStyle={fontSize:24,lineHeight:1.2,marginBottom:6,fontWeight:d.Z.fontWeight.bold,marginRight:"auto"};const B=A},15684:(e,t,i)=>{i.d(t,{Z:()=>Aa});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(83355),d=i(41892),c=i(3909),u=i(4615),m=i(5366),p=i(50906),g=i(47307),h=i(49085);class v extends h.default{getInitialState(){return{spacesResult:void 0,showLoader:!1,isLoadingSpaces:!0}}}const f=new v;var y=i(54642),b=i(92625);const S=i(85).mFA,w=i(85).Hmd,M=i(85).gNv,k=i(85).g65,C=i(85).kBp,Z=i(85).wgE;async function T(e){const{[Z]:t,spaceId:i,[C]:o}=e;if(!t[k].id)return g.showMessage({message:"Invalid details"}),void b.close();f.setState({...f.state,showLoader:!0,isLoadingSpaces:!1});const n=await y.getConfluenceSpaces(t,{spaceId:i});if(await(null==o?void 0:o.refresh()),f.setState({...f.state,showLoader:!1,isLoadingSpaces:!1}),"failed"!==n.type)return f.setState({...f.state,spacesResult:n.data}),n.data;console.error(n.error),g.showError(n),b.close()}var P=i(30738),I=i(68821),F=i(72340),_=i(8989),x=i(22756);const A=i(85).o8N;async function B(e){const t=await y.getTrelloAccount(e,{});return"success"===t.type?t.data:(console[A](t[A]),{})}async function D(e){x.Z.setState({...x.Z.state,isFetchingAsanaAccount:!0});const t=await y.getAsanaAccount(e,{});if("success"===t.type){const{account:e}=t.data;return x.Z.setState({...x.Z.state,account:e,isFetchingAsanaAccount:!1}),e?t.data:{}}return console[A](t[A]),x.Z.setState({...x.Z.state,isFetchingAsanaAccount:!1}),{}}async function E(e){try{const t=await y.getEvernoteAccount(e,{});if("success"===t.type){const{userInfo:e}=t.data;return{userInfo:e}}return console[A](t[A]),{userInfo:void 0}}catch(t){return console[A](t),{userInfo:void 0}}}var L=i(87279),R=i(10161);var N=i(33665),O=i(88632),U=i(67940),V=i(72087),W=i(480),K=i(81954),z=i(8848),G=i(41311),H=i(79315);const q=new(i(61766).Z);var j=i(93405),Q=i(31945),J=i(73063),$=i(16354),Y=i(68785),X=i(78140),ee=i(32163),te=i(44532),ie=i(72495),oe=i(58032),ne=i(64369),ae=i(82990),se=i(64921);const re=i(85).wuN,le=i(85).Scd,de=i(85).NF1,ce=i(85).jkI,ue=i(85).BJF,me=i(85).B8U,pe=i(85).Oi5,ge=i(85).f57,he=i(85).XNW,ve=i(85).BQ6,fe=i(85).EMU,ye=i(85).sM5,be=i(85).od_;class Se extends l.Z{renderComponent(){const{title:e,actionButton:t,onClick:i,tooltipEvents:o}=this.props;return r.createElement(se.Z,n()({},o,{onClick:i,[ve]:this[be]()}),this.renderIcon(),s()("div",{[ve]:{minWidth:0,width:"100%"}},void 0,s()("div",{[ve]:{[ye]:fe}},void 0,s()("div",{[ve]:Se.titleStyle},void 0,e),s()("div",{[ve]:{[he]:ge}},void 0,t)),this[pe]()))}renderIcon(){const{icon:e,logo:t}=this.props;return t?s()("img",{[ve]:Se.imageIconStyle,src:t}):e?s()("div",{[ve]:this[me]()},void 0,e(this[ue]())):void 0}[pe](){const{caption:e}=this.props;if(e)return s()("div",{[ve]:this.getCaptionStyle()},void 0,e)}[be](){return{[ye]:fe,alignItems:ce,padding:10,paddingRight:8,[de]:3,marginBottom:12,cursor:"pointer",boxShadow:this.theme.lightBoxShadow,transition:"background 200ms ease-out",[le]:this.theme.importOptionsButtonBackground}}[me](){return{[ye]:fe,alignItems:ce,justifyContent:ce,width:Se.iconSize,height:Se.iconSize,[de]:3,marginRight:8,color:this.theme[re],[le]:this.theme.importOptionsIconWrapBackground}}[ue](){return{flexShrink:0,width:Se.iconSize,height:Se.iconSize}}getCaptionStyle(){return{fontSize:12,color:this.theme[re],wordBreak:"keep-all",...!this.props.shouldWrapCaption&&{...ae.Z.textOverflowStyle}}}}Se.displayName="ImportOptionsItem",Se.iconSize=28,Se.imageIconStyle={flexShrink:0,width:Se.iconSize,height:Se.iconSize,[de]:3,marginRight:10,[le]:z.ZP.white},Se.titleStyle={fontSize:16,fontWeight:ae.Z.fontWeight.medium};const we=Se,Me=i(85).XNW,ke=(i(85).DUA,i(85).qJ8),Ce=i(85).Hmd,Ze=i(85).PG2,Te=i(85).wgE,Pe=i(85).YjJ,Ie=i(85).j7K,Fe=i(85).y79,_e=i(85).D7I,xe=i(85).nx5,Ae=i(85).Yzm,Be=i(85).eJX,De={whiteSpace:"pre-wrap"};function Ee(e,t){return s()(oe.Z,{renderTooltip:()=>s()(ne.Z,{style:{color:z.ZP.white},isSmall:!0},void 0,s()(m.FormattedMessage,{id:"AsanaImportOption.helpButton.tooltip",[xe]:"Learn about how to import"})),render:i=>r[_e]($.Z,n()({},i,{external:!0,href:e,style:{[Me]:"auto"}}),s()(J.Z,{icon:c.Z.help,ariaLabel:t[Ae]({id:"AsanaImportOption.helpButton.ariaLabel",[xe]:"Learn about how to asana import help icon"})}))})}const Le=function(){window.__c={n:"AsanaV2ImportOption"};const e=(0,K.VK)((()=>x.Z.state),[]),t=(0,K.VK)((()=>U.Z.state),[]),{account:i,isLoadingAsanaWorkspaces:o,isAccountDelinkingInProgress:a,[Be]:l}=e,g=(0,W.O7)(),h=(0,m.useIntl)(),{device:v}=g,f=t.flowId||(0,u.default)();t.flowId||U.Z.setState({flowId:f});const y={title:h[Ae]({id:"asanaImportOption.asanaButton.title",[xe]:"Asana"}),logo:d.Z.images.import.asanaPng,caption:l?h[Ae]({id:"asanaImportOption.asanaButton.accountLinkingInProgress",[xe]:"Authenticating..."}):a?h[Ae]({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",[xe]:"Removing account..."}):i,actionButton:i?(b=[{name:h[Ae]({id:"asanaImportOption.actionsMenu.connectAnotherAccount",[xe]:Pe}),captionText:h[Ae]({id:"asanaImportOption.connectAnotherAccount.captionText",[xe]:"Ensure you are logged into the new Asana account in your browser"}),action:()=>G.authWithAsana({[Te]:g,flowId:f}).catch((()=>{}))},{name:h[Ae]({id:"asanaImportOption.actionsMenu.removeIntegration",[xe]:"Remove"}),action:()=>G.disconnectAsana({[Te]:g})}],s()(Q.ZP,{popupType:te.kQ.Popup,renderOrigin:e=>o?s()(Y.Z,{}):r[_e](J.Z,n()({ariaLabel:h[Ae]({id:"asanaImportOption.asanaButton.ariaLabel",[xe]:"Import from Asana button"}),icon:c.Z.dots},e)),render:e=>{const t={key:"section",render:e=>r[_e](ie.Z,e),items:b.map((t=>{let{name:i,captionText:o,action:a}=t;return{key:i,render:e=>r[_e](j.Z,n()({},e,{title:i,caption:o,captionStyle:o?De:void 0})),action:()=>{a(),e.close()}}}))};return s()(X.Z,{menuType:L.og.Popup,width:200},void 0,s()(ee.Z,{type:ee.i[Fe],[Ie]:void 0,sections:[t]}))}})):Ee((0,N.getLocalizedUrl)("guides.importAsana"),h),[Ze]:()=>{}};var b;return s()(Q.ZP,{[Ze]:async()=>{var e;x.Z.resetImport(),o||l||a||(i?(p.trackClickImportButton(g,{[Ce]:"asana",from:"settings_modal",userId:g.currentUser.id,spaceId:null===(e=H.default.state[ke])||void 0===e?void 0:e.id,flowId:f}),await G.getAsanaWorkspacesNames({[Te]:g}),G.openModal()):G.authWithAsana({[Te]:g,flowId:f}).catch((()=>{})))},popupType:v.isMobile?Q.Z4.SlideUp:Q.Z4.Popup,buttonPopupStore:q,renderOrigin:e=>{let{[Ze]:t}=e;return r[_e](we,n()({},y,{[Ze]:t}))},render:()=>{}})};var Re=i(24405),Ne=i(22711),Oe=i(78900),Ue=i(42922),Ve=i(52275),We=i(61519),Ke=i(1743),ze=i(74194),Ge=i(53953),He=i(63296),qe=i(89728),je=i(74523),Qe=i(58573);class Je extends h.default{getInitialState(){return{searchQuery:"",selection:new Set}}}const $e=Je;var Ye=i(68894),Xe=i(43765),et=i(29551);const tt=i(85).Joh,it=i(85).ESK,ot=i(85).D7I,nt=i(85).Mm1,at=i(85).piL,st=i(85).A4A,rt=i(85).fTK,lt=i(85).Gnd,dt=i(85).IO3;class ct extends l.Z{constructor(){super(...arguments),this.storeTypes={store:$e},this.handleToggleItem=e=>{this.props[dt](e)}}willMount(e){const t=this[lt].store.state.selection,[i]=e.sections;if(i){const[e]=i.items;e&&t.add(e.key)}this[lt].store.emit()}renderComponent(){return s()(X.Z,{menuType:L.og.Popup,header:this[rt](),width:280,maxHeight:350},void 0,this.renderMenuList())}[rt](){const{[st]:e}=this.props,{[at]:t}=this[lt].store.state;return s()(ie.Z,{isInput:!0,desktopStyle:{[nt]:2}},void 0,s()(Ye.ZP,{focus:!0,focusAfterAnimation:!0,value:t,onChange:e=>{const{store:t}=this[lt];t.setState({...t.state,[at]:e.target.value})},placeholder:e}))}renderMenuList(){const{sections:e,noSearchResultsPlaceholder:t}=this.props,{store:i}=this[lt],{[at]:o}=i.state,a=e.map((e=>{const t=(0,Qe.ZP)(o,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===a.length)return s()(ie.Z,{},void 0,s()(Xe.Z,{title:t}));const l=a.map((t=>{const i=t.items.map((e=>e.name)),o={};return i.forEach((e=>{o[e]=o[e]?o[e]+1:1})),{key:t.name,render:i=>r[ot](ie.Z,n()({},i,{title:e.length>1?t.name:void 0})),items:t.items.map((e=>({key:e.key,render:t=>r[ot](Ve.Z,n()({},t,{title:s()(et.gq,{gap:2,alignItems:"center"},void 0,e.name,o[e.name]>1&&s()(oe.Z,{placement:oe.Z[it].Right,[tt]:()=>e.key,render:t=>r[ot](J.Z,n()({ariaLabel:`Associated space key is ${e.key}`,disableBackground:!0,icon:c.Z.info},t))})),right:void 0!==e.count&&s()(ne.Z,{isSmall:!0},void 0,e.count)})),action:()=>{this.props.handleClickImportConfluenceWorkspace(e.key,e.name),this.handleToggleItem(e)}})))}}));return s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:l})}}ct.displayName="IntegrationConfluenceImportPopup";const ut=ct,mt=i(85).Gbq,pt=i(85).cad,gt=i(85).AIq,ht=i(85).cZW,vt=i(85).kdC,ft=i(85).Dd5,yt=i(85).nm$,bt=i(85).P3s,St=i(85).g7N,wt=i(85).gGi,Mt=i(85).h8z,kt=i(85).UPJ,Ct=i(85).rps,Zt=i(85).$bT,Tt=i(85).EMU,Pt=i(85).sM5,It=i(85).nLZ,Ft=i(85).sQ5,_t=i(85).LeX,xt=i(85).ChN,At=i(85).xOW,Bt=i(85).XNW,Dt=i(85).Xls,Et=i(85).KOz,Lt=i(85).KqM,Rt=i(85).T04,Nt=i(85).Ryu,Ot=i(85).Joh,Ut=i(85).br2,Vt=i(85).ESK,Wt=i(85).E4p,Kt=i(85).jkI,zt=i(85).H1U,Gt=(i(85).fHq,i(85).NF1),Ht=i(85).nAm,qt=i(85).LtW,jt=i(85).Jkr,Qt=i(85).ceT,Jt=i(85).j7K,$t=i(85).y79,Yt=i(85).rpY,Xt=i(85).PG2,ei=i(85).ILp,ti=i(85).Zij,ii=i(85).D7I,oi=i(85).Ql2,ni=i(85).nQ3,ai=i(85).A4A,si=i(85).wgE,ri=i(85).BQ6,li=i(85).icY,di=i(85).YDv,ci=i(85).Exd,ui=i(85).Y7T,mi=i(85).kBp,pi=i(85).IO3,gi=i(85).T3U,hi=i(85).SCU,vi=i(85).mFA,fi=i(85).X5t,yi=i(85).nx5,bi=i(85).Yzm,Si=i(85).Wqi,wi=i(85).NLk,Mi={[wi]:"pre-wrap"};function ki(e){var t;window.__c={n:"Dropdown"};const{onSelectOption:i,[Et]:o,[Dt]:a}=e,l=null===(t=o.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t[li],d=(0,Re.yK)((e=>({icon:{[jt]:10,[Bt]:4,fill:e.lightIconColor}})),[]);return s()(Q.ZP,{popupType:Q.Z4.Popup,placementToOrigin:Q.pO.Left,renderOrigin:e=>r[ii](qe.Z,n()({},e,{isLarge:!0,[ri]:{opacity:1},disabled:!1}),l,c.Z.chevronDown(d.icon)),[Yt]:e=>{const t={[Qt]:L.og.Popup,[jt]:250,left:50},a=o.map((t=>{let{key:o,[li]:a}=t;return{key:o,[fi]:()=>{i(o),e.close()},[Yt]:e=>r[ii](Ve.Z,n()({},e,{[ti]:a,shouldWrapCaption:!0,right:l===a?s()("div",{[ri]:{[jt]:14}},void 0,c.Z.check()):void 0}))}})),d=[{key:"settings-item-section",[Yt]:e=>r[ii](ie.Z,e),items:a}];return r[ii](X.Z,t,s()(ee.Z,{type:ee.i[$t],[ni]:d,[Jt]:void 0,[ri]:{position:At,[zt]:"flex-end"}}))}})}async function Ci(e){await async function(e){const{[Z]:t,[C]:i,userEmail:o,site:n,access_token:a,instance:s,spaceId:r,username:l,password:d,flowId:c}=e;if(!t[k].id)return g.showMessage({message:"Invalid details"}),void b.close();const u=await y.authenticateConfluenceUser(t,{userEmail:o,site:n,access_token:a,instance:s,userId:t[k].id,spaceId:r,username:l,password:d});await i.refresh(),"failed"===u.type?(p[M](t,{[w]:S,data:{import_type:"api",status:"failure",error:u.error},flowId:c}),console.error(u.error),g.showError(u)):(p[M](t,{[w]:S,data:{import_type:"api",status:"success"},flowId:c}),g.showMessage({message:"Successfully connected confluence instance."}),await T({[Z]:t,[C]:i,spaceId:r})),b.close()}(e)}function Zi(e){let{[si]:t,[ti]:i,[Rt]:o,accountType:n,site:a,APIToken:l,personalAccessToken:d,confluenceVersion:c,username:u,[Lt]:p,hidePopup:g,[oi]:h,flowId:v,[mi]:f}=e;window.__c={n:"ModalContent"};const[y,b]=(0,r.useState)(""),[S,w]=(0,r.useState)("Cloud"),[M,k]=(0,r.useState)(""),[C,Z]=(0,r.useState)(""),[T,P]=(0,r.useState)("OAuth2.0"),[I,F]=(0,r.useState)(""),[_,x]=(0,r.useState)(""),A=(0,Re.yK)((e=>({[ti]:{[xt]:ae.Z[xt].semibold},[_t]:{[ci]:"14px",[xt]:Ft},helpText:{textAlign:Kt,[It]:"5px",lineHeight:"15px",[ci]:12,color:e.lightTextColor}})),[]);return s()(Ke.Z,{capture:!0},void 0,s()("div",{[ri]:{[Pt]:Tt,[Zt]:Ct,[kt]:Mt,height:wt,padding:20,[jt]:wt}},void 0,s()("div",{[ri]:{overflowY:"scroll"}},void 0,s()("div",{[ri]:{[St]:24}},void 0,s()("div",{[ri]:A[ti]},void 0,i),s()(je.Z,{[ti]:s()(m.FormattedMessage,{id:"confluenceAuthentication.helpButton.caption",[yi]:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",[bt]:"import",[ri]:{[It]:8}})),s()("div",{},void 0,s()("div",{[ri]:{[Pt]:Tt,[kt]:Mt,[Zt]:"row"}},void 0,s()(li,{htmlFor:"accountType",[ri]:{...A[_t]}},void 0,n),s()(ki,{onSelectOption:w,[Et]:[{key:"Cloud",[li]:s()(m.FormattedMessage,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",[yi]:"Cloud"})},{key:"Server",[li]:s()(m.FormattedMessage,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",[yi]:"Server/On-Premise"})}],[Dt]:S})),s()(We.Z,{size:12,isHidden:!0}),s()("div",{},void 0,"Server"===S?s()("div",{},void 0,s()("div",{[ri]:{[Pt]:Tt,[kt]:Mt,[Zt]:"row",[zt]:Kt}},void 0,s()(li,{htmlFor:"confluenceVersion",[ri]:{...A[_t]}},void 0,c),s()(ki,{onSelectOption:P,[Et]:[{key:"OAuth2.0",[li]:s()(m.FormattedMessage,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",[yi]:"7.9 or later"})},{key:"Basic",[li]:s()(m.FormattedMessage,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",[yi]:"Prior to 7.9"})}],[Dt]:T})),s()(We.Z,{size:12,isHidden:!0})):void 0),s()(li,{htmlFor:Rt,[ri]:{...A[_t]}},void 0,o),s()(ze.Z,{id:Rt,value:y,autoComplete:"off",autoCapitalize:"off",[ft]:e=>{b(e[yt].value)},[vt]:!0,[ht]:"sample@gmail.com",inputElementAttributes:{minLength:4}}),s()(We.Z,{size:12,isHidden:!0}),s()("div",{},void 0,s()(li,{htmlFor:"site",[ri]:{...A[_t]}},void 0,a),s()(ze.Z,{id:"site",value:M,[ft]:e=>k(e[yt].value),[vt]:!0,[ht]:"Cloud"===S?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),s()(We.Z,{size:12,isHidden:!0}),"Cloud"===S?s()("div",{},void 0,s()(li,{htmlFor:"APIToken",[ri]:{...A[_t]}},void 0,l),s()(ze.Z,{id:"AccessToken",type:Lt,value:C,[ft]:e=>{Z(e[yt].value)},[vt]:!0,[ht]:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})):s()("div",{},void 0,s()("div",{},void 0,"Basic"===T?s()("div",{},void 0,s()(li,{htmlFor:"username",[ri]:{...A[_t]}},void 0,u),s()(ze.Z,{id:"username",value:I,[ft]:e=>{F(e[yt].value)},[vt]:!0,[ht]:"confluenceUser",inputElementAttributes:{minLength:1}}),s()(We.Z,{size:12,isHidden:!0}),s()(li,{htmlFor:Lt,[ri]:{...A[_t]}},void 0,p),s()(ze.Z,{type:Lt,id:Lt,value:_,[ft]:e=>{x(e[yt].value)},[vt]:!0,[ht]:"P@S$w0rd",inputElementAttributes:{minLength:1}})):s()("div",{},void 0,s()(li,{htmlFor:"AccessToken",[ri]:{[ci]:"14px",[xt]:Ft}},void 0,d),s()(ze.Z,{id:"AccessToken",type:Lt,value:C,[ft]:e=>{Z(e[yt].value)},[vt]:!0,[ht]:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABCi7h",inputElementAttributes:{minLength:4}}))))))),s()("div",{[ri]:{flexGrow:0,[gt]:0}},void 0,s()(We.Z,{size:24}),s()(Ue.Z,{isLarge:!0,[Xt]:async()=>{await Ci({[si]:t,[pt]:y,site:M,[mt]:"Server"===S&&"Basic"===T?void 0:C,instance:S,username:"Basic"===T?I:void 0,[Lt]:"Basic"===T?_:void 0,[oi]:h,flowId:v,[mi]:f}),g()}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.authenticateButton.label",[yi]:"Authenticate"})),s()(He.Z,{isLarge:!0,[ri]:{[Bt]:12},[Xt]:()=>{g()}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.cancelButton.label",[yi]:"Cancel"})))))}const Ti=(0,m.injectIntl)((function(e){var t;window.__c={n:"ConfluenceImportOption"};const[i,o]=(0,r.useState)(!1),a=(0,K.VK)((()=>f.getState()),[]),{[Si]:l,flowId:g}=e,h=[{name:e.intl[bi]({id:"confluenceImportOption.actionsMenu.importViaApi",[yi]:"Import via API"}),captionText:e.intl[bi]({id:"confluenceImportOption.actionsMenu.importViaApi.message",[yi]:"Recommended for the best import experience"}),[fi]:()=>{e.handleApiImportClick(vi,g),o(!0)}},{name:e.intl[bi]({id:hi,[yi]:"Import via file"}),captionText:e.intl[bi]({id:"confluenceImportOption.actionsMenu.importViaFile.message",[yi]:"Best for importing partial workspace content"}),[fi]:()=>e[gi](vi,g)}],v=(0,W.O7)(),{device:y}=v,{confluenceResult:b,[pi]:S,intl:w,[mi]:M,[ui]:k}=e,{account:C}=b,{showLoader:Z,isLoadingSpaces:I}=a;function F(e,t){p.trackImportSourceInput(v,{import_source:vi,data:{spaceKey:e,spaceName:t},flowId:g})}function _(e){return s()("div",{},void 0,s()(li,{[ri]:{[ci]:"12px",color:"rgba(55, 53, 47, 0.65)",[di]:"12px"}},void 0,s()(m.FormattedMessage,{id:"confluenceImportOption.search.title",[yi]:"Select a space to import"})),s()(ut,{[ai]:w[bi]({id:"confluenceImportOption.search.placeholder",[yi]:"Search for a Space"}),noSearchResultsPlaceholder:w[bi]({id:"confluenceImportOption.search.noResultsPlaceholder",[yi]:"No Spaces"}),[ni]:[e],[pi]:async e=>{await async function(e){const{[si]:t,[pi]:i,selectedSpace:o,[Si]:n,[ui]:a,flowId:s}=e,r=await P.A1({[si]:t,[Si]:n,[ui]:a,space:o,flowId:s||(0,u.default)()});i(r)}({[si]:v,[pi]:S,selectedSpace:e,[Si]:l,[ui]:k,flowId:g})},handleClickImportConfluenceWorkspace:F}))}const x={[ti]:"Confluence",logo:d.Z.images.import.confluencePng,caption:C,actionButton:C&&Z?s()(Y.Z,{}):C&&e[ei]([{name:w[bi]({id:"confluenceImportOption.actionsMenu.importViaFile",[yi]:"Import via file"}),[fi]:()=>e[gi]("confluence",g)},{name:w[bi]({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",[yi]:"Connect another instance"}),[fi]:()=>{e.handleApiImportClick("confluence",g),o(!0)}},{name:w[bi]({id:"confluenceImportOption.actionsMenu.removeIntegration",[yi]:"Remove"}),[fi]:()=>async function(e){const{[si]:t,[oi]:i,[mi]:o}=e;f.setState({...f.state,showLoader:!1,isLoadingSpaces:!0}),await Ne.handleRemoveConfluence(t,o,i)}({[si]:v,[oi]:l.id,[mi]:M})}]),[Xt]:()=>{}},A=(null===(t=a.spacesResult)||void 0===t?void 0:t.spaces)||[],B={key:"default",name:w[bi]({id:"confluenceImportOption.spacesProperty.defaultName",[yi]:"Spaces"}),items:A.map((e=>({key:e.key,name:e.name})))},D=h.map((e=>{let{name:t,captionText:i,[fi]:o}=e;return{key:t,[Yt]:e=>r[ii](j.Z,n()({},e,{[ti]:t,caption:i,captionStyle:i?Mi:void 0})),[fi]:o}})),E={key:"section",[Yt]:e=>r[ii](ie.Z,e),items:D};return r[ii](r.Fragment,null,s()(Q.ZP,{popupType:y.isMobile?Q.Z4.SlideUp:Q.Z4.Popup,[qt]:Oe.Z,[Yt]:e=>C?function(e){return I&&T({[si]:v,[mi]:M,[oi]:l.id}).catch((()=>{})),Z?r[ii](r.Fragment,null):_(e)}(B):s()(X.Z,{[Qt]:L.og.Popup,[jt]:200},void 0,s()(ee.Z,{onAccept:e.close,type:ee.i[$t],[Jt]:void 0,[ni]:[E]})),renderOrigin:e=>{let{[Xt]:t}=e;return r[ii](we,n()({},x,{[Xt]:t}))}}),s()(Ge.Z,{[Nt]:i,innerStyle:{[jt]:600,maxWidth:"calc(100vw - 100px)",overflow:Ht,[Gt]:5,maxHeight:"90vh"},onDismiss:()=>{o(!1)},[Yt]:()=>s()(Zi,{hidePopup:()=>{o(!1)},[si]:v,[ti]:s()(m.FormattedMessage,{id:"confluenceAuthentication.titleMessage",[yi]:"Authentication details"}),[Rt]:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.emailMessage",[yi]:Wt}),s()(oe.Z,{placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.emailHelpText",[yi]:"Email address of the Confluence user importing the data"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Email help text button",disableBackground:!0,icon:c.Z[Ut]},e))})),accountType:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.instanceMessage",[yi]:"Confluence instance"}),s()(oe.Z,{[ri]:{[jt]:300,[wi]:"normal"},placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.instanceHelperText",[yi]:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence instance type help text button",disableBackground:!0,icon:c.Z[Ut]},e))})),site:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.siteMessage",[yi]:"Site"}),s()(oe.Z,{[ri]:{[jt]:300,[wi]:"normal"},placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.siteHelperText",[yi]:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence site help text button",disableBackground:!0,icon:c.Z[Ut]},e))})),APIToken:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.apiTokenMessage",[yi]:"API token"}),s()(oe.Z,{placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",[yi]:"Click to learn how to get access token from Confluence cloud"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence access token help text button",[Xt]:()=>{window[Nt]("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:c.Z[Ut]},e))})),personalAccessToken:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.personalAccessTokenMessage",[yi]:"Personal Access Token"}),s()(oe.Z,{placement:oe.Z[Vt].Right,[ri]:{[jt]:300,[wi]:"normal"},[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",[yi]:"Click to learn how to get personal authentication token from Confluence server"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence personal access token help text button",[Xt]:()=>{window[Nt]("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:c.Z[Ut]},e))})),confluenceVersion:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.confluenceVersion",[yi]:"Confluence version"}),s()(oe.Z,{[ri]:{[jt]:300,[wi]:"normal"},placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",[yi]:"Click to learn how to know the version of Confluence you are running"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence version help text button",[Xt]:()=>{window[Nt]("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:c.Z[Ut]},e))})),username:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.username",[yi]:"Username"}),s()(oe.Z,{placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.usernameHelpText",[yi]:"Username of the Confluence user importing the data"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence user's username help text button",disableBackground:!0,icon:c.Z[Ut]},e))})),[Lt]:s()(et.gq,{[ri]:{[zt]:Kt,gap:2}},void 0,s()(m.FormattedMessage,{id:"confluenceAuthentication.password",[yi]:"Password"}),s()(oe.Z,{placement:oe.Z[Vt].Right,[Ot]:()=>s()(m.FormattedMessage,{id:"confluenceAuthentication.passwordHelpText",[yi]:"Password of the Confluence user importing the data"}),[Yt]:e=>r[ii](J.Z,n()({ariaLabel:"Confluence user's password help text button",disableBackground:!0,icon:c.Z[Ut]},e))})),[oi]:l.id,flowId:g,[mi]:M})}))}));var Pi=i(77137),Ii=i(96486),Fi=i.n(Ii),_i=i(98459),xi=i(83805),Ai=i(5978),Bi=i(53833),Di=i(90365),Ei=i(12508),Li=i(28992),Ri=i(62385);class Ni extends l.Z{renderComponent(){return s()("div",{style:this.getStyle()},void 0,"·")}getStyle(){return{display:"inline-block",textAlign:"center",color:this.props.disabled?this.theme.lightTextColor:this.theme.mediumTextColor,userSelect:"none",WebkitUserSelect:"none",width:8}}}Ni.displayName="DotSeparator";const Oi=Ni,Ui=i(85).D7I,Vi=i(85).pkR,Wi=i(85).PG2,Ki=i(85).nx5,zi=i(85).XNW,Gi=i(85).Mm1,Hi=i(85).piL,qi=i(85).A4A,ji=i(85).fTK,Qi=i(85).IO3,Ji=i(85).Lyh,$i=i(85).wgE,Yi=i(85).QmD,Xi=i(85).FcT,eo=i(85).Gnd,to=i(85).P0R,io=i(85).bSA,oo=i(85).nQ3,no=i(85).XtO;class ao extends l.Z{constructor(){super(...arguments),this.storeTypes={[no]:$e},this.handleSelectAllClick=()=>{const{[oo]:e,[io]:t}=this[to],{[no]:i}=this[eo],{[Xi]:o}=i[Yi];for(const n of e)for(const e of n.items)o.add(e.key);i.emit(),p.trackIntegrationSelectAll(this[$i],{[Ji]:t})},this.handleDeselectAllClick=()=>{const{[io]:e}=this[to],{[no]:t}=this[eo],{[Xi]:i}=t[Yi];i.clear(),t.emit(),p.trackIntegrationDeselectAll(this[$i],{[Ji]:e})},this.handleToggleItem=e=>{const{[io]:t}=this[to],{[no]:i}=this[eo],{[Xi]:o}=i[Yi];o.has(e.key)?(o.delete(e.key),p.trackIntegrationSelectItem(this[$i],{[Ji]:t})):(o.add(e.key),p.trackIntegrationDeselectItem(this[$i],{[Ji]:t})),i.emit()},this.handleImport=()=>{const{[oo]:e}=this[to],{[Xi]:t}=this[eo][no][Yi],i=Fi().flatten(e.map((e=>e.items))),o=[];t.forEach((e=>{const t=i.find((t=>t.key===e));t&&o.push(t)})),this[to][Qi](o)}}willMount(e){const t=this[eo][no][Yi][Xi],[i]=e[oo];if(i){const[e]=i.items;e&&t.add(e.key)}this[eo][no].emit()}renderComponent(){return s()(X.Z,{menuType:L.og.Popup,header:this[ji](),footer:this.renderMenuFooter(),width:280,maxHeight:350},void 0,this.renderMenuList())}[ji](){const{[qi]:e}=this[to],{[Hi]:t}=this[eo][no][Yi],i=Boolean(t);return s()(ie.Z,{isInput:!0,desktopStyle:{[Gi]:2}},void 0,s()(Ye.ZP,{focus:!0,focusAfterAnimation:!0,value:t,onChange:e=>{const{[no]:t}=this[eo];t.setState({...t[Yi],[Hi]:e.target.value})},placeholder:e}),s()(Li.Z,{isTokenTitle:!0,style:{marginTop:2},title:s()("div",{style:{[zi]:-3}},void 0,s()(Ri.Z,{[Wi]:this.handleSelectAllClick,[Vi]:i,disabledFeedback:!0},void 0,s()(m.FormattedMessage,{id:"importPopup.selectAll",[Ki]:"Select all"})),s()(Oi,{[Vi]:i}),s()(Ri.Z,{[Wi]:this.handleDeselectAllClick,[Vi]:i,disabledFeedback:!0},void 0,s()(m.FormattedMessage,{id:"importPopup.deselectAll",[Ki]:"Deselect all"})))}))}renderMenuFooter(){const e=0===this[eo][no][Yi][Xi].size;return s()(ie.Z,{topBorder:!0,desktopStyle:{paddingTop:8,[Gi]:8}},void 0,s()(Li.Z,{title:s()(Ue.Z,{[Vi]:e,[Wi]:this.handleImport},void 0,s()(m.FormattedMessage,{id:"integrationImportPopup.importButton.label",[Ki]:"Import"}))}))}renderMenuList(){const{[oo]:e,noSearchResultsPlaceholder:t}=this[to],{[no]:i}=this[eo],{[Hi]:o,[Xi]:a}=i[Yi],l=e.map((e=>{const t=(0,Qe.ZP)(o,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===l.length)return s()(ie.Z,{},void 0,s()(Xe.Z,{title:t}));const d=l.map((t=>({key:t.name,render:i=>r[Ui](ie.Z,n()({},i,{title:e.length>1?t.name:void 0})),items:t.items.map((e=>{const t=()=>this.handleToggleItem(e);return{key:e.key,render:i=>r[Ui](Ve.Z,n()({},i,{title:e.name,icon:s()(Ei.Z,{checked:a.has(e.key),size:16,[Wi]:t}),right:void 0!==e.count&&s()(ne.Z,{isSmall:!0},void 0,e.count)})),action:t}}))})));return s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,[oo]:d})}}ao.displayName="IntegrationImportPopup";const so=ao,ro=i(85).bSA,lo=i(85).A4A,co=i(85).D7I,uo=i(85).PG2,mo=i(85).YjJ,po=i(85).nx5,go=i(85).Yzm,ho=i(85).ILp,vo=i(85).fCB,fo=i(85).IO3,yo=i(85).Und,bo=i(85).Y7T,So=i(85).Wqi,wo=i(85).Lyh,Mo=i(85)._37,ko=i(85).Wp_,Co=i(85).qJ8,Zo=i(85).Ql2,To=i(85).g65,Po=i(85).P3s,Io=i(85).XXx,Fo=i(85).Hmd,_o=i(85).P0R,xo=i(85).kBp,Ao=i(85).wgE,Bo=i(85).EIp;class Do extends l.Z{constructor(){super(...arguments),this.evernoteStoreState=this[Bo]((()=>Bi.Z.getState())),this.handleClickImportEvernote=async()=>{var e;const{isFetchingNotebooks:t}=this.evernoteStoreState.state;t&&await xi.B({[Ao]:this[Ao],[xo]:this[_o][xo]});const i=U.Z.getOrCreateFlowId();p.trackClickImportButton(this[Ao],{[Fo]:Io,from:this[_o][Po],flowId:i,userId:this[Ao][To].id,[Zo]:null===(e=H.default.state[Co])||void 0===e?void 0:e.id})},this.handleRemoveEvernote=async()=>{await y.disconnectEvernote(this[Ao],{}),Bi.Z[ko]({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await this[_o][xo].refresh(),p[Mo](this[Ao],{[wo]:Io})},this.handleEvernoteAuth=async()=>{await xi.e({[Ao]:this[Ao],[xo]:this[_o][xo]})},this.handleImportEvernoteComplete=async(e,t)=>{const{notebooks:i}=e,o=i.filter((e=>Boolean(t.find((t=>t.key===e.guid)))));p.trackImportIntegration(this[Ao],{[wo]:Io,count:t.length});const n=await P.am({[Ao]:this[Ao],[So]:this[_o][So],[bo]:this[_o][bo],[yo]:this[_o][yo],notebooks:o});p.trackImportSourceInput(this[Ao],{[Fo]:Io,data:{notebooks:o.map((e=>e.guid)),userId:this[Ao][To].id,[Zo]:(0,_i.CG)(this[_o][So].id)},flowId:U.Z.getOrCreateFlowId()}),this[_o][fo](n)},this.handleEvernoteHelpClick=()=>{Ai[vo]({[Ao]:this[Ao],url:(0,N.getLocalizedUrl)("guides.importEvernote")})}}renderComponent(){const{device:e}=this[Ao],{evernoteResult:t,intl:i}=this[_o],{userInfo:o}=t,{notebooksResponse:a,showLoader:l}=this.evernoteStoreState.state,c=(null==a?void 0:a.notebooks)||[],u=Fi().groupBy(c,(e=>e.stack||"")),m=Object.keys(u).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(u[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),p={title:"Evernote",logo:d.Z.images.import.evernotePng,shouldWrapCaption:!o,caption:o?o.name||o.username||o.email:void 0,actionButton:o&&l?s()(Y.Z,{}):o?this[_o][ho]([{name:i[go]({id:"evernoteImportOption.actionsMenu.learnMore",[po]:"Learn more"}),action:this.handleEvernoteHelpClick},{name:i[go]({id:"evernoteImportOption.actionsMenu.import",[po]:"Import"}),action:()=>Di.Z[ko]({open:!0})},{name:i[go]({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",[po]:mo}),action:this.handleEvernoteAuth},{name:i[go]({id:"evernoteImportOption.actionsMenu.removeIntegration",[po]:"Remove"}),action:this.handleRemoveEvernote}]):this[_o].defaultActionButton,[uo]:()=>{}};return s()(Q.ZP,{popupType:e.isMobile?Q.Z4.SlideUp:Q.Z4.Popup,buttonPopupStore:Di.Z,[uo]:this.handleClickImportEvernote,render:()=>l?r[co](r.Fragment,null):s()(so,{[lo]:i[go]({id:"evernoteImportOption.search.placeholder",[po]:"Search for a notebook…"}),noSearchResultsPlaceholder:i[go]({id:"evernoteImportOption.search.noResultsPlaceholder",[po]:"No notebooks"}),[ro]:Io,sections:m,[fo]:e=>this.handleImportEvernoteComplete(a,e)}),renderOrigin:e=>{let{[uo]:t}=e;return r[co](we,n()({},p,{[uo]:o?t:this.handleEvernoteAuth}))}})}}Do.displayName="EvernoteImportOption";const Eo=(0,m.injectIntl)(Do);var Lo=i(33929);const Ro=i(85).Hmd,No=i(85).gNv,Oo=i(85).Ydc,Uo=(0,m.defineMessages)({successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:Oo}});const Vo=i(85).XNW,Wo=i(85).cad,Ko=i(85).AIq,zo=i(85).KqM,Go=i(85).cZW,Ho=i(85).kdC,qo=i(85).Dd5,jo=i(85).nm$,Qo=i(85).icY,Jo=i(85).P3s,$o=i(85).g7N,Yo=i(85).gGi,Xo=i(85).h8z,en=i(85).UPJ,tn=i(85).rps,on=i(85).$bT,nn=i(85).nLZ,an=i(85).LeX,sn=i(85).ChN,rn=i(85).BQ6,ln=i(85).Joh,dn=i(85).ESK,cn=i(85).E4p,un=i(85).jkI,mn=i(85).H1U,pn=(i(85).fHq,i(85).NF1),gn=i(85).nAm,hn=i(85).rpY,vn=i(85).D7I,fn=i(85).wgE,yn=i(85).PG2,bn=i(85).nx5,Sn=i(85).Yzm,wn=i(85).ILp,Mn=i(85).T04,kn=i(85).Zij,Cn=i(85).Wqi,Zn=i(85).kBp;function Tn(e){let{[fn]:t,[kn]:i,[Mn]:o,APIToken:n,hidePopup:a,flowId:l,[Zn]:d,[Cn]:c}=e;window.__c={n:"ModalContent"};const[u,h]=(0,r.useState)(""),[v,f]=(0,r.useState)(""),S=(0,Re.yK)((e=>({[kn]:{[sn]:ae.Z[sn].semibold},[an]:{fontSize:"14px",[sn]:"400"},helpText:{textAlign:un,[nn]:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return s()(Ke.Z,{capture:!0},void 0,s()("div",{[rn]:{display:"flex",[on]:tn,[en]:Xo,height:Yo,padding:20,width:Yo}},void 0,s()("div",{[rn]:{overflowY:"scroll"}},void 0,s()("div",{[rn]:{[$o]:24}},void 0,s()("div",{[rn]:S[kn]},void 0,i),s()(je.Z,{[kn]:s()(m.FormattedMessage,{id:"mondayAuthentication.helpButton.caption",[bn]:"Learn more about importing from Monday.com"}),href:"",[Jo]:"import",[rn]:{[nn]:8}})),s()("div",{},void 0,s()(Qo,{htmlFor:Mn,[rn]:{...S[an]}},void 0,o),s()(ze.Z,{id:Mn,value:u,autoComplete:"off",autoCapitalize:"off",[qo]:e=>{h(e[jo].value)},[Ho]:!0,[Go]:"sample@gmail.com",inputElementAttributes:{minLength:4}}),s()(We.Z,{size:12,isHidden:!0}),s()("div",{},void 0,s()(Qo,{htmlFor:"APIToken",[rn]:{...S[an]}},void 0,n),s()(ze.Z,{id:"AccessToken",type:zo,value:v,[qo]:e=>{f(e[jo].value)},[Ho]:!0,[Go]:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})))),s()("div",{[rn]:{flexGrow:0,[Ko]:0}},void 0,s()(We.Z,{size:24}),s()(Ue.Z,{isLarge:!0,[yn]:async()=>{await async function(e){const{environment:t,requestStore:i,userEmail:o,APIToken:n,flowId:a,spaceId:s}=e;if(!t.currentUser.id)return g.showMessage({message:"Invalid details"}),void b.close();const r=await y.authenticateMondayUser(t,{userId:t.currentUser.id,spaceId:s,userEmail:o,APIToken:n});await i.refresh(),"failed"===r.type?(p[No](t,{[Ro]:"monday.com",data:{import_type:"api",status:"failure",error:r.error},flowId:a}),console.error(r.error),g.showError(r)):(p[No](t,{[Ro]:"monday.com",data:{import_type:"api",status:"success"},flowId:a}),g.showMessage({message:Lo.default.formatMessage(Uo.successfullyConnected)})),b.close()}({[fn]:t,[Zn]:d,[Wo]:u,APIToken:v,flowId:l,spaceId:c.id}),a()}},void 0,s()(m.FormattedMessage,{id:"mondayAuthentication.authenticateButton.label",[bn]:"Authenticate"})),s()(He.Z,{isLarge:!0,[rn]:{[Vo]:12},[yn]:()=>{a()}},void 0,s()(m.FormattedMessage,{id:"mondayAuthentication.cancelButton.label",[bn]:"Cancel"})))))}const Pn=(0,m.injectIntl)((function(e){window.__c={n:"MondayImportOption"};const[t,i]=(0,r.useState)(!1),{mondayResult:o,flowId:a,intl:l,[Zn]:d,[Cn]:u}=e,{user:p}=o,g=(0,W.O7)(),h={[kn]:"Monday",logo:"",caption:null==p?void 0:p[Mn],actionButton:p&&e[wn]([{name:l[Sn]({id:"mondayImportOption.actionsMenu.connectAnotherAccount",[bn]:"Connect another account"}),action:()=>{i(!0)}},{name:l[Sn]({id:"mondayImportOption.actionsMenu.removeIntegration",[bn]:"Remove"}),action:async()=>{await Ne.handleRemoveMonday(g,d,u.id)}}]),[yn]:()=>{}};return r[vn](r.Fragment,null,s()(Q.ZP,{popupType:g.device.isMobile?Q.Z4.SlideUp:Q.Z4.Popup,[yn]:()=>{i(!0)},renderOrigin:e=>{let{[yn]:t}=e;return r[vn](we,n()({},h,{[yn]:p?async()=>{await async function(e){const{environment:t,spaceStore:i}=e,o=y.parallelMondayImport(t,{importParams:[],loggerPageId:"",spaceId:i.id});for await(const n of o)return n}({[fn]:g,[Cn]:u})}:t}))},[hn]:()=>{}}),s()(Ge.Z,{open:t,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:gn,[pn]:5,maxHeight:"90vh"},onDismiss:()=>{i(!1)},[hn]:()=>s()(Tn,{hidePopup:()=>{i(!1)},[fn]:g,[kn]:s()(m.FormattedMessage,{id:"mondayAuthentication.titleMessage",[bn]:"Authentication details"}),[Mn]:s()(et.gq,{[rn]:{[mn]:un,gap:2}},void 0,s()(m.FormattedMessage,{id:"mondayAuthentication.emailMessage",[bn]:cn}),s()(oe.Z,{placement:oe.Z[dn].Right,[ln]:()=>s()(m.FormattedMessage,{id:"mondayAuthentication.emailHelpText",[bn]:"Email address of the Monday.com user importing the data"}),[hn]:e=>r[vn](J.Z,n()({},e,{ariaLabel:"Email help text button",disableBackground:!0,icon:c.Z.info}))})),APIToken:s()(et.gq,{[rn]:{[mn]:un,gap:2}},void 0,s()(m.FormattedMessage,{id:"mondayAuthentication.apiTokenMessage",[bn]:"API token"}),s()(oe.Z,{placement:oe.Z[dn].Right,[ln]:()=>s()(m.FormattedMessage,{id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",[bn]:"Click to learn how to get API token from Monday.com"}),[hn]:e=>r[vn](J.Z,n()({},e,{ariaLabel:"Monday.com API token help text button",[yn]:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:c.Z.info}))})),flowId:a,[Zn]:d,[Cn]:u})}))}));var In=i(52192),Fn=i(82066),_n=i(81676);const xn=i(85).bSA,An=i(85).A4A,Bn=i(85).D7I,Dn=i(85).PG2,En=i(85).ILp,Ln=i(85).nx5,Rn=i(85).Yzm,Nn=i(85).IO3,On=i(85).Y7T,Un=i(85).Wqi,Vn=i(85).Lyh,Wn=i(85)._37,Kn=i(85).Wp_,zn=i(85).P3s,Gn=i(85).Hmd,Hn=i(85).P0R,qn=i(85).kBp,jn=i(85).wgE,Qn=i(85).EIp;class Jn extends l.Z{constructor(){super(...arguments),this.trelloStoreState=this[Qn]((()=>_n.Z.getState())),this.handleClickImportTrello=async()=>{this.trelloStoreState.state.isFetchingBoards&&await In.u(this[jn],this[Hn][qn]),p.trackClickImportButton(this[jn],{[Gn]:"trello",from:this[Hn][zn]})},this.handleTrelloAuth=async()=>{await In.M({[jn]:this[jn],[qn]:this[Hn][qn]})},this.handleRemoveTrello=async()=>{await y.disconnectTrello(this[jn],{}),_n.Z[Kn]({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await this[Hn][qn].refresh(),p[Wn](this[jn],{[Vn]:"trello"})},this.handleImportTrelloComplete=async(e,t)=>{const{boards:i}=e,o=i.filter((e=>Boolean(t.find((t=>t.key===e.id)))));p.trackImportIntegration(this[jn],{[Vn]:"trello",count:t.length});const n=await P.su({[jn]:this[jn],[Un]:this[Hn][Un],[On]:this[Hn][On],boards:o});this[Hn][Nn](n)}}renderComponent(){const{device:e}=this[jn],{trelloResult:t,intl:i}=this[Hn],{account:o}=t,{boardsResponse:a,showLoader:l}=this.trelloStoreState.state,c=a.boards,u={key:"default",name:i[Rn]({id:"trelloImportOption.boardProperty.defaultName",[Ln]:"Boards"}),items:c.map((e=>({key:e.id,name:e.name})))},m={title:"Trello",logo:d.Z.images.import.trelloPng,actionButton:o&&l?s()(Y.Z,{}):o&&this[Hn][En]([{name:i[Rn]({id:"trelloImportOption.actionsMenu.import",[Ln]:"Import"}),action:()=>Fn.Z[Kn]({open:!0})},{name:i[Rn]({id:"trelloImportOption.actionsMenu.connectAnotherAccount",[Ln]:"Connect another account"}),action:this.handleTrelloAuth},{name:i[Rn]({id:"trelloImportOption.actionsMenu.removeIntegration",[Ln]:"Remove"}),action:this.handleRemoveTrello}]),[Dn]:()=>{}};return s()(Q.ZP,{popupType:e.isMobile?Q.Z4.SlideUp:Q.Z4.Popup,buttonPopupStore:Fn.Z,[Dn]:this.handleClickImportTrello,render:()=>l?r[Bn](r.Fragment,null):s()(so,{[An]:i[Rn]({id:"trelloImportOption.search.placeholder",[Ln]:"Search for a board…"}),noSearchResultsPlaceholder:i[Rn]({id:"trelloImportOption.search.noResultsPlaceholder",[Ln]:"No boards found."}),[xn]:"trello",sections:[u],[Nn]:e=>this.handleImportTrelloComplete(a,e)}),renderOrigin:e=>{let{[Dn]:t}=e;return r[Bn](we,n()({},m,{[Dn]:o?t:this.handleTrelloAuth}))}})}}Jn.displayName="TrelloImportOption";const $n=(0,m.injectIntl)(Jn),Yn=i(85).j7K,Xn=i(85).y79,ea=i(85).XNW,ta=i(85).Joh,ia=i(85).mFA,oa=i(85).I$G,na=i(85).D7I,aa=i(85).Und,sa=i(85).ILp,ra=i(85).rpY,la=i(85).xgV,da=i(85).Syz,ca=i(85).Gnd,ua=i(85).PG2,ma=i(85).QS3,pa=i(85).Zij,ga=i(85).LRi,ha=i(85).e5W,va=i(85).Tk1,fa=i(85).nx5,ya=i(85).wuN,ba=i(85).dU4,Sa=i(85).kBp,wa=i(85).IO3,Ma=i(85).Y7T,ka=i(85).Wqi,Ca=i(85).veP,Za=i(85).P0R,Ta=i(85).P3s,Pa=i(85).Hmd,Ia=i(85).wgE,Fa=i(85).T3U,_a=i(85).iOi;class xa extends l.Z{constructor(){super(...arguments),this.storeTypes={trelloRequestStore:V.Z,asanaRequestStore:V.Z,evernoteRequestStore:V.Z,[_a]:V.Z,mondayRequestStore:V.Z},this[Fa]=async(e,t)=>{p.trackClickImportButton(this[Ia],{[Pa]:e,from:this[Za][Ta],import_type:"file",flowId:t});const i=await P.ro({[Ia]:this[Ia],[Ca]:this[Za][Ca],[ka]:this[Za][ka],[Ma]:this[Za][Ma],uploadType:e,flowId:t});i&&this[Za][wa](i)},this.handleApiImportClick=(e,t)=>{T({[Ia]:this[Ia],[Sa]:this[Za][_a],spaceId:this[Za][ka].id}).catch((()=>{})),p.trackClickImportButton(this[Ia],{[Pa]:e,from:this[Za][Ta],import_type:"api",flowId:t})},this.getAnalyticsFlowId=()=>U.Z.state.flowId||(0,u.default)()}renderComponent(){if(!O.Z.state.online)return s()("div",{style:{...xa[ba],fontSize:14,color:this.theme[ya]}},void 0,s()(m.FormattedMessage,{id:"importOptions.offlineErrorMessage",[fa]:"Please go online to import."}));const{[Ta]:e,isLoadingNewConnections:t}=this[Za];return this.renderRequests((i=>!i||t?s()("div",{style:"onboarding"===e?{}:xa[ba]},void 0,s()(Y.Z,{})):s()("div",{style:xa[ba]},void 0,this.renderOptions(i))))}renderOptions(e){const t=this.getAnalyticsFlowId();return s()("div",{style:{display:"grid",[va]:"repeat(3, 1fr)",gridAutoRows:"1fr",gap:"4px 16px",width:"100%"}},void 0,this.renderAsanaImportOption(e.asanaResult),(0,F.Tc)(this[Ia])?this.renderConfluenceImportViaAPIOption(e.confluenceResult,t):this.renderConfluenceImportViaFileOption(t),s()(we,{[pa]:"Google Docs",logo:d.Z[ha].import.googleDocsPng,[ma]:this[ga]((0,N.getLocalizedUrl)("guides.importGoogleDocs")),[ua]:()=>this[Fa]("gdocs")}),this.renderCsvImportWithTooltip(),s()(we,{[pa]:s()(m.FormattedMessage,{id:"importOptions.textMarkdown.title",[fa]:"Text & Markdown"}),icon:c.Z.importText,[ua]:()=>this[Fa]("markdown")}),(0,_.t)()&&s()(we,{[pa]:s()(m.FormattedMessage,{id:"importOptions.genericImporter.title",[fa]:"Generic Importer"}),icon:c.Z.import,[ua]:()=>this[Fa]("genericImporter",t)}),s()(we,{[pa]:"HTML",icon:c.Z.importHTML,[ua]:()=>this[Fa]("html")}),s()(we,{[pa]:"Word",logo:d.Z[ha].import.wordPng,[ua]:()=>this[Fa]("docx")}),s()(we,{[pa]:"Dropbox Paper",logo:d.Z[ha].import.dropboxPaperPng,[ma]:this[ga]((0,N.getLocalizedUrl)("guides.importDropboxPaper")),[ua]:()=>this[Fa]("dropbox")}),this.renderTrelloImportOption(e.trelloResult),this.renderEvernoteImportOption(e.evernoteResult),"on"===R.default.getEligibleGroup({experimentId:"monday_importer",defaultGroup:"control"})&&this.renderMondayImportOption(e.mondayResult),s()(we,{[pa]:"Quip",logo:d.Z[ha].import.quipPng,[ma]:this[ga]((0,N.getLocalizedUrl)("guides.importQuip")),[ua]:()=>this[Fa]("quip")}),s()(we,{[pa]:"Workflowy",logo:d.Z[ha].import.workflowyPng,[ma]:this[ga]((0,N.getLocalizedUrl)("guides.importWorkflowy")),[ua]:()=>this[Fa]("workflowy")}))}renderRequests(e){return s()(Pi.Z,{[da]:this[Ia],[la]:B,[Sa]:this[ca].trelloRequestStore,[ra]:(t,i)=>s()(Pi.Z,{[da]:this[Ia],[la]:D,[Sa]:this[ca].asanaRequestStore,[ra]:(t,o)=>s()(Pi.Z,{[da]:this[Ia],[la]:E,[Sa]:this[ca].evernoteRequestStore,[ra]:(t,n)=>s()(Pi.Z,{[da]:this[Ia],[la]:()=>async function(e,t){const i=await y.getConfluenceAccount(e,{spaceId:t});return"success"===i.type?i.data:(console[A](i[A]),{})}(this[Ia],this[Za][ka].id),[Sa]:this[ca][_a],[ra]:(t,a)=>s()(Pi.Z,{[da]:this[Ia],[la]:()=>async function(e,t){const i=await y.getMondayUser(e,{spaceId:t});if("success"===i.type)return i.data;console[A](i[A])}(this[Ia],this[Za][ka].id),[Sa]:this[ca].mondayRequestStore,[ra]:(t,s)=>e(i&&o&&n&&a&&s?{trelloResult:i,asanaResult:o,evernoteResult:n,confluenceResult:a,mondayResult:s}:void 0)})})})})})}renderTrelloImportOption(e){return s()($n,{trelloResult:e,[Ta]:this[Za][Ta],[sa]:this[sa],[wa]:this[Za][wa],[Sa]:this[ca].trelloRequestStore,[ka]:this[Za][ka],[Ma]:this[Za][Ma],[aa]:this[Za][aa]})}renderAsanaImportOption(e){return(0,I.c)()?s()(Le,{}):r[na](r.Fragment,null)}renderMondayImportOption(e){return s()(Pn,{mondayResult:e,[Ta]:oa,flowId:"",[sa]:this[sa],[wa]:this[Za][wa],[Sa]:this[ca].mondayRequestStore,[ka]:this[Za][ka],[Ma]:this[Za][Ma],[aa]:this[Za][aa]})}renderConfluenceImportViaAPIOption(e,t){const{[Ta]:i,[wa]:o,[ka]:n,[Ma]:a,[aa]:r}=this[Za];return s()(Ti,{confluenceResult:e,[Ta]:i,flowId:t,[sa]:this[sa],[wa]:o,[ka]:n,[Sa]:this[ca][_a],[Ma]:a,[aa]:r,[Fa]:this[Fa],handleApiImportClick:this.handleApiImportClick})}renderConfluenceImportViaFileOption(e){return s()(we,{[pa]:"Confluence",logo:d.Z[ha].import.confluencePng,[ua]:()=>this[Fa](ia,e),[ma]:this[ga]((0,N.getLocalizedUrl)("guides.importConfluence"))})}renderEvernoteImportOption(e){return s()(Eo,{evernoteResult:e,[Ta]:oa,[sa]:this[sa],defaultActionButton:this[ga]((0,N.getLocalizedUrl)("guides.importEvernote")),[wa]:this[Za][wa],[Sa]:this[ca].evernoteRequestStore,[ka]:this[Za][ka],[Ma]:this[Za][Ma],[aa]:this[Za][aa]})}renderCsvImportWithTooltip(){return s()(oe.Z,{placement:oe.Z.Placement.Bottom,[ra]:e=>s()(we,{tooltipEvents:e,[pa]:"CSV",icon:c.Z.importCSV,[ua]:()=>this[Fa]("csv")}),[ta]:()=>s()(m.FormattedMessage,{id:"importOptions.csvImport.tooltip",[fa]:"Ensure first row in the CSV is the header"})})}[ga](e){return s()(oe.Z,{[ta]:()=>s()(m.FormattedMessage,{id:"importOptions.helpButton.tooltip",[fa]:"Learn about how to import"}),[ra]:t=>r[na]($.Z,n()({external:!0,href:e,style:{[ea]:"auto"}},t),s()(J.Z,{icon:c.Z.help}))})}[sa](e){return s()(Q.ZP,{popupType:te.kQ.Popup,renderOrigin:e=>r[na](J.Z,n()({icon:c.Z.dots},e)),[ra]:t=>{const i=e.map((e=>{let{name:i,action:o}=e;return{key:i,[ra]:e=>r[na](Ve.Z,n()({},e,{[pa]:i})),action:()=>{o(),t.close()}}})),o={key:"section",[ra]:e=>r[na](ie.Z,e),items:i};return s()(X.Z,{menuType:L.og.Popup,width:200},void 0,s()(ee.Z,{type:ee.i[Xn],[Yn]:void 0,sections:[o]}))}})}}xa.displayName="ImportOptions",xa[ba]={display:"flex",alignItems:"center",justifyContent:"center",width:752,minHeight:240},xa.optionsColumnStyle={width:240};const Aa=xa},15474:(e,t,i)=>{i.r(t),i.d(t,{IntegrationGalleryModal:()=>he});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(480),u=i(81954),m=i(24405),p=i(58573),g=i(3909),h=i(74181),v=i(5366),f=i(77719),y=i(761),b=i(79315),S=i(30874),w=i(49900),M=i(3444),k=i(42922),C=i(52275),Z=i(73063),T=i(74194),P=i(3386),I=i(32163),F=i(53953),_=i(74136),x=i(72495);const A=i(85).kdC,B=i(85).Yzm,D=i(85).Rbl,E=i(85)._8D,L=i(85).HAy,R=i(85).Q9F,N=i(85).bey,O=i(85).fBv,U=i(85).D7I,V=i(85).XNW,W=i(85).nLZ,K=i(85).PG2,z=i(85).TtP,G=i(85).nx5,H=i(85).Exd,q=i(85).PXg,j=i(85).Mm1,Q=i(85).h8z,J=i(85).UPJ,$=i(85).y3i,Y=i(85).cbT,X=i(85).ydX,ee=i(85).tRX,te=i(85).Scd,ie=i(85).rps,oe=i(85).L_E,ne=i(85).sI1,ae=i(85).BQ6,se=i(85).nAm,re=i(85).$bT,le=i(85).EMU,de=i(85).sM5,ce=i(85).gGi,ue=i(85).Wp_,me=i(85).NF1,pe=i(85).Jkr,ge=i(85).QmD;function he(){window.__c={n:"IntegrationGalleryModal"};const e=(0,u.VK)((()=>w.d[ge].open),[]),t=(0,c.Fy)(),i=(0,m.yK)((e=>({modal:{[pe]:t.isMobile?"auto":"90vw",height:t.isMobile?"auto":"90vh",[me]:8}})),[t.isMobile]);return s()(F.Z,{open:e,[ne]:i.modal,onDismiss:()=>{w.d[ue]({open:!1})},render:()=>s()("div",{[ae]:{height:ce,[de]:le,[re]:"row",[me]:8,overflow:se}},void 0,s()(ye,{}),s()(ve,{}))})}function ve(){window.__c={n:"GalleryModalDetail"};const e=(0,c.O7)(),t=(0,m.yK)((e=>({[oe]:{[pe]:ce,height:ce,overflow:"auto",[le]:1,[de]:le,[re]:ie,alignItems:"stretch",[te]:e.contentBackground,color:e.regularTextColor,padding:20},text:{color:e.darkTextColor}})),[]),i=(0,u.VK)((()=>{const{currentSpaceStore:e}=b.default[ge];return null==e?void 0:e.id}),[]),o=(0,u.VK)((()=>{if(w.d[ge].open)return w.d[ge][ee]}),[]),n=(0,u.VK)((()=>o?S.Z[X][ge].filter((e=>e[Y]===o.id)):[]),[o]);if(!o||!i)return null;const a=o.info.icon,r=o.name,l=o.info.developer_name,p=o.info.description,g=[];(0,h.mo)(o)&&g.push("linkPreview"),(0,h.zc)(o)&&g.push("databaseSync");const C=o.info.screenshots,Z=C?s()(fe,{imageUrls:C},o.id):null;return d[U](d.Fragment,null,s()("div",{[ae]:t[oe]},void 0,Z,s()("div",{[ae]:{[de]:le,[J]:Q,[j]:20}},void 0,s()("div",{[ae]:{[de]:le}},void 0,s()("img",{src:a,[ae]:{[pe]:50,[q]:10}}),s()("div",{[ae]:{[de]:le,[re]:ie}},void 0,s()("span",{},void 0,s()("b",{[ae]:{[H]:18}},void 0,r)),s()("span",{[ae]:t.text},void 0,s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.madeBy.name",[G]:"By {name}",values:{name:l}})))),s()(k.Z,{[ae]:{[pe]:120},[K]:()=>(async t=>{await f.hM({environment:e,integration:t,spaceId:i,from:"integration_gallery"}),y[$]({environment:e})})(o)},void 0,n[z]>0?s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.button.installAnother",[G]:"Install another"}):s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.button.install",[G]:"Install"}))),s()("span",{[ae]:{...t.text,[H]:14}},void 0,p),s()("div",{[ae]:{[de]:le,[W]:10}},void 0,g.map((e=>e&&s()(_.Z,{desktopStyle:{[V]:4},[ne]:{[H]:12}},void 0,M.a_[e]))))))}function fe(e){window.__c={n:"ImageCarousel"};const{imageUrls:t}=e,[i,o]=(0,d.useState)(0),n=(0,m.yK)((e=>({heroImg:{[pe]:ce,objectFit:"contain",objectPosition:"top",[j]:30},arrows:{fill:"#000"}})),[]),a=e=>{let n="right"===e?i+1:i-1;n<0&&(n=t[z]-1),n>t[z]-1&&(n=0),o(n)},r=t[z]>0;return s()("div",{[ae]:{[pe]:ce,[O]:"relative"}},void 0,r&&s()(Z.Z,{[ae]:{[O]:"absolute",top:"50%",left:10},[N]:n.arrows,icon:g.Z.chevronLeft,[K]:()=>a("left")}),s()("img",{[ae]:n.heroImg,src:t[i]}),r&&s()(Z.Z,{[ae]:{[O]:"absolute",top:"50%",right:10},[N]:n.arrows,icon:g.Z[R],[K]:()=>a("right")}))}function ye(){window.__c={n:"GalleryModalSidebar"};const e=(0,v.useIntl)(),t=(0,m.yK)((e=>({sidebar:{height:ce,[pe]:275,[te]:e.sidebarBackground,alignContent:"center",[de]:le,[re]:ie,alignItems:"stretch",boxShadow:e.sidebarBoxShadow},header:{padding:"12px 12px 0 12px"},searchIcon:{[pe]:14,height:14,[q]:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor},searchBar:{height:32,[me]:5,[H]:14,[W]:0,marginBottom:8,padding:"16px 10px"},[L]:{[te]:"dark"===e.mode?e.popoverHoveredBackground:e[E],fontWeight:500}})),[]),[i,o]=(0,d.useState)(""),a=(0,u.VK)((()=>S.Z.integrations[ge]),[]),r=(0,u.VK)((()=>l().groupBy(S.Z[X][ge],(e=>e[Y]))),[]),c=(0,u.VK)((()=>{if(w.d[ge].open)return w.d[ge][ee]}),[]),h=(0,p.ZP)(i,a,(e=>e.name)),f=h.filter((e=>{var t;return null===(t=r[e.id])||void 0===t?void 0:t[z]})),y=h.filter((e=>{var t;return!(null!==(t=r[e.id])&&void 0!==t&&t[z])})),b=[{key:"installed",render:e=>d[U](x.Z,n()({},e,{title:"Installed"})),items:f.map((e=>({key:e.id,action:()=>{w.d[ge].open&&w.d[ue]({...w.d[ge],[ee]:e})},render:i=>d[U](C.Z,n()({},i,{title:e.name,icon:s()("img",{src:e.info.icon,[ae]:{[pe]:12}}),buttonStyle:{...e.id===(null==c?void 0:c.id)?t[L]:void 0}}))})))},{key:"not_installed",render:e=>d[U](x.Z,n()({},e,{title:"Not Installed"})),items:y.map((e=>({key:e.id,action:()=>{w.d[ge].open&&w.d[ue]({...w.d[ge],[ee]:e})},render:i=>d[U](C.Z,n()({},i,{title:e.name,icon:s()("img",{src:e.info.icon,[ae]:{[pe]:12}}),buttonStyle:{...e.id===(null==c?void 0:c.id)?t[L]:void 0}}))})))}];return s()("div",{[ae]:t.sidebar},void 0,s()("div",{[ae]:t.header},void 0,s()(P.Z,{capture:!0,onBackspace:l()[D],onLeft:l()[D],onRight:l()[D],onSelectAll:l()[D],onRedo:l()[D],onUndo:l()[D],onCut:l()[D],onCopy:l()[D],onPaste:l()[D],onKeypress:l()[D],onDelete:l()[D],onTab:l()[D]},void 0,s()(T.Z,{placeholder:e[B]({id:"integrationGallery.sidebar.searchbar.placeholder",[G]:"Search integrations"}),left:g.Z.search(t.searchIcon),[A]:!0,format:T.Z.Format.Small,value:i,[ae]:t.searchBar,onChange:e=>{o(e.target.value)}}))),s()(I.Z,{type:I.i.Vertical,initialFocus:0,sections:b}))}},74661:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),l=i(24405),d=i(66673),c=i(3909),u=i(51859),m=i(89101),p=i(82990),g=i(5366),h=i(50906),v=i(54642),f=i(5978),y=i(21969),b=i(25464),S=i(42389),w=i(42922),M=i(12508),k=i(73063),C=i(16354),Z=i(44532),T=i(62385),P=i(64369);const I=i(85).jkI,F=i(85).H1U,_=i(85).h8z,x=i(85).UPJ,A=i(85).D7I,B=i(85).wgE,D=i(85).l81,E=i(85).Gpy,L=i(85).Lhq,R=i(85).PG2,N=i(85).Wp_,O=i(85).Yzm,U=i(85).nx5,V=i(85).L_E,W=i(85).BQ6;function K(){window.__c={n:"OpenInDesktopAppPopup"};const e=(0,s.O7)(),t=(0,g.useIntl)(),[i,o]=(0,a.useState)(!0),{isDesktopBrowser:K,os:z}=(0,s.Fy)(),G=(0,r.VK)((()=>e.RouterStore.state.route.name in u.c$),[e]),H=e.currentUser.isLoggedIn(),q=(0,r.VK)((()=>S.Z.state),[]),[j,Q]=(0,a.useState)(!1),J=!j&&H&&void 0===q&&K&&("mac"===z||"windows"===z)&&G&&S.Z.canPersistToLocalStorage(),[$,Y]=(0,a.useState)(!1),X=J&&$,ee=(0,a.useRef)(!1);(0,a.useEffect)((()=>{J&&!ee.current&&(async function(e,t){const i=await v.getDesktopAppRegistration(e,{os:t});return"data"in i&&i.data.isRegistered}(e,z).then((e=>{Y(e)})),ee.current=!0)}),[J,Y,e,z]);const te=(0,d.D9)(X);(0,a.useEffect)((()=>{X&&!te&&h.trackOpenInDesktopAppPopupDisplay(e)}),[X,te,e]);const ie=(0,l.yK)((()=>({origin:{position:"fixed",left:"50%",top:"100%"},[V]:{bottom:20,padding:"8px 12px 12px",width:300},header:{display:"flex",[x]:_,[F]:I},headerText:{fontSize:14,fontWeight:p.Z.fontWeight.medium},appDownloadButton:{fontSize:14,marginLeft:-5},appDownloadIcon:{width:14,height:14,marginRight:6},[L]:{display:"flex",[x]:_,[F]:I,marginTop:8},alwaysOpenLinks:{display:"flex",[F]:I},alwaysOpenLinksLabel:{marginLeft:6},alwaysOpenLinksButton:{paddingLeft:12,paddingRight:12,height:34}})),[]);return n()(Z.ZP,{popupType:Z.kQ.Popup,placementToOrigin:b.u.Bottom,origin:n()("div",{[W]:ie.origin}),disableMouseCapture:!0,open:X,[W]:ie[V],render:()=>a[A](a.Fragment,null,n()("div",{[W]:ie.header},void 0,n()(P.Z,{[W]:ie.headerText},void 0,n()(g.FormattedMessage,{id:"openInDesktopAppPopup.header",[U]:"Open in Notion's desktop app?"})),n()(k.Z,{ariaLabel:t[O]({id:"openInDesktopAppPopup.closeButton",[U]:"Dismiss"}),icon:c.Z.closeSmall,[R]:()=>{S.Z[N]("never"),Q(!0),h.trackOpenInDesktopAppPopupDismiss(e)}})),n()(C.Z,{href:m.AR.desktop,external:!0,[R]:()=>{h.trackOpenInDesktopAppPopupDownload(e)}},void 0,n()(T.Z,{[W]:ie.appDownloadButton},void 0,c.Z.appDownload(ie.appDownloadIcon),n()("span",{},void 0,n()(g.FormattedMessage,{id:"openInDesktopAppPopup.appDownloadButton",[U]:"Don't have the app? Download"})))),n()("div",{[W]:ie[L]},void 0,n()("div",{[W]:ie.alwaysOpenLinks},void 0,n()(M.Z,{checked:i,size:16,[R]:()=>{o(!i)}}),n()(P.Z,{isInline:!0,[W]:ie.alwaysOpenLinksLabel},void 0,n()(g.FormattedMessage,{id:"openInDesktopAppPopup.alwaysOpenLinksLabel",[U]:"Always open in app",[E]:{strongtext:e=>n()("strong",{},void 0,e)}}))),n()(w.Z,{[W]:ie.alwaysOpenLinksButton,[R]:()=>{S.Z[N](i?"always":"never"),Q(!0),f.openInNativeApp({url:(0,y.W)(window[D].href),[B]:e}),h.trackOpenInDesktopAppPopupOpenInApp(e,{always_open_in_app:i})}},void 0,n()(g.FormattedMessage,{id:"openInDesktopAppPopup.openInAppButton",[U]:"Open in app",[E]:{strongtext:e=>n()("strong",{},void 0,e)}}))))})}},7811:(e,t,i)=>{i.r(t),i.d(t,{default:()=>tt});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(83355),d=i(3909),c=i(89101),u=i(82990),m=i(5366),p=i(50906),g=i(54564),h=i(47307),v=i(88428),f=i(5978),y=i(12359),b=i(43250),S=i(34859),w=i(79315),M=i(88632),k=i(56638),C=i(88923),Z=i(50795),T=i(42922),P=i(64921),I=i(57770),F=i(68785),_=i(40721),x=i(53953),A=i(44532),B=i(18647),D=i(89302),E=i(31792),L=i(14694);const R=i(85).dMt,N=i(85).Mm1,O=i(85).eGy,U=i(85).ChN,V=i(85).XCs,W=i(85).jkI,K=i(85).H1U,z=i(85).sM5,G=i(85).jcd,H=i(85).xXv,q=i(85).T4J,j=i(85).W1o,Q=i(85).QmD,J=i(85).Gnd,$=i(85).Wp_,Y=i(85).i7F,X=i(85).WCo,ee=i(85).UpL,te=i(85).wgE,ie=i(85).P0R,oe=i(85).lsp,ne=i(85).i33,ae=i(85).M82;class se extends l.Z{constructor(){super(...arguments),this.storeTypes={[ae]:E.Z,labelMouseStore:E.Z},this[ne]=()=>{const{[oe]:e}=this[ie];p.trackToggleTemplateSection(this[te],{section_name:e[ee],action:this[X]()?"close":"open"}),this[X]()?v.hideSection(e[ee]):v.openSection(e[ee])},this[Y]=()=>this[J][ae][$]({...this[J][ae][Q],[j]:!0}),this[q]=()=>this[J][ae][$]({...this[J][ae][Q],[j]:!1}),this.handleLabelMouseMove=()=>{const{labelMouseStore:e}=this[J];e[$]({...e[Q],[j]:!0})},this.handleLabelMouseLeave=()=>{const{labelMouseStore:e}=this[J];e[$]({...e[Q],[j]:!1})}}renderComponent(){const{renderSection:e}=this[ie],t=!this[X]();return s()("div",{onMouseMove:this[Y],onMouseLeave:this[q],style:this[H]()},void 0,this.renderLabel(),!t&&e())}renderLabel(){const e=!this[X]();return s()(L.Z,{disableMobileBorder:e,shouldShowMobileMarginBottom:e,style:this[G](),childrenStyle:{overflow:"visible"}},void 0,s()("div",{style:{[z]:"flex",[K]:W}},void 0,s()(P.Z,{onClick:this[ne],onMouseMove:this.handleLabelMouseMove,onMouseLeave:this.handleLabelMouseLeave,style:this.getLabelButtonStyle()},void 0,!Boolean(this[ie].forceOpen)&&d.Z.triangle(this.getArrowStyle()),s()("span",{style:this.getToggleButtonStyle()},void 0,this[ie].icon&&s()("span",{style:{[V]:4,[z]:"inline-block"}},void 0,this[ie].icon),this[ie][oe].name))))}[X](){const{[oe]:e,expandedSections:t}=this[ie];return!!t&&-1!==t.indexOf(e[ee])}[G](){return{minHeight:24,padding:0}}getSectionLabelStyle(){return{lineHeight:1,marginBottom:1,color:this.theme.sidebarTextColor,[U]:u.Z[U].semibold,marginLeft:9}}[O](){return{lineHeight:1,color:this.theme.sidebarTextColor,[U]:u.Z[U].semibold,marginLeft:9}}getLabelButtonStyle(){return{[z]:"flex",[K]:W,[N]:12,paddingTop:12,paddingLeft:25,...this[ie].isMobile&&{marginBottom:8},width:"100%"}}getToggleButtonStyle(){const{labelMouseStore:e}=this[J],{[j]:t}=e[Q];return{...this[ie].isMobile?this[O]():this.getSectionLabelStyle(),color:t?this.theme.regularTextColor:this.theme.mediumTextColor,transition:"color 100ms ease-out"}}[H](){const e=!this[X](),{first:t}=this[ie];return{...t?{borderTop:`1px solid ${this.theme[R]}`}:{},borderBottom:`1px solid ${this.theme[R]}`,width:"100%",[N]:e?0:10}}getArrowStyle(){return{width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:`rotateZ(${this[X]()?180:90}deg)`,fill:this.theme.regularIconColor}}}se.displayName="PageTemplateToggleButton";const re=se,le=i(85).AIq,de=i(85)._Fe,ce=i(85).S9$,ue=i(85).NF1,me=i(85).rps,pe=i(85).$bT,ge=i(85).EMU,he=i(85).Je3,ve=i(85).wuN,fe=i(85).tge,ye=i(85).tDk,be=i(85).Y0v,Se=i(85).B8U,we=i(85).ChN,Me=i(85).gdQ,ke=i(85).Au,Ce=i(85).Scd,Ze=i(85).Q1R,Te=i(85).fCB,Pe=i(85).R96,Ie=i(85).Wqi,Fe=i(85).D7I,_e=i(85).$P$,xe=i(85).UpL,Ae=i(85).PG2,Be=i(85).PXg,De=i(85).qJ8,Ee=i(85)._lc,Le=i(85).dLQ,Re=i(85).Y7T,Ne=i(85).GiO,Oe=i(85).IzA,Ue=i(85).UwW,Ve=i(85).wgE,We=i(85).Hpf,Ke=i(85).F7w,ze=i(85).Gnd,Ge=i(85).J$i,He=i(85).BQ6,qe=i(85).iVN,je=i(85).NlW,Qe=i(85).xYh,Je=i(85).Sjp,$e=i(85).nx5,Ye=i(85).QmD,Xe=i(85).sKj;class et extends l.Z{constructor(){super(...arguments),this.storeTypes={[Xe]:Z.$},this.renderMobilePopup=()=>{const e=k.Z[Ye];if(e.open)return s()(_.default,{title:s()(m.FormattedMessage,{[$e]:"Try this template",id:"pageTemplateModal.mobileModal.title"}),left:s()(_.CancelMenuText,{}),onClickLeft:this[Je],right:e[Qe]?s()(F.Z,{}):s()(m.FormattedMessage,{[$e]:"Use",id:"pageTemplateModal.mobileModal.useButton.label"}),[qe]:this.handleUseTemplateClick,forceFullScreenSlideUp:!0},void 0,this[je](e))},this.renderModal=()=>{const e=k.Z[Ye];if(e.open)return s()("div",{[He]:et.modalStyle,className:b.pageTemplateModal},void 0,this[je](e),this.renderSidebar(e))},this[Je]=async()=>{const{[Ge]:e}=this[ze][Xe][Ye];if(e[Ke]){await this[We]()?this.accept(!0):this.close()}else this.close()},this.handleUseTemplateClick=async()=>{const{[Ge]:e}=this[ze][Xe][Ye];if(e[Ke]){await this[We]()?this.accept(!0):this.accept(!1)}else this.accept(!1)},this.handleItemClick=async e=>{const{[Ge]:t}=this[ze][Xe][Ye];if(t[Ke]){await this[We]()?this.accept(!0):this.setCurrentItem(e)}else this.setCurrentItem(e);p.trackTemplateModalItemClick(this[Ve],{[Ue]:e.name,page_prepopulated_template_id:e[Oe]})}}willMountOrUpdate(){const e=k.Z[Ye],{[Ne]:t}=w.default[Ye];e.open&&t&&y.createAndCommit({userAction:"PageTemplateModal.willMountOrUpdate",[Ve]:this[Ve],perform:i=>{v.setTemplateVisited({item:e.item,[Re]:t,transaction:i})}})}renderComponent(){const{device:e}=this[Ve],t=k.Z[Ye];return e[Le]?s()(A.GI,{open:t.open,render:this.renderMobilePopup,forceFullScreenSlideUp:!0,onDismiss:this[Je],popupType:e[Le]?A.GI[Ee].SlideUp:A.GI[Ee].Popup}):s()(x.Z,{open:t.open,render:this.renderModal,onDismiss:this[Je]})}renderSidebar(e){const{[Ne]:t,[De]:i}=w.default[Ye];if(!t||!i)return;const o=v.getExpandedSections();return s()("div",{[He]:this.getSidebarStyle()},void 0,s()(T.Z,{isLarge:!0,[Ae]:this.handleUseTemplateClick,[He]:et.useTemplateButtonStyle,disabled:e[Qe]||!M.Z[Ye].online},void 0,e[Qe]&&s()(F.Z,{isWhite:!0,[He]:{[Be]:6}}),s()(m.FormattedMessage,{[$e]:"Use this template",id:"pageTemplateModal.useTemplateButton.label"})),s()(B.Z,{[He]:et.scrollerStyle,type:S.Z.Y},void 0,e.sections.map(((a,l)=>s()(re,{[Le]:!1,section:a,expandedSections:o,[Ie]:i,[Re]:t,showAddPageButton:!1,first:0===l,[Pe]:()=>s()(r.Fragment,{},void 0,a.items.map(((t,i)=>{const o=e.item[Oe]===t[Oe],a=o?this[_e]():{};return r[Fe](P.Z,n()({hovered:o,[He]:a,key:i},this.props,{[Ae]:()=>this.handleItemClick(t)}),this.renderSidebarItem(t))})))},a[xe]))),s()(P.Z,{[Ae]:()=>{p.trackBrowseMoreTemplatesLink(this[Ve]),f[Te]({[Ve]:this[Ve],url:c._j[Ze]})},[He]:this.fixedLinkStyle(),[Me]:{[Ce]:this[ke].sidebarHideButtonHoveredBackground},pressedStyle:{[Ce]:this[ke].sidebarHideButtonPressedBackground}},void 0,d.Z.typesRelation(this.fixedLinkIconStyle()),s()(m.FormattedMessage,{[$e]:"Browse more templates",id:"pageTemplateModal.goToFullTemplateGalleryButton.label"}))))}renderSidebarItem(e){return s()(L.Z,{[He]:{paddingLeft:30,[we]:u.Z[we].semibold},icon:s()("div",{[He]:this[Se]()},void 0,s()(I.Z,{size:20,emoji:e.emoji}))},void 0,e.name)}[je](e){const{device:t}=this[Ve];return s()(D.Z,{[be]:e.item[be],isFrontPage:!1,[He]:t[Le]?et.previewMobileStyle:et.previewStyle,[Xe]:this[ze][Xe],disabled:!0},e.item[be])}accept(e){const{[Ge]:t}=this[ze][Xe][Ye],i=k.Z[Ye],{[Ne]:o,[De]:n,[ye]:a}=w.default[Ye];if(i.open&&o&&n){const s=a&&a.isEmptyPage()?a:void 0,r=C.default[Ye].open&&C.default[Ye].target&&C.default[Ye].target.isEmptyPage()?C.default[Ye].target:void 0;v.accept({[Ve]:this[Ve],item:i.item,[Ie]:n,[Re]:o,useRecordCache:e?t:void 0,initializeStore:i.createNewPage?void 0:s||r,isPrivate:i.isPrivate,from:i.createNewPage?"sidebar":"newPage"})}}close(){v.close(this[Ve]),g[fe]()}setCurrentItem(e){k.Z[Ye].open&&v.previewItem({templateItem:e,currentUserId:this[Ve].currentUser.id})}[We](){return new Promise(((e,t)=>{h.showDialog({message:s()(m.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.prompt",[$e]:"It looks like you've modified the template. Would you like to save your edits?"}),showCancel:!1,keepFocus:!0,items:[{label:s()(m.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.saveButton.label",[$e]:"Save edits"}),onAccept:()=>{e(!0)}},{label:s()(m.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.discardEditsButton.label",[$e]:"Discard"}),color:"red",onAccept:()=>{e(!1)}}]})}))}getSidebarStyle(){return{width:et.sidebarWidth,color:this[ke][ve],[Ce]:"dark"===this[ke].mode?this[ke][he]:this[ke].sidebarBackground,display:ge,[pe]:me,borderTopRightRadius:et[ue],[ce]:et[ue]}}[Se](){return{color:this[ke][de],position:"relative"}}[_e](){return{color:this[ke][de],[we]:u.Z[we].medium}}fixedLinkStyle(){return{padding:12,color:this[ke][ve],[Ce]:"dark"===this[ke].mode?this[ke][he]:this[ke].sidebarBackground,fontSize:13,[we]:u.Z[we].medium,display:ge,alignItems:"center",position:"absolute",bottom:0,right:0,height:45,width:et.sidebarWidth,borderTop:`1px solid ${this[ke].regularDividerColor}`}}fixedLinkIconStyle(){return{width:12,height:12,marginLeft:8,[Be]:10,marginBottom:0,fill:this[ke].regularIconColor,[we]:u.Z[we].medium}}}et.displayName="PageTemplateModal",et.sidebarWidth=240,et[ue]=3,et.modalStyle={display:ge,width:"85vw",height:"85vh",[ue]:et[ue]},et.useTemplateButtonStyle={position:"relative",marginTop:16,marginLeft:20,[Be]:20,marginBottom:16,whiteSpace:"nowrap"},et.previewStyle={width:`calc(100% - ${et.sidebarWidth}px)`,flexGrow:1,[le]:1,display:ge,[pe]:me,overflow:"hidden"},et.previewMobileStyle={width:"100%",flexGrow:1,[le]:1,display:ge,[pe]:me,overflow:"hidden"},et.scrollerStyle={flexGrow:1,[le]:1,paddingBottom:44};const tt=(0,m.injectIntl)(et)},57806:(e,t,i)=>{i.r(t),i.d(t,{PermissionsInviteBase:()=>Ce,default:()=>Ze});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(83355),u=i(8848),m=i(94044),p=i(5366),g=i(50906),h=i(95209),v=i(21325),f=i(43250),y=i(87279),b=i(75472),S=i(65598),w=i(33665),M=i(8323),k=i(23537),C=i(29987),Z=i(85834),T=i(1903),P=i(29677),I=i(39098),F=i(78140),_=i(40721),x=i(72495),A=i(83182),B=i(7567),D=i(44385),E=i(24145),L=i(43579);const R=i(85).sqI,N=i(85).t2y,O=i(85).Mm1,U=i(85).h8z,V=i(85).UPJ,W=i(85).$bT,K=i(85).PXg,z=i(85).vhD,G=i(85).X9J,H=i(85).pkR,q=i(85).XF5,j=i(85).H1U,Q=i(85).EMU,J=i(85).sM5,$=i(85).XNW,Y=i(85).P3s,X=i(85).D7I,ee=i(85).Zjg,te=i(85).SA1,ie=i(85).fmZ,oe=i(85).nx5,ne=i(85).YBg,ae=i(85).Ut2,se=i(85).ftM,re=i(85).C$B,le=i(85).Gnd,de=i(85).c_6,ce=i(85).lGJ,ue=i(85).cav,me=i(85).DL8,pe=i(85).Jy7,ge=i(85).h0C,he=i(85).HI,ve=i(85).OSs,fe=i(85).QmD,ye=i(85).XtO,be=i(85).wgE,Se=i(85).dLQ,we=i(85).P0R,Me=i(85).EIp,ke=i(85).qJT;class Ce extends c.Z{constructor(){super(...arguments),this[ke]=this[Me]((()=>Boolean(this[we][ke]&&!this[be].device[Se]))),this.inviteOrigin=this[Me]((()=>this[we][ye]instanceof I.G?this[ke][fe]?"page_share_modal":"page_permission_modal":"space_share_modal")),this.defaultRoleForSpaceBot=this[Me]((()=>ve)),this[he]=this[Me]((()=>{const{[ye]:e,[ge]:t}=this[we];return b.xT({[be]:this[be],[ye]:e,[ge]:t})})),this.inputDebounce=void 0,this.storeTypes={[pe]:T.Z,[me]:Z.ZP},this[ue]=()=>{h[ue]({[be]:this[be],upgradeButtonName:this[we].upgradeButtonName,[ce]:this[we][ce]})},this[de]=async()=>{await h[de]({[be]:this[be],[pe]:this[le][pe],from:"share_menu"})},this[re]=async e=>{var t;null===(t=this.inputDebounce)||void 0===t||t.cancel(),this.inputDebounce=l().debounce((()=>{g.trackInviteTyped(this[be],{invite_flow_id:this[le][pe][fe].flowId,[se]:(0,M.getSubscriptionTier)(),invite_origin:this.inviteOrigin[fe]})}),1e3),this.inputDebounce(),await h[re]({[be]:this[be],event:e,[pe]:this[le][pe]})},this[ae]=e=>{h[ae]({targetToRemove:e,[pe]:this[le][pe],[he]:this[he][fe]})}}async willMount(){await v.refresh(this[be])}willUnmount(){var e;null===(e=this.inputDebounce)||void 0===e||e.flush()}renderComponent(){if(this[ke][fe])return this.renderComponentInShareMenu();const e=this.renderHeader(),t=this.renderSearchRequest();return this.renderComponentOriginal(e,t)}renderHeader(){const{[pe]:e}=this[le],{device:t}=this[be];return s()(E.Z,{[pe]:e,[ye]:this[we][ye],[ae]:e=>{this[ae](e)},[re]:async e=>{await this[re](e)},handleInputSubmit:async()=>{await this[ne]()},origin:Boolean(this[ke][fe])?"share_menu":"share_modal",[he]:this[he][fe],isTeamsEnabled:(0,k.bq)(),right:!t[Se]&&this.renderDesktopInputRightInner(),focus:"invitee"===e[fe].inputFocus||"invitee-popup-closed"===e[fe].inputFocus,handleFocus:()=>{t[Se]||e.setState({...e[fe],inputFocus:"invitee"})}})}renderSearchRequest(){const{[pe]:e}=this[le],t=(0,S.isBlockStore)(this[we][ye]),i=(0,S.isBlockStore)(this[we][ye]);return s()(L.Z,{[pe]:e,[ye]:this[we][ye],defaultRoleForSpaceBot:this.defaultRoleForSpaceBot[fe],shouldShowBots:t,shouldShowGroups:i,sectionRenderLimit:this[ke][fe]?5:10,membersOnly:this[we].membersOnly})}renderComponentOriginal(e,t){const{device:i}=this[be];let o;return o=i[Se]?{menuType:y.og.Modal,title:(0,S.isSpaceStore)(this[we][ye])?s()(p.FormattedMessage,{id:"inviteUserModal.addMemberMenu.title",[oe]:"Add members"}):s()(p.FormattedMessage,{id:"inviteUserModal.invitePersonMenu.title",[oe]:"Invite a person"}),right:s()("div",{style:{color:u.ZP.blue}},void 0,s()(p.FormattedMessage,{id:"inviteUserModal.mobile.inviteButton.label",[oe]:"Invite"})),left:s()(_.CancelMenuText,{}),onClickLeft:this[de],onClickRight:async()=>{await this[ie]()},header:e}:{menuType:y.og.Popup,width:480,height:"60vh",header:e,tokenInputHeader:!0,footer:this[te](),disableScroller:!1},d[X](F.Z,n()({},o,{className:f.inviteModal}),i[Se]&&s()(x.Z,{title:s()(p.FormattedMessage,{id:"inviteUserModal.permissionLevel.title",[oe]:"Permission level"})},void 0,this[ee]()),s()("div",{},void 0,t),i[Se]&&this[te]())}[te](){return this[ke][fe]?null:s()(x.Z,{topBorder:!0,disableDesktopPadding:!0},void 0,s()(A.Z,{title:s()(p.FormattedMessage,{id:"inviteUserModal.helpButton.caption",[oe]:"Learn how to invite people and set permissions"}),href:(0,w.getLocalizedUrl)("guides.invitePerson"),[Y]:"invite_person"}))}renderDesktopInputRightInner(){return s()("div",{style:{[$]:m.p_,[J]:Q,[j]:"center"}},void 0,this[ee](),!this[ke][fe]&&this[q]({isLarge:!0}))}[q](e){const{isLarge:t}=e;return s()(D.Z,{[ye]:this[we][ye],[pe]:this[le][pe],[ue]:()=>this[ue](),[ie]:()=>this[ie](),[H]:this[we][H],isLarge:t})}[ee](){const{device:e}=this[be],{[ye]:t}=this[we],{[pe]:i}=this[le];if(i[fe][G]||!(0,P.ow)(i[fe]))return s()(B.ZP,{[H]:(0,S.isSpaceStore)(t)&&!t.canAdmin(),role:i[fe].inviteRole,table:i[fe].table,type:z,blockType:(0,S.isBlockStore)(t)?t.getType():void 0,isInvite:!0,[ce]:this[we][ce],upgradeButtonName:this[we].upgradeButtonName,buttonStyle:{[J]:Q,whiteSpace:"nowrap",height:26,color:u.ZP.uiGray,...this[ke][fe]&&{marginTop:e[Se]?4:i[fe][G]?1:6,marginBottom:e[Se]?4:i[fe][G]?1:6,[K]:0}},isMenuItem:e[Se],onChange:e=>{h.handleRoleSelectChange({[be]:this[be],newRole:e,[pe]:this[le][pe]})}})}renderComponentInShareMenu(){const e={menuType:y.og.Popup,header:s()("div",{style:{[J]:Q,[W]:"row",[V]:U,[j]:"top",[$]:12,[K]:12,gap:10}},void 0,this.renderHeader(),this[q]({isLarge:!0})),footer:this[te](),disableScroller:!1};return s()("div",{style:{paddingTop:14,[O]:14,paddingLeft:2,paddingRight:2}},void 0,d[X](F.Z,e,this.renderSearchRequest()))}async[ne](){await this[ie]()}async[ie](){const e=C.default.mark(N);await h[ie]({[be]:this[be],[ye]:this[we][ye],[R]:this[we][R],[pe]:this[le][pe],[me]:this[le][me],onInviteClick:this[we].onInviteClick,onInviteComplete:this[we].onInviteComplete,inviteOrigin:this.inviteOrigin[fe],intl:this[we].intl}),C.default.measure(e,{[be]:this[be]})}}Ce.displayName="PermissionsInviteBase";const Ze=(0,p.injectIntl)(Ce)},44385:(e,t,i)=>{i.d(t,{e:()=>Z,Z:()=>T});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(5366),u=i(94044),m=i(47425),p=i(67669),g=i(75472),h=i(8323),v=i(26781),f=i(25464),y=i(42922),b=i(58032);const S=i(85).UcR,w=i(85).D7I,M=i(85).nx5,k=i(85).H6e,C=i(85).Jy7;function Z(){window.__c={n:"GuestLimitTooltip"};const e=(0,d.VK)((()=>(0,m.tP)((0,h.getSubscriptionTier)())),[]);return r[w](r.Fragment,null,s()("div",{},void 0,s()(c.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine1",[M]:"Your plan allows up to {guestLimit} unique guests.",values:{[S]:e}})),s()("div",{},void 0,s()(c.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine2",[M]:"Upgrade to go unlimited."})))}const T=function(e){window.__c={n:"PermissionsInviteButton"};const{store:t,[C]:i,handleUpgradeClick:o,handleInviteClick:a,isLarge:m}=e,h=(0,l.O7)(),[S]=(0,d.AF)(i),T=(0,d.VK)((()=>S[k].some((e=>g.OA(e)))),[S]),P=(0,v.i)(t),I=(0,d.VK)((()=>{const e=S[k],t=e.filter((e=>{let{type:t}=e;return"newUser"===t})).map((e=>{let{value:t}=e;return t.email})),i=e.filter((e=>{let{type:t}=e;return"existingUser"===t})).map((e=>{let{value:t}=e;return t.id}));return p.isOverGuestLimit(h,[...t,...i])}),[h,S]),F=T?P:void 0;return s()(b.Z,{alignment:f.v.Center,disableTooltip:!(I||F),renderTooltip:()=>I?s()(Z,{}):F,render:e=>r[w](y.Z,n()({isLarge:m,style:{minWidth:u.UF},disabled:Boolean(F),onClick:I?o:a},e),s()(c.FormattedMessage,I?{id:"inviteUserModal.inviteButton.upgradeLabel",[M]:"Upgrade"}:{id:"inviteUserModal.inviteButton.label",[M]:"Invite"}))})}},7378:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});var o=i(77094),n=i.n(o),a=i(97464),s=i.n(a),r=i(67294),l=i(83355),d=i(41892),c=i(5366),u=i(21325),m=i(93678),p=i(75472),g=i(65598),h=i(8323),v=i(1903),f=i(78291),y=i(42922),b=i(9019),S=i(58032),w=i(57806),M=i(60442);const k=i(85).iy2,C=i(85).wJk,Z=i(85).Joh,T=i(85).ELX,P=i(85).e4n,I=i(85).$ig,F=i(85).nx5,_=i(85).pxq,x=i(85).c_6,A=i(85).h0C,B=i(85).GjR,D=i(85).lGJ,E=i(85).wgE,L=i(85).cav,R=i(85).D7I,N=i(85).Gnd,O=i(85).P0R,U=i(85).Jhh,V=i(85).Jy7;class W extends l.Z{constructor(){super(...arguments),this.storeTypes={[V]:v.Z},this[U]=()=>r[R](w.default,s()({},this[O],{[V]:this[N][V]})),this[L]=()=>{m.y(this[E],{from:this[O].upgradeButtonName,for:"plus"}),this[O][D]&&this[O][D]()},this[B]=()=>{(0,p.z5)({[E]:this[E],[V]:this[N][V],store:this[O].store,renderInShareModal:!1,[A]:this[O][A]})},this[x]=async()=>{const{[V]:e}=this[N];await(0,p.Aw)({[E]:this[E],permissionsInviteStoreState:e.state,from:(0,g.isSpaceStore)(this[O].store)?"space_share_modal":"page_share_modal"})||e.reset()}}async willMount(){await u.refresh(this[E])}renderComponent(){const{store:e}=this[O],{modalOpen:t}=this[N][V].state;let i,o,a=!1;return e[_]()?e[_]()&&(0,g.isSpaceStore)(e)&&f.default.state.data&&!h.isMultiplayerEnabled()?(i=!1,a=!0,o=n()(M.Z,{imageURL:d.Z.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:n()(c.FormattedMessage,{[F]:P,id:"permissionsInvite.spaceAddMemberUpgradeTooltip.caption"}),title:n()(c.FormattedMessage,{[F]:"Upgrade to add members",id:"permissionsInvite.spaceAddMemberUpgradeTooltip.title"})})):i=!0:(i=!1,o=(0,g.isSpaceStore)(e)?n()(c.FormattedMessage,{id:"inviteUserButton.tooltip.adminsOnlyMessage",[F]:"Only admins can add members."}):n()(c.FormattedMessage,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",[F]:I})),n()("div",{},void 0,(0,g.isSpaceStore)(e)?n()(b.Z,{open:t,[C]:this[x],[k]:this[U],origin:n()(S.Z,{[Z]:()=>o,disableTooltip:i,render:e=>r[R](y.Z,s()({isLarge:!0,onClick:a?this[L]:this[B],disabled:!i&&!a,style:{flex:this[O].shouldGrow?1:0,...this[O][T]}},e),n()(c.FormattedMessage,{id:"inviteUserButton.addMemberLabel",[F]:"Add members"}))})}):n()(b.Z,{open:t,[C]:this[x],[k]:this[U],origin:null}))}}W.displayName="PermissionsInviteWithModal";const K=(0,c.injectIntl)(W)},79627:(e,t,i)=>{i.r(t),i.d(t,{default:()=>rt});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(83355),d=i(480),c=i(81954),u=i(24405),m=i(41892),p=i(8848),g=i(3909),h=i(89101),v=i(60949),f=i(82990),y=i(5366),b=i(50906),S=i(29974),w=i(97627),M=i(12359),k=i(37181),C=i(36867),Z=i(79315),T=i(4926),P=i(10161),I=i(5188),F=i(49085);class _ extends F.default{getInitialState(){return{open:!1,step:"prompt"}}}const x=new _;var A=i(12768),B=i(23063),D=i(42922),E=i(64921),L=i(28451),R=i(3386),N=i(89728),O=i(44532),U=i(42402),V=i(29551),W=i(38294);const K=i(85).H8E,z=i(85).Y9u,G=i(85).Q1R,H=i(85).tjc,q=i(85)._Fe,j=i(85).UPJ,Q=i(85).lWm,J=i(85).bAu,$=i(85).PYH,Y=i(85).t_Q,X=i(85).I3e,ee=i(85)._gx,te=i(85).tLG,ie=i(85).fBv,oe=i(85).UVY,ne=i(85).ypd,ae=i(85).Bgg,se=i(85).Rbl,re=i(85).AEP,le=i(85).rpY,de=i(85).LCr,ce=i(85).n7h,ue=i(85).Und,me=i(85).Hgp,pe=i(85).nxU,ge=i(85).Drs,he=i(85).JJj,ve=i(85).$bX,fe=i(85).Ubh,ye=i(85).TKT,be=i(85).VXW,Se=i(85).gdQ,we=i(85).yzD,Me=i(85).Scd,ke=i(85).oSF,Ce=i(85).PG2,Ze=i(85).KL9,Te=i(85).SPm,Pe=i(85).tdR,Ie=i(85).eLV,Fe=i(85).wYB,_e=i(85).kVk,xe=i(85).Wp_,Ae=i(85).c9r,Be=i(85).nLZ,De=i(85).OTW,Ee=i(85).BNt,Le=i(85).Au,Re=i(85).wuN,Ne=i(85).nx5,Oe=i(85).Mm1,Ue=i(85)._V5,Ve=i(85).ChN,We=i(85).Exd,Ke=i(85).e5W,ze=i(85).X_m,Ge=i(85).Jkr,He=i(85).j2G,qe=i(85).lw5,je=i(85).Yvw,Qe=i(85).Q5u,Je=i(85).QmD,$e=i(85).Ryu,Ye=i(85).wgE,Xe=i(85).g65,et=i(85).H1U,tt=i(85).BQ6,it=i(85).jkI,ot=i(85).NDn,nt=i(85).GZ0,at=i(85).omG;class st extends l.Z{constructor(){super(...arguments),this.hasSeenInitial=!1,this.renderMenu=()=>n()(L.P,{calloutId:at},void 0,n()("div",{[tt]:this[nt]()},void 0,this.renderCancel(),n()(V.gq,{[tt]:this[ot](),[et]:it,alignContent:it},void 0,this.renderStep()))),this.renderInitial=()=>{const e=this[Ye][Xe].id;if(!x[Je][$e]||!e)return;this.hasSeenInitial||(b[Qe](this[Ye],{[je]:e,[qe]:He}),this.hasSeenInitial=!0);const{invalidField:t}=x[Je];return n()("div",{[tt]:{...this.getSlideUpStyle(),padding:8}},void 0,n()("img",{[tt]:{[Ge]:40,[ze]:32},src:m.Z[Ke].chatButtonSmallPng}),n()("div",{[tt]:{[We]:14,[Ve]:f.Z[Ve].semibold,[Ue]:0,[Oe]:8}},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.header",[Ne]:"Tell us more about yourself"})),n()("div",{[tt]:{[We]:12,color:this[Le][Re],[Ge]:270,margin:"0 auto"}},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.caption",[Ne]:Ee})),n()("div",{[tt]:{...this[De](),[Be]:10}},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.roleLabel",[Ne]:"What is your role?"})),n()(W.Z,{questionType:Ae,title:n()(y.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.roleLabel",[Ne]:"Role"}),[_e]:x[Je][Ae],[Fe]:"role"===t,onSelect:e=>{x[Je][$e]&&x[xe]({...x[Je],[Ae]:e,step:"initial"})}}),n()("div",{[tt]:this[De]()},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.workLabel",[Ne]:"What kind of work do you do?"})),n()(W.Z,{questionType:"work",title:n()(y.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.workLabel",[Ne]:"Work"}),[_e]:x[Je].work,[Fe]:"work"===t,onSelect:e=>{x[Je][$e]&&x[xe]({...x[Je],work:e,step:"initial"})}}),n()("div",{[tt]:this[De]()},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.questionLabel",[Ne]:Ie})),n()(W.Z,{questionType:"use",title:n()(y.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.useLabel",[Ne]:"Use"}),[_e]:x[Je].use,[Fe]:"use"===t,onSelect:e=>{x[Je][$e]&&x[xe]({...x[Je],use:e,step:"initial"})}}),n()("div",{[tt]:this[De]()},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.companySizeLabel",[Ne]:"Company size"})),n()(V.gq,{},void 0,this[Pe]().map((e=>{let{type:t,[Te]:i,[tt]:o}=e;return n()(N.Z,{isLightGray:!0,isLarge:!0,[tt]:{...this.getBaseButtonStyle(),...x[Je][$e]&&x[Je][Ze]===t&&this.getSelectedButtonStyle(),...o},[Ce]:()=>{x[Je][$e]&&x[xe]({...x[Je],[Ze]:t,step:"initial"})}},void 0,i)}))))},this.renderCancel=()=>n()(E.Z,{[Ce]:this[ke],[tt]:this.getCancelStyle(),[Se]:{[Me]:this[Le][we]}},void 0,g.Z.closeSmall({[Ge]:14,fill:this[Le][Re]})),this.renderThanks=()=>{const e=this[Ye][Xe].id;if(e)return n()(dt,{[be]:e})},this[ye]=()=>{const e=this[Ye][Xe].id;if(e)return n()(lt,{[be]:e})},this[ke]=()=>{const{[fe]:e}=Z.default[Je],t=this[Ye][Xe].id;e&&t&&(b[ve](this[Ye],{[je]:t,[qe]:"cancel"}),M[he]({[ge]:"PersonaCollectionModal.handleCancel",[Ye]:this[Ye],[pe]:t=>{k[me]({[ue]:e,data:{[ce]:!0},[de]:t})}}),x.reset())}}willMountOrUpdate(){var e;if(x[Je][$e])return;const t=this[Ye],i=t[Xe].id,o=(0,C.g)(i),{[fe]:n,inAppCalloutStore:a}=Z.default[Je];if(!n||t.device.isMobile)return;if(o<3)return;const s=n.getSettings();if(!s)return;if(Boolean(s[ce]||(null===(e=s.persona_version)||void 0===e?void 0:e.version)))return;const r="on"===P.default.getEligibleGroup({experimentId:"persona_collection",defaultGroup:"unassigned"});!A.default[Je].isOnboarding&&"closed"!==x[Je].step&&!1===I.Z[Je][$e]&&a.canShow("persona_collection")&&r&&x[xe]({...x[Je],[$e]:!0})}renderComponent(){return n()(O.GI,{keepFocus:!1,[$e]:x[Je][$e],[le]:this.renderMenu,onDismiss:this[ke],popupType:O.kQ.Popup,disableDarkOverlayBackground:!0,disableMouseCapture:!0})}renderStep(){if(!1===x[Je][$e])return;const{step:e}=x[Je];return r.createElement(r.Fragment,null,n()(B.Z,{[ae]:"initial"===e,enterAnimationStyle:{[re]:1},exitAnimationStyle:{[re]:0},[le]:()=>n()(R.Z,{capture:!0,onBackspace:s()[se],onLeft:s()[se],onRight:s()[se],onSelectAll:s()[se],onRedo:s()[se],onUndo:s()[se],onCut:s()[se],onCopy:s()[se],onPaste:s()[se],onKeypress:s()[se],onDelete:s()[se],onTab:s()[se]},void 0,this.renderInitial())}),n()(B.Z,{[ae]:"prompt"===e,animationStyle:this[ne]("prompt"===e),enterAnimationStyle:this[oe](),exitAnimationStyle:this[oe](),[le]:this[ye]}),n()(B.Z,{[ae]:"thanks"===e,animationStyle:this[ne]("thanks"===e),enterAnimationStyle:this[oe](),exitAnimationStyle:this[oe](),[le]:this.renderThanks}),n()(B.Z,{[ae]:"initial"===e,enterAnimationStyle:{[re]:1},exitAnimationStyle:{[re]:0},[le]:()=>n()(D.Z,{isLarge:!0,[tt]:{[Be]:17,[Ge]:270,[ie]:te,bottom:20},[Ce]:()=>this.handleSubmitClick()},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.sendLabel",[Ne]:"Submit"}))}))}[ee](){if(!x[Je][$e])return X;const{use:e,[Ae]:t,work:i,[Ze]:o}=x[Je];return o?e?t?i?void 0:"work":Ae:"use":"company_size"}[Pe](){return[{type:"1_100",[Te]:n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.1_100Label",[Ne]:"1-100"})},{type:"101_1000",[Te]:n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.101_1000Label",[Ne]:"101-1,000"}),[tt]:{marginLeft:8,marginRight:8}},{type:"1001+",[Te]:n()(y.FormattedMessage,{id:"PersonaCollectionModal.initial.1000PlusLabel",[Ne]:"1,001+"})}]}handleSubmitClick(){const e=this[Ye][Xe].id;if(!x[Je][$e]||!e)return;const t=this[ee]();if(t)return void x[xe]({...x[Je],step:He,invalidField:t});b[ve](this[Ye],{[je]:e,[qe]:"submit"});const{[fe]:i}=Z.default[Je];if(i&&x[Je][$e]){const e=x[Je];if(M[he]({[ge]:"PersonaCollectionModal.handleSubmitClick",[Ye]:this[Ye],[pe]:t=>{k[me]({[ue]:i,data:{[ce]:!0,persona:e.work,team_role:e[Ae],use_case:e.use,source:at,persona_version:{version:"V3",timestamp:(new Date).getTime()}},[de]:t})}}),P.default.checkGate("survey_data_writes")){const t=(new Date).getTime(),i=v.Dh({maybeFunction:e.work,[Y]:4,maybeRole:e[Ae],guessedRoleVersion:2,collectedFrom:"inapp_modal",collectedAt:t});void 0!==i&&w.Q1(this[Ye],i);const o=v.K0({maybeCompanySize:e[Ze],[$]:1,maybeUseCases:[e.use],[J]:3,collectedFrom:"inapp_modal",collectedAt:t});void 0!==o&&S.setSpaceSurveyData(this[Ye],o)}}x[xe]({...x[Je],invalidField:void 0,step:"thanks"}),s().delay((()=>{x.reset()}),6e3)}[nt](){return{[Me]:this[Le].popoverBackground,borderRadius:5,boxShadow:this[Le].mediumBoxShadow,[ie]:"fixed",bottom:65+T.Z[Je],right:16+T.Z[Je]}}getBackgroundStyle(){return{backgroundColor:"transparent",pointerEvents:"none"}}getCancelStyle(){return{[ie]:te,top:"10px",right:"10px",[Me]:this[Le][Q],borderRadius:"100%",[Ge]:20,[ze]:20,display:"flex",[et]:it,[j]:it,zIndex:10}}[ot](){return{[Ge]:320,[ze]:"prompt"===x[Je].step||"thanks"===x[Je].step?200:450,overflow:"hidden",[ie]:"relative",right:"auto",padding:30,[Ue]:0,cursor:"default",textAlign:it,[j]:it}}[De](){return{[Be]:10,[We]:12,color:this[Le][Re],[Ve]:f.Z[Ve].medium,lineHeight:"135%",marginBottom:4,textAlign:"left"}}[ne](e){return{[re]:e?1:0,scale:e?1:.96}}[oe](){return{[re]:0,scale:.96}}getBaseButtonStyle(){return{border:"1px solid #E7E6E5",flexGrow:1,[j]:it}}getSelectedButtonStyle(){return{color:p.ZP.blue,border:`1px solid ${p.ZP.blue}`}}getSlideUpStyle(){if(!x[Je][$e])return{};const{step:e}=x[Je];return{[ie]:te,transition:"transform 200ms ease",transform:"initial"===e?"translateY(0px)":"translateY(-180px)"}}}st.displayName="PersonaCollectionModal";const rt=st;function lt(e){window.__c={n:"PersonaCollectionPrompt"};const[t,i]=(0,c.AF)(x),o=(0,u.yK)((e=>({promptHeaderStyle:{color:e[q],[Ve]:f.Z[Ve].semibold,[We]:14},promptTextStyle:{[We]:12,color:e[Re],[Ge]:270,margin:"0 auto"}})),[]),a=(0,d.O7)();return(0,r.useEffect)((()=>{b[Qe](a,{[je]:e[be],[qe]:"prompt"})}),[a,e[be]]),n()("div",{[tt]:{[Ue]:24}},void 0,n()("img",{[tt]:{[Ge]:40,[ze]:56,[Ue]:24},src:m.Z[Ke].chatButtonSmallPng}),n()("div",{[tt]:o.promptHeaderStyle},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.prompt.header",[Ne]:"Tell us more about yourself"})),n()("div",{[tt]:o.promptTextStyle},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.prompt.caption",[Ne]:Ee})),n()(D.Z,{isLarge:!0,[tt]:{[Be]:6,[Ge]:260,bottom:20},[Ce]:()=>{!0===t[$e]&&i({...t,step:He});const{[fe]:e}=Z.default[Je];e&&M[he]({[ge]:H,[Ye]:a,[pe]:t=>{k[me]({[ue]:e,data:{[ce]:!0},[de]:t})}})}},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.prompt.survey",[Ne]:"Take the 20 second survey"})),n()(N.Z,{isLightGray:!0,isLarge:!0,[Ce]:()=>{const{[fe]:t}=Z.default[Je];t&&e[be]&&(M[he]({[ge]:H,[Ye]:a,[pe]:e=>{k[me]({[ue]:t,data:{[ce]:!0},[de]:e})}}),b[ve](a,{[je]:e[be],[qe]:"skip"}),x[xe]({[$e]:!1,step:X}))}},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.prompt.skipLabel",[Ne]:"Skip"})))}function dt(e){window.__c={n:"PersonaCollectionThanks"};const t=(0,u.yK)((e=>({thanksHeaderStyle:{color:e[q],[Ve]:f.Z[Ve].semibold,[We]:14}})),[]),i=(0,d.O7)();return(0,r.useEffect)((()=>{b[Qe](i,{[je]:e[be],[qe]:"thanks"})}),[i,e[be]]),n()("div",{},void 0,n()("img",{[tt]:{[Ge]:208,[ze]:89,[Ue]:30},src:m.Z[Ke].heroIllustrationPng}),n()("div",{[tt]:t.thanksHeaderStyle},void 0,n()(y.FormattedMessage,{id:"PersonaCollectionModal.thanks.caption",[Ne]:"Thank you! Discover new ways to use Notion in the <textlink>Template Gallery</textlink>",values:{textlink:t=>n()(U.Z,{disableUnderline:!0,disableHover:!0,href:h._j[G],external:!0,[tt]:{color:p.ZP.blue,[We]:f.Z[We][z].desktop,[Ve]:500},[Ce]:()=>{e[be]&&b[ve](i,{[je]:e[be],[qe]:K})}},void 0,t)}})))}},38294:(e,t,i)=>{i.d(t,{J:()=>_,Z:()=>E});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(83355),d=i(8848),c=i(3909),u=i(29091),m=i(5366),p=i(52275),g=i(63296),h=i(14871),v=i(64369);const f=i(85).L97,y=i(85).a3v,b=i(85).dLQ,S=i(85).jkI,w=i(85).H1U,M=i(85).GDw,k=i(85).D7I,C=i(85).wgE,Z=i(85).P0R,T=(i(85).Mxz,i(85).yND),P=(i(85).pu6,i(85).nx5),I=(i(85).nBI,"other"),F={exec:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.exec",[P]:"Executive (C-level / VP)"}),dept_lead:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.dept_lead",[P]:"Department lead"}),team_manager:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.team_manager",[P]:"Team manager"}),member:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.member",[P]:"Team member"}),solo:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.solo",[P]:"Solo-preneur / Freelancer"}),personal:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.personal",[P]:"Using Notion just for myself"})},_={creative:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.creative",[P]:"Creative"}),founderCeo:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.founderCeo",[P]:"Founder / CEO"}),[T]:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.internalCommunication",[P]:"Internal Communication"}),eng:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.eng",[P]:"Engineering"}),productDesign:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.productDesign",[P]:"Product Design"}),projectProgramMgmt:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.projectProgramMgmt",[P]:"Project / Program Management"}),product:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.product",[P]:"Product Management"}),marketing:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.marketing",[P]:"Marketing"}),sales:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.sales",[P]:"Sales"}),support:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.support",[P]:"Customer Service"}),finance:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.finance",[P]:"Finance"}),hr:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.hr",[P]:"Human Resources"}),itAdmin:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.itAdmin",[P]:"IT Admin"}),knowledgeManagement:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.knowledgeManagement",[P]:"Knowledge Management"}),operations:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.operations",[P]:"Operations"}),educator:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.educator",[P]:"Educator"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.other",[P]:"Other"}),student:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.student",[P]:"Student"})},x={student:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.student",[P]:"Student"}),educator:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.educator",[P]:"Educator"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.other",[P]:"Other"})},A={docs:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.docs",[P]:"Collaborate with others in docs"}),wikis:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.wikis",[P]:"Create a knowledge base / wiki"}),notes:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.notes",[P]:"Write notes"}),project:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.project",[P]:"Manage projects"}),goals:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.goals",[P]:"Track company goals and OKRs"}),ai:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.question.ai",[P]:"Write with AI"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.other",[P]:"Other"})},B={"1_49":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.1_49",[P]:"1-49"}),"50_99":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.50_99",[P]:"50-99"}),"100_299":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.100_299",[P]:"100-299"}),"300_999":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.300_999",[P]:"300-999"}),"1000_5000":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.1000_5000",[P]:"1000-5000"}),"5000+":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.5000+",[P]:"5000+"})};class D extends l.Z{renderComponent(){const{question:e,questionType:t,title:i,randomizeSelectionOrder:o,className:a,width:l,placeholder:u}=this[Z],{device:f}=this[C];let T={};"role"===t&&(T=F),"school"===t&&(T=x),"work"===t&&(T=_),"use"===t&&(T=A),"companySize"===t&&(T=B);const I={menuTitle:i,items:this.getPersonaSelectionMessages(T,o,this[C].currentUser.id),width:l||280,disabled:this[Z].disabled||!1,getKey:e=>e,selectedItem:t,originGap:4,onSelect:e=>{this[Z].onSelect(e)},renderItem:e=>r[k](p.Z,n()({title:T[e.key]},e,{className:`${a}-${e.key}`})),renderOrigin:t=>r[k](g.Z,n()({},t,{isLarge:!0,style:{...this[M](),...this[Z].invalid&&{border:`1px solid ${d.ZP.red}`},...this[Z].styles},className:a,focused:this[Z].focus}),s()("div",{style:{display:"flex",[w]:S}},void 0,s()(v.Z,{[b]:f[b],isSecondaryColor:!Boolean(e)},void 0,e?T[e]:u||s()(m.FormattedMessage,{[P]:"Select response",id:"PersonaCollectionModal.selectQuestion.label"}))),c.Z.expand({width:10,fill:this.theme[y]}))};return r[k](h.Z,n()({key:"persona"},I))}[M](){const{device:e}=this[C];return{backgroundColor:this.theme[f],height:e[b]?44:32,padding:"2px 10px",display:"flex",[w]:S,justifyContent:"space-between",borderRadius:3,border:0,transition:"box-shadow 0.3s ease",boxShadow:`0 0 0 1px ${this.theme.outlineButtonBorder}`,background:this.theme.buttonBackground}}getPersonaSelectionMessages(e,t,i){const o=Object.keys(e);if(!t)return o;const n=(0,u.yH)(i);return o.filter((e=>e!==I)).sort((()=>n()-.5)).concat(o.filter((e=>e===I)))}}D.displayName="PersonaCollectionModalQuestionSelect";const E=(0,m.injectIntl)(D)},95482:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ue});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(83355),d=i(8848),c=i(3909),u=i(5366);const m=i(85).nx5,p=i(85).mdb,g=i(85).LfW,h=i(85).phP,v=(0,u.defineMessages)({[h]:{id:"reportPage.reportReasons.phishing_or_spam",[m]:"Phishing or spam"},[g]:{id:"reportPage.reportReasons.inappropriate_content",[m]:"Inappropriate content"},[p]:{id:"reportPage.reportReasons.other_content_policy_violation",[m]:"Other"}});var f=i(7250),y=i(82990),b=i(54642),S=i(47307),w=i(360),M=i(28020),k=i(33929),C=i(87279),Z=i(33665),T=i(88632),P=i(25399),I=i(36488),F=i(74194),_=i(78140),x=i(28992),A=i(32163),B=i(480),D=i(6740),E=i(24405),L=i(46978);const R=i(85).D7I,N=i(85).mPA,O=i(85).bb$,U=i(85).g4H;function V(e){let{name:t,title:i,[U]:o,isSelected:n,onClick:a,disabled:l}=e;window.__c={n:"OptionButton"};const[d,c]=(0,D.Z)(),u=(0,B.Fy)(),m=(0,E.yK)((e=>({root:{position:"relative",display:"flex",alignItems:"center",flex:1,fontSize:14,marginBottom:8,cursor:"pointer",opacity:l?.4:1,...c&&{boxShadow:e[O]}},[U]:{color:e.mediumTextColor,marginLeft:8},[N]:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}})),[l,c]),p=(0,r.useCallback)((()=>{l||a()}),[l,a]);return u.isMobile?s()(x.Z,{title:i,right:s()(L.Z,{isSelected:n}),onClick:p}):s()("label",{style:m.root},void 0,s()(L.Z,{isSelected:n}),s()("div",{},void 0,i),o&&s()("div",{style:m[U]},void 0,o),r[R](N,{type:"radio",checked:n,disabled:l,name:t,onClick:p,style:m[N],ref:d}))}var W=i(63296),K=i(72495),z=i(92660),G=i(74523),H=i(6202);const q=i(85).PXg,j=i(85).nLZ,Q=i(85).UPJ,J=i(85).LR2,$=i(85).pkR,Y=i(85).Lhq,X=i(85).Dd5,ee=i(85).cZW,te=i(85).nm$,ie=i(85).KOz,oe=i(85).X5t,ne=i(85).P3s,ae=i(85).rGB,se=i(85).mdb,re=i(85).LfW,le=i(85).PG2,de=i(85).Zij,ce=i(85).phP,ue=i(85).rpY,me=i(85).Yzm,pe=i(85).ChN,ge=i(85).g7N,he=i(85).tBn,ve=i(85).D7I,fe=i(85).BQ6,ye=i(85).MLn,be=i(85).Exd,Se=i(85).Mm1,we=i(85)._V5,Me=i(85).jkI,ke=i(85).H1U,Ce=i(85).rps,Ze=i(85).$bT,Te=i(85).EMU,Pe=i(85).sM5,Ie=i(85).Wp_,Fe=i(85).i_Y,_e=i(85).irb,xe=i(85).IfY,Ae=i(85).dLQ,Be=i(85).wgE,De=i(85).iy2,Ee=i(85).oSF,Le=i(85).nx5,Re=i(85).qh_,Ne=(0,u.defineMessages)({[Re]:{id:"reportPage.additionalInformation.placeholder",[Le]:"Add additional information (optional)"},dialogLabel:{id:"reportPage.dialogLabel",[Le]:"Report page"}});class Oe extends l.Z{constructor(e){super(e),this[Ee]=()=>{w.q()},this[De]=()=>{const{device:e}=this[Be];if(!T.Z.state.online)return this.renderOffline();const t=P.Z.state;return t.open?e[Ae]?this.renderMobileModal(t):this.renderDesktopModal(t):void 0},this.onSubmit=async()=>{const e=this[Be],t=P.Z.getState();if(!t.open)return;const{[xe]:i,reason:o}=t,n=(0,M.getCurrentPagePointer)();if(!o||null==n||!n.id)return void S[_e](s()(u.FormattedMessage,{[Le]:Fe,id:"reportPageModal.somethingWentWrong.label"}));const a=await(l=(0,f.OP)(),b.reportPage(e,{reason:o,page:n,intercomVisitorId:l,[xe]:i}));var l;"failed"===a.type?S.showError(a):(P.Z[Ie]({open:!1}),S.showMessage({message:r[ve](r[he],null,s()("div",{[fe]:{[Pe]:Te,[Ze]:Ce,[ke]:Me}},void 0,c.Z.thanksShield({width:40}),s()("div",{[fe]:{[we]:12,[Se]:8,[be]:"large",[ye]:Me}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.thanksForReporting",[Le]:"Thanks for reporting this page, our team will take a look."}))))}))},this.modalTitleStyle={[be]:16,[ge]:12,[pe]:y.Z[pe].medium}}renderComponent(){return s()(z.Z,{ariaLabel:k.default[me](Ne.dialogLabel),onDismiss:this[Ee],[ue]:this[De],requireOnline:!0,modalStore:P.Z})}renderOptionButtons(e){const{reason:t}=e;return r[ve](r[he],null,s()(V,{[de]:s()(u.FormattedMessage,{id:"reportPageModal.reportReasons.phishing_or_spam",[Le]:"Phishing or spam"}),isSelected:"phishing_or_spam"===t,[le]:()=>P.Z[Ie]({...e,reason:ce}),name:"report-page-modal"},ce),s()(V,{[de]:k.default[me](v[re]),isSelected:"inappropriate_content"===t,[le]:()=>P.Z[Ie]({...e,reason:re}),name:"report-page-modal"},re),s()(V,{[de]:s()(u.FormattedMessage,{id:"reportPageModal.reportReasons.other_content_policy_violation",[Le]:"Other"}),isSelected:"other_content_policy_violation"===t,[le]:()=>P.Z[Ie]({...e,reason:se}),name:"report-page-modal"},se))}renderMobileModal(e){if(!e.open)return;const{reason:t}=e,i={menuType:C.og.Modal,[de]:s()(u.FormattedMessage,{id:"reportPageModal.mobile.title",[Le]:"Report page"}),right:s()(u.FormattedMessage,{id:"reportPageModal.closeButton.label",[Le]:"Close"}),onClickRight:this[Ee]};return r[ve](_.Z,i,s()(A.Z,{type:A.i.Vertical,initialFocus:void 0,sections:[{key:"help",[ue]:e=>{let{[ae]:t,...i}=e;return r[ve](K.Z,i,t)},items:[{key:"help",[ue]:()=>s()(x.Z,{[de]:s()(G.Z,{[de]:s()(u.FormattedMessage,{id:"reportPage.helpButton.caption",[Le]:"Notion's content policy"}),href:(0,Z.getLocalizedUrl)("contentPolicy"),[ne]:"report_page"}),right:r[ve](r[he],null),[le]:()=>{}}),[oe]:()=>{}}]},{key:"reportOptions",[ue]:e=>{let{[ae]:t,...i}=e;return r[ve](K.Z,i,t)},items:[{key:ie,[ue]:()=>this.renderOptionButtons(e),[oe]:()=>{}},{key:"additionalInfo",[ue]:()=>t&&s()(F.Z,{textarea:!0,[fe]:this.getTextAreaStyle(),focus:Boolean(e.reason),value:e[xe],[ee]:k.default[me](Ne[Re]),[X]:t=>{P.Z[Ie]({...e,[xe]:t[te].value})}}),[oe]:()=>{}}]},{key:Y,[ue]:e=>{let{[ae]:t,...i}=e;return r[ve](K.Z,n()({isSubmitButton:!0},i),t)},items:[{key:"submit",[ue]:e=>{const{[le]:t,...i}=e;return r[ve](H.Z,n()({},i,{[$]:!this.canSubmit(),[de]:s()("div",{[fe]:{color:d.ZP.red}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.reportButton.label",[Le]:"Report"})),[le]:t||this.onSubmit}))},[oe]:this.onSubmit}]}]},"main list"))}canSubmit(){const{state:e}=P.Z;if(e.open){const{reason:t}=e;return void 0!==t}return!1}renderDesktopModal(e){if(!e.open)return;const{reason:t}=e;return s()(I.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,[ue]:()=>s()("div",{[fe]:this[J]()},void 0,s()("div",{[fe]:this.modalTitleStyle},void 0,s()(u.FormattedMessage,{id:"reportPageModal.title",[Le]:"Why are you reporting this page?"})),s()("div",{[fe]:{[Se]:12}},void 0,s()(G.Z,{[de]:s()(u.FormattedMessage,{id:"reportPage.helpButton.caption",[Le]:"Notion's content policy"}),href:(0,Z.getLocalizedUrl)("contentPolicy"),[ne]:"report_page"})),s()("div",{},void 0,this.renderOptionButtons(e)),t&&s()(F.Z,{textarea:!0,[fe]:this.getTextAreaStyle(),focus:Boolean(e.reason),value:e[xe],[ee]:k.default[me](Ne[Re]),[X]:t=>{P.Z[Ie]({...e,[xe]:t[te].value})}}),s()("div",{[fe]:{[Pe]:Te,[Q]:"flex-end",[j]:18}},void 0,s()(W.Z,{isLarge:!0,[le]:this[Ee],[fe]:{[q]:12}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.cancelButton.label",[Le]:"Cancel"})),s()(W.Z,{isRed:!0,isLarge:!0,[le]:this.onSubmit,[$]:!this.canSubmit(),disabledFeedback:!0},void 0,s()(u.FormattedMessage,{id:"reportPageModal.reportButton.label",[Le]:"Report"}))))})}renderOffline(){return s()("div",{[fe]:this.getOfflineStyle()},void 0,s()(u.FormattedMessage,{[Le]:"Please go online to make a report.",id:"reportPageModal.offlineMessage.description"}))}[J](){return{width:360,padding:24,[be]:14}}getOfflineStyle(){return{...this[J](),color:this.theme.mediumTextColor}}getTextAreaStyle(){const{device:e}=this[Be];return{width:"100%",background:this.theme.popoverBackground,[Pe]:"block",padding:e[Ae]?16:"10px 12px",height:e[Ae]?150:130,[j]:17,[ge]:17,[be]:e[Ae]?16:14}}}Oe.displayName="ReportPageModal";const Ue=Oe},18878:(e,t,i)=>{i.d(t,{mo:()=>Z,nH:()=>T,mX:()=>P});var o=i(77094),n=i.n(o),a=i(67294),s=i(81954),r=i(24405),l=i(27006),d=i(97880),c=i(82990),u=i(5366),m=i(34859),p=i(79315),g=i(18647),h=i(65991);const v=i(85).lZS,f=i(85).Tb$,y=i(85).ChN,b=i(85).kOq,S=i(85).nx5,w=i(85).RLV,M=i(85).fVq,k=i(85).g7N,C=i(85).tDk;function Z(e){window.__c={n:"RestorePermissionEdits"};const{openState:t}=e,{[C]:i,currentSpaceStore:o}=(0,s.VK)((()=>p.default.state),[]),a=(0,r.yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290},editContainer:{marginTop:2,[k]:2,color:e.regularTextColor}})),[]);if(!i||!o)return null;const l=Date.now();return n()(g.Z,{type:m.Z.Y,style:a.scroller},void 0,t.permissionChanges.map(((e,t)=>{let[s,r]=e;const d={timestamp:l,space_id:o.id,type:M,[w]:{before:s,after:r}};return n()("div",{style:a.editContainer},`${s.type}-${t}`,n()(h.Z,{rootStore:i,edit:d}))})))}function T(e){return["remove","restrict"].includes(e.type)?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",[S]:"Restrict access"}):"restoreTeamPermissions"===e.type?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",[S]:"Reset Permissions"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",[S]:"Restore access"})}function P(e){switch(e.type){case"remove":return n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restrict.description",[S]:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:I(e)}});case"restrict":return n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.remove.description",[S]:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return e.permissionChanges.length>0?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restore.description",[S]:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",[S]:"Are you sure you want to restore access?"});case b:return a.createElement(a.Fragment,null,n()("div",{style:{[y]:c.Z[y].semibold,[k]:4}},void 0,n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",[S]:"Are you sure you want to reset permissions to match the teamspace defaults?"})),n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",[S]:"Everyone else who is not part of the teamspace will lose access, including guests."}));default:throw d.unreachable(e)}}function I(e){return(0,l.isUserPermission)(e[f])?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",[S]:"user"}):(0,l.isGroupPermission)(e[f])?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",[S]:"group"}):(0,l.isSpacePermission)(e[f])?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",[S]:"workspace"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",[S]:v})}},77376:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(5366),u=i(93286),m=i(50906),p=i(75079),g=i(78316),h=i(87279),v=i(33665),f=i(35328),y=i(27724),b=i(13713),S=i(80209),w=i(48019),M=i(68894),k=i(78140),C=i(72495),Z=i(83182);const T=i(85).P3s,P=i(85).Yzm,I=i(85).D7I,F=i(85).bSA,_=i(85).h2B,x=i(85).Omf,A=i(85).RKz,B=i(85).nx5,D=(0,c.defineMessages)({filterActions:{[B]:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function E(e){window.__c={n:A};const{hasEditorPermissions:t,isWorkspaceAdmin:i,store:o,onDismiss:n,containerRef:a,query:c,setQuery:v}=e,M=(0,l.O7)(),C=(0,l.MO)(),Z=(0,d.VK)((()=>{var e;return{environment:M,blocks:y.default.state.stores.length?y.default.state.stores:[o],originRect:null===(e=a.current)||void 0===e?void 0:e[x](),publicEditMode:void 0}}),[M,o,a]),T=(0,d.VK)((()=>o[_]()),[o]),[P,B]=(0,r.useState)(void 0),D=(0,r.useCallback)((e=>{const t=y.default.state.stores[0],i=t.getType();if(i){const o=(0,g.getCollectionContextStoreFromBlock)(t),n=(0,p.getCollectionAnalyticsContext)(o)||{};m.trackBlockAction(M,{[F]:e[F],from:"selection_menu",block_id:t.id,block_type:i,is_toggleable:(0,f.isToggleOrToggleableFormatBlockType)(i,t.getFormat()),...n})}e.closeParentMenu&&n()}),[M,n]),E=(0,d.VK)((()=>o.isCollectionView()),[o]),N=!C&&t&&!T&&s()(L,{filter:c,setQuery:v,comboboxAriaProps:P});let O;return O=C?{menuType:h.og.ActionSheet,header:N}:{menuType:h.og.Popup,width:265,header:N},r[I](k.Z,O,s()(w.Z,{filter:c,initialFocus:c?0:void 0,sections:u.Qi,context:Z,onAccept:D,setComboboxAriaProps:B}),!c&&(t||i)&&s()(b.Z,{store:o,isPageMoreButton:!1,hideTopBorder:!1}),!c&&s()(S.Z,{store:o}),!c&&E&&s()(R,{}))}function L(e){window.__c={n:"SelectableHoverMenuHeader"};const{filter:t,setQuery:i,comboboxAriaProps:o}=e,a=(0,l.Fy)(),d=(0,c.useIntl)();return s()(C.Z,{isInput:!0},void 0,r[I](M.ZP,n()({value:t,onChange:e=>i(e.target.value),focus:!a.isMobile||void 0,focusAfterAnimation:!0,placeholder:d[P](D.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0},o)))}function R(){return s()(C.Z,{topBorder:!0},void 0,s()(Z.Z,{title:s()(c.FormattedMessage,{[B]:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,v.getLocalizedUrl)("guides.database"),[T]:"selectable_hover_menu"}))}},30761:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var o=i(77094),n=i.n(o),a=(i(67294),i(480)),s=i(24405),r=i(53953),l=i(47292);const d=i(85).nAm,c=i(85).$bT,u=i(85).NF1,m=i(85).v7C;function p(e){window.__c={n:m};const t=(0,a.Fy)(),i=(0,s.yK)((e=>({modal:{width:t.isMobile?"auto":890,height:t.isMobile?"auto":606,[u]:8}})),[t.isMobile]);return n()(r.Z,{open:e.modalOpened,innerStyle:i.modal,onDismiss:e.onModalClose,render:()=>n()("div",{style:{height:"100%",display:"flex",[c]:"row",[u]:8,overflow:d}},void 0,n()(l.Z,{location:"sidebar-modal"}))})}},72373:(e,t,i)=>{i.r(t),i.d(t,{MembersTabTitle:()=>ur,PeopleRow:()=>dr,SettingToggle:()=>mr,SidebarTeamModal:()=>cr});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(24405),u=i(97880),m=i(82990),p=i(5366),g=i(50906),h=i(93678),v=i(43250),f=i(23537),y=i(92350),b=i(79315),S=i(39098),w=i(48690),M=i(3386),k=i(53953),C=i(76798),Z=i(18647),T=i(24006),P=i(58032),I=i(64369),F=i(29302),_=i(13490),x=i(66957),A=i(30040),B=i(58260),D=i(97464),E=i.n(D),L=i(8848),R=i(3909),N=i(64964),O=i(57688),U=i(12359),V=i(33929),W=i(78122),K=i(63409),z=i(35901),G=i(25464),H=i(42922),q=i(36488),j=i(74194),Q=i(56664),J=i(51923),$=i(93686),Y=i(37708),X=i(38755),ee=i(65426);const te=i(85).XNW,ie=i(85).Yzm,oe=i(85).s9u,ne=i(85).PXg,ae=i(85).tBn,se=i(85).D7I,re=i(85).cfO,le=i(85).NJt,de=i(85).OHs,ce=i(85).Rtp,ue=i(85).nx5,me=(0,p.defineMessages)({editor:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsFull",[ue]:"Teamspace members have full access"},[ce]:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsEdit",[ue]:"Teamspace members can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsComment",[ue]:"Teamspace members can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsView",[ue]:"Teamspace members can view"}}),pe=(0,p.defineMessages)({editor:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsFull",[ue]:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} has full access"},[ce]:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsEdit",[ue]:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsComment",[ue]:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsView",[ue]:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can view"},none:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsNone",[ue]:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} does not have access"}});function ge(e){let{[de]:t}=e;window.__c={n:"TeamSettingsPermissionCard"};const i=(0,c.yK)((()=>({listItem:{padding:0,margin:0},spacer:{height:20,width:"100%"},accessLevelButton:{border:"none"}})),[]),[o,a]=(0,d.AF)(w.Z),s=w.a.Members,l=(0,d.VK)((()=>t.getTeamAccessLevel()),[t]);return r[se](r[ae],null,n()("div",{style:i.spacer}),n()(Y.Ph,{title:n()(p.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.permissions",[ue]:"Permissions"}),rows:[n()(ee._,{currentAccessLevel:l,[de]:t,disabledWithRightChevron:!0,style:i.accessLevelButton},le),n()(he,{[de]:t},re)],onClick:()=>{o.open&&a({...o,tab:s})},itemStyle:i.listItem}))}function he(e){let{[de]:t}=e;window.__c={n:"PermissionsRow"};const i=(0,d.VK)((()=>b.default.state.currentSpaceStore),[]),o=(0,l.O7)(),a=(0,c.yK)((e=>({label:{color:e.regularTextColor,whiteSpace:"normal"},row:{display:"inline-flex",alignItems:"center",marginTop:12,marginBottom:12,paddingRight:15,paddingLeft:15},icon:{[ne]:15}})),[]),s=(0,d.VK)((()=>t.getTeamPermission()||{type:"team_permission",role:"none"}),[t]),u=(0,d.VK)((()=>t.getSpacePermission()||{type:"space_permission",role:"none"}),[t]),{spaceIcon:m,[oe]:p}=(0,d.VK)((()=>{if(!i)return{spaceIcon:void 0,[oe]:void 0};const e=(0,X.rn)(o,i);return{spaceIcon:n()($.p,{disabled:!0,store:i,size:20,style:a.icon}),[oe]:e}}),[i,o,a.icon]),g=(0,d.VK)((()=>n()($.p,{disabled:!0,store:t,size:20,style:a.icon})),[t,a.icon]),h=!(s.role===u.role),v=h?g:m,f=V.default[ie](pe[u.role],{showTeam:h,[oe]:p}),y=V.default[ie](me[s.role]);return n()("div",{style:a.row},void 0,v,n()(I.Z,{isSmall:!0,style:a.label},void 0,h&&r[se](r[ae],null,y,n()("span",{style:{[te]:5,[ne]:5}},void 0,"•")),f))}var ve=i(45660),fe=i(89728),ye=i(91718),be=i(27006),Se=(i(59730),i(26825));i(85).TtP;const we=i(85).FYR,Me=i(85).C7g,ke=i(85).KKT,Ce=i(85).eiN,Ze=i(85).gq0,Te=i(85).bTZ,Pe=i(85).t3q,Ie=i(85).yBp,Fe=i(85).AHb,_e=i(85).NJt,xe=i(85).cfO,Ae=i(85).$VW,Be=i(85).owK,De=i(85).OSs,Ee=i(85).Rtp,Le=i(85).PCZ,Re=i(85).W57,Ne=["none",Re,Le,Ee,De],Oe=[Re,Le,Ee],Ue=[Re,Le,Ee,De],Ve=[De];function We(e){const t=function(e){var t,i;let{teamId:o,[xe]:n}=e;const a=(null===(t=n.find((e=>(0,be.isSpacePermission)(e))))||void 0===t?void 0:t.role)??"none",s=(null===(i=n.find((e=>(0,be.isExplicitBlockTeamPermission)(e)&&e[ke]===o)))||void 0===i?void 0:i.role)??a,r=n.find((e=>(0,be.isExplicitBlockTeamGuestPermission)(e)));return{[Be]:{type:"space_permission",role:a},[Ae]:{type:Me,[ke]:o,role:s},teamOwnerPermission:{type:we,[ke]:o,role:De},...r&&{teamGuestPermission:{type:"explicit_team_guest_permission",[ke]:o,role:r.role}}}}({teamId:e.id,[xe]:e[xe]??[]}),{[Be]:i,[Ae]:o}=t,n={[_e]:[Fe,Ie],[Pe]:[Te,"self_join"],[Ze]:[Fe,"team_owners"]},a={[Be]:ze({roles:Ne,currentRole:o.role}),teamGuestPermission:Oe,[Ae]:Ke({roles:Ue,currentRole:i.role}),teamOwnerPermission:Ve},{[_e]:s,[Pe]:r}=e.settings;return"team_members"===s&&(n[Pe]=[Te],a[Be]=["none"]),"self_join"===r&&(n[_e]=[Ie],n[Ze]=[Fe],a[Be]=a[Be][Ce]((e=>"none"!==e))),e.is_default&&(a[Ae]=[o.role],a[Be]=[o.role]),{settingsOptions:n,permissionItemRoleOptions:a,currentTeamPermissionItems:t}}function Ke(e){let{roles:t,currentRole:i}=e;return t[Ce]((e=>(0,Se.tieredRoleIsGreaterThanOrEqualTo)(e,i)))}function ze(e){let{roles:t,currentRole:i}=e;return t[Ce]((e=>(0,Se.tieredRoleIsLessThanOrEqualTo)(e,i)))}var Ge=i(4708),He=i(87279),qe=i(98742),je=i(52275),Qe=i(31945),Je=i(78140),$e=i(32163),Ye=i(72495);const Xe=i(85).Joh,et=i(85).nQ3,tt=i(85).j7K,it=i(85).y79,ot=i(85).rpY,nt=i(85).KOz,at=i(85).Ie8,st=i(85).ceT,rt=i(85).D7I,lt=i(85).dLQ,dt=i(85).ELX,ct=i(85).BQ6,ut=i(85).nLZ,mt=i(85).g7N,pt=i(85).AEv,gt=i(85).L_E,ht=i(85).AHb,vt=i(85).Xls,ft=i(85).pkR,yt=i(85).g4H,bt=i(85).X5t,St=i(85).icY,wt=i(85).Q1_,Mt=i(85).LCr,kt=i(85).wgE,Ct=i(85).Drs,Zt=i(85).JJj,Tt=i(85).nx5,Pt=i(85).Hxr,It=i(85).gq0,Ft=i(85).T9R,_t=i(85).OHs;function xt(e){let{[_t]:t}=e;window.__c={n:"TeamSecuritySection"};const{teamSettings:i,isInviteToggleVisible:o}=(0,d.VK)((()=>({teamSettings:t[Ft]().getValue(),isInviteToggleVisible:(0,Ge.isTeamInviteLinkMs2Enabled)()})),[t]),a=(0,d.VK)((()=>{const e=t[Ft]().getValue();if(e)return We({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t]);if(!i||!a)return null;const s=[n()(Bt,{[_t]:t,hasMultiInviteAccessOptions:1===a.settingsOptions[It].length,inviteAccess:i[It]},"invite"),n()(At,{[_t]:t,disablePageEdits:i[Pt]},"editSidebar")];return o&&s.push(n()(Dt,{[_t]:t},"toggleInviteLink")),n()(Y.Ph,{title:n()(p.FormattedMessage,{id:"TeamSettingsSecurity.teamspaceSettingsTitle",[Tt]:"Teamspace Security"}),rows:s,hideDividers:!0})}function At(e){window.__c={n:"EditSidebarPermissionRow"};const{[_t]:t,disablePageEdits:i}=e,o=(0,l.O7)(),a=(0,y.TE)(t),s=(0,d.VK)((()=>{var e;return(null===(e=t.getTeamPermission())||void 0===e?void 0:e.role)??"none"}),[t]),c=(0,r.useCallback)((e=>{U[Zt]({[Ct]:"teamsHelpers.changeTeamSetting",[kt]:o,perform:i=>{O.updateTeamSettings({[kt]:o,store:t,update:{[Pt]:e},[Mt]:i})}})}),[o,t]),u=(0,be.canEdit)(s),m=[{[wt]:!0,[St]:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamOwners.title",[Tt]:"Only teamspace owners"}),[bt]:()=>c(!0)}];return u&&m.push({[wt]:!1,[St]:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamMembersAndOwners.title",[Tt]:"Any teamspace member"}),[bt]:()=>c(!1)}),n()(Et,{title:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.title",[Tt]:"Who can edit teamspace sidebar"}),[yt]:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.caption",[Tt]:"Adding, removing, or re-ordering sidebar pages"}),[ft]:a||!u,[vt]:!u||Boolean(i),allOptions:m,optionTooltip:u?void 0:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.settingSelect.whoCanEditTeamPages.teamMemberPermissionTooltip",[Tt]:"Change member permissions to Can edit or Full access to allow teamspace members to edit the sidebar"})})}function Bt(e){window.__c={n:"InvitePermissionRow"};const{[_t]:t,hasMultiInviteAccessOptions:i,inviteAccess:o}=e,a=(0,y.ql)(t),s=(0,l.O7)(),d=(0,r.useCallback)((e=>{U[Zt]({[Ct]:"team.setInviteAccess",[kt]:s,perform:i=>{O.updateTeamSettings({[kt]:s,store:t,update:{[It]:e},[Mt]:i})}})}),[s,t]),c=!a||i;return n()(Et,{title:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.title",[Tt]:"Who can invite teamspace members"}),[ft]:c,optionTooltip:c&&a&&n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembersDisabled.caption",[Tt]:"Change access level to Closed or Private to restrict who can invite teamspace members"}),[vt]:o,allOptions:[{[wt]:ht,[St]:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamspaceMembers.teamMembersAndOwners.title",[Tt]:"Any teamspace member"}),[bt]:()=>d(ht)},{[wt]:"team_owners",[St]:n()(p.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.teamOwners.title",[Tt]:"Only teamspace owners"}),[bt]:()=>d("team_owners")}]})}function Dt(e){window.__c={n:"ToggleInviteLinkRow"};const{[_t]:t}=e,i=(0,l.O7)(),o=(0,d.VK)((()=>f.U2(t)),[t]),a=(0,y.TE)(t),s=(0,c.yK)((()=>({[gt]:{display:"flex",justifyContent:"space-between"},[pt]:{[mt]:5},switcher:{[ut]:5}})),[]);return n()("div",{[ct]:s[gt]},void 0,n()("div",{},void 0,n()(I.Z,{},void 0,n()(p.FormattedMessage,{id:"TeamsecuritySection.inviteLink.label",[Tt]:"Invite Link"})),n()(I.Z,{isSmall:!0,[ct]:s[pt]},void 0,n()(p.FormattedMessage,{id:"TeamsecuritySection.inviteLink.description",[Tt]:"Only users who can invite members can see the invite link"}))),n()("div",{[ct]:s.switcher},void 0,n()(T.Z,{[ft]:a,on:!o,onClick:()=>{U[Zt]({[Ct]:"team.setInviteAccess",[kt]:i,perform:e=>{O.updateTeamSettings({[kt]:i,store:t,update:{disable_invite_link:!o},[Mt]:e})}})}})))}function Et(e){window.__c={n:"SettingSelect"};const{title:t,[yt]:i,[vt]:o,allOptions:a,[ft]:s,optionTooltip:d}=e,u=(0,l.Fy)(),m=(0,c.yK)((e=>({root:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1},divider:{[ut]:14,[mt]:14},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},[dt]:{fontSize:12.5,color:e.mediumTextColor},tooltipWidth:{width:300}})),[]),p=a.find((e=>e[wt]===o));return p?n()("div",{[ct]:m.root},void 0,n()("div",{[ct]:m.title},void 0,t,i&&n()(I.Z,{isSmall:!0,isMultiline:!0,[ct]:{[ut]:1,width:"95%",[mt]:5}},void 0,i)),n()(P.Z,{[ct]:m.tooltipWidth,placement:G.u.Top,alignment:P.Z.Alignment.Start,textWrap:!0,disableTooltip:!d,[Xe]:()=>d,[ot]:e=>r[rt](Qe.ZP,E()({},e,{disablePopup:s,popupType:u[lt]?Qe.Z4.SlideUp:Qe.Z4.Popup,alignmentToOrigin:Qe.vR.End,renderOrigin:t=>r[rt](fe.Z,E()({[ct]:m[dt],[ft]:s},(0,qe.Z)(e,t)),p[St],!s&&R.Z.chevronDown(m.chevron)),[ot]:e=>{let t;t=u[lt]?{[st]:He.og[at]}:{[st]:He.og.Popup,minWidth:150};const i=[{key:nt,[ot]:e=>r[rt](Ye.Z,e),items:a.map((t=>({key:t[wt].toString(),[ot]:e=>r[rt](je.Z,E()({},e,{title:t[St],[yt]:t[yt],checkState:o===t[wt]})),[bt]:()=>{t[bt](),e.close()}})))}];return r[rt](Je.Z,t,n()($e.Z,{type:$e.i[it],[tt]:void 0,[et]:i}))}}))})):null}const Lt=i(85).NLk,Rt=i(85).Eve,Nt=i(85).OzF,Ot=i(85).FTQ,Ut=i(85).P3s,Vt=i(85).iRX,Wt=i(85).TJu,Kt=i(85).pkR,zt=i(85).tBn,Gt=i(85).D7I,Ht=(i(85).I$C,i(85).sOA),qt=i(85).nx5,jt=i(85).BQ6,Qt=i(85).tvI,Jt=i(85).NbQ,$t=i(85).wgE,Yt=i(85).Hxr,Xt=i(85).UXS,ei=i(85).Y4E,ti=i(85).rqG,ii=i(85).UJ4,oi=i(85).p9B,ni=i(85).jGl,ai=i(85).uLp,si=i(85).aIS,ri=i(85).OHs;function li(e){let{[ri]:t}=e;window.__c={n:"TeamSettingsSecurity"};const{currentSpaceStore:i}=(0,d.Kw)(b.default),o=(0,l.O7)(),a=(0,ve.D)(),s="business",c=o.currentUser.id,u=(0,d.VK)((()=>({[si]:{[ai]:(null==i?void 0:i[ni]())??!1,[oi]:t[ni]()},[ii]:{[ai]:(null==i?void 0:i[ti]())??!1,[oi]:t[ti]()},[ei]:{[ai]:(null==i?void 0:i[Xt]())??!1,[oi]:t[Xt]()},[Yt]:{[ai]:void 0,[oi]:t.getDisableTeamPageEdits()}})),[i,t]),m=(0,y.ql)(t),g=(0,d.VK)((()=>(null==i?void 0:i.canAdmin())??!1),[i]);if(!i)return null;if(!c)return null;const h=e=>a&&!u[e][oi],v=e=>{if(h(e))return!1;if(!m)return!1;return!(e=>u[e][ai]&&u[e][oi])(e)||g},f=e=>h(e)&&g,S=e=>{const{[oi]:i,[ai]:n}=u[e],a=!i;O.updateTeamWorkspaceOverrideSetting({[$t]:o,store:t,settingName:e,newTeamSettingValue:mi(a),spaceSettingValue:void 0===n?void 0:mi(n)})},w=e=>{if((e=>u[e][ai])(e))return(e=>u[e][oi])(e)?n()(p.FormattedMessage,{id:"teamSettingsSecurity.basedOnWorkspaceSettings",[qt]:"Based on <underline>workspace settings</underline>",values:{[Jt]:e=>n()("span",{[jt]:{[Qt]:Jt}},void 0,e)}}):n()(p.FormattedMessage,{id:"teamSettingsSecurity.overridesWorkspaceSettings",[qt]:"Overriding <underline>workspace setting</underline>",values:{[Jt]:e=>n()("span",{[jt]:{[Qt]:Jt}},void 0,e)}})},M=n()(ye.Z,{subscriptionTier:s,analyticsName:"team_security_settings",desktopStyle:{display:Ht,marginLeft:8,marginTop:-3}}),k=n()(p.FormattedMessage,{id:"teamSettingsSecurity.setting.businessGateToggleTooltip",[qt]:"Upgrade to Business Plan to change security settings"}),C=[n()(mr,{on:u[si][oi],[Kt]:!v(si),onChange:()=>S(si),shouldTriggerUpsell:f(si),secondCaption:w(si),title:r[Gt](r[zt],null,n()(p.FormattedMessage,{id:"teamSettingsSecurity.setting.shareTitle",[qt]:"Disable public page sharing"}),h("disable_public_access")&&M),tooltip:h("disable_public_access")&&k}),n()(mr,{on:u[ei][oi],[Kt]:!v(ei),onChange:()=>S(ei),shouldTriggerUpsell:f(ei),secondCaption:w(ei),title:r[Gt](r[zt],null,n()(p.FormattedMessage,{id:"teamSettingsSecurity.setting.guestTitle",[qt]:"Disable guests"}),h("disable_guests")&&M),tooltip:h("disable_guests")&&k}),n()(mr,{on:u[ii][oi],[Kt]:!v(ii),onChange:()=>S(ii),shouldTriggerUpsell:f(ii),secondCaption:w(ii),title:r[Gt](r[zt],null,n()(p.FormattedMessage,{id:"teamSettingsSecurity.setting.exportTitle",[qt]:"Disable export"}),h("disable_export")&&M),tooltip:h("disable_export")&&k})];return n()(di,{[ri]:t,toggles:C})}function di(e){let{[ri]:t,toggles:i}=e;window.__c={n:"TeamsSettingsSecurity"};const o=(0,c.yK)((e=>({[Wt]:{marginTop:15,marginBottom:15},spacer:{height:20,width:"100%"}})),[]),a=n()(p.FormattedMessage,{id:"TeamSettingsSecurity.pageSettingsTitle",[qt]:"Page Security"});return r[Gt](r[zt],null,n()(xt,{[ri]:t}),n()("div",{[jt]:o.spacer}),n()(Y.Ph,{title:a,rows:i,hideDividers:!0}),n()(J.Z,{helpCenterLocation:Vt,[Ut]:"teams_learn_more_team_settings_security",[Ot]:o[Wt],message:n()(p.FormattedMessage,{id:"teamSettingsSecurity.learnMore",[qt]:"Learn about teamspace security"})}))}function ci(e){window.__c={n:"RestoreTeamButton"};const t=(0,l.O7)();return r[Gt](r[zt],null,n()(fe.Z,{[jt]:e[jt],icon:e=>R.Z[Rt]({...e,margin:"2px 17px 2px 2px",width:16,height:16}),onClick:()=>(e=>{let{[ri]:i,[Nt]:o}=e;return O.restoreArchivedTeam({[$t]:t,[ri]:i,[Nt]:o,from:"sidebar_team_modal"})})({[Nt]:e[Nt],[ri]:e.teamStoreInstance})},void 0,n()("div",{},void 0,n()(I.Z,{},void 0,n()(p.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamButton",[qt]:"Restore teamspace"})),n()(I.Z,{isSmall:!0,[jt]:{[Lt]:"normal"}},void 0,n()(p.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamCaption",[qt]:"Restoring this teamspace will add it to the sidebar for all teamspace members that were previously added."})))))}function ui(e){window.__c={n:"ArchiveTeamButton"};const t=(0,l.O7)(),i=(0,c.yK)((()=>({archiveLabel:{color:L.ZP.red}})),[]);return r[Gt](fe.Z,E()({[jt]:e[jt],isRed:!0,icon:e=>R.Z[Rt]({...e,margin:"2px 17px 2px 2px",width:16,height:16}),[Kt]:e[Kt],disabledFeedback:e[Kt],onClick:()=>e[Kt]?void 0:async function(e){let{[ri]:t,[$t]:i}=e;await O.archiveTeam({[$t]:i,[ri]:t,from:"sidebar_team_modal"})}({[$t]:t,[ri]:e.teamStoreInstance})},e.tooltipEvents),n()("div",{},void 0,n()(I.Z,{[jt]:i.archiveLabel},void 0,n()(p.FormattedMessage,{id:"teamSettingsSecurity.dangerZone.archiveTeamButton",[qt]:"Archive teamspace"})),n()(I.Z,{isSmall:!0,[jt]:{[Lt]:"normal"}},void 0,n()(p.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.archiveTeamDescription",[qt]:"Removes teamspace from the sidebar for all members"}))))}function mi(e){return e?"disable":"allow"}const pi=i(85).NLk,gi=i(85).ELX,hi=i(85).nm$,vi=i(85).FTQ,fi=i(85).P3s,yi=i(85).D7I,bi=i(85).L7r,Si=i(85).cZW,wi=i(85).Dd5,Mi=i(85).BQ6,ki=i(85).pkR,Ci=i(85).LCr,Zi=i(85).Drs,Ti=i(85).JJj,Pi=i(85).wgE,Ii=i(85).TJu,Fi=i(85).zDZ,_i=i(85).z$9,xi=i(85).L_E,Ai=i(85).qJ8,Bi=i(85).OHs,Di=i(85).nx5,Ei=(0,p.defineMessages)({noDescription:{id:"TeamSettingsGeneral.generalSettings.noDescription",[Di]:"No description"}});function Li(e){let{[Bi]:t}=e;window.__c={n:"TeamSettingsGeneral"};const i=(0,l.O7)(),o=(0,d.VK)((()=>b.default.state[Ai]),[]),a=(0,y.TE)(t),[s,u]=(0,r.useState)(void 0),[m,g]=(0,r.useState)(void 0),h=(0,c.yK)((()=>({[xi]:{maxWidth:_i,marginLeft:4},nameAndIconWrap:{display:"flex",alignItems:"center",marginBottom:0,marginTop:4},icon:{marginRight:7},name:{height:20,background:_i,boxShadow:_i,padding:"0 8px"},[Fi]:{minHeight:20,background:_i,boxShadow:_i,padding:"0 8px",margin:"0 -8px"},updateButton:{marginTop:14},[Ii]:{marginTop:15,marginBottom:15}})),[20]),[v,f]=(0,d.VK)((()=>[t.getName(),t.getDescription()]),[t]);if(void 0===v)return null;const S=v||"",w=f??"",M=w.length>0,k=null==s?void 0:s.trim(),C=null==m?void 0:m.trim(),Z=""===k||(void 0===m||C===w.trim())&&(void 0===s||k===S.trim()),T=n()(p.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.iconAndName.title",[Di]:"Icon and name"}),P=n()("div",{[Mi]:h.nameAndIconWrap},void 0,n()($.p,{[ki]:a,store:t,[Mi]:h.icon,size:20,[wi]:e=>{U[Ti]({[Zi]:"TeamSettingsGeneral.updateIcon",[Pi]:i,perform:i=>{O.updateTeam({store:t,update:{icon:e},[Ci]:i})}})}}),a?n()(I.Z,{},void 0,S):n()(Ri,{value:s??S,[Mi]:h.name,onBlur:e=>{u(e)},[wi]:e=>{u(e)},[ki]:a,[Si]:"Acme Labs"})),F=n()(p.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.description.title",[Di]:bi}),_=V.default.formatMessage(Ei.noDescription),x=a?n()(I.Z,{isMultiline:!0,isSecondaryColor:!M},void 0,M?w:_):n()(Ri,{value:void 0===m?w:m,onBlur:e=>{g(e)},[wi]:e=>{g(e)},[ki]:a,textarea:!0,autosize:!0,[Si]:_,[Mi]:h[Fi]}),A=[r[yi](r.Fragment,null,n()(I.Z,{isSmall:!0},void 0,T),P),r[yi](r.Fragment,null,n()(I.Z,{isSmall:!0},void 0,F),x)];return n()("div",{[Mi]:h[xi]},void 0,n()(Y.Ph,{title:n()(p.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.details",[Di]:"Details"}),rows:A}),!a&&n()(H.Z,{[Mi]:h.updateButton,[ki]:Z,isLarge:!0,onClick:async()=>{if(Z)return;if(k&&k!==S.trim()){if(!(await(0,W.Xg)({[Pi]:i,spaceStore:o,teamName:k})))return}const{performResult:e,serverCommitResult:a}=U[Ti]({[Zi]:"TeamSettingsGeneral.updateNameAndDescription",[Pi]:i,perform:e=>{O.updateTeam({store:t,update:{name:k??S,[Fi]:C??w},[Ci]:e})}});try{await Promise.all([e,a])}catch(s){return}N.oV({label:n()(p.FormattedMessage,{id:"TeamSettingsGeneral.settingsChanged",[Di]:"Updated teamspace details"})})}},void 0,n()(p.FormattedMessage,{id:"teamsWorkspaceSettings.updateButton.label",[Di]:"Update"})),n()("br",{}),n()(ge,{[Bi]:t}),n()(Ni,{[Bi]:t}),n()(J.Z,{helpCenterLocation:"bestPractices",[fi]:"teams_learn_more_team_settings_general",[vi]:h[Ii]}))}function Ri(e){window.__c={n:"EditableInput"};const{value:t,[Mi]:i,onBlur:o,[wi]:a,[Si]:s,[ki]:l}=e,[d,c]=(0,r.useState)(!1),u=(0,r.useRef)(null);return n()(q.Z,{capture:d,render:n=>r[yi](j.Z,E()({textarea:e.textarea,autosize:e.autosize,ref:u,onFocus:e=>{c(!0)},onBlur:e=>{c(!1),o(e[hi].value)},[wi]:e=>{c(!1),a&&a(e[hi].value)},onSubmit:e=>{e[hi].blur()},[Si]:s,[ki]:l,value:t,[Mi]:i},n))})}function Ni(e){let{[Bi]:t}=e;window.__c={n:"MaybeDangerZone"};const i=(0,c.yK)((()=>({[gi]:{alignItems:"center",height:"auto",width:"100%",paddingTop:Y.MQ,paddingBottom:Y.MQ,paddingLeft:Y.oM,paddingRight:Y.oM}})),[]),[o,a]=(0,d.VK)((()=>[t.getName(),t.isArchived()]),[t]),s=(0,d.VK)((()=>b.default.state[Ai]),[]),l=(0,y.ql)(t),u=(0,y.e4)(t),m=(0,z.y)(t.id),g=(0,K.n)(s),h=m&&!g;if(void 0===o||!u)return null;const v=[],f=n()(Q.Z,{buttonInternals:n()(Oi,{isTeamOwner:l}),[Bi]:t,placement:G.u.Bottom,alignment:G.v.Start,from:"sidebar_team_modal",[Mi]:i[gi],icon:e=>R.Z.leaveArrow({...e,margin:"2px 17px 2px 2px",width:16,height:16}),isRed:!l});if(v.push(f),l)if(a)v.push(n()(ci,{teamStoreInstance:t,teamName:o,[Mi]:i[gi]}));else{const e=n()(P.Z,{disableTooltip:!h,placement:G.u.Bottom,alignment:G.v.Start,renderTooltip:()=>n()(p.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.cannotArchive",[Di]:"Cannot archive this teamspace because it is the only default teamspace in this workspace."}),render:e=>n()(ui,{[ki]:h,teamStoreInstance:t,tooltipEvents:e,[Mi]:i[gi]})});v.push(e)}return r[yi](r.Fragment,null,n()("div",{[Mi]:{height:20,width:"100%"}}),n()(Y.Ph,{title:n()(p.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.title",[Di]:"Danger zone"}),rows:v,itemStyle:{padding:0,margin:0}}))}function Oi(e){let{isTeamOwner:t}=e;window.__c={n:"LeaveTeamButton"};const i=(0,c.yK)((()=>({label:{color:t?"inherit":L.ZP.red}})),[t]);return n()("div",{},void 0,n()(I.Z,{[Mi]:i.label},void 0,n()(p.FormattedMessage,{id:"teamBrowser.teamCard.button.leaveTeam",[Di]:"Leave teamspace"})),n()(I.Z,{isSmall:!0,[Mi]:{[pi]:"normal"}},void 0,n()(p.FormattedMessage,{id:"teamBrowser.teamCard.button.leaveTeamDescription",[Di]:"Removes teamspace from your sidebar"})))}var Ui=i(77907),Vi=i(33052),Wi=i(30688);const Ki=i(85).kdC,zi=i(85).Unu,Gi=i(85).Yzm,Hi=i(85).Jy7,qi=i(85).Joh,ji=i(85).pkR,Qi=i(85).D7I,Ji=i(85).ESK,$i=i(85).nx5,Yi=i(85).L_E;function Xi(e){let{teamStore:t}=e;window.__c={n:"TeamFilterAndAddMemberRow"};const i=(0,c.yK)((e=>({[Yi]:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:e.modalBackground,zIndex:10,paddingBottom:8},input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12,width:"45%",maxWidth:260,marginRight:2},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),o=(0,p.useIntl)(),[a,s]=(0,d.AF)(w.Z),[l,u,m]=(0,d.AF)(void 0,Vi.Z),g=(0,y.ef)(t),h=(0,d.VK)((()=>(0,Ge.isTeamInviteLinkMs2Enabled)()&&!f.U2(t)),[t]);return n()("div",{style:i[Yi]},void 0,n()("div",{},void 0,n()(Ui.LazyTeamPermissionsInviteWithModal,{store:t,[Hi]:m,origin:n()(P.Z,{placement:P.Z[Ji].Left,alignment:P.Z.Alignment.Start,textWrap:!0,[qi]:()=>g?n()("div",{style:{width:"max-content",maxWidth:150}},void 0,n()(p.FormattedMessage,{id:"teamPermissionsInviteWithModal.addMembers.tooltip",[$i]:"Add members and groups"})):n()("div",{style:{width:220}},void 0,n()(p.FormattedMessage,{id:"teamPermissionsInviteWithModal.addMembersNoPermissions.tooltip",[$i]:"You do not have permissions to add members to this teamspace"})),render:e=>r[Qi](H.Z,E()({[ji]:!g,isLarge:!0,onClick:()=>{u({...l,modalOpen:!0})}},e),n()(p.FormattedMessage,{id:"teamPermissionsInviteWithModal.openModal",[$i]:"Add members"}))})}),h&&n()(Wi.u,{store:t,isSmall:!0})),n()(j.Z,{placeholder:o[Gi]({id:"teamPermissionsInviteWithModal.filterGroupsAndMembersInput.placeholder",[$i]:"Search for members or groups…"}),style:i.input,value:a[zi],onChange:e=>{s({...a,[zi]:e.target.value,limitMembers:!0})},left:R.Z.search(i.searchIcon),[Ki]:!0,format:j.Z.Format.Small}))}var eo=i(58573),to=i(59054),io=i(31299),oo=i(62385),no=i(90468),ao=i(64684),so=i(7928),ro=i(67669),lo=i(86125),co=i(12793),uo=i(31278),mo=i(45653),po=i(25735),go=i(47307),ho=i(61766),vo=i(31194),fo=i(61519),yo=i(29369),bo=i(7567);const So=i(85).D7I,wo=i(85).ccq,Mo=i(85).LtW,ko=i(85).nLZ,Co=i(85).ChN,Zo=i(85).nAm,To=i(85).NJt,Po=i(85).Z09,Io=i(85).vhD,Fo=i(85).VbG,_o=i(85).bSA,xo=i(85).eAn,Ao=i(85).PXg,Bo=i(85).XNW,Do=i(85).wNq,Eo=i(85).wgE,Lo=i(85).DUE,Ro=i(85).nx5,No=i(85).wuN,Oo=i(85).Ixx;function Uo(e){window.__c={n:"TeamMemberPermissionRoleSelect"};const{teamStore:t,memberInfo:i,permissionItem:o,memberName:a,style:s,onMenuItemClicked:u,isPermissionOverridden:m}=e,g=(0,l.O7)(),h=(0,p.useIntl)(),v=(0,c.Fg)(),f=(0,r.useMemo)((()=>new ho.Z),[]),y=(0,c.yK)((e=>({header:{display:"flex",flexDirection:"column",backgroundColor:e[Oo],fontSize:12,color:e[No],alignItems:"flex-start",paddingTop:10,paddingLeft:12,paddingRight:12,paddingBottom:10},overrideTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",height:28},overrideLabel:{paddingLeft:8,color:e[No]}})),[]),S=(0,d.VK)((()=>t.getTeamPermission()),[t]),w=(0,d.VK)((()=>{if(null==t||!t.isDefined())return;const e=h.formatMessage({id:"teamMemberPermissionRoleSelect.member.permissionitem.description",[Ro]:"You can't give less access than the teamspace default. Lower teamspace members‘ access to enable this option."}),i=n()(p.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionItem.defaultTag",[Ro]:"default"});function o(i){return(0,ao.bk)({teamValue:{id:t.id,permissions:t.getPermissionItems()},permissionRole:i})?{isDisabled:!0,disabledMessage:e}:void 0}return["editor","read_and_write","comment_only","reader"].map((e=>({role:e,disabledInfo:o(e),tag:(null==S?void 0:S.role)===e?i:void 0})))}),[S,h,t]);const M=(0,d.VK)((()=>b.default.state.currentSpaceStore),[]),k=(0,d.VK)((()=>!("enterprise"===(null==M?void 0:M.getSubscriptionTier()))&&!m),[M,m]),C=n()("div",{style:y.overrideTitle},void 0,n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.permissionsOverride",[Ro]:"Custom permissions"}),k?n()(ye.Z,{[xo]:Do,[_o]:"team_member_permission_override",desktopStyle:{[Bo]:8,[Ao]:12}}):n()(bo.ZP,{role:"owner"===i.type?"none":o.role,table:yo.e0,type:"user"===i[Fo]?Io:Po,upgradeButtonName:"user"===i[Fo]?"user_permission_item":"group_permission_item",buttonStyle:{[Ao]:0,fontSize:12,color:v[No],[To]:m?void 0:Zo},availableRoleItems:w,header:n()(I.Z,{isSmall:!0,isSecondaryColor:!0,style:{[Co]:600,[Bo]:16,[ko]:8}},void 0,n()(p.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionOverride.menuHeader",[Ro]:"Select custom role"})),onChange:e=>{"none"!==e&&(!function(e){go.showDialog({message:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.message",[Ro]:"Are you sure you want to change {name}'s role to {role}?",values:{name:a,role:(0,ro.getUserFacingRole)(e).toLowerCase()}}),description:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.description",[Ro]:Lo}),showCancel:!0,keepFocus:!1,handleCancel:go.dismissDialog,items:[{label:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",[Ro]:"Change access"}),color:"red",onAccept:async()=>{const{serverCommitResult:o}=U.createAndCommit({userAction:"TeamMemberPermissionRoleSelect.handleRoleSelect",[Eo]:g,perform:o=>{O.setTeamMemberPermission({memberInfo:i,teamStore:t,transaction:o,[Eo]:g,permissionRole:e})}});await o,t.isDefault()&&(t.getMembershipDefinedOnTeam().some((e=>(0,ao.ah)(e,i)))||await O.inviteMembersToTeam({[Eo]:g,teamStore:t,teamMemberInfos:[i],isSettingDefaultTeam:!0,createNewTeamFlowId:void 0}))}}]})}(e),u&&u())},[Mo]:f,[wo]:vo.Iw.Right,alignmentToOrigin:vo.lU.End}));return n()(P.Z,{placement:P.Z.Placement.Left,textWrap:!0,renderTooltip:()=>n()(p.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionOverride.buttonTooltip",[Ro]:"Set a custom permission level for all pages in this teamspace"}),render:e=>r[So](je.Z,E()({},e,{focused:!1,style:s,textWrapperStyle:{[Ao]:0},disabled:k,onClick:()=>f.setState({open:!0}),title:C,icon:m?n()("div",{style:{[ko]:8}},void 0,R.Z.check({width:14})):void 0}))})}const Vo=i(85).$cP,Wo=i(85).PXg,Ko=i(85).XNW,zo=i(85).xw$,Go=i(85).Joh,Ho=i(85).g4H,qo=i(85).ESK,jo=i(85).ChN,Qo=i(85).wuN,Jo=i(85).U4T,$o=i(85).QFf,Yo=i(85).LCr,Xo=i(85).wgE,en=i(85).ApP,tn=i(85).Drs,on=i(85).JJj,nn=i(85).D7I,an=i(85).adB,sn=i(85).nx5,rn=(i(85).Q8O,i(85).MDw),ln=i(85).Yvw,dn=i(85).VbG,cn=i(85).qJ8,un=i(85).pkR,mn=i(85).Tb$,pn=i(85).OHs;function gn(e){let{[pn]:t,memberInfo:i,[mn]:o,memberName:a,isPermissionOverridden:s,[un]:c}=e;window.__c={n:"TeamMemberOwnerSelect"};const m=(0,d.qz)(void 0,ho.Z),[g,h]=(0,d.AF)(m),v=(0,l.O7)(),y=(0,d.VK)((()=>b.default.state[cn]),[]),S=(0,d.VK)((()=>b.default.state.currentUserStore),[]),w=(0,d.VK)((()=>{const e=null==S?void 0:S.userId;return"user"===i[dn]&&i[ln]===e}),[null==S?void 0:S.userId,i]),M=()=>h({...g,open:!1}),k=async e=>{M();const o=n()(p.FormattedMessage,"owner"===e?{[sn]:rn,id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelOwner"}:{[sn]:an,id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelMember"});if("team_level_guest"!==i.type||"owner"!==e&&"member"!==e)if("owner"===e){if("user"===i[dn]){const{serverCommitResult:e}=U[on]({[tn]:en,[Xo]:v,perform:e=>{O.upgradeMemberToOwner({[Xo]:v,userId:i[ln],[pn]:t,[Yo]:e})}});await e}}else w?go.showDialog({message:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.removeSelfTeamOwner.confirmation.message",[sn]:"Are you sure you want to remove yourself as a teamspace owner? You'll no longer be able to edit teamspace settings and permissions."}),showCancel:!0,keepFocus:!1,handleCancel:go.dismissDialog,items:[{label:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",[sn]:"Change access"}),color:"red",onAccept:C}]}):await C();else{const a=(0,f.Mf)(i[ln]).length;go.showDialog({message:r[nn](r.Fragment,null,n()(p.FormattedMessage,a>1?{id:"teamMemberPermissionSettings.upgradeGuestConfirmationWithOtherTeamspaces.message",[sn]:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member, and they will become a member in {numberOfOtherTeams, plural, one {{numberOfOtherTeams} other teamspace} other {{numberOfOtherTeams} other teamspaces}}.",values:{memberOrOwner:o,numberOfOtherTeams:a-1}}:{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.message",[sn]:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member.",values:{memberOrOwner:o}})),showCancel:!0,keepFocus:!1,handleCancel:go.dismissDialog,items:[{label:n()(p.FormattedMessage,{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.accept",[sn]:"Add to workspace"}),color:"blue",onAccept:async()=>{if(y){const{serverCommitResult:o}=U[on]({[tn]:en,[Xo]:v,perform:o=>{O.upgradeTeamGuestToMemberOrOwner({[Xo]:v,userId:i[ln],[pn]:t,[Yo]:o,spaceStore:y,newTeamRole:e})}});await o}}}]})}},C=async()=>{if("owner"===i.type&&"user"===i[dn]){const{serverCommitResult:e}=U[on]({[tn]:$o,[Xo]:v,perform:e=>{O.downgradeOwnerToMember({userId:i[ln],[pn]:t,[Yo]:e,[Xo]:v})}});await e}else if("member"===i.type){const{serverCommitResult:e}=U[on]({[tn]:$o,[Xo]:v,perform:e=>{O.resetMemberOverridesToDefault({[Xo]:v,memberInfo:i,[pn]:t,[Yo]:e})}});await e}},Z=async()=>{const{[dn]:e}=i;switch(M(),e){case"group":const o=(0,X.TC)({spaceStore:y,groupId:i.group_id});if(!o)throw new Error("Permission group not found in space.");O.removeGroupFromTeam({[Xo]:v,[pn]:t,group:o});break;case"user":await O.removeUserFromTeam({[Xo]:v,[pn]:t,[cn]:y,userId:i[ln],from:"team_settings_member_table"});break;default:(0,u.unreachable)(e)}};return n()(Qe.ZP,{buttonPopupStore:m,placementToOrigin:vo.Iw.Bottom,renderOrigin:e=>n()(vn,{buttonPopupEvents:e,isPermissionOverridden:s,[mn]:o,memberInfo:i,[un]:c}),render:()=>n()(hn,{[pn]:t,isPermissionOverridden:s,memberInfo:i,[mn]:o,memberName:a,onMenuItemClicked:k,onRemoveClicked:Z,onSubMenuItemClicked:M}),popupType:Qe.Z4.Popup})}function hn(e){let{[pn]:t,isPermissionOverridden:i,memberInfo:o,[mn]:a,memberName:l,onRemoveClicked:u,onMenuItemClicked:g,onSubMenuItemClicked:h}=e;window.__c={n:"OwnerMemberMenuList"};const y=(0,d.VK)((()=>{const{[cn]:e}=b.default.state;return!Boolean(null==e?void 0:e.getSettingsStore().getKeyStore("disable_team_guests").getValue())&&(0,Ge.isTeamspaceGuestsEnabled)()}),[]),S=(0,d.VK)((()=>t.isDefault()),[t]),w=(0,d.VK)((()=>(0,f.Hu)({membership:t.getKeyStore("membership").getValue()})),[t]),M=(0,d.VK)((()=>1===t.getMembers().filter((e=>"owner"===e.type)).length),[t]),k=(0,c.yK)((e=>{const t={paddingTop:5,paddingBottom:5},i={...t,width:280,alignItems:"flex-start"};return{actionMenu:{marginTop:-4},removeButton:{...t,color:e.errorText},menuItem:i,[Jo]:{...i,paddingLeft:20},overrideLabel:{paddingLeft:10,color:e[Qo],fontSize:12,[jo]:m.Z[jo].regular}}}),[]),C=(e,t)=>{const o=("owner"===e||"team_level_guest"===e)&&"group"===t[dn],s="member"===e&&"owner"===t.type&&M,l="team_level_guest"===e&&("owner"===t.type||"member"===t.type),d=o||s||l;return{key:e,action:()=>g(e),render:c=>{const u=!i&&t.type===e;return n()(P.Z,{disableTooltip:!d,placement:P.Z[qo].Right,textWrap:!0,[Go]:()=>o?n()(p.FormattedMessage,"owner"===e?{id:"TeamMemberOwnerSelect.memberItem.disableOwnerForGroupsTooltip",[sn]:"Groups can't be teamspace owners"}:{id:"TeamMemberOwnerSelect.memberItem.disableTeamGuestForGroupsTooltip",[sn]:"Groups can't be teamspace guests"}):s?n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.memberItem.disableWithOnlyOneOwnerTooltip",[sn]:"Add another teamspace owner to downgrade yourself to member"}):l?n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.memberItem.disableDowngradeToGuestTooltip",[sn]:"To change this user to a teamspace guest, first remove them from the workspace."}):void 0,render:t=>r[nn]("span",t,r[nn](je.Z,E()({},c,{style:u?k.menuItem:k[Jo],[un]:d,disabledFeedback:d,title:n()(fn,{isPermissionOverridden:i,type:e,[mn]:a}),[Ho]:bn(e),shouldWrapCaption:!0,icon:u?R.Z.check({width:14}):void 0})))})}}},Z=S&&"user"===o[dn],T="group"!==o[dn],I="group"!==o[dn]&&y,F=[{key:"teamRoles",items:s().compact([T?C(rn,o):void 0,C(an,o),I?C(zo,o):void 0,Sn({onRemoveClicked:u,styles:k,isMemberInDefaultTeam:Z}),..."owner"===o.type||w?[]:[{key:"divider",action:()=>{},render:()=>n()(fo.Z,{size:10})},{key:"permissions_override",action:()=>{},render:e=>r[nn]("span",e,n()(Uo,{[pn]:t,memberInfo:o,[mn]:a,memberName:l,onMenuItemClicked:h,isPermissionOverridden:i,style:i?k.menuItem:k[Jo]}))}]]),render:e=>r[nn](Ye.Z,E()({},e,{topBorder:0!==e.index}))}];return n()(Je.Z,{className:v.sharingPermissionRoleSelect,menuType:He.og.Popup},void 0,n()($e.Z,{type:$e.i.Vertical,initialFocus:void 0,sections:F}))}function vn(e){let{buttonPopupEvents:t,[un]:i,isPermissionOverridden:o,[mn]:a,memberInfo:s}=e;window.__c={n:"SelectButton"};const l=(0,c.yK)((e=>({label:{color:e.regularTextColor,fontSize:12.5,[jo]:m.Z[jo].regular},overrideLabel:{color:e[Qo],fontSize:12,[jo]:m.Z[jo].regular},chevron:{width:10,[Ko]:4,fill:e.lightIconColor}})),[]),d=function(e,t,i){if(t&&i)return function(e){switch(e){case"none":return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.none",[sn]:"No access"});case"reader":return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.reader",[sn]:"Can view"});case"comment_only":return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.comment_only",[sn]:"Can comment"});case Vo:return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.content_only_editor",[sn]:"Can edit content"});case"membership_admin":case"read_and_write":return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.read_and_write",[sn]:"Can edit"});case"editor":return n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.editor",[sn]:"Full access"});default:(0,u.unreachable)(e)}}(i);return yn(e)}(s.type,o,a.role);return r[nn](fe.Z,E()({[un]:i},t),o&&n()("span",{style:l.overrideLabel},void 0,n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.custom",[sn]:"Custom"}),n()("span",{style:{[Ko]:5,[Wo]:5}},void 0,"•")),n()("span",{style:l.label},void 0,d),!i&&R.Z.chevronDown(l.chevron))}function fn(e){let{isPermissionOverridden:t,[mn]:i,type:o}=e;const a=yn(o);return n()("div",{},void 0,n()("span",{},void 0,a))}function yn(e){switch(e){case rn:case an:case zo:return r[nn](p.FormattedMessage,f.q9[e].label);case"none":return;default:(0,u.unreachable)(e)}}function bn(e){switch(e){case rn:case an:case zo:return r[nn](p.FormattedMessage,f.q9[e][Ho]);case"none":return;default:(0,u.unreachable)(e)}}function Sn(e){let{styles:t,onRemoveClicked:i,isMemberInDefaultTeam:o}=e;const a=o?n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.remove.disabledTooltip.cannotRemoveFromDefault",[sn]:"Members cannot be removed from a default teamspace."}):void 0;return{key:"remove",action:i,render:e=>n()(P.Z,{disableTooltip:!a,placement:P.Z[qo].Right,textWrap:!1,[Go]:()=>a,render:i=>r[nn]("span",i,r[nn](je.Z,E()({},e,{style:{...t.removeButton,...t[Jo]},[un]:Boolean(a),disabledFeedback:!0,title:n()(p.FormattedMessage,{id:"TeamMemberOwnerSelect.remove",[sn]:"Remove"})})))})}}var wn=i(13380);const Mn=i(85).$bT,kn=i(85).L_E;function Cn(e){window.__c={n:"TeamPermissionRowAvatar"};const{icon:t,label:i,name:o,tag:a,style:s}=e,r=(0,c.yK)((e=>({[kn]:{display:"flex",[Mn]:"row",alignItems:"center",gap:10,...s},labelContainer:{display:"flex",[Mn]:"column",...m.Z.textOverflowStyle,marginLeft:5},name:{minWidth:30},nameContainer:{display:"flex",[Mn]:"row",alignItems:"center"}})),[s]);return n()("div",{style:r[kn]},void 0,t,n()("div",{style:r.labelContainer},void 0,n()("div",{style:r.nameContainer},void 0,n()(wn.s,{style:r.name},void 0,o),a),i&&n()(I.Z,{isSmall:!0,isSecondaryColor:!1,isMultiline:!0},void 0,n()(wn.s,{},void 0,i))))}const Zn=i(85).Joh,Tn=i(85).D7I,Pn=i(85).ESK,In=i(85).PXg;function Fn(e){window.__c={n:"TeamPermissionRowItem"};const{iconComponent:t,label:i,name:o,permissionRoleSelectComponent:a,tag:s,tooltip:l,style:d}=e,u=(0,c.yK)((e=>({permissionRow:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:36,justifyContent:"space-between",alignItems:"center",...d}})),[d]);return n()("div",{style:u.permissionRow},void 0,n()(Cn,{icon:t,name:o,tag:s,label:i,style:{minWidth:200,[In]:6}}),n()(P.Z,{textWrap:!0,style:{width:210},disableTooltip:!l,placement:P.Z[Pn].Left,[Zn]:()=>l,render:e=>r[Tn]("span",e,a)}))}const _n=i(85).D7I,xn=(i(85).ls5,i(85).nx5),An=i(85).ro0,Bn=i(85).$bT,Dn=i(85).JJs,En=i(85).o63,Ln=i(85).G3i,Rn=i(85).M_x,Nn=i(85).qJ8,On=i(85).Tb$;function Un(e){window.__c={n:"SpecificTeamMemberPermissionRow"};const{type:t,store:i,[On]:o,memberInfo:a}=e,s=(0,d.VK)((()=>b.default.state[Nn]),[]),r=(0,p.useIntl)(),m=(0,d.VK)((()=>{switch(t){case Rn:return"none";case"user":return null!=s&&s[Ln]()?(0,ro.getSpacePermissionItem)(null==s?void 0:s[En](),e.memberInfo.user_id):"none";default:(0,u.unreachable)(t)}}),[s,t,e]),g=(0,y.ql)(i),h=(0,d.VK)((()=>{const{[Nn]:e}=b.default.state;return null==e?void 0:e.canEditMembership()}),[]),v=(0,l.O7)(),f=(0,d.VK)((()=>{const e=v.currentUser.id,t=i.getSettingsStore().getValue();return!!(null!=s&&s[Ln]()&&i[Ln]()&&t&&e)&&(0,ao.W9)({membership:i.getMembers(),settings:t,is_default:i.isDefault()},e,{permissions:s[En](),subscription_tier:s.getSubscriptionTier(),permission_groups:s.getPermissionGroups()})}),[v.currentUser.id,s,i]),S=(0,d.VK)((()=>{const e=i[En]()||[];switch(a.entity_type){case Rn:return!!e.find((e=>(0,be.isGroupPermission)(e)&&e.group_id===a.group_id));case"user":return!!e.find((e=>(0,be.isUserPermission)(e)&&e.user_id===a.user_id));default:return!1}}),[a,i]),{name:w,label:M,icon:k}=(0,d.VK)((()=>{switch(t){case Rn:return Wn({permissionGroup:e.permissionGroup,spaceId:null==s?void 0:s.id});case"user":return function(e){let{intl:t,[Dn]:i}=e;return{name:(0,so.Nz)(t,null==i?void 0:i.getModel()),label:null==i?void 0:i.getEmail(),icon:n()(mo.Z,{avatarShouldShowShadow:!0,[Dn]:i,size:32})}}({intl:r,[Dn]:e[Dn]});default:(0,u.unreachable)(t)}}),[t,e,r,null==s?void 0:s.id]),C=n()("div",{style:{display:"flex",[Bn]:"row",alignItems:"center"}},void 0,n()(gn,{teamStore:i,memberInfo:a,memberName:w,[On]:o,isPermissionOverridden:S,disabled:!g&&!f||"team_level_guest"===a.type&&!h})),Z=(0,c.yK)((e=>({row:{minHeight:52},pill:{marginLeft:6,height:17}})),[]);return n()(Fn,{style:Z.row,tag:(0,be.isAnyAdmin)(m)?n()(lo.Z,{desktopStyle:Z.pill,mobileStyle:Z.pill,role:Vn(m)}):"group"===t?n()("div",{style:Z.pill},void 0,k):void 0,permissionRoleSelectComponent:C,iconComponent:"group"===t?n()(co.Z,{size:32}):k,name:w,label:M})}function Vn(e){switch(e){case"editor":return"admin";case An:return An;default:(0,u.unreachable)(e)}}function Wn(e){let{spaceId:t,permissionGroup:i}=e;const{name:o,user_ids:a,icon:s}=i,l=(null==a?void 0:a.length)??0;return{name:o??n()(p.FormattedMessage,{id:"teamPermissionSettings.unknownGroup",[xn]:"Unknown Group"}),label:n()(P.Z,{placement:P.Z.Placement.Bottom,alignment:P.Z.Alignment.Start,disableTooltip:0===l,renderTooltip:()=>n()(po.Y,{[Rn]:i,limit:10,noMembersMessage:void 0}),render:e=>r[_n]("div",e,n()(p.FormattedMessage,{id:"teamPermissionSettings.group",[xn]:"Group"})," • ",n()(p.FormattedMessage,{id:"teamPermissionSettings.numberOfMembers",[xn]:"{groupSize, plural, one {{groupSize} member} other {{groupSize} members}}",values:{groupSize:l}}))}),icon:s&&n()(uo.Z,{bucket:"public",disabled:!0,onChange:()=>{},isEmptyPage:!1,title:o,size:18,icon:s&&t?{icon:s,pointer:{table:no.bx,id:t}}:void 0})}}var Kn=i(21325);const zn=i(85).nx5,Gn=i(85).L_E;function Hn(e){let{teamStore:t,...i}=e;window.__c={n:"SpecificTeamMemberToAddRow"};const o=(0,l.O7)(),a=(0,d.VK)((()=>{var e;return null===(e=b.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,p.useIntl)(),u=(0,c.yK)((()=>({[Gn]:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:52,justifyContent:"space-between",alignItems:"center"},pill:{marginLeft:6,height:17}})),[]),m=(0,r.useCallback)((e=>{N.oV({label:n()(p.FormattedMessage,{id:"SpecificTeamMemberToAddRow.team_invite_failure",[zn]:"Failed to add {userOrGroupName}",values:{userOrGroupName:e}})})}),[]),g=(0,r.useCallback)((async(e,i)=>{await O.inviteMembersToTeam({environment:o,teamMemberInfos:[e],teamStore:t,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})?await Kn.refresh(o):m(i)}),[o,m,t]),h=(0,r.useCallback)(((e,t)=>g({type:"member",entity_type:"user",user_id:e.id},t)),[g]),v=(0,r.useCallback)(((e,t)=>g({type:"member",entity_type:"group",group_id:e.id},t)),[g]);if("memberToAdd"in i){const{memberToAdd:e}=i,t=(0,so.Nz)(s,e);return n()("div",{style:u[Gn]},void 0,n()(Cn,{icon:n()(mo.Z,{userValue:e,size:32}),name:t,label:e.email}),qn((()=>{h(e,t)})))}{if(!a)return r.createElement(r.Fragment,null);const{groupToAdd:e}=i,t=Wn({spaceId:a,permissionGroup:e});return n()("div",{style:u[Gn]},void 0,n()(Cn,{icon:n()(co.Z,{size:32}),name:t.name,label:t.label,tag:n()("div",{style:u.pill},void 0,t.icon)}),qn((()=>{v(e,t.name)})))}}const qn=e=>n()(fe.Z,{isBlue:!0,onClick:e,icon:R.Z.plus},void 0,n()(p.FormattedMessage,{id:"SpecificTeamMemberToAddRow.addMemberButton.text",[zn]:"Add"})),jn=i(85).c9r,Qn=i(85).PG2,Jn=i(85).Lfz,$n=i(85).nx5,Yn=i(85).L_E;function Xn(e){let{sortType:t,onChangeSortType:i}=e;window.__c={n:"TeamPermissionsListHeader"};const o=(0,c.yK)((e=>({[Yn]:{width:"100%",display:"flex",justifyContent:"space-between",borderBottom:`1px solid ${e.regularDividerColor}`}})),[]),a=e=>e===t.column?t.sortedAscending?"ascending":"descending":"none",s=e=>{const o=e===t.column&&!t.sortedAscending;i({column:e,sortedAscending:o})};return r.createElement(r.Fragment,null,n()("div",{style:o[Yn]},void 0,n()(ea,{title:n()(p.FormattedMessage,{id:"TeamPermissionsListHeader.nameColumn",[$n]:"Name"}),sortedType:a(Jn),[Qn]:()=>s(Jn)}),n()(ea,{title:n()(p.FormattedMessage,{id:"TeamPermissionsListHeader.roleColumn",[$n]:"Role"}),sortedType:a(jn),[Qn]:()=>s(jn)})))}function ea(e){let{sortedType:t,title:i,[Qn]:o}=e;window.__c={n:"HeaderLabel"};const a=(0,c.yK)((e=>({button:{color:e.mediumTextColor,fontSize:12,padding:0},buttonHover:{background:"unset"},sortIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor}})),[]);return n()(fe.Z,{style:a.button,hoveredStyle:a.buttonHover,[Qn]:o},void 0,"ascending"===t&&R.Z.arrowUp(a.sortIcon),"descending"===t&&R.Z.arrowDown(a.sortIcon),i)}const ta=i(85).tBn,ia=i(85).D7I,oa=i(85).nx5,na=i(85).M_x,aa=i(85).TtP,sa=i(85).Unu,ra=i(85).OHs,la=i(85).SZh,da=i(85).qJ8,ca=i(85).g7N,ua=i(85).L_E;function ma(e){var t;let{store:i}=e;window.__c={n:"TeamPermissionsList"};const o=(0,l.O7)(),a=(0,c.yK)((e=>({[ua]:{display:"block",overflow:"hidden"},membersHeader:{[ca]:8},noResult:{fontSize:m.Z.fontSize.UIRegular.desktop,color:e.mediumTextColor,marginTop:8},showMore:{[ca]:24,width:"max-content"}})),[]),s=(0,p.useIntl)(),[g,h]=(0,r.useState)({column:"role",sortedAscending:!1}),[v]=(0,d.AF)(w.Z),S=(0,y.ef)(i),M=(0,d.VK)((()=>i.getMembers()),[i]),k=(0,d.VK)((()=>b.default.state[da]),[]),C=(0,d.VK)((()=>b.default.state[la]),[]),{permissionRowInfos:Z,numNotShown:T}=(0,d.VK)((()=>{const e=function(e){let{permissionRowInfos:t,[sa]:i,intl:o}=e;if(""===i)return t;return(0,eo.ZP)(i,t,(e=>{const{type:t}=e;switch(t){case na:return e.permissionGroup.name??"";case"user":const{userStore:i}=e;return i.getSearchName(o);default:(0,u.unreachable)(t)}}))}({permissionRowInfos:(0,f.tu)({[la]:C,[da]:k,[ra]:i,members:M}),[sa]:v[sa],intl:s}),t=function(e){let{permissionRowInfos:t,sortType:i,intl:o}=e;const{column:n,sortedAscending:a}=i,s={permissionRowInfos:t,sortedAscending:a};if("role"===n)return function(e){let{permissionRowInfos:t,sortedAscending:i}=e;const o=["owner","member","team_level_guest"],n=[na,"user"];return[...t].sort(((e,t)=>{const i=e.memberInfo.entity_type,o=t.memberInfo.entity_type;return n.indexOf(i)-n.indexOf(o)})).sort(((e,t)=>{const n=e.memberInfo.type,a=t.memberInfo.type,s=o.indexOf(n)-o.indexOf(a);return i?-s:s}))}(s);if("name"===n)return function(e){let{permissionRowInfos:t,sortedAscending:i,intl:o}=e;return[...t].sort(((e,t)=>{const n=pa(e,o)??"",a=pa(t,o)??"";if(n===a)return 0;const s=n<a?-1:1;return i?-s:s}))}({...s,intl:o});(0,u.unreachable)(n)}({permissionRowInfos:e,sortType:g,intl:s}),o=v.limitMembers?t.slice(0,50):t;return{permissionRowInfos:o,numNotShown:e[aa]-o[aa]}}),[k,C,M,i,g,v[sa],v.limitMembers,s]),[P]=(0,to.r5)((async()=>{var e;if(!S||null===(e=v[sa])||void 0===e||!e.trim()[aa])return[];const t=(await io.searchVisibleSpaceUsers({environment:o,query:v[sa],membersOnly:!0})).map((e=>({type:"user",value:e}))),i=io.searchSpaceGroups({query:v[sa],intl:s}).map((e=>({type:na,value:e}))),n=new Set(Z.map(ha));return[...t,...i].filter((e=>!n.has(e.value.id))).slice(0,5)}),[S,v[sa],o,s,Z]),I=Boolean(null===(t=v[sa])||void 0===t?void 0:t.trim()[aa]),F=Z[aa]>0,_="resolved"===P.status?P.value:[];return n()("div",{style:a[ua]},void 0,n()(ga,{title:I?n()(p.FormattedMessage,{id:"TeamPermissionsList.search.inThisTeam",[oa]:"In this team"}):n()(Xn,{sortType:g,onChangeSortType:h}),rows:Z,renderRow:e=>r[ia](Un,E()({store:i},e))}),T>0&&n()(oo.Z,{style:a.showMore,onClick:()=>{w.Z.setState({...v,limitMembers:!1})}},void 0,n()(p.FormattedMessage,{[oa]:"Show {numNotShown} more",id:"teamPermissionSettings.member.showMore",values:{numNotShown:T}})),_[aa]>0&&n()(ga,{title:n()(p.FormattedMessage,{id:"TeamPermissionsList.search.notInTeam",[oa]:"Not in team"}),rows:_,renderRow:e=>"user"===e.type?n()(Hn,{[ra]:i,memberToAdd:e.value}):n()(Hn,{[ra]:i,groupToAdd:e.value})}),!F&&0===_[aa]&&n()("div",{style:a.noResult},void 0,n()(p.FormattedMessage,{id:"TeamPermissionsList.search.zeroState",[oa]:"No members or groups found"})))}function pa(e,t){const{type:i}=e;if("user"===i){const{userStore:i}=e;return i.getDisplayName(t)}if("group"===i){const{permissionGroup:t}=e;return t.name}(0,u.unreachable)(i)}function ga(e){let{rows:t,renderRow:i,title:o}=e;window.__c={n:"TeamPermissionListInner"};const a=(0,c.yK)((e=>({membersList:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",width:"100%",[ca]:12},memberDivider:{borderBottom:`1px solid ${e.regularDividerColor}`}})),[]);return t[aa]?r[ia](r[ta],null,o&&n()(I.Z,{isSmall:!0},void 0,o),n()("div",{style:a.membersList},void 0,t.map(((e,t)=>r[ia](r[ta],null,t>0&&n()("div",{style:a.memberDivider}),i(e)))))):null}function ha(e){switch(e.type){case"user":return e.memberInfo.user_id;case na:return e.memberInfo.group_id;default:(0,u.unreachable)(e)}}const va=i(85).OHs;function fa(e){let{[va]:t}=e;window.__c={n:"TeamMembersListSection"};const i=(0,c.yK)((()=>({content:{display:"grid",gridAutoFlow:"row",rowGap:6}})),[]);return n()("div",{style:i.content},void 0,n()(Xi,{[va]:t}),n()(ma,{store:t}))}var ya=i(79362);const ba=i(85).wgE,Sa=i(85).JJj,wa=i(85).nx5;function Ma(e){window.__c={n:"TeamGuestsPermissionRow"};const{teamStore:t}=e,i=(0,l.O7)(),o=(0,p.useIntl)(),{teamGuestPermissionItem:a,teamPermissions:s}=(0,d.VK)((()=>({teamGuestPermissionItem:t.getTeamGuestsPermission(),teamPermissions:t.getPermissionItems()||[]})),[t]),r=(0,y.TE)(t),u=(0,d.VK)((()=>[{role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:o.formatMessage({id:"teamPermissionsSettings.teamspace.guest.disabledPermissionitem.description",[wa]:"Teamspace guests can't have full access."})}},{role:"read_and_write",disabledInfo:void 0},{role:"comment_only",disabledInfo:void 0},{role:"reader",disabledInfo:void 0}]),[o]),m=(0,c.yK)((e=>({button:{fontSize:12.5,marginRight:0,color:e.mediumTextColor}})),[]),g=a&&n()(bo.ZP,{role:a.role,table:yo.e0,type:"explicit_team_guest_permission",upgradeButtonName:"team_permission_item",disabled:r,buttonStyle:m.button,availableRoleItems:u,onChange:async e=>{if(s.filter((t=>((0,be.isUserPermission)(t)||(0,be.isGroupPermission)(t))&&(0,Se.tieredRoleIsGreaterThan)(e,t.role))).length>0){if(!(await(0,W.Bt)()))return}U[Sa]({userAction:"TeamGuestsPermissionRow.permissionComponent",[ba]:i,perform:o=>{O.setTeamGuestPageAccessForTeam({[ba]:i,teamStore:t,newRole:e,transaction:o,permissionsToClear:[]})}})}}),h=(0,d.VK)((()=>t.getName()),[t]),v=(0,d.VK)((()=>t.getIcon()),[t]),f=v&&ya.isNotionStaticIcon(v.icon)?ya.getIconColor(v.icon):"gray",b=v?{...v,icon:`/icons/user-circle_${f}.svg`}:void 0,S=n()($.p,{disabled:!0,store:t,size:Y.Kt,icon:b});return g?n()(Fn,{permissionRoleSelectComponent:g,iconComponent:S,name:ka(h)}):null}function ka(e){return n()(p.FormattedMessage,e?{[wa]:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessTeamSpaceName",values:{teamName:e}}:{[wa]:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessWithoutTeamspaceName"})}const Ca=i(85).wgE,Za=i(85).JJj,Ta=i(85).wuN,Pa=i(85).PCZ,Ia=i(85).Rtp,Fa=i(85).nx5,_a=i(85).o63;function xa(e){window.__c={n:"TeamMembersPermissionRow"};const{teamStore:t}=e,i=(0,l.O7)(),o=(0,c.Fg)(),a=(0,p.useIntl)(),{teamPermissionItem:s,teamPermissions:r}=(0,d.VK)((()=>({teamPermissionItem:t.getTeamPermission(),teamPermissions:t[_a]()||[]})),[t]),u=(0,y.TE)(t),m=(0,d.VK)((()=>{var e;const i=null===(e=t[_a]())||void 0===e?void 0:e.find((e=>"space_permission"===e.type)),o=a.formatMessage({id:"teamPermissionsSettings.teamspace.disabledPermissionitem.description",[Fa]:"Teamspace members can't have lower permissions than workspace members"});function n(e){return i&&e!==i.role&&(0,Se.getMostPermissiveRole)(e,i.role)===i.role&&!t.isDefault()?{isDisabled:!0,disabledMessage:o}:void 0}return[{role:"editor",disabledInfo:n("editor")},{role:Ia,disabledInfo:n(Ia)},{role:Pa,disabledInfo:n(Pa)},{role:"reader",disabledInfo:n("reader")}]}),[a,t]),g=s&&n()(bo.ZP,{role:s.role,table:yo.e0,type:(0,be.isExplicitBlockTeamPermission)(s)?"explicit_team_permission":"team_permission",upgradeButtonName:"team_permission_item",disabled:u,buttonStyle:{fontSize:12.5,marginRight:0,color:o[Ta]},availableRoleItems:m,onChange:async e=>{const o=r.filter((t=>((0,be.isUserPermission)(t)||(0,be.isGroupPermission)(t))&&(0,Se.tieredRoleIsGreaterThan)(e,t.role)));if(o.length>0){if(!(await(0,W.Bt)()))return}U[Za]({userAction:"TeamMembersPermissionRow.permissionComponent",[Ca]:i,perform:n=>{O.setTeamPageAccessForTeam({[Ca]:i,teamStore:t,newRole:e,transaction:n,permissionsToClear:o})}})}}),{teamName:h}=(0,d.VK)((()=>({teamName:t.getName()})),[t]),v=n()($.p,{disabled:!0,store:t,size:Y.Kt});return n()(Fn,{permissionRoleSelectComponent:g,iconComponent:v,name:Aa(h)})}function Aa(e){return n()(p.FormattedMessage,e?{[Fa]:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessTeamSpaceName",values:{teamName:e}}:{[Fa]:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutTeamspaceName"})}var Ba=i(19889),Da=i(62512);const Ea=i(85).PXg,La=i(85).wuN,Ra=i(85).RWY,Na=i(85).FYR,Oa=i(85).OSs,Ua=i(85).nx5;function Va(e){window.__c={n:"TeamOwnersPermissionRow"};const{teamStore:t,teamOwnerIds:i}=e,o=(0,c.Fg)(),a=(0,d.VK)((()=>t.getName()),[t]),s=(0,d.VK)((()=>t.getTeamOwnerPermission()),[t]),r=(0,d.VK)((()=>b.default.state.currentUserStore),[]),l=(0,d.VK)((()=>r?i.map((e=>S.U6.createChildStore(r,{table:Ba.KJ,id:e}))):[]),[r,i]);return n()(Fn,{tooltip:n()(p.FormattedMessage,{id:"TeamOwnersPermissionRow.teamspaceOwnersRowTooltip",[Ua]:"Teamspace owners have full access to teamspace pages by default"}),permissionRoleSelectComponent:n()(bo.ZP,{role:Oa,table:yo.e0,type:s&&(0,be.isExplicitBlockTeamOwnerPermission)(s)?Na:Ra,upgradeButtonName:"team_owner_permission_item",disabled:!0,buttonStyle:{fontSize:12.5,color:o[La],[Ea]:0},availableRoleItems:[]}),iconComponent:n()(Da.n,{teamStore:t,ownerStores:l,isSmall:!0}),name:Wa(a)})}function Wa(e){return n()(p.FormattedMessage,e?{[Ua]:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleName",values:{teamName:e}}:{[Ua]:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleNameWithoutTeamName"})}var Ka=i(76464);const za=i(85).e3f,Ga=i(85).i3J,Ha=i(85).wgE,qa=i(85).JJj,ja=i(85).wuN,Qa=i(85).D7I,Ja=i(85).Exd,$a=i(85).PXg,Ya=i(85).qHi,Xa=i(85).KK3,es=i(85).nx5,ts=i(85).jkI,is=i(85).H1U,os=i(85).h8z,ns=i(85).UPJ,as=i(85).$bT,ss=i(85).EMU,rs=i(85).sM5,ls=i(85).s9u,ds=i(85).OHs;function cs(e){window.__c={n:"TeamSpacePermissionRow"};const{[ds]:t}=e,i=(0,l.O7)(),o=(0,d.VK)((()=>b.default.state.currentSpaceStore),[]),{iconComponent:a,[ls]:s}=(0,d.VK)((()=>{if(!o)return{iconComponent:void 0,[ls]:void 0};const e=(0,X.rn)(i,o);return{iconComponent:n()($.p,{disabled:!0,store:o,size:Y.Kt}),[ls]:e}}),[o,i]);return n()(Fn,{permissionRoleSelectComponent:n()("div",{style:{[rs]:ss,[as]:"row",[ns]:os,[is]:ts}},void 0,n()(ms,{[ds]:t})),iconComponent:a,name:us(s)})}function us(e){return n()(p.FormattedMessage,e?{[es]:"Everyone else in {spaceName}",id:"TeamMembersTopSection.permissionItem.defaultAccessSpaceName",values:{[ls]:e}}:{[es]:"Everyone else in the workspace",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutSpaceName"})}function ms(e){window.__c={n:"TeamPermissionRoleSelect"};const{[ds]:t}=e,i=(0,l.O7)(),o=(0,c.Fg)(),a=(0,d.VK)((()=>{const e={type:Xa,role:"none"};return t.getSpacePermission()||e}),[t]),u=(0,y.TE)(t),m=(0,d.VK)((()=>{const e=t.getSettingsStore().getValue();if(e)return We({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t],{useDeepEqual:!0});if(!m)return null;const g=m.permissionItemRoleOptions.spacePermission;if(1===g.length&&"none"===g[0])return n()(P.Z,{renderTooltip:()=>n()(p.FormattedMessage,{id:"teamPermissionsSettings.privateTeam.noAccessTooltip",[es]:Ya}),render:e=>r[Qa]("div",E()({style:{[rs]:ss,[is]:ts,maxWidth:170}},e),R.Z.lockedFilled({width:14,height:14,fill:o.timelineRed,[$a]:4}),n()("div",{style:{[Ja]:12.5,color:o.timelineRed,[$a]:8}},void 0,n()(p.FormattedMessage,{id:"teamPermissionsSettings.privateTeam.noAccessLabel",[es]:"No access • Invite only"})))});{const e=s().sortBy(g,(e=>-be.tieredPermissionRolePrecedenceMap[e])).map((e=>({role:e})));return n()(bo.ZP,{role:a.role,table:yo.e0,type:Xa,upgradeButtonName:"space_permission_item",disabled:u||1===g.length,buttonStyle:{[Ja]:12.5,[$a]:0,color:o[ja]},availableRoleItems:e,onChange:e=>{const o={...a,role:e};U[qa]({userAction:"TeamSpacePermissionRow.permissionComponent",[Ha]:i,perform:e=>{Ka[Ga]({[Ha]:i,store:t,[za]:[o],transaction:e})}})}})}}const ps=i(85).L_E,gs=i(85).OHs;function hs(e){let{[gs]:t}=e;window.__c={n:"TeamPermissionRowsSection"};const i=(0,d.VK)((()=>t.isDefault()),[t]),o=(0,d.VK)((()=>(0,ao.XO)({membership:t.getMembers()})),[t]),a=(0,d.VK)((()=>{const e=b.default.state.currentSpaceStore;if(!e)return!1;return!(null==e?void 0:e.getDisableTeamGuests())&&(!i&&(0,Ge.isTeamspaceGuestsEnabled)())}),[i]),s=(0,c.yK)((()=>({[ps]:{marginLeft:15,marginRight:7,paddingBottom:4,paddingTop:4}})),[]);return n()("div",{style:s[ps]},void 0,n()(Va,{[gs]:t,teamOwnerIds:o},"0"),n()(xa,{[gs]:t},"1"),a&&n()(Ma,{[gs]:t},"2"),!i&&n()(cs,{[gs]:t},"3"))}var vs=i(49469);const fs=i(85).FTQ,ys=i(85).P3s,bs=i(85).iRX,Ss=i(85).cfO,ws=i(85).NJt,Ms=i(85).TJu,ks=i(85).D7I,Cs=i(85).nx5,Zs=i(85).OHs;function Ts(e){let{[Zs]:t}=e;window.__c={n:"TeamSettingsMembers"};const i=(0,c.yK)((()=>({spacer:{width:"100%",height:20},heading:{marginBottom:10}})),[]);return r[ks](r.Fragment,null,n()(Ps,{[Zs]:t}),n()("div",{style:i.spacer}),n()(vs.z,{title:n()(p.FormattedMessage,{id:"TeamSettingsMembers.memberSettings.membersTitle",[Cs]:"Members"}),style:i.heading}),n()(fa,{[Zs]:t}))}function Ps(e){let{[Zs]:t}=e;window.__c={n:"PermissionsCard"};const i=(0,l.O7)(),o=(0,d.VK)((()=>t.getName()),[t]),a=(0,c.yK)((()=>({[Ms]:{marginTop:15,marginBottom:15},teamSettingsListItems:{padding:0,margin:0},accessButton:{border:"none"}})),[]),s=(0,r.useCallback)(((e,n)=>{O.setTeamAccessLevel({environment:i,accessLevel:e,isDefault:n,store:t,teamName:o,from:"sidebar_team_modal"})}),[i,t,o]),u=(0,d.VK)((()=>t.getTeamAccessLevel()),[t]),m=[n()(ee._,{[Zs]:t,currentAccessLevel:u,onChange:s,style:a.accessButton},ws),n()(hs,{[Zs]:t},Ss)];return r[ks](r.Fragment,null,n()(Y.Ph,{title:n()(p.FormattedMessage,{id:"TeamSettingsMembers.memberSettings.permissionsTitle",[Cs]:"Permissions"}),rows:m,itemStyle:a.teamSettingsListItems}),n()(J.Z,{helpCenterLocation:bs,[ys]:"teams_learn_more_team_settings_permissions",message:n()(p.FormattedMessage,{id:"teamSettingsPermissions.learnMore",[Cs]:"Learn about teamspace permissions"}),[fs]:a[Ms]}))}var Is=i(74136);const Fs=i(85).nx5;function _s(e){return r.createElement(Is.Z,e,n()(p.FormattedMessage,{id:"sidebarTeamModalTab.unownedBadge",[Fs]:"Unowned"}))}const xs=i(85).Joh,As=i(85).PG2,Bs=i(85).nLZ,Ds=i(85).TEz,Es=i(85).nx5,Ls=i(85).Dd5,Rs=i(85).e7B,Ns=i(85).Ek1,Os=i(85).sI1,Us=i(85).Opu,Vs=i(85).bey,Ws=i(85).XtO,Ks=i(85).pkR,zs=i(85).Rbl,Gs=i(85).C1,Hs=i(85).ChN,qs=i(85).PXg,js=i(85).XNW,Qs=i(85).jkI,Js=i(85).H1U,$s=i(85).qpZ,Ys=i(85).EMU,Xs=i(85).sM5,er=i(85).GiO,tr=i(85).D7I,ir=i(85).BQ6,or=i(85).gGi,nr=i(85).Exd,ar=i(85).qJ8,sr=i(85).OHs;function rr(e){window.__c={n:"ModalContent"};const{[sr]:t}=e,i=(0,d.VK)((()=>w.Z.state.tab),[]);if(void 0===i)return null;switch(i){case w.a.General:return n()(Li,{[sr]:t});case w.a.Members:return n()(Ts,{[sr]:t});case w.a.Security:return n()(li,{[sr]:t});default:(0,u.unreachable)(i)}}function lr(e){window.__c={n:"UserWithAvatar"};const{userId:t,[ar]:i}=e,{userStore:o,isDefined:a}=(0,d.VK)((()=>{const e=S.U6.createChildStore(i,{table:"notion_user",id:t,spaceId:i.id});return{userStore:e,isDefined:e.isDefined()}}),[i,t]);return a?n()(F.Z,{avatarShouldShowShadow:!0,userStore:o,[ir]:{paddingRight:6,minHeight:34,lineHeight:1.2,[nr]:14,width:or},avatarSize:24}):null}function dr(e){window.__c={n:"PeopleRow"};const{userIds:t,label:i,hasMarginTop:o}=e,a=(0,d.VK)((()=>b.default.state[ar]),[]);return a?r[tr](r.Fragment,null,n()(_.Z,{hasMarginTop:o},void 0,i),t.map((e=>n()(lr,{userId:e,[ar]:a},e)))):null}function cr(){window.__c={n:"SidebarTeamModal"};const e=(0,l.O7)(),t=(0,d.VK)((()=>b.default.state[ar]),[]),i=(0,d.VK)((()=>b.default.state[er]),[]),o=(0,l.Fy)(),a=(0,c.yK)((e=>({modal:{width:o.isMobile?"auto":630,height:o.isMobile?"auto":640,maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 100px)",borderRadius:5,overflow:"auto"},modalWrap:{userSelect:"none",WebkitUserSelect:"none",height:or},innerWrap:{width:or,height:or,[Xs]:Ys,flexDirection:"column",paddingTop:20},[$s]:{[Xs]:Ys,[Js]:Qs,flexGrow:0,flexShrink:0,margin:"0px 36px"},tabBar:{[Xs]:Ys,width:void 0,flexGrow:0,flexShrink:0,margin:"0px 36px 20px"},scroller:{flexGrow:1},contentWrap:{margin:"0px 36px"},lockIcon:{width:16,[js]:6,marginBottom:1,fill:e.mediumIconColor},icon:{[qs]:8,[Hs]:m.Z[Hs].medium},unownedPill:{[js]:6,height:17},unownedPillInner:{[Xs]:Ys,height:or,[Js]:Qs,color:e.regularTextColor,[Hs]:m.Z[Hs].regular,textTransform:"unset",[nr]:11}})),[o.isMobile]),{open:r,tab:h,[sr]:S}=(0,d.VK)((()=>{const{open:e,tab:t}=w.Z.state,i=w.Z.getTeamStore();return{open:e,tab:t,[sr]:i}}),[]),T=(0,d.VK)((()=>null==S?void 0:S.getSettings()),[S]),P=(0,y.ql)(S);if(!t||!i||!S)return null;const I=[w.a.General,w.a.Members,w.a.Security];return n()(k.Z,{open:r,[Os]:a.modal,onDismiss:()=>{w.Z[Gs]()},render:()=>r?n()("div",{className:v.teamSettingsModal,[ir]:{height:or}},void 0,n()("div",{[ir]:a.modalWrap},void 0,n()(M.Z,{capture:!0,onBackspace:s()[zs],onLeft:s()[zs],onRight:s()[zs],onSelectAll:s()[zs],onRedo:s()[zs],onUndo:s()[zs],onCut:s()[zs],onCopy:s()[zs],onPaste:s()[zs],onKeypress:s()[zs],onDelete:s()[zs],onTab:s()[zs]},void 0,n()("div",{[ir]:a.innerWrap},void 0,n()("div",{[ir]:a[$s]},void 0,n()($.p,{[Ks]:!0,[Ws]:S,size:24,[ir]:a.icon}),n()(C.Z,{[Ws]:S,[ir]:{[nr]:16,[Hs]:m.Z[Hs].semibold}}),(0,f.C2)(T)&&n()(B.Z,{[Vs]:a.lockIcon}),(0,f.Hu)({[Us]:S.getRawMembership()})&&n()("div",{[ir]:{gap:5,[Xs]:"flex"}},void 0,n()(_s,{desktopStyle:a.unownedPill,mobileStyle:a.unownedPill,[Os]:a.unownedPillInner})),n()("div",{[ir]:{flexGrow:1}}),n()(A.M,{[sr]:S,onLeavingTeam:()=>w.Z[Gs](),from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!1})),n()(x.Z,{tabs:I.map((e=>function(e,t){switch(e){case w.a.General:return n()(p.FormattedMessage,{id:"sidebarTeamModalTab.option.general",[Es]:"General"});case w.a.Members:return n()(ur,{[sr]:t});case w.a.Security:return n()(p.FormattedMessage,{id:"sidebarTeamModalTab.option.security",[Es]:"Security"});default:(0,u.unreachable)(e)}}(e,S))),selectedIndex:(0,u.isDefined)(h)?I[Ns](h):1,[Ls]:t=>{r&&(g.trackTeamSettingsTabClick(e,{[Ws]:S,tab_old_value:h??w.a.General,tab_new_value:I[t]}),w.Z[Rs]((e=>e.open?{...e,tab:I[t]}:e)))},tabStyle:{[js]:-8},[ir]:a.tabBar,tabTitleStyle:{[js]:8,[qs]:8}}),n()(Z.Z,{type:Z.Z.OverflowType.Y,[ir]:a.scroller},void 0,n()("div",{[ir]:a.contentWrap},void 0,n()(rr,{[ar]:t,[sr]:S,userIsTeamOwner:P}))))))):null})}function ur(e){let{[sr]:t}=e;window.__c={n:"MembersTabTitle"};const i=(0,y.KR)(t),o=(0,c.Fg)();return r[tr](r.Fragment,null,n()(p.FormattedMessage,{id:"sidebarTeamModalTab.option.members",[Es]:"Members"}),n()("span",{},void 0," "),n()("div",{[ir]:{color:o[Ds]}},void 0,i))}function mr(e){let{title:t,caption:i,secondCaption:o,on:a,[Ks]:s,tooltip:d,[ir]:u,[Ls]:m,shouldTriggerUpsell:p}=e;window.__c={n:"SettingToggle"};const g=(0,l.O7)(),v=(0,c.yK)((()=>({root:{[Xs]:Ys,[Js]:Qs,width:or,[Bs]:0,marginBottom:0,cursor:p?"pointer":void 0,...u},title:{[nr]:14,[qs]:8,flexGrow:1},switcherWrap:{[Bs]:5,[qs]:18}})),[u,p]);return r[tr](r.Fragment,null,n()("div",{[ir]:v.root,[As]:()=>{if(p)return h.y(g,{from:"team_security_settings",for:"business",dontOpenPlansOnCancel:!0})}},void 0,n()("div",{[ir]:v.title},void 0,t,i&&n()(I.Z,{isSmall:!0,isMultiline:!0,[ir]:{[Bs]:2,width:"95%"}},void 0,i),o&&n()(I.Z,{isSmall:!0},void 0,o)),n()("div",{[ir]:v.switcherWrap},void 0,n()(P.Z,{disableTooltip:!d,[xs]:()=>d,render:e=>r[tr]("div",e,n()(T.Z,{on:a,[Ks]:s,[As]:m}))}))))}},63199:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ee});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(5366),l=i(21325),d=i(79315),c=i(49085);class u extends c.default{getInitialState(){return{open:!1}}}const m=new u;var p=i(42922),g=i(53953),h=i(63296),v=i(97464),f=i.n(v),y=i(8848),b=i(3909),S=i(24684),w=i(82990),M=i(95477),k=i(37688),C=i(92083),Z=i(27242),T=i(58032);const P=i(85).JRt,I=i(85).HHy,F=i(85).sel,_=i(85).O7j,x=i(85).aiS,A=i(85).MwL,B=i(85).HLU,D=i(85).OK,E=i(85).NbQ,L=i(85).tvI,R=i(85).C_1,N=i(85).NLk,O=i(85).NF1,U=i(85).Yf1,V=i(85).wuN,W=i(85).nHL,K=i(85).lWm,z=i(85).Scd,G=i(85).PXg,H=i(85).LlE,q=i(85).jkI,j=i(85).H1U,Q=i(85).EMU,J=i(85).Mm1,$=i(85).Au,Y=i(85).TEz,X=i(85).GPw,ee=i(85).wNq,te=i(85).EZQ,ie=i(85).dz$,oe=i(85).Joh,ne=i(85).sOA,ae=i(85).sM5,se=i(85).rI1,re=i(85).Hco,le=i(85).XNW,de=i(85).ESK,ce=i(85).Gpy,ue=i(85).nx5,me=i(85).Exd,pe=i(85).ChN,ge=i(85).eAn,he=i(85).tBn,ve=i(85).D7I,fe=i(85).zn9,ye=i(85).BQ6,be=i(85).g7N;class Se extends s.Z{renderComponent(){return a[ve](a[he],null,b.Z.notionLogoStroked({width:34,height:34,[be]:18}),n()("div",{[ye]:{...this.getPrimaryTextStyle(),[be]:6}},void 0,this.getPlanTitle()),n()("div",{[ye]:this[fe]()},void 0,this.getOneLiner()),this.renderPriceAndTerms(),this.renderBlockLimit(),this.renderPlanFeatures(),this.renderLearnMore())}renderBlockLimit(){const{planInfo:e}=this.props;if("team_free"===e[ge])return a[ve](a[he],null,n()("div",{[ye]:{[pe]:w.Z[pe].semibold,[me]:24}},void 0,n()(r.FormattedMessage,{id:"spaceSubscriptionUpgradePlanFeatures.blockLimit.title",[ue]:"Free"})),n()("div",{[ye]:this[fe]()},void 0,n()(r.FormattedMessage,{id:"spaceSubscriptionUpgradePlanFeatures.blockLimit.description",[ue]:"For the first 1,000 blocks"}),n()(T.Z,{[oe]:()=>n()(r.FormattedMessage,{id:"spaceSubscriptionUpgradePlanFeatures.blockLimit.tooltip",[ue]:"Blocks are pieces of content you add to a page, like a paragraph or to-do item.{br}Some features on the Team Plan are not available on the Team Trial.",[ce]:{br:n()("br",{})}}),placement:T.Z[de].Top,render:e=>a[ve]("span",e,b.Z.help({[le]:6,width:14,fill:y.ZP[re],[se]:"middle",[ae]:ne}))})))}renderPriceAndTerms(){const{planInfo:e,intl:t}=this.props;if("team_free"!==e[ge])return a[ve](a[he],null,n()("div",{[ye]:this.getPrimaryTextStyle()},void 0,n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.price",[ue]:"{price}",[ce]:{price:(0,k._)({[ge]:e[ge],intl:t})[e[ie]]}})),n()("div",{[ye]:this[fe]()},void 0,this.getFormattedTerm()))}getFormattedTerm(){const{planInfo:e,intl:t}=this.props,i=(0,S.MZ)(M.default,t),o={[te]:i.terms.pro,team:i.terms.team,plus:i.terms.plus,business:i.terms.business,[ee]:i.terms[ee]}[e[ge]];return{per_month:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.perMonthPricing.label",[ue]:"per month"}),per_member_per_month:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.perUserPerMonthPricing.label",[ue]:"per member, per month"})}[o]}renderPlanFeatures(){const{planInfo:e}=this.props;return a[ve](a[he],null,n()(T.Z,{delayThreshold:0,placement:T.Z[de].Left,[oe]:()=>this.renderPreviousPlanTierFeatures(),render:e=>a[ve]("span",f()({},e,{[ye]:{cursor:"help",[me]:14,[X]:`1px dotted ${this[$][Y]}`}}),n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.features",[ue]:"<span>Everything in {planName},</span> plus:",[ce]:{span:e=>n()("span",{[ye]:{[J]:1}},void 0,e),planName:this.getPreviousPlanName()}}))}),this.getFeaturesByPlanKey(e[ge]).map(((t,i)=>n()("div",{[ye]:{[ae]:Q,[j]:q,[H]:"4px 0px",[me]:14}},`${e[ge]}-feature-${i}`,b.Z.thinCheck({width:14,height:14,[G]:5,color:this[$][Y]}),t.label,t.isComingSoon&&n()("div",{[ye]:{[z]:this[$][K],[me]:10,[pe]:500,[W]:"0.015em",color:this[$][V],[ae]:"inline",[U]:"uppercase",[H]:"2px 4px",[le]:6,[O]:3,[N]:"nowrap"}},void 0,S.Mn)))))}renderPreviousPlanTierFeatures(){const e=this.getTierBelowKey();return this.getFeaturesByPlanKey(e).map(((t,i)=>n()("div",{[ye]:{[ae]:Q,[j]:q,[H]:"4px 0px",[me]:14}},`${e}-feature-${i}`,b.Z.thinCheck({width:14,height:14,[G]:5,color:this[$][R]}),t.label)))}renderLearnMore(){return n()("div",{[ye]:{[pe]:w.Z[pe].regular,[me]:14,[be]:16,color:this[$][V],[L]:E,marginTop:8,cursor:"pointer"},onClick:()=>{Z.Z.reset(),m.reset(),C.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",[D]:void 0,highlightedSetting:void 0})}},void 0,n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.learnMore",[ue]:"Learn more"}))}getPlanTitle(){const{planInfo:e}=this.props;return{[te]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.title.personal",[ue]:"Upgrade to Personal Pro"}),plus:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.title.plus",[ue]:"Upgrade to Plus"}),team:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.title.team",[ue]:"Upgrade to Team"}),[ee]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.title.enterprise",[ue]:"Upgrade to Enterprise"}),[B]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.title.teamFree",[ue]:"Upgrade to Team Trial"})}[e[ge]]}getOneLiner(){const{planInfo:e}=this.props;switch(e[ge]){case te:return n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.oneLiner.personal",[ue]:"For power users who want to do even more."});case"plus":case B:return n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.oneLiner.team",[ue]:"For teams to write, plan, and work together in one spot."});case ee:return n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.oneLiner.enterprise",[ue]:"Controls and support to run your company."})}}getPreviousPlanName(){return{[te]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.planName.personal",[ue]:"Pro"}),[A]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.planName.free",[ue]:"Personal"}),[B]:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.planName.teamTrial",[ue]:"Team Trial"}),team:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.planName.team",[ue]:"Team"}),plus:n()(r.FormattedMessage,{id:"subscriptionUpgradeDetails.planName.plus",[ue]:"Plus"})}[this.getTierBelowKey()]}getTierBelowKey(){const{planInfo:e}=this.props;return{[te]:A,team:B,plus:B,[B]:te,[ee]:"plus"}[e[ge]]}getFeaturesByPlanKey(e){const t=(0,S.Cq)();return{[A]:[t.unlimitedBlocks,t.shareWithLimitedGuests,t.syncAcrossDevices],[te]:[t[x],t.unlimitedGuests,t[_],t.contentApi],[B]:[t.unlimitedTeamMembers,t[F],t.adminTools],team:[t.unlimitedBlocks,t[x],t[_],t[I]],plus:[t.unlimitedBlocks,t[x],t[_],t[I]],[ee]:[t.sso,t.scimApi,t.advancedSecurity,t[P],t.customContract]}[e]}getPrimaryTextStyle(){return{[pe]:w.Z[pe].bold,[me]:22,lineHeight:1.1,[be]:2}}[fe](){return{[pe]:w.Z[pe].regular,[me]:14,lineHeight:1.4,[be]:22,color:this[$][V]}}}Se.displayName="SpaceSubscriptionUpgradePlanFeatures";const we=(0,r.injectIntl)(Se),Me=i(85).Wqi,ke=i(85).wgE,Ce=i(85).qJ8,Ze=i(85).PG2,Te=i(85).nx5,Pe=i(85).K_F,Ie=i(85).PXg,Fe=i(85).f57,_e=i(85).XNW,xe=i(85).xXv,Ae=i(85).HLU,Be=i(85).eAn;class De extends s.Z{constructor(){super(...arguments),this.storeTypes={},this.renderModal=()=>n()("div",{style:this.getModalStyle()},void 0,n()(we,{planInfo:{[Be]:Ae}}),n()("div",{style:this[xe]()},void 0,n()(h.Z,{isLarge:!0,style:{[_e]:Fe,[Ie]:12},[Ze]:this[Pe]},void 0,n()(r.FormattedMessage,{id:"spacePermissionSettingsTrialModal.cancel.label",[Te]:"Cancel"})),n()(p.Z,{[Ze]:this.handleTrialAccept,isLarge:!0},void 0,n()(r.FormattedMessage,{id:"spacePermissionSettingsTrialModal.tryItFree.label",[Te]:"Try it free"})))),this.handleTrialAccept=async()=>{const{[Ce]:e}=d.default.state;e&&(await l.cancelSubscription({[ke]:this[ke],[Me]:e,planType:"team",from:"space_permission_settings_trial_modal"}),this[Pe]())},this[Pe]=()=>{m.setState({...m.state,open:!1})}}renderComponent(){return n()(g.Z,{open:m.state.open,render:this.renderModal,onDismiss:this[Pe]})}[xe](){return{display:"flex",marginTop:40}}getModalStyle(){return{background:this.theme.popoverBackground,borderRadius:3,width:349,padding:24}}}De.displayName="SpacePermissionSettingsTrialModal";const Ee=De},98300:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ghe});var o=i(77094),n=i.n(o),a=i(97464),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(83355),u=i(5220),m=i(3909),p=i(4615),g=i(90965),h=i(3791),v=i(82990),f=i(5366),y=i(48298),b=i(7512),S=i(50906),w=i(47307),M=i(5978),k=i(29974),C=i(71119),Z=i(10161),T=i(54642);const P=i(85).MpX;async function I(e,t){if(Z.default.checkGate(P)){const i=await T.getEmailDomainSettings(e,{});"success"===i.type&&t.setState({...t.state,emailDomainSettings:i.data})}try{const i=await(0,C.pu)(e);t.setState({...t.state,accountSettings:{...i,error:void 0}})}catch(i){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:i}})}}var F=i(97627),_=i(21325),x=i(97880),A=i(23537),B=i(79315),D=i(74716),E=i(49085);class L extends E.default{getInitialState(){return{loadingState:"uninitialized"}}}const R=new L,N=i(85).Sgw,O=i(85).Y3B,U=i(85).SZh,V=i(85).qJ8,W=i(85).wgE;async function K(e){let{[W]:t,messageStoreEmitValue:i}=e;if(!function(e){const t=R.state;if("loading"===t[O])return!1;if(("uninitialized"===t[O]?void 0:t.messageStoreEmitValue)===e)return!1;return!0}(i))return!1;const{[V]:o,[U]:n}=B.default.state;if(!o||!n)return!1;"uninitialized"===R.state[O]&&R.setState({[O]:"loading"});const a=await async function(e){let{[W]:t,[V]:i,[U]:o}=e;const n=i.getModel();if(!n)return;if((0,u.H)({userId:o.id,spaceModel:n})){return await(0,A.sj)({[W]:t,spaceStore:i,includeArchived:!0,[N]:o.id,minRoleOnTeamStores:"reader"})}return await(0,A.qX)({[W]:t,spaceStore:i,includeArchived:!0,[N]:o.id})}({[W]:t,[V]:o,[U]:n});if(!(0,x.isDefined)(a))return R.setState({[O]:"uninitialized"}),!1;const{archivedTeams:s,unarchivedTeams:r}=(0,A.tV)(a);return R.setState({[O]:"loaded",archivedTeamIds:s.map((e=>e.id)),unarchivedTeamIds:r.map((e=>e.id)),messageStoreEmitValue:i}),!0}var z=i(12359),G=i(37181),H=i(28020),q=i(68821),j=i(43250),Q=i(4708),J=i(33929),$=i(17652),Y=i(67669),X=i(33665),ee=i(21115),te=i(8323),ie=i(53877);const oe=i(85).qeQ,ne=i(85).x5M,ae=i(85).P7l,se=i(85).jUc,re=i(85).uSV,le=i(85).vMQ,de=i(85).Ga3,ce=i(85).Epl,ue=i(85).X$r,me=i(85).geM,pe=i(85).tKx,ge=i(85).F5j,he=i(85).Va3,ve=i(85).bfy,fe=i(85).v62,ye=i(85).PhH,be=i(85).fAM,Se=i(85).dGR,we=i(85).fBi,Me=i(85).MhQ,ke=i(85).tUM,Ce=i(85)._tm,Ze=i(85).hJW,Te=i(85)._dZ,Pe=i(85).MUl,Ie=i(85).YGe,Fe=i(85).RkH,_e=i(85).g4T,xe=i(85).Al6,Ae=i(85).wU5,Be=i(85).CSo,De=i(85).DtP,Ee=i(85).Q_b,Le=i(85).whQ,Re=i(85).IE,Ne=i(85).D7o,Oe=i(85).GiB,Ue=i(85).INc,Ve=i(85).DBW,We=i(85).BfV,Ke=i(85).EKY,ze=i(85).PC5,Ge=i(85).g3w,He=i(85).XMQ,qe=i(85).py$,je=i(85).bmp,Qe=i(85).MOv,Je=i(85).b0i,$e=i(85).DuE,Ye=i(85).OZo,Xe=i(85).Ucp,et=i(85).o3t,tt=i(85).Lxl,it=i(85).xAf,ot=i(85).NYi,nt=i(85).EVe,at=i(85).Veo,st=i(85).le5,rt=i(85).tmb,lt=i(85).wr5,dt=i(85).MqD,ct=i(85).Wyb,ut=i(85).qaB,mt=i(85).iaY,pt=i(85).jS,gt=i(85).RZM,ht=i(85).Xv6,vt=i(85).l3E,ft=i(85).iKx,yt=i(85).qyt,bt=i(85)._5m,St=i(85).pCA,wt=i(85).gu6,Mt=i(85).AVE,kt=i(85).lij,Ct=i(85).yV$,Zt=i(85).s9n,Tt=i(85).fof,Pt=i(85).Y7P,It=i(85).NRY,Ft=i(85).VTZ,_t=i(85).RrV,xt=i(85).TEe,At=i(85).qM$,Bt=i(85).hh4,Dt=i(85).oh,Et=i(85).d_H,Lt=i(85).Sg4,Rt=i(85).fA3,Nt=i(85).OaK,Ot=i(85).g7y,Ut=i(85).pwv,Vt=i(85).g1z,Wt=i(85).kck,Kt=i(85).fBX,zt=i(85).CYo,Gt=i(85).ydf,Ht=i(85).n5k,qt=i(85).iqj,jt=i(85).r$I,Qt=i(85).YJP,Jt=i(85).LWj,$t=i(85).jl,Yt=i(85).lbf,Xt=i(85).nav,ei=i(85).kYw,ti=i(85).F3B,ii=i(85).pte,oi=i(85).uQ_,ni=i(85).DLB,ai=i(85).yMU,si=i(85).Ovb,ri=i(85).uxP,li=["page_viewed","page_created",ri,"page_restored",si,"page_moved",ai,ni,oi,ii,ti,ei,Xt,Yt,$t,Jt,Qt,jt,qt,Ht,Gt,zt,Kt,Wt,Vt,Ut,Ot,Nt,Rt,Lt,Et,Dt,Bt,At,xt,_t,Ft,It,Pt,Tt,Zt,"saml_toggled",Ct,kt,Mt,wt,St,bt,yt,ft,vt,ht,gt,pt,mt,ut,ct,dt,"login","logout",lt,rt,st,at,nt,ot,it,tt,et,Xe,Ye,$e,"team_created","team_archived","team_restored",Je,Qe,je,qe,He,Ge,ze,Ke,We,Ve,Ue,Oe,Ne,Re,Le,Ee,De,Be,Ae,xe,_e,Fe,Ie,Pe,Te,Ze,Ce,ke],di=[...["page_edited",Me,we,Se,be,ye,fe,ve,he,ge,pe,me,ue,ce,de,le,re],...li],ci={page_edited:se,[ye]:se,page_viewed:se,page_created:se,[ri]:se,[be]:se,page_restored:se,[si]:se,page_moved:se,[ai]:se,[ni]:se,[oi]:se,[ii]:se,[ti]:se,[ei]:se,[Xt]:se,[Me]:se,[we]:se,[Se]:se,[Yt]:ae,[$t]:ae,[Jt]:ae,[Qt]:ae,[jt]:ae,[Ht]:ae,[Lt]:ae,[Et]:ae,[qt]:ae,[Gt]:ae,[zt]:ae,[Kt]:ae,[Wt]:ae,[Vt]:ae,[Ut]:ae,[Ot]:ae,[Nt]:ae,[Rt]:ae,[Dt]:ae,[Bt]:ae,[At]:ae,[xt]:ae,[_t]:ae,[Ft]:ae,[It]:ae,[Pt]:ae,[Tt]:ae,[Zt]:ae,saml_toggled:ae,[Ct]:ae,[kt]:ae,[Mt]:ae,[fe]:ae,[ve]:ae,[he]:ae,[ge]:ae,[wt]:ae,[St]:ae,[bt]:ae,[yt]:ae,[ft]:ae,[vt]:ae,[ht]:ae,[gt]:ae,[pt]:ae,[mt]:ae,[ut]:ae,[dt]:ae,[Te]:ae,[Ze]:ae,[Ce]:ae,[ke]:ae,[ct]:ae,[pe]:ae,[me]:ae,[ue]:ae,[ce]:ae,[de]:ae,login:ne,logout:ne,[at]:ne,[nt]:ne,[ot]:ne,[lt]:ne,[rt]:ne,[st]:ne,[it]:ne,[tt]:ne,[et]:ne,[Xe]:ne,[Ye]:ne,[$e]:ne,[le]:ne,[re]:ne,[Ue]:oe,[Ne]:oe,[Oe]:oe,[Re]:oe,[Ee]:oe,[Le]:oe,team_created:oe,team_archived:oe,team_restored:oe,[Ge]:oe,[ze]:oe,[Ke]:oe,[Je]:oe,[Qe]:oe,[We]:oe,[xe]:oe,[Fe]:oe,[_e]:oe,[De]:oe,[Be]:oe,[Ae]:oe,[Ie]:oe,[Ve]:oe,[qe]:oe,[je]:oe,[He]:oe,[Pe]:oe},ui=l().groupBy((0,x.objectKeys)(ci),(e=>ci[e]));function mi(e){switch(e.actionName){case ye:case"page_edited":case"page_viewed":case"page_created":case ri:case be:case"page_restored":case si:case"page_moved":case ai:case ni:case oi:case ii:case ti:case ei:case Xt:case Me:case Se:case we:return e.target[se];case Yt:case $t:case Jt:case Qt:case jt:case Ht:case Lt:case Et:case Bt:case At:case Rt:case pt:case mt:case ut:case Dt:case xt:case _t:case Ft:case It:case"saml_toggled":case Ct:case kt:case Mt:case ve:case fe:case he:case ge:case"login":case"logout":case lt:case rt:case st:case at:case nt:case ot:case it:case tt:case et:case Xe:case Ye:case $e:case le:case re:case qt:case Gt:case zt:case Kt:case Wt:case Vt:case Ut:case Ot:case dt:case Nt:case Pt:case Tt:case Zt:case wt:case St:case bt:case yt:case ft:case vt:case ht:case gt:case"team_created":case"team_archived":case"team_restored":case Qe:case je:case qe:case He:case Ge:case ze:case Ke:case We:case Ve:case Ue:case Oe:case Ne:case Re:case Ee:case Le:case De:case Be:case Ae:case xe:case _e:case Fe:case Je:case Ie:case Pe:case ct:case pe:case me:case ue:case ce:case de:case Te:case Ze:case Ce:case ke:return;default:(0,x.unreachable)(e)}}let pi;!function(e){e.CreatedNewest="CreatedNewest",e.CreatedOldest="CreatedOldest"}(pi||(pi={}));var gi=i(30546);const hi=i(85).Jyz;class vi extends E.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:pi.CreatedNewest}}}const fi=new vi,yi=e=>{const{timeRange:t,actors:i,actions:o,sortOrder:n}=e,a=new URLSearchParams;return t[hi]&&a.append(hi,`${ie.convert.toUnixMs(t[hi])}`),t.ending&&a.append("ending",`${ie.convert.toUnixMs(t.ending)}`),(null==i?void 0:i.length)>0&&a.append("actors",i.map(gi.eW).join(",")),(null==o?void 0:o.length)>0&&a.append("actions",o.join(",")),a.append("sort",`${n||pi.CreatedNewest}`),a.toString()},bi=i(85).y5L,Si=i(85).DXG;class wi extends E.default{getInitialState(){return{[Si]:{}}}getCursor(e,t,i){if(i<=1||this.state.spaceId!==e)return;const o=yi(t);if(this.state.filterStr!==o)return;const n=this.state[Si][i-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this[bi](e,t,{status:"loading"})}updateLoadedResult(e,t,i){this[bi](e,t,{...i,status:"success",loadedAt:Date.now()})}updateError(e,t){this[bi](e,t,{status:"error"})}[bi](e,t,i){const o=yi(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===o?this.setState({spaceId:e,filterStr:o,[Si]:{...this.state[Si],[t.pageNum]:{...i}}}):this.setState({spaceId:e,filterStr:o,[Si]:{[t.pageNum||1]:{...i}}})}}const Mi=new wi;var ki=i(67940);class Ci extends E.default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaceIds:[],createAccount:!1,useMetadataUrl:!0}}}const Zi=Ci;var Ti=i(53680);class Pi extends E.default{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const Ii=new Pi,Fi=i(85).XhE;let _i;!function(e){e.Overview="overview",e.Users="users",e.Content="content",e.Search="search"}(_i||(_i={}));class xi extends E.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==_i.Users||t[Fi]&&t[Fi].usersAndStats)}}const Ai=new xi;class Bi extends E.default{getInitialState(){return{name:"",domain:"",domainState:"current-space",emailDomains:[],publicHomePage:void 0}}getValueForSpace(e){const t=e.getPublicContentDomain(),i=e.getPublicHomePage();if(e.isDefined())return{name:e.getName()||"",domain:t||"",emailDomains:e.getEmailDomains(),domainState:"current-space",publicHomePage:i}}}const Di=Bi,Ei=i(85).hef;class Li extends E.default{[Ei](){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:i,store:o}=e,n=await T.getEmailDomainsForSpace(t,{spaceId:i});if("failed"===n.type)return void w.showError(n);const{data:a}=n,s=Object.keys(a);return 0!==s.length?o.setState({emailDomains:s,spaceCreation:a[s[0]].spaceCreationEnum,settings:a[s[0]].settings}):o.setState(this[Ei]()),o.state}}const Ri=Li,Ni=i(85).tIL,Oi=i(85).JPH;class Ui extends E.default{getInitialState(){return{[Oi]:!1,givenName:"",familyName:"",name:"",startDayOfWeek:(0,ie.getDefaultStartDayOfWeek)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,error:void 0}}}getValueForUser(e,t,i){if(e.isDefined()){const o=e.getFullName(i),n=e.getProfilePhoto(),a=t.getSettings();return{...this.state,[Oi]:!1,profilePhoto:n,name:o||"",startDayOfWeek:void 0===(null==a?void 0:a[Ni])?(0,ie.getDefaultStartDayOfWeek)():null==a?void 0:a[Ni]}}}}const Vi=Ui;var Wi=i(92083),Ki=i(78291),zi=i(98905),Gi=i(85703),Hi=i(480),qi=i(81954),ji=i(24405),Qi=i(88632),Ji=i(64369),$i=i(27386),Yi=i(23189),Xi=i(70630),eo=i(63296);const to=i(85).nx5;function io(e){let{spaceId:t,filters:i,disabled:o}=e;window.__c={n:"AdminContentSearchExportButton"};const[a,s]=(0,d.useState)(!1),r=(0,Hi.O7)(),l=o||a,c=(0,ji.yK)((e=>({button:{opacity:l?.5:1}})),[l]);return n()(eo.Z,{style:c.button,disabled:l,onClick:async function(){s(!0),S.trackAdminContentSearchExportRequested(r,{filters:i}),await Xi.gJ(r,{spaceId:t,filters:i}),s(!1)}},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.export",[to]:"Export results"}))}var oo=i(98165),no=i(40394),ao=i(68785),so=i(16402),ro=i(58032),lo=i(69219);const co=i(85).D7I;function uo(e){let{dateTs:t,includeTime:i}=e;return n()(ro.Z,{render:e=>d[co]("div",e,n()(lo.i,{useThinTitle:!0,title:i?(0,so.uy)(t,!0):(0,so.gs)(t)})),renderTooltip:()=>(0,so.uy)(t)})}function mo(){window.__c={n:"LoadingDateCell"};const e=(0,ji.yK)((()=>({title:{width:"50%"}})),[]);return n()(lo.H,{titleStyles:e.title})}var po=i(42875),go=i(39098),ho=i(31278);const vo=i(85).Yzm,fo=i(85).RJH,yo=i(85).jkI,bo=i(85).UPJ,So=i(85).L_E,wo=i(85).kaG,Mo=i(85).voC,ko=i(85).GBw,Co=i(85).nx5,Zo=(0,f.defineMessages)({privateTeamspace:{id:"baseTable.pageCell.privateTeamspace",[Co]:"Private teamspace"},untitledPath:{id:"baseTable.pageCell.untitledPath",[Co]:ko}});function To(e){let{blockStore:t,rightIcon:i}=e;window.__c={n:"PageCell"};const o=(0,f.useIntl)(),a=(0,qi.VK)((()=>{var e;return null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),s=(0,qi.VK)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e.getRenderIcon({[Mo]:t[Mo]})}),[t]),r=(0,qi.VK)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e[wo]({[Mo]:t[Mo],userTimeZone:(0,po.r)(),intl:J.default.getIntl()})}),[t]),l=(0,ji.yK)((e=>({[So]:{display:"flex",flexDirection:"row",[bo]:"flex-start",alignItems:yo,padding:"8px 0",width:"100%",position:"relative"},summaryContainer:{flex:1,overflow:"hidden"},[fo]:{height:20,width:20,flexGrow:0,flexShrink:0,flexBasis:20,marginRight:12,display:"flex",[bo]:yo,alignItems:yo,borderRadius:6},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]),d=(0,qi.VK)((()=>{if(!t)return[];return(0,oo.getNavigablePath)(t).filter((e=>e.id!==t.id)).map((e=>{if(e instanceof go.zX)return e.getName()||o[vo](Zo.privateTeamspace);const t=e.getModel();return(null==t?void 0:t[wo]({[Mo]:e[Mo],userTimeZone:(0,po.r)(),intl:J.default.getIntl()}))||o[vo](Zo.untitledPath)})).reverse()}),[t,o]);return n()("div",{style:l[So]},void 0,n()("div",{style:l[fo]},void 0,n()(ho.Z,{icon:s,size:20,isEmptyPage:!1,disabled:!0})),n()("div",{style:l.summaryContainer},void 0,n()(Ji.Z,{showTooltipWhenTruncated:!0,style:r?l.name:l.nameUntitled},void 0,r||n()(f.FormattedMessage,{id:"baseTable.pageCell.untitledPage",[Co]:ko})),n()(Ji.Z,{showTooltipWhenTruncated:!0,style:l.byline},void 0,d.length>0?d.join("/"):a)),i)}var Po=i(42922),Io=i(89728);const Fo=i(85).ChN,_o=i(85).TEz,xo=i(85).jkI,Ao=i(85).UPJ,Bo=i(85).wgE,Do=i(85).fCB,Eo=i(85).nx5,Lo=i(85).L_E;function Ro(e){window.__c={n:"AdminContentSearchAcknowledgement"};const t=(0,Hi.O7)(),i=(0,ji.yK)((e=>({[Lo]:{marginTop:48,display:"flex",flexDirection:"column",[Ao]:xo,alignItems:xo},headerIcon:{width:36,height:36,color:e[_o],fill:"currentColor"},disclaimerTitle:{margin:"12px auto",[Fo]:v.Z[Fo].medium,fontSize:16},disclaimer:{[Fo]:v.Z[Fo].regular,fontSize:14,color:e[_o],textAlign:xo,width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",[Ao]:xo,color:e[_o]},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),o=(0,d.useCallback)((()=>{S.trackAdminContentSearchAcknowledgementConfirmed(t),F.NY(t)}),[t]);return n()("div",{style:i[Lo]},void 0,m.Z.lockedFilled(i.headerIcon),n()("h1",{style:i.disclaimerTitle},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",[Eo]:"Before using this feature"})),n()("p",{style:i.disclaimer},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",[Eo]:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})),n()(Po.Z,{style:i.acknowledgeButton,onClick:o},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",[Eo]:"Acknowledge"})),n()(Io.Z,{style:i.learnMoreButton,onClick:()=>{const e=(0,X.getLocalizedUrl)("adminContentSearch");M[Do]({[Bo]:t,url:e})}},void 0,m.Z.info(i.learnMoreButtonIcon),n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",[Eo]:"Learn more"})))}var No=i(95477);const Oo=i(85).TEz,Uo=i(85).ChN,Vo=i(85).jkI,Wo=i(85).MQM,Ko=i(85).zDZ,zo=i(85).nx5,Go=i(85).aqt,Ho=i(85).L_E;function qo(e){let{runNewSearch:t,error:i}=e;window.__c={n:"AdminContentSearchError"};const o=(0,ji.yK)((e=>({[Ho]:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:Vo,alignItems:Vo},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",[Uo]:v.Z[Uo].medium,fontSize:16},[Ko]:{[Uo]:v.Z[Uo].regular,fontSize:14,lineHeight:1.3,color:e[Oo],textAlign:Vo,width:328,margin:"0 auto 16px"},[Wo]:{borderRadius:4,background:e.cardBackground,fontFamily:v.Z.baseFontFamily.mono,fontSize:12,color:e[Oo],padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:Vo}})),[]),a="production"===No.default.env;return n()("div",{style:o[Ho]},void 0,m.Z.genericError(o.headerIcon),n()("h1",{style:o.title},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",[zo]:Go})),n()("p",{style:o[Ko]},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",[zo]:"Something went wrong when we were loading the results. Try to run your search again."})),a?null:n()("p",{style:o[Wo]},void 0,i.message),n()(eo.Z,{style:o.errorButton,onClick:()=>t(!0)},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",[zo]:"Retry"})))}var jo=i(87279),Qo=i(29798),Jo=i(33338),$o=i(52275),Yo=i(12508),Xo=i(78140),en=i(32163),tn=i(44532),on=i(72495),nn=i(91642);const an=i(85).PXg,sn=i(85).ccq,rn=i(85).ESK,ln=i(85)._lc,dn=(i(85).qTy,i(85).nx5),cn=i(85).j7K,un=i(85).y79,mn=i(85).L_E,pn=i(85).D7I,gn=i(85).PG2,hn=i(85).fbO,vn=i(85).P84,fn=i(85).ZmD,yn=i(85).VT2;function bn(e){let{selectedAudience:t,setSelectedAudience:i,onMenuClose:o,setPillTitleToActiveSelection:a}=e;window.__c={n:"AudienceFilter"};const r=(0,qi.qz)(void 0,Qo.Z),l=(0,ji.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{[an]:4},[mn]:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,[an]:4,fill:"currentColor"},teamIcon:{[an]:8}})),[]),[c,u]=(0,d.useState)(!1),p=["private",yn,fn,vn];function g(){u(!1),o&&o()}function h(){i&&i([])}function v(e){const o=t[hn](e)?[...t.filter((t=>t!==e))]:[...t,e];i&&i(o)}const y=n()(Jo.Z,{on:t.length>0,icon:m.Z.typesPerson(l.icon),title:a&&t[0]?Sn(t[0]):n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.title",[dn]:"Audience"}),[gn]:()=>u(!0),disabled:!i,hideChevron:!i});return i?n()(nn.Z,{},void 0,n()(tn.ZP,{popupType:tn.ZP[ln].Popup,[sn]:tn.ZP[rn].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,open:c,render:function(){const e={key:"teamOptions",items:p.map((e=>({key:e,action:()=>v(e),render:i=>d[pn]($o.Z,s()({},i,{icon:n()(Yo.Z,{checked:t[hn](e),[gn]:()=>v(e),size:16}),focused:!1,title:Sn(e),caption:wn(e),shouldWrapCaption:!0}))}))),render:e=>d[pn](on.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:l[mn]},void 0,n()(Xo.Z,{menuType:jo.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(en.Z,{type:en.i[un],store:r,[cn]:0,sections:[e]})),n()(on.Z,{topBorder:!0,style:l.footer},void 0,n()(Io.Z,{[gn]:h},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",[dn]:"Clear"})),n()(Po.Z,{[gn]:g},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",[dn]:"Done"}))))},onDismiss:g,keepFocus:!0,origin:y,preventScaleTransition:!0})):y}function Sn(e){switch(e){case"private":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",[dn]:"Private"});case fn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",[dn]:"Shared externally"});case yn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",[dn]:"Shared internally"});case vn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",[dn]:"Shared to web"});default:(0,x.unreachable)(e)}}function wn(e){switch(e){case"private":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",[dn]:"Pages that only a single workspace member has access to."});case fn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",[dn]:"Pages that are shared with guests or connections."});case yn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",[dn]:"Pages that are shared with other workspace members."});case vn:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",[dn]:"Pages that are available for anyone to see on the web."});default:(0,x.unreachable)(e)}}const Mn=i(85).TEz,kn=i(85).ChN,Cn=i(85).jkI,Zn=i(85).UPJ,Tn=(i(85).MB1,i(85).nxS),Pn=i(85).zDZ,In=i(85).BQ6,Fn=i(85).nx5,_n=i(85).L_E,xn=i(85).P84,An=i(85).mjJ,Bn=i(85).ZmD,Dn=i(85).cMN;function En(e){let{filters:t,setFilters:i}=e;window.__c={n:"AdminContentSearchSuggestions"};const o=(0,ji.yK)((e=>({[_n]:{display:"flex",flexDirection:"column",[Zn]:Cn,alignItems:Cn},title:{margin:"12px auto",[kn]:v.Z[kn].medium,fontSize:16},[Pn]:{[kn]:v.Z[kn].regular,fontSize:14,color:e[Mn],textAlign:Cn,width:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:440,margin:"12px auto 0",[Zn]:Cn,color:e.darkTextColor,boxShadow:e.borderBoxShadow},filterContainer:{margin:"0 8px",display:"flex",alignItems:Cn,[Zn]:Cn},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e[Mn],fill:"currentColor"}})),[]);return n()("div",{[In]:o[_n]},void 0,n()("h1",{[In]:o.title},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.title",[Fn]:"Search pages in your workspace"})),n()("p",{[In]:o[Pn]},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.description",[Fn]:"Use filters to find pages with specific sharing and permissions settings, such as:"})),n()(Io.Z,{[In]:o.suggestion,onClick:function(){i({query:"",[Dn]:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:[Bn],teamIds:[]},{[An]:!0})}},void 0,n()(f.FormattedMessage,{id:Tn,[Fn]:"Search for pages <filter></filter>",values:{filter:()=>n()("div",{[In]:o.filterContainer},void 0,n()(bn,{setPillTitleToActiveSelection:!0,selectedAudience:[Bn]}))}}),n()("div",{[In]:o.arrowIconContainer},void 0,m.Z.arrowLeftThick(o.arrowIcon))),n()(Io.Z,{[In]:o.suggestion,onClick:function(){i({query:"",[Dn]:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:[xn],teamIds:[]},{[An]:!0})}},void 0,n()(f.FormattedMessage,{id:Tn,[Fn]:"Search for pages <filter></filter>",values:{filter:()=>n()("div",{[In]:o.filterContainer},void 0,n()(bn,{setPillTitleToActiveSelection:!0,selectedAudience:[xn]}))}}),n()("div",{[In]:o.arrowIconContainer},void 0,m.Z.arrowLeftThick(o.arrowIcon))))}var Ln=i(26825),Rn=i(27006),Nn=i(29369);const On=i(85).ZmD,Un=i(85).VT2,Vn=i(85).nx5;i(85).WzF;function Wn(e){let{blockStore:t}=e;window.__c={n:"AudienceCell"};const[i,o]=(0,d.useState)();(0,d.useEffect)((()=>{!async function(){const{currentSpaceStore:e}=B.default.state,i=oo.getPermissionsPath(t),n=Ln.getInheritedPermissionItems(i),a=null==e?void 0:e.getPermissionItems().filter(Rn.isUserPermission),s=await Ln.getPageAudience({permissionItems:n,hasTeamLevelGuests:function(t){return!!e&&go.zX.createChildStore(e,{table:Nn.e0,id:t}).getMembers().some((e=>"team_level_guest"===e.type))},spaceUserPermissions:a});o(s)}()}),[t]);const a=(0,d.useMemo)((()=>{if(i)return Kn(i)}),[i]);return n()(lo.i,{useThinTitle:!0,title:a})}function Kn(e){switch(e){case"private":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",[Vn]:"Private"});case Un:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",[Vn]:"Shared internally"});case On:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",[Vn]:"Shared externally"});case"shared_to_web":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",[Vn]:"Published to web"});default:(0,x.unreachable)(e)}}var zn=i(93686);const Gn=i(85).nx5;function Hn(e){let{teamStore:t,useThinTitle:i}=e;window.__c={n:"TeamCell"};const o=(0,ji.yK)((e=>({icon:{height:20,width:20,color:e.lightIconColor,fill:"currentColor"},hiddenTeamName:{color:e.lightTextColor}})),[]),a=(0,qi.VK)((()=>null==t?void 0:t.getName()),[t]);return n()(lo.i,a?{useThinTitle:i,icon:t?n()(zn.p,{disabled:!0,store:t,size:24}):void 0,title:a}:{useThinTitle:i,icon:m.Z.eyeHide(o.icon),title:n()("span",{style:o.hiddenTeamName},void 0,n()(f.FormattedMessage,{id:"baseTable.teamCell.hiddenTeam",[Gn]:"Hidden"}))})}i(85).WzF;const qn=i(85).nx5;var jn;function Qn(e){let{blockStore:t,teamStore:i}=e;window.__c={n:"LocationCell"};const o=(0,ji.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),a=(0,qi.VK)((()=>{const e=(0,oo.getPermissionsPath)(t),i=(0,Ln.getInheritedPermissionItems)(e),o=i.filter((e=>!(0,Rn.isRestrictedPermission)(e)));return 1===o.length&&(0,Rn.isUserPermission)(o[0])?jn.Private:i.length>0?jn.Shared:jn.Hidden}),[t]);return i?n()(Hn,{useThinTitle:!0,teamStore:i}):function(){switch(a){case jn.Shared:return n()(lo.i,{useThinTitle:!0,icon:m.Z.typesPerson(o.icon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",[qn]:"Shared"})});case jn.Hidden:case jn.Private:return n()(lo.i,{useThinTitle:!0,icon:m.Z.lockedFilled(o.icon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",[qn]:"Private"})})}}()}!function(e){e.Shared="shared",e.Private="private",e.Hidden="hidden"}(jn||(jn={}));var Jn=i(15145),$n=i(43132),Yn=i(84210),Xn=i(77907),ea=i(61766),ta=i(55899),ia=i(97238),oa=i(8675),na=i(31945),aa=i(73063);const sa=i(85).PP_,ra=i(85).auS,la=i(85).j7K,da=i(85).y79,ca=i(85).yNZ,ua=i(85).sqI,ma=i(85).l5r,pa=(i(85).T36,i(85).nx5),ga=i(85).D7I,ha=i(85).uGP,va=i(85).Knl;function fa(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const i=(0,Hi.O7)(),o=(0,qi.qz)(void 0,ea.Z),a=(0,qi.qz)(void 0,oa.Z),r=(0,qi.qz)(void 0,ta.ZP),l=(0,ji.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e[ra],fill:sa},copyLinkIcon:{height:15,width:15,color:e[ra],fill:sa}})),[]),[c,u]=(0,d.useState)(!1);(0,d.useEffect)((()=>{a.setState({...a.state,privatePageStore:t,[va]:!0,loading:!1,error:void 0})}),[t,a]);const p={key:"actions",render:e=>d[ga](on.Z,e),items:[{key:"change-permissions",render:e=>d[ga]($o.Z,s()({},e,{icon:m.Z.settingsSecurity(l.changePermissionsIcon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",[pa]:"Change permissions"})})),action:function(){u(!0)}},{key:"copy-link",render:e=>d[ga]($o.Z,s()({},e,{icon:m.Z.link(l.copyLinkIcon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",[pa]:"Copy link to page"})})),action:async function(){const e=(0,Yn.ZP)({store:t,pageVisitSource:Jn.tY.CopyLink});await $n.copyString({environment:i,stringValue:e,copiedMessage:$n.clipboardMessages[ha]}),o.setState({open:!1})}}]};return n()(na.ZP,{popupType:tn.kQ.Popup,alignmentToOrigin:tn.ZP.Alignment.Center,placementToOrigin:tn.ZP.Placement.Right,style:{width:c?450:248},render:()=>c?n()(Xn.LazyShareMenuContainer,{store:t,[ua]:a,[ca]:r,location:ma}):n()(Xo.Z,{menuType:jo.og.Popup,width:248},void 0,n()(en.Z,{type:en.i[da],[la]:void 0,sections:[p]})),onClose:()=>{u(!1),ia.ZP.reset()},buttonPopupStore:o,renderOrigin:e=>d[ga](aa.Z,s()({icon:m.Z.dots},e))})}var ya=i(53695),ba=i(77420),Sa=i(36596),wa=i(28992),Ma=i(70301);const ka=i(85).NF1,Ca=i(85).AIq,Za=i(85).$Vg,Ta=i(85).UPJ,Pa=i(85).$bT,Ia=i(85).L_E,Fa=i(85).nx5,_a=i(85).Lbi;function xa(e){let{botId:t}=e;window.__c={n:"BotMenuItem"};const i=(0,f.useIntl)(),o=(0,Hi.O7)(),a=(0,qi.VK)((()=>go.t1.createUniqueRootStore(o,{table:ba.cZ,id:t})),[t,o]),s=(0,qi.VK)((()=>a[_a](i)),[a,i]),r=(0,qi.VK)((()=>a.getParentStore()),[a]),l=(0,qi.VK)((()=>{if(r){if(r instanceof go.U6)return r[_a](i);if(r instanceof go.H2)return r.getName()}}),[r,i]),d=(0,ji.yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return s?n()(wa.Z,{desktopIconStyle:d.desktopIconStyle,icon:n()(Ma.Z,{botStore:a,size:24}),title:s,caption:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",[Fa]:"Created by {creatorName}",values:{creatorName:l}})}):n()(Aa,{})}function Aa(){window.__c={n:"ShimmerLoader"};const e=(0,ji.yK)((e=>({[Ia]:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",[Pa]:"row",[Ta]:Za,alignItems:"center"},textContainer:{display:"flex",[Pa]:"column",[Ta]:Za,alignItems:Za,gap:6},icon:{flexGrow:0,[Ca]:0,width:24,height:24,[ka]:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,[Ca]:0,width:80,height:14,[ka]:"0.25em",marginLeft:4},byline:{flexGrow:0,[Ca]:0,width:150,height:10,[ka]:"0.25em",marginLeft:4}})),[]);return n()("div",{style:e[Ia]},void 0,n()(Sa.Z,{style:e.icon}),n()("div",{style:e.textContainer},void 0,n()(Sa.Z,{emphasized:!1,style:e.title}),n()(Sa.Z,{emphasized:!1,style:e.byline})))}const Ba=i(85).Yzm,Da=i(85).nx5,Ea=(0,f.defineMessages)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",[Da]:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",[Da]:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",[Da]:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",[Da]:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",[Da]:"None"}});function La(e,t){switch(t){case"editor":return e[Ba](Ea.editor);case"read_and_write":return e[Ba](Ea.readAndWrite);case"comment_only":return e[Ba](Ea.commentOnly);case"reader":return e[Ba](Ea.reader);case"none":return e[Ba](Ea.none)}}const Ra=i(85).nx5,Na=i(85).mFu,Oa=i(85).PP_,Ua=i(85).TEz;function Va(e){let{name:t,icon:i,role:o}=e;window.__c={n:"GroupMenuItem"};const a=(0,f.useIntl)(),s=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),r=La(a,o),l=(0,ji.yK)((e=>({defaultIcon:{height:18,width:18,color:e[Ua],fill:Oa},defaultGroupIcon:{height:20,width:20,color:e[Ua],fill:Oa}})),[]);return n()(wa.Z,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:n()(ho.Z,{disabled:!0,icon:i&&s?{[Na]:s[Na],icon:i}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:m.Z.typesPerson(l.defaultGroupIcon)}),title:t||n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",[Ra]:"Untitled{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}}),caption:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",[Ra]:"Group{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}})})}const Wa=i(85).nx5,Ka=i(85).qJ8,za=i(85).Tb$;function Ga(e){let{[za]:t}=e;window.__c={n:"SpaceMenuItem"};const i=(0,f.useIntl)(),o=(0,qi.VK)((()=>B.default.state[Ka]),[]),a=(0,qi.VK)((()=>{var e;return null===(e=B.default.state[Ka])||void 0===e?void 0:e.getName()}),[]),s=null==t?void 0:t.role,r=(0,Rn.isTieredPermissionRole)(s)?La(i,s):void 0;return n()(wa.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:o?n()(zn.p,{disabled:!0,store:o,size:24}):void 0,title:a,caption:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",[Wa]:"Members{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}})})}const Ha=i(85).nx5;function qa(e){let{teamId:t,role:i,onlyOwners:o}=e;window.__c={n:"TeamMenuItem"};const a=(0,Hi.O7)(),s=(0,f.useIntl)(),r=(0,qi.VK)((()=>new go.zX(a,{table:Nn.e0,id:t})),[a,t]),l=La(s,i),d=(0,qi.VK)((()=>r.getName()),[r]),c=d||n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",[Ha]:"Private teamspace"});return n()(wa.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:d?n()(zn.p,{disabled:!0,store:r,size:24}):m.Z.privateTeam(),title:c,caption:n()(f.FormattedMessage,o?{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",[Ha]:"Owners{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}}:{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",[Ha]:"Members{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var ja=i(64684);const Qa=i(85).EUZ,Ja=i(85).o$g,$a=i(85).Tb$;var Ya=i(19889),Xa=i(7928),es=i(45653);const ts=i(85).nx5,is=i(85).JJs;function os(e){let{userId:t,role:i,isGuest:o}=e;window.__c={n:"UserMenuItem"};const a=(0,f.useIntl)(),s=(0,Hi.O7)(),{[is]:r,userName:l}=(0,qi.VK)((()=>{const e=new go.U6(s,{table:Ya.KJ,id:t}),i=(0,Xa.Nz)(a,e.getModel());return{[is]:e,userName:i}}),[s,t,a]),d=La(a,i);return n()(wa.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:n()(es.Z,{[is]:r,size:24}),title:l,caption:n()(f.FormattedMessage,o?{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",[ts]:"Guest{maybeRoleString}",values:{maybeRoleString:d?` · ${d}`:""}}:{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",[ts]:"Member{maybeRoleString}",values:{maybeRoleString:d?` · ${d}`:""}})})}const ns=i(85).Yzm,as=i(85).Joh,ss=i(85).XNW,rs=i(85).jkI,ls=i(85).UPJ,ds=i(85).$bT,cs=i(85).TtP,us=i(85).Yvw,ms=i(85).KKT,ps=i(85).D7I,gs=i(85).Tb$,hs=i(85).rpY,vs=i(85).owK,fs=i(85).nx5,ys=(0,f.defineMessages)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",[fs]:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",[fs]:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",[fs]:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",[fs]:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",[fs]:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",[fs]:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",[fs]:"{numBots, plural, one {# connection} other {# connections}}"},separator:{[fs]:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function bs(e){let{blockStore:t}=e;window.__c={n:"SharedWithCellImpl"};const i=function(e){return(0,qi.VK)((()=>{const{data:t}=Ki.default.state,i=t?(0,ee.getVisibleUsers)(t):[],o=B.default.state.currentSpaceStore,n=(0,Y.getMostPermissiveBlockPermissions)(e),a=(null==o?void 0:o.getPermissionGroups())||[],s=(0,oo.getTeam)(e),r=n.find((e=>{let{[$a]:t}=e;return Rn.isPublicPermission(t)})),l=n.find((e=>{let{[$a]:t}=e;return Rn.isSpacePermission(t)})),d=s?n.find((e=>{let{[$a]:t}=e;return(0,ja.J2)(t,s.id)})):void 0,c=n.map((e=>{let{[$a]:t}=e;return t})).filter(Rn[Ja]),u=n.map((e=>{let{[$a]:t}=e;return t})).filter(Rn[Qa]),m=n.map((e=>{let{[$a]:t}=e;return t})).filter(Rn.isGroupPermission).reduce(((e,t)=>{const i=t.group_id,o=t.role,n=a.find((e=>e.id===i));if(n){const t={...n,role:o};e.push(t)}return e}),[]),[p,g]=n.map((e=>{let{[$a]:t}=e;return t})).filter(Rn.isUserPermission).reduce(((e,t)=>{const o=i.find((e=>e.userId===t.user_id));return Boolean(o&&!Rn.canAdmin(o.role)&&!Rn.canEdit(o.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:m,mostPermissivePublicItem:r,spacePermission:l,teamPermission:d,teamSharePermissions:c,teamOwnerSharePermissions:u,guestUserPermissions:p,memberUserPermissions:g,botPermissions:n.map((e=>{let{[$a]:t}=e;return t})).filter((e=>(0,Rn.isBotPermission)(e)))}}),[e])}(t),o=(0,f.useIntl)(),a=function(e,t){const{mostPermissivePublicItem:i,[vs]:o,groupPermissions:a,guestUserPermissions:s,memberUserPermissions:r,teamSharePermissions:l,teamOwnerSharePermissions:c,botPermissions:u}=e,p=o&&"none"!==o[gs].role;if(i&&"none"!==i[gs].role)return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",[fs]:"Shared to web"});if(!p&&0===a[cs]&&0===s[cs]&&0===r[cs]&&0===l[cs]&&0===c[cs]&&0===u[cs])return n()("div",{style:{display:"flex",[ds]:"row",[ls]:rs,alignItems:rs}},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",[fs]:"Nobody"}),n()(ro.Z,{[hs]:e=>d[ps]("div",e,m.Z.info({[ss]:4,height:14,width:14,opacity:.5})),[as]:()=>n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",[fs]:"No person, group, or teamspace has any access to this page."})}));const g=[];p?g.push(t[ns](ys.sharedWithWorkspaceMembers)):(c[cs]>0&&0===l[cs]?g.push(t[ns](ys.sharedWithTeamOwners)):l[cs]>0&&g.push(t[ns](ys.sharedWithTeamMembers)),r[cs]>0&&g.push(t[ns](ys.sharedWithMembers,{numMembers:r[cs]})),a[cs]>0&&g.push(t[ns](ys.sharedWithGroups,{numGroups:a[cs]})));s[cs]>0&&g.push(t[ns](ys.sharedWithGuests,{numGuests:s[cs]}));u[cs]>0&&g.push(t[ns](ys.sharedWithBots,{numBots:u[cs]}));return g.join(t[ns](ys.separator))}(i,o),r=[...i[vs]?[{key:"space-permission",[hs]:e=>{var t;return d[ps](Ga,s()({},e,{[gs]:null===(t=i[vs])||void 0===t?void 0:t[gs]}))},action:()=>{}}]:[],...i.teamOwnerSharePermissions.map((e=>({key:`${e[ms]}-owners`,[hs]:t=>d[ps](qa,s()({},t,{onlyOwners:!0,teamId:e[ms],role:e.role})),action:()=>{}}))),...i.teamSharePermissions.map((e=>({key:`${e[ms]}-members`,[hs]:t=>d[ps](qa,s()({},t,{teamId:e[ms],role:e.role})),action:()=>{}}))),...i.groupPermissions.map((e=>({key:e.id,[hs]:t=>d[ps](Va,s()({},t,{name:e.name,icon:e.icon,role:e.role})),action:()=>{}}))),...i.memberUserPermissions.map((e=>({key:e[us],[hs]:t=>d[ps](os,s()({},t,{userId:e[us],role:e.role})),action:()=>{}}))),...i.guestUserPermissions.map((e=>({key:e[us],[hs]:t=>d[ps](os,s()({},t,{isGuest:!0,userId:e[us],role:e.role})),action:()=>{}}))),...i.botPermissions.map((e=>({key:e.bot_id,[hs]:t=>d[ps](xa,s()({},t,{botId:e.bot_id})),action:()=>{}})))];return n()(ya.N,{title:a,items:r,disabled:0===r[cs]})}const Ss=d.memo(bs),ws=i(85).T04,Ms=i(85).fCB,ks=i(85).JJs,Cs=i(85).D7I,Zs=i(85).nx5,Ts=i(85).TtP,Ps=(i(85).pch,i(85).BQ6),Is=i(85).KYG,Fs=i(85).C_1,_s=i(85).QNi,xs=i(85).XNW,As=i(85).Mm1,Bs=i(85).jkI,Ds=i(85).H1U,Es=i(85).$Vg,Ls=i(85).UPJ,Rs=i(85).$bT,Ns=i(85).L_E;function Os(e){let{userStores:t,isClickable:i}=e;window.__c={n:"UsersCell"};const o=(0,f.useIntl)(),a=(0,Hi.O7)(),r=(0,ji.yK)((e=>({[Ns]:{display:"flex",[Rs]:"row",[Ls]:Es,[Ds]:Bs,height:"auto",paddingTop:8,[As]:8},avatar:{marginRight:4},plusMore:{opacity:.5,[xs]:4,display:"inline-block"},[_s]:{color:e[Fs],fontSize:12}})),[]),l=t[0],c=(0,qi.VK)((()=>{if(l)return l[Is]((e=>{let{getRecordValueAndSubscribe:t}=e;return t(l)}))}),[l]),u=n()("div",{[Ps]:r[Ns]},void 0,n()(es.Z,{[Ps]:r.avatar,userValue:c,size:20}),n()(f.FormattedMessage,{id:"baseTable.usersCell.userName",[Zs]:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser}<gray>+{remainingCount}</gray>} other {{firstUser}<gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Xa.Nz)(o,c),remainingCount:t[Ts]-1,gray:function(){for(var e=arguments[Ts],t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n()(Ji.Z,{[Ps]:r.plusMore},void 0,t)}}}));if(!i)return n()(ro.Z,{disableTooltip:t[Ts]<=1,render:e=>d[Cs]("div",e,u),renderTooltip:()=>d[Cs](d.Fragment,null,t.map(((e,t)=>n()(Ji.Z,{[Ps]:r[_s]},e?e.id:t,n()(Vs,{[ks]:e})))))});const m=t.map(((e,t)=>({key:null!=e&&e.id?null==e?void 0:e.id:t,render:t=>d[Cs](Us,s()({[ks]:e},t)),action:()=>null!=e&&e.getEmail?M[Ms]({environment:a,url:`mailto:${null==e?void 0:e.getEmail()}`}):void 0})));return n()(ya.N,{hideDropdownIcon:!0,title:u,items:m})}function Us(e){let{[ks]:t,...i}=e;window.__c={n:"EmailableUserSummary"};const o=(0,qi.VK)((()=>null==t?void 0:t[Is]((e=>{let{getRecordValueAndSubscribe:i}=e;return i(t)}))),[t]),a=(0,ji.yK)((e=>({[Ns]:{display:"flex",[Rs]:"row",[Ls]:Es,[Ds]:Bs,height:"auto",paddingTop:8,[As]:8},avatarContainer:{display:"flex",[Ls]:Bs,[Ds]:Bs},copyContainer:{display:"flex",[Ls]:Bs,[Ds]:Bs,[xs]:"auto",opacity:.5},nameContainer:{[xs]:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},[ws]:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return d[Cs](Io.Z,s()({[Ps]:a[Ns]},i),n()("div",{[Ps]:a.avatarContainer},void 0,n()(es.Z,{userValue:o,size:24})),n()("div",{[Ps]:a.nameContainer},void 0,n()(Ji.Z,{[Ps]:a.name},void 0,n()(Vs,{[ks]:t})),o?n()(Ji.Z,{[Ps]:a[ws]},void 0,o[ws]):null),n()("div",{[Ps]:a.copyContainer},void 0,m.Z.mail({height:18,width:18})))}function Vs(e){window.__c={n:"UserFullDisplayName"};const t=(0,f.useIntl)(),{[ks]:i}=e,o=(0,qi.VK)((()=>null==i?void 0:i[Is]((e=>{let{getRecordValueAndSubscribe:t}=e;return t(i)}))),[i]);return d[Cs](d.Fragment,null,(0,Xa.Nz)(t,o))}function Ws(e){let{blockStore:t,userIds:i,isClickable:o}=e;window.__c={n:"UsersFromIdsCell"};const a=(0,qi.VK)((()=>i.map((e=>go.U6.createChildStore(t,{table:Ya.KJ,id:e})))),[t,i]);return n()(Os,{userStores:a,isClickable:o})}const Ks=i(85).jkI,zs=i(85).MLn,Gs=i(85).g7N,Hs=i(85).nLZ,qs=i(85).GiO,js=i(85).pSK,Qs=i(85).cMN,Js=i(85).F7X,$s=i(85).OHs,Ys=(i(85).DJK,i(85).Mk5),Xs=i(85).dBt,er=i(85).hDW,tr=i(85).veP,ir=i(85).O9h,or=i(85).nx5,nr=i(85).XZb,ar={id:"page",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.name",[or]:"Page"}),[ir]:e=>n()(To,{[er]:e[tr],rightIcon:n()(fa,{[er]:e[tr]})}),[Xs]:{width:320,maxWidth:320},[Ys]:!1},sr={id:"location",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.location.name",[or]:"Location"}),[ir]:e=>n()(Qn,{[er]:e[tr],[$s]:e[$s]}),[Xs]:{width:140},[Ys]:!1},rr={id:Js,[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdTime.name",[or]:"Created on"}),[ir]:e=>n()(uo,{dateTs:e[Js]}),[Xs]:{width:140},[Ys]:!1},lr={id:Qs,[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",[or]:"Last edited on"}),[ir]:e=>n()(uo,{dateTs:e[Qs]}),[Xs]:{width:140},[Ys]:!1},dr={id:"createdBy",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdBy.name",[or]:"Created by"}),[ir]:e=>e.createdById?n()(Ws,{[er]:e[tr],userIds:[e.createdById]}):null,[Xs]:{width:140},[Ys]:!1},cr={id:"lastEditedBy",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",[or]:"Last edited by"}),[ir]:e=>e.lastEditedById?n()(Ws,{[er]:e[tr],userIds:[e.lastEditedById]}):null,[Xs]:{width:140},[Ys]:!1},ur=[ar,sr,{id:"audience",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audience.name",[or]:"Audience"}),[ir]:e=>n()(Wn,{[er]:e[tr]}),[Xs]:{width:140},[Ys]:!1},{id:"sharedWith",[nr]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWith.name",[or]:"Shared with"}),[ir]:e=>n()(Ss,{[er]:e[tr]}),[Xs]:{width:140},[Ys]:!1},cr,lr,dr,rr];function mr(e){let{loading:t,error:i,loadNextPage:o,filters:a,setFilters:s,pageStores:r,[js]:l,runNewSearch:c}=e;window.__c={n:"AdminContentSearchTable"};const u=(0,qi.VK)((()=>{const e=B.default.state[qs],t=null==e?void 0:e.getSettings();return null==t?void 0:t.admin_content_search_acknowledgement}),[]),m=u&&!t&&!l,p=u&&!l,g=(0,qi.VK)((()=>r.map((e=>({id:e.id,isClickable:!1,[tr]:e,[$s]:(0,oo.getTeam)(e),[Js]:e.getCreatedTime(),[Qs]:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById()})))),[r]),h=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:ur,theme:e,containerMarginTop:0})),[]);return i?n()(qo,{runNewSearch:c,error:i}):u?l&&0===g.length?n()(En,{filters:a,setFilters:s}):d.createElement(d.Fragment,null,n()(no.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:ur,rows:g,onScrollBottom:p?o:void 0,renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,style:{[Hs]:15,[Gs]:40,[zs]:Ks}},void 0,m&&n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.empty",[or]:"No pages found with your query."})),styles:h}),t?n()(ao.Z,{style:{margin:"24px auto 24px"}}):null):n()(Ro,{})}var pr=i(2438);const gr=i(85).TLr;function hr(e){let{spaceStore:t}=e;return(0,qi.VK)((()=>{const{data:e}=Ki.default.state;if(!e)return{loading:!0};const i=ee.getVisibleUsers(e);if(!i.every((e=>go.U6[gr](t,{table:Ya.KJ,id:e.userId}).isReady())))return{loading:!0};const o=i.filter(pr.CF),n=i.filter(pr.du);return{loading:!1,members:o.map((e=>{let{userId:i}=e;return go.U6[gr](t,{table:Ya.KJ,id:i})})),guests:n.map((e=>{let{userId:i}=e;return go.U6[gr](t,{table:Ya.KJ,id:i})}))}}),[t])}var vr=i(84619),fr=i(16639),yr=i(43145),br=i(46978),Sr=i(85567),wr=i(719);const Mr=i(85).wuN,kr=i(85).PP_,Cr=i(85).UPJ,Zr=i(85).PXg,Tr=i(85).jkI,Pr=i(85).$bT,Ir=i(85).ccq,Fr=i(85).ESK,_r=i(85)._lc,xr=(i(85).qTy,i(85).j7K),Ar=i(85).y79,Br=i(85).Dd5,Dr=i(85).Yzm,Er=i(85).L_E,Lr=i(85).D7I,Rr=i(85).Mm1,Nr=i(85)._V5,Or=i(85).PG2,Ur=i(85).nxm,Vr=i(85).pkR,Wr=i(85).mFu,Kr=i(85).lUP,zr=i(85).BQ6,Gr=i(85).JJs,Hr=i(85).Mo1,qr=i(85).fbO,jr=i(85).eiN,Qr=i(85).qJ8,Jr=i(85).nx5,$r=(0,f.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",[Jr]:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",[Jr]:"Search for users and groups..."}});function Yr(e){let{userStores:t,title:i,selectedItems:o,setSelectedItems:a,onMenuClose:r,isMultiSelect:l,includePermissionGroups:c,guestUserIdSet:u}=e;window.__c={n:"UsersFilter"};const p=(0,f.useIntl)(),g=(0,qi.qz)(void 0,Qo.Z),h=(0,ji.yK)((e=>({optionContainer:{display:"flex",[Pr]:"row",alignItems:Tr},optionAvatar:{[Zr]:8},[Er]:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",[Cr]:"space-between",display:"flex"},[Kr]:{width:16,[Zr]:4,fill:kr},defaultGroupIcon:{height:22,width:22,color:e[Mr],fill:kr},defaultGroupIconPill:{height:14,width:14,color:e[Mr],fill:kr},groupIconSpacing:{[Zr]:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",[Pr]:"row",[Cr]:Tr,alignItems:Tr},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e[Mr],fontSize:12,lineHeight:"15px"}})),[]),[v,y]=(0,d.useState)(10),[b,S]=(0,d.useState)(!1),[w,M]=(0,d.useState)(""),k=t.length,C=(0,qi.VK)((()=>B.default.state[Qr]),[]),Z=(0,d.useMemo)((()=>o.map((e=>{let{id:t}=e;return t}))),[o]),T=(0,qi.VK)((()=>{const e=B.default.state[Qr];return c&&e?e.getPermissionGroups():[]}),[c]),P=(0,qi.VK)((()=>Z.map((e=>t.find((t=>t.id===e))))[jr](x.isDefined)),[Z,t]),I=(0,qi.VK)((()=>Z.map((e=>T.find((t=>t.id===e))))[jr](x.isDefined)),[Z,T]);function F(){y(10),S(!1),M(""),r()}function _(){M(""),a([])}function A(e){e<5&&v<k&&y(v+10)}function D(e){if(l){return Z[qr](e.id)?[...o[jr]((t=>{let{id:i}=t;return i!==e.id}))]:[...o,e]}return Z[qr](e.id)?[]:[e]}function E(e){const t=D({id:e,type:"user"});a(t),M("")}function L(e){const t=D({id:e,type:Hr});a(t),M("")}const R=(0,d.useCallback)((e=>{M(e.target.value)}),[]),N=(0,qi.VK)((()=>P.map((e=>{const t=(0,Xa.Nz)(p,e.getModel()),i=!!u&&u.has(e.id);return n()(Sr.Z,{isSingle:!0,format:vr.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=Z[jr]((t=>t!==e.id)).map((e=>({id:e,type:"user"})));a(t)},[zr]:i?h.guestPillContainer:h.pillContainer,value:n()("div",{[zr]:h.pillContents},void 0,i?m.Z.globe2(h.guestIcon):n()(es.Z,{[Gr]:e,size:16}),n()(Ji.Z,{[zr]:h.pillText},void 0,t))},e.id)}))),[Z,P,a,u,h,p]),O=(0,qi.VK)((()=>I.map((e=>{const t=fr.kF({intl:p,group:e});return n()(Sr.Z,{isSingle:!0,format:vr.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=Z[jr]((t=>t!==e.id)).map((e=>({id:e,type:Hr})));a(t)},[zr]:h.pillContainer,value:n()("div",{[zr]:h.pillContents},void 0,n()(ho.Z,{[Vr]:!0,[Kr]:e[Kr]&&C?{[Wr]:C[Wr],[Kr]:e[Kr]}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:m.Z.typesPerson(h.defaultGroupIconPill),[zr]:h.groupIconSpacing}),n()(Ji.Z,{[zr]:h.pillText},void 0,t))},e.id)}))),[Z,I,a,h,C,p]);const U=n()(Jo.Z,{on:Z.length>0,[Kr]:m.Z.person(h[Kr]),title:i,[Or]:()=>S(!0)});return n()(nn.Z,{},void 0,n()(tn.ZP,{popupType:tn.ZP[_r].Popup,[Ir]:tn.ZP[Fr].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,open:b,render:function(){const e=[];for(const o of t){var i;const t=(0,Xa.Nz)(p,o.getModel()),a=!!u&&u.has(o.id);(t[Ur]()[qr](w)||null!==(i=o.getEmail())&&void 0!==i&&i[Ur]()[qr](w))&&e.push({key:o.id,action:()=>E(o.id),render:e=>d[Lr]($o.Z,s()({},e,{[Kr]:l?n()(Yo.Z,{checked:Z[qr](o.id),[Or]:()=>E(o.id),size:16}):n()(br.Z,{isSelected:Z[qr](o.id)}),focused:!1,title:n()("div",{[zr]:h.optionContainer},void 0,n()(es.Z,{[Gr]:o,size:24,[zr]:h.optionAvatar}),n()("div",{[zr]:{[Nr]:4,[Rr]:4}},void 0,n()(Ji.Z,{[zr]:h.optionTitle},void 0,t),n()(Ji.Z,{[zr]:h.optionCaption},void 0,n()(f.FormattedMessage,a?{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",[Jr]:"Guest"}:{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",[Jr]:"Member"}))))}))})}const r=[];for(const t of T){const e=fr.kF({intl:p,group:t});e[Ur]()[qr](w)&&r.push({key:t.id,action:()=>L(t.id),render:i=>d[Lr]($o.Z,s()({},i,{[Kr]:l?n()(Yo.Z,{checked:Z[qr](t.id),[Or]:()=>L(t.id),size:16}):n()(br.Z,{isSelected:Z[qr](t.id)}),focused:!1,title:n()("div",{[zr]:h.optionContainer},void 0,n()(ho.Z,{[Vr]:!0,[Kr]:t[Kr]&&C?{[Wr]:C[Wr],[Kr]:t[Kr]}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:m.Z.typesPerson(h.defaultGroupIcon),[zr]:h.groupIconSpacing}),n()("div",{[zr]:{[Nr]:4,[Rr]:4}},void 0,n()(Ji.Z,{[zr]:h.optionTitle},void 0,e),n()(Ji.Z,{[zr]:h.optionCaption},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",[Jr]:"Group"}))))}))})}const y={key:"no-results",action:()=>{},render:e=>d[Lr](Ji.Z,s()({isSecondaryColor:!0,[zr]:h.noResultsMessage},e),n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",[Jr]:"No results found."}))},b=[...e,...r],S={key:"userOptions",items:b.length>0?b.slice(0,v):[y],render:e=>d[Lr](on.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{[zr]:h[Er]},void 0,n()(wr.Z,{focus:!0,value:w,[zr]:h.input,placeholder:J.default[Dr](c?$r.usersAndGroupsPlaceholder:$r.usersPlaceholder),[Br]:R,onRemoveLastToken:()=>{const e=o.slice(0,-1);a(e)},tokens:[...N,...O]}),n()(Xo.Z,{menuType:jo.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(en.Z,{type:en.i[Ar],store:g,[xr]:0,sections:[S]}),n()(yr.Z,{[Br]:A})),n()(on.Z,{topBorder:!0,[zr]:h.footer},void 0,n()(Io.Z,{[Or]:_},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",[Jr]:"Clear"})),n()(Po.Z,{[Or]:F},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",[Jr]:"Done"}))))},onDismiss:F,keepFocus:!0,origin:U,preventScaleTransition:!0}))}const Xr=i(85).nx5,el=i(85).Wqi;function tl(e){let{[el]:t,createdByFilterIds:i,setCreatedByFilter:o,runNewSearch:a,includeGuests:s}=e;window.__c={n:"CreatedByFilter"};const r=hr({[el]:t}),l=(0,d.useMemo)((()=>r.loading?[]:s?[...r.members,...r.guests]:r.members),[r,s]),c=(0,d.useMemo)((()=>r.loading?new Set:new Set(r.guests.map((e=>e.id)))),[r]);const u=(0,d.useMemo)((()=>i.map((e=>({id:e,type:"user"})))),[i]);return n()(Yr,{userStores:l,title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",[Xr]:"Created by"}),selectedItems:u,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));o(t)},onMenuClose:a,guestUserIdSet:c})}var il=i(40506),ol=i(80084),nl=i(64921),al=i(14871),sl=i(76150),rl=i(13854),ll=i(41558),dl=i(3386),cl=i(67950),ul=i(40721),ml=i(86825),pl=i(46945),gl=i(84795);const hl="Invalid date",vl="Invalid range";class fl extends E.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const yl=fl;var bl=i(74194);const Sl=i(85).bb$,wl=i(85).t7b,Ml=i(85).COd,kl=i(85).nx5,Cl=i(85).cFV,Zl=i(85).xOW,Tl=i(85).fBv,Pl=i(85).g7N,Il=i(85).Neb,Fl=i(85).xG0,_l=i(85).wDG,xl=i(85).nm$,Al=i(85).zjL,Bl=i(85).o8N,Dl=i(85).BPD,El=i(85).cG$,Ll=i(85).zfW,Rl=i(85).QmD,Nl=i(85).Wp_,Ol=i(85).Gnd,Ul=i(85).tBn,Vl=i(85).Yzm,Wl=i(85).AIq,Kl=i(85).PXg,zl=i(85).XNW,Gl=i(85).dMt,Hl=i(85).X_m,ql=i(85).BQ6,jl=i(85).Dd5,Ql=i(85).urI,Jl=i(85).D7I,$l=i(85).kdC,Yl=i(85).Exd,Xl=i(85).l6S,ed=i(85).NtL,td=i(85).XCs,id=i(85).YDv,od=i(85).Au,nd=i(85).Scd,ad=i(85).OM8,sd=i(85).NF1,rd=i(85).jkI,ld=i(85).H1U,dd=i(85).raT,cd=i(85).a6S,ud=i(85).AL1,md=i(85).y4s,pd=i(85).dLQ,gd=i(85).P0R,hd=i(85).cZW,vd=i(85).wAX,fd=i(85).wgE,yd=i(85).E0z,bd=i(85).XtO;class Sd extends c.Z{constructor(){super(...arguments),this.storeTypes={[bd]:yl},this.renderInput=()=>{const{[yd]:e}=this[fd],{[bd]:t,hideClearButton:i,focus:o,[vd]:a,[hd]:r,...l}=this[gd],c=e[pd]?md:ud,u=e[pd]?cd:ud,m=bl.Z.Format[dd],p=e[pd]?void 0:o;return n()("div",{[ql]:{display:"flex",[ld]:rd,[sd]:3,[ad]:2,[nd]:this[od].inputBackground,[id]:8,[td]:8,flexBasis:"50%",...this.getInputStyles().inputOuterStyle}},void 0,d[Jl](bl.Z,s()({},l,{type:c,[Ql]:m,[hd]:r,focus:"date"===p,onFocus:this[ed],[jl]:this.handleDateChange,onSubmit:e=>this[Xl](e,md),onBlur:this.handleBlur,value:this.getDateInputValue(),size:1,[ql]:{[Yl]:e[pd]?16:14},[$l]:!a&&this[$l](),onClearButtonClick:this.handleClear})),a&&d[Jl](d[Ul],null,n()("div",{[ql]:{[Hl]:14,width:1,[nd]:this[od][Gl],[zl]:6,[Kl]:12,[Wl]:0}}),d[Jl](bl.Z,s()({},l,{[hd]:J.default[Vl](Ic.timePlaceholder),type:u,[Ql]:m,focus:"time"===p,onFocus:this.handleTimeFocus,[jl]:this.handleTimeChange,onSubmit:e=>this[Xl](e,"time"),onBlur:this.handleBlur,value:this.getTimeInputValue(),size:1,[ql]:{[Yl]:e[pd]?16:14},[$l]:this[$l](),onClearButtonClick:this.handleClear}))))},this[ed]=e=>{const{onDateFocus:t}=this[gd],{[bd]:i}=this[Ol];i[Nl]({...i[Rl],[Ll]:!1}),t&&t(e)},this.handleTimeFocus=e=>{const{onTimeFocus:t}=this[gd],{[bd]:i}=this[Ol];i[Nl]({...i[Rl],[El]:!1}),t&&t(e)},this.handleClear=()=>{const{onClear:e,onUpdate:t}=this[gd],{[bd]:i}=this[Ol];i[Nl]({...i[Rl],[Ll]:!0,[El]:!0,[Dl]:{[md]:void 0,[cd]:void 0},[Bl]:void 0});const o=this[Al]();o&&t(o),i[Nl]({...i[Rl],[Ll]:!1,[El]:!1}),e&&e()},this.handleDateChange=e=>{const{[yd]:t}=this[fd],{[bd]:i}=this[Ol];i[Nl]({...i[Rl],[Ll]:!0,[Dl]:{...i[Rl][Dl],[md]:e[xl].value||""}}),t[_l]&&this.handleBlur()},this.handleTimeChange=e=>{const{[yd]:t}=this[fd],{[bd]:i}=this[Ol];i[Nl]({...i[Rl],[El]:!0,[Dl]:{...i[Rl][Dl],[cd]:e[xl].value||""}}),t[_l]&&this.handleBlur()},this[Xl]=(e,t)=>{var i,o;const{onUpdate:n,onSubmit:a,[vd]:s}=this[gd],{[bd]:r}=this[Ol];let l;(!s||"date"===t&&null!==(i=this[gd].value)&&void 0!==i&&i[Fl]||"time"===t&&null!==(o=this[gd].value)&&void 0!==o&&o[Il])&&(l=this[Al](),l&&(n(l),l[Bl]?r[Nl]({...r[Rl],[Ll]:!1,[Bl]:l[Bl]}):r.reset())),a&&a(e,l)},this.handleBlur=e=>{const{onUpdate:t,onBlur:i}=this[gd],{[bd]:o}=this[Ol],n=this[Al]();n?(t(n),n[Bl]?o[Nl]({...o[Rl],[Ll]:!1,[El]:!1,[Bl]:n[Bl]}):o.reset()):o[Nl]({...o[Rl],[Ll]:!1,[El]:!1}),e&&i&&i(e)},this.styles={menuItem:{[Pl]:this[fd][yd][pd]?1:12},inputWrapper:{[sd]:3,[Hl]:28,[td]:this[$l]()?6:0,[Tl]:Zl},inputEditRegion:{width:this[$l]()?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",[Tl]:Zl},[Cl]:-8}}didUpdate(e){const{[bd]:t}=this[Ol];l().isEqual(e.value,this[gd].value)||t.reset()}renderComponent(){const e=this.styles,t=this.getError();return t?n()(ro.Z,{renderTooltip:()=>t,forceVisibleState:!0,placement:ro.Z.Placement.Left,render:this.renderInput,originGap:e[Cl]}):this.renderInput()}getDateInputValue(){const{[yd]:e}=this[fd],{value:t,intl:i}=this[gd],{[bd]:o}=this[Ol];return e[pd]?t?gi.dd(t,i):"":o[Rl][Dl][md]?o[Rl][Dl][md]:o[Rl][Ll]?o[Rl][Dl][md]||"":t?gi.dd(t,i):""}getTimeInputValue(){const{[yd]:e}=this[fd],{value:t,intl:i}=this[gd],{[bd]:o}=this[Ol];return e[pd]?t?gi.KN(t,i):"":o[Rl][Dl][cd]?o[Rl][Dl][cd]:o[Rl][El]?o[Rl][Dl][cd]||"":t?gi.KN(t,i):""}getError(){const{[bd]:e}=this[Ol],{intl:t}=this[gd];if(e[Rl][Bl])switch(e[Rl][Bl]){case hl:return t[Vl]({id:"dateInputError.invalidDateError.tooltip",[kl]:"Invalid date"});case vl:return t[Vl]({id:"dateInputError.invalidDateRangeError.tooltip",[kl]:"Invalid range"});default:(0,x.unreachable)(e[Rl][Bl])}}[Al](){const{validate:e}=this[gd],t=this.parseCurrentDateTimeValue();if(t)return e?e(t):t}parseCurrentDateTimeValue(){const{[bd]:e}=this[Ol],{value:t,[vd]:i,isEndingDate:o}=this[gd];if(!e[Rl][Ll]&&!e[Rl][El])return;if(!e[Rl][Dl][md]&&!e[Rl][Dl][cd])return{value:void 0};const n=(0,gl.parseDateValue)(e[Rl][Dl][md]||"",this[gd].intl);if(n){let e="";return e=i?(null==t?void 0:t[Fl])||"00:00":o?"23:59":"00:00",{value:{type:"datetime",[Il]:n,[Ml]:(null==t?void 0:t[Ml])||(0,po.r)(),[Fl]:e}}}const a=(0,gl.parseTimeValue)(e[Rl][Dl][cd]||"",this[gd].intl);return(null!=t&&t[Il]||n)&&a?{value:{type:"datetime",[Il]:(null==t?void 0:t[Il])||n,[Fl]:a,[Ml]:(null==t?void 0:t[Ml])||(0,po.r)()}}:{[Bl]:hl}}[$l](){const{[yd]:e}=this[fd],{hideClearButton:t}=this[gd];return!!e[pd]||!t}getInputStyles(){const{[yd]:e}=this[fd],{inputStyle:t,inputOuterStyle:i,[ql]:o}=this[gd],n=this.styles;return{[ql]:{...n.menuItem,...o},inputOuterStyle:{...n.inputWrapper,...i,...this.getInputBorders()},inputStyle:{...n.inputEditRegion,...e[pd]&&n.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focus:t}=this[gd],i=this[wl](),o=this.getError();if(!e)return o?i.inputError:t?i.inputFocused:i.inputDefault}[wl](){return{inputDefault:{[nd]:this[od].inputBackground,boxShadow:this[od].inputBoxShadow},inputFocused:{boxShadow:this[od][Sl]},inputError:{boxShadow:this[od].outlineRedInputBoxShadow},[hd]:{color:this[od].lightTextColor}}}}Sd.displayName="DateTimeInputMenuItem";const wd=(0,f.injectIntl)(Sd),Md=i(85).JcN,kd=i(85).COd,Cd=i(85).Neb,Zd=i(85).OVG,Td=i(85).TV8,Pd=i(85).mxd,Id=i(85).PG2,Fd=i(85).xG0,_d=i(85).$bT,xd=i(85).wuN,Ad=i(85).Ixx,Bd=i(85).OtN,Dd=i(85).nAm,Ed=i(85).r9y,Ld=i(85).Fk5,Rd=i(85).qpZ,Nd=i(85).iVN,Od=i(85).ceT,Ud=i(85).u6Q,Vd=i(85).TB2,Wd=i(85).U0Q,Kd=i(85).Wp_,zd=i(85).o8N,Gd=i(85).lsH,Hd=i(85).t7b,qd=i(85).G4H,jd=i(85).nuP,Qd=i(85)._W3,Jd=i(85).BQ6,$d=i(85).cZW,Yd=i(85).NtL,Xd=i(85).Jyz,ec=i(85).bsJ,tc=i(85).Yzm,ic=i(85).Je3,oc=i(85).Scd,nc=i(85).Au,ac=i(85).dMt,sc=i(85).IY7,rc=i(85).EMU,lc=i(85).EdP,dc=i(85).QmD,cc=i(85).wAX,uc=i(85).sM5,mc=i(85).K07,pc=i(85).XCs,gc=i(85).XeC,hc=i(85).YDv,vc=i(85).Mm1,fc=i(85).dLQ,yc=i(85)._V5,bc=i(85).D7b,Sc=i(85).Gnd,wc=i(85).P0R,Mc=i(85).pkR,kc=i(85).wgE,Cc=i(85).Xte,Zc=i(85).E0z,Tc=i(85).XtO,Pc=i(85).nx5,Ic=(0,f.defineMessages)({startingDateMessage:{[Pc]:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{[Pc]:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{[Pc]:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});class Fc extends c.Z{constructor(){super(...arguments),this.storeTypes={[Tc]:rl.ZP,dayRangeStore:ll.Z},this.renderInputs=()=>{const{[Zc]:e,[Cc]:t}=this[kc],{value:i,[Mc]:o}=this[wc],{[Tc]:a}=this[Sc],s=a.getFocus();let r="date";s!==sl.Hv[bc]&&s!==sl.Hv.EndTime||(r="time");const l=this.getRangeBounds();return n()("div",{[Jd]:{[yc]:e[fc]?16:12,[vc]:e[fc]?16:8,[hc]:e[fc]?t[gc](16):14,[pc]:e[fc]?t[mc](16):14,[uc]:a[dc][cc]?lc:rc,...e[fc]&&{[sc]:`\n\t\t\t\t\t\t\t0 1px 0 ${this[nc][ac]}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},[oc]:e[fc]?this[nc][ic]:void 0}},void 0,n()(wd,{[Mc]:o,[$d]:J.default[tc](Ic.startingDateMessage),focus:s===sl.Hv[ec]||s===sl.Hv[bc]?r:void 0,value:i[Xd],validate:this.validateStart,onUpdate:this.handleUpdateStart,onDateFocus:()=>this[Yd](sl.Hv[ec]),onTimeFocus:()=>this.handleTimeFocus(sl.Hv[bc]),onSubmit:(e,t)=>this.handleStartSubmit(e,t,s),inputElementAttributes:{max:l.latestValidStarting},[cc]:a[dc][cc]}),n()("div",{[Jd]:{width:12,height:8}}),n()(wd,{[Mc]:o,[$d]:J.default[tc](Ic.endingDateMessage),focus:s===sl.Hv[Qd]||s===sl.Hv.EndTime?r:void 0,value:i[jd],validate:this.validateEnd,onUpdate:this.handleUpdateEnd,onDateFocus:()=>this[Yd](sl.Hv[Qd]),onTimeFocus:()=>this.handleTimeFocus(sl.Hv.EndTime),onSubmit:(e,t)=>this.handleEndSubmit(e,t,s),inputElementAttributes:{min:l.earliestValidEnding},[cc]:a[dc][cc]}))},this.renderCalendar=()=>{const{[Zc]:e}=this[kc],{value:t,onUpdate:i}=this[wc],{[Tc]:o,dayRangeStore:a}=this[Sc],s=this[qd],r=this[Hd](),l={...s.pickerSection,...e[fc]&&s[Gd],...e[fc]&&r[Gd]};return n()(on.Z,{},void 0,n()("div",{[Jd]:l},void 0,n()(pl.Z,{value:gi.Zy(t),dateTimeStore:o,[Tc]:a,onUpdate:e=>{if(e[zd])return;const o=gi.PM(t,e.value);return i({[zd]:e[zd],value:o})},validate:this.validateDateRangeField})))},this[Yd]=e=>{const{[Tc]:t,dayRangeStore:i}=this[Sc];t[Kd]({...t[dc],focus:e});const o=rl.QJ[e];i[Kd]({...i[dc],focus:o})},this.handleTimeFocus=e=>{const{[Tc]:t}=this[Sc];t[Kd]({...t[dc],focus:e})},this.handleUpdateStart=e=>{const{onUpdate:t}=this[wc];e[zd]||t({value:{...this[wc].value,[Xd]:e.value}})},this.handleUpdateEnd=e=>{const{onUpdate:t}=this[wc];e[zd]||t({value:{...this[wc].value,[jd]:e.value}})},this.handleStartSubmit=(e,t,i)=>{const{[Tc]:o,dayRangeStore:n}=this[Sc];t&&t[zd]||(i===sl.Hv[ec]&&o[dc][cc]?o[Kd]({...o[dc],focus:sl.Hv[bc]}):(o[Kd]({...o[dc],focus:sl.Hv[Qd]}),n[Kd]({...n[dc],focus:jd})))},this.handleEndSubmit=(e,t,i)=>{const{[Tc]:o}=this[Sc];t&&t[zd]||i===sl.Hv[Qd]&&o[dc][cc]&&o[Kd]({...o[dc],focus:sl.Hv.EndTime})},this.validateStart=e=>{const t=this[Wd](Xd,e);return t[zd]?t:{value:t.value[Xd]}},this.validateEnd=e=>{const t=this[Wd](jd,e);return t[zd]?t:{value:t.value[jd]}},this[Wd]=(e,t)=>{const{value:i}=this[wc];return t[zd]?t:this.validateRange({...i,[e]:t.value})},this.validateRange=e=>{if(e[Xd]&&e[jd]){const t=ie[Ud][Vd](e[Xd]);return ie[Ud][Vd](e[jd])>=t?{value:e}:{[zd]:cl.B.INVALID_RANGE}}return{value:e}},this.getMenuProps=()=>{const{[Zc]:e}=this[kc],{onDismiss:t,title:i}=this[wc];if(e[fc]){return{[Od]:jo.og.Modal,title:i,right:n()(ul.DoneMenuText,{}),[Nd]:t,[Rd]:this.renderInputs()}}return{[Od]:jo.og.Popup,onClickOutside:t,footer:this[wc].footer}},this.validateDateRangeField=(e,t)=>{const{value:i}=this[wc];if(t[zd])return t;const o=gi.Zy(i);return this.validateDateRange({...o,[e]:t.value})},this.validateDateRange=e=>{if(e[Xd]&&e[jd]){const t=ie[Ud][Ld](e[Xd]);return ie[Ud][Ld](e[jd])>=t?{value:e}:{[zd]:cl.B.INVALID_RANGE}}return{value:e}},this[qd]={pickerSection:{[hc]:16,[pc]:16},[Gd]:{[yc]:16,[vc]:8},[Ed]:{[yc]:12,[vc]:24,overflowY:"auto",overflowX:Dd,[rc]:"0 0 220px",[Bd]:this[nc][Ad],borderLeft:`1px solid ${this[nc][ac]}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,[yc]:this[kc][Zc][fc]?12:4,[vc]:this[kc][Zc][fc]?12:4,color:this[nc][xd]}}}didMount(){const{[Tc]:e}=this[Sc];void 0!==this[wc][cc]&&e[Kd]({...e[dc],[cc]:this[wc][cc]})}renderComponent(){const{[Zc]:e}=this[kc];return d.createElement(Xo.Z,this.getMenuProps(),n()("div",{[Jd]:{[uc]:rc,[_d]:"row"}},void 0,n()("div",{},void 0,this[wc][Rd],!e[fc]&&this.renderInputs(),this.renderCalendar()),this.renderSidebar()))}renderSidebar(){const{[Tc]:e}=this[Sc],{onUpdate:t,value:i,hideTime:o}=this[wc];return n()("aside",{[Jd]:this[qd][Ed]},void 0,o?null:n()(ml.Z,{title:n()(f.FormattedMessage,{id:"auditlogDateFilter.timeToggle",[Pc]:"Use time"}),on:e[dc][cc],[Id]:()=>{if(e.toggleShowTime(),e[dc][cc]){const e=i;e[Xd]&&(e[Xd][Fd]="00:00"),e[jd]&&(e[jd][Fd]="23:59"),t({value:e})}},focused:!1}),n()($o.Z,{focused:!1,title:n()(f.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",[Pc]:"Today"}),[Id]:()=>{const e=Date.now(),t=ie.dateTime(e,(0,po.r)());this[Pd]({[Xd]:{...t,[Fd]:"00:00"},[jd]:t})},[Jd]:this[qd].menuItem}),n()($o.Z,{focused:!1,title:n()(f.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",[Pc]:"Yesterday"}),[Id]:()=>{const e=ie[Td]((0,po.r)());this[Pd]({[Xd]:{type:Zd,[Cd]:e[Cd],[Fd]:"00:00",[kd]:(0,po.r)()},[jd]:{type:Zd,[Cd]:e[Cd],[Fd]:"23:59",[kd]:(0,po.r)()}})},[Jd]:this[qd].menuItem}),n()($o.Z,{focused:!1,title:n()(f.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",[Pc]:"Last 7 days"}),[Id]:()=>{const e=ie.lastWeek((0,po.r)()),t=ie.dateTime(Date.now(),(0,po.r)());this[Pd]({[Xd]:{type:Zd,[Cd]:e[Cd],[Fd]:"00:00",[kd]:(0,po.r)()},[jd]:t})},[Jd]:this[qd].menuItem}),n()($o.Z,{focused:!1,title:n()(f.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",[Pc]:"Last 30 days"}),[Id]:()=>{const e=ie.lastMonth((0,po.r)()),t=ie.dateTime(Date.now(),(0,po.r)());this[Pd]({[Xd]:{type:Zd,[Cd]:e[Cd],[Fd]:"00:00",[kd]:(0,po.r)()},[jd]:t})},[Jd]:this[qd].menuItem}))}[Pd](e){const{[Tc]:t,dayRangeStore:i}=this[Sc];e[jd]&&this[Yd](sl.Hv[Qd]),t[Kd]({...t[dc],[Md]:e}),i[Kd]({...i[dc],displayMonth:e[Xd]||e[jd]?ie.getDateTimeLuxon(e[Xd]||e[jd]):void 0,[Md]:{[Xd]:gi.Qb(e[Xd]),[jd]:gi.Qb(e[jd])}})}getRangeBounds(){const{value:e,intl:t}=this[wc];return{earliestValidEnding:e[Xd]&&gi.o0(e[Xd],t),latestValidStarting:e[jd]&&gi.o0(e[jd],t)}}[Hd](){return{[Gd]:{[oc]:this[nc][ic],[sc]:`0 1px 0 ${this[nc][ac]}`,marginBottom:1}}}}Fc.displayName="DateTimeRangeMenu";const _c=(0,f.injectIntl)(Fc);var xc=i(255),Ac=i(98707),Bc=i(75689);const Dc=i(85)._lc,Ec=i(85).ayt,Lc=i(85).R6V,Rc=i(85).ccq,Nc=i(85).ESK,Oc=i(85).rOg,Uc=i(85).nLZ,Vc=i(85).$Vg,Wc=i(85).X_m,Kc=i(85).Mm1,zc=i(85).wgE,Gc=i(85).E0z,Hc=i(85).dLQ,qc=i(85)._V5,jc=i(85).YGn,Qc=i(85).HK6,Jc=i(85).bsJ,$c=i(85).WCo,Yc=i(85).Wp_,Xc=i(85).EMU,eu=i(85).h8z,tu=i(85).D7I,iu=i(85).QmD,ou=i(85).JcN,nu=i(85).Dd5,au=i(85).XNW,su=i(85).LlE,ru=i(85).UPJ,lu=i(85).sM5,du=i(85).wJk,cu=i(85).OYG,uu=i(85).ANz,mu=i(85).Gnd,pu=i(85).r9y,gu=i(85).KJg,hu=i(85).PP_,vu=i(85).PXg,fu=i(85).nuP,yu=i(85).Jyz,bu=i(85).nx5,Su=i(85).zJh,wu=i(85).NF1,Mu=i(85).XCs,ku=i(85).YDv,Cu=i(85).Jkr,Zu=i(85).wx3,Tu=i(85).BQ6,Pu=i(85).Zij,Iu=i(85).vyS,Fu=i(85).fxG,_u=i(85).lzS,xu=i(85).PG2,Au=i(85).t7b,Bu=i(85).G4H,Du=i(85).P0R,Eu=i(85).pkR,Lu=i(85).mfk,Ru=i(85).XtO;class Nu extends c.Z{constructor(){super(...arguments),this.storeTypes={[Ru]:rl.ZP,dayRangeStore:ll.Z},this[Lu]=()=>{const{value:e,[Eu]:t,focused:i,intl:o}=this[Du],a=this[Bu],s=this[Au](),r={...a.menuItem,...s.activeMenuItem},l=ol.formatDateRange(e,o),d=n()(xc.Z,{[xu]:this.handleClear,[Eu]:t});return n()($o.Z,{focused:i,[Eu]:t,icon:m.Z[_u](a.iconActiveDesktop),[Pu]:l,right:d,isTokenTitle:!0,alignIconTop:!0,[xu]:this[Fu],desktopTitleStyle:a.menuItemTitleDesktop,desktopIconStyle:a[Iu],[Tu]:r})},this[Zu]=()=>{const{[Pu]:e,icon:t,[Eu]:i,focused:o,mode:a}=this[Du],s=this[Bu],r=this[Au](),l={...s.menuItem,...r.buttonMenuItem,...a===Ac.Z.Mode.Pill?{[Cu]:"fit-content",border:"solid 1px",[ku]:0,[Mu]:0,[wu]:20,fontSize:12}:{}};return n()($o.Z,{focused:o,[Eu]:i,icon:t(s.icon),[Pu]:e,[xu]:this[Fu],[Tu]:l})},this[Su]=()=>{const{value:e,pillTitle:t}=this[Du],i=n()(f.FormattedMessage,{id:"searchDateFilter.shortTitle",[bu]:"Date"});return n()(Jo.Z,{on:Boolean(e[yu]||e[fu]),icon:m.Z[_u]({[Cu]:16,[vu]:6,fill:hu}),[Pu]:n()("span",{},void 0,t||i),[xu]:this[Fu]})},this[gu]=()=>{const{[Pu]:e,header:t,showButtons:i,[pu]:o,hideTime:a}=this[Du],{[Ru]:s,dayRangeStore:r}=this[mu];return d[tu](d.Fragment,null,n()(_c,{[Pu]:e,value:this.getCurrentValue(),onUpdate:this[uu],[Ru]:s,dayRangeStore:r,[du]:this[cu],footer:"footer"===i&&this.renderFooter(),[pu]:o,hideTime:a,header:t}),"side"===i&&n()("div",{[Tu]:{[lu]:"flex",[ru]:"space-between",[Cu]:"100%",[su]:"0px 10px"}},void 0,n()(Io.Z,{isGray:!0,[Tu]:{[au]:"auto",[vu]:8},[xu]:this[cu]},void 0,n()(f.FormattedMessage,{[bu]:"Cancel",id:"searchDateFilter.cancelButton.label"})),n()(Po.Z,{[xu]:()=>this[Du][nu](this[mu][Ru][iu][ou])},void 0,n()(f.FormattedMessage,{[bu]:"Accept",id:"searchDateFilter.acceptButton.label"}))))},this.renderFooter=()=>{const{[Ru]:e,dayRangeStore:t}=this[mu];return n()(on.Z,{topBorder:!0,[Tu]:{[su]:"8px 8px 2px 8px",[ru]:eu,[lu]:Xc}},void 0,n()(Io.Z,{[xu]:()=>{e.clearTemporaryDateRange(),t.clearTemporaryDateRange(),this[Du][nu]({[yu]:void 0,[fu]:void 0})}},void 0,n()(f.FormattedMessage,{id:"searchDateFilter.clearButton",[bu]:"Clear"})),n()(Po.Z,{[xu]:e=>{this[Du][nu](this[mu][Ru][iu][ou]),this[cu](e)}},void 0,n()(f.FormattedMessage,{id:"searchDateFilter.applyButton",[bu]:"Apply"})))},this[Fu]=()=>{const{[Eu]:e}=this[Du],{[Ru]:t,dayRangeStore:i}=this[mu];e||(t[Yc]({...t[iu],[$c]:!0,focus:sl.Hv[Jc]}),i[Yc]({...i[iu],[$c]:!0,focus:yu}))},this[cu]=e=>{const{[nu]:t,onMenuDismiss:i,showButtons:o}=this[Du],{[Ru]:n,dayRangeStore:a}=this[mu],{[ou]:s}=n[iu];ol.clickedInsideDayPicker(e)||(o||t(s),n[Yc]({...n[iu],[$c]:!1,[ou]:{[yu]:void 0,[fu]:void 0}}),a[Yc]({...a[iu],[$c]:!1,[ou]:{[yu]:void 0,[fu]:void 0}}),i&&i())},this.handleClear=()=>{const{[nu]:e}=this[Du];e({[yu]:void 0,[fu]:void 0})},this[Qc]=e=>{e[jc]&&e[jc]()},this[uu]=e=>{const{[Ru]:t,dayRangeStore:i}=this[mu];if(e.error)return;const o={[yu]:(0,gi.Qb)(e.value[yu]),[fu]:(0,gi.Qb)(e.value[fu])};return i[Yc]({...i[iu],[ou]:{...i[iu][ou],...o}}),t[Yc]({...t[iu],[ou]:{...t[iu][ou],...e.value}})},this[Bu]={menuItem:{minHeight:void 0,[qc]:this[zc][Gc][Hc]?12:4,[Kc]:this[zc][Gc][Hc]?12:4},icon:{[Wc]:16,[Cu]:16,[vu]:6},iconActiveDesktop:{[Wc]:14,[Cu]:14,fill:hu,alignSelf:Vc,[Uc]:2,[vu]:2},[Iu]:{[Uc]:0},iconActiveMobile:{[Wc]:14,[Cu]:14,fill:hu,[Uc]:1,[vu]:6},popup:{[qc]:0,[Kc]:8},popupWithSidebar:{[lu]:Xc},menuItemTitleDesktop:{[Cu]:"100%"},summary:{[lu]:Oc}}}didMount(){this[uu]({value:this[Du].value})}renderComponent(){const{[Gc]:e}=this[zc],{mode:t}=this[Du];return e[Hc]?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{[Pu]:t,[pu]:i}=this[Du],{[Ru]:o}=this[mu],a=this[Bu],s=e===Ac.z.Section,r=s?t:void 0,l=(()=>e===Ac.Z.Mode.Section?this[Lu]():e===Ac.Z.Mode.Button?this[Zu]():e===Ac.Z.Mode.Pill?this[Su]():void(0,x.unreachable)(e))();return n()(nn.Z,{[Pu]:r,marginAfter:s},void 0,n()(dl.Z,{capture:o[iu][$c],onUp:this[Qc],onDown:this[Qc],onEnter:this[Qc]},void 0,n()(tn.ZP,{popupType:this.getPopupType(),open:o[iu][$c],origin:l,render:this[gu],[du]:this[cu],[Rc]:tn.ZP[Nc].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,[Tu]:i?a.popupWithSidebar:a.popup})))}renderMobile(e){const{[Ru]:t}=this[mu],i=e===Ac.z.Section?this[Lc]():this[Ec]();return n()(tn.ZP,{popupType:tn.ZP[Dc].SlideUp,open:t[iu][$c],origin:i,render:this[gu],[du]:this[cu],preventScaleTransition:!0})}[Ec](){const{icon:e,[Pu]:t,[Eu]:i}=this[Du],o=this[Bu];return n()($o.Z,{[Eu]:i,focused:!1,icon:e(o.icon),[Pu]:t,[xu]:this[Fu]})}[Lc](){const{[Pu]:e,value:t,[Eu]:i,intl:o}=this[Du],a=this[Bu],s=n()("div",{[Tu]:a.summary},void 0,m.Z[_u](a.iconActiveMobile),ol.formatDateRange(t,o));return n()(Bc.Z,{[Eu]:i,[xu]:this[Fu],onClickClear:this.handleClear,label:e,[Pu]:s})}getCurrentValue(){const{value:e}=this[Du],{[Ru]:t}=this[mu],{[ou]:i}=t[iu];return{...e,...i}}getPopupType(){const{[Gc]:e}=this[zc];return e[Hc]?tn.ZP[Dc].SlideUp:tn.ZP[Dc].Popup}[Au](){return{buttonMenuItem:{color:this.theme.mediumTextColor},activeMenuItem:{color:this.theme.regularTextColor}}}}Nu.displayName="DateTimeFilter";const Ou=(0,f.injectIntl)(Nu),Uu=(i(85)._Zu,i(85).D7I),Vu=i(85).HAy,Wu=i(85).nx5,Ku=i(85).F7X,zu=i(85).cMN;function Gu(e){let{[zu]:t,[Ku]:i,setLastEditedTime:o,setCreatedOnTime:a}=e;window.__c={n:"DateFilter"};const s=(0,f.useIntl)(),[r,l]=(0,d.useState)(Ku),c=(0,d.useMemo)((()=>{switch(r){case Ku:return i;case zu:return t;default:(0,x.unreachable)(r)}}),[t,i,r]),u=(0,d.useMemo)((()=>{switch(r){case Ku:return a;case zu:return o;default:(0,x.unreachable)(r)}}),[o,a,r]);const p=(0,qi.VK)((()=>{if((0,gi.mK)(c))switch(r){case Ku:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",[Wu]:"Created on"});case zu:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",[Wu]:"Last edited on"});default:(0,x.unreachable)(r)}const e=(0,gi.Hq)(c),t=ol.formatDateRange(e,s,il.defaultDateFormat);switch(r){case Ku:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",[Wu]:"Created on: {dateRangeString}",values:{dateRangeString:t}});case zu:return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",[Wu]:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,x.unreachable)(r)}}),[c,r,s]);return n()(Ou,{header:n()(Hu,{[Vu]:r,setSelectedItem:function(e){l(e)}}),mode:Ac.z.Pill,focused:!1,hideTime:!0,pillTitle:p,title:p,icon:m.Z.calendar,value:c,showButtons:"footer",onChange:e=>{u(e)}})}function Hu(e){let{[Vu]:t,setSelectedItem:i}=e;window.__c={n:"DateTimeFilterSelector"};const o=[Ku,zu],a=(0,ji.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:3},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),r={width:190,items:o,[Vu]:t,getKey:e=>e,onSelect:e=>i(e),renderItem:e=>d[Uu]($o.Z,s()({title:qu(e.value)},e)),renderOrigin:e=>d[Uu](nl.Z,s()({},e,{style:a.button}),n()("div",{style:a.text},void 0,qu(t),m.Z.chevronDown(a.icon)))};return d[Uu](al.Z,s()({},r,{mobileActionSheet:!0}))}function qu(e){return{[zu]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",[Wu]:"Last edited on"}),[Ku]:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",[Wu]:"Created on"})}[e]}const ju=i(85).Yzm,Qu=i(85).JLj,Ju=i(85).nx5,$u=i(85).cZW;let Yu;!function(e){e.OnChange="on-change",e.Button="button"}(Yu||(Yu={}));const Xu=(0,f.defineMessages)({[$u]:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",[Ju]:"Search by page ID, title or content"}});function em(e){let{mode:t,query:i,setQueryFilter:o,placeholderText:a}=e;window.__c={n:"QuerySearchInput"};const[s,l]=(0,d.useState)(i??""),c=(0,ji.yK)((e=>({searchIcon:{color:e.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground}})),[]),u=(0,d.useMemo)((()=>(0,r.debounce)(o,500)),[o]),p=(0,d.useCallback)((e=>{l(e.target.value),t===Yu.OnChange&&u(e.target.value)}),[u,t]);return n()(bl.Z,{value:s,style:c.input,left:m.Z[Qu](c.searchIcon),[$u]:a||J.default[ju](Xu[$u]),onChange:p,onSubmit:()=>o(s),right:t===Yu.Button?n()(Po.Z,{onClick:()=>o(s)},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",[Ju]:"Search"})):null})}const tm=i(85).nx5,im=i(85).Wqi;function om(e){let{[im]:t,sharedWithFilterItems:i,setSharedWithFilter:o,runNewSearch:a,includeGroups:s,includeGuests:r}=e;window.__c={n:"SharedWithFilter"};const l=hr({[im]:t}),c=(0,d.useMemo)((()=>l.loading?[]:r?[...l.members,...l.guests]:l.members),[l,r]),u=(0,d.useMemo)((()=>l.loading?new Set:new Set(l.guests.map((e=>e.id)))),[l]);return n()(Yr,{isMultiSelect:!0,includePermissionGroups:s,userStores:c,title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",[tm]:"Shared with"}),selectedItems:i??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:i}=e;return{type:i,id:t}}));o(t.length>0?t:void 0)},onMenuClose:a,guestUserIdSet:u})}const nm=i(85).UPJ,am=i(85).PXg,sm=i(85).jkI,rm=i(85).$bT,lm=i(85).ccq,dm=i(85).ESK,cm=i(85)._lc,um=(i(85).qTy,i(85).PG2),mm=i(85).j7K,pm=i(85).y79,gm=i(85).Yzm,hm=i(85).L_E,vm=i(85).D7I,fm=i(85).Mm1,ym=i(85)._V5,bm=i(85).BQ6,Sm=i(85).pkR,wm=i(85).fbO,Mm=i(85).nx5,km=i(85).cZW,Cm=(0,f.defineMessages)({[km]:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",[Mm]:"Search for teamspaces..."}});function Zm(e){let{selectedTeamIds:t,setSelectedTeamIds:i,onMenuClose:o,teamStores:a}=e;window.__c={n:"TeamsFilter"};const r=(0,qi.qz)(void 0,Qo.Z),l=(0,ji.yK)((e=>({optionContainer:{display:"flex",[rm]:"row",alignItems:sm},optionAvatar:{[am]:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",[rm]:"row",[nm]:sm,alignItems:sm,gap:4},pillText:{marginLeft:4},[hm]:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",[nm]:"space-between",display:"flex"},icon:{width:16,[am]:4,fill:"currentColor"},teamIcon:{[am]:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[c,u]=(0,d.useState)(!1),[p,g]=(0,d.useState)(""),h=(0,qi.VK)((()=>[...a].sort(A.KP)),[a]),v=(0,qi.VK)((()=>t.map((e=>a.find((t=>t.id===e)))).filter(x.isDefined)),[a,t]);function y(){u(!1),g(""),o()}function b(){g(""),i([])}function S(e){const o=t[wm](e)?[]:[e];i(o),g("")}const w=(0,d.useCallback)((e=>{g(e.target.value)}),[]),M=(0,qi.VK)((()=>v.map((e=>{const o=e.getName();return n()(Sr.Z,{isSingle:!0,format:vr.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const o=t.filter((t=>t!==e.id));i(o)},[bm]:l.pillContainer,value:n()("div",{[bm]:l.pillContents},void 0,n()(zn.p,{[Sm]:!0,store:e,size:16}),n()(Ji.Z,{[bm]:l.pillText},void 0,o))},e.id)}))),[v,t,i,l]);const k=n()(Jo.Z,{on:t.length>0,icon:m.Z.typesPerson(l.icon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",[Mm]:"Teamspace"}),[um]:()=>u(!0)});return n()(nn.Z,{},void 0,n()(tn.ZP,{popupType:tn.ZP[cm].Popup,[lm]:tn.ZP[dm].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,open:c,render:function(){const e=[];for(const a of h){const i=a.getName(),o=a.getTeamAccessLevel(),r=a.isDefault();i&&i.toLocaleLowerCase()[wm](p)&&e.push({key:a.id,action:()=>S(a.id),render:e=>d[vm]($o.Z,s()({},e,{icon:n()(br.Z,{isSelected:t[wm](a.id)}),focused:!1,title:n()("div",{[bm]:l.optionContainer},void 0,n()(zn.p,{[Sm]:!0,store:a,size:24,[bm]:l.teamIcon}),n()("div",{[bm]:{[ym]:4,[fm]:4}},void 0,n()(Ji.Z,{[bm]:l.optionTitle},void 0,i),n()(Ji.Z,{[bm]:l.optionCaption},void 0,Tm(o,r))))}))})}const i={key:"no-results",action:()=>{},render:e=>d[vm](Ji.Z,s()({isSecondaryColor:!0,[bm]:l.noResultsMessage},e),n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",[Mm]:"No results found."}))},o={key:"teamOptions",items:e.length>0?e:[i],render:e=>d[vm](on.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{[bm]:l[hm]},void 0,n()(wr.Z,{focus:!0,value:p,[bm]:l.input,[km]:J.default[gm](Cm[km]),onChange:w,onRemoveLastToken:b,tokens:M}),n()(Xo.Z,{menuType:jo.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(en.Z,{type:en.i[pm],store:r,[mm]:0,sections:[o]})),n()(on.Z,{topBorder:!0,[bm]:l.footer},void 0,n()(Io.Z,{[um]:b},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",[Mm]:"Clear"})),n()(Po.Z,{[um]:y},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",[Mm]:"Done"}))))},onDismiss:y,keepFocus:!0,origin:k,preventScaleTransition:!0}))}function Tm(e,t){if(t)return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",[Mm]:"Default"});switch(e){case"private":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",[Mm]:"Private"});case"closed":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",[Mm]:"Closed"});case"open":return n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",[Mm]:"Open"});default:(0,x.unreachable)(e)}}const Pm=i(85).L_E,Im=i(85).F7X,Fm=i(85).cMN,_m=i(85).JIU,xm=i(85).mjJ,Am=i(85).Wqi;function Bm(e){let{[Am]:t,filters:i,runNewSearch:o,setFilters:a}=e;window.__c={n:"FiltersSection"};const s=function(){const[e,t]=(0,d.useState)([]),i=(0,Hi.O7)(),o=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),n=(0,qi.VK)((()=>{var e;return null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,d.useEffect)((()=>{!async function(){const e=await(0,A.sj)({spaceStore:o,currentUserId:n,includeArchived:!1,minRoleOnTeamStores:"editor",environment:i});t(e)}()}),[o,n,i]),e}(),r=(0,ji.yK)((e=>({[Pm]:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return n()("div",{style:r[Pm]},void 0,n()(em,{mode:Yu.Button,query:i.query,setQueryFilter:function(e){a({query:e},{[xm]:!0})}}),n()("div",{style:r.filterPillsContainer},void 0,n()(Gu,{[Fm]:i[Fm],[Im]:i[Im],setLastEditedTime:function(e){a({[Fm]:e,[Im]:{starting:void 0,ending:void 0}},{[xm]:!0})},setCreatedOnTime:function(e){a({[Im]:e,[Fm]:{starting:void 0,ending:void 0}},{[xm]:!0})}}),n()(Zm,{selectedTeamIds:i.teamIds,setSelectedTeamIds:function(e){a({teamIds:e})},onMenuClose:o,teamStores:s}),n()(om,{[Am]:t,sharedWithFilterItems:i.sharedWith,setSharedWithFilter:function(e){a({sharedWith:e})},runNewSearch:o,includeGroups:!0,includeGuests:!0}),n()(bn,{selectedAudience:i.audience,setSelectedAudience:function(e){a({audience:e})},onMenuClose:o}),n()(tl,{[Am]:t,createdByFilterIds:i[_m],setCreatedByFilter:function(e){a({[_m]:e})},runNewSearch:o,includeGuests:!0})))}var Dm=i(26263),Em=i(7406),Lm=i(55384),Rm=i(45953),Nm=i(21202),Om=i(66504);const Um=i(85).mjJ,Vm=i(85).J$i,Wm=i(85).pSK,Km=i(85).eHI,zm=i(85).W3n,Gm=i(85).JJP,Hm=i(85).Z0E,qm=i(85).HSU,jm=i(85).Lyb,Qm=i(85).VT2,Jm=i(85).ZmD,$m=i(85).F7X,Ym=i(85).cMN,Xm={query:"",createdBy:[],sharedWith:void 0,audience:[],[Ym]:{starting:void 0,ending:void 0},[$m]:{starting:void 0,ending:void 0},teamIds:[]},ep={...Xm,audience:[Jm,Qm,"shared_to_web"]},tp={[jm]:Xm,pageStores:[],[qm]:0,[Hm]:!0,[Gm]:void 0,[zm]:!1,error:void 0,[Km]:!1,[Wm]:!0},ip={...tp,[jm]:ep};function op(e){let{spaceStore:t,userStore:i}=e;const o=(0,qi.VK)((()=>Z.default.checkGate("enabled_bev_default_audience_filter")),[])?ip:tp,n=(0,Hi.O7)(),[a,s]=(0,d.useState)(o),r=(0,d.useRef)(o[jm]),c=(0,d.useCallback)((async e=>{let{restartSearch:o,ignoreFilterComparison:d}=e;if(!d&&l().isEqual(a[jm],r.current))return;r.current=a[jm];let c=a[zm],u=a.error,m=a[Hm],p=a[qm],g=a[Gm];if(o&&(s((e=>({...tp,[Wm]:e[Wm],[jm]:e[jm]}))),c=tp[zm],u=tp.error,m=tp[Hm],p=tp[qm],g=tp[Gm]),m&&!c&&!u){s((e=>({...e,[Wm]:!1,[zm]:!0})));try{const e=await T.adminContentSearch(n,{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:20,[Gm]:g,query:a[jm].query,audience:a[jm].audience,[Ym]:(0,gi.Hq)(a[jm][Ym]),[$m]:(0,gi.Hq)(a[jm][$m]),createdBy:a[jm].createdBy,sharedWith:a[jm].sharedWith,teamspaceIds:a[jm].teamIds});if("failed"===e.type)throw e.error;S.trackAdminContentSearchQueried(n,{[jm]:a[jm],pageNumber:p});const o=e.data[Gm],r=e.data.recordIds,d=function(e){const{recordMapWithRoleJson:t}=e,i=Rm.PF.create(t),o=Rm.PF.create();for(const{pointer:n,model:a}of i)if(a){const e=Lm.kk.fromValue(n.table,l().cloneDeep(a.__UNSAFE__getValue()));o.setModelAndRole(n,e,"editor")}return o}({recordMapWithRoleJson:e.data.recordMap}),c=new Dm.Z({name:"adminContentSearchSettings.useContentSearch",data:new Om.o({[i.id]:d})});c.addCacheFallback(n.defaultRecordCache[Vm]),s((e=>{const t=[],i=new Set(e.pageStores.map((e=>e.id)));for(const o of r)if(!i.has(o)){const e=new go.G(n,{table:Nm.iU,id:o},{[Vm]:c});t.push(e)}const a=[...e.pageStores,...t];return{...e,pageStores:a,[zm]:!1,error:void 0,[qm]:e[qm]+1,[Gm]:o,[Hm]:Boolean(o)}}))}catch(h){const e=(0,Em.tg)(h);s((t=>({...t,[zm]:!1,error:e})))}}}),[n,t,i,a[jm],a[zm],a.error,a[Hm],a[qm],a[Gm]]);(0,d.useEffect)((()=>{a[Km]&&(s((e=>({...e,[Km]:!1}))),c({restartSearch:!0,ignoreFilterComparison:!1}))}),[a[Km],c]);const u=(0,d.useCallback)((async()=>{a[Km]||await c({restartSearch:!1,ignoreFilterComparison:!0})}),[a[Km],c]),m=(0,d.useCallback)((async e=>{await c({restartSearch:!0,ignoreFilterComparison:e||!1})}),[c]),p=(0,d.useCallback)(((e,t)=>{S.trackAdminContentSearchFilterChangedWithValues(n,{newFilters:e}),s((i=>({...i,[jm]:{...i[jm],...e},...null!=t&&t[Um]?{[Km]:null==t?void 0:t[Um]}:void 0})))}),[n]);return{[Wm]:a[Wm],[jm]:a[jm],pageStores:a.pageStores,[zm]:a[zm],error:a.error,[Hm]:a[Hm],loadNextPage:u,runNewSearch:m,setFilters:p}}const np=i(85).g7N,ap=i(85).zDZ,sp=i(85).E0z,rp=i(85).dLQ,lp=i(85).nx5,dp=i(85).jkI,cp=i(85).Lyb,up=i(85).pSK,mp=i(85).Wqi;const pp=function(e){let{[mp]:t,userStore:i}=e;window.__c={n:"AdminContentSearchTab"};const o=(0,Hi.O7)(),a=(0,qi.VK)((()=>Qi.Z.state.online),[]),s=(0,ji.yK)((e=>({})),[]),{[up]:r,loadNextPage:l,pageStores:d,loading:c,error:u,runNewSearch:m,[cp]:p,setFilters:g}=op({[mp]:t,userStore:i});return a?n()($i.Z,{},void 0,n()(Yi.Z,{large:!o[sp][rp]||void 0,divider:o[sp][rp]?void 0:"full"},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.title",[lp]:"Content Search"})),n()("div",{style:s[ap]},void 0,n()(Ji.Z,{isMultiline:!0,style:{[np]:20}},void 0,n()(f.FormattedMessage,{id:"adminContentSearchTab.description",[lp]:"Search and filter for any page in the workspace, including private pages. Only workspace owners can use content search."})),n()(io,{spaceId:t.id,disabled:0===d.length,[cp]:p})),n()(Bm,{[mp]:t,runNewSearch:m,setFilters:g,[cp]:p}),n()(mr,{loading:c,error:u,pageStores:d,loadNextPage:l,[cp]:p,setFilters:g,[up]:r,runNewSearch:m})):n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:dp}},void 0,n()(f.FormattedMessage,{[lp]:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})))};var gp=i(59730),hp=i(31299),vp=i(33954);class fp extends E.default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const yp=new fp,bp=i(85).irb,Sp=i(85).bl5,wp=i(85).Ql2,Mp=i(85).wgE,kp=(0,f.defineMessages)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}}),Cp=async e=>{const{[Mp]:t,[wp]:i}=e,o=await T.getHistoricalAuditLogUsers(t,{[wp]:i});return"success"!==o.type?[]:o.data.results},Zp=async e=>{const{[Mp]:t,[wp]:i}=e;if(yp.getState()[wp]!==i&&yp.reset(),!i)return;const[o,n]=await Promise.all([hp.searchSpaceActorIds({[Mp]:t,membersOnly:!1}),Cp({[Mp]:t,[wp]:i})]),a={[wp]:i,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};o.userIds.forEach((e=>{a.allUserIds.add(e)})),o.botIds.forEach((e=>{a.allBotIds.add(e)})),n.forEach((e=>{var t;(t=e.actorId)!==ba._H.id&&t!==Ya.s$.id&&t!==Ya.el.id||a.allUserIds.has(e.actorId)?e.actorType!==Ya.KJ||a.allUserIds.has(e.actorId)?e.actorType!==ba.cZ||a.allBotIds.has(e.actorId)||(a.allBotIds.add(e.actorId),a.removedBotIds.add(e.actorId)):(a.allUserIds.add(e.actorId),a.removedUserIds.add(e.actorId)):a.allUserIds.add(e.actorId)})),yp.setState(a)};class Tp extends E.default{getInitialState(){return{open:!1}}}const Pp=new Tp,Ip=i(85).Joh,Fp=i(85).Wp_,_p=i(85).PG2,xp=i(85).wgE,Ap=i(85).Sjp,Bp=i(85).Yzm,Dp=i(85).j7K,Ep=i(85).D7I,Lp=i(85).rpY,Rp=i(85).Ttb,Np=i(85).y79,Op=i(85).nx5,Up=(0,f.defineMessages)({30:{id:"auditLogCSV.menu.30days",[Op]:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",[Op]:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",[Op]:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",[Op]:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",[Op]:"Export"}});class Vp extends c.Z{constructor(){super(...arguments),this.renderCSVMenu=()=>{const e=[this.getCSVMenuItem(30),this.getCSVMenuItem(60),this.getCSVMenuItem(90),this.getCSVMenuItemWithConfirmation(365)];return n()(Xo.Z,{menuType:jo.og.Popup},void 0,n()(en.Z,{type:en.i[Np],sections:[{key:Rp,[Lp]:e=>d[Ep](on.Z,e),items:e}],[Dp]:0}))},this.getCSVMenuItem=e=>({key:e,[Lp]:()=>n()($o.Z,{focused:!1,title:J.default[Bp](Up[e]),[_p]:()=>{this[Ap](),Wp(this[xp],e)}}),action:()=>{}}),this.getCSVMenuItemWithConfirmation=e=>({key:e,[Lp]:()=>n()($o.Z,{focused:!1,title:J.default[Bp](Up[e]),[_p]:()=>{w.showDialog({message:n()(f.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",[Op]:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:n()(f.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",[Op]:"Export"}),color:"blue",onAccept:()=>{this[Ap](),Wp(this[xp],e)}}]})}}),action:()=>{}}),this[Ap]=()=>{Pp[Fp]({open:!1})},this.popOpenOptions=e=>{Pp[Fp]({open:e})}}renderComponent(){const e=Pp.state;return n()(tn.ZP,{popupType:tn.ZP.PopupType.Popup,open:e.open,placementToOrigin:tn.ZP.Placement.Bottom,alignmentToOrigin:tn.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,[Lp]:this.renderCSVMenu,onDismiss:this[Ap],enableOutsideClickDismiss:!0,origin:n()(ro.Z,{[Ip]:()=>n()(f.FormattedMessage,{id:"auditLogCSV.popup.tooltip",[Op]:"Click for options to export the Audit Log in CSV form"}),[Lp]:t=>d[Ep](Po.Z,s()({isLarge:!0,[_p]:()=>this.popOpenOptions(!e.open)},t),J.default[Bp](Up.Export))})})}}Vp.displayName="AuditLogCSV";const Wp=(e,t)=>{const{currentSpaceStore:i}=B.default.state;i&&Xi.PN(e,{spaceId:i.id,exportOptions:{duration:t}})},Kp=(0,f.injectIntl)(Vp);var zp=i(66897),Gp=i(74136),Hp=i(97680);const qp=i(85).Yzm,jp=i(85).vn3,Qp=i(85).sbn,Jp=i(85).fBu,$p=i(85).TLr,Yp=i(85).TtP,Xp=i(85).wgE,eg=i(85).xgV,tg=i(85).D7I,ig=i(85).nx5,og=i(85).nfT,ng=i(85).EMU,ag=i(85).Gnd,sg=i(85).P0R,rg=i(85).IRD,lg=i(85).dH_;class dg extends E.default{getInitialState(){return{[lg]:new Set([])}}setTempSelections(e){this.setState({[lg]:new Set(e)})}}class cg extends c.Z{constructor(){super(...arguments),this.storeTypes={localStore:dg},this[rg]=(e,t)=>{var i;const{intl:o,auditLogHistoricalUserStore:a}=this[sg],{localStore:r}=this[ag],l=this.getActor(e);return d[tg](Hp.Z,s()({},t,{key:e,actor:l,useEmailAsTooltip:!0,checkState:r.state[lg].has(e),userTitle:n()("div",{style:{display:ng,gap:4}},void 0,(0,zp.$4)(o,l),a.isUserOrBotRemoved(null===(i=l[og])||void 0===i?void 0:i.id)&&n()(Gp.Z,{},void 0,n()(f.FormattedMessage,{id:"auditlogActorFilter.removed_user",[ig]:"Removed"})))}))},this[eg]=async e=>{let{query:t,current:i}=e;const{allUserIds:o,allBotIds:n}=this[sg].auditLogHistoricalUserStore.getState(),a=await hp.searchActorsById({[Xp]:this[Xp],query:t,userIds:[...o],botIds:[...n]}),s=[...a.users.map((e=>`notion_user:${e.id}`)),...a.bots.map((e=>`bot:${e.id}`))];if(t[Yp]>0)return s.slice(0,100);const r=this[sg].selectedActors.map(gi.eW),l=new Set(r),d=s.filter((e=>!l.has(e)));return[...r,...d].slice(0,Math.max(r[Yp],100))},this.createUserValue=e=>go.U6[$p](this[sg][Jp],{table:Ya.KJ,id:e})[Qp](),this.createBotValue=e=>(0,go.Kv)(this[sg][Jp],{table:ba.cZ,id:e})[Qp]()}didMount(){this[jp]()}renderComponent(){const{selectedActors:e,intl:t}=this[sg],{localStore:i}=this[ag],o=n()(f.FormattedMessage,{id:"auditlogActorFilter.title",[ig]:"User"});return n()(Ac.Z,{mode:Ac.z.Pill,title:o,icon:m.Z.person,iconStyles:{marginRight:2},items:Array.from(i.state[lg]),hasItemsSelected:(null==e?void 0:e[Yp])>0,onChange:e=>{i.setTempSelections(e)},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:e=>{"applyButton"!==e?this[jp]():this.updateOnChangeToParent()},labelText:{title:o,tokenInputPlaceholder:t[qp]({[ig]:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:t[qp]({[ig]:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},[eg]:this[eg],[rg]:this[rg],renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}updateOnChangeToParent(){const{onChange:e}=this[sg],{localStore:t}=this[ag];e(Array.from(t.state[lg]).map(gi.Ij).filter((e=>Boolean(e))))}[jp](){const{selectedActors:e}=this[sg],{localStore:t}=this[ag],i=e.map(gi.eW);t.setTempSelections(i)}getActor(e){const t=(0,gi.Ij)(e);return t?"notion_user"===t.actorType?(0,zp.m3)(this.createUserValue(t.actorId)):(0,zp.ON)(this.createBotValue(t.actorId)):(0,zp.m3)(void 0)}}cg.displayName="AuditLogActorFilter";const ug=(0,f.injectIntl)(cg),mg=(i(85).e_Y,i(85).JZr,i(85).g4T),pg=i(85).hJW,gg=i(85).tUM,hg=i(85)._tm,vg=i(85).g1z,fg=(i(85).fof,i(85).kck),yg=i(85).snB,bg=i(85).c8q,Sg=i(85).ELD,wg=i(85).MqD,Mg=i(85).O$p,kg=i(85).ekh,Cg=i(85).RkH,Zg=i(85).taY,Tg=i(85).XMQ,Pg=i(85).zZ9,Ig=i(85).YGe,Fg=i(85).aBN,_g=i(85).$6N,xg=i(85).wFi,Ag=i(85).PKv,Bg=i(85).OdR,Dg=i(85).qgd,Eg=i(85).S0c,Lg=i(85).FUc,Rg=i(85).Xv6,Ng=i(85).DtP,Og=i(85).D7o,Ug=i(85).KGn,Vg=i(85).qOY,Wg=i(85).gCM,Kg=i(85).mgE,zg=i(85).xiB,Gg=i(85).sR2,Hg=i(85).s9n,qg=i(85).LTT,jg=i(85).Y7P,Qg=i(85).T0C,Jg=i(85).IE,$g=i(85).ABY,Yg=i(85).FnL,Xg=i(85)._dZ,eh=i(85).iaY,th=(i(85).V0N,i(85).n5k),ih=i(85).oh,oh=i(85).Sg4,nh=i(85).d_H,ah=i(85).AVE,sh=i(85).MUl,rh=i(85).BfV,lh=i(85)._5m,dh=i(85).iKx,ch=i(85).qyt,uh=i(85).yV$,mh=i(85).fBX,ph=(i(85).RrV,i(85).TEe),gh=i(85).g7y,hh=i(85).CYo,vh=i(85).RZM,fh=i(85).l3E,yh=i(85).iqj,bh=i(85).OaK,Sh=i(85).pwv,wh=i(85).lij,Mh=i(85).qM$,kh=i(85).hh4,Ch=i(85).LWj,Zh=(i(85).m$9,i(85).kr$,i(85).YJP),Th=i(85).jl,Ph=i(85).lbf,Ih=i(85).r$I,Fh=i(85).pCA,_h=(i(85).mPe,i(85).gu6),xh=(i(85).QS6,i(85).fA3),Ah=(i(85).GiV,i(85).qaB),Bh=(i(85).Ltd,i(85).jS),Dh=(i(85).nZ4,i(85).DuE),Eh=i(85).Lxl,Lh=i(85).o3t,Rh=i(85).xAf,Nh=i(85).OZo,Oh=i(85).F3B,Uh=(i(85).Jqb,i(85).Veo),Vh=i(85).EVe,Wh=i(85).NYi,Kh=i(85).bmp,zh=i(85).b0i,Gh=i(85).g3w,Hh=i(85).EKY,qh=i(85).DBW,jh=i(85).py$,Qh=i(85).PC5,Jh=i(85).MOv,$h=i(85).apM,Yh=i(85).CSo,Xh=i(85).Al6,ev=i(85).wU5,tv=(i(85).h25,i(85).uoi,i(85).grZ),iv=i(85).cBI,ov=i(85).PhH,nv=(i(85).DLB,i(85).yMU,i(85).Ovb),av=i(85).fBi,sv=i(85).dGR,rv=i(85).MhQ,lv=i(85).uxP,dv=i(85).le5,cv=i(85).tmb,uv=i(85).wr5,mv=(i(85).eAF,i(85).qPb,i(85).uQ_),pv=i(85).pte,gv=(i(85).IDH,i(85).dKY,i(85).VTZ),hv=(i(85).MUV,i(85).qq2,i(85).M9A,i(85).zVh,i(85).tKx),vv=(i(85).hRE,i(85).Wyb),fv=i(85).Ga3,yv=i(85).Epl,bv=i(85).pxK,Sv=i(85).X$r,wv=i(85).geM,Mv=i(85).bfy,kv=i(85).v62,Cv=i(85).Va3,Zv=i(85).F5j,Tv=i(85).s6h,Pv=i(85).uSV,Iv=i(85).vMQ,Fv=i(85).fAM,_v={audit_log_aes_event_read:[],audit_log_permanently_deleted_filter_enable:[Fv],enable_suspend_managed_users:[Iv,Pv],[Tv]:[Zv],enable_set_managed_users_profile_data:[Cv],enable_custom_session_duration:[kv],enabled_reject_join_external_workspaces:[Mv],enable_logout_managed_users:[wv,Sv],[bv]:[yv,fv]};const xv={[hv]:"workspace.content_search_exported",[vv]:"workspace.content_search_queried",[Xg]:"workspace.settings.ai_legal_terms_setting_updated",[kh]:"workspace.settings.email_domain_added",[Mh]:"workspace.settings.email_domain_removed",[Nh]:"user.settings.support_access_granted",[Bh]:"workspace.audit_log_exported",[wh]:Yg,automation_created:"page.automation_created",automation_edited:"page.automation_updated",[Ah]:"workspace.content_analytics_exported",[Sh]:"workspace.settings.allow_guests_setting_updated",[Rh]:"user.settings.email_updated",[bh]:$g,[pv]:"page.file_downloaded",[mv]:"page.file_uploaded",group_added_to_team:"teamspace.permissions.group_added",[Jg]:"teamspace.permissions.group_removed",[vh]:Qg,[Ih]:"workspace.permissions.guest_removed",[jg]:qg,[Hg]:Gg,[yh]:"workspace.settings.invite_link_setting_updated",invite_link_reset:"workspace.settings.invite_link_reset",login:"user.login",logout:"user.logout",[dv]:zg,[uv]:Kg,[cv]:Wg,[_h]:"workspace.group.permissions.member_added",member_added_to_team:Vg,[Ph]:"workspace.permissions.member_invited",[Th]:"workspace.permissions.member_added",member_joined_team:Vg,member_left_team:Ug,[Zh]:"workspace.permissions.member_removed",[Fh]:"workspace.group.permissions.member_removed",[Og]:Ug,[Ch]:"workspace.permissions.member_role_updated",[Ng]:"teamspace.permissions.member_role_updated",[Rg]:"workspace.membership_request_resolved",[fh]:Lg,[hh]:"workspace.settings.page_access_request_setting_updated",page_created:"page.created",[lv]:"page.deleted",[rv]:rv,[sv]:sv,[av]:av,page_edited:"page.content_edited",[nv]:"page.exported",page_moved:"page.moved",[ov]:ov,[Fv]:Fv,page_restored:"page.restored",page_viewed:"page.viewed",[gh]:Eg,[Vh]:"user.settings.login_method.password_removed",[Wh]:"user.settings.login_method.password_updated",[Uh]:"user.settings.login_method.password_added",[Lh]:"user.settings.profile_photo_updated",[Eh]:"user.settings.preferred_name_updated",[Oh]:"workspace.private_content_transferred",[ph]:"workspace.settings.public_homepage_removed",[mh]:Dg,[Dh]:"user.settings.support_access_revoked",[uh]:"workspace.settings.enforce_saml_sso_config_updated",saml_toggled:"workspace.settings.enable_saml_sso_config_updated",[gv]:"workspace.scim_token_generated",scim_token_revoked:"workspace.scim_token_revoked",[ch]:Bg,[dh]:Ag,[lh]:xg,team_archived:iv,team_created:tv,[rh]:_g,[Jh]:"teamspace.settings.default_setting_updated",[Qh]:"teamspace.settings.description_updated",[jh]:Fg,[qh]:"teamspace.settings.allow_guests_setting_updated",[Hh]:"teamspace.settings.icon_updated",[Ig]:"teamspace.settings.member_invitation_setting_updated",[Xh]:Pg,[Gh]:"teamspace.settings.name_updated",[zh]:"teamspace.settings.privacy_type_updated",[Kh]:Dg,team_restored:$h,[Tg]:Zg,[Cg]:kg,[sh]:Mg,[eh]:"workspace.user_analytics_exported",user_deleted:"user.account_deleted",[wg]:"workspace.settings.analytics_tracking_setting_updated",[ah]:Sg,[nh]:bg,[xh]:"workspace.content_exported",[oh]:"workspace.settings.icon_updated",[ih]:yg,[th]:"workspace.settings.name_updated",[fg]:"workspace.settings.sidebar_editing_setting_updated"},Av=[wv,Sv,yv,fv,vg,hg,gg,pg,mg,ev,Yh,Iv,Pv,kv,Mv,Zv,Cv];(0,x.makeTypeGuard)((e=>{for(const t of di)if(t===e)return{true:e};return{false:e}})),(0,x.makeTypeGuard)((e=>{for(const t of li)if(t===e)return{true:e};return{false:e}}));var Bv=i(8848),Dv=i(7057);const Ev=i(85).Lwr,Lv=i(85).nx5,Rv=(0,f.defineMessages)({adminLabel:{id:"auditLogSpaceRoleMessages.admin",[Lv]:"admin"},workspaceOwnerLabel:{id:"auditLogSpaceRoleMessages.workspaceOwner",[Lv]:"workspace owner"},membershipAdminLabel:{id:"auditLogSpaceRoleMessages.membershipAdmin",[Lv]:"membership admin"},memberLabel:{id:"auditLogSpaceRoleMessages.member",[Lv]:"member"},guestLabel:{id:"auditLogSpaceRoleMessages.guest",[Lv]:"guest"},[Ev]:{id:"auditLogSpaceRoleMessages.noAccess",[Lv]:"no access"},pageGuestLabel:{id:"auditLogSpaceRoleMessages.pageGuest",[Lv]:"page guest"},teamGuestLabel:{id:"auditLogSpaceRoleMessages.teamGuest",[Lv]:"teamspace guest"}}),Nv=(0,f.defineMessages)({missing:{[Lv]:"MISSING",id:"csvExport.copiedText.missingField"},notApplicable:{[Lv]:"N/A",id:"csvExport.copiedText.notApplicable"}});function Ov(e){return`"${e.replace(/"/g,'""')}"`}const Uv=i(85).e_Y,Vv=i(85).WuX,Wv=i(85).sOi,Kv=i(85).Yzm,zv=i(85).hWY,Gv=i(85).I_4,Hv=i(85).QmD,qv=i(85).wpY,jv=i(85).A6W,Qv=i(85).tUM,Jv=i(85)._tm,$v=i(85).hJW,Yv=i(85).MqD,Xv=i(85)._dZ,ef=i(85).Ga3,tf=i(85).Epl,of=i(85).X$r,nf=i(85).geM,af=i(85).tKx,sf=i(85).Wyb,rf=i(85).F3B,lf=i(85).MUl,df=i(85).RkH,cf=i(85).g4T,uf=i(85).Al6,mf=i(85).wU5,pf=i(85).CSo,gf=i(85).DtP,hf=i(85).IE,vf=i(85).D7o,ff=i(85).BfV,yf=i(85).PC5,bf=i(85).XMQ,Sf=i(85).bmp,wf=i(85).YGe,Mf=i(85).b0i,kf=i(85).RZM,Cf=i(85).Xv6,Zf=i(85).l3E,Tf=i(85).DuE,Pf=i(85).OZo,If=i(85).iKx,Ff=i(85).qyt,_f=i(85)._5m,xf=i(85).pCA,Af=i(85).gu6,Bf=i(85).F5j,Df=i(85).Va3,Ef=i(85).bfy,Lf=i(85).v62,Rf=i(85).AVE,Nf=i(85).lij,Of=i(85).s9n,Uf=i(85).fof,Vf=i(85).Y7P,Wf=i(85).d_H,Kf=i(85).qM$,zf=i(85).hh4,Gf=i(85).Sg4,Hf=i(85).qaB,qf=i(85).iaY,jf=i(85).CYo,Qf=i(85).g7y,Jf=i(85).pwv,$f=i(85).g1z,Yf=i(85).kck,Xf=i(85).fBX,ey=i(85).oh,ty=i(85).n5k,iy=i(85).Lxl,oy=i(85).le5,ny=i(85).yMU,ay=i(85).fAM,sy=i(85).dGR,ry=i(85).fBi,ly=i(85).MhQ,dy=i(85).PhH,cy=i(85).nx5,uy={[cy]:"N/A",id:"auditLogPaginatedTable.copiedText.notAvailable",description:"Shown in the copied text when the value is not available. Means not applicable"},my=((0,x.makeTypeGuard)((e=>30===e||60===e||90===e||365===e?{true:e}:{false:e})),(0,f.defineMessages)({[dy]:{id:"auditlogEventFilter.actionName.page.properties_edited",[cy]:"Page properties edited"},[ly]:{id:"auditlogEventFilter.actionName.page.discussion.comment.created",[cy]:"Comment added"},[ry]:{id:"auditlogEventFilter.actionName.page.discussion.comment.updated",[cy]:"Comment updated"},[sy]:{id:"auditlogEventFilter.actionName.page.discussion.comment.deleted",[cy]:"Comment deleted"},page_edited:{id:"auditlogEventFilter.actionName.page_edited",[cy]:"Page edited"},page_viewed:{id:"auditlogEventFilter.actionName.page_viewed",[cy]:"Page viewed"},page_created:{id:"auditlogEventFilter.actionName.page_created",[cy]:"Page created"},page_deleted:{id:"auditlogEventFilter.actionName.page_deleted",[cy]:"Page deleted"},[ay]:{id:"auditlogEventFilter.actionName.page.permanently_deleted",[cy]:"Page permanently deleted"},page_restored:{id:"auditlogEventFilter.actionName.page_restored",[cy]:"Page restored"},page_exported:{id:"auditlogEventFilter.actionName.page_exported",[cy]:"Page exported"},page_moved:{id:"auditlogEventFilter.actionName.page_moved",[cy]:"Page moved"},[ny]:{id:"auditlogEventFilter.actionName.page_permission_updated",[cy]:"Page permission updated"},page_shared_to_web:{id:"auditlogEventFilter.actionName.page_shared_to_web",[cy]:"Page shared to web"},password_set:{id:"auditlogEventFilter.actionName.password_set",[cy]:"Password set"},password_cleared:{id:"auditlogEventFilter.actionName.password_cleared",[cy]:"Password cleared"},password_changed:{id:"auditlogEventFilter.actionName.password_changed",[cy]:"Password changed"},login:{id:"auditlogEventFilter.actionName.login",[cy]:"Login"},logout:{id:"auditlogEventFilter.actionName.logout",[cy]:"Logout"},mfa_sms_toggled:{id:"auditlogEventFilter.actionName.mfa_sms_toggled",[cy]:"MFA SMS toggled"},mfa_totp_toggled:{id:"auditlogEventFilter.actionName.mfa_totp_toggled",[cy]:"MFA TOTP toggled"},[oy]:{id:"auditlogEventFilter.actionName.mfa_backup_code_toggled",[cy]:"MFA backup code toggled"},member_invited:{id:"auditlogEventFilter.actionName.member_invited",[cy]:"Member invited"},member_joined:{id:"auditlogEventFilter.actionName.member_joined",[cy]:"Member joined"},member_role_updated:{id:"auditlogEventFilter.actionName.member_role_updated",[cy]:"Member role updated"},member_removed:{id:"auditlogEventFilter.actionName.member_removed",[cy]:"Member removed"},guest_removed:{id:"auditlogEventFilter.actionName.guest_removed",[cy]:"Guest removed"},user_deleted:{id:"auditlogEventFilter.actionName.user_deleted",[cy]:"User deleted"},email_changed:{id:"auditlogEventFilter.actionName.email_changed",[cy]:"Email changed"},[iy]:{id:"auditlogEventFilter.actionName.preferred_name_changed",[cy]:"Name changed"},picture_changed:{id:"auditlogEventFilter.actionName.picture_changed",[cy]:"Picture changed"},file_uploaded:{id:"auditlogEventFilter.actionName.file_uploaded",[cy]:"File uploaded"},file_downloaded:{id:"auditlogEventFilter.actionName.file_downloaded",[cy]:"File downloaded"},invite_link_toggled:{id:"auditlogEventFilter.actionName.invite_link_toggled",[cy]:"Invite link toggled"},[ty]:{id:"auditlogEventFilter.actionNames.workspace_name_changed",[cy]:"Workspace name changed"},[ey]:{id:"auditlogEventFilter.actionNames.workspace_integration_restriction_changed",[cy]:"Integration installation toggled"},invite_link_reset:{id:"auditlogEventFilter.actionNames.invite_link_reset",[cy]:"Invite link reset"},[Xf]:{id:"auditlogEventFilter.actionNames.public_page_sharing_toggled",[cy]:"Public page sharing toggled"},[Yf]:{id:"auditlogEventFilter.actionNames.workspace_sidebar_editing_toggled",[cy]:"Workspace sidebar editing toggled"},[$f]:{id:"auditlogEventFilter.actionNames.disable_team_guests_toggled",[cy]:"Disable teamspace guests toggled"},[Jf]:{id:"auditlogEventFilter.actionNames.disable_guests_toggled",[cy]:"Disable guests toggled"},[Qf]:{id:"auditlogEventFilter.actionNames.pages_to_other_workspaces_toggled",[cy]:"Pages to other workspaces toggled"},export_toggled:{id:"auditlogEventFilter.actionNames.export_toggled",[cy]:"Export toggled"},[jf]:{id:"auditlogEventFilter.actionNames.page_access_requests_toggled",[cy]:"Page access requests toggled"},workspace_exported:{id:"auditlogEventFilter.actionNames.workspace_exported",[cy]:"Workspace content exported"},audit_log_exported:{id:"auditlogEventFilter.actionNames.audit_log_exported",[cy]:"Audit Log exported"},[qf]:{id:"auditlogEventFilter.actionNames.user_analytics_exported",[cy]:"User Analytics exported"},[Hf]:{id:"auditlogEventFilter.actionNames.content_analytics_exported",[cy]:"Content Analytics exported"},[Gf]:{id:"auditlogEventFilter.actionNames.workspace_icon_changed",[cy]:"Workspace icon changed"},[zf]:{id:"auditlogEventFilter.actionNames.allowed_email_domain_added",[cy]:"Added allowed email domain"},[Kf]:{id:"auditlogEventFilter.actionNames.allowed_email_domain_removed",[cy]:"Removed allowed email domain"},[Wf]:{id:"auditlogEventFilter.actionNames.workspace_domain_changed",[cy]:"Workspace domain changed"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",[cy]:"Public home page link cleared"},public_page_set:{id:"auditlogEventFilter.actionNames.public_page_set",[cy]:"Public home page set"},scim_token_generated:{id:"auditlogEventFilter.actionNames.scim_token_generated",[cy]:"SCIM token generated"},scim_token_revoked:{id:"auditlogEventFilter.actionNames.scim_token_revoked",[cy]:"SCIM token revoked"},[Vf]:{id:"auditlogEventFilter.actionNames.idp_metadata_url_updated",[cy]:"IDP metadata URL updated"},[Uf]:{id:"auditlogEventFilter.actionNames.idp_metadata_xml_updated",[cy]:"IDP metadata XML updated"},[Of]:{id:"auditlogEventFilter.actionNames.idp_metadata_xml_removed",[cy]:"IDP metadata XML removed"},saml_toggled:{id:"auditlogEventFilter.actionNames.saml_toggled",[cy]:"SAML enable setting toggled"},saml_enforce_toggled:{id:"auditlogEventFilter.actionNames.saml_enforce_toggled",[cy]:"SAML enforce setting toggled"},[Nf]:{id:"auditlogEventFilter.actionNames.automatic_account_creation_toggled",[cy]:"Auto-create accounts on sign-in toggled"},[Rf]:{id:"auditlogEventFilter.actionNames.workspace_creation_set_for_email_domain",[cy]:"Workspace creation setting updated"},[Lf]:{id:"auditlogEventFilter.actionNames.workspace_domain_settings_session_duration_updated",[cy]:"Session duration for managed users updated"},[Ef]:{id:"auditlogEventFilter.actionNames.workspace_domain_settings_external_workspace_access_updated",[cy]:"Ability for managed users to join external workspaces updated"},[Df]:{id:"auditlogEventFilter.actionNames.workspace_domain_prevent_profile_edits_updated",[cy]:"Ability for managed users to edit their profile information updated"},[Bf]:{id:"auditlogEventFilter.actionNames.workspace_domain_prevent_granting_support_access_updated",[cy]:"Ability for managed users to grant support access updated"},[Af]:{id:"auditlogEventFilter.actionNames.member_added_to_group",[cy]:"Member added to group"},[xf]:{id:"auditlogEventFilter.actionNames.member_removed_from_group",[cy]:"Member removed from group"},[_f]:{id:"auditlogEventFilter.actionNames.space_transfer_status_changed",[cy]:"Claimable workspace transfer status change"},[Ff]:{id:"auditlogEventFilter.actionNames.space_claim_and_upgrade_status_changed",[cy]:"Claimable workspace upgrade status change"},[If]:{id:"auditlogEventFilter.actionNames.space_claim_deletion_status_changed",[cy]:"Claimable workspace deletion status change"},[Pf]:{id:"auditlogEventFilter.actionNames.allowed_support_access",[cy]:"Granted support access"},[Tf]:{id:"auditlogEventFilter.actionNames.revoked_support_access",[cy]:"Revoked support access"},[Zf]:{id:"auditlogEventFilter.actionNames.membership_requests_toggled",[cy]:"Membership requests toggled"},[Cf]:{id:"auditlogEventFilter.actionNames.membership_request_resolved",[cy]:"Membership request resolved"},[kf]:{id:"auditlogEventFilter.actionNames.guest_membership_requests_toggled",[cy]:"Guest membership requests toggled"},team_created:{id:"auditlogEventFilter.actionNames.team_created",[cy]:"Teamspace created"},team_archived:{id:"auditlogEventFilter.actionNames.team_archived",[cy]:"Teamspace archived"},team_restored:{id:"auditlogEventFilter.actionNames.team_restored",[cy]:"Teamspace restored"},team_default_toggled:{id:"auditlogEventFilter.actionNames.team_default_toggled",[cy]:"Teamspace default toggled"},[Mf]:{id:"auditlogEventFilter.actionNames.team_privacy_type_changed",[cy]:"Teamspace privacy type changed"},[wf]:{id:"auditlogEventFilter.actionNames.team_invite_access_changed",[cy]:"Teamspace invite access changed"},[Sf]:{id:"auditlogEventFilter.actionNames.team_public_page_sharing_toggled",[cy]:"Teamspace public page sharing toggled"},team_export_toggled:{id:"auditlogEventFilter.actionNames.team_export_toggled",[cy]:"Teamspace export toggled"},[bf]:{id:"auditlogEventFilter.actionNames.team_sidebar_editing_toggled",[cy]:"Teamspace sidebar editing toggled"},team_guests_toggled:{id:"auditlogEventFilter.actionNames.team_guests_toggled",[cy]:"Teamspace disable guests toggled"},team_name_changed:{id:"auditlogEventFilter.actionNames.team_name_changed",[cy]:"Teamspace name changed"},[yf]:{id:"auditlogEventFilter.actionNames.team_description_changed",[cy]:"Teamspace description changed"},team_icon_changed:{id:"auditlogEventFilter.actionNames.team_icon_changed",[cy]:"Teamspace icon changed"},[ff]:{id:"auditlogEventFilter.actionNames.team_creation_admins_setting_toggled",[cy]:"Teamspace creation setting toggled"},member_added_to_team:{id:"auditlogEventFilter.actionNames.member_added_to_team",[cy]:"Member added to teamspace"},[vf]:{id:"auditlogEventFilter.actionNames.member_removed_from_team",[cy]:"Member removed from teamspace"},group_added_to_team:{id:"auditlogEventFilter.actionNames.group_added_to_team",[cy]:"Group added to teamspace"},[hf]:{id:"auditlogEventFilter.actionNames.group_removed_from_team",[cy]:"Group removed from teamspace"},member_left_team:{id:"auditlogEventFilter.actionNames.member_left_team",[cy]:"Member left teamspace"},member_joined_team:{id:"auditlogEventFilter.actionNames.member_joined_team",[cy]:"Member joined teamspace"},[gf]:{id:"auditlogEventFilter.actionNames.member_team_role_updated",[cy]:"Member teamspace role updated"},[pf]:{id:"auditlogEventFilter.actionNames.team_user_permission_updated",[cy]:"Custom permissions updated for a member in the teamspace"},[mf]:{id:"auditlogEventFilter.actionNames.team_group_permission_updated",[cy]:"Custom permissions updated for a group in the teamspace"},[uf]:{id:"auditlogEventFilter.actionNames.team_member_default_permission_updated",[cy]:"Teamspace Members default permission updated"},[cf]:{id:"auditlogEventFilter.actionNames.team_guest_default_permission_updated",[cy]:"Teamspace Guests default permission updated"},[df]:{id:"auditlogEventFilter.actionNames.team_workspace_default_permission_updated",[cy]:"Everyone in workspace default page permission updated"},[lf]:{id:"auditlogEventFilter.actionNames.teams_enabled_for_space",[cy]:"Enabled teamspaces"},[rf]:{id:"auditLogEventFilter.actionNames.private_content_transferred",[cy]:"Private content transferred"},[sf]:{id:"auditLogEventFilter.actionNames.admin_content_search_queried",[cy]:"Content search queried"},[af]:{id:"auditLogEventFilter.actionNames.admin_content_search_exported",[cy]:"Content search results exported"},[nf]:{id:"auditLogEventFilter.actionNames.admin_managed_users_log_out_all",[cy]:"All managed users logged out"},[of]:{id:"auditLogEventFilter.actionNames.admin_managed_users_log_out_one",[cy]:"A managed user was logged out by an admin"},[tf]:{id:"auditLogEventFilter.actionNames.password_cleared",[cy]:"All managed users' passwords cleared"},[ef]:{id:"auditLogEventFilter.actionNames.admin_managed_users_password_cleared_one",[cy]:"A managed user's password was cleared by an admin"},automation_created:{id:"auditLogEventFilter.actionNames.automation_created",[cy]:"Automation created"},automation_edited:{id:"auditLogEventFilter.actionNames.automation_edited",[cy]:"Automation edited"},[Xv]:{id:"auditLogEventFilter.actionNames.ai_admin_legal_acceptance_toggled",[cy]:"Notion AI toggled for workspace."},[Yv]:{id:"auditLogEventFilter.actionNames.workspace_analytics_toggled",[cy]:"Workspace analytics tracking toggled"},[$v]:{id:"auditLogEventFilter.actionNames.space_consolidation_started",[cy]:"Workspace consolidation started"},[Jv]:{id:"auditLogEventFilter.actionNames.space_consolidation_completed",[cy]:"Workspace consolidation completed"},[Qv]:{id:"auditLogEventFilter.actionNames.space_consolidation_failed",[cy]:"Workspace consolidation failed"},user_suspended:{id:"auditLogEventFilter.actionNames.user_suspended",[cy]:"User suspended"},user_unsuspended:{id:"auditLogEventFilter.actionNames.user_unsuspended",[cy]:"User reactivated"}})),py=(0,f.defineMessages)({private:{id:"auditLogColumnEvent.tooltip.pageAudience.private",[cy]:"private"},shared_internally:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedInternally",[cy]:"shared internally"},shared_externally:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedExternally",[cy]:"shared externally"},shared_to_web:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedToWeb",[cy]:"shared to web"}}),gy=["name","email","status","activityType",jv,"audience","dateAndTime",qv,"ipAddress","city",Hv,"country","pageId"],hy=Gv,vy=[...gy,hy];(0,f.defineMessages)({name:{id:"exportAuditLog.header.name",[cy]:"Name"},email:{id:"exportAuditLog.header.email",[cy]:"Email"},status:{id:"exportAuditLog.header.status",[cy]:"Status"},activityType:{id:"exportAuditLog.header.activityType",[cy]:"Activity Type"},[jv]:{id:"exportAuditLog.header.activity",[cy]:"Activity"},dateAndTime:{id:"exportAuditLog.header.dateAndTime",[cy]:"Date and Time (UTC)"},[qv]:{id:"exportAuditLog.header.platform",[cy]:"Platform"},ipAddress:{id:"exportAuditLog.header.ipAddress",[cy]:"IP Address"},city:{id:"exportAuditLog.header.city",[cy]:"City"},[Hv]:{id:"exportAuditLog.header.state",[cy]:"State"},country:{id:"exportAuditLog.header.country",[cy]:"Country"},audience:{id:"exportAuditLog.header.audience",[cy]:"Audience"},pageId:{id:"exportAuditLog.header.pageId",[cy]:"Page Id"},[Gv]:{id:"exportAuditLog.header.eventName",[cy]:"Event Name"}});function fy(e,t,i){var o;return e[zv].actorId===Ya.s$.id||e[zv].actorId===Ya.el.id?t[Kv]({[cy]:"notion_admin",id:"auditLogPaginatedTable.copiedText.notionAdmin"}):"notion_user"===e[zv].actorType?t[Kv](function(e,t){if(!e)return Rv[Ev];if(t){if("guest"===e)return Rv.pageGuestLabel;if("team_level_guest"===e)return Rv.teamGuestLabel}switch(e){case"admin":return Rv.workspaceOwnerLabel;case"membership_admin":return Rv.membershipAdminLabel;case"member":return Rv.memberLabel;case"guest":case"team_level_guest":return Rv.guestLabel;case"no_access":return Rv[Ev];default:(0,x.unreachable)(e)}}(null===(o=e[zv].meta)||void 0===o?void 0:o.spaceRole,i)):t[Kv]({[cy]:"N/A",id:"auditLogPaginatedTable.copiedText.noRole"})}function yy(e,t){var i,o,n,a,s,r,l,d,c,u,m,p,g,h,v,f,y,b;return null!==(i=e[zv].meta)&&void 0!==i&&i[Wv]?null!==(o=e[zv])&&void 0!==o&&null!==(n=o.meta)&&void 0!==n&&n.city?"US"===(null===(a=e[zv].meta)||void 0===a?void 0:a[Wv])&&null!==(s=e[zv])&&void 0!==s&&null!==(r=s.meta)&&void 0!==r&&r[Hv]?t[Kv]({[cy]:"{city}, {state}, {countryCode}",id:"auditLogSettings.metadata.cityStateAndCountry"},{city:null===(g=e[zv])||void 0===g||null===(h=g.meta)||void 0===h?void 0:h.city,[Hv]:null===(v=e[zv])||void 0===v||null===(f=v.meta)||void 0===f?void 0:f[Hv],[Wv]:null===(y=e[zv])||void 0===y||null===(b=y.meta)||void 0===b?void 0:b[Wv]}):t[Kv]({[cy]:"{city}, {countryCode}",id:"auditLogSettings.metadata.cityAndCountry"},{city:null===(l=e[zv])||void 0===l||null===(d=l.meta)||void 0===d?void 0:d.city,[Wv]:null===(c=e[zv])||void 0===c||null===(u=c.meta)||void 0===u?void 0:u[Wv]}):null===(m=e[zv])||void 0===m||null===(p=m.meta)||void 0===p?void 0:p[Wv]:""}function by(e){const{[Vv]:t,intl:i,getAuditLogEventText:o,isTeamGuestsEnabled:n,csvColumnNames:a}=e,s=[],r=i[Kv](Nv.missing);return a.forEach((e=>{var a,l,d,c,u;switch(e){case"name":s.push(t[zv].name||r);break;case"email":s.push(function(e,t){return"notion_user"===e[zv].actorType?e[zv].email:t[Kv]({[cy]:"N/A",id:"auditLogPaginatedTable.copiedText.noEmail"})}(t,i)||r);break;case"status":s.push(fy(t,i,n)||r);break;case"activityType":s.push(my[t[Uv]]?i[Kv](my[t[Uv]]):r);break;case jv:s.push(o(t)||r);break;case"dateAndTime":s.push((0,Dv.$I)(t.serverTimestamp));break;case qv:s.push((null===(a=t[zv].meta)||void 0===a?void 0:a[qv])||r);break;case"ipAddress":s.push((null===(l=t[zv].meta)||void 0===l?void 0:l.ipAddress)||r);break;case"city":s.push((null===(d=t[zv].meta)||void 0===d?void 0:d.city)||r);break;case Hv:s.push((null===(c=t[zv].meta)||void 0===c?void 0:c[Hv])||r);break;case"country":s.push((null===(u=t[zv].meta)||void 0===u?void 0:u[Wv])||r);break;case"audience":const m=function(e){return Sy(e)??e.intl[Kv](Nv.notApplicable)}({[Vv]:t,intl:i});s.push(m||r);break;case"pageId":const p=mi(t);p?s.push(p.id):s.push(i[Kv](Nv.notApplicable));break;case Gv:s.push(function(e){let{[Vv]:t,intl:i}=e;const o=t[Uv];return xv[o]?xv[o]:((0,x.arrayIncludes)(Av,o),i[Kv](uy))}({[Vv]:t,intl:i}));break;default:(0,x.unreachable)(e)}})),s.map(Ov).join(",")}function Sy(e){var t;const{[Vv]:i,intl:o}=e,n=mi(i);return null!=n&&null!==(t=n.meta)&&void 0!==t&&t.pageAudience?o[Kv](py[n.meta.pageAudience]):null}var wy=i(58573);const My=i(85).Wp_,ky=i(85).QmD,Cy=i(85).ggi,Zy=i(85).DN7,Ty=i(85).fBi,Py=i(85).dGR,Iy=i(85).MhQ,Fy=i(85).F5j,_y=i(85).Va3,xy=i(85).bfy,Ay=i(85).v62,By=i(85).tUM,Dy=i(85)._tm,Ey=i(85).hJW,Ly=i(85).MqD,Ry=i(85)._dZ,Ny=i(85).Ga3,Oy=i(85).Epl,Uy=i(85).X$r,Vy=i(85).geM,Wy=i(85).tKx,Ky=i(85).Wyb,zy=i(85).MUl,Gy=i(85).YGe,Hy=i(85).b0i,qy=i(85).RkH,jy=i(85).Al6,Qy=i(85).g4T,Jy=i(85).wU5,$y=i(85).CSo,Yy=i(85).DtP,Xy=i(85).IE,eb=i(85).D7o,tb=i(85).BfV,ib=i(85).PC5,ob=i(85).XMQ,nb=i(85).bmp,ab=i(85).Xv6,sb=i(85).RZM,rb=i(85).l3E,lb=i(85).DuE,db=i(85).OZo,cb=i(85).s9n,ub=i(85).fof,mb=i(85).Y7P,pb=i(85).oh,gb=i(85).g7y,hb=i(85).pwv,vb=i(85).g1z,fb=i(85).kck,yb=i(85).fBX,bb=i(85).CYo,Sb=i(85).iKx,wb=i(85).qyt,Mb=i(85)._5m,kb=i(85).pCA,Cb=i(85).gu6,Zb=i(85).AVE,Tb=i(85).lij,Pb=i(85).le5,Ib=i(85).qaB,Fb=i(85).iaY,_b=i(85).d_H,xb=i(85).qM$,Ab=i(85).hh4,Bb=i(85).Sg4,Db=i(85).n5k,Eb=i(85).Lxl,Lb=i(85).F3B,Rb=i(85).yMU,Nb=i(85).fAM,Ob=i(85).PhH,Ub=i(85).fwN,Vb=i(85).INQ,Wb=i(85).x5M,Kb=i(85).Hlk;let zb;!function(e){e.All="All",e.Partial="Partial",e.None="None"}(zb||(zb={}));class Gb extends E.default{getInitialState(){return{[Kb]:{page:zb.All,space:zb.All,team:zb.All,[Wb]:zb.All},[Vb]:{page:!0,space:!0,team:!0,[Wb]:!0},searchQuery:void 0,[Ub]:{[Ob]:!0,page_edited:!0,page_viewed:!0,page_created:!0,page_deleted:!0,[Nb]:!0,page_restored:!0,page_exported:!0,page_moved:!0,[Rb]:!0,page_shared_to_web:!0,[Lb]:!0,automation_created:!0,automation_edited:!0,password_set:!0,password_cleared:!0,password_changed:!0,login:!0,logout:!0,member_invited:!0,member_role_updated:!0,member_removed:!0,guest_removed:!0,email_changed:!0,user_deleted:!0,member_joined:!0,[Eb]:!0,picture_changed:!0,[Db]:!0,[Bb]:!0,[Ab]:!0,[xb]:!0,[_b]:!0,workspace_exported:!0,audit_log_exported:!0,[Fb]:!0,[Ib]:!0,public_page_cleared:!0,public_page_set:!0,scim_token_generated:!0,scim_token_revoked:!0,saml_toggled:!0,saml_enforce_toggled:!0,mfa_sms_toggled:!0,mfa_totp_toggled:!0,[Pb]:!0,[Tb]:!0,[Zb]:!0,[Cb]:!0,[kb]:!0,[Mb]:!0,[wb]:!0,[Sb]:!0,file_uploaded:!0,file_downloaded:!0,invite_link_toggled:!0,invite_link_reset:!0,[bb]:!0,[yb]:!0,[fb]:!0,[vb]:!0,[hb]:!0,[gb]:!0,export_toggled:!0,[pb]:!0,[mb]:!0,[ub]:!0,[cb]:!0,[db]:!0,[lb]:!0,[rb]:!0,[sb]:!0,[ab]:!0,team_created:!0,team_archived:!0,team_restored:!0,team_default_toggled:!0,[nb]:!0,team_guests_toggled:!0,team_export_toggled:!0,[ob]:!0,team_name_changed:!0,[ib]:!0,team_icon_changed:!0,[tb]:!0,member_added_to_team:!0,group_added_to_team:!0,[eb]:!0,[Xy]:!0,member_left_team:!0,member_joined_team:!0,[Yy]:!0,[$y]:!0,[Jy]:!0,[Qy]:!0,[jy]:!0,[qy]:!0,[Hy]:!0,[Gy]:!0,[zy]:!0,[Ky]:!0,[Wy]:!0,[Vy]:!0,[Uy]:!0,[Oy]:!0,[Ny]:!0,[Ry]:!0,[Ly]:!0,[Ey]:!0,[Dy]:!0,[By]:!0,user_suspended:!0,user_unsuspended:!0,[Ay]:!0,[xy]:!0,[_y]:!0,[Fy]:!0,[Iy]:!0,[Py]:!0,[Ty]:!0},isMenuOpen:!1,renderOrder:[{[Zy]:"page",[Cy]:ui.page},{[Zy]:"space",[Cy]:ui.space},{[Zy]:Wb,[Cy]:ui[Wb]},{[Zy]:"team",[Cy]:ui.team}]}}getAllActionNames(){return(0,x.objectKeys)(this[ky][Ub])}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this[ky][Ub][e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this[My]({...this[ky],searchQuery:e})}toggleCategorySelection(e){const t=e[Zy];this[My]({...this[ky],[Vb]:{...this[ky][Vb],[t]:!this[ky][Vb][t]}})}selectCategorySelection(e){const t=e[Zy],i=this[ky][Kb][t],o=i===zb.None||i===zb.Partial?zb.All:zb.None,n=o===zb.All,a={...this[ky][Ub]},s=this[ky].renderOrder.find((e=>e[Zy]===t));s&&(s[Cy].forEach((e=>{a[e]=n})),this[My]({...this[ky],[Ub]:a,[Kb]:{...this[ky][Kb],[s[Zy]]:o}}))}selectActionName(e,t){const i=this[ky][Ub][e],o={...this[ky][Ub],[e]:!i},n=t[Cy].filter((e=>o[e])).length,a=0===n?zb.None:n===t[Cy].length?zb.All:zb.Partial;this[My]({...this[ky],[Ub]:o,[Kb]:{...this[ky][Kb],[t[Zy]]:a}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,x.objectKeys)(this[ky][Ub]),!1),t=this.getBulkUpdateNextCategorySelectionState((0,x.objectKeys)(this[ky][Kb]),zb.None);this[My]({...this[ky],[Ub]:e,[Kb]:t})}getBulkUpdateNextCategorySelectionState(e,t){const i={...this[ky][Kb]};return e.forEach((e=>{i[e]=t})),i}getBulkUpdateNextActionSelectionState(e,t){const i={...this[ky][Ub]};return e.forEach((e=>{i[e]=t})),i}}var Hb=i(5210);const qb=i(85).PG2,jb=i(85).XNW,Qb=i(85).nx5,Jb={page:n()(f.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",[Qb]:"Page"}),space:n()(f.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",[Qb]:"Workspace"}),team:n()(f.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",[Qb]:"Teamspace"}),account:n()(f.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",[Qb]:"Account"})};function $b(e){let{totalNumEventsForCategory:t,numSelectedForCategory:i,category:o,categoryOpen:a,shouldShowCount:r,onCategoryClick:l,onCategoryToggleClick:c,...u}=e;window.__c={n:"AuditLogCategoryMenuItem"};const m=(0,ji.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{[jb]:8,fontWeight:600},categorySubHeader:{[jb]:6},toggleButton:{[jb]:2,marginRight:2}})),[]);let p,g;return p=r?n()(f.FormattedMessage,t===i?{id:"auditlogEventFilter.allEventsSelected",[Qb]:"({totalNum} events)",values:{totalNum:t}}:{id:"auditlogEventFilter.numEventsSelected",[Qb]:"({numSelected} of {totalNum} events selected)",values:{numSelected:i,totalNum:t}}):null,g=t===i||0!==i&&"partial",d.createElement($o.Z,s()({},u,{className:"notranslate",textWrapperStyle:m.textWrapperStyle,focused:!1,title:n()("div",{style:m.title},void 0,n()(Hb.Z,{style:m.toggleButton,open:a,[qb]:c,isSidebar:!1,fill:!1,icon:"chevron"}),n()(Yo.Z,{checked:g,size:14,checkSize:8,[qb]:l}),n()(Ji.Z,{style:m.categoryText},void 0,Jb[o]),n()(Ji.Z,{isSecondaryColor:!0,style:m.categorySubHeader},void 0,p))}))}const Yb=i(85).XNW,Xb=i(85).ccq,eS=i(85).ESK,tS=i(85)._lc,iS=i(85).Mm1,oS=i(85).SEy,nS=i(85).S9$,aS=i(85).jFW,sS=i(85).EwH,rS=i(85).Wp_,lS=i(85).RZM,dS=i(85).g4T,cS=i(85).unR,uS=i(85).PP_,mS=i(85).PXg,pS=i(85).zJh,gS=i(85).PG2,hS=i(85).EMU,vS=i(85).h8z,fS=i(85).UPJ,yS=i(85).LlE,bS=i(85).I7L,SS=i(85).nQ3,wS=i(85).j7K,MS=i(85).y79,kS=i(85).kdC,CS=i(85).Dd5,ZS=i(85).cZW,TS=i(85).nx5,PS=i(85).Yzm,IS=i(85).L_E,FS=i(85).D7I,_S=i(85).Ttb,xS=i(85).INQ,AS=i(85).TtP,BS=i(85).fwN,DS=i(85).ggi,ES=i(85).DN7,LS=i(85).QmD,RS=i(85).piL,NS=i(85).G4H,OS=i(85).Gnd,US=i(85).P0G;class VS extends c.Z{constructor(){super(...arguments),this.storeTypes={componentStore:Gb,lastSelectionStore:Gb,[US]:Qo.Z},this.renderMenu=()=>{const{componentStore:e,[US]:t}=this[OS],i=this[NS],o=[];let a=0,r=0;const l=e[LS][RS];for(const n of e[LS].renderOrder){const t=n[ES];if("team"===t&&!(0,A.bq)())return;const i=[];let s=0;for(const o of n[DS])this.eventsToFilterOut.includes(o)||(i.push(this.renderActionNameMenu(o,n)),e[LS][BS][o]&&s++);if(a+=s,r+=i[AS],o.push(this.renderCategoryMenu({renderGroup:n,shouldShowCount:!Boolean(l),totalNumEventsForCategory:i[AS],numSelectedForCategory:s})),e[LS][xS][t])if(l){const e=(0,wy.ZP)(l,i,KS);o.push(...e)}else o.push(...i)}const c={key:_S,items:o,render:e=>d[FS](on.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:i[IS]},void 0,n()(bl.Z,{style:i.searchInput,[ZS]:this.props.intl[PS]({id:"auditlogEventFilter.searchPlaceholder",[TS]:"Search for an event"}),[CS]:this.handleUpdateSearchQuery,value:e[LS][RS],[kS]:!0}),l&&n()(zS,{totalNumSelected:a,totalNumEvents:r}),n()(Xo.Z,{menuType:jo.og.Popup,header:null,[bS]:356},void 0,n()(en.Z,{type:en.i[MS],store:t,[wS]:0,[SS]:[c]})),n()(on.Z,{topBorder:!0,style:{[yS]:"8px 8px 2px 8px",[fS]:vS,display:hS}},void 0,n()(Io.Z,{[gS]:()=>{this.handleClear()}},void 0,n()(f.FormattedMessage,{id:"auditlogEventFilter.clearButton",[TS]:"Clear"})),n()(Po.Z,{[gS]:()=>{this.handleApply()}},void 0,n()(f.FormattedMessage,{id:"auditlogEventFilter.applyButton",[TS]:"Apply"}))))},this[pS]=e=>{const{componentStore:t}=this[OS],i=t.hasActionNameSelected();return n()(Jo.Z,{on:i,icon:m.Z.bot({width:16,[mS]:6,fill:uS}),title:n()("span",{},void 0,e),[gS]:()=>{this.setMenuOpen(!0)}})},this.featureGatedEventsToFilterOut=(0,x.objectEntries)(_v).reduce(((e,t)=>{let[i,o]=t;return Z.default[cS](i)?e:[...e,...o]}),[]),this.teamspaceGuestEventsToFilterOut=(0,Q.isTeamspaceGuestsEnabled)()?[]:[dS],this.guestMembershipEventsToFilterOut=(0,Q.isGuestMembershipRequestEnabled)()?[]:[lS],this.eventsToFilterOut=[...this.featureGatedEventsToFilterOut,...this.teamspaceGuestEventsToFilterOut,...this.guestMembershipEventsToFilterOut],this.setMenuOpen=e=>{const{componentStore:t}=this[OS];t[rS]({...t[LS],[sS]:e})},this.handleUpdateSearchQuery=e=>{this[OS].componentStore.updateSearchQuery(e.target.value)},this[NS]={[IS]:{minWidth:460},searchInput:{[yS]:8,[aS]:0,[nS]:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:this.theme[oS]},popup:{[iS]:8}}}renderComponent(){const{componentStore:e}=this[OS],t=this[NS],i=n()(f.FormattedMessage,{id:"auditlogEventFilter.title",[TS]:"Event"}),o=this[pS](i);return n()(nn.Z,{marginAfter:!1},void 0,n()(tn.ZP,{popupType:tn.ZP[tS].Popup,[Xb]:tn.ZP[eS].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,open:e[LS][sS],render:this.renderMenu,onDismiss:()=>{this.handleMenuCloseFromOutside()},keepFocus:!0,origin:o,preventScaleTransition:!0,style:t.popup}))}renderCategoryMenu(e){const{renderGroup:t,shouldShowCount:i,totalNumEventsForCategory:o,numSelectedForCategory:n}=e,{componentStore:a}=this[OS],r=t[ES],l=()=>{a.toggleCategorySelection(t)},c=()=>{a.selectCategorySelection(t)};return{key:r,action:l,render:e=>d[FS]($b,s()({totalNumEventsForCategory:o,numSelectedForCategory:n,[ES]:r,categoryOpen:a[LS][xS][r],shouldShowCount:i,onCategoryToggleClick:l,onCategoryClick:c},e)),localizedActionName:null,actionName:null}}renderActionNameMenu(e,t){const{intl:i}=this.props,{componentStore:o}=this[OS],a=()=>{o.selectActionName(e,t)},r=i[PS](my[e]);return{key:e,action:a,render:t=>d[FS]($o.Z,s()({},t,{icon:n()(Yo.Z,{checked:o[LS][BS][e],size:14,checkSize:8,[gS]:a}),focused:!1,title:r,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{[Yb]:4}})),actionName:e,localizedActionName:r}}handleMenuCloseFromOutside(){const{componentStore:e,lastSelectionStore:t}=this[OS];e[rS]({...e[LS],[BS]:{...t[LS][BS]}}),this.setMenuOpen(!1)}handleClear(){const{componentStore:e}=this[OS];e.clearAllSelections()}handleApply(){const{[CS]:e}=this.props,{componentStore:t,lastSelectionStore:i}=this[OS],o=t.getAllActionNames(),n=t.getSelectedActionNames();e(o[AS]===n[AS]?[]:n),0===n[AS]&&t.reset(),i[rS]({...i[LS],[BS]:{...t[LS][BS]}}),this.setMenuOpen(!1)}}VS.displayName="AuditLogEventFilter";const WS=(0,f.injectIntl)(VS);function KS(e){var t;return l().compact([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function zS(e){let{totalNumSelected:t,totalNumEvents:i}=e;window.__c={n:"SelectedEventsPill"};const o=(0,ji.yK)((e=>({[IS]:{background:Bv.ZP.diffBackground,color:Bv.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{[Yb]:8}})),[]);return n()(Ji.Z,{style:o[IS]},void 0,n()(f.FormattedMessage,{id:"auditLogEventFilter.selectedPill",[TS]:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:i}}))}const GS=i(85).Lhq,HS=i(85).fBu,qS=i(85).Dd5,jS=i(85).bl5,QS=i(85).nx5,JS=i(85).$bT;const $S=(0,f.injectIntl)((function(e){window.__c={n:"AuditLogFilterContainer"};const{spaceStore:t}=e,[i,o]=(0,qi.AF)(fi),[a,s,r]=(0,qi.AF)(yp);return n()("div",{style:{display:"flex",[JS]:"row",gap:4}},void 0,n()(Ou,{mode:Ac.z.Pill,focused:!1,title:n()(f.FormattedMessage,{id:"auditlogDateFilter.title",[QS]:"Date"}),icon:m.Z.calendar,value:i[jS],showButtons:"footer",[qS]:e=>{o({...i,[jS]:e,pageNum:1})}}),n()(ug,{[HS]:t,auditLogHistoricalUserStore:r,selectedActors:i.actors,[qS]:e=>{o({...i,actors:e,pageNum:1})}}),n()(WS,{[HS]:t,selectedEvents:i[GS],[qS]:e=>{o({...i,[GS]:e,pageNum:1})}}))})),YS=i(85).fCB,XS=i(85).nx5,ew=i(85).h8z,tw=i(85).UPJ,iw=i(85).EMU,ow=i(85).ChN,nw=i(85).Mm1;function aw(){return n()(Yi.Z,{large:!0,style:{marginBottom:0,[nw]:0,fontSize:16,[ow]:v.Z[ow].medium,display:iw,[tw]:ew}},void 0,n()("div",{style:{gap:8,display:iw}},void 0,n()(f.FormattedMessage,{id:"auditlog.title",[XS]:"Audit log"})),n()(sw,{}))}function sw(){window.__c={n:"AuditLogFeedbackButton"};const e=(0,Hi.O7)();return No.default.isLocalhost||"development"===No.default.env?n()(eo.Z,{style:{marginLeft:10},isSmall:!0,onClick:()=>{M[YS]({environment:e,url:"https://dev.notion.so/notion/Audit-Log-Dev-feedback-e9048c4e7d544369b0b8413ec20f02cf",targetSelf:!0})}},void 0,"🎁 Feedback is a gift!"):null}var rw=i(43568);const lw=i(85).XEN,dw=i(85).vvq,cw=i(85).OM8;const uw=function(){return n()("div",{style:{}},void 0,n()(rw.Z,{paragraphs:[{[cw]:45,lineMargin:20,[dw]:[100],repeat:1,[lw]:15},{[cw]:40,lineMargin:5,[dw]:[100],repeat:8,[lw]:10}]}))};var mw=i(21752);const pw=i(85).D7I,gw=i(85).L_E,hw=i(85).TLr,vw=i(85).hWY;function fw(e){window.__c={n:"AuditLogColumnActor"};const{auditLogEntry:t,spaceStore:i,id:o}=e,a=(0,f.useIntl)(),r=(0,qi.VK)((()=>{if(t[vw].actorType===Ya.KJ){const e=go.U6[hw](i,{id:t[vw].actorId,table:Ya.KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t[vw].email)return{avatar:{name:t[vw].name,email:t[vw].email}}}else if(t[vw].actorType===ba.cZ){const e=go.Qx[hw](i,{id:t[vw].actorId,table:ba.cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t[vw].name,email:t[vw].actorId}}}return{actorStore:void 0}}),[i,t]),l=(0,qi.VK)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(a))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,a]),c=(0,qi.VK)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),u=(0,d.useMemo)((()=>{var e;if(t[vw].actorType===Ya.KJ)return(0,mw.K)(null===(e=t[vw].meta)||void 0===e?void 0:e.spaceRole)}),[t]),m=(0,ji.yK)((()=>({[gw]:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,d.createRef)();return n()(ro.Z,{disableTooltip:yw(p.current),renderTooltip:()=>d[pw](d.Fragment,null,n()("div",{},void 0,l),n()("div",{},void 0,c)),placement:ro.Z.Placement.Bottom,render:e=>d[pw]("div",s()({},e,{style:m[gw]}),d[pw](mw.Z,s()({id:o},r,{spaceRole:u})))})}function yw(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var bw=i(13991),Sw=i(25464);const ww=i(85).D7I,Mw=i(85).nx5,kw=i(85).rps,Cw=i(85).$bT,Zw=i(85).L_E;function Tw(e){window.__c={n:"AuditLogColumnDateTime"};const{auditLogEntry:t,id:i}=e,o=(0,ji.yK)((()=>({[Zw]:{display:"block",width:"100%"}})),[]);return n()(ro.Z,{renderTooltip:()=>n()("div",{style:{display:"flex",[Cw]:kw,fontVariantNumeric:"tabular-nums"}},void 0,n()("div",{},void 0,n()(f.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",[Mw]:"UTC: {time}",values:{time:(0,Dv.$I)(t.serverTimestamp)}}))),render:e=>n()("div",{id:i,style:o[Zw]},void 0,d[ww](Ji.Z,s()({isSecondaryColor:!0},e),(0,Dv.Yx)(t.serverTimestamp,"medium_with_time",bw.SP))),placement:Sw.u.Bottom})}var Pw=i(44317),Iw=i(65917),Fw=i(19639),_w=i(90468),xw=i(73123);const Aw=i(85).GnU,Bw=(i(85).HSO,i(85).fYw),Dw=i(85).GTJ,Ew=i(85).bCs,Lw=i(85).v62,Rw=(i(85).coH,i(85).bfy),Nw=(i(85).HA_,i(85).Va3),Ow=(i(85).dzy,i(85).F5j),Uw=i(85).uSV,Vw=i(85).vMQ,Ww=(i(85).FOk,i(85).le5),Kw=i(85).s9u,zw=i(85).aN_,Gw=i(85).tUM,Hw=i(85)._tm,qw=i(85).hJW,jw=i(85)._dZ,Qw=i(85).nav,Jw=i(85).yZC,$w=i(85).kYw,Yw=i(85).Epl,Xw=i(85).Ga3,eM=i(85).X$r,tM=(i(85).vkn,i(85).SFi),iM=i(85).opm,oM=i(85).geM,nM=i(85).cMN,aM=i(85).F7X,sM=i(85).JIU,rM=i(85).gaC,lM=i(85).tKx,dM=i(85).Wyb,cM=(i(85).nH3,i(85).lUt),uM=(i(85).sBY,i(85).e5U),mM=i(85).F3B,pM=i(85).P7l,gM=i(85).FkY,hM=i(85).MUl,vM=i(85).YGe,fM=(i(85).Ykx,i(85).b0i),yM=i(85).RkH,bM=i(85).g4T,SM=(i(85).Ry_,i(85).Al6),wM=(i(85).Ik4,i(85).wU5),MM=(i(85).DoS,i(85).CSo),kM=i(85).DtP,CM=i(85).Q_b,ZM=i(85).IE,TM=i(85).D7o,PM=(i(85).TjW,i(85).GiB),IM=i(85).INc,FM=i(85).EKY,_M=i(85).PC5,xM=i(85).g3w,AM=i(85).pP$,BM=i(85).DBW,DM=(i(85).BJZ,i(85).WDz,i(85).BfV),EM=i(85).XMQ,LM=i(85).AXV,RM=i(85).py$,NM=i(85).tBn,OM=i(85).UBO,UM=i(85).bmp,VM=i(85).MOv,WM=i(85).RZM,KM=i(85).Xv6,zM=(i(85).kLD,i(85).l3E),GM=i(85).iKx,HM=i(85).qyt,qM=i(85)._5m,jM=i(85).pCA,QM=i(85).ki8,JM=i(85).gu6,$M=i(85).AVE,YM=i(85).MqD,XM=i(85).lij,ek=i(85).yV$,tk=i(85).Y7P,ik=(i(85).i6h,i(85).qM$),ok=i(85).hh4,nk=i(85).oh,ak=(i(85).jYH,i(85).d_H),sk=(i(85).$g_,i(85).n5k),rk=i(85).iqj,lk=(i(85).qaL,i(85)._ql,i(85).YO5,i(85).LWj),dk=i(85).qRC,ck=(i(85).FlN,i(85).Lxl),uk=(i(85).HRm,i(85).DuE),mk=(i(85).DI7,i(85).OZo),pk=i(85).DLB,gk=i(85).yMU,hk=i(85).fAM,vk=(i(85).jyX,i(85).fBi),fk=i(85).dGR,yk=i(85).MhQ,bk=i(85).NPF,Sk=i(85).v1$,wk=i(85).TtP,Mk=i(85).PhH,kk=i(85).e_Y,Ck=i(85).Ie_,Zk=i(85).u7C,Tk=i(85).N4Y,Pk=i(85).w8T,Ik=i(85).hG9,Fk=i(85).zkl,_k=i(85).KqM,xk=i(85).wpY,Ak=i(85).hWY,Bk=i(85).phx,Dk=i(85).lZS,Ek=i(85).$cP,Lk=i(85).Rtp,Rk=i(85).ro0,Nk=i(85).Lwr,Ok=i(85).OzF,Uk=i(85).Gpy,Vk=i(85).NTi,Wk=i(85).d35,Kk=i(85).Ihs,zk=i(85).D7I,Gk=i(85).T04,Hk=i(85).Yzm,qk=i(85).Lfz,jk=i(85).nm$,Qk=i(85).HZQ,Jk=i(85).M_x,$k=i(85).xw$,Yk=i(85).N5K,Xk=i(85).s9n,eC=i(85).fof,tC=i(85).OaK,iC=i(85).g7y,oC=i(85).pwv,nC=i(85).g1z,aC=i(85).kck,sC=i(85).fBX,rC=i(85).CYo,lC=i(85).NRY,dC=i(85).VTZ,cC=i(85).TEe,uC=i(85).Sg4,mC=i(85).C_P,pC=i(85).a9T,gC=i(85).qaB,hC=i(85).fvj,vC=i(85).uKU,fC=i(85).iaY,yC=i(85).dN_,bC=i(85).MA8,SC=i(85).jS,wC=i(85).fA3,MC=i(85).ydf,kC=i(85).uQ_,CC=i(85).jl,ZC=i(85).Ucp,TC=i(85).NYi,PC=i(85).Veo,IC=i(85).nx5,FC=i(85).EVe;function _C(e){return"workspace"!==e}const xC=(0,f.defineMessages)({[FC]:{id:"auditlog.actionNames.eventColumn.password_cleared",[IC]:"Cleared login password"},[PC]:{id:"auditlog.actionNames.eventColumn.password_set",[IC]:"Created a login password"},[TC]:{id:"auditlog.actionNames.eventColumn.password_changed",[IC]:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",[IC]:"Logged out"},[ZC]:{id:"auditlog.actionNames.eventColumn.user_deleted",[IC]:"User was deleted"},[CC]:{id:"auditlog.actionNames.eventColumn.member_joined",[IC]:"Joined the workspace"},[kC]:{id:"auditlog.actionNames.eventColumn.file_uploaded",[IC]:"Uploaded a file"},[MC]:{id:"auditlog.actionNames.eventColumn.invite_link_reset",[IC]:"Reset invite link"},[wC]:{id:"auditlog.actionNames.eventColumn.workspace_exported",[IC]:"Exported all workspace content"},[SC]:{id:bC,[IC]:yC},[fC]:{id:vC,[IC]:hC},[gC]:{id:pC,[IC]:mC},[uC]:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",[IC]:"Changed workspace icon"},[cC]:{id:"auditlogEventFilter.actionNames.public_page_cleared",[IC]:"Public home page link cleared"},[dC]:{id:"auditlog.actionNames.scim_token_generated",[IC]:"Generated API SCIM token"},[lC]:{id:"auditlog.actionNames.scim_token_revoked",[IC]:"Revoked API SCIM token"},[rC]:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",[IC]:"page access requests from non-members"},[sC]:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",[IC]:"members sharing pages publicly"},[aC]:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",[IC]:"members changing the Workspace section"},[nC]:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",[IC]:"teamspace guests"},[oC]:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",[IC]:"guests"},[iC]:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",[IC]:"moving or duplicating pages to other workspaces"},[tC]:{id:"auditlog.actionNames.eventColumn.export_toggled",[IC]:"export"},[eC]:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",[IC]:"Updated IDP metadata XML"},[Xk]:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",[IC]:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",[IC]:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",[IC]:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",[IC]:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",[IC]:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",[IC]:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",[IC]:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",[IC]:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",[IC]:"Disabled page view tracking for workspace analytics"},a_private_page:{[IC]:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},[Yk]:{[IC]:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{[IC]:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{[IC]:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{[IC]:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{[IC]:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{[IC]:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{[IC]:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{[IC]:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{[IC]:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{[IC]:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{[IC]:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{[IC]:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{[IC]:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},[$k]:{[IC]:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},[Jk]:{[IC]:Jk,id:"auditlog.actionNames.eventColumn.group"},[Qk]:{[IC]:Qk,id:"auditLogEntry.user.noName"},adminContentSearchQuery:{[IC]:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{[IC]:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{[IC]:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{[IC]:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{[IC]:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{[IC]:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{[IC]:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchPredicateSplit:{[IC]:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{[IC]:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{[IC]:"into",id:"auditLogEntry.spaceContentDuplication.into"}});function AC(e,t){if(t[jk])return"user"in t[jk]&&t[jk][Qk]?BC(e,t[jk][Qk]):"bot"in t[jk]&&t[jk].bot?t[jk].bot[qk]?`“${t[jk].bot[qk]}“`:"bot":"group"in t[jk]&&t[jk][Jk]?t[jk][Jk][qk]?`“${t[jk][Jk][qk]}“`:Jk:void 0}function BC(e,t){return t?t[qk]&&t[Gk]?`“${t[qk]}“ (${t[Gk]})`:t[qk]?`“${t[qk]}“`:t[Gk]?`“${t[Gk]}“`:e[Hk](xC[Qk]):e[Hk](xC[Qk])}const DC=(0,f.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",[IC]:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",[IC]:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",[IC]:"Failed"}}),EC=(0,f.defineMessages)({equallyRestrictive:{[IC]:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{[IC]:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{[IC]:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function LC(e,t){if(void 0!==e&&void 0!==t)return e===t?d[zk](f.FormattedMessage,EC.equallyRestrictive):!e&&t?d[zk](f.FormattedMessage,EC.moreRestrictive):e&&!t?d[zk](f.FormattedMessage,EC.lessRestrictive):void 0}function RC(e){return e[qk]?`“${e[qk]}“ group`:d[zk](f.FormattedMessage,xC[Jk])}function NC(e){return e[Wk][qk][Kk]&&e[Wk][qk][Vk]?n()(f.FormattedMessage,{[IC]:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",[Uk]:{oldTeamName:e[Wk][qk][Kk],newTeamName:e[Wk][qk][Vk]}}):!e[Wk][qk][Kk]&&e[Wk][qk][Vk]?n()(f.FormattedMessage,{[IC]:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",[Uk]:{newTeamName:e[Wk][qk][Vk]}}):n()(f.FormattedMessage,{[IC]:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",[Uk]:{[Ok]:OC(e)}})}function OC(e){return"team"in e[jk]?UC(e[jk].team):d[zk](f.FormattedMessage,xC.team)}function UC(e){return e[qk]?`“${e[qk]}“ teamspace`:d[zk](f.FormattedMessage,xC.team)}function VC(e){if(e)switch(e){case"owner":return d[zk](f.FormattedMessage,xC.team_owner);case"member":return d[zk](f.FormattedMessage,xC.team_member);case $k:return d[zk](f.FormattedMessage,xC[$k])}return d[zk](f.FormattedMessage,xC.team_member)}function WC(e){return d[zk](f.FormattedMessage,function(e){if(!e)return Ln.permissionRoleMessages[Nk];switch(e){case"editor":return Ln.permissionRoleMessages.fullAccessLabel;case Rk:case Lk:return Ln.permissionRoleMessages.canEditLabel;case Ek:return Ln.permissionRoleMessages.canEditContentLabel;case"reader":return Ln.permissionRoleMessages.canReadLabel;case"comment_only":return Ln.permissionRoleMessages.canCommentLabel;case"none":return Ln.permissionRoleMessages[Nk];default:(0,x.unreachable)(e)}}(e))}function KC(e){var t,i,o,n;return{oldRole:d[zk](f.FormattedMessage,zC(null===(t=e[Wk])||void 0===t||null===(i=t[Dk])||void 0===i?void 0:i[Kk])),newRole:d[zk](f.FormattedMessage,zC(null===(o=e[Wk])||void 0===o||null===(n=o[Dk])||void 0===n?void 0:n[Vk]))}}const zC=e=>{if(!e)return Ln.permissionRoleMessages[Nk];switch(e){case"editor":return Ln.permissionRoleMessages.adminLabel;case Rk:return Ln.permissionRoleMessages.membershipAdminLabel;case Lk:return Ln.permissionRoleMessages.memberLabel;default:return Ln.permissionRoleMessages[Nk]}};function GC(e){return e[jk].page.title?`“${e[jk].page.title}“`:d[zk](f.FormattedMessage,xC[Yk])}function HC(e){var t,i,o,n,a,s;return null!==(t=e[jk])&&void 0!==t&&null!==(i=t.page)&&void 0!==i&&null!==(o=i.meta)&&void 0!==o&&o[Bk]&&"title"in(null===(n=e[jk])||void 0===n||null===(a=n.page)||void 0===a||null===(s=a.meta)||void 0===s?void 0:s[Bk])?`“${e[jk].page.meta[Bk].title}“`:d[zk](f.FormattedMessage,xC[Yk])}function qC(e){var t;return null!==(t=e[Ak].meta)&&void 0!==t&&t[xk]?n()(f.FormattedMessage,{[IC]:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",[Uk]:{[xk]:e[Ak].meta[xk]}}):""}function jC(e){switch(e){case"google":return n()(f.FormattedMessage,{[IC]:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case Gk:return n()(f.FormattedMessage,{[IC]:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return n()(f.FormattedMessage,{[IC]:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return n()(f.FormattedMessage,{[IC]:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return n()(f.FormattedMessage,{[IC]:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case _k:case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return n()(f.FormattedMessage,{[IC]:_k,id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,x.unreachable)(e)}}function QC(e){return e[Wk][qk][Kk]?n()(f.FormattedMessage,{[IC]:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",[Uk]:{oldDomain:e[Wk][qk][Kk]}}):""}function JC(e,t){return"block"===e[Fk]?n()(f.FormattedMessage,{[IC]:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",[Uk]:{[Ok]:UC(t),parentPage:$C(e)}}):"team"===e[Fk]?UC(t):void 0}function $C(e){return"title"in e?`“${e.title}“`:d[zk](f.FormattedMessage,xC[Yk])}function YC(e,t){if(!t)return d[zk](f.FormattedMessage,xC[Yk]);const i=t[Fk];return"space"===i?t.id!==e?d[zk](f.FormattedMessage,xC.otherWorkspace):_C(t[Ik])?d[zk](f.FormattedMessage,xC.private):d[zk](f.FormattedMessage,xC.thisWorkspace):"team"===i?UC(t):"block"===i?t.title?`“${t.title}“`:d[zk](f.FormattedMessage,xC[Yk]):void 0}const XC=(0,f.defineMessages)({open:{[IC]:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{[IC]:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{[IC]:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{[IC]:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},[Pk]:{[IC]:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function eZ(e){return e?d[zk](f.FormattedMessage,XC[e]):d[zk](f.FormattedMessage,XC[Pk])}function tZ(e){return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:Zk,id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):n()(f.FormattedMessage,{[IC]:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function iZ(e){return"approved"===e[Wk].requestStatus[Vk]?n()(f.FormattedMessage,{[IC]:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):n()(f.FormattedMessage,{[IC]:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function oZ(e){return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:Zk,id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):n()(f.FormattedMessage,{[IC]:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function nZ(e){return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):n()(f.FormattedMessage,{[IC]:Zk,id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const aZ=(0,f.defineMessages)({team_members:{[IC]:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{[IC]:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},[Pk]:{[IC]:Pk,id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function sZ(e){return n()(f.FormattedMessage,"recurrence"===e?{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",[IC]:"a repeating automation"}:{id:"auditlog.actionNames.eventColumn.automation_type.automation",[IC]:"an automation"})}function rZ(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta[Ck])}function lZ(e,t,i){var o,a,s,r,c,u,m,p,g,h,v,y,b,S,w,M,k,C,Z,T,P,I,F,_,A,B,D,E,L,R,N,O;switch(e[kk]){case Mk:{const t=e.meta.propertiesUpdated,i=e.meta.propertiesUpdated.map((e=>`"${e.propertyName}"`)).join(", ");return 1===t[wk]?n()(f.FormattedMessage,{[IC]:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",[Uk]:{[Sk]:i,[bk]:GC(e)}}):n()(f.FormattedMessage,{[IC]:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",[Uk]:{[Sk]:i,[bk]:GC(e)}})}case yk:return n()(f.FormattedMessage,{[IC]:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",[Uk]:{[bk]:GC(e)}});case fk:return n()(f.FormattedMessage,{[IC]:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",[Uk]:{[bk]:GC(e)}});case vk:return n()(f.FormattedMessage,{[IC]:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",[Uk]:{[bk]:GC(e)}});case"page_edited":return n()(f.FormattedMessage,{[IC]:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",[Uk]:{[bk]:GC(e)}});case"page_viewed":return n()(f.FormattedMessage,{[IC]:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",[Uk]:{[bk]:GC(e)}});case"page_deleted":return e[jk].page.meta.permanentDeletion?n()(f.FormattedMessage,{[IC]:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",[Uk]:{[bk]:GC(e)}}):n()(f.FormattedMessage,{[IC]:"Deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_deleted",[Uk]:{[bk]:GC(e)}});case hk:return n()(f.FormattedMessage,{[IC]:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",[Uk]:{[bk]:GC(e)}});case"page_restored":return n()(f.FormattedMessage,{[IC]:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",[Uk]:{[bk]:GC(e)}});case"page_exported":return n()(f.FormattedMessage,{[IC]:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",[Uk]:{[bk]:GC(e)}});case"page_moved":{var U,V,W;const t=null===(U=e[Wk])||void 0===U?void 0:U.team,o=e[Wk][Bk][Kk],a=e[Wk][Bk][Vk];let s=YC(e.spaceId,e[Wk][Bk][Kk]),r=YC(e.spaceId,e[Wk][Bk][Vk]);null!=t&&t[Kk]&&null!=t&&t[Vk]&&o&&a&&("block"===o[Fk]||"block"===a[Fk])?(s=JC(o,null==t?void 0:t[Kk]),r=JC(a,null==t?void 0:t[Vk])):"space"===(null===(V=e[Wk][Bk][Kk])||void 0===V?void 0:V[Fk])&&"space"===(null===(W=e[Wk][Bk][Vk])||void 0===W?void 0:W[Fk])&&e[Wk][Bk][Kk].id===e[Wk][Bk][Vk].id&&(_C(e[Wk][Bk][Kk][Ik])||_C(e[Wk][Bk][Vk][Ik]))&&(s=_C(e[Wk][Bk][Kk][Ik])?d[zk](f.FormattedMessage,xC.private):d[zk](f.FormattedMessage,xC.workspaceLevel),r=_C(e[Wk][Bk][Vk][Ik])?d[zk](f.FormattedMessage,xC.private):d[zk](f.FormattedMessage,xC.workspaceLevel));const l=s?i[Hk]({id:"auditLogEntry.changes.page_moved.old_parent",[IC]:" from {oldParentName}"},{oldParentName:s}):"",c=r?i[Hk]({id:"auditLogEntry.changes.page_moved.new_parent",[IC]:" to {newParentName}"},{newParentName:r}):"";return n()(f.FormattedMessage,{[IC]:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",[Uk]:{[bk]:GC(e),oldParentMessage:l,newParentMessage:c,[Ck]:rZ(e)}})}case gk:return function(e,t){var i,o,a,s,r;const l="bot"in t[jk],d="space"in t[jk],c="team"in t[jk],u="group"in t[jk],m="user"in t[jk]&&"guest"===(null===(i=t[jk][Qk].meta)||void 0===i?void 0:i.spaceRole);var p,g,h,v;if(l)return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",[Uk]:{botName:AC(e,t),oldRole:WC(null===(p=t[Wk])||void 0===p||null===(g=p[Dk])||void 0===g?void 0:g[Kk]),newRole:WC(null===(h=t[Wk])||void 0===h||null===(v=h[Dk])||void 0===v?void 0:v[Vk]),[bk]:GC(t),[Ck]:rZ(t)}});var y,b,S,w,M,k,C,Z,T,P,I,F;if(d)return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",[Uk]:{oldRole:WC(null===(y=t[Wk])||void 0===y||null===(b=y[Dk])||void 0===b?void 0:b[Kk]),newRole:WC(null===(S=t[Wk])||void 0===S||null===(w=S[Dk])||void 0===w?void 0:w[Vk]),[bk]:GC(t),[Ck]:rZ(t)}});if(c)return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",[Uk]:{oldRole:WC(null===(M=t[Wk])||void 0===M||null===(k=M[Dk])||void 0===k?void 0:k[Kk]),newRole:WC(null===(C=t[Wk])||void 0===C||null===(Z=C[Dk])||void 0===Z?void 0:Z[Vk]),[bk]:GC(t),[Ok]:OC(t),[Ck]:rZ(t)}});if(m)return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",[Uk]:{guestNameAndEmail:AC(e,t),oldRole:WC(null===(T=t[Wk])||void 0===T||null===(P=T[Dk])||void 0===P?void 0:P[Kk]),newRole:WC(null===(I=t[Wk])||void 0===I||null===(F=I[Dk])||void 0===F?void 0:F[Vk]),[bk]:GC(t),[Ck]:rZ(t)}});if(u){var _,x,A,B;return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",[Uk]:{[QM]:AC(e,t),oldRole:WC(null===(_=t[Wk])||void 0===_||null===(x=_[Dk])||void 0===x?void 0:x[Kk]),newRole:WC(null===(A=t[Wk])||void 0===A||null===(B=A[Dk])||void 0===B?void 0:B[Vk]),[bk]:GC(t),[Ck]:rZ(t)}})}return n()(f.FormattedMessage,{[IC]:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",[Uk]:{[dk]:AC(e,t),oldRole:WC(null===(o=t[Wk])||void 0===o||null===(a=o[Dk])||void 0===a?void 0:a[Kk]),newRole:WC(null===(s=t[Wk])||void 0===s||null===(r=s[Dk])||void 0===r?void 0:r[Vk]),[bk]:GC(t),[Ck]:rZ(t)}})}(i,e);case"page_created":const q=mi(e);if(null!=q&&null!==(o=q.meta)&&void 0!==o&&o[Bk]){var K,z,G,H;if(q.meta[Bk][Fk]===_w.bx)return"private"===(null===(G=q.meta)||void 0===G?void 0:G[Ik])||"private"===(null===(H=q.meta)||void 0===H?void 0:H.pageAudience)?n()(f.FormattedMessage,{[IC]:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):n()(f.FormattedMessage,{[IC]:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(K=q.meta)||void 0===K?void 0:K[Bk][Fk])===Nn.e0)return n()(f.FormattedMessage,{[IC]:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",[Uk]:{[Ok]:UC(q.meta[Bk])}});if((null===(z=q.meta)||void 0===z?void 0:z[Bk][Fk])===Nm.iU)return n()(f.FormattedMessage,{[IC]:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",[Uk]:{parentPageName:HC(e)}})}return n()(f.FormattedMessage,{[IC]:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case pk:return function(e){if(void 0===e[Wk][Dk][Vk]||"none"===e[Wk][Dk][Vk])return n()(f.FormattedMessage,{[IC]:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",[Uk]:{[bk]:GC(e),[Ck]:rZ(e)}});return n()(f.FormattedMessage,{[IC]:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",[Uk]:{[bk]:GC(e),[Ck]:rZ(e)}})}(e);case"login":return function(e,t){var i,o,a;const s=null===(i=e.meta)||void 0===i?void 0:i.authType;return null!==(o=e[Ak].meta)&&void 0!==o&&o.countryCode&&s?n()(f.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",[IC]:"Logged in {platform} via {loginMethod} in {geolocation}",[Uk]:{[xk]:qC(e),geolocation:yy(e,t),[Aw]:jC(s)}}):null!==(a=e[Ak].meta)&&void 0!==a&&a.countryCode&&!s?n()(f.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",[IC]:"Logged in {platform} in {geolocation}",[Uk]:{[xk]:qC(e),geolocation:yy(e,t)}}):n()(f.FormattedMessage,s?{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",[IC]:"Logged in {platform} via {loginMethod}",[Uk]:{[xk]:qC(e),[Aw]:jC(s)}}:{id:"auditLog.actionNames.eventColumn.loginWithPlatform",[IC]:"Logged in {platform}",[Uk]:{[xk]:qC(e)}})}(e,i);case mk:return n()(f.FormattedMessage,{[IC]:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",[Uk]:{date:i.formatDate(e[Wk].expiresAt),[qk]:e[jk][Qk][qk]}});case uk:return n()(f.FormattedMessage,{[IC]:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",[Uk]:{[qk]:e[jk][Qk][qk]}});case ck:return function(e,t){var i;const o=!!e[jk]&&e[Ak].actorId!==(null===(i=e[jk])||void 0===i?void 0:i[Qk].id),a=e[Wk][qk][Kk],s=e[Wk][qk][Vk];if(o){if(a&&s)return n()(f.FormattedMessage,{[IC]:'Changed {memberNameAndEmail} name from "{oldValue}" to "{newValue}"',id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",[Uk]:{[dk]:AC(t,e),[Kk]:a,[Vk]:s}});if(!a&&s)return n()(f.FormattedMessage,{[IC]:'Set {memberNameAndEmail} name to "{newValue}"',id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",[Uk]:{[dk]:AC(t,e),[Vk]:s}});if(a&&!s)return n()(f.FormattedMessage,{[IC]:'Removed {memberNameAndEmail} name "{oldValue}"',id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",[Uk]:{[dk]:AC(t,e),[Kk]:a}})}if(a&&s)return n()(f.FormattedMessage,{[IC]:'Changed name from "{oldValue}" to "{newValue}"',id:"auditlog.actionNames.eventColumn.preferred_name_changed",[Uk]:{[Kk]:a,[Vk]:s}});if(!a&&s)return n()(f.FormattedMessage,{[IC]:'Set name to "{newValue}"',id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",[Uk]:{[Vk]:s}});if(a&&!s)return n()(f.FormattedMessage,{[IC]:'Removed name "{oldValue}"',id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",[Uk]:{[Kk]:a}});return n()(f.FormattedMessage,{[IC]:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,i);case"email_changed":return function(e,t){var i;return e[jk]&&e[Ak].actorId!==(null===(i=e[jk])||void 0===i?void 0:i[Qk].id)?n()(f.FormattedMessage,{[IC]:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",[Uk]:{[dk]:AC(t,e),oldEmail:e[Wk][Gk][Kk],newEmail:e[Wk][Gk][Vk]}}):n()(f.FormattedMessage,{[IC]:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",[Uk]:{oldEmail:e[Wk][Gk][Kk],newEmail:e[Wk][Gk][Vk]}})}(e,i);case"picture_changed":return function(e,t){var i;return e[jk]&&e[Ak].actorId!==(null===(i=e[jk])||void 0===i?void 0:i[Qk].id)?n()(f.FormattedMessage,{[IC]:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",[Uk]:{[dk]:AC(t,e)}}):n()(f.FormattedMessage,{[IC]:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,i);case"member_invited":{const t=KC(e);return n()(f.FormattedMessage,{[IC]:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",[Uk]:{[dk]:AC(i,e),newRole:t.newRole}})}case lk:{const t=KC(e);return n()(f.FormattedMessage,{[IC]:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",[Uk]:{[dk]:AC(i,e),oldRole:t.oldRole,newRole:t.newRole}})}case"member_removed":return e[Ak].actorId===e[jk][Qk].id?n()(f.FormattedMessage,{[IC]:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):n()(f.FormattedMessage,{[IC]:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",[Uk]:{[dk]:AC(i,e)}});case"guest_removed":return n()(f.FormattedMessage,{[IC]:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",[Uk]:{guestNameAndEmail:AC(i,e)}});case kC:return n()(f.FormattedMessage,{[IC]:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",[Uk]:{[bk]:GC(e)}});case"file_downloaded":return function(e){return n()(f.FormattedMessage,{[IC]:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",[Uk]:{fileName:dZ(e),[bk]:GC(e)}})}(e);case rk:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",[IC]:"Enabled invite link"}):n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",[IC]:"Disabled invite link"});case sC:case aC:case nC:case oC:case iC:case tC:case rC:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",[IC]:"Disabled {workspaceSetting}",[Uk]:{workspaceSetting:i[Hk](xC[e[kk]])}}):n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",[IC]:"Enabled {workspaceSetting}",[Uk]:{workspaceSetting:i[Hk](xC[e[kk]])}});case sk:return n()(f.FormattedMessage,{[IC]:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",[Uk]:{[Kk]:e[Wk][qk][Kk],[Vk]:e[Wk][qk][Vk]}});case ak:return n()(f.FormattedMessage,{[IC]:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",[Uk]:{[Kk]:QC(e),[Vk]:e[Wk][qk][Vk]}});case nk:return function(e){const t=void 0,{[Kk]:i,[Vk]:o}=e[Wk][Dw];if(o===t)return n()(f.FormattedMessage,{[IC]:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(i===t&&"approved_only"===o)return n()(f.FormattedMessage,{[IC]:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===i&&"approved_only"===o)return n()(f.FormattedMessage,{[IC]:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===i&&"approved_or_built_by_notion"===o)return n()(f.FormattedMessage,{[IC]:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return n()(f.FormattedMessage,{[IC]:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case ok:return n()(f.FormattedMessage,{[IC]:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",[Uk]:{addedValue:e[Wk].domain}});case ik:return n()(f.FormattedMessage,{[IC]:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",[Uk]:{removedValue:e[Wk].domain}});case"public_page_set":return e[Wk][qk][Kk]?n()(f.FormattedMessage,{[IC]:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",[Uk]:{oldPage:e[Wk][qk][Kk],newPage:e[Wk][qk][Vk]}}):n()(f.FormattedMessage,{[IC]:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",[Uk]:{newPage:e[Wk][qk][Vk]}});case tk:return e[Wk].url[Kk]?n()(f.FormattedMessage,{[IC]:'Changed IDP metadata URL from "{oldValue}" to "{newValue}"',id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",[Uk]:{[Kk]:e[Wk].url[Kk],[Vk]:e[Wk].url[Vk]}}):n()(f.FormattedMessage,{[IC]:'Set IDP metadata URL to "{newValue}"',id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",[Uk]:{[Vk]:e[Wk].url[Vk]}});case"saml_toggled":return e[Wk][Tk][Vk]?d[zk](f.FormattedMessage,xC.saml_enabled):d[zk](f.FormattedMessage,xC.saml_disabled);case ek:return e[Wk][Tk][Vk]?d[zk](f.FormattedMessage,xC.saml_enforced):d[zk](f.FormattedMessage,xC.saml_unenforced);case XM:return e[Wk][Tk][Vk]?d[zk](f.FormattedMessage,xC.automatic_account_creation_enabled):d[zk](f.FormattedMessage,xC.automatic_account_creation_disabled);case YM:return e[Wk][Tk][Vk]?d[zk](f.FormattedMessage,xC.workspace_analytics_enabled):d[zk](f.FormattedMessage,xC.workspace_analytics_disabled);case $M:return function(e,t){const{[Kk]:i,[Vk]:o}=e[Wk][Bw];if(!i&&!o)return n()(f.FormattedMessage,{[IC]:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const a=e[Wk][Bw][Kk]?t[Hk]({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",[IC]:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,Fw.nJ)(e[Wk][Bw][Kk],t)}):"",s=e[Wk][Bw][Vk]?t[Hk]({id:"auditLogEntry.changes.workspaceCreation.afterSetting",[IC]:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,Fw.nJ)(e[Wk][Bw][Vk],t)}):"";return n()(f.FormattedMessage,{[IC]:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",[Uk]:{before:a,after:s}})}(e,i);case JM:return n()(f.FormattedMessage,{[IC]:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",[Uk]:{[dk]:AC(i,e),[QM]:RC(e[jk][Jk])}});case jM:return n()(f.FormattedMessage,{[IC]:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",[Uk]:{[dk]:AC(i,e),[QM]:RC(e[jk][Jk])}});case qM:return function(e,t){const{[Kk]:i,[Vk]:o}=e[Wk].spaceTransferStatus,a=e[jk][pM][qk]?t[Hk]({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",[IC]:" for {spaceName}"},{[Kw]:e[jk][pM][qk]}):"";if(!i&&!o)return n()(f.FormattedMessage,{[IC]:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",[Uk]:{spaceNameMessage:a}});if(!o)return n()(f.FormattedMessage,{[IC]:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",[Uk]:{spaceNameMessage:a,oldStatus:i}});return n()(f.FormattedMessage,{[IC]:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",[Uk]:{spaceNameMessage:a,newStatus:o}})}(e,i);case HM:return function(e){const{[Kk]:t,[Vk]:i}=e[Wk].claimAndUpgradeStatus,o=n()(f.FormattedMessage,{[IC]:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",[Uk]:{[gM]:e[jk][pM][qk]}});if(!t&&!i)return o;if(!i&&"completed"!==t)return n()(f.FormattedMessage,{[IC]:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",[Uk]:{[gM]:e[jk][pM][qk],oldStatus:t}});if("completed"===i)return n()(f.FormattedMessage,{[IC]:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",[Uk]:{[gM]:e[jk][pM][qk]}});if("requested"===i)return n()(f.FormattedMessage,{[IC]:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",[Uk]:{[gM]:e[jk][pM][qk]}});return o}(e);case GM:return function(e){const{[Kk]:t,[Vk]:i}=e[Wk].claimDeletionStatus,o=n()(f.FormattedMessage,{[IC]:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",[Uk]:{[Kw]:e[jk][pM][qk]}});if(!t&&!i)return o;if(!i||"canceled"===i)return n()(f.FormattedMessage,{[IC]:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",[Uk]:{[Kw]:e[jk][pM][qk]}});return n()(f.FormattedMessage,{[IC]:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",[Uk]:{[Kw]:e[jk][pM][qk]}})}(e);case zM:return n()(f.FormattedMessage,{[IC]:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",[Uk]:{[Tk]:tZ(e)}});case KM:return n()(f.FormattedMessage,{[IC]:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",[Uk]:{status:iZ(e),[Gk]:AC(i,e)}});case WM:return n()(f.FormattedMessage,{[IC]:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",[Uk]:{[Tk]:oZ(e)}});case"team_created":return n()(f.FormattedMessage,{[IC]:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",[Uk]:{[Ok]:OC(e)}});case"team_archived":return n()(f.FormattedMessage,{[IC]:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",[Uk]:{[Ok]:OC(e)}});case"team_restored":return n()(f.FormattedMessage,{[IC]:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",[Uk]:{[Ok]:OC(e)}});case VM:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",[Uk]:{[Ok]:OC(e)}}):n()(f.FormattedMessage,{[IC]:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",[Uk]:{[Ok]:OC(e)}});case UM:return e[Wk][Tk][Vk]?d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(a=e.meta)||void 0===a?void 0:a[OM])??(null==e?void 0:e[OM]),e[Wk][Tk][Vk])):d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(s=e.meta)||void 0===s?void 0:s[OM])??(null==e?void 0:e[OM]),e[Wk][Tk][Vk]));case RM:return e[Wk][Tk][Vk]?d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(r=e.meta)||void 0===r?void 0:r[LM])??(null==e?void 0:e[LM]),e[Wk][Tk][Vk])):d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(c=e.meta)||void 0===c?void 0:c[LM])??(null==e?void 0:e[LM]),e[Wk][Tk][Vk]));case EM:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",[Uk]:{[Ok]:OC(e)}}):n()(f.FormattedMessage,{[IC]:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",[Uk]:{[Ok]:OC(e)}});case DM:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",[Uk]:{[Ok]:OC(e)}}):n()(f.FormattedMessage,{[IC]:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",[Uk]:{[Ok]:OC(e)}});case BM:return e[Wk][Tk][Vk]?d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(u=e.meta)||void 0===u?void 0:u[AM])??e[AM],e[Wk][Tk][Vk])):d[zk](d[NM],null,n()(f.FormattedMessage,{[IC]:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",[Uk]:{[Ok]:OC(e)}}),LC((null===(m=e.meta)||void 0===m?void 0:m[AM])??e[AM],e[Wk][Tk][Vk]));case xM:return n()(f.FormattedMessage,{[IC]:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",[Uk]:{oldTeamNameToNewTeamName:NC(e)}});case _M:return n()(f.FormattedMessage,{[IC]:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",[Uk]:{[Ok]:OC(e)}});case FM:return n()(f.FormattedMessage,{[IC]:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",[Uk]:{[Ok]:OC(e)}});case IM:return n()(f.FormattedMessage,{[IC]:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",[Uk]:{[dk]:AC(i,e),[Ok]:OC(e),teamRole:VC(e[Wk].teamRole[Vk])}});case PM:return n()(f.FormattedMessage,{[IC]:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",[Uk]:{[QM]:RC(e[jk][Jk]),[Ok]:OC(e)}});case TM:return n()(f.FormattedMessage,{[IC]:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",[Uk]:{[dk]:AC(i,e),[Ok]:OC(e)}});case ZM:return n()(f.FormattedMessage,{[IC]:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",[Uk]:{[QM]:RC(e[jk][Jk]),[Ok]:OC(e)}});case CM:const j=OC(e),Q=VC(e[Wk].teamRole[Vk]);return rZ(e)?n()(f.FormattedMessage,{[IC]:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",[Uk]:{[Ok]:j,teamRole:Q}}):n()(f.FormattedMessage,{[IC]:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",[Uk]:{[Ok]:j,teamRole:Q}});case"member_left_team":return n()(f.FormattedMessage,{[IC]:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",[Uk]:{[Ok]:OC(e)}});case kM:const J=AC(i,e),$=VC(e[Wk].teamRole[Kk]),Y=VC(e[Wk].teamRole[Vk]),X=OC(e);return rZ(e)?n()(f.FormattedMessage,{[IC]:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",[Uk]:{[dk]:J,oldTeamRole:$,newTeamRole:Y,[Ok]:X}}):n()(f.FormattedMessage,{[IC]:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",[Uk]:{[dk]:J,oldTeamRole:$,newTeamRole:Y,[Ok]:X}});case MM:return n()(f.FormattedMessage,{[IC]:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",[Uk]:{userNameOrEmail:AC(i,e),oldPermission:WC(e[Wk][Dk][Kk]),newPermission:WC(e[Wk][Dk][Vk]),[Ok]:OC(e)}});case wM:return n()(f.FormattedMessage,{[IC]:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",[Uk]:{[QM]:RC(e[jk][Jk]),oldPermission:WC(e[Wk][Dk][Kk]),newPermission:WC(e[Wk][Dk][Vk]),[Ok]:OC(e)}});case SM:return n()(f.FormattedMessage,{[IC]:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",[Uk]:{[Ok]:OC(e),oldRole:WC(null===(p=e[Wk])||void 0===p||null===(g=p[Dk])||void 0===g?void 0:g[Kk]),newRole:WC(null===(h=e[Wk])||void 0===h||null===(v=h[Dk])||void 0===v?void 0:v[Vk])}});case bM:return n()(f.FormattedMessage,{[IC]:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",[Uk]:{[Ok]:OC(e),oldRole:WC(null===(y=e[Wk])||void 0===y||null===(b=y[Dk])||void 0===b?void 0:b[Kk]),newRole:WC(null===(S=e[Wk])||void 0===S||null===(w=S[Dk])||void 0===w?void 0:w[Vk])}});case yM:return n()(f.FormattedMessage,{[IC]:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",[Uk]:{[Ok]:OC(e),oldRole:WC(null===(M=e[Wk])||void 0===M||null===(k=M[Dk])||void 0===k?void 0:k[Kk]),newRole:WC(null===(C=e[Wk])||void 0===C||null===(Z=C[Dk])||void 0===Z?void 0:Z[Vk])}});case fM:return n()(f.FormattedMessage,{[IC]:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",[Uk]:{[Ok]:OC(e),oldType:eZ(null===(T=e[Wk])||void 0===T?void 0:T.teamAccessLevel[Kk]),newType:eZ(null===(P=e[Wk])||void 0===P?void 0:P.teamAccessLevel[Vk])}});case vM:return n()(f.FormattedMessage,{[IC]:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",[Uk]:{[Ok]:OC(e),newType:(O=null===(I=e[Wk])||void 0===I||null===(F=I.teamInviteAccess)||void 0===F?void 0:F[Vk],O?d[zk](f.FormattedMessage,aZ[O]):d[zk](f.FormattedMessage,aZ[Pk]))}});case hM:return n()(f.FormattedMessage,{[IC]:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",[Uk]:{[gM]:e[jk][pM][qk]}});case mM:return n()(f.FormattedMessage,{[IC]:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",[Uk]:{fromUserName:BC(i,e[Wk].userPermission[Kk]),toUserName:BC(i,e[Wk].userPermission[Vk])}});case SC:return n()(f.FormattedMessage,{id:bC,[IC]:yC,[Uk]:{[uM]:e.meta[uM]}});case fC:return n()(f.FormattedMessage,{id:vC,[IC]:hC,[Uk]:{daysFilterString:i[Hk](xw.Rh[(null===(_=e.meta)||void 0===_?void 0:_.daysFilter)||"last_90_days"])[cM]()}});case gC:return n()(f.FormattedMessage,{id:pC,[IC]:mC,[Uk]:{daysFilterString:i[Hk](xw.Rh[(null===(A=e.meta)||void 0===A?void 0:A.daysFilter)||"last_90_days"])[cM]()}});case dM:case lM:function ee(e){return e.join(i[Hk](xC.adminContentSearchPredicateSplit))}function te(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const ie=e[rM].query&&i[Hk](xC.adminContentSearchQuery,{query:e[rM].query}),oe=e[rM].teamspaces&&e[rM].teamspaces[wk]>0&&i[Hk](xC.adminContentSearchTeamspaces,{teamspaceCount:e[rM].teamspaces[wk],teamspaces:ee(e[rM].teamspaces)}),ne=e[rM][sM]&&e[rM][sM][wk]>0&&i[Hk](xC.adminContentSearchCreatedBy,{[sM]:ee(e[rM][sM])}),ae=e[rM].sharedWith&&e[rM].sharedWith[wk]>0&&i[Hk](xC.adminContentSearchSharedWith,{sharedWith:ee(e[rM].sharedWith)}),se=e[rM].audience&&e[rM].audience[wk]>0&&i[Hk](xC.adminContentSearchAudience,{audience:ee(e[rM].audience)}),re=e[rM][aM]&&i[Hk](xC.adminContentSearchCreatedTime,{[aM]:te(e[rM][aM])}),le=e[rM][nM]&&i[Hk](xC.adminContentSearchLastEditedTime,{[nM]:te(e[rM][nM])}),de=l().compact([ie,oe,ne,ae,se,re,le]);if("admin_content_search_queried"===e[kk]){if(0===de[wk])return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",[IC]:"Ran a content search with no filters"});{const e=ee(de);return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",[IC]:"Ran a content search with the following criteria: {searchCriteria}",[Uk]:{searchCriteria:e}})}}if(0===de[wk])return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",[IC]:"Exported a content search result with no filters"});{const e=ee(de);return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",[IC]:"Exported a content search result with the following criteria: {searchCriteria}",[Uk]:{searchCriteria:e}})}case oM:{const t=i.formatList(e.meta[iM],{type:tM});return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",[IC]:"Logged out all managed users with the email domains {emailDomains}",[Uk]:{[iM]:t}})}case eM:return n()(f.FormattedMessage,{[IC]:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",[Uk]:{guestNameAndEmail:AC(i,e)}});case Xw:return n()(f.FormattedMessage,{[IC]:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",[Uk]:{guestNameAndEmail:AC(i,e)}});case Yw:{const t=i.formatList(e.meta[iM],{type:tM});return n()(f.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",[IC]:"Cleared passwords for all users with the email domains {emailDomains}",[Uk]:{[iM]:t}})}case $w:return n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",[IC]:"Created {automationType} on {pageTitle}",[Uk]:{automationType:sZ(e.meta.automationType),[Jw]:GC(e)}});case Qw:return n()(f.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",[IC]:"Edited {automationType} on {pageTitle}",[Uk]:{automationType:sZ(e.meta.automationType),[Jw]:GC(e)}});case jw:return n()(f.FormattedMessage,{[IC]:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",[Uk]:{[Tk]:nZ(e)}});case qw:case Hw:case Gw:const ce=e.spaceId===e.meta[zw].source_space_id,ue=e.meta[zw].source_space_name??e.meta[zw].source_space_id,me=e.meta[zw].target_space_name??e.meta[zw].target_space_id,pe=e[Wk].spaceContentDuplicationStatus[Vk];return n()(f.FormattedMessage,{[IC]:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",[Uk]:{status:pe?d[zk](f.FormattedMessage,DC[pe]):"",[Kw]:ce?me:ue,direction:d[zk](f.FormattedMessage,ce?xC.into:xC.from)}});case"mfa_sms_toggled":return n()(f.FormattedMessage,{[IC]:'{enabled} SMS MFA on "{value}"',id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",[Uk]:{value:null!==(B=e[Wk])&&void 0!==B&&B.maskedPhoneNumber[Kk]?null===(D=e[Wk])||void 0===D?void 0:D.maskedPhoneNumber[Kk]:null===(E=e[Wk])||void 0===E?void 0:E.maskedPhoneNumber[Vk],[Tk]:null!==(L=e[Wk])&&void 0!==L&&L[Tk][Vk]?"Enabled":Zk}});case"mfa_totp_toggled":return n()(f.FormattedMessage,{[IC]:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",[Uk]:{[Tk]:null!==(R=e[Wk])&&void 0!==R&&R[Tk][Vk]?"Enabled":Zk}});case Ww:return n()(f.FormattedMessage,{[IC]:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",[Uk]:{[Tk]:null!==(N=e[Wk])&&void 0!==N&&N[Tk][Vk]?"Enabled":Zk}});case Vw:return n()(f.FormattedMessage,{[IC]:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",[Uk]:{userNameAndEmail:AC(i,e)}});case Uw:return n()(f.FormattedMessage,{[IC]:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",[Uk]:{userNameAndEmail:AC(i,e)}});case ZC:return e[jk]?n()(f.FormattedMessage,{[IC]:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",[Uk]:{userNameAndEmail:BC(i,e[jk][Qk])}}):d[zk](f.FormattedMessage,xC[ZC]);case Ow:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):n()(f.FormattedMessage,{[IC]:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case Nw:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):n()(f.FormattedMessage,{[IC]:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case Rw:return e[Wk][Tk][Vk]?n()(f.FormattedMessage,{[IC]:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):n()(f.FormattedMessage,{[IC]:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case Lw:return void 0!==e[Wk].valueMs[Kk]&&void 0!==e[Wk].valueMs[Vk]?n()(f.FormattedMessage,{[IC]:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",[Uk]:{oldDuration:(0,Pw.Ct)(e[Wk].valueMs[Kk],i),newDuration:(0,Pw.Ct)(e[Wk].valueMs[Vk],i)}}):n()(f.FormattedMessage,{[IC]:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case wC:case uC:case cC:case"logout":case TC:case FC:case PC:case uk:case Vw:case Uw:case CC:case rk:case dC:case lC:case MC:case Xk:case eC:return d[zk](f.FormattedMessage,xC[e[kk]]);default:if("local"!==t)return Iw.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{[Ew]:{data:e}}}),d[zk](d[NM],null);(0,x.unreachable)(e)}}function dZ(e){const{[qk]:t,extension:i}=e[jk].file;return t?`“${t}“`:i?d[zk](f.FormattedMessage,s()({},xC.a_file_with_extension,{[Uk]:{extension:i}})):d[zk](f.FormattedMessage,xC.a_file)}const cZ=i(85).nx5,uZ=i(85).D7I,mZ=i(85).Uie,pZ=i(85).WuX;function gZ(e){window.__c={n:"AuditLogColumnEvent"};const{[pZ]:t,id:i}=e,[o,a]=(0,d.useState)(""),r=(0,f.useIntl)();return(0,d.useEffect)((()=>{const e=document.getElementById(i);a((null==e?void 0:e.textContent)||"")}),[i]),n()(ro.Z,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>n()(vZ,{text:o,[pZ]:t}),placement:ro.Z.Placement.Bottom,render:e=>d[uZ]("div",s()({},e,{style:{fontSize:14,...v.Z[mZ]},id:i}),n()(hZ,{[pZ]:t,env:No.default.env,intl:r}))})}function hZ(e){const{[pZ]:t,env:i,intl:o}=e;return lZ(t,i,o)}function vZ(e){var t,i;window.__c={n:"AuditLogEventTooltip"};const{[pZ]:o,text:a}=e,s=(0,f.useIntl)(),r=Sy({[pZ]:o,intl:s});return n()("div",{},void 0,a,(null===(t=o.actor.meta)||void 0===t?void 0:t.ipAddress)&&n()("div",{},void 0,n()(f.FormattedMessage,{[cZ]:"IP address: {ip}",values:{ip:null===(i=o.actor.meta)||void 0===i?void 0:i.ipAddress},id:"auditLogSettings.metadata.ipAddress"})),n()("div",{},void 0,yy(o,s)),r&&n()(f.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",[cZ]:"Page audience: {audience}",values:{audience:r}}))}const fZ=i(85).UPJ;function yZ(e){const{children:t,disabled:i,onClick:o}=e;return n()(Io.Z,{onClick:o,disabled:i,style:{[fZ]:"center",marginLeft:6},isBlue:!i,isLightGray:i},void 0,t)}const bZ=i(85).Hco,SZ=i(85).TPm,wZ=i(85).qcw,MZ=i(85).MlL,kZ=i(85).se3,CZ=i(85).wgE,ZZ=i(85).O87,TZ=i(85).L_E,PZ=i(85).ChN,IZ=i(85).$bT,FZ=i(85).jkI,_Z=i(85).H1U,xZ=i(85).pkR,AZ=i(85).PG2,BZ=i(85).UPJ,DZ=i(85).EMU,EZ=i(85).sM5,LZ=i(85).D7I,RZ=i(85).Wqi,NZ=i(85).WuX,OZ=i(85).e_Y,UZ=i(85).O9h,VZ=i(85).nx5,WZ=i(85).XZb,KZ={id:"actor",[WZ]:n()(f.FormattedMessage,{id:"auditlog.logTable.userColumn.header",[VZ]:"User"}),[UZ]:e=>{const t=`actor-${e[NZ][OZ]}-${e.id}`;return n()(fw,{[RZ]:e[RZ],[NZ]:e[NZ],id:t})},widthData:{width:30},sortable:!1},zZ={id:"event",[WZ]:n()(f.FormattedMessage,{id:"auditlog.logTable.eventColumn.header",[VZ]:"Event"}),[UZ]:e=>{const t=`event-${e[NZ][OZ]}-${e.id}`;return n()(gZ,{[NZ]:e[NZ],id:t})},widthData:{width:40},sortable:!1},GZ={id:"dateTimeAndMenu",[WZ]:n()(f.FormattedMessage,{id:"auditlog.logTable.dateColumn.header",[VZ]:"Date"}),[UZ]:e=>{const t=`actor-${e[NZ][OZ]}-${e.id}`,i=`event-${e[NZ][OZ]}-${e.id}`,o=`datetime-${e[NZ][OZ]}-${e.id}`;return d[LZ](d.Fragment,null,n()(Tw,{[NZ]:e[NZ],id:o}),n()(jZ,{[NZ]:e[NZ],ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:o}}))},widthData:{width:25},sortable:!0},HZ=[KZ,zZ,GZ];function qZ(){return n()("div",{style:{[EZ]:DZ,[_Z]:FZ,[BZ]:FZ,minHeight:"40vh",[IZ]:"column"}},void 0,n()("div",{},void 0,n()(Ji.Z,{isSecondaryColor:!0,style:{[PZ]:500}},void 0,n()(f.FormattedMessage,{id:"auditlog.logTable.noResults",[VZ]:"No results"}))),n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"auditlog.logTable.noResultsHelpText",[VZ]:"Try different filters. Logs may take some time to show up."})))}function jZ(e){window.__c={n:"AuditLogColumnMenu"};const{[NZ]:t,ids:i}=e,o=(0,qi.VK)((()=>(0,Q.isTeamspaceGuestsEnabled)()),[]),a=(0,qi.VK)((()=>Z.default.checkGate("audit_log_event_name_column")?vy:gy),[]),r=(0,f.useIntl)(),l=(0,Hi.O7)(),c=(0,ji.Fg)(),u=(0,ji.yK)((e=>({[TZ]:{[EZ]:DZ,[_Z]:FZ,[BZ]:"flex-end",width:"100%"},button:{[EZ]:DZ,[_Z]:FZ,[BZ]:FZ,width:32,height:28,borderRadius:3}})),[]);return n()(ro.Z,{delayThreshold:80,placement:ro.Z.Placement.Bottom,render:e=>d[LZ]("div",s()({style:u[TZ]},e),n()(nl.Z,{style:u.button,[AZ]:()=>{var e;$n[ZZ]({[CZ]:l,[kZ]:by({[NZ]:t,intl:r,getAuditLogEventText:(e=i.eventColumnId,t=>{var i;return null===(i=document.getElementById(e))||void 0===i?void 0:i.textContent}),[MZ]:o,csvColumnNames:a}),[wZ]:$n[SZ].copiedToClipboard})}},void 0,m.Z.copy({width:16,height:16,fill:c[bZ]}))),renderTooltip:()=>n()(f.FormattedMessage,{id:"AuditLogSettings.copyAuditLogEvent",[VZ]:"Copy row"})})}const QZ=(0,f.injectIntl)((function(e){window.__c={n:"AuditLogPaginatedTable"};const{searchResponse:t,[RZ]:i}=e,[o,a]=(0,qi.AF)(fi),s=t.results||[],r=t.hasMoreResults,l=Boolean(s.length),c=e=>{const t={...o,pageNum:e};a(t)},u=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:HZ,theme:e,containerMarginTop:0})),[]),m=s.map(((e,t)=>({id:t.toString(),[NZ]:e,[RZ]:i,isClickable:!1}))),p=(0,d.useCallback)((()=>{const e=o.sortOrder===pi.CreatedOldest?pi.CreatedNewest:pi.CreatedOldest;a({...o,sortOrder:e,pageNum:1})}),[o,a]),g=(0,d.useMemo)((()=>({column:GZ,sortAscending:o.sortOrder===pi.CreatedOldest})),[o]);return d[LZ](d.Fragment,null,n()(no.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:HZ,rows:m,sortState:g,onSortStateChanged:p,renderNoRowsComponent:qZ,styles:u}),l?n()("div",{style:{[EZ]:DZ,[BZ]:"flex-end",marginTop:10}},void 0,n()(yZ,{[AZ]:()=>{c(o.pageNum-1)},[xZ]:1===o.pageNum},void 0,n()(f.FormattedMessage,{id:"auditlog.logTable.previousPage",[VZ]:"Previous"})),n()(yZ,{[xZ]:!r,[AZ]:()=>{c(o.pageNum+1)}},void 0,n()(f.FormattedMessage,{id:"auditlog.logTable.nextPage",[VZ]:"Next"}))):null)})),JZ=i(85).Mm1,$Z=i(85)._V5,YZ=i(85).h8z,XZ=i(85).UPJ,eT=i(85).Wqi;const tT=(0,f.injectIntl)((function(e){window.__c={n:"AuditLogSettingsImpl"};const{[eT]:t}=e,i=(0,Hi.O7)(),o=null==t?void 0:t.id,[a]=(0,qi.AF)(Mi),[s]=(0,qi.AF)(fi),r=yi(s)!==a.filterStr?void 0:a.cachedResponses[s.pageNum];return(0,d.useEffect)((()=>{o&&(async e=>{var t,i;const{[Mp]:o,[wp]:n}=e,a=fi.getState();Mi.startLoading(n,a);const{sortOrder:s,pageSize:r,pageNum:l}=a,d=Mi.getCursor(n,a,l),c=a[Sp].starting?ie.convert.toUnixMs(a[Sp].starting):void 0,u=a[Sp].ending?ie.convert.toUnixMs(a[Sp].ending):void 0,m={[wp]:n,limit:r,cursor:d,filters:{[Sp]:{starting:c,ending:u},...(null===(t=a.actors)||void 0===t?void 0:t.length)>0?{actors:a.actors}:void 0,...(null===(i=a.actions)||void 0===i?void 0:i.length)>0?{actions:a.actions}:void 0},sort:s||pi.CreatedNewest},p=await T.searchAuditLog(o,m);if("success"!==p.type)if(Mi.updateError(n,a),(0,gp.Jx)(p.body)){const e=(0,vp.wf)(J.default.getIntl(),p);w[bp](e)}else w[bp](J.default.formatMessage(kp.loadCurrentAuditLogError));else Mi.updateLoadedResult(n,a,p.data)})({environment:i,spaceId:o})}),[i,o,s]),(0,d.useEffect)((()=>{Zp({environment:i,spaceId:o})}),[i,o]),d.createElement(d.Fragment,null,n()(aw,{}),n()("div",{style:{[XZ]:YZ,display:"flex",[$Z]:12,[JZ]:12}},void 0,n()($S,{[eT]:t}),n()(Kp,{})),"loading"===(null==r?void 0:r.status)&&n()(uw,{}),"success"===(null==r?void 0:r.status)&&n()(QZ,{searchResponse:r,[eT]:t}))}));var iT=i(98692),oT=i(76463),nT=i(91376),aT=i(761),sT=i(38755),rT=i(72087),lT=i(74181),dT=i(9038),cT=i(9953),uT=i(30874),mT=i(20454),pT=i(9844),gT=i(5500),hT=i(74021),vT=i(17549),fT=i(77137),yT=i(78948);const bT=i(85).rBf,ST=i(85).H1U,wT=i(85).nLZ,MT=i(85).Wp_,kT=i(85).Yzm,CT=i(85).cbT,ZT=i(85).xgV,TT=i(85).nQ3,PT=i(85).j7K,IT=i(85).Ttb,FT=i(85).y79,_T=i(85).br2,xT=i(85).lGm,AT=i(85).g4H,BT=i(85).D7I,DT=i(85).ivl,ET=i(85).QvU,LT=i(85).YDv,RT=i(85).Mm1,NT=i(85).pkR,OT=i(85).mFu,UT=i(85).ChN,VT=i(85).lUP,WT=i(85).TLr,KT=i(85).X5t,zT=i(85).BQ6,GT=i(85).nx5,HT=i(85).nJ9,qT=i(85).XNW,jT=i(85).rpY,QT=i(85).TtP,JT=i(85).lUt,$T=i(85).G_Z,YT=i(85).Ql2,XT=i(85).wgE,eP=i(85).fbO,tP=i(85).eiN,iP=i(85).Csb,oP=i(85).GTJ,nP=i(85).sbn,aP=i(85).QmD,sP=i(85).qJ8;function rP(e){window.__c={n:"AdminIntegrationSettingsSearchResults"};const{query:t}=e,i=(0,Hi.O7)(),o=(0,qi.VK)((()=>B.default[aP][sP]),[]),a=(0,qi.VK)((()=>null==o?void 0:o.getBotSettingsStore()[nP]()),[o]),r="approved_or_built_by_notion"===(null==a?void 0:a[oP]),l=(0,qi.VK)((()=>null!=a&&a[iP]?Object.keys(a[iP]):[]),[a]),c=(0,qi.VK)((()=>Object.values(gT.iK).map((e=>{let{id:t}=e;const i=null==o?void 0:o.getRecordModel({id:t,table:pT.K2});if("published"===(null==i?void 0:i.status))return t}))[tP](x.isDefined)),[o]),u=(0,d.useMemo)((()=>c.some((e=>e===gT.iK.google_drive.id))),[c]),m=(0,qi.VK)((()=>c[tP]((e=>!l[eP](e))).slice(0,5)),[l,c]);return n()(Xo.Z,{menuType:jo.og.Popup,width:255,header:cP(t,m,r)},void 0,n()(fT.Z,{request:t,[ZT]:e=>async function(e){const{query:t,integrationType:i,[XT]:o,[YT]:n,approvedIntegrationIds:a,popularIntegrationIds:s,autoApproveBuiltByNotion:r}=e;if(!Qi.Z[aP].online||!n)return[];if((0,p.isUUIDWithDashes)(t)||(0,p.isUUIDWithoutDashes)(t))return[t];if(""===t&&!r)return s;const l=await T.searchIntegrations(o,{query:t,type:i,[YT]:n});if("success"===l.type){const e=l.data.integrationIds[tP]((e=>!a[eP](e))),t=No.default.env;if(!r){return e.sort(((e,i)=>(0,gT.BP)({[DT]:e,env:t})===(0,gT.BP)({[DT]:i,env:t})?0:(0,gT.BP)({[DT]:e,env:t})?-1:1)).slice(0,5)}return e[tP]((e=>!(0,gT.BP)({[DT]:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,x.unreachable)(l)}({query:e,[XT]:i,[YT]:null==o?void 0:o.id,approvedIntegrationIds:l,popularIntegrationIds:m,autoApproveBuiltByNotion:r}),debounce:hp[$T],[jT]:(r,c,m)=>{if(!c||!m)return n()(on.Z,{},void 0,n()(yT.Z,{}));const p=lT.ns[tP]((e=>t&&e.name[JT]()[eP](t[JT]())&&!l[eP](e.id)&&(e.id!==lT._o||!u))),g=[];if(0===c[QT]&&0===p[QT])g.push({key:"no_results",[jT]:()=>n()(Ji.Z,{isSmall:!0,[zT]:{[qT]:8}},void 0,n()(f.FormattedMessage,{id:HT,[GT]:"No results"})),[KT]:()=>{}});else{const t=c.map((t=>{var r;const l={table:pT.K2,id:t};if(!o)return;const c=go.y2[WT](o,l),u=null===(r=c.getInfo())||void 0===r?void 0:r[VT];return{key:`${t}`,[jT]:e=>{var t;return d[BT]($o.Z,s()({},e,{title:n()(Ji.Z,{[zT]:{[UT]:v.Z[UT].semibold}},void 0,c.getName()),[VT]:u&&n()(ho.Z,{[NT]:!0,[VT]:{[OT]:l,[VT]:u},isEmptyPage:!1,size:20}),[zT]:u?{[RT]:12}:{[LT]:30,[RT]:12},shouldWrapCaption:!0,[AT]:n()(uP,{[ET]:null===(t=c.getInfo())||void 0===t?void 0:t[ET],isNotionIntegration:(0,gT.BP)({[DT]:c.id,env:No.default.env})}),[xT]:"notranslate"}))},[KT]:()=>{e.closeDropdown(),dP({[XT]:i,[sP]:o,botSettings:a,[DT]:t})}}}))[tP](x.isDefined),r=p.map((t=>({key:`${t.id}`,[jT]:e=>d[BT]($o.Z,s()({},e,{title:n()(Ji.Z,{[zT]:{[UT]:v.Z[UT].semibold}},void 0,t.name),[VT]:n()("img",{src:t[_T][VT],[zT]:{height:20}}),[AT]:t[_T][ET],[zT]:{[RT]:12},shouldWrapCaption:!0,[xT]:"notranslate"})),[KT]:()=>{e.closeDropdown(),dP({[XT]:i,[sP]:o,botSettings:a,[DT]:t.id})}})))[tP](x.isDefined);g.push(...t,...r)}return n()(en.Z,{type:en.i[FT],[PT]:0,[TT]:[{key:IT,[jT]:e=>d[BT](on.Z,e),items:g}]})}}))}function lP(e){window.__c={n:"AdminComplianceIntegrationSettingsSearchResults"};const{query:t}=e,i=(0,Hi.O7)(),o=(0,qi.VK)((()=>B.default[aP][sP]),[]);return o?n()(Xo.Z,{menuType:jo.og.Popup,width:255,header:cP(t,[],!1)},void 0,n()(fT.Z,{request:t,[ZT]:e=>async function(e){const{query:t,[XT]:i,[YT]:o}=e;if(!Qi.Z[aP].online||!o)return[];if((0,p.isUUIDWithDashes)(t)||(0,p.isUUIDWithoutDashes)(t))return[t];const n=await T.searchIntegrations(i,{query:t,type:"compliance",[YT]:o});if("success"===n.type)return n.data.integrationIds;if("failed"===n.type)throw n.error;return(0,x.unreachable)(n)}({query:e,[XT]:i,[YT]:null==o?void 0:o.id}),debounce:hp[$T],[jT]:(t,i,a)=>{if(!i||!a)return n()(on.Z,{},void 0,n()(yT.Z,{}));const r=[];if(0===i[QT])r.push({key:"no_results",[jT]:()=>n()(Ji.Z,{isSmall:!0,[zT]:{[qT]:8}},void 0,n()(f.FormattedMessage,{id:HT,[GT]:"No results"})),[KT]:()=>{}});else{const t=uT.Z[aP].loaded?uT.Z[aP].webhookSubscriptions.map((e=>{var t;return null===(t=uT.Z.getBotsAsRecordMap()[nP]({table:ba.cZ,id:e.bot_id}))||void 0===t?void 0:t[CT]})):[],a=i.map((i=>{const a=go.y2[WT](o,{id:i,table:pT.K2});if(t[eP](i))return;const r={table:pT.K2,id:i},l=go.y2[WT](o,r),c=(0,dT.RW)(l.id);return{key:`${i}`,[jT]:e=>d[BT]($o.Z,s()({},e,{title:n()(Ji.Z,{[zT]:{[UT]:v.Z[UT].semibold}},void 0,l.getName()),[VT]:(null==c?void 0:c[_T][VT])&&n()(ho.Z,{[NT]:!0,[VT]:{[OT]:r,[VT]:c[_T][VT]},isEmptyPage:!1,size:20}),[zT]:null!=c&&c[_T][VT]?{[RT]:12}:{[LT]:30,[RT]:12},shouldWrapCaption:!0,[AT]:n()(uP,{[ET]:null!=c&&c[_T][ET]?J.default[kT](null==c?void 0:c[_T][ET]):"A SIEM or DLP partner",isNotionIntegration:!1})})),[KT]:()=>{var t;e.closeDropdown();a.getModel()&&(null!=c&&null!==(t=c[_T].oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==c?void 0:c[_T].type))?vT.Z[MT]({open:!0,[DT]:l.id}):hT.Z[MT]({open:!0,[DT]:l.id})}}}))[tP](x.isDefined);r.push(...a)}return n()(en.Z,{type:en.i[FT],[PT]:0,[TT]:[{key:IT,[jT]:e=>d[BT](on.Z,e),items:r}]})}})):null}function dP(e){const{[XT]:t,[sP]:i,botSettings:o,[DT]:n}=e;if(i&&!(0,dT.DB)(n)){const e={...null==o?void 0:o[iP],[n]:{type:"integration",status:"approved"}};z.createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",[XT]:t,perform:t=>{cT.updateValue({store:i,data:{bot_settings:{...o,[iP]:e}},transaction:t})}})}}const cP=(e,t,i)=>!e&&!i&&t[QT]>0&&n()(wa.Z,{title:n()(Ji.Z,{isSmall:!0,[zT]:{[wT]:4,[UT]:v.Z[UT].medium}},void 0,n()(f.FormattedMessage,{[GT]:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"}))}),uP=e=>{window.__c={n:"IntegrationCaption"};const{[ET]:t,isNotionIntegration:i}=e,o=(0,ji.Fg)(),a=i?{}:{maxHeight:48,overflow:"auto"};return t?n()("div",{[zT]:a},void 0,t,i&&n()("div",{[zT]:{display:"flex",[ST]:"center",[wT]:8}},void 0,n()(f.FormattedMessage,{[GT]:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),m.Z.integrationSecurity({[qT]:3,width:12,height:12,fill:o[bT]}))):null},mP=i(85)._lc,pP=i(85).cZW,gP=i(85).D7I,hP=i(85).nm$,vP=i(85).Yzm,fP=i(85).PXg,yP=i(85).a3v,bP=i(85).AL1,SP=i(85).iDK,wP=i(85).AIq,MP=i(85).Jkr,kP=i(85).Y9u,CP=i(85).Exd,ZP=i(85).ChN,TP=i(85).X_m,PP=i(85).jkI,IP=i(85).H1U,FP=i(85).nx5,_P=i(85).A4A,xP=(0,f.defineMessages)({[_P]:{id:"adminConnectionsSettings.search.input.placeholder",[FP]:"Add by name or integration ID"}});function AP(){window.__c={n:"AdminConnectionsSettingsAddMenu"};const e=(0,Hi.O7)(),t=(0,ji.Fg)(),[i,o]=(0,d.useState)(!0),[a,s]=(0,d.useState)(!1),[r,l]=(0,d.useState)(""),c=d.createRef();return i?n()(nl.Z,{style:{display:"flex",[IP]:PP,[TP]:28,[ZP]:v.Z[ZP].medium,[CP]:v.Z[CP][kP].desktop,color:Bv.ZP.blue,padding:"0px 6px"},onClick:()=>{o(!1)}},void 0,n()(f.FormattedMessage,{id:"adminConnectionsSettings.search.button.label",[FP]:"{plusIcon} Add approved connection",values:{plusIcon:m.Z.plus({fill:Bv.ZP.blue,[MP]:14,[TP]:14,flexGrow:0,[wP]:0})}})):n()(tn.ZP,{alignmentToOrigin:tn.ZP.Alignment.Start,keepFocus:e.device.isPhone,onDismiss:()=>{var e;null===(e=c[SP])||void 0===e||e.handleBlur(),o(!0),s(!1)},origin:d[gP](bl.Z,{type:bP,style:{[MP]:255},left:m.Z.plus({fill:t[yP],[MP]:14,[TP]:14,[fP]:8,flexGrow:0,[wP]:0}),ref:c,value:r,onFocus:()=>{s(!0)},[pP]:J.default[vP](xP[_P]),onChange:e=>l(e[hP].value)}),open:a,popupType:tn.ZP[mP].Popup,style:{[MP]:255},render:()=>n()(rP,{query:r,closeDropdown:()=>s(!1)})})}function BP(){window.__c={n:"AdminConnectionsSettingsAddComplianceMenu"};const e=(0,Hi.O7)(),t=(0,ji.Fg)(),[i,o]=(0,d.useState)(!0),[a,s]=(0,d.useState)(!1),[r,l]=(0,d.useState)(""),c=d.createRef();return i?n()(Io.Z,{isBlue:!0,style:{display:"flex",[IP]:PP,[TP]:28,[ZP]:v.Z[ZP].medium,[CP]:v.Z[CP][kP].desktop,color:Bv.ZP.blue,padding:"0px 6px"},onClick:()=>{var e;o(!1),null===(e=c[SP])||void 0===e||e.focusInput()}},void 0,n()(f.FormattedMessage,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",[FP]:"{plusIcon} Add connection",values:{plusIcon:m.Z.plus({fill:Bv.ZP.blue,[MP]:14,[TP]:14,flexGrow:0,[wP]:0})}})):n()(tn.ZP,{alignmentToOrigin:tn.ZP.Alignment.Start,keepFocus:e.device.isPhone,onDismiss:()=>{var e;null===(e=c[SP])||void 0===e||e.handleBlur(),o(!0),s(!1)},origin:d[gP](bl.Z,{type:bP,style:{[MP]:255},left:m.Z.plus({fill:t[yP],[MP]:14,[TP]:14,[fP]:8,flexGrow:0,[wP]:0}),focus:!0,ref:c,value:r,onFocus:()=>{s(!0)},[pP]:J.default[vP](xP[_P]),onChange:e=>l(e[hP].value)}),open:a,popupType:tn.ZP[mP].Popup,style:{[MP]:255},render:()=>n()(lP,{query:r,closeDropdown:()=>{o(!0),s(!1)}})})}var DP=i(3444),EP=i(70578),LP=i(61519),RP=i(42402),NP=i(55422),OP=i(66957);const UP=i(85).ISo,VP=i(85).yaJ,WP=i(85).tw8,KP=i(85).rI1,zP=i(85).jtM,GP=i(85).rBf,HP=i(85).JJj,qP=i(85).wgE,jP=i(85).g4H,QP=i(85).VU5,JP=i(85).bSA,$P=i(85).wNq,YP=i(85).eAn,XP=i(85).XCs,eI=i(85).YDv,tI=i(85).JrN,iI=i(85).PXg,oI=i(85).Exd,nI=i(85).tBn,aI=i(85).D7I,sI=i(85).Tk1,rI=i(85).h8z,lI=i(85).UPJ,dI=i(85).g7N,cI=i(85).jkI,uI=i(85).H1U,mI=i(85).EMU,pI=i(85).sM5,gI=i(85).ChN,hI=i(85).nLZ,vI=i(85).GTJ,fI=i(85).Gpy,yI=i(85).nx5,bI=i(85).BQ6,SI=i(85).XNW,wI=i(85).wlh,MI=i(85).Csb,kI=i(85).MUm,CI=i(85).TtP,ZI=i(85).MrQ,TI=i(85).TLr,PI=i(85).qJ8,II=i(85).dLQ,FI=i(85).C8t,_I=i(85).IFR,xI=[_I,FI];function AI(e){window.__c={n:"AdminConnectionsSettings"};const t=(0,Hi.O7)(),{[II]:i}=t.device,{externalBotIds:o,guestBotIds:a}=e,s=(0,qi.VK)((()=>B.default.state[PI]),[]),r=(0,qi.VK)((()=>uT.Z.webhookSubscriptions.state.reduce(((e,t)=>{const i=t.bot_id;return i&&(e[i]=t),e}),{})),[]),l=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()&&Z.default.checkGate("webhooks_beta")),[]),c=(0,qi.VK)((()=>s?[...a,...o].map((e=>{const t=go.Qx[TI](s,{table:ba.cZ,id:e,spaceId:s.id});return t.getAlive()?t:void 0})).filter(x.isDefined):[]),[s,a,o]),u=(0,qi.VK)((()=>function(e){return e.reduce(((e,t)=>{const i=t[UP]();if(!i)return e;return(0,dT.oh)(i)?(i in e.compliance||(e.compliance[i]=[]),e.compliance[i].push(t.id)):(i in e[kI]||(e[kI][i]=[]),e[kI][i].push(t.id)),e}),{compliance:{},[kI]:{}})}(c)),[c]),m=(0,qi.VK)((()=>function(e){return e.filter((e=>!e[UP]())).map((e=>e.id))}(c)),[c]),p=(0,qi.VK)((()=>function(e,t){if(!t)return{};return e.reduce(((e,i)=>{const o=mT.U[TI](t,{table:Ya.KJ,id:i.getCreatedById()}),n=i[UP]();return n?e[n]=n in e?[...e[n],o]:[o]:e[i.id]=[o],e}),{})}(c,s)),[c,s]),g=(0,qi.VK)((()=>null==s?void 0:s[ZI]().getValue()),[s]),h=(0,qi.VK)((()=>Object.keys(u[kI])[CI]+m[CI]),[u[kI],m]),y=(0,qi.VK)((()=>uT.Z.webhookSubscriptions.state[CI]),[]),b=(0,qi.VK)((()=>null!=g&&g[MI]?Object.keys(g[MI])[CI]+m[CI]:m[CI]),[g,m]),S={[_I]:n()(f.FormattedMessage,{id:"admin.connections.tabs.member_connections",[yI]:"Member{numberOfIntegrations}",[fI]:{[wI]:0!==h&&n()(Ji.Z,{isSecondaryColor:!0,[bI]:{[SI]:6}},void 0,h+lT.T2[CI])}}),[FI]:n()(f.FormattedMessage,{id:"admin.connections.tabs.workspace_connections",[yI]:"Workspace{numberOfIntegrations}",[fI]:{[wI]:0!==y&&n()(Ji.Z,{isSecondaryColor:!0,[bI]:{[SI]:6}},void 0,y)}})},w=xI.map((e=>S[e])),M=(0,qi.VK)((()=>"integrations"===Wi.Z.state.currentTab?Wi.Z.state.defaultSubtab:void 0),[]),[k,C]=(0,d.useState)(M||"member_connections"),T={[_I]:()=>d[aI](d[nI],null,n()(BI,{}),(null==g?void 0:g[vI])&&n()("div",{[bI]:{[hI]:"19px"}},void 0,n()(DI,{})),n()(LP.Z,{size:i?32:18,isHidden:!i}),Boolean(null==g?void 0:g[vI])?n()("div",{[bI]:{[pI]:mI,[lI]:rI,[uI]:cI,[dI]:19}},void 0,n()(Ji.Z,{[bI]:{[gI]:v.Z[gI].medium,[pI]:mI,[uI]:cI,height:28}},void 0,n()(f.FormattedMessage,{id:"adminConnectionsSettings.table.allowIntegrations.title",[yI]:"Approved connections{numberOfIntegrations}",[fI]:{[wI]:0!==b&&n()(Ji.Z,{isSecondaryColor:!0,[bI]:{[SI]:6}},void 0,b)}})),n()(AP,{})):n()(Ji.Z,{[bI]:{[gI]:v.Z[gI].medium,[pI]:mI,height:28,[uI]:cI,[dI]:"19px"}},void 0,n()(f.FormattedMessage,{id:"adminConnectionsSettings.table.default.title",[yI]:"All connections{numberOfIntegrations}",[fI]:{[wI]:0!==h&&n()(Ji.Z,{isSecondaryColor:!0,[bI]:{[SI]:6}},void 0,h+lT.T2[CI])}})),n()(DP.ZP,{integrationIdToBotIds:u[kI],internalIntegrationIds:m,integrationIdToUsers:p}),n()("div",{[bI]:{[hI]:16,[dI]:32,[pI]:"grid",[sI]:"1fr",gap:4}},void 0,n()(EP.Z,{}))),[FI]:()=>d[aI](d[nI],null,l?d[aI](d[nI],null,n()("div",{[bI]:{[pI]:mI,[lI]:rI,[uI]:cI,[dI]:19,[hI]:20}},void 0,n()("span",{[bI]:{[oI]:14,[iI]:8}},void 0,n()(f.FormattedMessage,{id:"admin.connections.tab.workspace_connections.header",[yI]:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them."})),n()(BP,{})),n()(DP.cP,{botIdToWebhookSubscription:r})):null)},P=e=>T[e];return l?d[aI](d[nI],null,n()(OP.Z,{tabs:w,selectedIndex:xI[tI]((e=>e===k)),onChange:e=>(e=>{C(xI[e])})(e),[bI]:{[eI]:0,[XP]:0,[hI]:-6,[dI]:14},tabTitleStyle:{[oI]:16}}),P(k)()):P(_I)()}const BI=()=>{window.__c={n:"RequireApprovalDropdown"};const e=(0,Hi.O7)(),t=(0,qi.VK)((()=>B.default.state[PI]),[]),{[II]:i}=e.device,o=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]),a=(0,qi.VK)((()=>null==t?void 0:t[ZI]().getValue()),[t]);return n()(NP.Z,{[II]:i,title:n()(f.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.title",[yI]:"Restrict members from adding connections"}),[jP]:(0,g.CJ)(a)?n()(f.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",[yI]:"Workspace members can only install connections pre-approved by workspace owners."}):n()(f.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",[yI]:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!o,[YP]:$P,[JP]:"integration_settings"},type:"dropdown",currentOption:(0,g.CJ)(a)?QP:"any_integrations",options:[{key:"any_integrations",label:n()(f.FormattedMessage,{id:"adminIntegrationSettings.integrationRestrictions.off.title",[yI]:"No restrictions"}),[jP]:n()(f.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",[yI]:"Workspace members can install any connection."})},{key:QP,label:n()(f.FormattedMessage,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",[yI]:"Only from approved list"}),[jP]:n()(f.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",[yI]:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:i=>{!function(e){const{[qP]:t,[PI]:i,botSettings:o,setting:n}=e;if(i){if("allow_list"===n&&(0,g.CJ)(o))return;const e="allow_list"===n?"approved_only":void 0;z[HP]({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",[qP]:t,perform:t=>{cT.updateValue({store:i,data:{bot_settings:{...o,[vI]:e}},transaction:t})}})}}({[qP]:e,[PI]:t,botSettings:a,setting:i})},info:[{key:"learn_more",label:n()(f.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.info.title",[yI]:"Workspace owners can always install and approve new connections."})}]})};const DI=()=>{window.__c={n:"AutoApproveBuiltByNotionToggle"};const e=(0,Hi.O7)(),t=(0,ji.Fg)(),i=(0,qi.VK)((()=>B.default.state[PI]),[]),{[II]:o}=e.device,a=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]),s=(0,qi.VK)((()=>null==i?void 0:i[ZI]().getValue()),[i]);return n()(NP.Z,{[II]:o,title:n()(f.FormattedMessage,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",[yI]:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",[fI]:{builtbynotion:e=>n()("span",{[bI]:{color:t[GP],[iI]:4,[SI]:4}},void 0,m.Z.integrationSecurity({width:14,[pI]:zP,[KP]:WP,[iI]:2}),e)}}),[jP]:n()(f.FormattedMessage,{[yI]:"Toggle this on to approve all workspace members to install connections <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",[fI]:{helpcenterlink:e=>n()(RP.Z,{href:(0,X.getLocalizedUrl)("guides.enterpriseIntegrationSettings")},void 0,e)}}),upsellOptions:{shouldUpsell:!a,[YP]:$P,[JP]:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==s?void 0:s[vI]),onToggle:()=>function(e){const{[qP]:t,[PI]:i,botSettings:o}=e;if(i){const e="approved_or_built_by_notion"===(null==o?void 0:o[vI])?"approved_only":VP;z[HP]({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",[qP]:t,perform:t=>{cT.updateValue({store:i,data:{bot_settings:{...o,[vI]:e}},transaction:t})}})}}({[qP]:e,[PI]:i,botSettings:s})})};var EI=i(59649);const LI=i(85).Mm1,RI=i(85).dLQ,NI=i(85).y3i,OI=i(85).wgE,UI=i(85).Ql2,VI=i(85).D7I,WI=i(85).nx5,KI=i(85).qJ8,zI=i(85).kBp;class GI extends c.Z{constructor(){super(...arguments),this.storeTypes={[zI]:rT.Z},this.renderResult=(e,t,i)=>{const{[KI]:o}=B.default.state;if(o)return n()(EI.Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:600},void 0,e&&n()("div",{},void 0,n()(f.FormattedMessage,{id:"spaceIntegrationSettings.error",[WI]:"Something went wrong…"})),t&&d[VI](AI,t))},this.fetchBotsInSpace=async e=>{let{[UI]:t}=e;const i=await Promise.all([oT.Yw({[OI]:this[OI],table:_w.bx,id:t,type:"guest"}),oT.Yw({[OI]:this[OI],table:_w.bx,id:t,type:"external"}),aT[NI]({[OI]:this[OI]})]);return{guestBotIds:i[0].botIds,externalBotIds:i[1].botIds}}}renderComponent(){const{device:e}=this[OI];if((0,sT.Fn)(this[OI]))return n()($i.Z,{},void 0,n()(Yi.Z,{large:!e[RI]||void 0,divider:e[RI]?void 0:"full",style:{[LI]:12}},void 0,n()(f.FormattedMessage,{id:"spaceConnectionsSettings.title",[WI]:"Connections"})),this.renderRequest());nT.openSettings({currentTab:"members"})}renderRequest(){const{spaceStore:e,userStore:t}=this.props;return n()(fT.Z,{[zI]:this.stores[zI],request:{[UI]:e.id,userId:t.id},performRequest:this.fetchBotsInSpace,render:this.renderResult})}}GI.displayName="IntegrationSettings";const HI=(0,f.injectIntl)(GI);var qI=i(36488),jI=i(56940),QI=i(53953),JI=i(79603),$I=i(53770);const YI=i(85).eOx,XI=i(85).eAn,eF=i(85).xr9,tF=i(85).W3n,iF=i(85).Z0E,oF=i(85).HSU,nF=i(85).Xvi,aF=i(85).opm,sF=[50,100,200,500,1e3];function rF(e){let{spaceStore:t,samlConfigStore:i,memberCountFilter:o,isPrimarySpace:n}=e;const a=(0,Hi.O7)(),s=(0,qi.VK)((()=>i.state[aF]),[i]),[r,l]=(0,d.useState)({spaces:[],[nF]:Date.now(),[oF]:0,[iF]:!1,[tF]:!1,error:void 0}),c=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]),u=(0,d.useCallback)((async e=>{if(c&&0!==s.length&&n&&r[nF]&&!r[tF]&&!(e&&r[oF]>0||r.error)){l((e=>({...e,[tF]:!0})));try{const{spaces:e,earliestCreatedAt:i,hasMoreSpaces:n}=await(0,$I.XD)({fn:async()=>await async function(e,t,i,o,n){const a=await T.getSpacesCreatedByUserWithDomains(e,{spaceId:t,[aF]:i,spacesLimit:10,memberCountFilter:n,spaceCreatedTimeUpperBound:o});if("failed"===a.type)throw a.error;return{spaces:a.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,[XI]:e[XI],creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,[eF]:e[eF],isDelinquent:e.isDelinquent,[YI]:e[YI],isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:a.data.hasMoreSpaces?a.data.earliestCreatedAt:void 0,hasMoreSpaces:a.data.hasMoreSpaces}}(a,t.id,s,r[nF]?r[nF]-1:Date.now(),o),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:sF,retryAttemptRandomOffsetMS:50,initialInput:void 0});l((t=>{const o=[...t.spaces],a=new Set(t.spaces.map((e=>e.id)));for(const i of e)a.has(i.id)||o.push(i);return{spaces:o,[nF]:i,[oF]:t[oF]+1,[iF]:n,[tF]:!1,error:void 0}}))}catch(i){const e=(0,Em.tg)(i);l((t=>({...t,[tF]:!1,error:e})))}}}),[a,c,o,n,t,s,r[nF],r[oF],r[tF],r.error]);const m=(0,d.useCallback)((async()=>{await u(!1)}),[u]),p=(0,d.useCallback)((async()=>{await u(!0)}),[u]),g=(0,d.useCallback)((async()=>{l({spaces:[],[nF]:Date.now(),[oF]:0,[iF]:!1,[tF]:!1,error:void 0}),await u(!0)}),[u]);return{claimableSpaces:r.spaces,[tF]:r[tF],error:r.error,[iF]:r[iF],loadFirstPage:p,loadNextPage:m,resetFirstPage:g,setSpaceRequest:function(e,t){l((i=>{const o=i.spaces.map((i=>i.id===e?{...i,[eF]:t}:i));return{...i,spaces:o}}))},removeClaimableSpace:function(e){l((t=>{const i=t.spaces.filter((t=>t.id!==e));return{...t,spaces:i}}))}}}var lF=i(59054);async function dF(e){const{environment:t,spaceId:i,store:o}=e;if(!(0,te.isBusinessTierOrAbove)())return o.reset(),{};const n=await T.getSamlConfigForSpace(t,{spaceId:i});if("failed"===n.type)w.showError(n);else if(n.data&&n.data.samlConfig){const e={...n.data.samlConfig,useMetadataUrl:!Boolean(n.data.samlConfig.idpMetadata)};return o.setState(e),n.data}return o.reset(),{}}const cF=i(85).v32;const uF=i(85).v32,mF=i(85).opm,pF=i(85).Wqi,gF="settings-page",hF="workspaces-page",vF="managed-users-page";let fF;!function(e){e[e.Single=0]="Single",e[e.Multi=1]="Multi"}(fF||(fF={}));const yF=(0,d.createContext)(null),bF=e=>{let{[pF]:t,samlConfigStore:i,domainSettingsStore:o,children:a}=e;window.__c={n:"PageProvider"};const s=(0,Hi.O7)(),[r,l]=(0,d.useState)(gF),[c,u]=(0,d.useState)(fF.Single),m=(0,qi.VK)((()=>i.state[mF]),[i]),p=(0,qi.VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),{loading:g,error:h,loaded:v}=function(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:o}=e;const n=(0,Hi.O7)(),[{status:a,error:s}]=(0,lF.r5)((async()=>{var e;const a=await dF({environment:n,spaceId:t.id,store:i});if((0,gp.Zw)(a))return a;const s=null===(e=a.samlConfig)||void 0===e?void 0:e.id;return s?{samlResponse:a,domainResponse:await o.updateValueForSpace({environment:n,spaceId:s,store:o})}:{samlResponse:a,domainResponse:void 0}}),[n,i,t,o]);return{loading:"pending"===a,loaded:"resolved"===a,error:s}}({[pF]:t,samlConfigStore:i,domainSettingsStore:o}),{loading:f,error:y,claimableSpaces:b,setSpaceRequest:w,removeClaimableSpace:M,hasNextPage:k,loadNextPage:C,loadFirstPage:Z,resetFirstPage:P}=rF({[pF]:t,samlConfigStore:i,isPrimarySpace:p,memberCountFilter:"single"}),{loading:I,error:F,claimableSpaces:_,setSpaceRequest:x,removeClaimableSpace:A,hasNextPage:B,loadNextPage:D,loadFirstPage:E,resetFirstPage:L}=rF({[pF]:t,samlConfigStore:i,isPrimarySpace:p,memberCountFilter:"multi"}),R=b.length+_.length>0,[N,O,U,V,W,K,z,G]=c===fF.Single?[f,y,b,w,M,k,C,Z,P]:[I,F,_,x,A,B,D,E,L],{loading:H,error:q,[uF]:j}=function(e){let{spaceStore:t}=e;const i=(0,Hi.O7)(),[o,n]=(0,d.useState)([]),[{status:a,error:s}]=(0,lF.r5)((async()=>{const e=await T.getDomainVerificationCodesForSpace(i,{spaceId:t.id,verifiedOnly:!0});"success"===e.type?n(e.data[cF]):n([])}),[i,t]);return{loading:"pending"===a,[cF]:"resolved"===a?o:[],error:s}}({[pF]:t,[mF]:m});(0,d.useEffect)((()=>{Z(),E()}),[U,Z,E]);const Q={page:r,navigateTo:function(e){l(e),0===b.length&&_.length>0&&u(fF.Multi),"workspaces-page"===e&&S.trackClaimableSpacesViewed(s,{verifiedDomains:m,tab:c===fF.Single?"single":"multi"})},loadingSaml:g,loadingSpaces:N,loadingVerifications:H,errorSaml:h,errorClaimableSpaces:O,errorVerifications:q,loadedSaml:v,[uF]:j,hasBrowsableSpaces:R,claimableSpaces:U,setSpaceRequest:V,removeClaimableSpace:W,resetInitialClaimableSpaces:G,hasMoreClaimableSpaces:K,loadMoreClaimableSpaces:z,tab:c,setSelectedTab:function(e){u(e),"workspaces-page"===r&&S.trackClaimableSpacesViewed(s,{verifiedDomains:m,tab:e===fF.Single?"single":"multi"})},verifiedDomains:m};return n()(yF.Provider,{value:Q},void 0,a)};var SF=i(81236);let wF;!function(e){e.User="user",e.Domains="domains"}(wF||(wF={}));var MF=i(64964);const kF=i(85).inI,CF=i(85).a8s,ZF=i(85).opm,TF=i(85).W3n,PF=i(85).JJP,IF=i(85).Z0E,FF=i(85).HSU,_F=i(85).Lyb,xF=i(85).yMN,AF={[xF]:[],[_F]:{query:"",multiFactorStatus:void 0,workspaceId:void 0},[FF]:0,[IF]:!0,[PF]:void 0,[TF]:!1,error:void 0};function BF(e){let{spaceStore:t,samlConfigStore:i,userStatus:o}=e;const n=(0,Hi.O7)(),[a,s]=(0,d.useState)(AF),r=(0,d.useRef)(a[_F]),c=(0,qi.VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),u=(0,qi.VK)((()=>i.state[ZF]),[i]),m=(0,qi.VK)((()=>Z.default.checkGate(CF)),[]),p=(0,d.useCallback)((async e=>{if(!m)return;if(0===u.length)return;if(!c)return;let i=a[TF],l=a.error,d=a[IF],p=a[PF];if(e.restartSearch&&(s((e=>({...AF,[_F]:e[_F]}))),i=AF[TF],l=AF.error,d=AF[IF],p=AF[PF]),d&&!i&&!l){s((e=>({...e,[TF]:!0}))),r.current=a[_F];try{var g;const e=await T.getManagedUsers(n,{spaceId:t.id,[ZF]:u,query:a[_F].query,multiFactorStatus:a[_F].multiFactorStatus,workspaceId:a[_F].workspaceId,[PF]:p,userStatus:o});if(S.trackManagedUsersDashboardSearch(n,{[_F]:{multiFactorStatus:a[_F].multiFactorStatus,workspaceId:a[_F].workspaceId},queryLength:(null===(g=a[_F].query)||void 0===g?void 0:g.length)??0,currentPage:p,userStatus:o}),"failed"===e.type)throw e.error;const i=e.data.nextPaginationToken,r=e.data.results;s((e=>{const t=[...e[xF]],o=new Set(e[xF].map((e=>e.userId)));for(const i of r)o.has(i.userId)||t.push(i);return{...e,[xF]:t,[TF]:!1,error:void 0,[FF]:e[FF]+1,[PF]:i,[IF]:Boolean(i)}}))}catch(h){const e=(0,Em.tg)(h);s((t=>({...t,[TF]:!1,error:e})))}}}),[n,t,m,u,c,a[TF],a.error,a[IF],a[PF],a[_F],o]);(0,d.useEffect)((()=>{l().isEqual(r.current,a[_F])||p({restartSearch:!0})}),[a[_F],p]);const g=(0,d.useCallback)((()=>p({restartSearch:!1})),[p]),h=(0,d.useCallback)((e=>{s((t=>({...t,[_F]:{...t[_F],...e}})))}),[]),v=(0,d.useCallback)(((e,t)=>{s((i=>({...i,[xF]:i[xF].map((i=>i.userId===e?{...i,workspaces:i.workspaces.filter((e=>e.id!==t))}:i))})))}),[]),f=(0,d.useCallback)((e=>{s((t=>({...t,[xF]:[...t[xF],e]})))}),[]),y=(0,d.useCallback)((e=>{s((t=>({...t,[xF]:t[xF].filter((t=>t.userId!==e))})))}),[]);return{[xF]:a[xF],[_F]:a[_F],[TF]:a[TF],error:a.error,removeWorkspaceFromUser:v,addUserToManagedUsers:f,[kF]:y,setFilters:h,[IF]:a[IF],loadNextPage:g}}const DF=i(85).PG2,EF=i(85).yMN,LF=(i(85).oWn,i(85).eg2,i(85).inI),RF=i(85).irb,NF=i(85).zDZ,OF=(i(85).Csu,i(85).GOX),UF=i(85).nx5,VF=(i(85).Mkg,i(85).Zij),WF=i(85).SPm,KF=i(85).qs4,zF=i(85).VXW,GF=i(85).pxK,HF=i(85).unR,qF=i(85).Wqi;let jF;!function(e){e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended"}(jF||(jF={}));const QF=i(85).nx5,JF=i(85).L_E;function $F(e){let{lastActiveAt:t}=e;window.__c={n:"LastActiveDate"};const i=(0,ji.yK)((e=>({[JF]:{opacity:.5}})),[]);return n()("div",{style:i[JF]},void 0,t?n()(uo,{dateTs:t}):n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",[QF]:"No activity"})))}const YF={defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."};function XF(e){return e.formatMessage(YF)}function e_(e){if(!e)return;const t=Object.entries(Fw.nb).find((t=>{let[i,o]=t;return o===e}));if(t){return t[0]}}const t_=i(85).nx5,i_=i(85).D7I,o_=i(85).L_E;function n_(e){let{workspace:t}=e;window.__c={n:"WorkspaceSummaryName"};const i=(0,f.useIntl)(),o=(0,ji.yK)((e=>({[o_]:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return n()("div",{style:o[o_]},void 0,t.name??XF(i),t.isExternal?n()(a_,{}):null)}function a_(){window.__c={n:"ExternalWorkspaceInfoIcon"};const e=(0,ji.yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return n()(ro.Z,{render:t=>d[i_]("div",t,m.Z.info(e.icon)),renderTooltip:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",[t_]:"This is an external workspace that does not belong to this user."})})}const s_=i(85).nx5,r_=i(85).z8h,l_=i(85).FkY;function d_(e){let{workspaceSummaries:t}=e;window.__c={n:"UserAccess"};const i=(0,f.useIntl)(),o=(0,ji.yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},[l_]:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},[r_]:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return n()(Ji.Z,{style:o.noWorkspaces},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",[s_]:"No workspaces"}));const a=t.find((e=>e.name)),s=a?a.name:XF(i),r=t.length-1;return n()("div",{style:o[r_]},void 0,n()(Ji.Z,{isInline:!0,style:o[l_]},void 0,s),!a||a.isExternal?n()(a_,{}):null,r>0?n()(Ji.Z,{isInline:!0,style:o.plusMore},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",[s_]:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:r}}),""):null)}var c_=i(93405);const u_=i(85).Mm1,m_=i(85).d7L,p_=i(85).D7I,g_=i(85).Yzm,h_=i(85).L_E,v_=(0,f.defineMessages)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function f_(e){let{managedUser:t,managedUserActionSections:i}=e;window.__c={n:"UserActionsMenu"};const o=(0,qi.qz)(void 0,ea.Z),a=(0,f.useIntl)(),r=(0,ji.yK)((()=>({[h_]:{minWidth:265}})),[]);return n()(na.ZP,{popupType:tn.kQ.Popup,style:r[h_],buttonPopupStore:o,renderOrigin:e=>d[p_](aa.Z,s()({ariaLabel:a[g_](v_.menuAriaLabel),icon:m.Z.dots},e)),render:()=>n()(y_,{managedUser:t,popupStore:o,managedUserActionSections:i})})}function y_(e){let{managedUser:t,popupStore:i,managedUserActionSections:o}=e;window.__c={n:"ActionsMenu"};const a=[],r=(0,ji.yK)((()=>({destructiveIcon:{fill:Bv.ZP.red,color:Bv.ZP.red}})),[]);for(const[n,l]of o.entries()){const e=l.map(((e,i)=>({key:i,render:i=>{var o,n;return d[p_](c_.Z,s()({},i,{shouldWrapCaption:!0,svg:t=>e.icon(e[m_]?{...t,...r.destructiveIcon}:t),title:e.title,style:{paddingTop:8,[u_]:8,...e[m_]?r.destructiveIcon:{}},disabled:null===(o=e.getDisabledState)||void 0===o?void 0:o.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)}))},action:()=>e.onClick(t)}))),i={key:`section-${n}`,render:e=>d[p_](on.Z,s()({topBorder:n>0},e)),items:e};a.push(i)}return n()(Xo.Z,{menuType:jo.og.Popup},void 0,n()(en.Z,{type:en.i.Vertical,initialFocus:void 0,sections:a,onAccept:()=>{i.setState({open:!1})}}))}const b_=i(85).bey,S_=i(85).cad,w_=i(85).JJs;function M_(e){let{userId:t}=e;window.__c={n:"UserSummary"};const i=(0,f.useIntl)(),o=(0,qi.VK)((()=>{const e=B.default.state.currentSpaceStore;if(!e)return;const o=go.U6.createChildStore(e,{table:Ya.KJ,id:t});return{[w_]:o,userName:o.getDisplayName(i),[S_]:o.getEmail()}}),[t,i]),a=(0,ji.yK)((e=>({[b_]:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500}})),[]);return o?n()(lo.i,{useThinTitle:!0,title:o.userName,byline:o[S_],icon:n()(es.Z,{size:28,[w_]:o[w_],[b_]:a[b_]})}):null}const k_=i(85).W3n,C_=i(85).dBt,Z_=i(85).O9h,T_=i(85).nx5,P_=i(85).XZb;var I_;!function(e){e.ManagedUser="managed-user",e.Loading=k_}(I_||(I_={}));const F_={borderRadius:"100%",height:28,width:28,marginLeft:-4},__=[{id:"user",[P_]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.user",[T_]:"Users"}),[Z_]:e=>e.type===I_.ManagedUser?n()(M_,{userId:e.managedUser.userId}):n()(lo.H,{includeByline:!0,includeIcon:!0,iconStyles:F_}),[C_]:{width:70},sortable:!1},{id:"access",[P_]:n()("span",{style:{paddingInline:8}},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.access",[T_]:"Workspaces"})),[Z_]:e=>e.type===I_.ManagedUser?n()(d_,{workspaceSummaries:e.managedUser.workspaces}):n()(ya.z,{}),[C_]:{width:60},sortable:!1},{id:"lastActive",[P_]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive",[T_]:"Last active"}),[Z_]:e=>e.type===I_.ManagedUser?n()($F,{lastActiveAt:e.managedUser.lastActiveAt}):n()(mo,{}),[C_]:{width:60},sortable:!1},{id:"menu",[P_]:null,[Z_]:e=>e.type===I_.ManagedUser?n()(f_,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,[C_]:{width:15},sortable:!1,hasClickableContents:!0}],x_=[{id:"1",isClickable:!1,type:I_.Loading},{id:"2",isClickable:!1,type:I_.Loading},{id:"3",isClickable:!1,type:I_.Loading}];function A_(e){let{managedUsers:t,loadMoreManagedUsers:i,onEditDetails:o,[k_]:a,managedUserActionSections:s}=e;window.__c={n:"ManagedUsersTable"};const r=t.map((e=>({id:e.userId,type:I_.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:s}))),l=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:__,theme:e,containerMarginTop:0})),[]);const c=a?[...r,...x_]:r;return d.createElement(d.Fragment,null,n()(no.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:__,rows:c,onRowClick:function(e){e.type===I_.ManagedUser&&o(e.managedUser)},renderNoRowsComponent:()=>n()(B_,{[k_]:a}),styles:l,onScrollBottom:i}))}function B_(e){window.__c={n:"EmptyState"};const t=(0,ji.yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return n()(Ji.Z,{isSmall:!0,style:t.text},void 0,!e[k_]&&n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.empty",[T_]:"No users found."}))}const D_=i(85).ccq,E_=i(85).ESK,L_=i(85)._lc,R_=(i(85).qTy,i(85).PG2),N_=i(85).nx5,O_=i(85).j7K,U_=i(85).y79,V_=i(85).L_E,W_=i(85).D7I;function K_(e){let{pillIcon:t,pillTitle:i,selectedItem:o,setSelectedItem:a,items:r}=e;window.__c={n:"BaseFilterPill"};const l=(0,qi.qz)(void 0,Qo.Z),c=(0,ji.yK)((e=>({[V_]:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:12,marginRight:6,fill:"currentColor"}})),[]),[u,m]=(0,d.useState)(!1),[p,g]=(0,d.useState)(o);function h(){a(void 0),g(void 0),m(!1)}function v(){a(p),m(!1)}const y=n()(Jo.Z,{on:void 0!==o,icon:t?t(c.icon):void 0,title:i,[R_]:()=>m(!0)});return n()(nn.Z,{},void 0,n()(tn.ZP,{popupType:tn.ZP[L_].Popup,[D_]:tn.ZP[E_].Bottom,alignmentToOrigin:tn.ZP.Alignment.Start,open:u,render:function(){const e={key:"menuOptions",items:r.map((e=>({key:e.key,action:()=>function(e){g(p===e?void 0:e)}(e.value),render:t=>d[W_]($o.Z,s()({},t,{icon:n()(br.Z,{isSelected:p===e.value}),focused:!1,title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption}))}))),render:e=>d[W_](on.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:c[V_]},void 0,n()(Xo.Z,{menuType:jo.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(en.Z,{type:en.i[U_],store:l,[O_]:0,sections:[e]})),n()(on.Z,{topBorder:!0,style:c.footer},void 0,n()(Io.Z,{[R_]:h},void 0,n()(f.FormattedMessage,{id:"core.baseFilterPill.clearButton",[N_]:"Clear"})),n()(Po.Z,{[R_]:v},void 0,n()(f.FormattedMessage,{id:"core.baseFilterPill.doneButton",[N_]:"Apply"}))))},onDismiss:function(){m(!1),g(o)},keepFocus:!0,origin:y,preventScaleTransition:!0}))}const z_=i(85).E7F,G_=i(85).nx5;function H_(e){let{selectedMfaMethod:t,setSelectedMfaMethod:i}=e;return n()(K_,{pillTitle:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.title",[G_]:"MFA method"}),pillIcon:m.Z.lockShield,selectedItem:t,setSelectedItem:i,items:q_})}const q_=[{key:"totp",value:"totp",title:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp",[G_]:"Authenticator"}),caption:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",[G_]:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms",[G_]:"Phone number"}),caption:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",[G_]:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:z_,value:z_,title:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",[G_]:"Backup code"}),caption:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",[G_]:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}];var j_=i(24211),Q_=i(23063),J_=i(15095),$_=i(71669),Y_=i(81865);const X_=i(85)._S$,ex=i(85).Vgm,tx=i(85).gGi,ix=i(85).lWm,ox=i(85).gdQ,nx=i(85).DIE,ax=i(85).GGR,sx=i(85).Joh,rx=i(85).D7I,lx=i(85).ESK,dx=i(85).nx5,cx=i(85).H1U,ux=i(85).jkI,mx=i(85).UPJ,px=i(85).NF1,gx=i(85).z$9,hx=i(85).Scd;function vx(e){let{size:t,style:i,avatarType:o,isOffline:a,disabled:s,loading:r,disabledTooltipMessage:l,onUploadProfilePhoto:c,onRemoveProfilePhoto:u}=e;window.__c={n:"UIEditableUserAvatar"};const[p,g]=(0,d.useState)(!1),h=(0,ji.yK)((e=>{const i=(t??18)/2,o=Math.ceil(Math.sqrt(i/2)-8);return(0,ji.EM)({avatarButton:{position:"relative",padding:0,border:0,[hx]:gx,[px]:"50%"},removeIconButton:{display:"flex",[mx]:ux,[cx]:ux,position:"absolute",top:o+2,right:o+2,height:16,width:16,padding:0,[px]:"50%",border:gx,[hx]:"light"===e.mode?e.contentBackground:e.tooltipBackground,boxShadow:e.lightBoxShadow,transition:"background 0.2s ease"},removeIcon:{fill:"light"===e.mode?Bv.FN.light.gray[400]:Bv.FN.dark.gray[800],height:10,width:10},buttonPressed:{[px]:"50%",[hx]:"light"===e.mode?Bv.FN.light.gray[200]:Bv.FN.dark.gray[600]},buttonHovered:{[px]:"50%",[hx]:"light"===e.mode?Bv.FN.light.gray[100]:Bv.FN.dark.gray[500]}})}),[t]),v=(0,d.useCallback)((()=>p?n()(f.FormattedMessage,{id:"editableUserAvatar.profilePhoto.remove",[dx]:"Remove photo"}):"photo"===o.type?n()(f.FormattedMessage,{id:"editableUserAvatar.profilePhoto.replace",[dx]:"Replace photo"}):n()(f.FormattedMessage,{id:"editableUserAvatar.profilePhoto.upload",[dx]:"Upload photo"})),[o.type,p]);return r?n()(fx,{size:t??18,isOffline:a,avatarType:o,loading:r}):n()(ro.Z,s?{disableTooltip:!l,[sx]:()=>l,placement:ro.Z[lx].Bottom,alignment:ro.Z.Alignment.Center,render:e=>d[rx]("div",e,n()(fx,{size:t??18,isOffline:a,avatarType:o}))}:{[sx]:v,placement:ro.Z[lx].Bottom,alignment:ro.Z.Alignment.Center,render:(e,s)=>n()(nl.Z,{style:{...h.avatarButton,...i},pressedStyle:h.buttonPressed,[ox]:h.buttonHovered,[ax]:e[ax],onMouseLeave:e.onMouseLeave,onClick:c},void 0,n()(fx,{size:t??18,isOffline:a,avatarType:o}),s&&"photo"===o.type&&n()(nl.Z,{style:h.removeIconButton,pressedStyle:h.buttonPressed,[ox]:h.buttonHovered,onClick:e=>{u(),e[nx]()},[ax]:()=>g(!0),onMouseLeave:()=>g(!1)},void 0,m.Z.closeSmall(h.removeIcon)))})}function fx(e){let{size:t,isOffline:i,loading:o,avatarType:a}=e;window.__c={n:"UserAvatar"};const s=(0,ji.yK)((e=>(0,ji.EM)({avatarWrapStyle:{[hx]:e[ix],[px]:tx,boxShadow:gx,..."light"===e.mode?{border:`1px solid ${Bv.FN.light.gray[100]}`}:{}},avatarStyle:{[px]:tx,width:t,height:t,maxWidth:tx,maxHeight:tx,display:"flex",[cx]:ux,[mx]:ux,userSelect:gx,[ex]:gx,opacity:i?.3:1},avatarIcon:{width:Math.ceil(.6*t),height:Math.ceil(.6*t),color:e.mediumIconColor},imageBox:{width:tx,height:tx,[px]:tx},initialStyle:{boxSizing:"content-box",border:gx,[px]:tx,width:t-2,height:t-2,lineHeight:t-2+"px",overflow:"hidden",textAlign:ux,fontSize:Math.max(t*(14/32),10),userSelect:gx,[ex]:gx,color:e.regularIconColor,opacity:i?.3:1},suspendedUserStyle:{boxSizing:"content-box",[px]:tx,width:t-2,height:t-2,overflow:"hidden",[hx]:e.suspendedUIUserAvatarBackground,userSelect:gx,[ex]:gx,color:e.regularTextColor,opacity:i?.3:1,display:"flex",[mx]:ux,[cx]:ux},suspendedUserIconStyle:{width:t-2,height:t-2,color:e.lightIconColor}})),[t,i]),r=(0,d.useMemo)((()=>o?n()(ao.Z,{}):"photo"===a.type?n()(Y_.Z,{stripGoogleIconQuery:!0,url:a.profilePhoto,isAuthenticated:!1,width:t||18,render:(e,t)=>n()($_.Z,{src:t,style:s.imageBox})}):"initial"===a.type?n()("div",{style:s.initialStyle},void 0,a.firstUpperCasedGrapheme):"icon"===a.type?m.Z.plus(s.avatarIcon):"suspended"===a.type?n()("div",{style:s.suspendedUserStyle},void 0,m.Z.personCrossedOut(s.suspendedUserIconStyle)):void 0),[a,t,o,s]);return n()("div",{style:s.avatarWrapStyle},void 0,n()("div",{style:s.avatarStyle},void 0,r))}function yx(e){const{profilePhoto:t,name:i,email:o}=e;if(t)return{type:"photo",profilePhoto:t};const n=J_[X_](i)[0]||J_[X_](o)[0];return n?{type:"initial",firstUpperCasedGrapheme:n.toUpperCase()}:{type:"icon"}}var bx=i(13490),Sx=i(24006);const wx=i(85).hzw;function Mx(e){let{title:t,byline:i,settingItem:o}=e;window.__c={n:"GenericSetting"};const a=(0,ji.yK)((e=>({[wx]:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},settingLeft:{width:"60%"},settingTitle:{fontWeight:v.Z.fontWeight.regular},settingByline:{marginBottom:4}})),[]);return n()("div",{style:a[wx]},void 0,n()("div",{style:a.settingLeft},void 0,n()(Yi.Z,{smallMarginBottom:!0,style:a.settingTitle},void 0,t),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:a.settingByline},void 0,i)),o)}const kx=i(85).D7I,Cx=i(85).pkR;function Zx(e){let{title:t,byline:i,isOn:o,onToggle:a,[Cx]:s,tooltipForDisabled:r}=e;function l(){s||a()}return n()(ro.Z,{placement:ro.Z.Placement.Top,alignment:ro.Z.Alignment.End,disableTooltip:!r||!s,renderTooltip:()=>r,render:e=>d[kx]("div",e,n()(Mx,{title:t,byline:i,settingItem:n()(Sx.Z,{on:o,[Cx]:s,onClick:l})}))})}var Tx=i(53471);i(85).YTT;const Px=i(85).irb,Ix=i(85).W3n,Fx=i(85).nx5,_x=(0,f.defineMessages)({uploadFailed:{[Fx]:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});var xx=i(50501);const Ax=i(85).Yzm,Bx=i(85).irb,Dx=i(85).s6h,Ex=i(85).W3n,Lx=i(85).nx5,Rx=(0,f.defineMessages)({getSupportAccessFailed:{[Lx]:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{[Lx]:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"}});function Nx(e){const{spaceId:t,userId:i}=e,o=(0,f.useIntl)(),n=(0,Hi.O7)(),[a,s]=(0,d.useState)({[Ex]:!1,error:void 0}),[r,l]=(0,d.useState)(void 0),c=(0,qi.VK)((()=>Z.default.checkGate(Dx)),[]);(0,d.useEffect)((()=>{c&&async function(){const e=await async function(){s({[Ex]:!0,error:void 0});const e=await T.getDataAccessConsentForManagedUser(n,{spaceId:t,userId:i});return"failed"===e.type?(s({[Ex]:!1,error:e.error}),void w[Bx](o[Ax](Rx.getSupportAccessFailed))):(s({[Ex]:!1,error:void 0}),e.data.expiryTime)}();l(e)}()}),[n,o,t,i,c]);const u=(0,d.useMemo)((()=>Boolean(r&&Number(r)>Date.now())),[r]),m=(0,d.useCallback)((async()=>{s({[Ex]:!0,error:void 0});const e=u?void 0:Date.now()+xx.g,a=await T.setDataAccessConsentForManagedUser(n,{spaceId:t,userId:i,expiryTime:e});if(S.trackManagedUsersPreventSupportAccessToggled(n,{new_value:Boolean(e)}),"failed"===a.type)return s({[Ex]:!1,error:a.error}),void w[Bx](o[Ax](Rx.setSupportAccessFailed));l(e),e?MF.oV({label:"Successfully enabled user's support access status"}):MF.oV({label:"Successfully disabled user's support access status"}),s({[Ex]:!1,error:void 0})}),[n,o,t,i,u]);return{isAccessGranted:u,toggleDataAccessConsent:m,[Ex]:a[Ex],error:a.error}}const Ox=i(85).$Vg,Ux=i(85).S_H,Vx=i(85).RJH,Wx=i(85).T4g,Kx=i(85).FkY,zx=i(85).Gpy,Gx=i(85).Muk,Hx=i(85).nx5,qx=i(85).BQ6,jx=i(85).TtP,Qx=i(85).Rlq,Jx=i(85).UPJ,$x=i(85).jkI,Yx=i(85).H1U,Xx=i(85).$bT,eA=i(85).L_E,tA=i(85).Wqi;function iA(e){window.__c={n:"WorkspacesOverview"};const{userId:t,workspaces:i,[tA]:o,removeWorkspaceFromUser:a}=e,s=(0,ji.yK)((()=>({[eA]:{display:"flex",[Xx]:"column",[Yx]:$x,[Jx]:$x,width:"100%",gap:8,marginTop:12}})),[]);return n()("div",{[qx]:s[eA]},void 0,i.map(((e,s)=>n()(d.Fragment,{},e.id,n()(oA,{userId:t,[tA]:o,[Qx]:e,removeWorkspaceFromUser:a}),s<i[jx]-1?n()(LP.Z,{size:8}):null))))}function oA(e){window.__c={n:"WorkspaceOverview"};const{userId:t,[tA]:i,[Qx]:o,removeWorkspaceFromUser:a}=e,s=(0,f.useIntl)(),r=(0,Hi.O7)(),l=(0,ji.yK)((()=>({[eA]:{display:"flex",[Xx]:"row",[Yx]:$x,[Jx]:"space-between",width:"100%",gap:12,overflow:"hidden"},[Wx]:{display:"flex",[Xx]:"row",[Yx]:$x,[Jx]:Ox,width:"100%",gap:12,overflow:"hidden"},[Vx]:{alignSelf:$x},textContainer:{display:"flex",[Xx]:"column",[Yx]:Ox,[Jx]:$x,width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]),d=(0,qi.VK)((()=>Z.default.checkGate("enable_remove_managed_user_from_space")),[]);const c=o.icon?{pointer:{table:_w.bx,id:o.id,spaceId:o.id},icon:o.icon}:void 0;return n()("div",{[qx]:l[eA]},void 0,n()("div",{[qx]:l[Wx]},void 0,n()("div",{[qx]:l[Vx]},void 0,n()(ho.Z,{disabled:!0,icon:c,isEmptyPage:!1,size:28,title:o.name,isLarge:!0,emojiSize:24,isRaw:!1})),n()("div",{[qx]:l.textContainer},void 0,n()(Ji.Z,{[qx]:l.name,isMultiline:!0},void 0,n()(n_,{[Qx]:o})),n()(Ji.Z,{[qx]:l.byline},void 0,Array[Ux](o[Gx])?1===o[Gx][jx]?n()(f.FormattedMessage,{[Hx]:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",[zx]:{plan:(0,ee.subscriptionTierToString)(o.plan,s),lowerEnd:o[Gx][0]}}):n()(f.FormattedMessage,{[Hx]:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",[zx]:{plan:(0,ee.subscriptionTierToString)(o.plan,s),lowerEnd:o[Gx][0],higherEnd:o[Gx][1]}}):n()(f.FormattedMessage,{[Hx]:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",[zx]:{plan:(0,ee.subscriptionTierToString)(o.plan,s),numMembers:o[Gx]}}))),n()("div",{},void 0,d?n()(Io.Z,{isRed:!0,onClick:async function(){S.trackManagedUserRemoveFromExternalWorkspaceButtonClicked(r);const{accept:e}=await w.confirmUserActionV2({message:n()(Ji.Z,{[qx]:w.dialogStyles.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",[Hx]:"Remove user from workspace?"})),description:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,o[Gx]>1?n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",[Hx]:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."}):n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.descriptionWithDeletion",[Hx]:"This user will no longer have access to the workspace you are removing them from. <b>The workspace will be deleted</b> since this user is the only member. This action is not reversible.",[zx]:{b:e=>n()("b",{},void 0,e)}})),acceptLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",[Hx]:"Remove"}),cancelLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",[Hx]:"Go back"})});if(!e)return;const s=await T.removeManagedUserFromSpace(r,{userId:t,targetSpaceId:o.id,requestingSpaceId:i.id});S.trackManagedUserRemoveFromExternalWorkspaceModalConfirmed(r),"success"===s.type?(a(t,o.id),MF.oV({label:n()(f.FormattedMessage,{[Hx]:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",[zx]:{[Kx]:o.name}})})):MF.oV({label:n()(f.FormattedMessage,{[Hx]:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",[zx]:{[Kx]:o.name}})})}},void 0,n()(f.FormattedMessage,{[Hx]:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})):null)))}const nA=i(85).jkI,aA=i(85).H1U,sA=i(85).$Vg,rA=i(85).UPJ,lA=i(85).wuN,dA=i(85).gGi,cA=i(85).Je3,uA=i(85).Scd,mA=i(85).rps,pA=i(85).$bT,gA=i(85).EMU,hA=i(85).sM5,vA=i(85).xOW,fA=i(85).PG2,yA=i(85).FOQ,bA=i(85).AEP,SA=i(85).HVc,wA=i(85).tBn,MA=i(85).Joh,kA=i(85).D7I,CA=i(85).ESK,ZA=i(85).TtP,TA=i(85).icY,PA=i(85).Dd5,IA=i(85).cZW,FA=i(85).pkR,_A=i(85).nm$,xA=i(85).Yzm,AA=i(85).mPA,BA=(i(85).ulA,i(85).BQ6),DA=i(85).L_E,EA=i(85).W3n,LA=i(85).s6h,RA=i(85).VXW,NA=i(85).rpY,OA=i(85).Wqi,UA=i(85).E4p,VA=i(85).nx5,WA=(0,f.defineMessages)({namePlaceholder:{[VA]:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{[VA]:UA,id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{[VA]:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function KA(e){let{[OA]:t,managedUser:i,onClose:o,removeWorkspaceFromUser:a}=e;const s=Boolean(i);return n()(QI.Z,{open:s,onDismiss:o,preventHideChildrenWhileOpening:!0,[NA]:()=>i?n()(zA,{[OA]:t,managedUser:i,removeWorkspaceFromUser:a}):null})}function zA(e){let{[OA]:t,managedUser:i,removeWorkspaceFromUser:o}=e;window.__c={n:"ManagedUserDetailsScene"};const a=(0,f.useIntl)(),s=(0,Hi.O7)(),r=(0,qi.VK)((()=>new go.U6(s,{id:i[RA],table:Ya.KJ})),[i,s]),l=(0,qi.VK)((()=>t.id),[t]),c=(0,qi.VK)((()=>Z.default.checkGate(LA)),[]),{hasStagedChanges:u,resetState:p,saveChanges:g,[EA]:h,profilePhoto:v,name:y,email:b}=function(e){const{userStore:t}=e,i=(0,f.useIntl)(),o=(0,Hi.O7)(),{userProfilePhoto:a,userName:s,userEmail:r}=(0,qi.VK)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(i),userEmail:t.getEmail()})),[t,i]),[l,c]=(0,d.useState)({[Ix]:!1,error:void 0}),[u,m]=(0,d.useState)({value:a,[Ix]:!1}),[p,g]=(0,d.useState)(s),[h,v]=(0,d.useState)(r);return{hasStagedChanges:u.value!==a||p!==s||h!==r,saveChanges:async function(){var e;const i=null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!i)return;S.trackManagedUserEditModalSubmitted(o);const{accept:a}=await w.confirmUserActionV2({message:n()(Ji.Z,{style:w.dialogStyles.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",[Fx]:"Confirm changes"})),description:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",[Fx]:"Changes made to this user's account will be reflected across all workspaces they have access to."}),n()("br",{}),n()("br",{}),n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",[Fx]:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})),acceptLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",[Fx]:"Save changes"}),cancelLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",[Fx]:"Go back"})});if(!a)return;c({[Ix]:!0,error:void 0});const s=await T.updateUserProfile(o,{userId:t.id,spaceId:i,name:p,email:h,profilePhoto:u.value});if(S.trackManagedUserEditModalConfirmed(o),"failed"===s.type)return w[Px](s.error.message),void c({[Ix]:!1,error:s.error});MF.oV({label:"Successfully updated user's profile"}),setTimeout((()=>{c({[Ix]:!1,error:void 0})}),500)},resetState:function(){m({value:a,[Ix]:!1}),g(s),v(r)},[Ix]:l[Ix],error:l.error,profilePhoto:{value:u.value,[Ix]:u[Ix],set:function(){Tx.openFilePickerAndUpload({environment:o,onStart:()=>{m((e=>({...e,[Ix]:!0})))},bucket:"public",onError:()=>{m((e=>({...e,[Ix]:!1}))),w[Px](i.formatMessage(_x.uploadFailed))},onComplete:e=>{const t=e[0];m({value:t,[Ix]:!1})},accept:"image/*"})},remove:function(){m({value:"",[Ix]:!1})}},name:{value:p,set:g},email:{value:h,set:v}}}({userStore:r}),{isAccessGranted:M,toggleDataAccessConsent:k,[EA]:P}=Nx({[RA]:i[RA],spaceId:l}),I=(0,qi.VK)((()=>r.getIsSuspended()?{type:"suspended"}:yx({profilePhoto:v.value,name:y.value,email:b.value})),[r,v.value,y.value,b.value]),F=function(e){const{loadingSupportAccess:t}=e;return(0,ji.yK)((e=>({[DA]:{position:vA,[hA]:gA,[pA]:mA,[uA]:e[cA],width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:vA,[hA]:gA,[pA]:mA,width:dA,height:dA,overflowY:"auto",padding:"36px 24px",gap:16},[TA]:{color:e[lA]},horizontalLabel:{color:e[lA],[hA]:gA,[pA]:"row",[rA]:sA,[aA]:nA,gap:4},value:{color:e.regularTextColor},[AA]:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:dA,[uA]:e.modalBackground},avatarContainer:{[hA]:gA,[aA]:nA,[rA]:nA,width:dA},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{[hA]:gA,[pA]:mA,[aA]:sA,[rA]:nA,width:dA,gap:8},inputRow:{[hA]:gA,[pA]:mA,[aA]:sA,[rA]:nA,width:dA},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:vA,width:dA,[bA]:t?.5:1},infoContainer:{[hA]:gA,[pA]:mA,[aA]:nA,[rA]:nA,width:dA},infoRow:{[hA]:gA,[pA]:"row",[aA]:nA,[rA]:"space-between",width:dA},footer:{position:"absolute",[hA]:gA,[pA]:"row",[aA]:nA,[rA]:"flex-end",paddingInline:4,boxShadow:e.borderBoxShadow,[uA]:e[cA],left:0,right:0,bottom:0,height:48},[yA]:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:P}),_=(0,j_.E2)(a),x=(0,qi.VK)((()=>!Qi.Z.state.online),[]),A=i.mfaMethods.filter((e=>"backup_code"!==e)),D=a.formatList(A.map((e=>(0,C.cR)(e))),{type:"conjunction"});return n()("div",{[BA]:F[DA]},void 0,n()("div",{[BA]:F.innerContainer},void 0,n()("div",{[BA]:F.avatarContainer},void 0,n()(vx,{size:56,avatarType:I,isOffline:x,[EA]:v[EA],onUploadProfilePhoto:v.set,onRemoveProfilePhoto:v.remove})),n()("div",{[BA]:F.inputContainer},void 0,n()("div",{[BA]:F.inputRow},void 0,n()(bx.Z,{},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",[VA]:"Name"})),n()(bl.Z,{[BA]:F[AA],[FA]:h,value:y.value,[IA]:a[xA](WA.namePlaceholder),[PA]:e=>{y.set(e[_A].value)}})),n()("div",{[BA]:F.inputRow},void 0,n()(bx.Z,{},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",[VA]:UA})),n()(bl.Z,{[BA]:F[AA],[FA]:h,value:b.value,[IA]:a[xA](WA.emailPlaceholder),[PA]:e=>{b.set(e[_A].value)}}))),n()("div",{[BA]:F.infoContainer},void 0,n()("div",{[BA]:F.infoRow},void 0,n()(Ji.Z,{[BA]:F[TA],isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",[VA]:"Account created"})),i.accountCreatedAt?n()(Ji.Z,{isSmall:!0,[BA]:F.value},void 0,(0,Dv.Yx)(i.accountCreatedAt,"medium",_)):n()(Ji.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",[VA]:"Incomplete"}))),n()(LP.Z,{size:16}),n()("div",{[BA]:F.infoRow},void 0,n()(Ji.Z,{[BA]:F[TA],isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",[VA]:"Last active"})),i.lastActiveAt?n()(Ji.Z,{isSmall:!0,[BA]:F.value},void 0,(0,so.gs)(i.lastActiveAt)):n()(Ji.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",[VA]:"No activity"}))),n()(LP.Z,{size:16}),n()("div",{[BA]:F.infoRow},void 0,n()(Ji.Z,{[BA]:F[TA],isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",[VA]:"MFA"})),A[ZA]>0?n()(Ji.Z,{isSmall:!0,[BA]:F.value},void 0,D):n()(Ji.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",[VA]:"Not configured"}))),c?d[kA](d[wA],null,n()(LP.Z,{size:16}),n()("div",{[BA]:F.supportAccessRow},void 0,n()(Zx,{title:n()(Ji.Z,{[BA]:F.horizontalLabel,isSmall:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",[VA]:"Support access"}),n()(ro.Z,{placement:ro.Z[CA].Bottom,[NA]:e=>d[kA]("div",e,m.Z.help(F.icon)),[MA]:()=>n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",[VA]:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})),byline:null,isOn:M,onToggle:k,[FA]:P}))):null),n()("div",{},void 0,i[SA][ZA]>0?d[kA](d[wA],null,n()(bx.Z,{},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",[VA]:"Workspaces"})),n()(iA,{[RA]:i[RA],[SA]:i[SA],[OA]:t,removeWorkspaceFromUser:o})):null)),n()(Q_.Z,{isVisible:u||h,enterAnimationStyle:{translateY:48,[bA]:0},animationStyle:{[bA]:1,translateY:0},exitAnimationStyle:{translateY:48,[bA]:0},[NA]:()=>n()("div",{[BA]:F.footer},void 0,n()(eo.Z,{isRed:!0,[FA]:h,[BA]:F[yA],[fA]:p},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",[VA]:"Cancel"})),n()(Po.Z,{[FA]:h,[BA]:F[yA],[fA]:g},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.saveButton",[VA]:"Save changes"})))}))}const GA=i(85).nx5,HA=i(85).eAn,qA=i(85).Mm1,jA=i(85)._V5;function QA(e){let{selectedSpaceId:t,setSelectedSpaceId:i,spaceData:o}=e;window.__c={n:"WorkspacesFilter"};const a=(0,f.useIntl)(),s=(0,ji.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[]),r=(0,qi.VK)((()=>o.map((e=>{const t=e.name,i=e.icon?{pointer:{table:_w.bx,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:n()("div",{style:s.optionContainer},void 0,n()(ho.Z,{disabled:!0,icon:i,isEmptyPage:!1,size:24,title:t,isLarge:!0,emojiSize:24,isRaw:!1}),n()("div",{style:{[jA]:4,[qA]:4}},void 0,n()(Ji.Z,{style:s.optionTitle},void 0,t),"none"!==e.role?n()(Ji.Z,{style:s.optionCaption},void 0,(0,ee.subscriptionTierToString)(e[HA],a)):null))}}))),[o,a,s]);return n()(K_,{pillTitle:n()(f.FormattedMessage,{id:"managedUsersTab.table.filters.workspaces.title",[GA]:"Workspace"}),pillIcon:m.Z.settingsWorkspace,selectedItem:t,setSelectedItem:i,items:r})}const JA=i(85).wuN,$A=i(85).ChN,YA=i(85).Yzm,XA=i(85).r7A,eB=(i(85).OFc,i(85).Lyb),tB=i(85).yMN,iB=i(85).Wqi,oB=i(85).nx5,nB=i(85).cZW,aB=(0,f.defineMessages)({[nB]:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",[oB]:"Search name, email, or user ID"}});function sB(e){let{[iB]:t,samlConfigStore:i}=e;window.__c={n:"ManagedUsersPage"};const{navigateTo:o}=(0,d.useContext)(yF),a=(0,Hi.O7)(),s=(0,ji.yK)((e=>({link:{fontSize:14,[$A]:400,color:e[JA],textDecoration:"none"},title:{marginTop:21,[$A]:v.Z[$A].semibold,fontSize:17},byline:{fontSize:14,[$A]:v.Z[$A].regular,color:e[JA],paddingBottom:20},count:{marginLeft:4,opacity:.5,[$A]:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},[eB]:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),r=(0,qi.VK)((()=>Z.default.checkGate("enable_suspend_managed_users")),[]),l=(0,qi.VK)((()=>i.state.spaceIds.map((e=>SF.Z.getPublicSpaceData(a,e)||void 0)).filter(x.isDefined)),[i,a]),{[tB]:c,[eB]:u,loadNextPage:p,setFilters:g,removeWorkspaceFromUser:h,loading:y,selectedTab:b,setSelectedTab:M,onOpenDetailsModal:k,onCloseDetailsModal:C,selectedUser:P,managedUserActionSections:I}=function(e){let{[qF]:t,samlConfigStore:i}=e;const o=(0,Hi.O7)(),a=(0,f.useIntl)(),s=(0,qi.VK)((()=>Z.default[HF]("enable_suspend_managed_users")),[]),r=(0,qi.VK)((()=>Z.default[HF]("enable_logout_managed_users")),[]),l=(0,qi.VK)((()=>Z.default[HF](GF)),[]),c=(0,qi.VK)((()=>Z.default[HF]("enable_delete_managed_users")),[]),[u,p]=(0,d.useState)(),[g,h]=(0,d.useState)(jF.NotSuspended),v=(0,qi.VK)((()=>o.currentUser.id),[o]),y=(0,d.useCallback)((e=>{S.trackManagedUserEditProfileModalOpen(o),p(e[zF])}),[o]),b=BF({userStatus:"notSuspended",[qF]:t,samlConfigStore:i}),M=BF({userStatus:"suspended",[qF]:t,samlConfigStore:i});let k;k=g===jF.NotSuspended?b:M;const C=(0,d.useCallback)((async e=>{S.trackManagedUserSuspendButtonClicked(o);const{accept:i}=await w[KF]({[WF]:n()(Ji.Z,{style:w.dialogStyles[VF]},void 0,n()(f.FormattedMessage,{[UF]:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})),[OF]:n()(f.FormattedMessage,{[UF]:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),[NF]:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{[UF]:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"}))});if(!i)return;const a=await T.updateUserSuspension(o,{[zF]:e[zF],spaceId:t.id,suspend:!0});S.trackManagedUserSuspendModalConfirmed(o),"failed"===a.type&&w[RF](a.error[WF]),M.addUserToManagedUsers(e),b[LF](e[zF])}),[o,t.id,M,b]),P=(0,d.useCallback)((async e=>{S.trackManagedUserLogOutButtonClicked(o);const{accept:i}=await w[KF]({[WF]:n()(Ji.Z,{style:w.dialogStyles[VF]},void 0,n()(f.FormattedMessage,{[UF]:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})),[OF]:n()(f.FormattedMessage,{[UF]:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),[NF]:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",[UF]:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."}))});if(!i)return;const a=await T.logoutManagedUsers(o,{spaceId:t.id,target:{type:wF.User,[zF]:e[zF]}});if(S.trackManagedUserLogOutModalConfirmed(o),"failed"===a.type)return w[RF](a.error[WF]),void MF.oV({label:"Failed to log out user"});MF.oV({label:"Successfully logged out user"})}),[o,t.id]),I=(0,d.useCallback)((async e=>{S.trackManagedUserResetPasswordButtonClicked(o);const{accept:i}=await w[KF]({[WF]:n()(Ji.Z,{style:w.dialogStyles[VF]},void 0,n()(f.FormattedMessage,{[UF]:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})),[OF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",[UF]:"Reset passwords for user"}),[NF]:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",[UF]:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:n()("br",{})}}))});if(!i)return;const s=await T.resetPasswordsForManagedUsers(o,{spaceId:t.id,target:{type:wF.User,[zF]:e[zF]}});if(S.trackManagedUserResetPasswordModalConfirmed(o),"failed"===s.type)return w[RF]((0,vp.wf)(a,s)),void MF.oV({label:"Failed to reset password for user"});MF.oV({label:"Successfully reset password for user"})}),[o,a,t.id]),F=(0,d.useCallback)((async e=>{const i=await T.updateUserSuspension(o,{[zF]:e[zF],spaceId:t.id,suspend:!1});S.trackManagedUserReactivateButtonClicked(o),"failed"===i.type&&w[RF](i.error[WF]),M[LF](e[zF]),b.addUserToManagedUsers(e)}),[o,t.id,M,b]),_=(0,d.useCallback)((async e=>{S.trackManagedUserDeleteButtonClicked(o);const{accept:i}=await w[KF]({[WF]:n()(Ji.Z,{style:w.dialogStyles[VF]},void 0,n()(f.FormattedMessage,{[UF]:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})),[OF]:n()(f.FormattedMessage,{[UF]:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),[NF]:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{[UF]:"This will delete the user's data. They can still be restored within 30 days by contacting Notion support.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"}))});if(!i)return;const a=await T.deleteManagedUser(o,{[zF]:e[zF],spaceId:t.id});S.trackManagedUserDeleteModalConfirmed(o),"failed"===a.type&&w[RF](a.error[WF]),M[LF](e[zF]),b[LF](e[zF])}),[o,t.id,M,b]),A=(0,d.useMemo)((()=>k[EF].find((e=>{let{[zF]:t}=e;return t===u}))),[u,k[EF]]),B=(0,d.useMemo)((()=>{let e;const t={[DF]:e=>y(e),icon:m.Z.pencil,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",[UF]:"Edit details"})},i={[DF]:e=>_(e),icon:m.Z.trash,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",[UF]:"Delete user"}),isDestructive:!0};switch(g){case jF.NotSuspended:e=[[t,...r?[{[DF]:P,icon:m.Z.logout,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",[UF]:"Log out"})}]:[],...l?[{[DF]:I,icon:m.Z.setPassword,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",[UF]:"Reset password"})}]:[]],[...s?[{[DF]:C,icon:m.Z.handWave,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",[UF]:"Suspend user"}),getDisabledState:e=>e[zF]===v}]:[],...c?[i]:[]]];break;case jF.Suspended:e=s?[[t],[{[DF]:e=>F(e),icon:m.Z.showDeletedPages,[VF]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",[UF]:"Reactivate user"})},...c?[i]:[]]]:[];break;default:(0,x.unreachable)(g)}return e.filter((e=>e.length>0))}),[y,v,l,r,s,c,g,_,C,F,P,I]);return{...k,selectedTab:g,setSelectedTab:h,selectedUser:A,managedUserActionSections:B,onOpenDetailsModal:y,onCloseDetailsModal:function(){p(void 0)}}}({[iB]:t,samlConfigStore:i});return n()($i.Z,{},void 0,n()(RP.Z,{style:s.link,onClick:()=>o(gF)},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.breadcrumb",[oB]:"← Identity & Provisioning"})),n()(Yi.Z,{large:!0,style:s.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.title",[oB]:"User management"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:s.byline},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.byline",[oB]:XA})),r?n()(OP.Z,{tabs:[n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",[oB]:"Active"},"notSuspended.title"),n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",[oB]:"Suspended"},"suspended")],selectedIndex:b,onChange:e=>M(e),style:s.tabBarMenu}):null,n()(em,{mode:Yu.Button,query:u.query,setQueryFilter:e=>{g({query:e})},placeholderText:J.default[YA](aB[nB])}),n()("div",{style:s[eB]},void 0,n()(QA,{selectedSpaceId:u.workspaceId,setSelectedSpaceId:e=>{g({workspaceId:e})},spaceData:l}),n()(H_,{selectedMfaMethod:u.multiFactorStatus,setSelectedMfaMethod:e=>{g({multiFactorStatus:e})}})),n()(A_,{[tB]:c,loading:y,loadMoreManagedUsers:p,onEditDetails:k,managedUserActionSections:I},b),n()(KA,{[iB]:t,managedUser:P,onClose:C,removeWorkspaceFromUser:h}))}const rB=i(85).wgE;function lB(e){let{[rB]:t,samlConfigStore:i}=e;const o=i.state.emailDomains.length>0,n=(0,te.getSubscriptionTier)();return o||("business"===n||"enterprise"===n)}async function dB(e){let{onRequest:t,onSuccess:i}=e;const o=await t();switch(o.type){case"success":i&&await i(o);break;case"failed":w.showErrorMessage(o.error.message);break;default:(0,x.unreachable)(o)}}const cB=i(85).c6E,uB=i(85).lR8,mB=i(85).$gG,pB=i(85).Bn$,gB=i(85)._M,hB=i(85).QmD,vB=i(85).opm;function fB(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:o}=e;const n=(0,Hi.O7)(),a=(0,qi.VK)((()=>i[hB][vB]),[i]),s=(0,qi.VK)((()=>"disabled"!==i[hB].status&&"unconfigured"!==i[hB].status),[i]),r=(0,qi.VK)((()=>lB({environment:n,samlConfigStore:i})),[i,n]),l=(0,qi.VK)((()=>r&&(!i[hB].id||i[hB].id===t.id)),[r,i,t]),c=(0,qi.VK)((()=>o[hB][vB].length>0&&(0,te.isEnterpriseTier)()),[o]),u=(0,qi.VK)((()=>a.length>0),[a]),m=(0,d.useCallback)((async()=>{if(i[hB][vB].length>0)return dB({onRequest:()=>T.updateWorkspaceCreationForEmailDomains(n,{[vB]:i[hB][vB],workspaceCreationEnum:o[hB].spaceCreation,spaceId:t.id}),onSuccess:()=>{o.setState({...o[hB],[vB]:i[hB][vB]})}})}),[n,t,o,i]),p=(0,d.useCallback)((async()=>{if(i[hB][vB].length>0)return dB({onRequest:()=>T.updateEmailDomainSettings(n,{[vB]:i[hB][vB],spaceId:t.id,preventProfileEdits:o[hB][pB][gB],preventMembersJoiningExternalWorkspace:o[hB][pB][mB],customSessionDuration:e_(o[hB][pB][uB]),preventGrantingSupportAccess:o[hB][pB][cB]}),onSuccess:()=>{o.setState({...o[hB],[vB]:i[hB][vB]})}})}),[n,t,o,i]),g=(0,qi.VK)((()=>r&&(0,te.isEnterpriseTier)()),[r]);return{verifiedDomains:a,isSamlStatusEnabled:s,isSamlAvailable:r,isSamlEditable:l,isDomainSettingsAvailable:c,isClaimSpacesAvailable:g,canSaveWorkspaceCreationSetting:u,saveWorkspaceCreationSetting:m,saveEmailDomainSettings:p}}var yB=i(93678),bB=i(91718);const SB=i(85).bSA,wB=i(85).eAn,MB=i(85).PXg,kB=i(85).jkI,CB=i(85).H1U,ZB=i(85).ChN;function TB(e){let{title:t,byline:i,targetTier:o}=e;window.__c={n:"Upsell"};const a=(0,Hi.O7)(),s=(0,d.useCallback)((()=>yB.y(a,{from:"space_saml",for:o})),[a,o]);return d.createElement(d.Fragment,null,n()(Yi.Z,{smallMarginBottom:!0,style:{[ZB]:v.Z[ZB].regular,display:"flex",[CB]:kB}},void 0,n()("span",{style:{[MB]:8}},void 0,t),n()(bB.Z,{[wB]:o,[SB]:"space_saml",onClick:s})),n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,i))}const PB=i(85).Joh,IB=i(85).pkR,FB=i(85).D7I,_B=i(85).ESK,xB=i(85).wNq,AB=i(85).FOQ,BB=i(85).GHg,DB=i(85).hzw,EB=(i(85).NR,i(85).nx5),LB={browseWorkspaces:n()(f.FormattedMessage,{[EB]:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:n()(f.FormattedMessage,{[EB]:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:n()(f.FormattedMessage,{[EB]:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function RB(e){let{promptUpgrade:t}=e;window.__c={n:"ClaimSpaces"};const{navigateTo:i,loadingSpaces:o,hasBrowsableSpaces:a,errorClaimableSpaces:r}=(0,d.useContext)(yF),l=Boolean(r),c=!a||o,u=!a&&!o,m=n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.title",[EB]:"Claim workspaces"}),p=n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.message",[EB]:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),g=(0,ji.yK)((e=>({[DB]:{margin:"18px 0"},[BB]:{display:"flex",flexDirection:"column",maxWidth:280},[AB]:{opacity:c?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[c]);if(t)return n()(TB,{title:m,byline:p,targetTier:xB});let h;return h=o?n()(ao.Z,{}):a?LB.browseWorkspaces:LB.noWorkspaces,n()("div",{style:g[DB]},void 0,n()(Mx,{title:m,byline:p,settingItem:n()("div",{style:g[BB]},void 0,n()(ro.Z,{placement:ro.Z[_B].Top,alignment:ro.Z.Alignment.End,render:e=>d[FB](eo.Z,s()({[IB]:c,isLarge:!0,style:g[AB],onClick:()=>i(hF)},e),h),disableTooltip:!u,[PB]:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.tooltip",[EB]:"There are no available workspaces to claim"})}),l?n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:g.settingErrorByline},void 0,LB.loadingError):null)}))}var NB=i(52507),OB=i(47478);const UB=i(85).g7N,VB=i(85).ChN,WB=i(85).opm,KB=i(85).nx5,zB=(i(85)._Ze,i(85).FOQ),GB=i(85).pkR;function HB(e){let{spaceStore:t,samlConfigStore:i,promptUpgrade:o,[GB]:a,saveWorkspaceCreationSetting:s}=e;window.__c={n:"EmailDomains"};const r=(0,Hi.O7)(),l=(0,qi.qz)(void 0,NB.ZP),c=(0,ji.yK)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},[zB]:{position:"relative",marginLeft:"auto",marginRight:0,opacity:a?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[a]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.emailDomainsSection.title",[KB]:"Verified domains"}),p=n()(f.FormattedMessage,{id:"identityAndProvisioning.emailDomainsSection.byline",[KB]:"Verify ownership of an email domain to access advanced security features including single-sign on."}),g=[...(0,qi.VK)((()=>i.state[WB].map(OB.f4)),[i]),...(0,qi.VK)((()=>i.state.domainVerifications.filter((e=>!i.state[WB].includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(OB.UV)),[i])],h=(0,d.useCallback)((async()=>{await dF({environment:r,spaceId:t.id,store:i})}),[r,t,i]),{resetInitialClaimableSpaces:y}=(0,d.useContext)(yF),b=(0,d.useCallback)((async e=>{switch(e.type){case"verified":return dB({onRequest:()=>T.setSamlConfig(r,{spaceId:t.id,removedEmailDomains:[e.domain]}),onSuccess:async()=>{await h(),y()}});case"unverified":case"invalid":return dB({onRequest:()=>T.deleteDomainVerificationCode(r,{id:e.id}),onSuccess:()=>h()})}}),[r,t,h,y]),S=(0,d.useCallback)((()=>dB({onRequest:()=>T.setSamlConfig(r,{spaceId:t.id}),onSuccess:()=>h()})),[r,h,t]),w=(0,d.useCallback)((async()=>{await h(),await s()}),[s,h]);return o?n()(TB,{title:u,byline:p,targetTier:"business"}):n()(OB.ZP,{[GB]:a,domains:g,onRemoveDomain:b,domainVerificationStore:l,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:w,onClickAddDomain:S,renderOverrideAddDomainButton:e=>n()("div",{style:c.flex},void 0,n()("div",{},void 0,n()(Yi.Z,{smallMarginBottom:!0,style:{[VB]:v.Z[VB].medium}},void 0,u),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{[UB]:4}},void 0,p)),n()("div",{},void 0,n()(Io.Z,{isBlue:!0,style:c[zB],icon:e=>m.Z.plus({...e,...c.plusIcon}),[GB]:a,onClick:e},void 0,n()(f.FormattedMessage,{[KB]:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"}))))})}const qB=i(85).D7I,jB=i(85).Xls,QB=(i(85).pdy,i(85).jtP,i(85).g4H),JB=i(85).cjE,$B=i(85).dLQ,YB=i(85).wNq,XB=(i(85).Te4,i(85).nx5),eD=i(85).hzw,tD=i(85).pkR;function iD(e){let{domainSettingsStore:t,samlConfigStore:i,[tD]:o,promptUpgrade:a,verifiedDomains:r,tooltip:l,saveWorkspaceCreationSetting:c}=e;window.__c={n:"WorkspaceCreation"};const u=(0,Hi.O7)(),m=(0,ji.yK)((()=>({[eD]:{margin:"18px 0"}})),[]),p=(0,qi.VK)((()=>{const e=i.state.id;if(!e)return;return new go.H2(u,{table:_w.bx,id:e}).getName()}),[u,i]),g=(0,d.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await c(),S.trackWorkspaceCreationSettingUpdate(u,{workspace_creation:e})}),[t,c,u]),h=(0,qi.VK)((()=>r.length>0?t.state.spaceCreation:"admins_only"),[t,r]),v=n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.title",[XB]:"Workspace creation"}),y=n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.byline",[XB]:"Customize who can create new workspaces."}),b=n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",[XB]:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:p}}),w=n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",[XB]:"Only workspace owners"});return a?n()("div",{style:m[eD]},void 0,n()(TB,{title:v,byline:y,targetTier:YB})):n()(ro.Z,{placement:ro.Z.Placement.Top,alignment:ro.Z.Alignment.End,render:e=>d[qB]("div",s()({},e,{style:m[eD]}),n()(NP.Z,{[$B]:u.device[$B],[tD]:o,title:v,[QB]:y,type:JB,[jB]:h,options:[{key:"unrestricted",label:n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.unrestricted.title",[XB]:"Anyone"}),[QB]:n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.unrestricted.caption",[XB]:"Any user can create new workspaces."})},{key:"admins_only",label:p?b:w,[QB]:n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",[XB]:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:g})),disableTooltip:!l,renderTooltip:()=>l})}const oD=i(85).nx5,nD=i(85).Wqi;function aD(e){let{[nD]:t,samlConfigStore:i,domainSettingsStore:o,isCurrentSpaceEnterprise:a}=e;window.__c={n:"DomainSection"};const{verifiedDomains:s,isSamlAvailable:r,saveWorkspaceCreationSetting:l,isSamlEditable:c,isDomainSettingsAvailable:u,canSaveWorkspaceCreationSetting:m,isClaimSpacesAvailable:p}=fB({[nD]:t,samlConfigStore:i,domainSettingsStore:o}),g=u&&c;return d.createElement(d.Fragment,null,n()(HB,{disabled:!c,promptUpgrade:!r,[nD]:t,samlConfigStore:i,saveWorkspaceCreationSetting:l}),n()(iD,{disabled:!g||!m,promptUpgrade:!a,verifiedDomains:s,samlConfigStore:i,domainSettingsStore:o,tooltip:0===s.length?n()(f.FormattedMessage,{id:"domainSettings.workspaceCreation.disabledTooltip",[oD]:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:l}),n()(RB,{promptUpgrade:!p}))}const sD=i(85).Xls,rD=i(85).cjE,lD=i(85).dLQ,dD=i(85).wNq,cD=i(85).nx5,uD=i(85).Bn$,mD=i(85).lR8,pD=i(85).hzw;function gD(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:o,disabled:a}=e;window.__c={n:"CustomSessionDurationSetting"};const s=(0,Hi.O7)(),r=(0,ji.yK)((()=>({[pD]:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,d.useMemo)((()=>Object.entries(Fw.nb).map((e=>{let[t,i]=e;return{key:t,label:n()(Ji.Z,{},void 0,(0,so.hH)(0,i))}}))),[]),c=(0,qi.VK)((()=>e_(t.state[uD][mD])??Fw.gl),[t]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",[cD]:"Session duration"}),m=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",[cD]:"Control how long your managed users can be logged in for before they must re-authenticate."});return n()("div",{style:r[pD]},void 0,o?n()(TB,{title:u,byline:m,targetTier:dD}):n()(NP.Z,{[lD]:s.device[lD],disabled:a,title:u,caption:m,type:rD,[sD]:c,options:l,onSelectOption:async function(e){const o=t.state[uD][mD]??Fw.nb[Fw.gl],a=Fw.nb[e];if(void 0===a)return;S.trackManagedUsersSessionDurationSelected(s);const{accept:r}=await w.confirmUserActionV2({message:n()(Ji.Z,{style:w.dialogStyles.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",[cD]:"Confirm change"})),description:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",[cD]:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,so.hH)(0,o),newDuration:(0,so.hH)(0,a),b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n()("b",{},void 0,t)}}}),n()("br",{}),n()("br",{}),n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",[cD]:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})),acceptLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",[cD]:"Confirm change"}),cancelLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",[cD]:"Cancel"})});r&&(t.setState({...t.state,[uD]:{...t.state[uD],[mD]:a}}),S.trackManagedUsersSessionDurationModalConfirmed(s,{new_session_duration_ms:a}),await i())}}))}const hD=i(85).Joh,vD=(i(85).DGI,i(85).PQp),fD=i(85).rJV,yD=i(85).D7I,bD=(i(85).IMf,i(85).ESK),SD=i(85).wNq,wD=i(85).opm,MD=(i(85).eg2,i(85).oWn,i(85).nx5),kD=i(85).FOQ,CD=i(85).GHg,ZD=i(85).hzw,TD=i(85).pkR;function PD(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:o,hasVerifiedDomains:a,[TD]:r}=e;window.__c={n:"ForcePasswordResetSetting"};const l=(0,Hi.O7)(),c=(0,ji.yK)((()=>({[ZD]:{margin:"18px 0"},[CD]:{display:"flex",flexDirection:"column",maxWidth:280},[kD]:{opacity:!r&&a?1:.5}})),[r,a]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",[MD]:"Reset passwords for all users"}),m=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",[MD]:"Force reset the passwords for all managed users and require them to a new one the next time they log in."});async function p(){S.trackManagedUsersResetPasswordsAllButtonClicked(l);const{accept:e}=await w.confirmUserActionV2({message:n()(Ji.Z,{style:w.dialogStyles.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",[MD]:"Reset passwords for your managed users?"})),description:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",[MD]:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:n()("br",{})}})),acceptLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",[MD]:"Reset passwords for all managed users"}),cancelLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",[MD]:"Cancel"})});if(!e)return;const o=i.state[wD];await T.resetPasswordsForManagedUsers(l,{spaceId:t,target:{type:wF.Domains,[wD]:o}}),S.trackManagedUsersResetPasswordsAllModalConfirmed(l,{email_domains:o})}return n()("div",{style:c[ZD]},void 0,o?n()(TB,{title:u,byline:m,targetTier:SD}):n()(Mx,{title:u,byline:m,settingItem:n()("div",{style:c[CD]},void 0,n()(ro.Z,{placement:ro.Z[bD].Top,alignment:ro.Z.Alignment.End,render:e=>d[yD](Io.Z,s()({isRed:!0,[TD]:r||!a,style:c[kD],onClick:p},e),n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",[MD]:"Reset passwords for all users"})),disableTooltip:a,[hD]:()=>n()(f.FormattedMessage,{id:fD,[MD]:vD})}))}))}const ID=i(85).Joh,FD=(i(85).DGI,i(85).PQp),_D=i(85).rJV,xD=i(85).D7I,AD=(i(85).IMf,i(85).ESK),BD=i(85).wNq,DD=i(85).opm,ED=i(85).nx5,LD=i(85).FOQ,RD=i(85).GHg,ND=i(85).hzw,OD=i(85).pkR;function UD(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:o,hasVerifiedDomains:a,[OD]:r}=e;window.__c={n:"LogoutUsersSetting"};const l=(0,Hi.O7)(),c=(0,ji.yK)((()=>({[ND]:{margin:"18px 0"},[RD]:{display:"flex",flexDirection:"column",maxWidth:280},[LD]:{opacity:!r&&a?1:.5}})),[r,a]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",[ED]:"Log out all users"}),m=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",[ED]:"Force log out all managed users and require them to re-authenticate."});async function p(){S.trackManagedUsersLogOutAllButtonClicked(l);const{accept:e}=await w.confirmUserActionV2({message:n()(Ji.Z,{style:w.dialogStyles.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",[ED]:"Log out all of your managed users?"})),description:n()(Ji.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",[ED]:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})),acceptLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",[ED]:"Log out all managed users"}),cancelLabel:n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",[ED]:"Cancel"})});if(!e)return;const o=i.state[DD];await T.logoutManagedUsers(l,{spaceId:t,target:{type:wF.Domains,[DD]:o}}),S.trackManagedUsersLogOutAllModalConfirmed(l,{email_domains:o})}return n()("div",{style:c[ND]},void 0,o?n()(TB,{title:u,byline:m,targetTier:BD}):n()(Mx,{title:u,byline:m,settingItem:n()("div",{style:c[RD]},void 0,n()(ro.Z,{placement:ro.Z[AD].Top,alignment:ro.Z.Alignment.End,render:e=>d[xD](Io.Z,s()({isRed:!0,[OD]:r||!a,style:c[LD],onClick:p},e),n()(f.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",[ED]:"Log out all users"})),disableTooltip:a,[ID]:()=>n()(f.FormattedMessage,{id:_D,[ED]:FD})}))}))}const VD=i(85).Joh,WD=(i(85).DGI,i(85).PQp),KD=i(85).rJV,zD=i(85).D7I,GD=i(85).ESK,HD=i(85).wNq,qD=i(85).FOQ,jD=i(85).GHg,QD=i(85).hzw,JD=(i(85).NR,i(85).r7A),$D=i(85).nx5,YD=i(85).pkR;function XD(e){let{promptUpgrade:t,hasVerifiedDomains:i,[YD]:o}=e;window.__c={n:"ManageUsersButton"};const{navigateTo:a}=(0,d.useContext)(yF),r=(0,Hi.O7)(),l=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.title",[$D]:"Managed users dashboard"}),c=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.message",[$D]:JD}),u=(0,ji.yK)((e=>({[QD]:{margin:"18px 0"},[jD]:{display:"flex",flexDirection:"column",maxWidth:280},[qD]:{opacity:!o&&i?1:.5}})),[i,o]);return n()("div",{style:u[QD]},void 0,t?n()(TB,{title:l,byline:c,targetTier:HD}):n()(Mx,{title:l,byline:c,settingItem:n()("div",{style:u[jD]},void 0,n()(ro.Z,{placement:ro.Z[GD].Top,alignment:ro.Z.Alignment.End,render:e=>d[zD](eo.Z,s()({[YD]:o||!i,isLarge:!0,style:u[qD],onClick:()=>{S.trackManagedUsersDashboardButtonClicked(r),a(vF)}},e),n()(f.FormattedMessage,{[$D]:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})),disableTooltip:i,[VD]:()=>n()(f.FormattedMessage,{id:KD,[$D]:WD})}))}))}const eE=i(85).wNq,tE=i(85).nx5,iE=i(85).Bn$,oE=i(85).c6E,nE=i(85).s6h,aE=i(85).hzw;function sE(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:o,hasVerifiedDomains:a,disabled:s}=e;window.__c={n:"PreventGrantingSupportAccessSetting"};const r=(0,Hi.O7)(),l=(0,ji.yK)((()=>({[aE]:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),d=(0,qi.VK)((()=>Z.default.checkGate(nE)),[]),c=(0,qi.VK)((()=>Boolean(t.state[iE][oE])),[t]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",[tE]:"Prevent managed users from granting support access"}),m=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",[tE]:"Control if managed users can enable support access on their accounts."});return n()("div",{style:l[aE]},void 0,o?n()(TB,{title:u,byline:m,targetTier:eE}):d?n()(Zx,{title:n()("div",{style:l.settingsTitle},void 0,u),byline:m,isOn:c,onToggle:async function(){const e=Boolean(!t.state[iE][oE]);t.setState({...t.state,[iE]:{...t.state[iE],[oE]:e}}),S.trackManagedUserSupportAccessToggled(r,{new_value:e}),await i()},disabled:s||!a}):null)}const rE=i(85).Xls,lE=(i(85).jtP,i(85).pdy,i(85).g4H),dE=(i(85).Te4,i(85).cjE),cE=i(85).dLQ,uE=i(85).wNq,mE=i(85).nx5,pE=i(85).Bn$,gE=i(85).$gG,hE=i(85).hzw;function vE(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:o,disabled:a}=e;window.__c={n:"PreventMembersJoiningExternalSpaces"};const s=(0,Hi.O7)(),r=(0,ji.yK)((()=>({[hE]:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,qi.VK)((()=>Boolean(t.state[pE][gE])),[t]),d=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",[mE]:"External workspace access"}),c=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",[mE]:"Control if managed users are able to join workspaces that not owned by your organization."});if(o)return n()("div",{style:r[hE]},void 0,n()(TB,{title:d,byline:c,targetTier:uE}));const u=l?"on":"off";return n()("div",{style:r[hE]},void 0,n()(NP.Z,{[cE]:s.device[cE],disabled:a,title:d,[lE]:c,type:dE,[rE]:u,options:[{key:"on",label:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",[mE]:"Only workspace owners"}),[lE]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",[mE]:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",[mE]:"Anyone"}),[lE]:n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",[mE]:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state[pE][gE]);t.setState({...t.state,[pE]:{...t.state[pE],[gE]:e}}),S.trackManagedUsersExternalSpaceAccessSet(s,{new_value:e}),await i()}}))}const fE=i(85).wNq,yE=i(85).nx5,bE=i(85).Bn$,SE=i(85)._M,wE=i(85).b6P,ME=i(85).hzw;function kE(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:o,hasVerifiedDomains:a,disabled:s}=e;window.__c={n:"PreventProfileEditsSetting"};const r=(0,Hi.O7)(),l=(0,ji.yK)((()=>({[ME]:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),d=(0,qi.VK)((()=>Z.default.checkGate(wE)),[]),c=(0,qi.VK)((()=>Boolean(t.state[bE][SE])),[t]),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",[yE]:"Allow managed users to change profile information"}),m=n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",[yE]:"Control if managed users can change their preferred name, email address, and profile photo."});return n()("div",{style:l[ME]},void 0,o?n()(TB,{title:u,byline:m,targetTier:fE}):d?n()(Zx,{title:n()("div",{style:l.settingsTitle},void 0,u),byline:m,isOn:!c,onToggle:async function(){const e=Boolean(!t.state[bE][SE]);t.setState({...t.state,[bE]:{...t.state[bE],[SE]:e}}),S.trackManagedUserSupportAccessToggled(r,{new_value:e}),await i()},disabled:s||!a}):null)}const CE=i(85).D7I,ZE=i(85).pkR,TE=i(85).TtP,PE=i(85).nx5,IE=i(85).s6h,FE=i(85).pxK,_E=i(85).b6P,xE=i(85).a8s,AE=i(85).unR,BE=i(85).Wqi;function DE(e){let{[BE]:t,samlConfigStore:i,domainSettingsStore:o}=e;window.__c={n:"ManagedUsersSection"};const{verifiedDomains:a,isDomainSettingsAvailable:s,isSamlEditable:r,saveEmailDomainSettings:l}=fB({[BE]:t,samlConfigStore:i,domainSettingsStore:o}),c=(0,ji.yK)((e=>({byline:{fontSize:14,fontWeight:v.Z.fontWeight.regular,color:e.mediumTextColor,paddingBottom:8}})),[]),u=s&&r,m=(0,qi.VK)((()=>t.id),[t]),p=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]),g=(0,qi.VK)((()=>Z.default[AE](xE)),[]),h=(0,qi.VK)((()=>Z.default[AE](_E)),[]),y=(0,qi.VK)((()=>Z.default[AE]("enable_custom_session_duration")),[]),b=(0,qi.VK)((()=>Z.default[AE]("enable_logout_managed_users")),[]),S=(0,qi.VK)((()=>Z.default[AE](FE)),[]),w=(0,qi.VK)((()=>Z.default[AE](IE)),[]);return d[CE](d.Fragment,null,n()("div",{},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:c.byline},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.managedUsers.byline",[PE]:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."}))),g?n()(XD,{promptUpgrade:!p,hasVerifiedDomains:a[TE]>0,[ZE]:!u}):null,h?d[CE](d.Fragment,null,n()(kE,{promptUpgrade:!p,hasVerifiedDomains:a[TE]>0,domainSettingsStore:o,saveEmailDomainSettings:l,[ZE]:!u}),n()(vE,{promptUpgrade:!p,domainSettingsStore:o,saveEmailDomainSettings:l,[ZE]:!u})):null,w?n()(sE,{promptUpgrade:!p,hasVerifiedDomains:a[TE]>0,domainSettingsStore:o,saveEmailDomainSettings:l,[ZE]:!u}):null,y?n()(gD,{promptUpgrade:!p,domainSettingsStore:o,saveEmailDomainSettings:l,[ZE]:!u}):null,b?n()(UD,{spaceId:m,promptUpgrade:!p,domainSettingsStore:o,hasVerifiedDomains:a[TE]>0,[ZE]:!u}):null,S?n()(PD,{spaceId:m,promptUpgrade:!p,domainSettingsStore:o,hasVerifiedDomains:a[TE]>0,[ZE]:!u}):null)}var EE=i(74523);const LE=i(85).Wp_;function RE(e){let{spaceStore:t,samlConfigStore:i}=e;const o=(0,Hi.O7)();return{updateSamlIdpUrl:(0,d.useCallback)((async e=>{let n=!1;return await dB({onRequest:()=>T.setSamlConfig(o,{spaceId:t.id,idpMetadataUrl:e}),onSuccess:()=>{n=!0,i[LE]({...i.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),n}),[i,t,o]),updateSamlIdpXml:(0,d.useCallback)((async e=>{let n=!1;return await dB({onRequest:()=>T.setSamlConfig(o,{spaceId:t.id,idpMetadata:e}),onSuccess:()=>{n=!0,i[LE]({...i.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),n}),[i,t,o]),updateStatus:(0,d.useCallback)((e=>dB({onRequest:()=>T.setSamlConfig(o,{spaceId:t.id,status:e}),onSuccess:()=>{i[LE]({...i.state,status:e})}})),[i,t,o]),updateCreateAccount:(0,d.useCallback)((e=>dB({onRequest:()=>T.setSamlConfig(o,{spaceId:t.id,createAccount:e}),onSuccess:()=>{i[LE]({...i.state,createAccount:e})}})),[i,t,o])}}const NE=i(85).wgE,OE=i(85).fCB,UE=i(85).nx5,VE=i(85).hzw,WE=i(85).Wqi;function KE(e){let{[WE]:t,samlConfigStore:i,disabled:o}=e;window.__c={n:"CreateAccountSetting"};const{updateCreateAccount:a}=RE({samlConfigStore:i,[WE]:t}),s=(0,Hi.O7)(),r=(0,ji.yK)((()=>({[VE]:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,qi.VK)((()=>i.state.createAccount),[i]);return n()("div",{style:r[VE]},void 0,n()(Zx,{title:n()("div",{style:r.settingsTitle},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.createAccount.title",[UE]:"Automatic account creation"}),n()(aa.Z,{icon:m.Z.help,onClick:()=>M[OE]({[NE]:s,url:(0,X.getLocalizedUrl)("guides.samlJIT")})})),byline:n()(f.FormattedMessage,{id:"identityAndProvisioning.createAccount.byline",[UE]:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:l,onToggle:async function(){await a(!i.state.createAccount)},disabled:o}))}const zE=i(85).Xls,GE=i(85).cjE,HE=i(85).dLQ,qE=i(85).QIj,jE=i(85).nx5,QE=i(85).hzw,JE=i(85).Wqi;function $E(e){let{[JE]:t,samlConfigStore:i,promptUpgrade:o,disabled:a}=e;window.__c={n:"SamlEnforceSetting"};const s=(0,Hi.O7)(),{updateStatus:r}=RE({samlConfigStore:i,[JE]:t}),l=(0,ji.yK)((()=>({[QE]:{margin:"18px 0"}})),[]),d=n()(f.FormattedMessage,{id:"identityAndProvisioning.accountAuth.title",[jE]:"Login method"}),c=n()(f.FormattedMessage,{id:"identityAndProvisioning.accountAuth.byline",[jE]:"Customize how users access SAML SSO-enabled workspaces."}),u=(0,qi.VK)((()=>"enforced"===i.state.status?"enforced":"not_enforced"),[i]);return n()("div",{style:l[QE]},void 0,o?n()(TB,{title:d,byline:c,targetTier:qE}):n()(NP.Z,{[HE]:s.device[HE],disabled:a,title:d,caption:c,type:GE,[zE]:u,options:[{key:"enforced",label:n()(f.FormattedMessage,{id:"identityAndProvisioning.accountAuth.option.enforced",[jE]:"Only SAML SSO"})},{key:"not_enforced",label:n()(f.FormattedMessage,{id:"identityAndProvisioning.accountAuth.option.notEnforced",[jE]:"Any method"})}],onSelectOption:async function(){"enforced"===i.state.status?await r("configured"):await r("enforced")}}))}var YE=i(5228);const XE=i(85).PG2,eL=(i(85).xPh,i(85).nx5),tL=i(85).BQ6,iL=i(85).uGP,oL=i(85).ewQ,nL=i(85).EJF,aL=i(85).g4H,sL=i(85).$bT,rL=i(85).c5o,lL=i(85).X_m,dL=i(85).UPJ,cL=i(85).H1U,uL=i(85).EMU,mL=i(85).sM5,pL=i(85).AEv,gL=i(85).jkI,hL=i(85).OM8,vL=i(85).ChN,fL=i(85).Exd,yL=i(85).Oc6,bL=i(85).aFd,SL=i(85).NF1,wL=i(85).Je3,ML=i(85).L_E,kL=i(85).D7I;function CL(e){let{isOpen:t,...i}=e;window.__c={n:"SamlConfigModal"};const o=(0,qi.VK)((()=>({active:i.samlConfigStore.state.useMetadataUrl?"url":"xml",url:i.samlConfigStore.state.idpMetadataUrl||"",xml:i.samlConfigStore.state.idpMetadata||""})),[i.samlConfigStore]);return n()(QI.Z,{open:t,onDismiss:i.onClose,render:()=>d[kL](ZL,s()({},i,{initialConfiguration:o}))})}function ZL(e){let{onSaveChanges:t,initialConfiguration:i,samlConfigStore:o,spaceStore:a,onClose:s}=e;window.__c={n:"SamlConfigSettings"};const[r,l]=(0,d.useState)(i),c=(0,Hi.O7)(),u=(0,ji.yK)((e=>({[ML]:{background:e[wL],width:450,padding:24,[SL]:3,transition:"all 500ms ease"},title:{[bL]:v.Z[yL](bw.SP).sans,[fL]:17,[vL]:500,[hL]:"24px",textAlign:gL},[pL]:{[bL]:v.Z[yL](bw.SP).sans,[fL]:14,[vL]:500,[hL]:"19px",margin:"20px 0 0"},copyButton:{[SL]:3,padding:"4px 8px",[mL]:uL,[cL]:gL,[dL]:gL,color:e.lightTextColor,[bL]:v.Z[yL](bw.SP).sans,[fL]:12,[vL]:500,[hL]:"14px"},copyIcon:{width:16,[lL]:16,marginRight:4,fill:e.mediumIconColor},url:{width:"100%",color:e.mediumTextColor,[bL]:v.Z[yL](bw.SP).sans,[fL]:14,[vL]:400,[hL]:"18px"},readonlyInput:{[mL]:uL,[cL]:gL,[dL]:gL,border:`1px solid ${e[rL]}`,[lL]:32,paddingLeft:12,paddingRight:12,[SL]:3},divider:{margin:"20px auto 20px"},radioContainer:{[mL]:uL,[dL]:"space-evenly",[sL]:"column",[lL]:60},radioOption:{[mL]:uL,[cL]:gL},[aL]:{margin:"4px 0 8px"},centeredCaption:{margin:"4px 24px 8px",textAlign:gL},[nL]:{[mL]:uL,[cL]:gL,[dL]:"flex-end",marginTop:24},buttonSpacing:{marginRight:8},feedback:{color:"dark"===e.mode?e[oL].orange[500]:e[oL].orange[400],[mL]:uL,[sL]:"row",[cL]:gL,[fL]:"14px",[lL]:20}})),[]),p=(0,d.useMemo)((()=>PL(r)),[r]),g=(0,qi.VK)((()=>"unconfigured"===o.state.status),[o]),h=(0,qi.VK)((()=>(0,YE.v9)(a.id,No.default.domainBaseUrl)),[a]),y=(0,d.useCallback)((()=>{$n.copyString({environment:c,stringValue:h,copiedMessage:$n.clipboardMessages[iL]})}),[c,h]),b=(0,d.useCallback)((()=>{l((e=>({...e,active:"url"})))}),[]),S=(0,d.useCallback)((()=>{l((e=>({...e,active:"xml"})))}),[]),w=(0,ji.yK)((e=>({input:{transition:"all 200ms ease-in-out",boxShadow:"none",margin:"12px 0",width:"100%",background:e[wL],border:`1px solid ${e[rL]}`}})),[]),M=(0,d.useMemo)((()=>"url"===r.active?{placeholder:"https://...",value:r.url,onChange:e=>{const t=e.target.value;l((e=>({...e,url:t})))},[tL]:{[lL]:32,...w.input}}:{placeholder:'<md:EntityDescriptor entityID="...',value:r.xml,onChange:e=>{const t=e.target.value;l((e=>({...e,xml:t})))},textarea:!0,[tL]:{[lL]:118,...w.input},inputStyle:{width:"100%",[lL]:"100%"}}),[r,w]),k=(0,d.useCallback)((()=>{t(r)}),[t,r]);return n()("div",{[tL]:u[ML]},void 0,n()(Ji.Z,{[tL]:u.title},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.title",[eL]:"SAML SSO Configuration"})),n()(Ji.Z,{isSmall:!0,[tL]:u.centeredCaption,isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.byline",[eL]:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>n()(RP.Z,{href:(0,X.getLocalizedUrl)("guides.samlSettings"),external:!0},void 0,e)}})),n()(Ji.Z,{[tL]:u[pL]},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.acsTitle",[eL]:"Assertion Consumer Service (ACS) URL"})),n()(Ji.Z,{isSmall:!0,[tL]:u[aL],isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.acsByline",[eL]:"Enter this in your IDP's SAML configuration."})),n()("div",{[tL]:u.readonlyInput},void 0,n()(Ji.Z,{[tL]:u.url},void 0,h),n()(nl.Z,{[XE]:y,[tL]:u.copyButton},void 0,m.Z.copy(u.copyIcon),n()(f.FormattedMessage,{id:"verifyDomainModal.editSamlConfig.copy",[eL]:"Copy"}))),n()(Ji.Z,{[tL]:u[pL]},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpTitle",[eL]:"Identity Provider Details"})),n()(Ji.Z,{isSmall:!0,[tL]:u[aL]},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpUrlByline",[eL]:"Enter the value provided by your IDP."})),n()("div",{[tL]:u.radioContainer},void 0,n()(Io.Z,{[tL]:u.radioOption,[XE]:b},void 0,n()(br.Z,{isSelected:"url"===r.active}),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpUrl",[eL]:"Identity Provider URL"}))),n()(Io.Z,{[tL]:u.radioOption,[XE]:S},void 0,n()(br.Z,{isSelected:"xml"===r.active}),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpXml",[eL]:"Identity Provider Metadata XML"})))),d[kL](bl.Z,M),n()("div",{[tL]:u.feedback},void 0,n()(TL,{validation:p})),n()("div",{[tL]:u[nL]},void 0,n()(eo.Z,{isLarge:!0,[tL]:u.buttonSpacing,[XE]:s},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.cancel",[eL]:"Cancel"})),n()(Po.Z,{isLarge:!0,disabled:"invalid"===p.type,[XE]:k},void 0,n()(f.FormattedMessage,g?{id:"identityAndProvisioning.editSamlConfig.enableSaml",[eL]:"Enable SAML"}:{id:"identityAndProvisioning.editSamlConfig.saveChanges",[eL]:"Save changes"}))))}function TL(e){let t,{validation:i}=e;if("valid"===i.type)return null;switch(i.reason){case"empty":t=n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.feedback.empty",[eL]:"You cannot leave this field blank"});break;case"signed_request":t=n()(f.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.feedback.signed_request",[eL]:"Requests cannot be signed"})}return d[kL](d.Fragment,null,m.Z.warning({[lL]:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,t))}function PL(e){return"url"===e.active?(0,YE.jY)(e.url):"xml"===e.active?(0,YE.a7)(e.xml):void(0,x.unreachable)(e.active)}const IL=i(85).nx5,FL=(i(85)._Ze,i(85).FEt),_L=i(85).pkR,xL=i(85).Wqi;function AL(e){let{[xL]:t,samlConfigStore:i,domainSettingsStore:o,isSamlStatusEnabled:a,promptUpgrade:s,[_L]:r}=e;window.__c={n:"SamlToggle"};const[l,c]=(0,d.useState)({isOpened:!1,[FL]:!1}),{updateStatus:u,updateSamlIdpUrl:m,updateSamlIdpXml:p}=RE({samlConfigStore:i,[xL]:t}),{verifiedDomains:g}=fB({[xL]:t,samlConfigStore:i,domainSettingsStore:o}),h=(0,ji.yK)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:r?"default":"pointer"},settingTitle:{fontWeight:v.Z.fontWeight.medium},settingByline:{marginBottom:4},configButton:{marginTop:14,opacity:r?.5:1}})),[r]),y=n()(f.FormattedMessage,{id:"identityAndProvisioning.samlToggle.title",[IL]:"Enable SAML SSO"}),b=n()(f.FormattedMessage,{id:"identityAndProvisioning.samlToggle.byline",[IL]:"Anyone using email addresses with a verified domain can log in via SAML SSO."});return s?n()(TB,{title:y,byline:b,targetTier:"business"}):d.createElement(d.Fragment,null,n()(Zx,{title:y,byline:b,isOn:a,[_L]:r,tooltipForDisabled:0===g.length?n()(f.FormattedMessage,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",[IL]:"Verify a domain to enable SAML."}):void 0,onToggle:function(){if(r)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:o}=i.state,n=e&&o||!e&&t;switch(i.state.status){case _L:n?u("configured"):c({isOpened:!0,[FL]:!0});break;case"unconfigured":c({isOpened:!0,[FL]:!0});break;case"configured":case"enforced":u(_L)}}}),n()(eo.Z,{[_L]:r,isLarge:!0,style:h.configButton,onClick:function(){r||c({isOpened:!0,[FL]:!1})}},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.samlToggle.configure",[IL]:"Edit SAML SSO configuration"})),n()(CL,{isOpen:l.isOpened,onClose:()=>c({isOpened:!1,[FL]:!1}),onSaveChanges:async function(e){if("invalid"===PL(e).type)return;let t=!1;switch(e.active){case"url":t=await m(e.url);break;case"xml":t=await p(e.xml)}t&&(l[FL]&&await u("configured"),c({isOpened:!1,[FL]:!1}))},[xL]:t,samlConfigStore:i}))}var BL=i(39634);const DL=i(85).L_E,EL=i(85).jkI,LL=i(85).g7N,RL=i(85).IF2,NL=i(85).Ww0,OL=i(85).P7l,UL=i(85).O9h,VL=i(85).nx5,WL=i(85).XZb,KL={id:"name",[WL]:n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",[VL]:"Name"}),[UL]:e=>n()(QL,{[OL]:e[OL],isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},zL={id:NL,[WL]:n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",[VL]:"Members"}),[UL]:e=>n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",[VL]:"{count} members",values:{count:(0,sT.QS)(e[OL])}})),widthData:{width:20},sortable:!0},GL={id:"createdAt",[WL]:n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",[VL]:"Created at"}),[UL]:e=>{const t=(0,sT.Ib)(e[OL]);return n()(Ji.Z,{},void 0,t&&(0,Dv.Yx)(t,"medium",bw.SP))},widthData:{width:20},sortable:!0},HL=[KL,zL,GL];function qL(e){let{spaceStore:t,spaces:i}=e;window.__c={n:"WorkspacesTable"};const[o,a]=(0,d.useState)({column:KL,[RL]:!1}),s=(0,qi.VK)((()=>i.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,[OL]:e})))),[i,t]),r=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:HL,theme:e,containerMarginTop:12})),[]);return n()(no.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:HL,rows:jL(s,o),sortState:o,onSortStateChanged:a,renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,style:{marginTop:15,[LL]:40,textAlign:EL}},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.empty",[VL]:"No linked workspaces."})),styles:r})}function jL(e,t){let{column:i,[RL]:o}=t,n=[];switch(i.id){case"name":n=l().sortBy(e,(e=>e[OL].name));break;case"createdAt":n=l().sortBy(e,(e=>(0,sT.Ib)(e[OL])));break;case NL:n=l().sortBy(e,(e=>(0,sT.QS)(e[OL])))}return o?n:n.reverse()}function QL(e){window.__c={n:"WorkspaceNameCell"};const t=(0,ji.yK)((()=>({[DL]:{display:"flex",justifyContent:EL,alignItems:EL,gap:4}})),[]);return n()(Ji.Z,{style:t[DL]},void 0,e[OL].name,e.isCurrentSpace?n()(Gp.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",[VL]:"Current"})):null)}const JL=i(85).nx5,$L=i(85).hzw,YL=i(85).Wqi;function XL(e){let{[YL]:t,spaceIds:i}=e;window.__c={n:"SecondaryWorkspaces"};const o=(0,Hi.O7)(),a=(0,ji.yK)((()=>({[$L]:{margin:"18px 0"}})),[]),s=(0,qi.VK)((()=>i.map((e=>SF.Z.getPublicSpaceData(o,e)||void 0)).filter(x.isDefined)),[i,o]),r=(0,d.useCallback)((()=>{BL.openSupportMessages({environment:o,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML Single Sign-on on workspace ${t.id}.`})}),[t,o]);return n()("div",{style:a[$L]},void 0,n()(Mx,{title:n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.title",[JL]:"Linked workspaces"}),byline:n()(f.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.message",[JL]:"This SAML SSO configuration applies to the following other workspaces. <contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>n()(RP.Z,{onClick:r},void 0,e)}}),settingItem:null}),n()(qL,{[YL]:t,spaces:s}))}const eR=i(85).pkR,tR=i(85).P3s,iR=i(85).g7N,oR=i(85).nx5,nR=i(85).Wqi;function aR(e){let{[nR]:t,samlConfigStore:i,domainSettingsStore:o}=e;window.__c={n:"SamlSection"};const{verifiedDomains:a,isSamlAvailable:s,isSamlEditable:r,isSamlStatusEnabled:l}=fB({[nR]:t,samlConfigStore:i,domainSettingsStore:o}),c=!r||!s||!l,u=(0,qi.VK)((()=>i.state.spaceIds),[i]);return d.createElement(d.Fragment,null,n()(EE.Z,{title:n()(f.FormattedMessage,{id:"identityAndProvisioning.samlToggle.learnMore",[oR]:"Learn about SAML SSO"}),href:(0,X.getLocalizedUrl)("guides.samlSettings"),style:{marginTop:18,[iR]:16},[tR]:"saml_settings"}),n()(AL,{[eR]:!r||0===a.length,promptUpgrade:!s,isSamlStatusEnabled:l,[nR]:t,samlConfigStore:i,domainSettingsStore:o}),n()($E,{[eR]:c,promptUpgrade:!s,[nR]:t,samlConfigStore:i}),n()(KE,{[eR]:c,[nR]:t,samlConfigStore:i}),n()(XL,{[nR]:t,spaceIds:u}))}const sR=i(85).D7I,rR=i(85).YDv,lR=i(85).PXg,dR=i(85).zXq,cR=i(85).Wqi,uR=i(85).wgE,mR=i(85).nx5,pR=(0,f.defineMessages)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",[mR]:"Failed to create a new SCIM token, please try again later."}});function gR(e){window.__c={n:"NewScimTokenButton"};const[t,i]=(0,d.useState)(!1),o=(0,Hi.O7)();const a=!t&&"Able"===e[dR],r=t||"Able"!==e[dR],l=n()(Io.Z,{isBlue:a,isLightGray:r,disabled:r,style:{position:"relative",marginLeft:"auto",[lR]:0},icon:e=>m.Z.plus({...e,width:14,height:14,fill:"inherit",[lR]:"6px"}),onClick:async function(){i(!0);try{const t=await async function(e){let{[uR]:t,[cR]:i,userStore:o}=e;const{botStore:n,transactionPromise:a}=oT.lz({[uR]:t,[cR]:i,name:"SCIM",userId:o.id,spaceRole:"editor",type:"scim"});return await a,n.id}({...e,[uR]:o});e.onNewScimToken(t)}catch(t){w.showErrorMessage(J.default.formatMessage(pR.failedCreatingNewScimToken))}i(!1)}},void 0,n()(f.FormattedMessage,{id:"scimTokenSettings.NewSCIMTokenButton.title",[mR]:"Add token"}));let c;switch(e[dR]){case"Able":return l;case"Undefined":c=n()(f.FormattedMessage,{[mR]:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":c=n()(f.FormattedMessage,{[mR]:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":c=n()(f.FormattedMessage,{[mR]:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,x.unreachable)(e[dR])}return n()(ro.Z,{textWrap:!1,renderTooltip:()=>c,placement:ro.Z.Placement.Right,render:e=>d[sR]("div",s()({},e,{style:{[rR]:"4px"}}),l)})}var hR=i(15070);const vR=i(85).qJ8;function fR(e){let{userId:t,[vR]:i}=e;return go.U6.createChildStore(i,{table:Ya.KJ,id:t})}var yR=i(62385);const bR=i(85).g7N,SR=i(85).qJ8,wR=i(85).IF2,MR=i(85).MLn,kR=i(85).OlC,CR=i(85).dBt,ZR=i(85).O9h,TR=i(85).XZb,PR=i(85).L97,IR=i(85).wgE,FR=i(85).G$8,_R=i(85).YDv,xR=i(85).Joh,AR=i(85).ccq,BR=i(85).BQ6,DR=i(85).lGm,ER=i(85).Hco,LR=i(85).ESK,RR=i(85).tBn,NR=i(85).D7I,OR=i(85).X_m,UR=i(85).ELX,VR=i(85).nx5,WR=i(85).hcx,KR=i(85).coU,zR=i(85).XCs,GR=i(85).jkI,HR=i(85).L_E,qR={[HR]:{display:"flex",alignItems:GR,fontSize:v.Z.fontSize.UIRegular.desktop,overflow:"hidden"},userAvatar:{[zR]:6},userName:{flexShrink:1,...v.Z.textOverflowStyle}};function jR(e,t){const i=Lm.kk.fromValue(ba.cZ,e);return i[KR]()===Ya.KJ&&i[WR]()===t}const QR={[UR]:{display:"flex",alignItems:GR,justifyContent:GR,borderRadius:3,[OR]:20,width:20,marginRight:1},menuItemButton:{minWidth:200}};function JR(e){let{onRevokeToken:t}=e;window.__c={n:"RevokeTokenButton"};const i=(0,ji.Fg)();return d[NR](d[RR],null,n()(ro.Z,{textWrap:!1,[xR]:()=>d[NR](d[RR],null,n()(f.FormattedMessage,{[VR]:"Revoke this token.",id:"revokeTokenButton.tooltip"})),placement:ro.Z[LR].Right,render:e=>n()(na.ZP,{popupType:na.Z4.Popup,[AR]:na.pO.Right,renderOrigin:t=>d[NR](nl.Z,s()({[DR]:j.scimTableRevokeButton,[BR]:QR[UR],mobileFeedback:!1},e,t),m.Z.trash({fill:i[ER],width:12,[OR]:12})),onClick:()=>{w.confirmUserAction({message:n()(f.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",[VR]:"Are you sure you want to revoke this token?"}),description:n()(f.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",[VR]:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you'll have to provide them with a new token."}),acceptLabel:n()(f.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",[VR]:"Revoke token"}),cancelLabel:n()(f.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.cancelButton.label",[VR]:"Cancel"})}).then((e=>e&&t()))},render:e=>(e.close(),d[NR](d[RR],null))})}))}const $R=()=>{window.__c={n:"OutdatedWarningIcon"};const e=(0,ji.Fg)();return n()(ro.Z,{textWrap:!1,[xR]:()=>d[NR](d[RR],null,n()(f.FormattedMessage,{[VR]:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"})),placement:ro.Z[LR].Right,render:t=>d[NR]("div",s()({},t,{[BR]:{[_R]:"4px"}}),m.Z.warning({fill:(0,Bv.fi)(FR,e).fill,width:12,[OR]:12}))})};function YR(e){let{clipboardTextFn:t}=e;window.__c={n:"RenderCopyToClipboardButton"};const i=(0,Hi.O7)();const o=(0,ji.Fg)(),a={[OR]:25,background:o[PR],color:o.regularTextColor,fontWeight:v.Z.fontWeight.regular,padding:"4px 6px",fontSize:11.5};return n()(yR.Z,{onClick:async function(){const e=await t();void 0!==e&&$n.copyString({[IR]:i,stringValue:e,copiedMessage:$n.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!i.device.isSafari||void 0})},[BR]:a},void 0,m.Z.copy({[OR]:16,width:16,[zR]:4}),n()(f.FormattedMessage,{[VR]:"Copy",id:"codeBlock.copyToClipboard.button"}))}const XR="•••••••••••";function eN(){return n()(ro.Z,{textWrap:!1,[xR]:()=>n()(f.FormattedMessage,{[VR]:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:ro.Z[LR].Right,render:e=>d[NR]("div",e,XR)})}function tN(e){let{row:t}=e;window.__c={n:"BotTokenCell"};const i=(0,Hi.O7)();return t.legacy?d[NR](d[RR],null,XR,n()($R,{})):t.ownedByCurrentUser?d[NR](d[RR],null,XR,n()(YR,{clipboardTextFn:()=>oT.VG({[IR]:i,botId:t.id})})):n()(eN,{})}const iN={id:"token",[TR]:n()(f.FormattedMessage,{id:"manageScimTokenTable.columnTitle.token",[VR]:"Token"}),[ZR]:e=>n()(tN,{row:e}),[CR]:{width:40},sortable:!1,[kR]:!0},oN=()=>{const e=qR;return n()(ro.Z,{textWrap:!1,[xR]:()=>n()(f.FormattedMessage,{[VR]:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:ro.Z[LR].Right,render:t=>d[NR]("div",t,n()("div",{[BR]:e[HR]},void 0,n()(es.Z,{[BR]:e.userAvatar,avatarShouldShowShadow:!0,size:20}),n()("div",{[BR]:e.userName},void 0,n()("i",{},void 0,"Deactivated user"))))})},nN={id:"addedBy",[TR]:n()(f.FormattedMessage,{id:"manageScimTokenTable.columnTitle.addedBy",[VR]:"Added by"}),[ZR]:e=>{if(e.legacy)return n()(oN,{});{const t=e.ownedByCurrentUser?n()(Ji.Z,{isSecondaryColor:!0,[BR]:{marginLeft:4,[MR]:GR}},void 0,n()(f.FormattedMessage,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",[VR]:"(you)"})):d[NR](d[RR],null);return d[NR](d[RR],null,n()(Os,{isClickable:!1,userStores:[e.ownerUserStore]}),t)}},[CR]:{width:40},sortable:!1,[kR]:!1},aN={id:"created",[TR]:n()(f.FormattedMessage,{id:"manageScimTokenTable.columnTitle.created",[VR]:"Created"}),[ZR]:e=>n()(uo,{includeTime:!0,dateTs:e.createdAt}),[CR]:{width:40},sortable:!0,[kR]:!1},sN=[iN,nN,aN,{id:"revokeToken",[TR]:void 0,[ZR]:e=>n()(JR,{onRevokeToken:()=>{e.onRevokeToken()}}),[CR]:{width:10},sortable:!1,[kR]:!0}];function rN(e,t){let{column:i,[wR]:o}=t;const n=null==i?void 0:i.id;let a=e=>e.id;switch(n){case"name":a=e=>e.name;break;case"created":a=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,x.unreachable)(n)}const s=l().sortBy(e,a);return o||s.reverse(),s}function lN(e){let{botStores:t,onRevokeToken:i}=e;window.__c={n:"ManageScimTokenTable"};const o=(0,qi.VK)((()=>B.default.state.currentUserStore),[]),a=(0,qi.VK)((()=>B.default.state[SR]),[]),s=(0,f.useIntl)(),r=(0,qi.VK)((()=>{if(!a)return[];const e=null==o?void 0:o.id;return l().compact(t.map((t=>{const o=t.getModel();if(!o||!(0,hR.xe)(o))return;const n={id:o.id,isClickable:!1,createdAt:o.getCreatedAt(),userLocale:s.locale,name:o.getName(),onRevokeToken:()=>{i(o.id)}},r=function(e){const t=Lm.kk.fromValue(ba.cZ,e);return"notion_user"===t[KR]()&&t[WR]()===Ya.s$.id}(o);return r?{...n,legacy:r}:{...n,legacy:r,ownedByCurrentUser:jR(o,e),ownerUserStore:"notion_user"===o[KR]()?fR({userId:o[WR](),[SR]:a}):void 0}})))}),[t,a,o,s.locale,i]),[c,u]=(0,d.useState)({column:aN,[wR]:!1}),m=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:sN,theme:e,containerMarginTop:0})),[]);return n()(no.D,{columnRenderInfo:sN,rows:rN(r,c),sortState:c,onSortStateChanged:u,onRowClick:()=>d[NR](d[RR],null),renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,[BR]:{marginTop:15,[bR]:40,[MR]:GR}},void 0,n()(f.FormattedMessage,{id:"manageSCIMTokenTable.noTokensFound.message",[VR]:"No active SCIM tokens."})),styles:m})}const dN=i(85).Ql2,cN=i(85).wgE;async function uN(e){let{[cN]:t,[dN]:i}=e;return(await oT.Yw({[cN]:t,table:_w.bx,id:i,type:"scim"})).botIds}const mN=function(e){let{botIds:t,setBotIds:i,spaceStore:o}=e;window.__c={n:"ScimTokenSettings"};const a=(0,Hi.O7)(),s=o.id;if((0,d.useEffect)((()=>{void 0===t&&uN({[cN]:a,[dN]:s}).then(i)}),[t,a,i,s]),t){const e=t.map((e=>go.t1.createChildStore(o,{table:ba.cZ,id:e,[dN]:s})));return n()(lN,{botStores:e,onRevokeToken:e=>{oT.P0({[cN]:a,botId:e,onSuccess:()=>{uN({[cN]:a,[dN]:s}).then(i)}})}})}return n()(ao.Z,{})},pN=i(85).hcx,gN=i(85).coU,hN=i(85).P3s,vN=i(85).g7N,fN=i(85).zXq,yN=i(85).wNq,bN=i(85).nx5,SN=i(85).wgE,wN=i(85).Wqi,MN=i(85).JJs;function kN(e){let{[MN]:t,[wN]:i,promptUpgrade:o}=e;window.__c={n:"ScimTokens"};const[a,s]=(0,d.useState)(void 0),r=(0,Hi.O7)(),l=(0,qi.VK)((()=>function(e){let{botIds:t,[wN]:i,[SN]:o}=e;if(void 0===t)return"Undefined";const n=t.map((e=>go.t1.createChildStore(i,{table:ba.cZ,id:e,spaceId:i.id}))).filter((e=>e.isDefined()));if(n.some((e=>e[gN]()===Ya.KJ&&e[pN]()===Ya.s$.id)))return"SpaceHasExistingToken";if(n.some((e=>e[gN]()===Ya.KJ&&e[pN]()===o.currentUser.id)))return"UserHasExistingToken";return"Able"}({botIds:a,[wN]:i,[SN]:r})),[a,r,i]),c=n()(f.FormattedMessage,{id:"identityAndProvisioning.scim.title",[bN]:"SCIM tokens"}),u=n()(f.FormattedMessage,{id:"identityAndProvisioning.scim.byline",[bN]:"Generate a token to configure SCIM."});return o?n()(TB,{title:c,byline:u,targetTier:yN}):d.createElement(d.Fragment,null,n()(Mx,{title:c,byline:u,settingItem:n()(gR,{onNewScimToken:e=>s((t=>[...t??[],e])),[wN]:i,[MN]:t,[fN]:l})}),n()(EE.Z,{title:n()(f.FormattedMessage,{id:"securitySAMLSettings.SCIMSection.helpButton.label",[bN]:"Learn about SCIM"}),style:{marginTop:18,[vN]:24},href:(0,X.getLocalizedUrl)("guides.scim"),[hN]:"scim_settings"}),n()(mN,{[wN]:i,[MN]:t,botIds:a,setBotIds:s}))}const CN=i(85).Wqi;function ZN(e){let{userStore:t,[CN]:i}=e;window.__c={n:"ScimSection"};const o=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]);return n()(kN,{promptUpgrade:!o,userStore:t,[CN]:i})}const TN=i(85).nx5,PN=i(85).ChN,IN=i(85).L_E;function FN(e){let{primarySpaceName:t}=e;window.__c={n:"SecondaryWorkspaceNotice"};const i=(0,ji.yK)((e=>({[IN]:{background:e.accentColors.blue[100],padding:"18px 24px",borderRadius:4,margin:"0 0 24px"}})),[]);return n()("div",{style:i[IN]},void 0,n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",[TN]:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>n()("span",{style:{[PN]:v.Z[PN].semibold}},void 0,e)}})),n()("br",{}),n()(Ji.Z,{isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",[TN]:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>n()("span",{style:{[PN]:v.Z[PN].semibold}},void 0,e)}})))}var _N=i(89101);function xN(e){let{children:t,gap:i}=e;window.__c={n:"Grid"};const o=(0,ji.yK)((e=>({root:{display:"grid",gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",gap:i}})),[i]);return n()("div",{style:o.root},void 0,t)}function AN(e){let{children:t,row:i,rowEnd:o,col:a,colEnd:s}=e;window.__c={n:"GridCell"};const r=(0,ji.yK)((e=>({cell:{gridRowStart:i,gridRowEnd:o,gridColumnStart:a,gridColumnEnd:s}})),[i,o,a,s]);return n()("div",{style:r.cell},void 0,t)}const BN=i(85).TPm,DN=i(85).gWC,EN=i(85).qcw,LN=i(85).se3,RN=i(85).wgE,NN=i(85).O87,ON=i(85).D7I,UN=i(85).j_T,VN=i(85).QNi,WN=i(85).Yzm,KN=i(85).nx5;function zN(e){let{spaceStore:t,isEnterprise:i}=e;window.__c={n:"SetupInformation"};const o=(0,f.useIntl)(),a=(0,qi.VK)((()=>t.id),[t]);return n()(xN,{gap:8},void 0,n()(AN,{row:1,col:1},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",[KN]:"Workspace ID"}))),n()(AN,{row:1,col:2},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(GN,{text:a,[VN]:o[WN]({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",[KN]:"Click to copy ID"})}))),i?d[ON](d.Fragment,null,n()(AN,{row:2,col:1},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",[KN]:"SAML SSO/SAML Entity ID"}))),n()(AN,{row:2,col:2},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(GN,{text:(0,YE.AE)(No.default[UN]),[VN]:o[WN]({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",[KN]:"Click to copy link"})}))),n()(AN,{row:3,col:1},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",[KN]:"SCIM base URL"}))),n()(AN,{row:3,col:2},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(GN,{text:No.default[UN]+_N._j.scimApiBasePath,[VN]:o[WN]({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",[KN]:"Click to copy link"})})))):null)}function GN(e){let{[VN]:t,text:i}=e;window.__c={n:"CopyableText"};const o=(0,Hi.O7)();return n()(ro.Z,{delayThreshold:0,renderTooltip:()=>t,render:e=>d[ON](RP.Z,s()({onClick:()=>{$n[NN]({[RN]:o,[LN]:i,[EN]:$n[BN][DN]})}},e),i)})}const HN=i(85).D7I,qN=i(85).nx5,jN=i(85).jkI,QN=i(85).qpZ,JN=i(85).Wqi,$N=i(85).JJs;function YN(e){let{[$N]:t,[JN]:i,samlConfigStore:o,domainSettingsStore:a}=e;window.__c={n:"SettingsPage"};const s=(0,Hi.O7)(),r=(0,qi.VK)((()=>Qi.Z.state.online),[]),{loadingSaml:l,loadedSaml:c,errorSaml:u}=(0,d.useContext)(yF),m=(0,qi.VK)((()=>function(e){let{[rB]:t,samlConfigStore:i,spaceStore:o}=e;const n=lB({[rB]:t,samlConfigStore:i}),a=!i.state.id||i.state.id===o.id;return n&&a}({environment:s,samlConfigStore:o,[JN]:i})),[s,o,i]),p=(0,qi.VK)((()=>o.state.id?SF.Z.getPublicSpaceData(s,o.state.id):void 0),[s,o]),g=(0,ji.yK)((()=>({[QN]:{marginTop:48}})),[]),h=(0,qi.VK)((()=>Z.default.checkGate("enable_managed_users_dashboard")||Z.default.checkGate("enable_set_email_domain_settings")),[]),v=(0,qi.VK)((()=>(0,te.isEnterpriseTier)()),[]);return r?l?n()($i.Z,{},void 0,n()(ao.Z,{style:{margin:"0 auto"}})):u?(w.showErrorMessage(u.message),null):c?n()($i.Z,{},void 0,!m&&p?n()(FN,{primarySpaceName:p.name}):null,n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.domain.title",[qN]:"Domain management"})),n()(aD,{[JN]:i,samlConfigStore:o,domainSettingsStore:a,isCurrentSpaceEnterprise:v}),h?d[HN](d.Fragment,null,n()(Yi.Z,{large:!0,divider:"full",style:g[QN]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.userManagement.title",[qN]:"User management"})),n()(DE,{[JN]:i,samlConfigStore:o,domainSettingsStore:a})):null,n()(Yi.Z,{large:!0,divider:"full",style:g[QN]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.saml.title",[qN]:"SAML Single sign-on (SSO)"})),n()(aR,{[JN]:i,samlConfigStore:o,domainSettingsStore:a}),n()(Yi.Z,{large:!0,divider:"full",style:g[QN]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.scim.title",[qN]:"SCIM provisioning"})),n()(ZN,{[$N]:t,[JN]:i}),n()(Yi.Z,{large:!0,divider:"full",style:g[QN]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.setupInfo.title",[qN]:"Setup information"})),n()(zN,{[JN]:i,isEnterprise:v})):null:n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:jN}},void 0,n()(f.FormattedMessage,{[qN]:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})))}function XN(e,t){return(void 0===e||!(0,g.XR)(e))&&(!(void 0===e||!(0,g.TZ)(e)||0!==t)||1===t)}var eO=i(88108),tO=i(47425),iO=i(63143),oO=i(27242),nO=i(73420);const aO=i(85).D7I,sO=i(85).nx5;i(85).b$W;function rO(){return n()(ro.Z,{renderTooltip:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",[sO]:"Workspace claim request is being processed."}),render:e=>d[aO](Ji.Z,e,n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",[sO]:"Pending"}))})}const lO=i(85).D7I,dO=i(85).nx5;i(85).Zf0;function cO(e){let{admin:t}=e;window.__c={n:"PendingSpaceTransferMessage"};const i=(0,f.useIntl)();return n()(ro.Z,{renderTooltip:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",[dO]:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,Xa.Nz)(i,t)}}),render:e=>d[lO](Ji.Z,e,n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",[dO]:"Pending"}))})}const uO=i(85).Mm1,mO=i(85)._V5,pO=i(85).g4H,gO=i(85).Lhq,hO=i(85).D7I,vO=i(85).L_E;let fO;function yO(e){window.__c={n:"SpaceActionsMenu"};const{space:t,mode:i}=e,o=(0,qi.qz)(void 0,ea.Z),a=(0,ji.yK)((()=>({[vO]:{minWidth:325}})),[]);return i===fO.Single?n()(SO,{action:e.action,space:t}):n()(na.ZP,{popupType:tn.kQ.Popup,style:a[vO],buttonPopupStore:o,renderOrigin:e=>d[hO](aa.Z,s()({icon:m.Z.dots},e)),render:()=>n()(bO,{space:t,[gO]:e[gO],popupStore:o})})}function bO(e){let{space:t,[gO]:i,popupStore:o}=e;const a={key:"workspace-actions",render:e=>d[hO](on.Z,e),items:i.map((e=>{const i=!!e.getDisabledState&&e.getDisabledState(t),o=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>n()(ro.Z,{render:o=>d[hO](c_.Z,s()({},t,o,{shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,[pO]:e[pO],style:{[mO]:8,[uO]:8,opacity:i?.5:1},disabled:i})),renderTooltip:()=>o,disableTooltip:!Boolean(o),placement:ro.Z.Placement.Left}),action:()=>e.onAction(t)}}))};return n()(Xo.Z,{menuType:jo.og.Popup},void 0,n()(en.Z,{type:en.i.Vertical,initialFocus:void 0,sections:[a],onAccept:()=>{o.setState({open:!1})}}))}function SO(e){window.__c={n:"SingleSpaceActionButton"};const{action:t,space:i}=e,o=(0,ji.yK)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),a=d.useCallback((()=>{t.onAction(i)}),[t,i]);return n()(Io.Z,{isSmall:!0,style:o.button,onClick:a},void 0,t.name)}!function(e){e.Single="single",e.Multi="multi"}(fO||(fO={}));var wO=i(58877);const MO=i(85).Yzm,kO=i(85).nx5,CO=(i(85).eTU,i(85).RJH),ZO=i(85).jkI,TO=i(85).UPJ,PO=i(85).L_E,IO=i(85).Ww0,FO=i(85).eAn;function _O(e){let{id:t,name:i,icon:o,[FO]:a,[IO]:s,highlightIconContainer:r}=e;window.__c={n:"SpaceSummary"};const l=(0,f.useIntl)(),d=o?{pointer:{table:_w.bx,id:t,spaceId:t},icon:o}:void 0,c=(0,ji.yK)((e=>({[PO]:{display:"flex",flexDirection:"row",[TO]:"flex-start",alignItems:ZO,padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},[CO]:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",[TO]:ZO,alignItems:ZO,background:r?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[r]);return n()("div",{style:c[PO]},void 0,n()("div",{style:c[CO]},void 0,n()(ho.Z,{disabled:!0,icon:d,isEmptyPage:!1,size:32,title:i,isLarge:!0,emojiSize:28,isRaw:!1})),n()("div",{style:c.summaryContainer},void 0,n()(Ji.Z,{style:c.name,showTooltipWhenTruncated:!0},void 0,i),n()(Ji.Z,{style:c.byline},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",[kO]:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{[FO]:xO(a,l),[IO]:s}}))))}function xO(e,t){switch(e){case"personal_free":case"team_free":case"free":return t[MO](wO.a.free);case"personal":return t[MO](wO.a.personal);case"plus":return t[MO](wO.a.plusPlan);case"business":return t[MO](wO.a.business);default:(0,x.unreachable)(e)}}i(85).pch;const AO=i(85).nx5,BO=i(85).fsm,DO=i(85).XNW,EO=i(85).jkI,LO=i(85).H1U,RO=i(85).UPJ,NO=i(85).$bT,OO=i(85).T04,UO=i(85).fCB,VO=i(85).BQ6,WO=i(85).D7I,KO=i(85).L_E;function zO(e){let{users:t,deletedUserEmailDomain:i}=e;window.__c={n:"SpaceUsers"};const o=(0,qi.qz)(void 0,ea.Z),a=(0,ji.yK)((()=>({[KO]:{minWidth:275}})),[]);return n()(na.ZP,{popupType:tn.kQ.Popup,[VO]:a[KO],buttonPopupStore:o,renderOrigin:e=>d[WO](qO,s()({users:t,deletedUserEmailDomain:i},e)),render:()=>n()(GO,{users:t,popupStore:o})})}function GO(e){let{users:t,popupStore:i}=e;window.__c={n:"WorkspaceUsersMenu"};const o=(0,Hi.O7)(),a={key:"workspace-users-menu",render:e=>d[WO](on.Z,e),items:t.map((e=>({key:e.id,render:t=>d[WO](HO,s()({user:e},t)),action:()=>M[UO]({environment:o,url:`mailto:${e[OO]}`})})))};return n()(Xo.Z,{menuType:jo.og.Popup},void 0,n()(en.Z,{type:en.i.Vertical,initialFocus:0,sections:[a],onAccept:()=>{i.setState({open:!1})}}))}function HO(e){let{user:t,...i}=e;window.__c={n:"EmailableUserSummary"};const o=(0,f.useIntl)(),a=(0,ji.yK)((e=>({[KO]:{display:"flex",[NO]:"row",[RO]:"flex-start",[LO]:EO,height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",[RO]:EO,[LO]:EO},copyContainer:{display:"flex",[RO]:EO,[LO]:EO,[DO]:"auto",opacity:.5},nameContainer:{[DO]:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,[BO]:300},[OO]:{fontSize:12,lineHeight:1.2,opacity:.5,[BO]:300}})),[]);return d[WO](Io.Z,s()({[VO]:a[KO]},i),n()("div",{[VO]:a.avatarContainer},void 0,n()(es.Z,{userValue:t,size:24})),n()("div",{[VO]:a.nameContainer},void 0,n()(Ji.Z,{[VO]:a.name},void 0,(0,Xa.Nz)(o,t)),n()(Ji.Z,{[VO]:a[OO]},void 0,t[OO])),n()("div",{[VO]:a.copyContainer},void 0,m.Z.mail({height:18,width:18})))}function qO(e){let{users:t,deletedUserEmailDomain:i,...o}=e;window.__c={n:"MultiUsersDisplay"};const a=(0,f.useIntl)(),r=(0,ji.yK)((e=>({[KO]:{display:"flex",[NO]:"row",[RO]:EO,[LO]:EO,[DO]:"-8px",[BO]:"100%"},empty:{fontSize:14,[BO]:150,opacity:.5},name:{fontSize:14,[BO]:150},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?n()(ro.Z,{render:e=>d[WO](Io.Z,s()({[VO]:r[KO],disabled:!0},o,e),n()(Ji.Z,{[VO]:r.empty},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.empty",[AO]:"Deleted user"}))),disableTooltip:!i,renderTooltip:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",[AO]:"Deleted user from {domain}",values:{domain:`@${i}`}})}):d[WO](Io.Z,s()({[VO]:r[KO]},o),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.name",[AO]:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Xa.Nz)(a,t[0]),remainingCount:t.length-1,gray:e=>n()(Ji.Z,{[VO]:r.plusMore},void 0,e)}})))}const jO=i(85).jkI,QO=i(85).MLn,JO=i(85).g7N,$O=i(85).nLZ,YO=i(85).Lhq,XO=i(85).xr9,eU=i(85).khi,tU=i(85).Mk5,iU=i(85).dBt,oU=i(85).Ww0,nU=i(85).eAn,aU=i(85).P7l,sU=i(85).O9h,rU=i(85).nx5,lU=i(85).XZb,dU=[{id:"spaces",[lU]:n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.name",[rU]:"Workspaces"}),[sU]:e=>n()(_O,{id:e[aU].id,name:e[aU].name,icon:e[aU].icon,[nU]:e[aU][nU],[oU]:e[aU][oU]}),[iU]:{width:60},[tU]:!1},{id:"admins",[lU]:n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.admins",[rU]:"Workspace owners"}),[sU]:e=>n()(zO,{users:e[aU].admins}),[iU]:{width:40},[tU]:!1},{id:"createdBy",[lU]:n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",[rU]:"Created by"}),[sU]:e=>e[aU].creator?n()(zO,{users:[e[aU].creator]}):n()(zO,{users:[],deletedUserEmailDomain:e[aU][eU]}),[iU]:{width:40},[tU]:!1},{id:"createdAt",[lU]:n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",[rU]:"Created date"}),[sU]:e=>n()(Ji.Z,{style:{opacity:.5}},void 0,(0,so.gs)(e[aU].createdAt)),[iU]:{width:30},[tU]:!1},{id:"action",[lU]:null,[sU]:e=>{if((0,g.DI)(e[aU][XO]))return n()(cO,{admin:e[aU].admins[0]});if((0,g.XR)(e[aU][XO]))return n()(rO,{});if((0,g.TZ)(e[aU][XO])){const t=e[YO].find((e=>"recover-space"===e.id));return t&&n()(yO,{[aU]:e[aU],action:t,mode:fO.Single})}return e[YO].length>0?n()(yO,{[aU]:e[aU],[YO]:e[YO].filter((e=>"recover-space"!==e.id)),mode:fO.Multi}):null},[iU]:{width:15},[tU]:!1}];function cU(e){let{claimableSpaces:t,spaceActions:i,loadMoreClaimableSpaces:o,loading:a}=e;window.__c={n:"ClaimableSpacesTable"};const s=t.map((e=>({id:e.id,isClickable:!1,[aU]:e,[YO]:i}))),r=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:dU,theme:e,containerMarginTop:0})),[]);return d.createElement(d.Fragment,null,n()(no.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:dU,rows:s,renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,style:{[$O]:15,[JO]:40,[QO]:jO}},void 0,!a&&n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.empty",[rU]:"No claimable workspaces."})),styles:r,getStyleForRow:function(e){if((0,g.DI)(e[aU][XO])||(0,g.XR)(e[aU][XO])||(0,g.TZ)(e[aU][XO]))return{opacity:.5}},onScrollBottom:o}),a&&n()(ao.Z,{style:{margin:"24px auto 24px"}}))}var uU=i(33728),mU=i(16354);i(85).uZb;const pU=i(85).khi,gU=i(85).lI2,hU=i(85).irb,vU=i(85).xiq,fU=i(85).cZW,yU=i(85).Yzm,bU=i(85).Joh,SU=i(85).D7I,wU=(i(85).MAt,i(85).sI1),MU=i(85).Ww0,kU=i(85).eAn,CU=i(85).wrq,ZU=i(85).BQ6,TU=i(85).PG2,PU=i(85).wDs,IU=i(85).oAr,FU=i(85).gGi,_U=i(85).dMt,xU=i(85).T4g,AU=i(85).nHL,BU=i(85).zDZ,DU=i(85).nLZ,EU=i(85).rOg,LU=i(85).Exd,RU=i(85).ChN,NU=i(85).Hco,OU=i(85).wuN,UU=i(85).m8s,VU=i(85).UPJ,WU=i(85).jkI,KU=i(85).H1U,zU=i(85).sM5,GU=i(85).BTL,HU=i(85).GID,qU=i(85).nx5,jU=(0,f.defineMessages)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",[qU]:"it@example.com"}}),QU=e=>{let{onDismiss:t,spaceQueuedForTransfer:i,[HU]:o}=e;window.__c={n:"PersonalTransferSpaceConfirmationModal"};const[a,s]=(0,d.useState)(),[r,l]=(0,d.useState)(!1),{setSpaceRequest:c}=(0,d.useContext)(yF),u=(0,Hi.O7)(),p=(0,ji.yK)((e=>({[GU]:{width:406,padding:"24px 20px 16px 20px",[zU]:"flex",flexDirection:"column",[KU]:WU,[VU]:WU},[UU]:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,[zU]:"flex",[VU]:WU,[KU]:WU},closeIcon:{width:14,height:14,fill:e[OU]},modalIcon:{fill:e[NU],height:24,width:24},title:{[RU]:v.Z[RU].medium,[LU]:16,[zU]:EU,[KU]:WU,[VU]:WU,[DU]:9},[BU]:{[RU]:v.Z[RU].regular,textAlign:WU,[LU]:13,lineHeight:"16px",[AU]:"-0.08",[DU]:9},[xU]:{position:"relative",borderRadius:6,border:`1px solid ${e[_U]}`,padding:"0 12px",boxSizing:"border-box",[DU]:30,width:FU,height:60,[VU]:WU,[zU]:"flex",[KU]:WU},checkContainer:{position:"absolute",right:12,[zU]:"flex",[KU]:WU,[VU]:WU,width:20,height:20},check:{fill:e[NU],height:16,width:16},[IU]:{[DU]:20},dividerInner:{borderBottomColor:e[_U]},contactEmailContainer:{position:"relative",width:FU,minHeight:56,[DU]:13},contactEmailTitle:{[RU]:v.Z[RU].medium,[LU]:14,marginBottom:8,[AU]:-.15,[zU]:EU,[KU]:WU},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:FU,[DU]:32},buttonCaption:{color:e[OU],[DU]:8,textAlign:WU,[LU]:12},[PU]:{margin:"8px auto 0",[VU]:WU,[RU]:v.Z[RU].medium,color:e.lightTextColor},buttonCaptionError:{color:e.errorText,[DU]:8,[LU]:13}})),[]),g=Boolean(i);return n()(QI.Z,{open:g,[wU]:p[GU],preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>d[SU](d.Fragment,null,n()("div",{[ZU]:p[UU]},void 0,n()(Io.Z,{isSmall:!0,[TU]:t,ignoreLocalHoverState:!0},void 0,m.Z.closeSmall(p.closeIcon))),n()("div",{},void 0,m.Z.personBadgeExclamationMark(p.modalIcon)),n()(Ji.Z,{[ZU]:p.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",[qU]:"Require account change"}),n()(mU.Z,{href:(0,X.getLocalizedUrl)(CU)},void 0,n()(aa.Z,{icon:m.Z.help}))),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[ZU]:p[BU]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",[qU]:"You’re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})),n()("div",{[ZU]:p[xU]},void 0,i?n()(_O,{id:i.id,name:i.name,icon:i.icon,[kU]:i[kU],[MU]:i[MU]}):null,n()("div",{[ZU]:p.checkContainer},void 0,m.Z.thinCheck(p.check))),n()(LP.Z,{size:FU,[wU]:p.dividerInner,[ZU]:p[IU]}),n()("div",{[ZU]:p.contactEmailContainer},void 0,n()(Ji.Z,{[ZU]:p.contactEmailTitle},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",[qU]:"Send request from"}),n()(ro.Z,{[bU]:()=>n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",[qU]:"The Workspace Owner can contact this email for inquiries"}),render:e=>d[SU]("span",e,m.Z.help(p.helpIcon))})),n()(bl.Z,{value:a,[fU]:J.default[yU](jU.emailPlaceholder),onChange:e=>{l(!1),s(e.target.value)}}),r&&n()(Ji.Z,{isSmall:!0,[ZU]:p.buttonCaptionError},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",[qU]:"Invalid email address"}))),n()(Po.Z,{isLarge:!0,[ZU]:p.primaryButton,[TU]:async()=>{const e=(0,uU.H3)(a);var s;if((0,uU.oH)(e)){if(i&&e){const a=await T.initiateWorkspaceTransfer(u,{requestingSpaceId:o,targetSpaceId:i.id,[vU]:e});if("failed"===a.type)w[hU](a.error.message);else{const o=a.data.workspaceTransfer;c(i.id,o),S.trackSpaceTransferRequested(u,{[vU]:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,[gU]:i[pU],[kU]:i[kU]}),t(),s=i.name,MF.oV({label:n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",[qU]:"Account change successfully requested for “{spaceName}“",values:{spaceName:s}})})}}}else l(!0)}},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",[qU]:"Confirm change"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[ZU]:p.buttonCaption},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",[qU]:"This cannot be undone"})),n()(Io.Z,{[ZU]:p[PU],[TU]:t},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",[qU]:"Cancel"})))})};const JU=i(85).D7I,$U=(i(85).uZb,i(85).zDV,i(85).eAn),YU=i(85).Gpy,XU=(i(85).WWB,i(85).Fpg),eV=i(85).wrq,tV=i(85).nx5,iV=i(85).BQ6,oV=i(85).PG2,nV=i(85).Ww0,aV=i(85).wDs,sV=i(85).T4g,rV=i(85).nLZ,lV=i(85).zDZ,dV=i(85).ChN,cV=i(85).wuN,uV=i(85).m8s,mV=i(85).UPJ,pV=i(85).jkI,gV=i(85).H1U,hV=i(85).BTL,vV=e=>{let{onDismiss:t,spaceQueuedForClaiming:i,requestingSpaceId:o}=e;window.__c={n:"SalesAssistedClaimSpaceConfirmationModal"};const a=(0,Hi.O7)(),{setSpaceRequest:s}=(0,d.useContext)(yF),r=(0,ji.yK)((e=>({[hV]:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",[gV]:pV,[mV]:pV},[uV]:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",[mV]:pV,[gV]:pV},closeIcon:{width:14,height:14,fill:e[cV]},title:{[dV]:v.Z[dV].medium,fontSize:16,marginBottom:8,display:"inline-flex",[gV]:pV,[mV]:pV},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},[lV]:{[dV]:v.Z[dV].regular,textAlign:pV,fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",[rV]:9},[sV]:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",[rV]:30,width:"100%",height:60,[mV]:pV,display:"flex",[gV]:pV},checkContainer:{position:"absolute",right:12,display:"flex",[gV]:pV,[mV]:pV,width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",[rV]:32},[aV]:{margin:"8px auto 0",[mV]:pV,[dV]:v.Z[dV].medium,color:e.lightTextColor},buttonCaption:{color:e[cV],[rV]:8,textAlign:pV,fontSize:12}})),[]),l=Boolean(i),c=async()=>{if(!i)return;const e=await T.requestClaimAndUpgrade(a,{requestingSpaceId:o,targetSpaceId:i.id});var r;"failed"===e.type?w.showError(e):(S.trackSpaceClaimUpgradeRequested(a,{currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,[nV]:i[nV]}),s(i.id,e.data.spaceRequest),r=i.name,MF.oV({label:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",[tV]:"Workspace claim successfully requested for “{spaceName}“",[YU]:{spaceName:r}})})),t()};return n()(QI.Z,{open:l,innerStyle:r[hV],preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>d[JU](d.Fragment,null,n()("div",{[iV]:r[uV]},void 0,n()(Io.Z,{isSmall:!0,[oV]:t},void 0,m.Z.closeSmall(r.closeIcon))),n()(Ji.Z,{[iV]:r.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",[tV]:"Request workspace claim"}),n()(mU.Z,{href:(0,X.getLocalizedUrl)(eV)},void 0,n()(aa.Z,{icon:m.Z.help}))),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[iV]:r[lV]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",[tV]:XU,[YU]:{currentWorkspaceName:i?i.name:"the workspace below"}})),n()("div",{[iV]:r[sV]},void 0,i?n()(_O,{id:i.id,name:i.name,icon:i.icon,[$U]:i[$U],[nV]:i[nV]}):null,n()("div",{[iV]:r.checkContainer},void 0,m.Z.thinCheck(r.check))),n()(Po.Z,{isLarge:!0,[iV]:r.primaryButton,[oV]:c},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",[tV]:"Send request"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[iV]:r.buttonCaption},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",[tV]:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",[YU]:{accountmanageremail:e=>n()(RP.Z,{href:"mailto:am@makenotion.com"},void 0,e)}})),n()(Io.Z,{[iV]:r[aV],[oV]:t},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",[tV]:"Cancel"})))})};const fV=i(85).D7I,yV=(i(85).uZb,i(85).zDV,i(85).Ww0),bV=i(85).eAn,SV=(i(85).WWB,i(85).Fpg),wV=i(85).wrq,MV=i(85).nx5,kV=i(85).BQ6,CV=i(85).PG2,ZV=i(85).wDs,TV=i(85).T4g,PV=i(85).zDZ,IV=i(85).nLZ,FV=i(85).ChN,_V=i(85).Hco,xV=i(85).m8s,AV=i(85).UPJ,BV=i(85).jkI,DV=i(85).H1U,EV=i(85).BTL,LV=e=>{let{onDismiss:t,spaceQueuedForClaiming:i}=e;window.__c={n:"SelfServeClaimSpaceConfirmationModal"};const o=(0,ji.yK)((e=>({[EV]:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",[DV]:BV,[AV]:BV},[xV]:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",[AV]:BV,[DV]:BV},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e[_V],height:24,width:24},title:{[FV]:v.Z[FV].medium,fontSize:16,display:"inline-flex",[DV]:BV,[AV]:BV,[IV]:9},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},[PV]:{[FV]:v.Z[FV].regular,textAlign:BV,fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",[IV]:9},[TV]:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",[IV]:30,width:"100%",height:60,[AV]:BV,display:"flex",[DV]:BV},checkContainer:{position:"absolute",right:12,display:"flex",[DV]:BV,[AV]:BV,width:20,height:20},check:{fill:e[_V],height:16,width:16},primaryButton:{width:"100%",[IV]:32},[ZV]:{margin:"8px auto 0",[AV]:BV,[FV]:v.Z[FV].medium,color:e.lightTextColor}})),[]),a=Boolean(i);return n()(QI.Z,{open:a,innerStyle:o[EV],preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>d[fV](d.Fragment,null,n()("div",{[kV]:o[xV]},void 0,n()(Io.Z,{isSmall:!0,[CV]:t,ignoreLocalHoverState:!0},void 0,m.Z.closeSmall(o.closeIcon))),n()("div",{},void 0,m.Z.arrowUpCircled(o.modalIcon)),n()(Ji.Z,{[kV]:o.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",[MV]:"Claim workspace"}),n()(mU.Z,{href:(0,X.getLocalizedUrl)(wV)},void 0,n()(aa.Z,{icon:m.Z.help}))),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[kV]:o[PV]},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",[MV]:SV,values:{currentWorkspaceName:i?i.name:"the workspace below"}})),n()("div",{[kV]:o[TV]},void 0,i?n()(_O,{id:i.id,name:i.name,icon:i.icon,[bV]:i[bV],[yV]:i[yV]}):null,n()("div",{[kV]:o.checkContainer},void 0,m.Z.thinCheck(o.check))),n()(Po.Z,{isLarge:!0,[kV]:o.primaryButton,[CV]:()=>{i&&_.openSubscriptionUpgradeModalForClaimAndUpgrade(i)}},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",[MV]:"Review and pay"})),n()(Io.Z,{[kV]:o[ZV],[CV]:t},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",[MV]:"Cancel"})))})},RV=i(85).dMt,NV=i(85).wuN,OV=i(85).ewQ,UV=i(85).UPJ,VV=i(85).Joh,WV=i(85).nLZ,KV=i(85).jkI,zV=i(85).H1U,GV=i(85).rOg,HV=i(85).sM5,qV=i(85).nHL,jV=i(85).Exd,QV=i(85).ChN,JV=i(85).D7I,$V=(i(85).uZb,i(85).wDs),YV=i(85).ZWc,XV=i(85).gdQ,eW=i(85).bMc,tW=i(85).MQM,iW=i(85).Dd5,oW=i(85).cZW,nW=(i(85).MAt,i(85).Yzm),aW=i(85).sI1,sW=i(85).oAr,rW=i(85).Ww0,lW=i(85).T4g,dW=i(85).zDZ,cW=i(85).wrq,uW=i(85).BQ6,mW=i(85).PG2,pW=i(85).m8s,gW=i(85).BTL,hW=i(85).eAn,vW=i(85).T04,fW=i(85).GID,yW=i(85).nx5,bW=(0,f.defineMessages)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",[yW]:"it@example.com"}}),SW=e=>{let{onDismiss:t,spaceQueuedForDeletion:i,[fW]:o}=e;window.__c={n:"SpaceDeletionConfirmationModal"};const[a,s]=(0,d.useState)({[vW]:void 0,didError:!1}),[r,l]=(0,d.useState)(!1),[c,u]=(0,d.useState)(!1),{setSpaceRequest:p}=(0,d.useContext)(yF),g=(0,ji.yK)((e=>({[gW]:{width:406,padding:"24px 20px 16px 20px",[HV]:"flex",flexDirection:"column",[zV]:KV,[UV]:KV},[pW]:{position:"absolute",top:10,right:10,backgroundColor:e[OV].gray[75],borderRadius:"50%",height:22,width:22,[HV]:"flex",[UV]:KV,[zV]:KV},closeIcon:{width:14,height:14,fill:e[NV]},modalIcon:{fill:"dark"===e.mode?e[OV].red[700]:e[OV].red[500],height:24,width:24},title:{[QV]:v.Z[QV].medium,[jV]:16,[HV]:GV,[zV]:KV,[UV]:KV,[WV]:9},[dW]:{[QV]:v.Z[QV].regular,textAlign:KV,[jV]:13,lineHeight:"16px",[qV]:"-0.08px",[WV]:9},[lW]:{position:"relative",borderRadius:6,border:`1px solid ${e[RV]}`,padding:"0 12px",boxSizing:"border-box",[WV]:30,width:"100%",height:60,[UV]:KV,[HV]:"flex",[zV]:KV},checkContainer:{position:"absolute",right:12,[HV]:"flex",[zV]:KV,[UV]:KV,width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{[HV]:GV,[WV]:8,[zV]:KV},[YV]:{color:"dark"===e.mode?e[OV].gray[400]:e[OV].gray[200],marginRight:8},primaryButton:{width:"100%",[WV]:32,background:"dark"===e.mode?e[OV].red[700]:e[OV].red[500],[UV]:KV,[QV]:v.Z[QV].medium,color:Bv.ZP.white},[eW]:{background:"dark"===e.mode?(0,Bv._j)(e[OV].red[700],.3):(0,Bv._j)(e[OV].red[500],.3)},[$V]:{margin:"8px auto 0",[UV]:KV,[QV]:v.Z[QV].medium,color:e.lightTextColor},checkboxCaption:{color:e[NV],textAlign:KV,[jV]:12},[sW]:{[WV]:18},divider:{borderBottomColor:e[RV]}})),[]),h=(0,Hi.O7)(),y=(0,d.useCallback)((()=>{s({[vW]:void 0,didError:!1}),l(!1),u(!1),t()}),[t]),b=(0,d.useCallback)((e=>{s({didError:!1,[vW]:e.target.value})}),[]),M=(0,d.useCallback)((()=>l((e=>!e))),[]),k=(0,d.useCallback)((async()=>{const e=(0,uU.H3)(a[vW]);if(!(0,uU.oH)(e))return void s({...a,didError:!0});if(!i)return;u(!0);const t=await T.deleteSpaceForDomain(h,{requestingSpaceId:o,targetSpaceId:i.id,contactEmail:e});if("failed"===t.type)u(!1),w.showErrorMessage(t.error.message);else{const o=t.data.spaceDeletion;p(i.id,o),S.trackSpaceClaimDeletionStarted(h,{contactEmail:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,targetSubscriptionTier:i[hW]}),y(),r=i.name,MF.oV({label:n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",[yW]:"Successfully deleted “{spaceName}“",values:{spaceName:r}})})}var r}),[y,a,o,h,p,i]),C=Boolean(i);return n()(QI.Z,{open:C,[aW]:g[gW],preventHideChildrenWhileOpening:!0,onDismiss:y,render:()=>d[JV](d.Fragment,null,n()("div",{[uW]:g[pW]},void 0,n()(Io.Z,{isSmall:!0,[mW]:y,ignoreLocalHoverState:!0},void 0,m.Z.closeSmall(g.closeIcon))),n()("div",{},void 0,m.Z.trash(g.modalIcon)),n()(Ji.Z,{[uW]:g.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",[yW]:"Delete workspace"}),n()(mU.Z,{href:(0,X.getLocalizedUrl)(cW)},void 0,n()(aa.Z,{icon:m.Z.help}))),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[uW]:g[dW]},void 0,i?n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",[yW]:"You’re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:i.name}}):void 0),n()("div",{[uW]:g[lW]},void 0,i?n()(_O,{id:i.id,name:i.name,icon:i.icon,[hW]:i[hW],[rW]:i[rW]}):void 0,n()("div",{[uW]:g.checkContainer},void 0,m.Z.thinCheck(g.check))),n()(LP.Z,{size:0,[uW]:g[sW],[aW]:g.divider}),n()(wW,{value:a[vW],[oW]:J.default[nW](bW.emailPlaceholder),[iW]:b,labelMessage:n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",[yW]:"Contact email"}),helpMessage:n()(f.FormattedMessage,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",[yW]:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),[tW]:a.didError?n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",[yW]:"Invalid email address"}):void 0}),n()(Io.Z,{disabled:!r||!a[vW]||c,disabledFeedback:!0,isLarge:!0,[uW]:g.primaryButton,[XV]:g[eW],[mW]:k},void 0,c?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",[yW]:"Delete workspace"})),n()("div",{[uW]:g.checkboxContainer},void 0,n()(Yo.Z,{[uW]:g[YV],size:14,checked:r,[mW]:M}),n()(Ji.Z,{isSmall:!0,[uW]:g.checkboxCaption},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",[yW]:"I'm sure I want to delete this workspace"}))),n()(Io.Z,{[uW]:g[$V],[mW]:y},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",[yW]:"Cancel"})))})};function wW(e){window.__c={n:"EmailInput"};const t=(0,ji.yK)((e=>({emailInputTitle:{[QV]:v.Z[QV].medium,[jV]:14,marginBottom:8,[qV]:-.15,[HV]:GV,[zV]:KV},emailContainer:{position:"relative",width:"100%",minHeight:56,[WV]:13},inputCaptionError:{color:e.errorText,[WV]:8,[jV]:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return n()("div",{[uW]:t.emailContainer},void 0,n()(Ji.Z,{[uW]:t.emailInputTitle},void 0,e.labelMessage,e.helpMessage&&n()(ro.Z,{[VV]:()=>e.helpMessage,render:e=>d[JV]("span",e,m.Z.help(t.helpIcon))})),n()(bl.Z,{value:e.value,[oW]:e[oW],[iW]:e[iW]}),e[tW]&&n()(Ji.Z,{isSmall:!0,[uW]:t.inputCaptionError},void 0,e[tW]))}const MW=i(85).dMt,kW=i(85).nLZ,CW=i(85).ChN,ZW=i(85).Hco,TW=i(85).UPJ,PW=i(85).jkI,IW=i(85).H1U,FW=i(85).D7I,_W=i(85).nx5,xW=(i(85).uZb,i(85).wDs),AW=i(85).sI1,BW=i(85).oAr,DW=i(85).Ww0,EW=i(85).eAn,LW=i(85).T4g,RW=i(85).zDZ,NW=i(85).wrq,OW=i(85).BQ6,UW=i(85).PG2,VW=i(85).m8s,WW=i(85).BTL,KW=i(85)._kV,zW=e=>{let{onDismiss:t,onAccept:i,spaceQueued:o,[KW]:a,divider:s,modalIcon:r,title:l,acceptMessage:c,isLoading:u}=e;window.__c={n:"ClaimableSpaceConfirmationModal"};const p=(0,ji.yK)((e=>({[WW]:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",[IW]:PW,[TW]:PW},[VW]:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",[TW]:PW,[IW]:PW},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{height:24,width:24,fill:e[ZW]},title:{[CW]:v.Z[CW].medium,fontSize:16,display:"inline-flex",[IW]:PW,[TW]:PW,[kW]:9},[RW]:{[CW]:v.Z[CW].regular,textAlign:PW,fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",[kW]:9},[LW]:{position:"relative",borderRadius:6,border:`1px solid ${e[MW]}`,padding:"0 12px",boxSizing:"border-box",[kW]:30,width:"100%",height:60,[TW]:PW,display:"flex",[IW]:PW},checkContainer:{position:"absolute",right:12,display:"flex",[IW]:PW,[TW]:PW,width:20,height:20},check:{fill:e[ZW],height:16,width:16},primaryButton:{width:"100%",[kW]:32,[TW]:PW,[CW]:v.Z[CW].medium},[xW]:{margin:"8px auto 0",width:"100%",[TW]:PW,[CW]:v.Z[CW].medium,color:e.lightTextColor},[BW]:{[kW]:18},divider:{borderBottomColor:e[MW]}})),[]),g=Boolean(o);return n()(QI.Z,{open:g,[AW]:p[WW],preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>d[FW](d.Fragment,null,n()("div",{[OW]:p[VW]},void 0,n()(Io.Z,{isSmall:!0,[UW]:t,ignoreLocalHoverState:!0},void 0,m.Z.closeSmall(p.closeIcon))),r&&n()("div",{},void 0,r(p.modalIcon)),n()(Ji.Z,{[OW]:p.title},void 0,l,n()(mU.Z,{href:(0,X.getLocalizedUrl)(NW)},void 0,n()(aa.Z,{icon:m.Z.help}))),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[OW]:p[RW]},void 0,a),n()("div",{[OW]:p[LW]},void 0,o?n()(_O,{id:o.id,name:o.name,icon:o.icon,[EW]:o[EW],[DW]:o[DW]}):void 0,n()("div",{[OW]:p.checkContainer},void 0,m.Z.thinCheck(p.check))),s&&n()(LP.Z,{size:0,[OW]:p[BW],[AW]:p.divider}),n()(Po.Z,{isLarge:!0,[OW]:p.primaryButton,[UW]:i,disabled:u},void 0,u?n()(ao.Z,{}):c),n()(Io.Z,{[OW]:p[xW],[UW]:t},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",[_W]:"Cancel"})))})};const GW=i(85).nx5,HW=i(85).GID,qW=e=>{let{onDismiss:t,spaceQueuedForRecovery:i,[HW]:o}=e;window.__c={n:"SpaceRecoveryConfirmationModal"};const{setSpaceRequest:a}=(0,d.useContext)(yF),s=(0,Hi.O7)(),[r,l]=(0,d.useState)(!1),c=(0,d.useCallback)((()=>{l(!1),t()}),[t]),u=(0,d.useCallback)((async()=>{if(!o||!i)return;l(!0);const e=await T.cancelSpaceDeletionForDomain(s,{requestingSpaceId:o,targetSpaceId:i.id});if("failed"===e.type)return l(!1),void w.showErrorMessage(e.error.message);var t;a(i.id,void 0),S.trackSpaceClaimDeletionCanceled(s,{targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain}),c(),t=i.name,MF.oV({label:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",[GW]:"Successfully recovered “{spaceName}“",values:{spaceName:t}})})}),[a,o,s,i,c]);return n()(zW,{onDismiss:c,onAccept:u,spaceQueued:i,modalIcon:m.Z.showDeletedPages,title:n()(f.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",[GW]:"Recover workspace"}),descriptionMessage:i?n()(f.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",[GW]:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:i.name}}):void 0,acceptMessage:n()(f.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",[GW]:"Recover"}),isLoading:r,divider:!1})};const jW=i(85).GID,QW=i(85).wJk,JW=i(85).opm,$W=i(85).wgE,YW=(i(85).OFc,i(85).nZM,i(85).JDZ),XW=i(85).eAn,eK=i(85).eOx,tK=i(85).khi,iK=i(85).nx5,oK=i(85).xr9,nK=i(85).irb,aK=i(85).wuN,sK=i(85).ChN;let rK=!1;function lK(e){let{spaceStore:t}=e;window.__c={n:"WorkspacesPage"};const{claimableSpaces:i,domainVerifications:o,loadingSpaces:a,errorClaimableSpaces:s,errorVerifications:r,navigateTo:l,removeClaimableSpace:c,loadMoreClaimableSpaces:u,tab:p,setSelectedTab:g,verifiedDomains:h}=(0,d.useContext)(yF),y=(0,Hi.O7)(),b=(0,qi.VK)((()=>!oO.Z.state.open&&Boolean(oO.Z.state.succeeded)),[]),[S,M]=(0,d.useState)(),[k,C]=(0,d.useState)(),[Z,T]=(0,d.useState)(),[P,I]=(0,d.useState)(),F=(0,qi.VK)((()=>ee.isActiveSalesAssistedSubscription(Ki.default.state.data)),[]);function _(){M(void 0),C(void 0),T(void 0),I(void 0)}(0,d.useEffect)((()=>{b&&S&&(c(S.id),M(void 0),oO.Z.reset())}),[b,S,c,M]);const x=(0,ji.yK)((e=>({link:{fontSize:14,[sK]:400,color:e[aK],textDecoration:"none"},title:{marginTop:21,[sK]:v.Z[sK].semibold,fontSize:17},byline:{fontSize:14,[sK]:v.Z[sK].regular,color:e[aK],marginRight:"auto",paddingRight:20},count:{marginLeft:4,opacity:.5,[sK]:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if(s)return w[nK](s.message),null;if(r)return w[nK](r.message),null;const A=i.filter((e=>XN(e[oK],e.memberCount))),B=i.filter((e=>!XN(e[oK],e.memberCount))),D=[{id:"external-transfer",getIcon:e=>m.Z.arrowsDiverging({...e,height:14,width:14}),name:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",[iK]:"Require account change"}),caption:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",[iK]:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>C(e)},{id:"space-deletion",getIcon:e=>m.Z.trash({...e,height:14,width:14}),name:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",[iK]:"Delete workspace"}),caption:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",[iK]:"Owner will lose access to the workspace immediately."}),onAction:e=>T(e),getDisabledState:e=>{const{isEligible:t}=dK(o,e[tK]);return!t||e.isDelinquent||e[eK]||!(0,tO.QM)(e[XW])},getTooltip:e=>{const t=dK(o,e[tK]);return t.isEligible?!(0,tO.QM)(e[XW])||e.isDelinquent||e[eK]?n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",[iK]:"The workspace is ineligible for deletion."}):void 0:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",[iK]:YW,values:{numDays:t.daysUntilEligible,br:n()("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:n()(f.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",[iK]:"Recover"}),caption:void 0,onAction:e=>I(e)}],E=[{id:"claim-and-upgrade",getIcon:e=>m.Z.arrowUpCircled({...e,height:14,width:14}),name:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",[iK]:"Claim and upgrade"}),caption:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",[iK]:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>M(e),getDisabledState:e=>{const{isEligible:t}=dK(o,e[tK]);return!t||e.isDelinquent||e[eK]},getTooltip:e=>{const t=dK(o,e[tK]);return e.isDelinquent||e[eK]?n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",[iK]:"The workspace is ineligible for claiming."}):t.isEligible?void 0:n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",[iK]:YW,values:{numDays:t.daysUntilEligible,br:n()("br",{})}})}}];return n()($i.Z,{},void 0,n()(RP.Z,{style:x.link,onClick:()=>l(gF)},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",[iK]:"← Identity & Provisioning"})),n()(Yi.Z,{large:!0,style:x.title},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.title",[iK]:"Manage workspaces"})),n()(nO.X2,{},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:x.byline},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.byline",[iK]:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})),n()(eo.Z,{isLarge:!0,onClick:()=>{Xi.g({[$W]:y,data:{spaceId:t.id,[JW]:h}})}},void 0,n()(f.FormattedMessage,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",[iK]:"Export to CSV"}))),n()(OP.Z,{tabs:[n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",[iK]:"Single-member"},"single"),n()(f.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",[iK]:"Multi-member"},"multi")],selectedIndex:p,onChange:e=>g(e),style:x.tabBarMenu}),n()(QU,{[QW]:_,spaceQueuedForTransfer:k,[jW]:t.id}),p===fF.Single?n()(cU,{claimableSpaces:A,spaceActions:D,loadMoreClaimableSpaces:u,loading:a},"single"):n()(cU,{claimableSpaces:B,spaceActions:E,loadMoreClaimableSpaces:u,loading:a},"multi"),F?n()(vV,{[QW]:_,spaceQueuedForClaiming:S,requestingSpaceId:t.id}):n()(LV,{[QW]:_,spaceQueuedForClaiming:S}),n()(SW,{[QW]:_,spaceQueuedForDeletion:Z,[jW]:t.id}),n()(qW,{[QW]:_,spaceQueuedForRecovery:P,[jW]:t.id}))}function dK(e,t){if(rK)return{isEligible:!0};const i=e.find((e=>{let{domain:i}=e;return t===i}));if(!i||!i.verified_at)return{isEligible:!0};const o=(Date.now()-i.verified_at)/iO.DayMs;return o>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-o)}}["local","development","staging"].includes(No.default.env)&&(0,eO.exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];rK=e}));const cK=i(85).a8s,uK=i(85).Wqi,mK=i(85).JJs;function pK(e){let{[mK]:t,[uK]:i,samlConfigStore:o,domainSettingsStore:a}=e;window.__c={n:"PageRouter"};const{page:s}=(0,d.useContext)(yF),r=(0,qi.VK)((()=>Z.default.checkGate(cK)),[]);switch(s){case gF:return n()(YN,{[mK]:t,[uK]:i,samlConfigStore:o,domainSettingsStore:a});case hF:return n()(lK,{[uK]:i});case vF:return r?n()(sB,{[uK]:i,samlConfigStore:o}):n()(YN,{[mK]:t,[uK]:i,samlConfigStore:o,domainSettingsStore:a})}}const gK=i(85).Wqi,hK=i(85).JJs;const vK=function(e){let{[hK]:t,[gK]:i,samlConfigStore:o,domainSettingsStore:a}=e;return n()(bF,{[gK]:i,samlConfigStore:o,domainSettingsStore:a},void 0,n()(pK,{[hK]:t,[gK]:i,samlConfigStore:o,domainSettingsStore:a}))};var fK=i(22756),yK=i(1800),bK=(i(40902),i(99036),i(41432),i(42613),i(23482),i(89789),i(74446));i(6287),i(18844),i(70279);i(85).vk5,i(85).KTR,i(85).v8g,i(85).b58,i(85).wbK,i(85).urI,i(85).mFu,i(85).zkl;i(58129),i(70921),i(30842),i(39050),i(54368),i(88179),i(80926),i(98963),i(7470),i(60014),i(13493),i(75908),i(6359),i(7678),i(73409),i(60897),i(33709),i(44312),i(4986),i(52719),i(58912),i(73387),i(36077),i(97715),i(32161),i(82447),i(49953),i(14710),i(62643),i(57883),i(66726),i(30754),i(6946),i(25753),i(84683),i(38429),i(89488),i(65311),i(16427),i(70017),i(89470),i(49126),i(4137),i(80396),i(24836),i(86135),i(78929),i(84323),i(83200),i(67627),i(65963),i(14130),i(34406),i(42314),i(16663),i(19221),i(93646),i(63787),i(38952),i(40837),i(96740),i(55514),i(75990),i(57829),i(63188),i(56877),i(76413),i(47238),i(77858),i(37202),i(26195),i(60113),i(14718),i(14327),i(53412),i(65836),i(5505),i(66295),i(10354),i(19716),i(98897),i(63408),i(66079),i(58161),i(28182),i(35794),i(11045);i(85).di,i(85).Gm5;i(85).iuH;i(85).tJ4,i(85).yAR,i(85)._I,i(85).h$q,i(85).$6u,i(85).YlB,i(85).zHB,i(85).bjh,i(85).k14,i(85).a7S,i(85).L6j,i(85).yBg,i(85).SlN,i(85).Pr6,i(85).Xag,i(85).Wqm,i(85).IKY,i(85).QPh,i(85).p61,i(85).D_u,i(85).g0F,i(85).JAy,i(85).zuz,i(85).VUQ,i(85).oBE,i(85).nuv,i(85).zdI,i(85).Vbu,i(85).qRq,i(85).cMS,i(85).T04,i(85).mEm,i(85).EqT,i(85).FH8,i(85).ECL,i(85).cfO,i(85).EdP,i(85).$Xx,i(85).d6L,i(85).a3C,i(85).TtP,i(85).BpB,i(85).tl4,i(85).Ql2,i(85).nqP,i(85).yL5,i(85).FL5,i(85).di,i(85).yn7,i(85).A6W,i(85).Gm5,i(85).$i4,i(85).ydp,i(85).MCc,i(85).EjX,i(85).YsR,i(85).EuB,i(85).ZA4,i(85).nj3,i(85).TTZ,i(85).o8I,i(85).LFy,i(85).F7X,i(85).c9r,i(85).zkl,i(85).mFu,i(85).C_l,i(85).sQh,i(85).JIU,i(85).int,i(85).phx,i(85).JZr,i(85).uOz,i(85).Gp5;i(85).NGX,i(85)._BS,i(85).tQz,i(85).TUD,i(85).J7v,i(85).CRw,i(85).FYR,i(85).C7g,i(85).RWY;i(85).Q2W,i(85).uAi,i(85).Q4h,i(85).oqh,i(85).uZz,i(85).A0E,i(85).dqy,i(85).$i4,i(85).tJ4,i(85).KTR,i(85).y7i,i(85).wvW,i(85).lOk,i(85).YNZ,i(85).G$x,i(85).kJi,i(85).AM1,i(85).rvt,i(85).CNJ,i(85).kT5,i(85).S8A,i(85).dz9,i(85).BfE,i(85).XlZ,i(85).gRm,i(85).J7k,i(85).zd9,i(85).F76,i(85).EqT,i(85).mZz,i(85).kD8,i(85).HEy,i(85).Opu,i(85).dFg,i(85).gq0,i(85).t3q,i(85).Bn$,i(85).AL1,i(85).VwS,i(85).ij9,i(85).BSs,i(85).ffk,i(85).IcT,i(85).urI,i(85).Cq3,i(85).TUz,i(85).MDw,i(85).qLY,i(85).y4s,i(85)._9S,i(85).tX7,i(85).xrg,i(85).QCw,i(85).ANx,i(85).WD5,i(85).MsU,i(85).gAh,i(85).yQL,i(85).NN6,i(85).r5K,i(85).Qfm,i(85).zDZ,i(85).Vhk,i(85)._XU,i(85).LOo,i(85).yCe,i(85).z4_,i(85).wqg,i(85).Gpy,i(85).jtM,i(85).lVM,i(85).Zij,i(85).BXb,i(85).gnz,i(85).plY,i(85).jhP,i(85).$KQ,i(85).biZ,i(85).QOi,i(85).F7X,i(85).FyM,i(85).QvU,i(85).rpv,i(85).Dtz,i(85).$Xx,i(85).byI,i(85).jUc,i(85).PwI,i(85).N20,i(85).rIQ,i(85).Ql2,i(85).qYR,i(85).gxE,i(85).lw5,i(85).xw1,i(85).eEu,i(85).d6L,i(85).ASm,i(85).YOW,i(85).gQe,i(85).oNU,i(85).FB9,i(85).zkl,i(85).sQh,i(85).fol,i(85).nC_,i(85).iD5,i(85).nSN,i(85).oOV,i(85).Wku,i(85).VUQ,i(85).cbT,i(85).nqP,i(85).phx,i(85).n87,i(85).MWD,i(85).C_l,i(85).JIU,i(85).iuH,i(85).mFu,i(85).Gm5,i(85).cs4,i(85).HZQ,i(85).FH8,i(85).EdP,i(85).a3C,i(85).Gp5,i(85).TtP;i(38297),i(606),i(98459);i(85).qfz,i(85)._pP,i(85).eS7,i(85).Zai,i(85).jtD,i(85).Syp,i(85).oCw,i(85).DTp,i(85).s4W,i(85).eVi,i(85).cAK,i(85).oDb,i(85).MsQ,i(85).fbf,i(85).cJ_,i(85).vWp,i(85).APj,i(85).g2_,i(85).wYB,i(85).pKs,i(85).OKM,i(85)._4y,i(85).xG0,i(85).L9s,i(85).dEG,i(85).EmG;const SK=i(85).cs4,wK=(i(85).SyH,i(85).F8E,i(85).JNw,i(85).VLH,i(85).oaY,i(85)._4v,i(85).ZwB,i(85).nr6,i(85).EFP,i(85).f8L,i(85).q_$,i(85).ZtH,i(85).lC,i(85).p_5,i(85).Kfr,i(85).UC9,i(85).SyN,i(85).wyy,i(85).tN6,i(85).Xml,i(85).aBA,i(85).OMc,i(85).MUO,i(85).wdd,i(85).WfF,i(85).x_4,i(85).ioe,i(85).QLQ,i(85).b0M,i(85).OBF,i(85).T9v,i(85).kKe,i(85).oym,i(85).N20,i(85).eC2,i(85).WM6,i(85).JET,i(85).ISA,i(85).VyV,i(85).xgF,i(85).Nf7,i(85).SuZ,i(85).fVq,i(85).toF,i(85).RLV,i(85).JeZ,i(85).d95,i(85).LCc,i(85).kBc,i(85).cJA,i(85).r20,i(85).QKv,i(85).T9w,i(85).Dy6,i(85).AfO,i(85).DMf,i(85).sbn,i(85).Ecr,i(85).MCc,i(85).ydp,i(85).lX9,i(85).ZA4,i(85).EuB,i(85).Bnk,i(85).EdP,i(85).cBH,i(85).Ql2,i(85).yn7,i(85).v8g,i(85).int,i(85).EjX,i(85).YsR,i(85).cMS,i(85).LFy,i(85).o8I,i(85).jxN,i(85).zkl,i(85).HA$,i(85).JZr,Rm.Ak.create());Date.now();bK.mF[SK](wK),bK.zF[SK](wK);const MK=Lm.om[SK](wK);var kK=i(41311),CK=i(30397),ZK=i(29551),TK=i(40235);const PK=i(85).Hww,IK=i(85).nrD,FK=i(85).rI1,_K=i(85).PXg,xK=i(85).sei,AK=i(85).Y$2,BK=i(85).Hco,DK=i(85).OtN,EK=i(85).Jkr,LK=i(85).H1U,RK=i(85).jkI,NK=i(85).UPJ,OK=i(85).GiO,UK=i(85).BQ6,VK=i(85).nLZ,WK=i(85).nx5,KK=i(85).D7I;const zK=function(){window.__c={n:"AsanaImportStepConfirmTab"};const e=(0,qi.VK)((()=>fK.Z.state),[]);return e.result?d[KK](d.Fragment,null,n()(Ji.Z,{isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.confirm.subtitle",[WK]:"The following data has been successfully imported."})),n()("div",{[UK]:{[VK]:32}},void 0,e.result.map((e=>n()(GK,{importStatus:e},e.asanaTeamId))))):d[KK](d.Fragment,null)};function GK(e){let{importStatus:t}=e;window.__c={n:"CollapsibleAsanaProjectsTable"};const i=(0,ji.Fg)(),[o,a]=(0,d.useState)(!1),s=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),r=(0,qi.VK)((()=>fK.Z.state.teamsAndProjects),[]),l=(0,qi.VK)((()=>B.default.state[OK]),[]),c=(0,qi.VK)((()=>{if(!l)return;const e=l.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:n()(zn.p,{disabled:!0,store:e})})));return s?(e||[]).concat({id:l.id,name:"Private",icon:n()("div",{[UK]:{display:"flex",[NK]:RK,[LK]:RK,[EK]:18,height:18,borderRadius:"0.25em",[DK]:Bv.FN.light.gray[75]}},void 0,m.Z.lockedFilled({color:i[BK],[EK]:12.5,height:12.5}))}):e}),[l,s,i]),{notionTeamspaceName:u,notionTeamspaceIcon:p}=(0,d.useMemo)((()=>{const e=null==c?void 0:c.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[c,t]),g=(0,d.useMemo)((()=>{const e=r.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[r,t]);return n()(ZK.gq,{[UK]:{[VK]:16}},void 0,n()(aa.Z,{ariaLabel:"collapse toggle",icon:m.Z.triangle,onClick:()=>a((e=>!e)),[UK]:{transform:o?"rotate(90deg)":"rotate(180deg)",[_K]:8,[VK]:4},iconStyle:{[EK]:8,height:8}}),n()(TK.Z,{tableStyle:{borderTop:0},cellStyle:{[FK]:"middle"},columns:[{key:"team",header:n()(ZK.gq,{[LK]:RK,gap:2},void 0,n()(Ji.Z,{isSmall:!0,[UK]:{[EK]:280,[IK]:PK}},void 0,g)),[UK]:{[EK]:300}},{key:"importedInto",header:n()(ZK.gq,{gap:4},void 0,n()(ZK.gq,{[UK]:{[LK]:RK,gap:4}},void 0,n()(Ji.Z,{isSmall:!0},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.importedInto",[WK]:"Imported into"})),m.Z.arrowRight({[EK]:12})),n()(ZK.gq,{[UK]:{[LK]:RK,gap:4}},void 0,p,u)),[UK]:{[EK]:300}}],rows:function(e){let{[AK]:i}=e;return i?[]:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[n()(ZK.gq,{gap:8,[LK]:RK},e.projectId,m.Z.circleCheckFilled({[EK]:12,color:Bv.FN.dark.green[600]}),n()(Ji.Z,{isMultiline:!0,[UK]:{wordWrap:xK,[EK]:300}},void 0,e.name)),n()(Ji.Z,{isSmall:!0},`${e.projectId}-tasks-count`,e.numberOfTasks,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.tasksHelperText",[WK]:" tasks"}))]})))}({[AK]:o})}))}var HK=i(41892);const qK=i(85).O__,jK=i(85).mFu,QK=i(85).nx5,JK=i(85).XNW,$K=i(85).BQ6,YK=i(85).e5W,XK=i(85).PXg,ez=i(85).g7N,tz=i(85).UPJ,iz=i(85).jkI,oz=i(85).H1U,nz=i(85).$bT,az=i(85).X_m,sz=i(85).bey;const rz=function(){var e;window.__c={n:"AsanaImportStepImportingDataFailedTab"};const t=(0,qi.VK)((()=>fK.Z.state),[]),i=(0,ji.yK)((e=>({[sz]:{width:6,[az]:6,fill:e.lightIconColor},closeIconStyle:{width:16,[az]:16,fill:e.redBadgeBackground},lightText:{color:e.lightTextColor}})),[]);return n()("div",{[$K]:{display:"flex",[nz]:"column",[oz]:iz,[tz]:iz,[az]:"100%"}},void 0,n()(ZK.gq,{[$K]:{gap:8,marginTop:32,[ez]:32,[oz]:iz}},void 0,n()("img",{[$K]:{width:32,[az]:32,[XK]:8},src:HK.Z[YK].import.asanaPng}),m.Z.dot(i[sz]),m.Z.dot(i[sz]),m.Z.dot(i[sz]),m.Z.clearInput(i.closeIconStyle),m.Z.dot(i[sz]),m.Z.dot(i[sz]),m.Z.dot(i[sz]),n()("img",{[$K]:{width:32,[az]:32,[JK]:8},src:HK.Z[YK].notionLogoPng})),n()(Ji.Z,{[$K]:i.lightText},void 0,n()(f.FormattedMessage,{id:"asanaImport.importingData.failed.problemsOccured",[QK]:"Some problems occurred while importing data from your Asana workspace."})),n()(Ji.Z,{[$K]:i.lightText},void 0,n()(f.FormattedMessage,{id:"asanaImport.importingData.failed.viewLoggerPage",[QK]:"Please try again or read the {link} to troubleshoot.",values:{link:n()("a",{[$K]:{color:Bv.ZP.black,cursor:jK},href:`/${null===(e=t.loggerPageId)||void 0===e?void 0:e[qK]("-","")}`},void 0,n()(f.FormattedMessage,{id:"asanaImport.importingData.failed.linkText",[QK]:"import logs"}))}})))},lz=i(85).a3v,dz=i(85).bey;const cz=function(e){window.__c={n:"LoaderWithDots"};const{dotCount:t=6,speed:i=800}=e,[o,a]=(0,d.useState)(1),s=(0,ji.yK)((e=>({[dz]:{width:6,height:6,fill:e[lz],opacity:.5},iconStyleBold:{width:6,height:6,fill:e[lz]}})),[]);return(0,d.useEffect)((()=>{const e=setInterval((()=>a((e=>e<t?e+1:1))),i);return()=>clearInterval(e)}),[t,i]),n()(ZK.gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"}},void 0,Array.from({length:t},((e,t)=>t+1)).map((e=>n()("div",{},e,m.Z.dot(o===e?s.iconStyleBold:s[dz])))))},uz=i(85).nx5,mz=(i(85).Uum,i(85).XNW),pz=i(85).e5W,gz=i(85).PXg,hz=i(85).g7N,vz=i(85).UPJ,fz=i(85).jkI,yz=i(85).H1U,bz=i(85).$bT,Sz=i(85).X_m;const wz=function(){window.__c={n:"AsanaImportStepImportingDataTab"};const e=(0,ji.yK)((e=>({iconStyle:{width:6,[Sz]:6,fill:e.lightIconColor},iconStyleBold:{width:8,[Sz]:8,fill:e.mediumIconColor},lightText:{color:e.lightTextColor}})),[]);return n()("div",{style:{display:"flex",[bz]:"column",[yz]:fz,[vz]:fz,[Sz]:"100%"}},void 0,n()(ZK.gq,{style:{gap:8,marginTop:32,[hz]:32,[yz]:fz}},void 0,n()("img",{style:{width:32,[Sz]:32,[gz]:8},src:HK.Z[pz].import.asanaPng}),n()(cz,{}),n()("img",{style:{width:32,[Sz]:32,[mz]:8},src:HK.Z[pz].notionLogoPng})),n()(ZK.gq,{},void 0,n()(Ji.Z,{style:e.lightText},void 0,n()(f.FormattedMessage,{id:"asanaImport.importingData.feelFreeToLeave",[uz]:"Data is being imported. Feel free to leave this window."}))),n()(ZK.gq,{},void 0,n()(Ji.Z,{style:e.lightText},void 0,n()(f.FormattedMessage,{id:"asanaImport.importingData.sendEmail",[uz]:"We will send you an email when the import is complete or if any problems occur."}))))};var Mz=i(57688),kz=i(11066),Cz=i(93963);const Zz=i(85).ccq,Tz=i(85).j7K,Pz=i(85).nQ3,Iz=i(85).xOW,Fz=i(85).fBv,_z=i(85).y79,xz=i(85).cZW,Az=i(85).Y9u,Bz=i(85).rpY,Dz=i(85).g7N,Ez=i(85).h8z,Lz=i(85).AEP,Rz=i(85).XCs,Nz=i(85).YDv,Oz=i(85).Hww,Uz=i(85).nrD,Vz=i(85).rI1,Wz=i(85).gdQ,Kz=i(85).KS0,zz=i(85).Scd,Gz=i(85).TEz,Hz=i(85).sei,qz=i(85).bu$,jz=i(85).fbO,Qz=i(85).Ef7,Jz=i(85).PXg,$z=i(85).XNW,Yz=i(85).Y$2,Xz=i(85).Hco,eG=i(85).OtN,tG=i(85).NF1,iG=i(85).X_m,oG=i(85).Jkr,nG=i(85).UPJ,aG=i(85).jmq,sG=i(85).lUt,rG=i(85).Eoz,lG=i(85).pkR,dG=i(85).GiO,cG=i(85).yDk,uG=i(85).TtP,mG=i(85).eiN,pG=i(85).cJC,gG=i(85).kUY,hG=i(85).UA5,vG=i(85).Exd,fG=i(85).jkI,yG=i(85).H1U,bG=i(85).tBn,SG=i(85).D7I,wG=i(85).nLZ,MG=i(85).ChN,kG=i(85).Xls,CG=i(85).KOz,ZG=i(85).Yzm,TG=i(85).Lfz,PG=i(85).icY,IG=i(85).p4K,FG=i(85).Wp_,_G=i(85).BQ6,xG=i(85).nx5,AG=i(85).Mm1,BG=i(85)._V5;const DG=function(){window.__c={n:"AsanaImportStepSelectDataTab"};const e=(0,Hi.O7)(),t=(0,f.useIntl)(),i=(0,qi.VK)((()=>fK.Z.getState()),[]),{workspaces:o,selectedWorkspace:a,teamsAndProjects:s}=i;return(0,d.useEffect)((()=>{a&&kK.getAsanaProjects({selectedWorkspace:a,environment:e}).catch((()=>{}))}),[a,e]),d[SG](d[bG],null,n()(Ji.Z,{isSmall:!0,[_G]:{[BG]:4,[AG]:4}},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",[xG]:"Only one workspace can be imported at a time."})),n()(LG,{onSelectOption:e=>{fK.Z[FG]({...i,[IG]:{},selectedWorkspace:e})},[CG]:o.map((e=>({key:e.gid,[PG]:e[TG]}))),[kG]:i.selectedWorkspace,placeHolder:t[ZG]({id:"asanaImporter.selectData.selectWorkspacePlaceholder",[xG]:"Select a workspace"})}),i.selectedWorkspace?n()(Ji.Z,{[_G]:{[MG]:v.Z[MG].semibold,[wG]:18}},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.selectProjects",[xG]:"Select projects"})):d[SG](d[bG],null),i.isLoadingProjects?n()(ZK.gq,{[_G]:{gap:8,[wG]:32,[yG]:fG}},void 0,n()(ao.Z,{[_G]:{[vG]:12}}),n()(Ji.Z,{isSmall:!0,[_G]:{[hG]:Bv.FN[pG][gG][400]}},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",[xG]:"Loading projects in the workspace..."}))):s[mG]((e=>0!==e[cG][uG])).map((e=>n()(EG,{team:e,selectedWorkspace:a},`${e.gid}-table`))))};function EG(e){var t;let{team:i,selectedWorkspace:o}=e;window.__c={n:"CollapsibleAsanaProjectsTable"};const a=(0,Hi.O7)(),s=(0,f.useIntl)(),r=(0,ji.Fg)(),[l,c]=(0,d.useState)(!1),[u,p]=(0,d.useState)(!1),[g,h]=(0,d.useState)(),y=(0,qi.VK)((()=>fK.Z.getState()),[]),b=(0,qi.VK)((()=>B.default.state[dG]),[]),S=(0,qi.VK)((()=>{const e=null==b?void 0:b.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,[TG]:e.getName(),icon:n()(zn.p,{[lG]:!0,store:e})})))}),[b]);(0,d.useEffect)((()=>{if(!S||!b)return;if(!y[IG][i.gid]){h("private"),kK[rG]({teamId:i.gid,spaceId:null==b?void 0:b.id});for(const o of S){var e,t;if((null===(e=o[TG])||void 0===e?void 0:e[sG]())===(null===(t=i[TG])||void 0===t?void 0:t[sG]())){h(o.id),kK[rG]({teamId:i.gid,spaceId:o.id});break}}}}),[S,i,b,y[IG]]);const w=(0,d.useCallback)((e=>{kK[rG]({teamId:i.gid,spaceId:e}),h(e)}),[i.gid]),M=(0,d.useCallback)((e=>{if("create"===e)return void Mz.openCreateTeamModal("asana_importer",{onClose:w});let t;if("private"===e){if(null==b||!b.id)return;t=b.id}else t=e;kK[rG]({teamId:i.gid,spaceId:t}),h(e)}),[null==b?void 0:b.id,i.gid,w]),{importCompletedTasks:k}=y,C=[{key:"private",[aG]:"private",[PG]:n()(ZK.gq,{[yG]:fG,[_G]:{gap:8}},void 0,n()("div",{[_G]:{display:"flex",[nG]:fG,[yG]:fG,[oG]:16,[iG]:16,[tG]:"0.25em",[eG]:Bv.FN[pG][gG][75]}},void 0,m.Z.lockedFilled({[hG]:r[Xz],[oG]:12.5,[iG]:12.5})),n()(Ji.Z,{[_G]:{[MG]:v.Z[MG].regular}},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",[xG]:"Private"})))}];return S&&C.push(...S.map((e=>({key:e.id,[aG]:e[TG],[PG]:n()(ZK.gq,{[yG]:fG,[_G]:{gap:8}},void 0,e.icon,e[TG])})))),C.push({key:"create",[aG]:"New teamspace",[PG]:n()(ZK.gq,{[yG]:fG,[_G]:{gap:4}},void 0,m.Z.plusThick({[hG]:r[Xz],[oG]:16,[iG]:16}),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.newTeamspace",[xG]:"New teamspace"})))}),n()(ZK.gq,{[_G]:{[$z]:-18}},void 0,n()(aa.Z,{ariaLabel:"collapse toggle",icon:m.Z.triangle,onClick:()=>c((e=>!e)),[_G]:{transform:l?"rotate(90deg)":"rotate(180deg)",[Jz]:8,[wG]:24,[oG]:10,[iG]:10},[Wz]:{[zz]:Kz},pressedStyle:{[zz]:Kz},iconStyle:{[oG]:10,[iG]:10}}),n()(TK.Z,{tableStyle:{borderTop:0},cellStyle:{[Vz]:"middle"},columns:[{key:"team",header:n()(ZK.gq,{[yG]:fG,gap:2},void 0,n()(RG,{onSelectOption:e=>{var t;fK.Z[FG]({...y,[IG]:{...y[IG],[i.gid]:{[Qz]:null===(t=y[IG][i.gid])||void 0===t?void 0:t[Qz],[cG]:e}}})},[CG]:[{key:"in_complete",[PG]:"Exclude completed projects"},{key:"all",[PG]:"Select all projects"}],[kG]:(()=>{var e;const t=null===(e=y[IG][i.gid])||void 0===e?void 0:e[cG];return"string"==typeof t?t:null!=t&&t[uG]?"specific":void 0})()}),n()(Ji.Z,{[_G]:{[oG]:280,[Uz]:Oz}},void 0,i[TG])),[_G]:{[oG]:300}},{key:"importInto",header:n()(ZK.gq,{[_G]:{[yG]:fG}},void 0,n()("div",{},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.importInto",[xG]:"Import into"})),n()("div",{[_G]:{[Jz]:16,[$z]:8}},void 0,m.Z.arrowRight({[oG]:12})),n()(ZK.gq,{[_G]:{[yG]:fG,gap:8}},void 0,n()("img",{src:HK.Z.emails.notionLogoBlackSmallPng,[iG]:18}),n()(LG,{[CG]:C,onSelectOption:M,[kG]:null===(t=C.find((e=>e.key===g)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:s[ZG]({id:"asanaImport.importsTab.selectData.selectATeamspace",[xG]:"Select a teamspace"})}))),[_G]:{[oG]:"50%"}}],rows:function(e){let{[Yz]:t}=e;if(t)return[];const s=i[cG].map((e=>({key:e.gid,columns:[n()(ZK.gq,{[yG]:fG,gap:6,[_G]:{[$z]:20}},`${e.gid}-container`,n()(Yo.Z,{[_G]:{[Jz]:2},onClick:()=>{const t={...y[IG][i.gid]||{[cG]:[],[Qz]:void 0}},{[Qz]:o,[cG]:n}=t;let a;a="all"===n||"in_complete"===n?[]:n[jz](e.gid)?n[mG]((t=>t!==e.gid)):n.concat(e.gid),fK.Z[FG]({...y,[IG]:{...y[IG],[i.gid]:{[Qz]:o,[cG]:a}}})},checked:(()=>{const t={...y[IG][i.gid]||{[cG]:[],[Qz]:void 0}};return"all"===t[cG]||"in_complete"===t[cG]&&!1===e[qz]||t[cG][jz](e.gid)})(),size:14,checkSize:8}),n()(Cz.z,{[hG]:e[hG],size:6}),n()("div",{[_G]:{[oG]:240,wordWrap:Hz}},void 0,e[qz]?n()(Ji.Z,{isMultiline:!0,[_G]:{[hG]:r[Gz]}},void 0,e[TG],n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.completedHelperText",[xG]:" (Completed)"})):n()(Ji.Z,{isMultiline:!0},void 0,e[TG]))),n()(Ji.Z,{isSmall:!0},`${i.gid}-tasks-count`,k?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.tasksHelperText",[xG]:" tasks"}))]})));return i.nextPage&&s.push({key:"loadMore",columns:[n()(kz.Z,{[lG]:u,[_G]:{[$z]:20,[hG]:Bv.FN[pG][gG][400]},[Wz]:{[zz]:Kz},pressedStyle:{[zz]:Kz},onClick:async()=>{if(!o)return;p(!0);const e=await T.getTeamsAndProjectsInAsanaWorkspace(a,{workspaceId:o,teamId:i.gid,size:5,nextPage:i.nextPage}),{teamsAndProjects:t}={...y},n=t.find((e=>e.gid===i.gid));if(n){if("success"===e.type){const o=e.data.find((e=>e.gid===i.gid));if(!o)return;n[cG].push(...o[cG]),n.nextPage=o.nextPage,fK.Z[FG]({...y,teamsAndProjects:t,loadMoreClicks:y.loadMoreClicks+1})}p(!1)}}},`${i.gid}-loadmore`,u?n()(ZK.gq,{[yG]:fG,gap:8},void 0,n()(ao.Z,{[_G]:{[vG]:12}}),n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",[xG]:"Loading more projects..."})):n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadMoreProjects",[xG]:"Load more projects..."}))]}),s}({[Yz]:l})}))}function LG(e){var t;window.__c={n:"Dropdown"};const{onSelectOption:i,[CG]:o,[kG]:a,placeHolder:r,narrow:l,allowSearch:c}=e,u=(0,f.useIntl)(),[p,g]=(0,d.useState)(""),h=null===(t=o.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t[PG],y=(0,ji.yK)((e=>({icon:{[oG]:12,[iG]:12,[$z]:4,fill:e.lightIconColor}})),[]);return n()(na.ZP,{popupType:na.Z4.Popup,[Zz]:na.pO.Bottom,renderOrigin:e=>d[SG](Io.Z,s()({},e,{[_G]:{[BG]:l?2:8,[AG]:l?2:8,[Nz]:8,[Rz]:8,[Lz]:1,[oG]:250,border:`1px solid ${Bv.FN[pG][gG][100]}`,[nG]:Ez,[wG]:8,[Dz]:8,[zz]:a?void 0:Bv.FN[pG][gG][50],[hG]:a?void 0:Bv.FN[pG][gG][300]},[lG]:!1}),n()(Ji.Z,{[_G]:{[Uz]:Oz}},void 0,h||r),m.Z.chevronDown(y.icon)),[Bz]:e=>{const t={menuType:jo.og.Popup,[oG]:250,left:50},a=(p.trim()?o[mG]((e=>{var t;return null===(t=e[aG])||void 0===t?void 0:t[sG]()[jz](p[sG]())})):o).map((t=>{let{key:o,[PG]:a}=t;return{key:o,action:()=>{i(o),e.close()},[Bz]:e=>d[SG]($o.Z,s()({},e,{title:a,shouldWrapCaption:!0,right:h===a?n()("div",{[_G]:{[oG]:14}},void 0,m.Z.check()):void 0}))}})),r=[{key:"asanaImport.dropdown.menuList",[Bz]:e=>d[SG](on.Z,e),items:a}];return d[SG](d[bG],null,c?n()("input",{[_G]:{[oG]:"100%",[tG]:0,[eG]:Bv.FN[pG][gG][200],[BG]:2,[AG]:2,[Nz]:8,[Rz]:8,[Lz]:1,border:`1px solid ${Bv.FN[pG][gG][100]}`,[nG]:Ez,[zz]:Bv.FN[pG][gG][50],[vG]:v.Z[vG][Az].desktop,[Uz]:"ellipses"},[xz]:u[ZG]({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",[xG]:"Search for a teamspace"}),onChange:e=>g(e.target.value),value:p}):d[SG](d[bG],null),d[SG](Xo.Z,t,n()(en.Z,{type:en.i[_z],[Pz]:r,[Tz]:void 0,[_G]:{[Fz]:Iz,[yG]:"flex-end"}})))}})}function RG(e){var t;window.__c={n:"CheckboxDropdown"};const{onSelectOption:i,[CG]:o,[kG]:a}=e,r=null===(t=o.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t[PG],l=(0,d.useMemo)((()=>void 0!==a&&"specific"!==a&&("all"===a||"partial")),[a]);return n()(na.ZP,{popupType:na.Z4.Popup,[Zz]:na.pO.Bottom,alignmentToOrigin:na.vR.Start,renderOrigin:e=>d[SG](Io.Z,s()({},e,{[_G]:{padding:0,margin:0,[Jz]:4,[iG]:14},[Wz]:{}}),n()(Yo.Z,{checked:l,[lG]:!0,size:14,checkSize:8})),[Bz]:e=>{const t={menuType:jo.og.Popup,[oG]:250,left:50},a=o.map((t=>{let{key:o,[PG]:a}=t;return{key:o,action:()=>{i(o),e.close()},[Bz]:e=>d[SG]($o.Z,s()({},e,{title:a,shouldWrapCaption:!0,right:r===a?n()("div",{[_G]:{[oG]:14}},void 0,m.Z.check()):void 0}))}})),l=[{key:"asanaImport.checkboxDropdown.menuList",[Bz]:e=>d[SG](on.Z,e),items:a}];return d[SG](Xo.Z,t,n()(en.Z,{type:en.i[_z],[Pz]:l,[Tz]:void 0,[_G]:{[Fz]:Iz,[yG]:"flex-end"}}))}})}const NG=i(85).Mm1,OG=i(85).gdQ,UG=i(85).tLG,VG=i(85).LIR,WG=i(85).j_T,KG=(i(85).QVG,i(85).Lxw),zG=i(85).Mcv,GG=i(85).Wqi,HG=i(85).wgE,qG=i(85).vWz,jG=i(85).XNW,QG=i(85).Wp_,JG=i(85).L7H,$G=i(85).PG2,YG=i(85).pkR,XG=i(85).h8z,eH=i(85).PdN,tH=i(85).yzD,iH=i(85).xVP,oH=i(85).lWm,nH=i(85).UPJ,aH=i(85).jkI,sH=i(85).H1U,rH=i(85).EMU,lH=i(85).sM5,dH=i(85).TtP,cH=i(85).p4K,uH=i(85).GiO,mH=i(85).tBn,pH=i(85).D7I,gH=i(85).BQ6,hH=i(85).nx5,vH=i(85).ChN;const fH=function(e){let{tab:t,fetchActiveImportTasks:i}=e;window.__c={n:"AsanaImportStepTab"};const o=(0,Hi.O7)(),a=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,qi.VK)((()=>B.default.state[uH]),[]),r=(0,qi.VK)((()=>CK.Z.state.teams),[]),l=(0,qi.VK)((()=>fK.Z.state),[]),c=(0,qi.VK)((()=>ki.Z.state),[]).flowId||(0,p.default)(),{workspaces:u}=l,g=(0,d.useCallback)((()=>Object.values(l[cH]).some((e=>0!==e.projects[dH]))),[l[cH]]),h=(0,ji.yK)((e=>({closeButton:{zIndex:10,[lH]:rH,[sH]:aH,[nH]:aH,borderRadius:"100%",background:e[oH],width:20,height:20,padding:4},[iH]:{background:e[tH]},[eH]:{width:16,fill:e.mediumTextColor}})),[]);return n()($i.Z,{controlRow:(e=>"selectData"===e?n()("div",{[gH]:{[lH]:rH,[nH]:XG}},void 0,n()(eo.Z,{[gH]:{border:0},[YG]:!u[dH],[$G]:()=>{i(),fK.Z.resetImport()}},void 0,n()(f.FormattedMessage,{id:"asanaImport.selectData.backButtonText",[hH]:"Back"})),n()(ZK.gq,{[sH]:aH,gap:8},void 0,l.selectedWorkspace?d[pH](d[mH],null,n()(Sx.Z,{on:l[JG],[$G]:()=>fK.Z[QG]({...l,[JG]:!l[JG]})}),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"importsTab.selectData.importCompletedTasks",[hH]:"Import completed tasks"}))):d[pH](d[mH],null),n()(Po.Z,{[gH]:{[jG]:16},[YG]:!g()||l[qG],[$G]:()=>{a&&s&&kK.importToAsana({[HG]:o,[uH]:s,[GG]:a,teamsStores:r,flowId:c}).catch((()=>{}))}},void 0,l[qG]?n()(ZK.gq,{[sH]:aH,gap:2},void 0,n()(ao.Z,{isWhite:!0}),n()(f.FormattedMessage,{id:"importsTab.selectData.creatingTemplates",[hH]:"Creating templates"})):n()(f.FormattedMessage,{id:"importsTab.selectData.nextButtonText",[hH]:"Next"})))):"importingData"===e?n()("div",{[gH]:{[lH]:rH,[nH]:zG}},void 0,n()(eo.Z,{[YG]:!u[dH],[$G]:()=>{i(),fK.Z.resetImport()}},void 0,n()(f.FormattedMessage,{id:KG,[hH]:"Close"}))):"confirm"===e?n()("div",{[gH]:{[lH]:rH,[nH]:zG}},void 0,n()(Po.Z,{[$G]:()=>{l.loggerPageId&&M.navigate({url:(0,yK.Z)({pageId:l.loggerPageId,pageModel:MK({table:Nm.iU,id:l.loggerPageId}),baseUrl:No.default[WG],[VG]:Jn.tY.Import}),[HG]:o}),fK.Z.resetImport(),Wi.Z.reset()}},void 0,n()(f.FormattedMessage,{id:"importsTab.confirm.doneText",[hH]:"Done"}))):"failure"===e?n()("div",{[gH]:{[lH]:rH,[nH]:zG}},void 0,n()(eo.Z,{[YG]:!u[dH],[$G]:()=>{i(),fK.Z.resetImport()}},void 0,n()(f.FormattedMessage,{id:KG,[hH]:"Close"}))):void 0)(t),controlRowPaddingTopBottom:20},void 0,n()("div",{[gH]:{position:UG,top:12,[zG]:12}},void 0,n()(kz.Z,{[$G]:()=>{i(),fK.Z.resetImport()},[gH]:h.closeButton,[OG]:h[iH]},void 0,m.Z.closeSmall(h[eH]))),n()(Ji.Z,{[gH]:{[NG]:8,fontSize:18,[vH]:v.Z[vH].medium,width:"100%"}},void 0,function(e){switch(e){case"selectData":return n()(Ji.Z,{[gH]:{[vH]:v.Z[vH].semibold}},void 0,n()(f.FormattedMessage,{id:"asanaImport.importsTab.selectData.tabTitle",[hH]:"Select Asana workspace"}));default:return d[pH](d[mH],null)}}(t)),(e=>"selectData"===e?n()(DG,{}):"importingData"===e?n()(wz,{}):"confirm"===e?n()(zK,{}):"failure"===e?n()(rz,{}):void 0)(t))},yH=i(85).t5q,bH=i(85).yKO;const SH=function(e){let{fetchActiveImportTasks:t}=e;window.__c={n:"AsanaImportModal"};const i=(0,qi.VK)((()=>fK.Z.state),[]);return n()(QI.Z,{open:i.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675},render:()=>n()(qI.Z,{capture:!0,allowEsc:!0,render:()=>n()(jI.Z,{capture:!0,ignoreBlockSelection:!0,[bH]:!0,[yH]:!1,render:()=>(()=>{const{currentTab:e}=i;return n()(fH,{fetchActiveImportTasks:t,tab:e})})()})}),onDismiss:()=>{fK.Z.resetImport()}})};var wH=i(15684);const MH=i(85).OtN,kH=i(85).vu7,CH=i(85)._mS,ZH=i(85).Nbg,TH=i(85).htl,PH=i(85).ilE,IH=i(85).qpZ,FH=i(85).IO3,_H=i(85).P3s,xH=i(85).Und,AH=i(85).Y7T,BH=i(85).Wqi,DH=i(85).Tk1,EH=i(85).nLZ,LH=i(85).nx5,RH=i(85).dLQ,NH=i(85).tBn,OH=i(85).D7I,UH=i(85).eJX,VH=i(85).Ubh,WH=i(85).GiO,KH=i(85).tDk;const zH=function(){window.__c={n:"ImportsTab"};const e=(0,qi.VK)((()=>B.default.state),[]),t=(0,qi.VK)((()=>fK.Z.state),[]),{currentSpaceStore:i,[KH]:o,[WH]:a,[VH]:s}=e,l=(0,Hi.O7)(),{device:c}=(0,Hi.O7)(),[u,m]=(0,d.useState)([]),p=(0,d.useCallback)((async()=>{if(null==i||!i.id)return;const e=await T.getActiveImportTasks(l,{spaceId:i.id});"success"===e.type&&m(e.data)}),[i,l]);return(0,d.useEffect)((()=>{p().catch((()=>{}));const e=setInterval(p,6e4);return()=>clearInterval(e)}),[i,l,p]),(0,d.useEffect)((()=>{let e;const i=async t=>{const n=await T.getAsanaWorkspacesNames(l,{});if(t+=1,"success"===n.type)if(null!=n&&n.data.account)fK.Z.setState({...fK.Z.state,account:n.data.account,workspaces:n.data.workspaces,isLoadingAsanaWorkspaces:!1,[UH]:!1,currentTab:"selectData",isModalOpen:!0});else{if(t>o)return;e=setTimeout((()=>i(t)),2e3)}},o=180;if(t[UH]){i(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[t[UH],l]),i&&a&&a&&s?d[OH](d[NH],null,n()(Yi.Z,{large:!c[RH]||void 0,divider:c[RH]?void 0:"full"},void 0,n()(f.FormattedMessage,{id:"importsTab.title",[LH]:"Import data"})),n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"importsTab.subtitle",[LH]:"You can easily import data from any of the following sources."})),n()(Ji.Z,{isSmall:!0},void 0,n()(f.FormattedMessage,{id:"importsTab.unsupportedImportsHelperText",[LH]:"If your data is located somewhere we don't support yet, you can try importing it via CSV file."})),n()("div",{style:{[EH]:16,display:"grid",[DH]:"repeat(4, 1fr)",gridAutoRows:"1fr",gap:"4px 16px",width:"100%"}},void 0,n()(wH.Z,{pageStore:o,[BH]:i,[AH]:a,[xH]:s,[_H]:"modal",[FH]:e=>{M.navigateToBlock({environment:l,store:e,pageVisitSource:Jn.tY.Import}),Wi.Z.reset()},readOnlyCreditButton:!1,isLoadingNewConnections:t.isFetchingAsanaAccount}),n()(SH,{fetchActiveImportTasks:p})),n()("div",{style:{[EH]:32}},void 0,n()(Ji.Z,{isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"importsTab.activeImports.title",[LH]:"Active Imports"})),n()(TK.Z,{tableStyle:{borderTop:0},[TH]:[{key:"importTime",[IH]:n()(f.FormattedMessage,{id:"importsTab.activeImports.importTime",[LH]:"Import time"})},{key:"importFrom",[IH]:n()(f.FormattedMessage,{id:"importsTab.activeImports.importFrom",[LH]:"Import from"})},{key:"importStatus",[IH]:n()(f.FormattedMessage,{id:"importsTab.activeImports.importStatus",[LH]:PH})}],rows:u.map((e=>({key:`table-${e.taskId}`,[TH]:[e.startedAt?`${(0,Dv.Yx)(e.startedAt,"long",J.default[ZH]().locale)} ${(0,Dv.Yx)(e.startedAt,"time",J.default[ZH]().locale)}`:"",(0,r.startCase)(e.source),n()(Sr.Z,{isRound:!0,showRemoveButton:!1,value:n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"activeImports.status.inProgress",[LH]:CH})),[MH]:Bv.FN.light[kH][200],showColoredDot:kH,format:vr.l.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),u.length?d[OH](d[NH],null):n()(Ji.Z,{isSmall:!0,style:{[EH]:16}},void 0,n()(f.FormattedMessage,{id:"importsTab.activeImportsTable.noActiveImports",[LH]:"There are no ongoing imports associated with your account."})))):d[OH](d[NH],null)};var GH=i(79092),HH=i(54153),qH=i(84908),jH=i(84075),QH=i(57222),JH=i(65680),$H=i(31194);const YH=i(85).wuN,XH=i(85).g4H,eq=i(85).PXg,tq=i(85).jkI,iq=i(85).H1U,oq=i(85).j7K,nq=i(85).y79,aq=i(85).BQ6,sq=i(85).D7I,rq=i(85).a3v,lq=i(85).XCs,dq=i(85).YDv,cq=i(85).XNW,uq=i(85).unR,mq=i(85).nx5,pq=i(85).Dd5,gq=i(85).P0R,hq=i(85).HZA,vq=i(85).icY,fq=i(85).LtW;class yq extends c.Z{constructor(){super(...arguments),this.storeTypes={[fq]:ea.Z},this.handleSelectChange=e=>{const{[vq]:t}=this[hq](e);if(this[gq].confirm){const i=()=>{this[gq][pq](e)};w.showDialog({showCancel:!0,keepFocus:!1,message:n()(f.FormattedMessage,{id:"languagePicker.changeLanguage.confirmationMessage",[mq]:"Are you sure you want to update the language to {language}?",values:{language:t}}),items:[{[vq]:n()(f.FormattedMessage,{id:"languagePicker.changeLanguage.updateButton.label",[mq]:"Update"}),color:"red",onAccept:i}]})}else this[gq][pq](e)}}renderComponent(){const{device:e}=this.environment;if(e.isMobile)return;const t="ja-JP"===this[gq].currentLocale&&Z.default[uq]("japan_full_launch");return n()(na.ZP,{popupType:na.Z4.Popup,[fq]:this.stores[fq],renderOrigin:e=>d[sq](d.Fragment,null,d[sq](Io.Z,s()({[aq]:{[cq]:-8,[dq]:8,[lq]:8}},e),this[gq].pickerLabel?this[gq].pickerLabel:this[hq](this[gq].currentLocale)[vq],(0,JH.ay)(this[gq].currentLocale)&&!t&&n()(Gp.Z,{desktopStyle:{[cq]:4}},void 0,n()(f.FormattedMessage,{id:"languagePicker.betaBadge",[mq]:"Beta"})),m.Z.chevronDown({width:10,[cq]:4,fill:this.theme[rq]}))),placementToOrigin:$H.Iw.Bottom,alignmentToOrigin:$H.lU.Start,render:e=>{let t;t=Z.default[uq]("polyglot")?[...JH.tp,...JH.is]:[...JH.tp];const i=[{key:"languages",render:e=>d[sq](on.Z,s()({},e,{topBorder:0!==e.index})),items:t.map((t=>({key:t,render:e=>this.getItem(t,e.focused,e),action:()=>{this.handleSelect(t),e.close()}})))}],o={menuType:jo.og.Popup,width:240};return d[sq](Xo.Z,s()({className:j.languagePicker},o),n()(en.Z,{type:en.i[nq],[oq]:void 0,sections:i}))}})}renderItem(e){const t="ja-JP"===e.locale&&Z.default[uq]("japan_full_launch");return d[sq]($o.Z,s()({},e[gq],{title:n()("div",{[aq]:{display:"flex",[iq]:tq}},void 0,n()("div",{[aq]:{...e[aq],[eq]:0}},void 0,e[vq])),[XH]:e[XH]&&n()("span",{[aq]:{color:this.theme[YH]}},void 0,e[XH]),shouldWrapCaption:!0,right:(0,JH.ay)(e.locale)&&!t&&n()(Gp.Z,{},void 0,n()(f.FormattedMessage,{id:"languagePicker.betaBadge",[mq]:"Beta"}))}))}handleSelect(e){this[gq].currentLocale!==e&&this.handleSelectChange(e)}[hq](e){return(0,QH.t)(this[gq].intl)[e]}getItem(e,t,i){return this.renderItem({...this[hq](e),focused:t,[gq]:i,locale:e})}}yq.displayName="LanguagePicker";const bq=(0,f.injectIntl)(yq),Sq=i(85).l81,wq=i(85).D4q,Mq=i(85).wgE,kq=i(85).nx5,Cq=i(85).$Vg,Zq=i(85).H1U;class Tq extends c.Z{renderComponent(){return n()("div",{style:this.getSettingsOptionStyle()},void 0,n()("div",{style:{display:"flex",[Zq]:Cq,width:"100%"}},void 0,n()("div",{style:{flex:1}},void 0,n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"languageRegionSettings.language.label",[kq]:"Language"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(f.FormattedMessage,{id:"languageSettings.languageSwitcher.subtitle",[kq]:"Change the language used in the user interface."}))),n()(bq,{confirm:!0,onChange:async e=>{S.trackLocaleChanged(this[Mq],{locale:e});const t=await T.setLocale(this[Mq],{locale:e});"success"===t.type?(HH.Z.set("preferredLocale",e),await jH.transactionQueue.drain(),this[Mq].device[wq]?qH.refreshAll({includeFocusedWindow:!0}):window[Sq].reload()):w.showError(t)},currentLocale:this.props.locale})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this[Mq];return{display:"flex",flexDirection:"column",[Zq]:Cq,width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}Tq.displayName="LanguageSettings";const Pq=Tq;var Iq=i(32056);const Fq=i(85).Yzm,_q=i(85).v2v,xq=i(85).fMI,Aq=i(85).ckw,Bq=i(85).$fr,Dq=i(85).Ep2,Eq=i(85).aZE,Lq=i(85).kZT,Rq=i(85).n1T,Nq=i(85).HC1,Oq=i(85).tYz,Uq=i(85).yve,Vq=i(85).p0_,Wq=i(85).KDl,Kq=i(85).w0R,zq=i(85).nx5,Gq=i(85).gBs,Hq=i(85).XSv,qq=i(85).YP4,jq=i(85).dL6;function Qq(e){var t,i;return(null==e||null===(t=e.getSettingsStore())||void 0===t||null===(i=t[jq]("regional_format_settings"))||void 0===i?void 0:i[jq]("region").getValue())||"US"}function Jq(e,t){var i,o;const n=null==e||null===(i=e[jq]("settings"))||void 0===i||null===(o=i[jq]("regional_format_settings"))||void 0===o?void 0:o.getValue();return"full_date"===t?null!=n&&n[qq]?$q(Qq(e)):(null==n?void 0:n.full_date)||$q(Qq(e)):"short_date"===t?null!=n&&n[qq]?{type:"short"}:(null==n?void 0:n[Hq])||{type:"short"}:"number"===t?null!=n&&n[qq]?"number":(null==n?void 0:n.number)||"number":"week_start_on"===t?null!=n&&n[qq]?"sunday":(null==n?void 0:n[Gq])||"sunday":(0,x.unreachable)(t)}function $q(e){return"JP"===e?{type:"short"}:{type:"long"}}const Yq={full_date:(0,f.defineMessages)({full:{[zq]:"Full date",id:Kq},long:{[zq]:"Long",id:Wq},medium:{[zq]:"Medium",id:Vq},short:{[zq]:"Short",id:Uq},iso:{[zq]:"ISO",id:Oq},custom:{[zq]:"Custom",id:Nq}}),[Hq]:(0,f.defineMessages)({short:{[zq]:"Short",id:Rq},iso:{[zq]:"ISO",id:Lq},custom:{[zq]:"Custom",id:Eq}}),number:(0,f.defineMessages)({number:{[zq]:"Number",id:Dq},number_with_commas:{[zq]:"Number with commas",id:Bq},percent:{[zq]:"Percent",id:Aq}}),[Gq]:(0,f.defineMessages)({sunday:{[zq]:"Sunday",id:xq},monday:{[zq]:"Monday",id:_q}})},Xq=(0,f.defineMessages)({full_date:{[zq]:"Full date",id:"regionalFormatSettings.defaultSetting.fullDate"},[Hq]:{[zq]:"Short date",id:"regionalFormatSettings.defaultSetting.shortDate"},number:{[zq]:"Numbers",id:"regionalFormatSettings.defaultSetting.numbers"},[Gq]:{[zq]:"Week starts",id:"regionalFormatSettings.defaultSetting.weekStart"}});function ej(e,t){if("full_date"===t){return Yq[t][Jq(e,t).type]}if("short_date"===t){return Yq[t][Jq(e,t).type]}if("number"===t){return Yq[t][Jq(e,t)]}if("week_start_on"===t){return Yq[t][Jq(e,t)]}return(0,x.unreachable)(t)}function tj(e,t){return(0,Iq.uf)(1234567,e,t)}const ij=(0,f.defineMessages)({sunday:{id:"regionalFormatSettings.defaultRegionalSettings.startDayOfWeek.sunday",[zq]:"Sunday"},monday:{id:"regionalFormatSettings.defaultRegionalSettings.startDayOfWeek.monday",[zq]:"Monday"}});function oj(e,t){const i=e.type;return"short"===i||"long"===i||"medium"===i?(0,Dv.Yx)(Date.now(),i,(0,j_.E2)(t)):"iso"===i?(0,Dv.$6)(Date.now()):(0,Dv.Yx)(Date.now(),"long",(0,j_.E2)(t))}function nj(e,t){const i=e.type;return"iso"===i?(0,Dv.$6)(Date.now()):"short"===i?(0,Dv.Yx)(Date.now(),i,(0,j_.E2)(t)):(0,Dv.Yx)(Date.now(),"short",(0,j_.E2)(t))}var aj=i(68894),sj=i(95030);const rj=i(85).QS3,lj=i(85).L_E,dj=i(85).Dd5,cj=i(85).j7K,uj=i(85).LCr,mj=i(85).YP4,pj=i(85).pbU,gj=i(85).h8Y,hj=i(85).Hgp,vj=i(85).wgE,fj=i(85).Drs,yj=i(85).JJj,bj=i(85).g4H,Sj=i(85).KOz,wj=i(85).y79,Mj=i(85).rpY,kj=i(85).BCA,Cj=i(85).D7I,Zj=i(85).a3v,Tj=i(85).XNW,Pj=i(85).Yzm,Ij=i(85).Q1_,Fj=i(85).Und,_j=i(85).v2v,xj=i(85).fMI,Aj=i(85).ckw,Bj=i(85).$fr,Dj=i(85).Ep2,Ej=i(85).aZE,Lj=i(85).kZT,Rj=i(85).n1T,Nj=i(85).HC1,Oj=i(85).tYz,Uj=i(85).yve,Vj=i(85).p0_,Wj=i(85).KDl,Kj=i(85).w0R,zj=i(85).nx5,Gj={full_date:(0,f.defineMessages)({full:{[zj]:"Full date",id:Kj},long:{[zj]:"Long",id:Wj},medium:{[zj]:"Medium",id:Vj},short:{[zj]:"Short",id:Uj},iso:{[zj]:"ISO",id:Oj},custom:{[zj]:"Custom",id:Nj}}),short_date:(0,f.defineMessages)({short:{[zj]:"Short",id:Rj},iso:{[zj]:"ISO",id:Lj},custom:{[zj]:"Custom",id:Ej}}),number:(0,f.defineMessages)({number:{[zj]:"Number",id:Dj},number_with_commas:{[zj]:"Number with commas",id:Bj},percent:{[zj]:"Percent",id:Aj}}),week_start_on:(0,f.defineMessages)({sunday:{[zj]:"Sunday",id:xj},monday:{[zj]:"Monday",id:_j}})};function Hj(e){window.__c={n:"CustomRegionalFormatSettingPicker"};const[,,t]=(0,qi.AF)(void 0,ea.Z),i=(0,ji.Fg)(),[o,a]=(0,qi.VK)((()=>[e[Fj].isDefined(),ej(e[Fj],e[Ij])]),[e[Ij],e[Fj]]);return o?n()(na.ZP,{popupType:na.Z4.Popup,buttonPopupStore:t,renderOrigin:e=>d[Cj](Io.Z,e,J.default[Pj](a),m.Z.chevronDown({width:10,[Tj]:4,fill:i[Zj]})),placementToOrigin:$H.Iw.Bottom,alignmentToOrigin:$H.lU.Start,[Mj]:t=>"week_start_on"===e[Ij]||"number"===e[Ij]?n()(qj,{[Fj]:e[Fj],[Ij]:e[Ij],[kj]:()=>{t.close()}}):"full_date"===e[Ij]||"short_date"===e[Ij]?n()(jj,{[Fj]:e[Fj],[Ij]:e[Ij],[kj]:()=>{t.close()}}):(0,x.unreachable)(e[Ij])}):n()(ao.Z,{})}function qj(e){window.__c={n:"SimpleFormatPicker"};const t=(0,Hi.O7)(),i=(0,f.useIntl)();return n()(Xo.Z,{menuType:jo.og.Popup,width:216},void 0,n()(en.Z,{type:en.i[wj],[cj]:void 0,sections:[{key:Sj,[Mj]:e=>d[Cj](on.Z,s()({},e,{topBorder:0!==e.index})),items:(0,x.objectKeys)(Gj[e[Ij]]).map((o=>({key:o,[Mj]:t=>{const n="number"===e[Ij]?tj(o,i):void 0;return d[Cj]($o.Z,s()({},t,{title:J.default[Pj](Gj[e[Ij]][o]),[bj]:n}))},action:()=>{z[yj]({[fj]:"CustomRegionalFormatSettings.SimpleFormatPicker",[vj]:t,perform:t=>{G[hj]({[Fj]:e[Fj],data:{[gj]:{...e[Fj][pj](),[mj]:!1,region:Qq(e[Fj]),[e[Ij]]:o}},[uj]:t})}}),e[kj]()}})))}]}))}function jj(e){window.__c={n:"CustomizableFormatPicker"};const t=(0,Hi.O7)(),[i,o]=(0,d.useState)((()=>{})),a=(0,f.useIntl)(),r=(0,x.objectKeys)(Gj[e[Ij]]),l=o=>{const n="custom"===o?{type:o,format:i}:{type:o};z[yj]({[fj]:"CustomRegionalFormatSettings.onAction",[vj]:t,perform:t=>{G[hj]({[Fj]:e[Fj],data:{[gj]:{...e[Fj][pj](),[mj]:!1,region:Qq(e[Fj]),[e[Ij]]:n}},[uj]:t})}}),e[kj]()};return n()(Xo.Z,{menuType:jo.og.Popup,width:216},void 0,n()(en.Z,{type:en.i[wj],[cj]:void 0,sections:[{key:Sj,[Mj]:e=>d[Cj](on.Z,s()({},e,{topBorder:0!==e.index})),items:r.map((t=>({key:t,[Mj]:r=>{if("custom"===t)return d[Cj](sj.Z,s()({},r,{renderOrigin:i=>d[Cj]($o.Z,s()({},i,{title:J.default[Pj](Gj[e[Ij]][t])})),onFocus:()=>{},renderExtension:()=>n()(Qj,{customFormat:i,[dj]:e=>{o(e)},[kj]:()=>{l(t)}}),title:J.default[Pj](Gj[e[Ij]][t])}));{const i="full_date"===e[Ij]?oj({type:t},a):nj({type:t},a);return d[Cj]($o.Z,s()({},r,{title:J.default[Pj](Gj[e[Ij]][t]),[bj]:i}))}},action:()=>{l(t)}})))}]}))}function Qj(e){window.__c={n:"CustomDateFormatExtension"};const t=(0,ji.yK)((e=>({[lj]:{},label:{color:e.mediumTextColor,fontWeight:v.Z.fontWeight.semibold,paddingTop:6,paddingBottom:6,paddingLeft:14,paddingRight:14},[rj]:{marginTop:6}})),[]);return n()("div",{style:t[lj]},void 0,n()("div",{},void 0,n()(Ji.Z,{isSmall:!0,style:t.label},void 0,n()(f.FormattedMessage,{id:"regionalFormatSettings.customDateFormat.title",[zj]:"Custom format"}))),n()(aj.ZP,{focus:!0,value:e.customFormat||"",[dj]:t=>{e[dj](t.target.value)}}),n()($o.Z,{style:t[rj],focused:!1,onClick:e[kj],title:n()(f.FormattedMessage,{id:"regionalFormatSettings.customDateFormat.applyChanges",[zj]:"Apply changes"})}))}const Jj=i(85).Yzm,$j=i(85).Exd,Yj=i(85).Q1_,Xj=i(85).LCr,eQ=i(85).h8Y,tQ=i(85).Hgp,iQ=i(85).gBs,oQ=i(85).XSv,nQ=i(85).uuw,aQ=i(85).YP4,sQ=i(85).wgE,rQ=i(85).Drs,lQ=i(85).JJj,dQ=i(85).BQ6,cQ=i(85).AEv,uQ=i(85).nx5,mQ=i(85).icY,pQ=i(85).L_E,gQ=i(85).Und;function hQ(e){window.__c={n:"RegionalFormatSettings"};const t=(0,ji.yK)((()=>MQ()),[]),i=(0,qi.VK)((()=>e[gQ].isReady()),[e[gQ]]),o=(0,qi.VK)((()=>e[gQ].shouldUseDefaultRegionalFormatting()),[e[gQ]]),a=(0,Hi.O7)();return i?n()("div",{[dQ]:t[pQ]},void 0,n()("div",{[dQ]:t.controlRow},void 0,n()("div",{[dQ]:t[mQ]},void 0,n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"regionalFormatSettings.label.title",[uQ]:"Use regional defaults"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[dQ]:t[cQ]},void 0,n()(f.FormattedMessage,{id:"regionalFormatSettings.label.subtitle",[uQ]:"Automatically apply standard formats of your region"}))),n()(Sx.Z,{on:o,onClick:()=>{z[lQ]({[rQ]:"RegionalFormatSettings.RegionalFormatSettings",[sQ]:a,perform:t=>{const i=o?{[aQ]:!1,[nQ]:void 0,[oQ]:void 0,time:void 0,number:void 0,[iQ]:void 0}:{[aQ]:!0};G[tQ]({[gQ]:e[gQ],data:{[eQ]:{region:Qq(e[gQ]),...i}},[Xj]:t})}})}})),n()("div",{},void 0,o?n()(vQ,{[gQ]:e[gQ]}):n()(SQ,{[gQ]:e[gQ]}))):n()(ao.Z,{})}function vQ(e){window.__c={n:"DefaultRegionalFormatSettings"};const t=(0,ji.yK)((()=>({[pQ]:{marginTop:12}})),[]);return n()("div",{[dQ]:t[pQ]},void 0,bQ.map((t=>n()(fQ,{[gQ]:e[gQ],[Yj]:t}))))}function fQ(e){window.__c={n:"DefaultRegionalFormatSetting"};const t=(0,ji.yK)((e=>({[pQ]:{display:"flex"},[Yj]:{color:e.lightTextColor,[$j]:v.Z[$j].UIRegular.desktop,width:100},example:{color:e.mediumTextColor,[$j]:v.Z[$j].UIRegular.desktop}})),[]),i=(0,f.useIntl)(),[o,a]=(0,qi.VK)((()=>[e[gQ].isDefined(),yQ(e[gQ],i,e[Yj])]),[i,e[Yj],e[gQ]]);return o?n()("div",{[dQ]:t[pQ]},void 0,n()("div",{[dQ]:t[Yj]},void 0,J.default[Jj](Xq[e[Yj]])),n()("div",{[dQ]:t.example},void 0,a)):n()(ao.Z,{})}function yQ(e,t,i){if("full_date"===i){return oj(Jq(e,i),t)}if("short_date"===i){return nj(Jq(e,i),t)}if("number"===i){return tj(Jq(e,i),t)}if("week_start_on"===i){return function(e){return"sunday"===e?J.default[Fq](ij.sunday):"monday"===e?J.default[Fq](ij.monday):(0,x.unreachable)(e)}(Jq(e,i))}return(0,x.unreachable)(i)}const bQ=[nQ,oQ,"number",iQ];function SQ(e){return n()("div",{},void 0,bQ.map((t=>n()(wQ,{[gQ]:e[gQ],[Yj]:t}))))}function wQ(e){window.__c={n:"CustomRegionalFormatSetting"};const t=(0,f.useIntl)(),[i,o,a]=(0,qi.VK)((()=>[e[gQ].isDefined(),Qq(e[gQ]),yQ(e[gQ],t,e[Yj])]),[t,e[Yj],e[gQ]]),s=(0,ji.yK)(MQ,[]);return i?d.createElement(d.Fragment,null,n()(LP.Z,{size:24}),n()("div",{[dQ]:s[pQ]},void 0,n()("div",{[dQ]:s.controlRow},void 0,n()("div",{[dQ]:s[mQ]},void 0,n()(Ji.Z,{},void 0,J.default[Jj](Xq[e[Yj]])),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[dQ]:s[cQ]},void 0,a)),n()(Hj,{[gQ]:e[gQ],region:o,[Yj]:e[Yj]})))):n()(ao.Z,{})}function MQ(){return{[pQ]:{flex:1,display:"flex",flexDirection:"column"},controlRow:{flex:1,display:"flex"},[mQ]:{flex:1},[cQ]:{width:"80%"}}}var kQ=i(80994);const CQ=i(85).Yzm,ZQ=i(85).j7K,TQ=i(85).sOi,PQ=i(85).rpY,IQ=i(85).jnb,FQ=i(85).y79,_Q=i(85).D7I,xQ=i(85).a3v,AQ=i(85).XNW,BQ=i(85).Dd5,DQ=i(85).Und,EQ=i(85).nx5,LQ=i(85).AEv,RQ=i(85).L_E;function NQ(e){window.__c={n:"RegionSettings"};const t=(0,ji.yK)((()=>({[RQ]:{flex:1,display:"flex"},label:{flex:1},[LQ]:{width:"80%"}})),[]);return n()("div",{style:t[RQ]},void 0,n()("div",{style:t.label},void 0,n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"regionSettings.region.label",[EQ]:"Region"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:t[LQ]},void 0,n()(f.FormattedMessage,{id:"regionSettings.region.subtitle",[EQ]:"Affects the default formats for dates, numbers, and currencies"}))),n()(OQ,{[DQ]:e[DQ],[BQ]:e[BQ],pickerLabel:e.pickerLabel}))}function OQ(e){window.__c={n:"RegionPicker"};const t=(0,ji.Fg)(),[,,i]=(0,qi.AF)(void 0,ea.Z),o=(0,qi.VK)((()=>Qq(e[DQ])),[e[DQ]]),[a,r]=d.useState("");return n()(na.ZP,{popupType:na.Z4.Popup,buttonPopupStore:i,renderOrigin:i=>d[_Q](Io.Z,i,e[DQ]?o:e.pickerLabel,m.Z.chevronDown({width:10,[AQ]:4,fill:t[xQ]})),placementToOrigin:$H.Iw.Bottom,alignmentToOrigin:$H.lU.Start,[PQ]:t=>n()(Xo.Z,{menuType:jo.og.Popup,width:216,header:n()(VQ,{value:a,[BQ]:e=>r(e)})},void 0,n()(en.Z,{type:en.i[FQ],[ZQ]:void 0,sections:[{key:IQ,[PQ]:e=>d[_Q](on.Z,s()({},e,{topBorder:0!==e.index})),items:(0,wy.ZP)(a,kQ.hW,(e=>e.name)).map((i=>({key:i[TQ],[PQ]:e=>d[_Q]($o.Z,s()({},e,{title:i.name})),action:()=>{e[BQ](i[TQ]),t.close(),r("")}})))}]}))})}const UQ=(0,f.defineMessages)({regionSearchPlaceholder:{[EQ]:"Search for a region...",id:"settings.regionSettings.regionSearch"}});function VQ(e){return n()(on.Z,{isInput:!0},void 0,n()(aj.ZP,{value:e.value,[BQ]:t=>{e[BQ](t.target.value)},focus:!0,placeholder:J.default[CQ](UQ.regionSearchPlaceholder),focusAfterAnimation:!0}))}var WQ=i(758),KQ=i(2911);const zQ=i(85).j7K,GQ=i(85).y79,HQ=i(85).D7I,qQ=i(85).PXg,jQ=i(85).jkI,QQ=i(85).H1U,JQ=i(85).z6V,$Q=i(85).Rs2;const YQ=function(e){window.__c={n:"SpellcheckerLanguagesPicker"};const[t,i]=d.useState([]),[o,a]=d.useState([]),r=(0,Hi.O7)(),l=(0,qi.qz)(void 0,ea.Z),c=(0,ji.yK)((e=>({span:{color:e.mediumTextColor},plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function u(e){return o.some((t=>t.code===e.code))}(0,d.useEffect)((()=>{const e=r[$Q];e&&!(0,WQ.x)(e)&&(e.getAvailableLanguages().then(i).catch((e=>{Iw.log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,KQ.Ui)(e)})})),e.getLanguages().then(a).catch((e=>{Iw.log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,KQ.Ui)(e)})})))}),[r]),(0,d.useEffect)((()=>{const e=r[$Q];if(!e||(0,WQ.x)(e))return;const t=o.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[o,r[$Q]]);const p=o.length>0?o.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(o.length>3?"…":""):n()(f.FormattedMessage,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return n()(na.ZP,{popupType:na.Z4.Popup,buttonPopupStore:l,renderOrigin:e=>d[HQ](d.Fragment,null,d[HQ](Io.Z,s()({style:c.plainButton},e),p,m.Z.chevronDown(c.icon))),placementToOrigin:$H.Iw.Bottom,alignmentToOrigin:$H.lU.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>d[HQ](on.Z,s()({},e,{topBorder:0!==e.index})),items:t.map((e=>({key:e.code,render:t=>function(e){const t=e[JQ].name||e[JQ].code;return d[HQ]($o.Z,s()({},e.props,{title:n()("div",{style:{display:"flex",[QQ]:jQ}},void 0,n()("div",{style:{[qQ]:0}},void 0,t)),shouldWrapCaption:!0,right:u(e[JQ])?m.Z.checkmark({width:12,height:12}):void 0}))}({[JQ]:e,props:t}),action:()=>{u(e)?a(o.filter((t=>t.code!==e.code))):a([...o,e])}})))}],r={menuType:jo.og.Popup,width:240};return d[HQ](Xo.Z,s()({className:j.languagePicker},r),n()(en.Z,{type:en.i[GQ],[zQ]:void 0,sections:i}))}})},XQ=i(85).nx5,eJ=i(85).gGi,tJ=i(85).$Vg,iJ=i(85).H1U,oJ=i(85).EMU;const nJ=function(e){window.__c={n:"SpellcheckerSettings"};const t=(0,Hi.O7)();if(!t.device.isElectron||!t.device.isWindows||WQ.x(t.SpellCheckStore))return null;const i={display:oJ,flexDirection:"column",[iJ]:tJ,width:eJ,height:"auto"};return d.createElement(d.Fragment,null,n()(LP.Z,{size:24,isHidden:!0}),n()("div",{style:i},void 0,n()("div",{style:{display:oJ,[iJ]:tJ,width:eJ}},void 0,n()("div",{style:{[oJ]:1}},void 0,n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"languageRegionSettings.spellchecker.label",[XQ]:"Spellchecker languages"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(f.FormattedMessage,{id:"languageSettings.spellcheckerSwitcher.subtitle",[XQ]:"Change the languages used by the spellchecker."}))),n()(YQ,{}))))},aJ=i(85).Und,sJ=i(85).Ubh,rJ=i(85).nx5,lJ=i(85).jkI,dJ=i(85).__z;class cJ extends c.Z{renderComponent(){return Qi.Z.state.online?this.renderSettings():this[dJ]()}[dJ](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,style:{textAlign:lJ}},void 0,n()(f.FormattedMessage,{[rJ]:"Please go online to manage your language and region.",id:"languageSettings.offline.message"})))}renderSettings(){var e;const{[sJ]:t}=B.default.state;if(!t)return;const i=(null===(e=t.getSettings())||void 0===e?void 0:e.preferred_locale)||j_.al,o="on"===Z.default.getGroup("aloha");return n()($i.Z,{},void 0,n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"languageSettings.languageSection.title",[rJ]:"Language & region"})),n()(Pq,{locale:i,[aJ]:t}),n()(nJ,{}),n()(LP.Z,{size:24}),o?n()("div",{style:{marginTop:12}},void 0,n()(NQ,{locale:i,[aJ]:t,onChange:e=>{}}),n()(LP.Z,{size:24}),n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"languageSettings.formatsSection.title",[rJ]:"Formats"})),n()(hQ,{locale:i,[aJ]:t}),n()(LP.Z,{size:24})):n()(GH.Z,{}))}}cJ.displayName="LanguageRegionSettings";const uJ=cJ;var mJ=i(15311),pJ=i(28187),gJ=i(21291),hJ=i(51124),vJ=i(73490);const fJ=i(85).KuF,yJ=i(85).KBD,bJ=i(85).K7S,SJ=i(85).$6u,wJ=i(85).YlB,MJ=i(85).YZi,kJ=i(85).zHB,CJ=i(85).P3s,ZJ=i(85).g7N,TJ=i(85).nx5,PJ=(i(85).pzV,i(85).jkI),IJ=i(85).Xte,FJ=i(85).GiO,_J=i(85).D4q;function xJ(){window.__c={n:"NotificationSettings"};const{[_J]:e,isMobile:t}=(0,Hi.Fy)(),i=(0,Hi.O7)(),o=(0,qi.VK)((()=>Qi.Z.state.online),[]),a=(0,qi.VK)((()=>{const i=(0,pJ.kC)();return function(e){const{isMobile:t,[_J]:i,showSlackNotificationSetting:o}=e;return[{key:kJ,[MJ]:()=>n()(gJ.A,{target:kJ})},!t&&i?{key:wJ,[MJ]:()=>n()(gJ.A,{target:wJ})}:void 0,o?{key:"notify_slack",[MJ]:()=>n()(vJ.O,{target:"notify_slack"})}:void 0].filter(x.isDefined)}({isMobile:t,[_J]:e,showSlackNotificationSetting:i})}),[t,e]),s=(0,qi.VK)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:SJ,[MJ]:()=>n()(gJ.A,{target:SJ})},t?{key:bJ,[MJ]:()=>n()(gJ.A,{target:bJ})}:void 0,{key:yJ,[MJ]:()=>n()(gJ.A,{target:yJ})},{key:fJ,[MJ]:()=>n()(gJ.A,{target:fJ})}].filter(x.isDefined)}({showNotifyEmailAlwaysSetting:(null===(e=B.default.state[FJ])||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),r=(0,qi.VK)((()=>i[IJ].state.paddingBottomCSS),[i[IJ]]);return o?n()($i.Z,{disableScroller:t},void 0,n()(Yi.Z,{large:!t,divider:"full"},void 0,n()(f.FormattedMessage,{id:"notificationSettings.notificationsSection.title",[TJ]:"My notifications"})),n()(hJ.O,{items:a}),n()(LP.Z,{size:48,isHidden:!0}),n()(Yi.Z,{large:!t,divider:"full"},void 0,n()(f.FormattedMessage,{id:"notificationSettings.emailNotificationsSection.title",[TJ]:"Email notifications"})),n()(hJ.O,{items:s}),n()(LP.Z,{size:48,isHidden:!0}),n()("div",{style:{marginTop:4,[ZJ]:t?r:void 0}},void 0,n()(EE.Z,{title:n()(f.FormattedMessage,{id:"myNotificationSettings.helpButton.caption",[TJ]:"Learn about notifications"}),href:(0,X.getLocalizedUrl)("guides.notificationSettings"),[CJ]:"notifications_settings"}))):n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,style:{textAlign:PJ}},void 0,n()(f.FormattedMessage,{[TJ]:"Please go online to manage your notification settings.",id:"myNotificationsSettings.goOnline.prompt"})))}var AJ=i(5851),BJ=i(33689),DJ=i(69435);const EJ=i(85).PXg,LJ=i(85).yaA,RJ=i(85).Z71,NJ=i(85).pkR,OJ=i(85).AEP,UJ=i(85).Jkr,VJ=i(85).yKA,WJ=i(85).mFu,KJ=i(85).LZJ,zJ=i(85).jkI,GJ=i(85).H1U,HJ=i(85).EMU,qJ=i(85).PG2,jJ=i(85).sOA,QJ=i(85).sM5,JJ=(i(85)._gr,i(85).atj,i(85).BQ6),$J=i(85).g7N,YJ=i(85).nLZ,XJ=i(85).dMt,e$=i(85).__z,t$=i(85).wNq,i$=i(85).wgE,o$=i(85).cav,n$=i(85).i33,a$=i(85).GOX,s$=i(85).nx5,r$=i(85).SPm,l$=i(85).PPM,d$=i(85).QmD,c$=i(85).P0R,u$=i(85).VIS,m$=(i(85).fim,i(85).ciu),p$=i(85).vjF,g$=i(85).jA,h$=i(85).set;class v$ extends c.Z{constructor(){super(...arguments),this.storeTypes={tokenOptionsButtonPopupStore:ea.Z,domainVerificationStore:NB.ZP},this.handleDisablePublicAccessSwitcherClick=async()=>{const{[u$]:e}=this[c$],t=e[d$][h$];if(!t){if(!(await w[l$]({[r$]:n()(f.FormattedMessage,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",[s$]:"Are you sure? This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),[a$]:n()(f.FormattedMessage,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",[s$]:"Yes"})})))return}this.handleSave({[h$]:!t})},this.handleAllowDisableGuestsSwitcherClick=async()=>{const{[u$]:e}=this[c$],t=e[d$][g$];if(!t){if(!(await w[l$]({[r$]:n()(f.FormattedMessage,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",[s$]:"Are you sure? All guests in this workspace will be removed."}),[a$]:n()(f.FormattedMessage,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",[s$]:"Yes"})})))return}this.handleSave({[g$]:!t})},this[n$]=(e,t)=>{if(!t)return this[o$]();const{[u$]:i}=this[c$];this.handleSave({[e]:!i[d$][e]})},this[o$]=()=>{yB.y(this[i$],{from:"space_saml",for:t$})}}renderComponent(){return Qi.Z[d$].online?n()($i.Z,{},void 0,this.renderSecuritySettings()):this[e$]()}renderUpsell(){if(!(0,BJ.J)({[i$]:this[i$]}))return n()("div",{[JJ]:{border:`1px solid ${this.theme[XJ]}`,borderRadius:3,padding:16,[YJ]:void 0,[$J]:24}},void 0,!(0,te.isBusinessTierOrAbove)()&&n()(DJ.Z,{for:"business",from:"space_saml",upgradeMessage:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.button.business",[s$]:"Upgrade to Business"}),title:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.title.business",[s$]:"Upgrade for SAML SSO & more admin tools"}),caption:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.caption.business",[s$]:"The Business Plan includes single sign-on to manage employee access at scale, private teamspaces to collaborate on sensitive docs, and more."}),learnMoreRoute:"guides.securitySettings",[JJ]:{[$J]:"20px"}}),n()(DJ.Z,{for:t$,from:"space_saml",upgradeMessage:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.button.enterprise",[s$]:"Upgrade to Enterprise"}),title:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.title.enterprise",[s$]:"Upgrade for SCIM, advanced security & more"}),caption:n()(f.FormattedMessage,{id:"securitySAMLSettings.upsell.caption.enterprise",[s$]:"The Enterprise Plan allows you to automatically provision users and groups, and gain more visibility and controls across the workspace."}),learnMoreRoute:"guides.securitySettings"}))}renderSecuritySettings(){const{[u$]:e}=this[c$],t=.5,i=n()(bB.Z,{subscriptionTier:t$,analyticsName:"space_saml",[qJ]:this[o$],desktopStyle:{[QJ]:jJ,marginLeft:8,[YJ]:-3}}),o=o=>n()("div",{},void 0,n()("div",{[JJ]:{[QJ]:HJ,[GJ]:zJ,[KJ]:WJ},[qJ]:o?this.handleDisablePublicAccessSwitcherClick:this[o$]},void 0,n()("div",{[JJ]:this[VJ]()},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",[s$]:"Disable public page sharing"}),!o&&i,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{[YJ]:2,[UJ]:"80%"}},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",[s$]:"Disable the Share to web option in the Share menu on every page in this workspace."}))),n()("div",{[JJ]:{[YJ]:5,[OJ]:o?void 0:t}},void 0,n()(Sx.Z,{on:e[d$][h$],[NJ]:!o}))),n()(LP.Z,{size:24,[JJ]:{[OJ]:0}})),a=o=>{if(!(0,A.bq)())return n()("div",{},void 0,n()("div",{[JJ]:{[QJ]:HJ,[GJ]:zJ,[KJ]:WJ},[qJ]:()=>this[n$](m$,o)},void 0,n()("div",{[JJ]:this[VJ]()},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",[s$]:"Prevent members from editing the Workspace section"}),!o&&i,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{[YJ]:2,[UJ]:"85%"}},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",[s$]:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."}))),n()("div",{[JJ]:{[YJ]:5,[OJ]:o?void 0:t}},void 0,n()(Sx.Z,{on:e[d$][m$],[NJ]:!o}))),n()(LP.Z,{size:24,[JJ]:{[OJ]:0}}))},s=o=>n()("div",{},void 0,n()("div",{[JJ]:{[QJ]:HJ,[GJ]:zJ,[KJ]:WJ},[qJ]:o?this.handleAllowDisableGuestsSwitcherClick:this[o$]},void 0,n()("div",{[JJ]:this[VJ]()},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableGuests.label",[s$]:"Disable guests"}),!o&&i,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{[YJ]:2,[UJ]:"80%"}},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableGuests.caption",[s$]:"Prevent anyone from inviting people outside the workspace to pages."}))),n()("div",{[JJ]:{[YJ]:5,[OJ]:o?void 0:t}},void 0,n()(Sx.Z,{on:e[d$][g$],[NJ]:!o}))),n()(LP.Z,{size:24,[JJ]:{[OJ]:0}})),r=o=>n()("div",{},void 0,n()("div",{[JJ]:{[QJ]:HJ,[GJ]:zJ,[KJ]:WJ},[qJ]:()=>this[n$](p$,o)},void 0,n()("div",{[JJ]:this[VJ]()},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",[s$]:"Disable duplicating pages to other workspaces"}),!o&&i,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{[YJ]:2,[UJ]:"80%"}},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",[s$]:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."}))),n()("div",{[JJ]:{[YJ]:5,[OJ]:o?void 0:t}},void 0,n()(Sx.Z,{on:e[d$][p$],[NJ]:!o}))),n()(LP.Z,{size:24,[JJ]:{[OJ]:0}})),{[d$]:l}=e,c=o=>n()("div",{},void 0,n()("div",{[JJ]:{[QJ]:HJ,[GJ]:zJ,[KJ]:WJ},[qJ]:()=>this[n$]("disableExport",o)},void 0,n()("div",{[JJ]:this[VJ]()},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableExport.label",[s$]:"Disable export"}),!o&&i,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{[YJ]:2,[UJ]:"80%"}},void 0,n()(f.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableExport.caption",[s$]:"Prevent anyone from exporting as Markdown, CSV, or PDF."}))),n()("div",{[JJ]:{[YJ]:5,[OJ]:o?void 0:t}},void 0,n()(Sx.Z,{on:e[d$].disableExport,[NJ]:!o}))),n()(LP.Z,{size:24,[JJ]:{[OJ]:0}}));return(0,BJ.J)({[i$]:this[i$]})?n()(d.Fragment,{},void 0,n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:RJ,[s$]:"Security"})),void 0,o(!0),a(!0),s(!0),r(!0),c(!0),n()("div",{[JJ]:{height:36}})):n()(d.Fragment,{},void 0,this.renderUpsell(),n()("div",{[JJ]:this[LJ]()},void 0,n()("span",{[JJ]:{[EJ]:8}},void 0,n()(f.FormattedMessage,{id:RJ,[s$]:"Security"}))),void 0,o(l[h$]),a(l[m$]),s(l[g$]),r(l[p$]),c(l.disableExport),n()("div",{[JJ]:{height:32}}))}[e$](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,isMultiline:!0,[JJ]:{textAlign:zJ}},void 0,n()(f.FormattedMessage,{[s$]:"Please go online to manage security settings.",id:"securitySAMLSettings.offline.message"})))}handleSave(e){const{[u$]:t,spaceStore:i}=this[c$];AJ.y(this[i$],{spaceStore:i,[u$]:t,fields:e})}[LJ](){return{fontWeight:v.Z.fontWeight.medium,fontSize:18,borderBottom:`1px solid ${this.theme[XJ]}`,paddingBottom:6,[$J]:12,[QJ]:HJ,[GJ]:zJ}}[VJ](){return{fontSize:14,[EJ]:8,flexGrow:1}}}v$.displayName="SecuritySettings";const f$=(0,f.injectIntl)(v$);var y$=i(58047);const b$=i(85).ymU,S$=i(85).nx5,w$=i(85).PG2,M$=i(85).wJk,k$=i(85)._kV;function C$(e){window.__c={n:"SettingsPrompt"};const t=(0,Hi.O7)(),{onView:i}=e;return(0,d.useEffect)((()=>{i(t)}),[t,i]),n()("div",{},void 0,n()(LP.Z,{size:0}),n()(y$.N,{icon:e.icon,title:e.title,description:e[k$],[M$]:e[M$],[b$]:{text:e.buttonText,[w$]:t=>(e[M$](),e[w$](t))},secondaryAction:{icon:e=>m.Z.help(e),text:n()(f.FormattedMessage,{id:"settingsPrompt.learnMore.button",[S$]:"Learn more"}),[w$]:e.onClickLearnMore}}))}const Z$=i(85).P0R;class T$ extends c.Z{renderComponent(){return n()("div",{style:this.getStyle(),onMouseDown:this[Z$].onMouseDown,onClick:this[Z$].onClick,onDoubleClick:this[Z$].onDoubleClick,onContextMenu:this[Z$].onContextMenu},void 0,n()("div",{style:this.getSidebarStyle()},void 0,this[Z$].sidebar),n()("div",{style:this.getChildrenStyle()},void 0,this[Z$].children))}getStyle(){return{display:"flex",height:"100%",flexDirection:this[Z$].isReversed?"row-reverse":"row"}}getSidebarStyle(){return{height:"100%",background:this.theme.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"}}getChildrenStyle(){return{flexGrow:1,position:"relative",zIndex:1,height:"100%"}}}T$.displayName="SidebarBox";const P$=T$,I$=i(85).Wqi,F$=i(85).GID,_$=i(85).XhE,x$=i(85).wgE,A$=i(85).GCx,B$=i(85).H3N,D$=B$,E$={field:"last_active",[A$]:"desc"};async function L$(e){var t,i;const{[x$]:o,filter:n,spaceId:a,spaceAnalyticsStore:s}=e,r=null===(t=s[_$])||void 0===t?void 0:t.dailyUsersData;if(!r||n!==(null===(i=s[_$])||void 0===i?void 0:i.graphFilter)||s[F$]!==a){const e=await T.getDailyUsersAnalytics(o,{spaceId:a,activeWindow:"all_time"===n?B$:n});return"failed"===e.type?e.body:e.data}return r}async function R$(e){var t,i,o;const{[x$]:n,filter:a,sort:s,[I$]:r,spaceAnalyticsStore:l}=e,d=null===(t=l[_$])||void 0===t?void 0:t.tableFilter,c=null===(i=l[_$])||void 0===i?void 0:i.userTableSort;if(null===(o=l[_$])||void 0===o||!o.usersAndStats||d!==a||!c||c[A$]!==s[A$]||c.field!==s.field||l[F$]!==r.id){const e=await T.loadWorkspaceAnalyticsUsers(n,{spaceId:r.id,filters:{timeRange:a},sort:s});return"failed"===e.type?e.body:e.data.users.map((e=>({stats:e,userStore:go.U6.createChildStore(r,{table:Ya.KJ,id:e.userId})}))).filter((e=>{let{userStore:t}=e;return t.isDefined()}))}return l[_$].usersAndStats}function N$(e,t){if((0,gp.qC)(e)){const i=(0,vp.nX)(t,e);if(i)return i}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}const O$=i(85).KJB,U$={pageViews:0,[O$]:0,pagesCreated:0,pageEdits:0,topPages:[]};const V$=i(85).IZz,W$=i(85).$ls,K$={activeMembersCount:0,[W$]:0,activeGuestsCount:0,[V$]:0,topTeamspaces:[],topViewers:[],topEditors:[]};const z$=i(85).Yzm,G$=i(85).nx5,H$=i(85).PG2,q$=i(85).tNj;function j$(e){return n()(na.ZP,{popupType:tn.kQ.Popup,alignmentToOrigin:Sw.v.End,render:t=>{let{close:i}=t;return n()(Q$,{closePopup:i,[q$]:e[q$]})},renderOrigin:t=>{let{[H$]:i}=t;return n()(eo.Z,{style:e.style,[H$]:i},void 0,n()(f.FormattedMessage,{id:"spaceAnalytics.usersTab.export",[G$]:"Export as CSV"}))}})}function Q$(e){window.__c={n:"ExportAnalyticsMenu"};const{[q$]:t,closePopup:i}=e,o=(0,Hi.O7)(),a=(0,qi.VK)((()=>{var e;return null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,d.useCallback)((async e=>{if(a){switch(t){case _i.Users:S.trackUserAnalyticsExportRequested(o,{daysFilter:e}),await Xi.Tp(o,{spaceId:a,daysFilter:e});break;case _i.Content:S.trackContentAnalyticsExportRequested(o,{daysFilter:e}),await Xi.hN(o,{spaceId:a,daysFilter:e});break;default:(0,x.unreachable)(t)}i()}}),[o,a,t,i]),r=xw.Hz.map((e=>n()($o.Z,{focused:!1,[H$]:()=>s(e),title:J.default[z$](xw.Rh[e])},e)));return n()(Xo.Z,{menuType:jo.og.Popup},void 0,n()(on.Z,{},void 0,r))}const J$=i(85).D7I,$$=i(85).Yzm,Y$=i(85).MBB,X$=i(85).wgE,eY=i(85).fCB,tY=i(85).zDZ,iY=i(85).jkI,oY=i(85).$bT,nY=i(85).nx5,aY=(0,f.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",[nY]:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",[nY]:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",[nY]:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",[nY]:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",[nY]:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function sY(e){window.__c={n:"SpaceAnalyticsEmptyState"};const t=(0,ji.yK)((e=>({outerDiv:{display:"flex",[oY]:"column",justifyContent:iY,height:"80%",gap:24},innerDiv:{display:"flex",[oY]:"column",textAlign:iY,alignItems:iY,gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),i=(0,Hi.O7)(),{type:o,spaceName:a}=e,r=function(e,t){switch(e){case"empty":return{heading:J.default[$$](aY.emptyAnalyticsHeading),[tY]:J.default[$$](aY.emptyAnalyticsDescription)};case"disabled":const e=t?d[J$](f.FormattedMessage,s()({},aY.disabledAnalyticsDescription,{values:{name:t,br:n()("br",{})}})):d[J$](f.FormattedMessage,s()({},aY.disabledAnalyticsDescriptionNoSpaceName,{values:{br:n()("br",{})}}));return{heading:J.default[$$](aY.disabledAnalyticsHeading),[tY]:e}}}(o,a);return n()("div",{style:t.outerDiv},void 0,n()("div",{style:t.innerDiv},void 0,m.Z.analyticsSearch(t.analyticsIcon),n()(Ji.Z,{isSecondaryColor:!0,style:t.header},void 0,r.heading),n()(Ji.Z,{isSecondaryColor:!0},void 0,r[tY]),n()(Io.Z,{onClick:()=>M[eY]({[X$]:i,url:(0,X.getLocalizedUrl)(Y$)}),style:t.learnMore},void 0,m.Z.help(t.learnMoreIcon),n()(Ji.Z,{isSmall:!0},void 0,n()(f.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",[nY]:"Learn more"})))))}var rY=i(35314);const lY=i(85).D7I;function dY(e){let{num:t,abbreviateNumber:i}=e;window.__c={n:"NumberDisplay"};const o=(0,f.useIntl)(),a=(0,j_.E2)(o),s=t.toLocaleString(a),r=Intl.NumberFormat(a,{notation:"compact",maximumFractionDigits:1}).format(t);return i?n()(ro.Z,{placement:ro.Z.Placement.Bottom,render:e=>d[lY]("span",e,r),renderTooltip:()=>s}):n()("span",{},void 0,s)}const cY=i(85).H1U,uY=i(85).jkI,mY=i(85).UPJ,pY=i(85).$bT,gY=i(85).nx5,hY=(i(85).xVD,i(85).z8h),vY=i(85).XEN,fY=i(85).vvq,yY=i(85).OM8,bY=i(85).L_E,SY=i(85).BQ6;function wY(e){let{icon:t,iconStyles:i,textStyles:o,[SY]:a,title:s,byline:r,loading:l,error:d}=e;window.__c={n:"AnalyticsCardOverview"};const c=function(e,t,i){return(0,ji.yK)((o=>({title:{fontWeight:v.Z.fontWeight.medium,fontSize:16},byline:{fontSize:v.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",[pY]:"column",[mY]:uY,[cY]:uY,width:"100%",...t},[hY]:{display:"flex",[pY]:"row",[mY]:uY,[cY]:uY,gap:8},icon:{height:28,width:28,color:o.lightTextColor,fill:"currentcolor",...e},[bY]:{height:"100%",flex:1,display:"flex",[pY]:"row",[mY]:uY,[cY]:uY,border:`1px solid ${o.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...i},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:6},errorTitle:{textAlign:uY,color:Bv.ZP.red}})),[e,t,i])}(i,o,a);return l?n()("div",{[SY]:c[bY]},void 0,n()("div",{[SY]:c.textContainer},void 0,n()("div",{[SY]:c.loadingTitle},void 0,n()(rw.Z,{paragraphs:[{[yY]:18,lineMargin:0,[fY]:[100],repeat:0,[vY]:0}]})),r?n()("div",{[SY]:c.loadingByline},void 0,n()(rw.Z,{paragraphs:[{[yY]:14,lineMargin:0,[fY]:[100],repeat:0,[vY]:0}]})):null)):d?n()("div",{[SY]:c[bY]},void 0,n()("div",{[SY]:c[hY]},void 0,n()(Ji.Z,{[SY]:c.errorTitle},void 0,(0,gp.Jx)(d)?d.message:n()(f.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",[gY]:"Something went wrong.{br}Try refreshing the page.",values:{br:n()("br",{})}})))):n()("div",{[SY]:c[bY]},void 0,t?t(c.icon):null,n()("div",{[SY]:c.textContainer},void 0,n()(Ji.Z,{[SY]:c.title},void 0,s),r?n()(Ji.Z,{[SY]:c.byline},void 0,r):null))}var MY=i(67579);const kY=i(85).$Vg,CY=i(85).$bT,ZY=i(85).UPJ,TY=i(85).jkI,PY=i(85).H1U,IY=i(85).X_m,FY=i(85).Joh,_Y=i(85).Gpy,xY=i(85).Yzm,AY=(i(85).Oki,i(85).BQ6),BY=i(85).P3s,DY=i(85).D7I,EY=i(85).erQ,LY=i(85).MBB,RY=i(85).nx5,NY=(i(85).oGA,i(85).Zij),OY=i(85).z8h,UY=i(85).L_E,VY=i(85).KJB,WY=i(85).TH3,KY=i(85).W3n,zY=640;function GY(e){let{data:t,[KY]:i,error:o,daysFilter:a,setDaysFilter:r}=e;window.__c={n:"ContentAnalyticsSummaries"};const[l,c]=(0,rY.e)(),u=(0,ji.yK)((e=>({[NY]:{fontWeight:v.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",[PY]:TY,[ZY]:TY},infoIcon:{marginLeft:4},[UY]:{display:"flex",[CY]:"column",gap:16},[OY]:{display:"flex",[CY]:"row",[ZY]:"space-between",[PY]:TY,gap:16},cardContainer:{[ZY]:kY,gap:18},cardTextContainer:{[PY]:kY}})),[]),{[WY]:p,[VY]:g,pagesCreated:h,pageEdits:y}=t,b=(0,Hi.O7)(),w=(0,d.useCallback)((e=>{S.trackContentAnalyticsEngagementTimerangeFilterChange(b,{daysFilter:e}),r(e)}),[b,r]);return d[DY]("div",{[AY]:u[UY],ref:l},n()("div",{[AY]:u[OY]},void 0,n()(Ji.Z,{[AY]:u[NY]},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",[RY]:"Content engagement"}),n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[DY](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(LY),[BY]:EY,[AY]:u.infoIcon})),[FY]:()=>n()(f.FormattedMessage,"all_time"!==a?{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",[RY]:"Activity on all workspace pages (includes private and shared) over the {dateRange}",[_Y]:{dateRange:J.default[xY](xw.xX[a])}}:{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",[RY]:"All time activity on all pages in the workspace (includes private and shared)"})})),n()(MY.f,{currentFilter:a,onChangeFilter:w})),n()(xN,{gap:16},void 0,n()(AN,{row:1,col:1},void 0,n()(wY,{[AY]:u.cardContainer,textStyles:u.cardTextContainer,[KY]:i,error:o,icon:m.Z.eyePadded,iconStyles:{[IY]:48,width:48},[NY]:n()(f.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",[RY]:"{pageViews} total views",[_Y]:{[WY]:n()(dY,{abbreviateNumber:c<zY,num:p})}}),byline:n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",[RY]:"{uniquePageViews} unique page views",[_Y]:{[VY]:n()(dY,{abbreviateNumber:c<zY,num:g})}}))})),n()(AN,{row:1,col:2},void 0,n()(wY,{[AY]:u.cardContainer,textStyles:u.cardTextContainer,[KY]:i,error:o,icon:m.Z.searchInPage,iconStyles:{[IY]:36,width:36},[NY]:n()(f.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",[RY]:"{pagesCreated} pages created",[_Y]:{pagesCreated:n()(dY,{abbreviateNumber:c<zY,num:h})}}),byline:n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",[RY]:"{pageEdits} edits",[_Y]:{pageEdits:n()(dY,{abbreviateNumber:c<zY,num:y})}}))}))))}const HY=i(85).Yzm,qY=i(85).D7I;function jY(e){const{tooltipMessageDescriptor:t,columnHeader:i}=e;return n()(ro.Z,{placement:ro.Z.Placement.Top,renderTooltip:e=>d[qY]("div",e,d[qY](f.FormattedMessage,t)),render:e=>d[qY]("div",e,J.default[HY](i))})}const QY=i(85).PP_,JY=i(85).auS,$Y=i(85).j7K,YY=i(85).y79,XY=i(85).nx5,eX=(i(85).T36,i(85).D7I),tX=i(85).fCB,iX=i(85).uGP,oX=i(85).LIR;function nX(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const i=(0,Hi.O7)(),o=(0,qi.qz)(void 0,ea.Z),a=(0,ji.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e[JY],fill:QY},copyLinkIcon:{height:15,width:15,color:e[JY],fill:QY},openLinkIcon:{height:15,width:15,color:e[JY],fill:QY,transform:"rotate(-45deg)"}})),[]);const r={key:"actions",render:e=>d[eX](on.Z,e),items:[{key:"copy-link",render:e=>d[eX]($o.Z,s()({},e,{icon:m.Z.link(a.copyLinkIcon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",[XY]:"Copy link to page"})})),action:async function(){const e=(0,Yn.ZP)({store:t,[oX]:Jn.tY.CopyLink});await $n.copyString({environment:i,stringValue:e,copiedMessage:$n.clipboardMessages[iX]}),o.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>d[eX]($o.Z,s()({},e,{icon:m.Z.arrowRight(a.openLinkIcon),title:n()(f.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",[XY]:"Open in new tab"})})),action:function(){const e=(0,Yn.ZP)({store:t,[oX]:Jn.tY.LinkInPage});M[tX]({environment:i,url:e}),o.setState({open:!1})}}]};return n()(na.ZP,{popupType:tn.kQ.Popup,alignmentToOrigin:tn.ZP.Alignment.Center,placementToOrigin:tn.ZP.Placement.Right,style:{width:248},render:()=>n()(Xo.Z,{menuType:jo.og.Popup,width:248},void 0,n()(en.Z,{type:en.i[YY],[$Y]:void 0,sections:[r]})),buttonPopupStore:o,renderOrigin:e=>d[eX](aa.Z,s()({icon:m.Z.dots},e))})}const aX=i(85).Yzm,sX=i(85).IF2,rX=i(85).D7I,lX=i(85).KJB,dX=i(85)._F2,cX=i(85).cMN,uX=i(85).nqP,mX=i(85).F7X,pX=i(85).JIU,gX=i(85).OHs,hX=(i(85).DJK,i(85).Mk5),vX=i(85).dBt,fX=i(85).hDW,yX=i(85).lUv,bX=i(85).O9h,SX=i(85).SPm,wX=i(85).XZb,MX=i(85).jYm,kX=i(85).nx5,CX=(0,f.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",[kX]:"Number of times users have viewed the page"},[MX]:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",[kX]:"Total number of users that have viewed page in the selected period"}}),ZX={id:"page",[wX]:n()(DX,{[SX]:xw.y3.page}),[bX]:e=>n()(To,{[fX]:e[yX],rightIcon:n()(nX,{[fX]:e[yX]})}),[vX]:{width:320,maxWidth:320},[hX]:!1},TX={id:"location",[wX]:n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",[kX]:"Location"}),[bX]:e=>n()(Qn,{[fX]:e[yX],[gX]:e[gX]}),[vX]:{width:140},[hX]:!1},PX={id:"audience",[wX]:n()(DX,{[SX]:xw.y3.audience}),[bX]:e=>n()(Ji.Z,{},void 0,Kn(e.audience)),[vX]:{width:140},[hX]:!1},IX={id:"views",[wX]:n()(jY,{tooltipMessageDescriptor:CX.views,columnHeader:xw.y3.allViews}),[bX]:e=>n()(Ji.Z,{},void 0,e.views.toLocaleString()),[vX]:{width:100},[hX]:!0},FX={id:MX,[wX]:n()(jY,{tooltipMessageDescriptor:CX[MX],columnHeader:xw.y3[MX]}),[bX]:e=>n()(Ji.Z,{},void 0,e[MX].toLocaleString()),[vX]:{width:100},[hX]:!0},_X={id:pX,[wX]:n()(DX,{[SX]:xw.y3[pX]}),[bX]:e=>e.createdById?n()(Ws,{[fX]:e[yX],userIds:[e.createdById]}):null,[vX]:{width:140},[hX]:!1},xX={id:mX,[wX]:n()(DX,{[SX]:xw.y3.createdAt}),[bX]:e=>n()(uo,{dateTs:e[mX]}),[vX]:{width:100},[hX]:!1},AX=[ZX,IX,FX,TX,PX,{id:uX,[wX]:n()(DX,{[SX]:xw.y3[uX]}),[bX]:e=>e.lastEditedById?n()(Ws,{[fX]:e[yX],userIds:[e.lastEditedById]}):null,[vX]:{width:140},[hX]:!1},{id:cX,[wX]:n()(DX,{[SX]:xw.y3.lastEditedAt}),[bX]:e=>n()(uo,{dateTs:e[cX]}),[vX]:{width:100},[hX]:!1},_X,xX];function BX(e){let{[dX]:t,analyticsByPageId:i,runNewSearch:o,sort:a,setSort:s,loadNextPage:r,loading:l,error:c}=e;window.__c={n:"ContentAnalyticsTable"};const u=(0,qi.VK)((()=>t.map((e=>{var t,o,n;return{id:e.id,isClickable:!1,[yX]:e,[gX]:(0,oo.getTeam)(e),views:(null===(t=i.get(e.id))||void 0===t?void 0:t.pageViews)||0,[MX]:(null===(o=i.get(e.id))||void 0===o?void 0:o[lX])||0,[mX]:e.getCreatedTime(),[cX]:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=i.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,i]),m=(0,d.useMemo)((()=>function(e){const t=AX.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id));return t?{column:t,[sX]:"asc"===e.direction}:void 0}(a)),[a]),p=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:AX,theme:e,containerMarginTop:0})),[]),g=(0,ji.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return c?n()(qo,{error:c,runNewSearch:o}):d[rX](d.Fragment,null,n()(no.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:AX,rows:u,sortState:m,onSortStateChanged:e=>{s(function(e){const t="views"===e.column.id?"pageViews":lX,i=e[sX]?"asc":"desc";return{field:t,direction:i}}(e))},onScrollBottom:r,renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,style:g.emptyQuery},void 0,!l&&0===t.length&&n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",[kX]:"No pages found with your query."})),styles:p}),l?n()(ao.Z,{style:g.loadingSpinner}):null)}function DX(e){let{[SX]:t}=e;window.__c={n:"FormatDefinedMessage"};const i=(0,f.useIntl)();return d[rX](d.Fragment,null,i[aX](t))}const EX=i(85).mjJ,LX=i(85).iDK,RX=i(85).UzK,NX=i(85).wns,OX=i(85).eHI,UX=i(85).W3n,VX=i(85).Z0E,WX=i(85).JJP,KX=i(85).HSU,zX=i(85)._F2,GX=i(85).bl5,HX=i(85).Lyb,qX=i(85).F7X,jX=i(85).cMN,QX={query:"",createdBy:[],[jX]:{starting:void 0,ending:void 0},[qX]:{starting:void 0,ending:void 0},teamIds:[]},JX={field:"pageViews",direction:"desc"},$X=D$,YX={[HX]:QX,sort:JX,[GX]:$X,[zX]:[],analyticsByPageId:new Map,[KX]:0,[WX]:void 0,[VX]:!0,[UX]:!1,error:void 0,[OX]:!1};const XX=i(85).jkI,e0=i(85).Yzm,t0=i(85).L_E,i0=i(85).F7X,o0=i(85).cMN,n0=i(85).JIU,a0=i(85).mjJ,s0=i(85).Wqi,r0=i(85).nx5,l0=i(85).cZW,d0=(0,f.defineMessages)({[l0]:{id:"settings.workspaceAnalytics.contentTab.placeholder",[r0]:"Search by title"}});function c0(e){let{[s0]:t,timeRange:i,filters:o,runNewSearch:a,setFilters:s,setTimeRange:r}=e;window.__c={n:"SearchInputsSection"};const l=(0,qi.VK)((()=>CK.Z.state.teams),[]),d=(0,ji.yK)((e=>({[t0]:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:XX},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:XX,justifyContent:XX,gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return n()("div",{style:d[t0]},void 0,n()(em,{mode:Yu.OnChange,query:o.query,setQueryFilter:function(e){s({query:e},{[a0]:!0})},placeholderText:J.default[e0](d0[l0])}),n()("div",{style:d.filterPillsContainer},void 0,n()("div",{style:d.timeRangeContainer},void 0,n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",[r0]:"Views from"})),n()(MY.f,{currentFilter:i,onChangeFilter:r})),n()(Zm,{selectedTeamIds:o.teamIds,setSelectedTeamIds:function(e){s({teamIds:e})},onMenuClose:a,teamStores:l}),n()(tl,{[s0]:t,createdByFilterIds:o[n0],setCreatedByFilter:function(e){s({[n0]:e})},runNewSearch:a,includeGuests:!1}),n()(Gu,{[o0]:o[o0],[i0]:o[i0],setLastEditedTime:function(e){s({[o0]:e,[i0]:{starting:void 0,ending:void 0}},{[a0]:!0})},setCreatedOnTime:function(e){s({[i0]:e,[o0]:{starting:void 0,ending:void 0}},{[a0]:!0})}})))}const u0=i(85).tNj,m0=i(85).Joh,p0=i(85).Yzm,g0=(i(85).Oki,i(85).P3s),h0=i(85).D7I,v0=i(85).erQ,f0=i(85).MBB,y0=i(85).ESK,b0=i(85).nx5,S0=i(85).PPD,w0=i(85).$bT,M0=i(85).L_E,k0=i(85).W3n,C0=i(85)._F2,Z0=i(85).Wqi;function T0(e){var t;let{[Z0]:i,contentEngagement:o}=e;window.__c={n:"SpaceAnalyticsContentTab"};const a=(0,d.useRef)(!1),{loadNextPage:s,[C0]:r,analyticsByPageId:c,runNewSearch:u,setFilters:m,setTimeRange:p,timeRange:g,filters:h,sort:v,setSort:f,[k0]:y,error:b}=function(e){let{spaceStore:t}=e;const i=(0,Hi.O7)(),[o,n]=(0,d.useState)(YX),a=(0,d.useRef)(QX),s=(0,d.useRef)(JX),r=(0,d.useRef)($X),c=(0,d.useCallback)((async e=>{let{[NX]:d,[RX]:c}=e;const u=!l().isEqual(o[HX],a[LX])||!l().isEqual(o.sort,s[LX])||!l().isEqual(o[GX],r[LX]);if(!c&&!u)return;a[LX]=o[HX],s[LX]=o.sort,r[LX]=o[GX];let m=o[UX],p=o.error,g=o[VX],h=o[WX];if(d&&(n((e=>({...YX,[HX]:e[HX],[GX]:e[GX],sort:e.sort}))),m=YX[UX],p=YX.error,g=YX[VX],h=YX[WX]),!g||m)return;if(p)return;n((e=>({...e,[UX]:!0})));const v=await T.loadContentAnalytics(i,{spaceId:t.id,sort:o.sort,titleQuery:o[HX].query,[HX]:{inTeams:o[HX].teamIds,[jX]:(0,gi.Hq)(o[HX][jX]),[qX]:(0,gi.Hq)(o[HX][qX]),createdBy:o[HX].createdBy},[GX]:o[GX],startCursor:h});if("failed"===v.type)return void n((e=>({...e,[UX]:!1,error:v.error})));const f=v.data.results;n((e=>{const t=[],o=new Map(e.analyticsByPageId),n=new Set(e[zX].map((e=>e.id)));for(const s of f){const e=s.id,a=s.analytics;if(!n.has(e)){const n=new go.G(i,{table:Nm.iU,id:e});t.push(n),o.set(e,a)}}const a=[...e[zX],...t];return{...e,[zX]:a,analyticsByPageId:o,[UX]:!1,error:void 0,[KX]:e[KX]+1,[WX]:v.data.nextCursor,[VX]:Boolean(v.data.nextCursor)}}))}),[i,t,o[HX],o.sort,o[GX],o[UX],o.error,o[VX],o[WX]]);(0,d.useEffect)((()=>{o[OX]&&(n((e=>({...e,[OX]:!1}))),c({[NX]:!0,[RX]:!1}))}),[o[OX],c]);const u=(0,d.useCallback)((async()=>{o[OX]||await c({[NX]:!1,[RX]:!0})}),[o[OX],c]),m=(0,d.useCallback)((async e=>{await c({[NX]:!0,[RX]:e||!1})}),[c]),p=(0,d.useCallback)(((e,t)=>{n((i=>({...i,[HX]:{...i[HX],...e},...null!=t&&t[EX]?{[OX]:null==t?void 0:t[EX]}:void 0})));for(const o of(0,x.objectKeys)(e))l().isEqual(e[o],QX[o])||S.trackContentAnalyticsTableFilterChange(i,{filter:o,value:"createdBy"===o||"teamIds"===o?e[o]:void 0})}),[i]),g=(0,d.useCallback)((e=>{n((t=>({...t,[GX]:e,[OX]:!0}))),S.trackContentAnalyticsTableTimerangeFilterChange(i,{daysFilter:e})}),[i]),h=(0,d.useCallback)((e=>{n((t=>({...t,sort:e,[OX]:!0}))),S.trackContentAnalyticsTableSortChange(i,{column:e.field,isAscending:"asc"===e.direction})}),[i]);return{...o,loadNextPage:u,runNewSearch:m,setFilters:p,setTimeRange:g,setSort:h}}({[Z0]:i}),w=(0,ji.yK)((e=>({[M0]:{display:"flex",[w0]:"column",gap:16}})),[]),M=(0,qi.VK)((()=>Boolean(i[S0]())),[i]);(0,d.useEffect)((()=>{a.current||(u(!0),a.current=!0)}),[u]);const k=(0,qi.VK)((()=>i.getName()),[i]);return"NotFoundError"===(null==o||null===(t=o.error)||void 0===t?void 0:t.name)?n()(sY,{type:"empty",spaceName:k}):n()("div",{style:w[M0]},void 0,n()(GY,{data:o.data,[k0]:o[k0],error:o.error,daysFilter:o.daysFilter,setDaysFilter:o.setDaysFilter}),n()(P0,{[S0]:M,daysFilter:g}),n()(c0,{[Z0]:i,runNewSearch:u,setFilters:m,filters:h,timeRange:g,setTimeRange:p}),n()(BX,{[C0]:r,analyticsByPageId:c,runNewSearch:u,sort:v,setSort:f,loadNextPage:s,[k0]:y,error:b}))}function P0(e){window.__c={n:"ContentTableHeader"};const t=(0,ji.yK)((()=>({sectionTitle:{fontWeight:v.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",[w0]:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{[S0]:i,daysFilter:o}=e,a=n()("div",{style:t.sectionTitleSection},void 0,n()(Ji.Z,{style:t.sectionTitle},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",[b0]:"Pages"})),n()(ro.Z,{placement:ro.Z[y0].Bottom,render:e=>d[h0](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(f0),[g0]:v0,style:t.helpInfo})),[m0]:()=>n()(f.FormattedMessage,"all_time"!==o?{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",[b0]:"Activity from the {dateRange} on pages you have access to",values:{dateRange:J.default[p0](xw.xX[o])}}:{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",[b0]:"All time activity on pages you have access to in the workspace"})}));return n()("div",{style:t.wrapper},void 0,a,i&&n()(j$,{style:t.exportButton,[u0]:_i.Content}))}var I0=i(76798);const F0=i(85).jkI,_0=i(85).nx5,x0=(i(85).xVD,i(85).XEN),A0=i(85).vvq,B0=i(85).OM8,D0=i(85).Lbi,E0=i(85).NuR,L0=i(85).g4H,R0=i(85).gGi,N0=i(85).H1U,O0=i(85).$Vg,U0=i(85).UPJ,V0=i(85).$bT,W0=i(85).tBn,K0=i(85).D7I,z0=i(85).BQ6,G0=i(85).L_E;function H0(e){let{title:t,items:i,loading:o,error:a}=e;window.__c={n:"AnalyticsCardList"};const s=(0,ji.yK)((e=>({title:{fontWeight:v.Z.fontWeight.semibold,marginBottom:8},[G0]:{flex:1,display:"flex",[V0]:"column",[U0]:O0,[N0]:O0,height:R0,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12}})),[]);return n()("div",{[z0]:s[G0]},void 0,n()(Ji.Z,{[z0]:s.title},void 0,t),o?d[K0](d[W0],null,n()(j0,{}),n()(j0,{}),n()(j0,{}),n()(j0,{}),n()(j0,{})):a?d[K0](d[W0],null,n()(Q0,{})):i.map(((e,t)=>n()(q0,{item:e},t))))}function q0(e){let{item:t}=e;window.__c={n:"CardListItem"};const{store:i,[L0]:o}=t,a=(0,f.useIntl)(),s=J0(),r=(0,qi.VK)((()=>{switch(i.table){case"block":return n()("div",{[z0]:s[E0]},void 0,n()(ho.Z,{icon:i.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),n()(I0.Z,{store:i}));case"notion_user":return n()("div",{[z0]:s[E0]},void 0,n()(es.Z,{userStore:i,size:18}),n()(Ji.Z,{},void 0,i[D0](a)));case"team":const e=i.getName();return n()("div",{[z0]:s[E0]},void 0,n()(zn.p,{disabled:!0,store:i,size:20}),n()(Ji.Z,{},void 0,e));default:(0,x.unreachable)(i)}}),[i,s[E0],a]);return n()("div",{[z0]:s[G0]},void 0,n()(Ji.Z,{[z0]:s.label},void 0,r),n()("div",{[z0]:s[L0]},void 0,n()(Ji.Z,{isSecondaryColor:!0,isSmall:!0},void 0,o)))}function j0(){window.__c={n:"LoadingCardListItem"};const e=J0();return n()("div",{[z0]:e[G0]},void 0,n()(Ji.Z,{[z0]:e.label},void 0,n()(rw.Z,{paragraphs:[{[B0]:14,lineMargin:3,[A0]:[80],repeat:0,[x0]:2}]})),n()("div",{[z0]:e.loadingCaption},void 0,n()(rw.Z,{paragraphs:[{[B0]:14,lineMargin:3,[A0]:[80],repeat:0,[x0]:2}]})))}function Q0(){window.__c={n:"ErrorCardListItem"};const e=J0();return n()("div",{[z0]:e[G0]},void 0,n()(Ji.Z,{[z0]:e.errorLabel},void 0,n()(f.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",[_0]:"Something went wrong.{br}Try refreshing the page.",values:{br:n()("br",{})}})))}function J0(){return(0,ji.yK)((e=>({[G0]:{width:R0,display:"flex",[V0]:"row",[U0]:"space-between",[N0]:F0,paddingBlock:4,gap:4},[E0]:{display:"flex",[V0]:"row",[U0]:O0,gap:8,[N0]:F0,width:R0},label:{width:R0},[L0]:{display:"flex",[U0]:F0,[N0]:F0},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:R0,textAlign:F0,color:Bv.ZP.red}})),[])}const $0=i(85).$bT,Y0=i(85).X_m,X0=i(85).Joh,e5=i(85).Yzm,t5=(i(85).Oki,i(85).P3s),i5=i(85).D7I,o5=i(85).erQ,n5=i(85).MBB,a5=(i(85).oGA,i(85).Zij),s5=i(85).z8h,r5=i(85).L_E,l5=i(85).Gpy,d5=i(85).nx5,c5=i(85).KJB,u5=i(85).TH3,m5=i(85).o8N,p5=i(85).W3n;function g5(e){let{data:t,[p5]:i,[m5]:o,daysFilter:a,setDaysFilter:r}=e;window.__c={n:"ContentEngagement"};const l=(0,Hi.O7)(),c=(0,ji.yK)((e=>({[a5]:{fontWeight:v.Z.fontWeight.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},[r5]:{display:"flex",[$0]:"column",gap:16},[s5]:{display:"flex",[$0]:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[u,p]=(0,rY.e)(),{[u5]:g,[c5]:h,pageEdits:y,topPages:b}=t,w=(0,qi.VK)((()=>b.map((e=>{let{pageId:t,[u5]:i}=e;return{store:new go.G(l,{id:t,table:Nm.iU}),caption:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",[d5]:"{pageViews} views",[l5]:{[u5]:n()(dY,{abbreviateNumber:!1,num:i})}})}}))),[l,b]),M=(0,d.useCallback)((e=>{r(e),S.trackOverviewAnalyticsFilterChange(l,{filter:"content_engagement",daysFilter:e})}),[l,r]);return d[i5]("div",{style:c[r5],ref:u},n()("div",{style:c[s5]},void 0,n()(Ji.Z,{style:c[a5]},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.title",[d5]:"Content engagement"}),n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[i5](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(n5),[t5]:o5,style:c.helpInfo})),[X0]:()=>n()(f.FormattedMessage,"all_time"!==a?{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",[d5]:"Activity on all pages in the workspace over the {dateRange}",[l5]:{dateRange:J.default[e5](xw.xX[a])}}:{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",[d5]:"All time activity on all pages in the workspace"})})),n()(MY.f,{currentFilter:a,onChangeFilter:M})),n()(xN,{gap:16},void 0,n()(AN,{row:1,col:1,colEnd:3},void 0,n()(wY,{[p5]:i,[m5]:o,icon:m.Z.eyePadded,textStyles:c.overviewCard,[a5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.views",[d5]:"{pageViews} total views",[l5]:{[u5]:n()(dY,{abbreviateNumber:p<640,num:g})}})})),n()(AN,{row:2,col:1,colEnd:3},void 0,n()(wY,{[p5]:i,[m5]:o,icon:m.Z.personCircle,textStyles:c.overviewCard,iconStyles:{[Y0]:18,width:18},[a5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",[d5]:"{uniquePageViews} unique page views",[l5]:{[c5]:n()(dY,{abbreviateNumber:p<640,num:h})}})})),n()(AN,{row:3,col:1,colEnd:3},void 0,n()(wY,{[p5]:i,[m5]:o,icon:m.Z.editPropertyType,textStyles:c.overviewCard,iconStyles:{[Y0]:18,width:18},[a5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",[d5]:"{pageEdits} edits",[l5]:{pageEdits:n()(dY,{abbreviateNumber:p<640,num:y})}})})),n()(AN,{row:1,rowEnd:4,col:3,colEnd:5},void 0,n()(H0,{[p5]:i,[m5]:o,[a5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",[d5]:"Most popular pages"}),items:w}))))}const h5=i(85).FPc,v5=(i(85).i9T,i(85).DO4),f5=i(85).ewQ,y5=i(85).PP_,b5=i(85).$bT,S5=i(85).jkI,w5=i(85).H1U,M5=i(85).bm2,k5=i(85).jIi,C5=i(85).mwe,Z5=i(85).KIV,T5=i(85).Joh,P5=i(85).Dl7,I5=i(85).Yzm,F5=(i(85).OBq,i(85).zhE),_5=i(85).BQ6,x5=i(85).P3s,A5=i(85).D7I,B5=i(85).erQ,D5=i(85).MBB,E5=(i(85).oGA,i(85).Zij),L5=i(85).z8h,R5=i(85).L_E,N5=i(85).Gpy,O5=i(85).nx5,U5=i(85).TH3,V5=i(85).IZz,W5=i(85).$ls,K5=i(85).o8N,z5=i(85).W3n;function G5(e){let{data:t,[z5]:i,[K5]:o,daysFilter:a,setDaysFilter:r}=e;window.__c={n:"UserEngagement"};const l=(0,Hi.O7)(),{activeMembersCount:c,[W5]:u,activeGuestsCount:m,[V5]:p,topTeamspaces:g,topViewers:h,topEditors:y}=t,b=(0,ji.yK)((e=>({[E5]:{fontWeight:v.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",[w5]:S5},helpInfo:{marginLeft:4},[R5]:{display:"flex",[b5]:"column",gap:16},summaryCard:{height:70},[L5]:{display:"flex",[b5]:"row",justifyContent:"space-between",[w5]:S5,gap:16}})),[]),[w,M]=(0,rY.e)(),k=(0,d.useCallback)((e=>{S.trackOverviewAnalyticsFilterChange(l,{filter:"user_engagement",daysFilter:e}),r(e)}),[l,r]),C=(0,qi.VK)((()=>g.map((e=>{let{teamspaceId:t,[U5]:i}=e;return{store:new go.zX(l,{id:t,table:Nn.e0}),caption:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",[O5]:"{pageViews} views",[N5]:{[U5]:n()(dY,{abbreviateNumber:!0,num:i})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[l,g]),Z=(0,qi.VK)((()=>h.map((e=>{let{userId:t,[U5]:i}=e;return{store:new go.U6(l,{id:t,table:Ya.KJ}),caption:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",[O5]:"{pageViews} views",[N5]:{[U5]:n()(dY,{abbreviateNumber:!0,num:i})}})}})).slice(0,5)),[l,h]),T=(0,qi.VK)((()=>y.map((e=>{let{userId:t,pageEdits:i}=e;return{store:new go.U6(l,{id:t,table:Ya.KJ}),caption:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",[O5]:"{pageEdits} edits",[N5]:{pageEdits:n()(dY,{abbreviateNumber:!0,num:i})}})}})).slice(0,5)),[l,y]);return d[A5]("div",{[_5]:b[R5],ref:w},n()("div",{[_5]:b[L5]},void 0,n()(Ji.Z,{[_5]:b[E5]},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.title",[O5]:"User engagement"}),n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[A5](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(D5),[x5]:B5,[_5]:b.helpInfo})),[T5]:()=>n()(f.FormattedMessage,"all_time"!==a?{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",[O5]:F5,[N5]:{dateRange:J.default[I5](xw.xX[a])}}:{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",[O5]:P5})})),n()(MY.f,{currentFilter:a,onChangeFilter:k})),n()(xN,{gap:16},void 0,n()(AN,{row:1,col:1},void 0,n()(wY,{[_5]:b.summaryCard,[z5]:i,[K5]:o,[E5]:n()(f.FormattedMessage,{id:Z5,[O5]:"{activeMembersCount} active members",[N5]:{activeMembersCount:n()(dY,{abbreviateNumber:M<640,num:c})}}),byline:void 0!==u?n()(H5,{userType:C5,daysFilter:a,count:c,previousCount:u}):null})),n()(AN,{row:1,col:2},void 0,n()(wY,{[_5]:b.summaryCard,[z5]:i,[K5]:o,[E5]:n()(f.FormattedMessage,{id:k5,[O5]:"{activeGuestsCount} active guests",[N5]:{activeGuestsCount:n()(dY,{abbreviateNumber:M<640,num:m})}}),byline:void 0!==p?n()(H5,{userType:M5,daysFilter:a,count:m,previousCount:p}):null}))),n()(xN,{gap:16},void 0,n()(AN,{row:1,col:1},void 0,n()(H0,{[z5]:i,[K5]:o,[E5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",[O5]:"Most active teamspaces"}),items:C})),n()(AN,{row:1,col:2},void 0,n()(H0,{[z5]:i,[K5]:o,[E5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",[O5]:"Most active viewers"}),items:Z})),n()(AN,{row:1,col:3},void 0,n()(H0,{[z5]:i,[K5]:o,[E5]:n()(f.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",[O5]:"Most active editors"}),items:T}))))}function H5(e){let{userType:t,daysFilter:i,count:o,previousCount:a}=e;window.__c={n:"MetricsChangeMessage"};const s=0===o&&0===a?0:Math.round((o-a)/a*100);let r;r=s===1/0?function(e,t,i){if("all_time"===i)return n()(f.FormattedMessage,{id:v5,[O5]:"No changes yet"});return n()(f.FormattedMessage,"guests"===e?{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",[O5]:"{changeValue} more guests than previous {numberOfDays} days",[N5]:{changeValue:t.toLocaleString(),numberOfDays:xw.ez[i].toLocaleString()}}:{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",[O5]:"{changeValue} more members than previous {numberOfDays} days",[N5]:{changeValue:t.toLocaleString(),numberOfDays:xw.ez[i].toLocaleString()}})}(t,o,i):function(e,t){switch(t){case"all_time":return n()(f.FormattedMessage,0===e?{id:v5,[O5]:"No changes yet"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",[O5]:"{changeInPercentage}% more since the start",[N5]:{[h5]:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",[O5]:"{changeInPercentage}% less since the start",[N5]:{[h5]:Math.abs(e)}});case"last_90_days":return n()(f.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",[O5]:"No changes in previous 90 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",[O5]:"{changeInPercentage}% more than previous 90 days",[N5]:{[h5]:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",[O5]:"{changeInPercentage}% less than previous 90 days",[N5]:{[h5]:Math.abs(e)}});case"last_28_days":return n()(f.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",[O5]:"No changes in previous 28 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",[O5]:"{changeInPercentage}% more than previous 28 days",[N5]:{[h5]:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",[O5]:"{changeInPercentage}% less than previous 28 days",[N5]:{[h5]:Math.abs(e)}});case"last_7_days":return n()(f.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",[O5]:"No changes in previous 7 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",[O5]:"{changeInPercentage}% more than previous 7 days",[N5]:{[h5]:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",[O5]:"{changeInPercentage}% less than previous 7 days",[N5]:{[h5]:Math.abs(e)}});default:(0,x.unreachable)(t)}}(s,i);const l=s>0?m.Z.alias({height:12,width:12,fill:y5}):s<0?m.Z.alias({height:12,width:12,transform:"rotate(90deg)",fill:y5}):void 0,d=(0,ji.yK)((e=>({text:{color:s>0?e[f5].green[500]:s<0?e[f5].red[500]:e.lightTextColor,display:"flex",[w5]:S5,gap:4}})),[s]);return n()("span",{[_5]:d.text},void 0,l,r)}const q5=i(85).W3n,j5=i(85).L_E,Q5=i(85).o8N;function J5(e){var t,i;let{onUserTabFilterChange:o,spaceStore:a,contentEngagement:s,userEngagement:r}=e;window.__c={n:"SpaceAnalyticsOverviewTab"};const l=(0,ji.yK)((e=>({[j5]:{display:"flex",flexDirection:"column",gap:24}})),[]),d=(0,qi.VK)((()=>a.getName()),[a]);if("NotFoundError"===(null===(t=s[Q5])||void 0===t?void 0:t.name)||"NotFoundError"===(null===(i=r[Q5])||void 0===i?void 0:i.name))return n()(sY,{type:"empty",spaceName:d});return n()("div",{style:l[j5]},void 0,n()(G5,{data:r.data,[q5]:r[q5],[Q5]:r[Q5],daysFilter:r.daysFilter,setDaysFilter:function(e){o({graphFilter:"all_time"===e?"last_90_days":e}),r.setDaysFilter(e)}}),n()(g5,{data:s.data,[q5]:s[q5],[Q5]:s[Q5],daysFilter:s.daysFilter,setDaysFilter:s.setDaysFilter}))}const $5=i(85).UzK,Y5=i(85).wns,X5=i(85).eHI,e8=i(85).W3n,t8=i(85).Z0E,i8=i(85).JJP,o8=i(85).HSU,n8=i(85).B22,a8=i(85).bl5,s8={field:"num_searches",direction:"desc"},r8=D$,l8={sort:s8,[a8]:r8,[n8]:[],[o8]:0,[i8]:void 0,[t8]:!0,[e8]:!1,error:void 0,[X5]:!1};const d8=i(85).IF2,c8=i(85).B22,u8=i(85).dBt,m8=i(85).O9h,p8=i(85).XZb,g8=i(85).h7w,h8=i(85).nx5,v8=i(85).Fpb,f8=(0,f.defineMessages)({[v8]:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",[h8]:"Number of times users in the workspace have searched the query"},[g8]:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",[h8]:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",[h8]:"Percentage of times users have opened page from results of this query"}}),y8=(0,f.defineMessages)({queryText:{id:"spaceAnalyticsSearchTable.column.query",[h8]:"Query"},[v8]:{id:"spaceAnalyticsSearchTable.column.searches",[h8]:"Searches"},[g8]:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",[h8]:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",[h8]:"Click-through rate"}}),b8={queryText:{id:"queryText",[p8]:J.default.formatMessage(y8.queryText),[m8]:e=>n()(Ji.Z,{},void 0,e.queryText),[u8]:{width:200,maxWidth:300},sortable:!1},[v8]:{id:v8,[p8]:n()(jY,{tooltipMessageDescriptor:f8[v8],columnHeader:y8[v8]}),[m8]:e=>n()(M8,{value:e[v8]}),[u8]:{width:120,maxWidth:120},sortable:!0},[g8]:{id:g8,[p8]:n()(jY,{tooltipMessageDescriptor:f8[g8],columnHeader:y8[g8]}),[m8]:e=>n()(M8,{value:e[g8]}),[u8]:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",[p8]:n()(jY,{tooltipMessageDescriptor:f8.ctr,columnHeader:y8.ctr}),[m8]:e=>n()(M8,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),[u8]:{width:120,maxWidth:120},sortable:!0}},S8=(0,x.objectKeys)(b8).map((e=>b8[e]));function w8(e){let{[c8]:t,runNewSearch:i,sort:o,setSort:a,loadNextPage:s,loading:r,error:l}=e;window.__c={n:"SpaceAnalyticsTable"};const c=(0,qi.VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),u=(0,d.useMemo)((()=>function(e){const t=xw.Fi[e.field];if(!t)return;return{column:b8[t],[d8]:"asc"===e.direction}}(o)),[o]),m=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:S8,theme:e,containerMarginTop:0})),[]),p=(0,ji.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return l?n()(qo,{error:l,runNewSearch:i}):n()("div",{},void 0,n()(no.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:S8,rows:c,sortState:u,onSortStateChanged:e=>{a(function(e){const t=xw.hx[e.column.id],i=e[d8]?"asc":"desc";if(!t)return{field:"num_searches",direction:i};return{field:t,direction:i}}(e))},onScrollBottom:s,renderNoRowsComponent:()=>n()(Ji.Z,{isSmall:!0,style:p.emptyQuery},void 0,!r&&0===t.length&&n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.searchTable.table.empty",[h8]:"No search query analytics to display."})),styles:m}),r?n()(ao.Z,{style:p.loadingSpinner}):null)}function M8(e){let{value:t,isPercentage:i}=e;window.__c={n:"CenteredNumericCell"};const o=(0,ji.yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),a=i?`${t}%`:t;return n()(Ji.Z,{style:o.centered},void 0,a)}const k8=i(85).Joh,C8=i(85).Yzm,Z8=i(85).P3s,T8=i(85).D7I,P8=i(85).erQ,I8=i(85).MBB,F8=i(85).ESK,_8=i(85).nx5,x8=i(85).B22;function A8(e){window.__c={n:"SpaceAnalyticsSearchTab"};const{spaceStore:t}=e,i=(0,ji.yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:v.Z.fontWeight.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),o=(0,d.useRef)(!1),{[x8]:a,timeRange:r,sort:c,loading:u,error:m,loadNextPage:p,runNewSearch:g,setTimeRange:h,setSort:y}=function(e){let{spaceStore:t}=e;const i=(0,Hi.O7)(),[o,n]=(0,d.useState)(l8),a=(0,d.useRef)(s8),s=(0,d.useRef)(r8),r=(0,f.useIntl)(),c=(0,d.useCallback)((async e=>{let{[Y5]:r,[$5]:d}=e;const c=!l().isEqual(o.sort,a.current)||!l().isEqual(o[a8],s.current);if(!d&&!c)return;a.current=o.sort,s.current=o[a8];let u=o[e8],m=o.error,p=o[t8],g=o[i8];if(r&&(n((e=>({...l8,[a8]:e[a8],sort:e.sort}))),u=l8[e8],m=l8.error,p=l8[t8],g=l8[i8]),!p||u)return;if(m)return;n((e=>({...e,[e8]:!0})));const h=await T.loadSearchAnalytics(i,{spaceId:t.id,sort:o.sort,[a8]:o[a8],startCursor:g});if("failed"===h.type)return void n((e=>({...e,[e8]:!1,error:h})));const v=h.data.results;n((e=>{const t=[],i=new Set(e[n8].map((e=>e.queryText)));for(const n of v){const e=n.queryText;i.has(e)||(t.push(n),i.add(e))}const o=[...e[n8],...t];return{...e,[n8]:o,[e8]:!1,error:void 0,[o8]:e[o8]+1,[i8]:h.data.nextCursor,[t8]:Boolean(h.data.nextCursor)}}))}),[i,t,o.sort,o[a8],o[e8],o.error,o[t8],o[i8]]);(0,d.useEffect)((()=>{o[X5]&&(n((e=>({...e,[X5]:!1}))),c({[Y5]:!0,[$5]:!1}))}),[o[X5],c]);const u=(0,d.useCallback)((async()=>{o[X5]||await c({[Y5]:!1,[$5]:!0})}),[o[X5],c]),m=(0,d.useCallback)((async e=>{await c({[Y5]:!0,[$5]:e||!1})}),[c]),p=(0,d.useCallback)((e=>{"all_time"!==e&&(n((t=>({...t,[a8]:e,[X5]:!0}))),S.trackSearchAnalyticsTableTimerangeFilterChange(i,{daysFilter:e}))}),[i]),g=(0,d.useCallback)((e=>{n((t=>({...t,sort:e,[X5]:!0}))),S.trackSearchAnalyticsTableSortChange(i,{column:e.field,isAscending:"asc"===e.direction})}),[i]),h=(0,d.useMemo)((()=>{if(o.error)return new Error((0,vp.wf)(r,o.error))}),[o.error,r]);return{...o,error:h,loadNextPage:u,runNewSearch:m,setTimeRange:p,setSort:g}}({spaceStore:t});(0,d.useEffect)((()=>{o.current||(g(!0),o.current=!0)}),[g]);const b=(0,qi.VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==m?void 0:m.name)?n()(sY,{type:"empty",spaceName:b}):d[T8](d.Fragment,null,n()("div",{style:i.header},void 0,n()(Ji.Z,{style:i.sectionTitle},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",[_8]:"Search queries"}),n()(ro.Z,{placement:ro.Z[F8].Bottom,render:e=>d[T8](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(I8),[Z8]:P8,style:i.helpInfo})),[k8]:()=>n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",[_8]:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:J.default[C8](xw.xX[r])}})})),n()(MY.f,{currentFilter:r,onChangeFilter:h,hideAllTime:!0})),n()(w8,{[x8]:a,runNewSearch:g,sort:c,setSort:y,loadNextPage:p,loading:u,error:m}))}var B8=i(16444);const D8=i(85).$Vg,E8=i(85).UPJ,L8=i(85).$bT,R8=i(85).H1U,N8=i(85).bm2,O8=i(85).jIi,U8=i(85).mwe,V8=i(85).KIV,W8=i(85).Joh,K8=i(85).Dl7,z8=i(85).Gpy,G8=i(85).Yzm,H8=(i(85).UR4,i(85).zhE),q8=i(85).BQ6,j8=i(85).P3s,Q8=i(85).D7I,J8=i(85).erQ,$8=i(85).MBB,Y8=i(85).nx5,X8=i(85).Zij,e1=i(85).z8h,t1=i(85).L_E,i1=i(85).IZz,o1=i(85).$ls,n1=i(85).W3n;function a1(e){let{data:t,[n1]:i,error:o,daysFilter:a,setDaysFilter:r}=e;window.__c={n:"UsersAnalyticsSummaries"};const[l,c]=(0,rY.e)(),u=(0,ji.yK)((e=>({[X8]:{fontWeight:v.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",[R8]:"center"},[t1]:{display:"flex",[L8]:"column",gap:16},helpInfo:{marginLeft:4},[e1]:{display:"flex",[L8]:"row",[E8]:"space-between",[R8]:"center",gap:16},summaryCard:{height:70},cardContainer:{[E8]:D8,gap:18},cardTextContainer:{[R8]:D8}})),[]),{activeMembersCount:m,[o1]:p,activeGuestsCount:g,[i1]:h}=t;return d[Q8]("div",{[q8]:u[t1],ref:l},n()("div",{[q8]:u[e1]},void 0,n()(Ji.Z,{[q8]:u[X8]},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",[Y8]:"User engagement"}),n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[Q8](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)($8),[j8]:J8,[q8]:u.helpInfo})),[W8]:()=>n()(f.FormattedMessage,"all_time"!==a?{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",[Y8]:H8,[z8]:{dateRange:J.default[G8](xw.xX[a])}}:{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",[Y8]:K8})})),n()(MY.f,{currentFilter:a,onChangeFilter:r})),n()(xN,{gap:16},void 0,n()(AN,{row:1,col:1},void 0,n()(wY,{[q8]:u.summaryCard,[n1]:i,error:o,[X8]:n()(f.FormattedMessage,{id:V8,[Y8]:"{activeMembersCount} active members",[z8]:{activeMembersCount:n()(dY,{abbreviateNumber:c<640,num:m})}}),byline:void 0!==p?n()(H5,{userType:U8,daysFilter:a,count:m,previousCount:p}):null})),n()(AN,{row:1,col:2},void 0,n()(wY,{[q8]:u.summaryCard,[n1]:i,error:o,[X8]:n()(f.FormattedMessage,{id:O8,[Y8]:"{activeGuestsCount} active guests",[z8]:{activeGuestsCount:n()(dY,{abbreviateNumber:c<640,num:g})}}),byline:void 0!==h?n()(H5,{userType:N8,daysFilter:a,count:g,previousCount:h}):null}))))}var s1=i(88775);const r1=i(85).IF2,l1=i(85).L_E,d1=i(85).D7I,c1=i(85).JJs,u1=i(85).Mk5,m1=i(85).dBt,p1=i(85).Yzm,g1=i(85).XZb,h1=i(85).O9h,v1=i(85).nx5,f1=i(85).M35,y1=i(85).nPS,b1=i(85).Pzq,S1=(0,f.defineMessages)({[b1]:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",[v1]:"Total number of page views for the user across all pages in the workspace"},[y1]:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",[v1]:"Total number of page edits for the user across all pages in the workspace"}}),w1=(0,f.defineMessages)({user:{id:"spaceAnalyticsUsersTab.column.user",[v1]:"User"},[b1]:{id:"spaceAnalyticsUsersTab.column.pageViews",[v1]:"Page views"},[y1]:{id:"spaceAnalyticsUsersTab.column.pageEdits",[v1]:"Page edits"},[f1]:{id:"spaceAnalyticsUsersTab.column.lastActive",[v1]:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",[v1]:"Teamspaces"}}),M1={user:{id:"user",[h1]:function(e){window.__c={n:"UserCell"};const t=(0,ji.yK)((e=>({[l1]:{height:52}})),[]);return n()(mw.Z,{containerStyle:t[l1],actorStore:e[c1],spaceRole:e.role&&(0,mw.K)(e.role)})},[g1]:J.default[p1](w1.user),[m1]:{width:100},[u1]:!1},[b1]:{id:b1,[h1]:function(e){window.__c={n:"PageViewsCell"};const{[b1]:t}=e,i=(0,ji.yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return n()(ro.Z,{placement:ro.Z.Placement.Bottom,render:e=>d[d1]("div",e,m.Z.eyeHidePadded(i.eyeHideIcon)),renderTooltip:e=>n()(f.FormattedMessage,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",[v1]:"User has disabled page view tracking"})});return n()(Ji.Z,{},void 0,t)},[g1]:n()(jY,{tooltipMessageDescriptor:S1[b1],columnHeader:w1[b1]}),[m1]:{width:80},[u1]:!0},[y1]:{id:y1,[h1]:function(e){const{[y1]:t}=e;return n()(Ji.Z,{},void 0,t)},[g1]:n()(jY,{tooltipMessageDescriptor:S1[y1],columnHeader:w1[y1]}),[m1]:{width:80},[u1]:!0},[f1]:{id:f1,[h1]:function(e){const t=e[f1];let i;i=t?n()(uo,{dateTs:t}):n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",[v1]:"No activity"}));return n()("div",{},void 0,i)},[g1]:J.default[p1](w1[f1]),[m1]:{width:50},[u1]:!0},teams:{id:"teams",[h1]:function(e){const{[c1]:t,role:i}=e;if(!i)return n()(Ji.Z,{},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",[v1]:"None"}));return n()(s1.Z,{member:{userId:t.id,role:i}})},[g1]:J.default[p1](w1.teams),[m1]:{width:50},[u1]:!1}};const k1=(0,x.objectKeys)(M1).map((e=>M1[e]));function C1(e){window.__c={n:"UsersTable"};const t=(0,Hi.O7)(),[i,o]=(0,d.useState)(25),{usersAndStats:a,filter:s,onUserTabFilterChange:r,usersAndStatsError:l}=e,c=(0,qi.VK)((()=>{const{currentSpaceStore:e}=B.default.state,t=(null==e?void 0:e.getPermissionItems().filter(Rn.isUserPermission))||[],i={};for(const o of t)i[o.user_id]=o.role;return i}),[]),[u,m]=(0,d.useState)({column:M1[f1],[r1]:!1}),p=(0,d.useCallback)((e=>{S.trackUserAnalyticsTableSortChange(t,{column:e.column.id,isAscending:e[r1]}),m(e)}),[m,t]),g=a.map((e=>{let{[c1]:t,stats:i}=e;return{id:i.userId,[c1]:t,isClickable:!1,[f1]:i.lastActive,[b1]:i.numPageViews,[y1]:i.numPageEdits,role:c[i.userId]}})).sort(function(e){switch(e.column.id){case f1:return(t,i)=>(0,xw.Zj)(t[f1],i[f1],e[r1]);case b1:return(t,i)=>(0,xw.yM)(t[b1],i[b1],e[r1]);case y1:return(t,i)=>e[r1]?t[y1]-i[y1]:i[y1]-t[y1];default:return(e,t)=>0}}(u)),h=(0,d.useMemo)((()=>g.slice(0,i)),[g,i]),v=(0,ji.yK)((e=>({error:{color:Bv.ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const y=(0,d.useCallback)((e=>{S.trackUserAnalyticsTableFilterChange(t,{daysFilter:e}),r({tableFilter:e})}),[t,r]),b=(0,ji.yK)((e=>(0,no.b)({columnRenderInfo:k1,theme:e,containerMarginTop:0})),[]);return d[d1](d.Fragment,null,l&&n()(Ji.Z,{isMultiline:!1,style:v.error},void 0,l),n()("div",{style:v.dateFilterPill},void 0,n()(Ji.Z,{isSecondaryColor:!0,style:v.timeFilterDescription},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.timeFilter.description",[v1]:"Views and edits from"})),n()(MY.f,{currentFilter:s,onChangeFilter:y})),n()(no.D,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:u,onSortStateChanged:p,columnRenderInfo:k1,rows:h,renderNoRowsComponent:()=>n()("div",{},void 0,"N/A"),styles:b,onScrollBottom:function(){i<a.length&&o(i+25)}}))}const Z1=i(85).XEN,T1=i(85).vvq,P1=i(85).OM8,I1=i(85).E_E,F1=i(85).tNj,_1=i(85).Joh,x1=i(85).Gpy,A1=i(85).Yzm,B1=(i(85).UR4,i(85).P3s),D1=i(85).erQ,E1=i(85).MBB,L1=i(85).BQ6,R1=i(85).nx5,N1=i(85).D7I,O1=i(85).W3n,U1=i(85).o8N,V1=i(85).XNW,W1=i(85).Exd,K1=i(85).ChN,z1=i(85).jkI,G1=i(85).H1U,H1=i(85).h8z,q1=i(85).UPJ,j1=i(85).$bT,Q1=i(85).EMU,J1=i(85).sM5,$1=i(85).L_E;function Y1(e){var t,i;let{spaceStore:o,usersTabData:a,onUserTabFilterChange:r,userEngagement:l}=e;window.__c={n:"SpaceAnalyticsUsersTab"};const[c,u]=(0,rY.e)(),m=(0,ji.yK)((e=>({[$1]:{[J1]:Q1,[j1]:"column",gap:16},titleContainer:{[J1]:Q1,[j1]:"row",[q1]:H1,[G1]:z1,gap:16},sectionTitle:{[K1]:v.Z[K1].medium,[W1]:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,[J1]:Q1,[G1]:z1},helpInfo:{[V1]:4},wrapper:{[J1]:Q1,[j1]:"row",[q1]:"space-around"},numUsersCaption:{[J1]:Q1},overviewText:{textAlign:z1},[U1]:{color:Bv.ZP.red},tableHeader:{marginTop:20,[j1]:"row",[J1]:Q1,[q1]:H1,[G1]:"end"},tooltip:{[V1]:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),p=(0,Hi.O7)(),g=(0,f.useIntl)(),h=(0,d.useCallback)((e=>{S.trackUserAnalyticsEngagementTimerangeFilterChange(p,{daysFilter:e});r({graphFilter:"all_time"===e?"last_90_days":e}),l.setDaysFilter(e)}),[r,l,p]),y=(0,qi.VK)((()=>o.getName()),[o]);if("NotFoundError"===(null==a||null===(t=a.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(i=l[U1])||void 0===i?void 0:i.name))return n()(sY,{type:"empty",spaceName:y});const b=Math.floor(u-8);return n()("div",{[L1]:m[$1]},void 0,n()(a1,{data:l.data,[O1]:l[O1],[U1]:l[U1],daysFilter:l.daysFilter,setDaysFilter:h}),n()(X1,{},void 0,d[N1]("div",{ref:c},a?n()(e2,{width:b,dailyUsersData:a.dailyUsersData,userEngagementDaysFilter:l.daysFilter,daysFilter:a.graphFilter,dailyUsersError:a.dailyUsersError&&N$(a.dailyUsersError,g)}):n()(t2,{}))),n()("div",{[L1]:m.tableHeader},void 0,n()("div",{[L1]:m.sectionTitleLeft},void 0,n()(Ji.Z,{[L1]:m.sectionTitle},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",[R1]:"All members in Notion"})),n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[N1](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)(E1),[B1]:D1,[L1]:m.helpInfo})),[_1]:()=>a&&"all_time"!==a.tableFilter?n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",[R1]:"Per member workspace activity over the {dateRange}",[x1]:{dateRange:J.default[A1](xw.xX[a.tableFilter])}}):n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",[R1]:"All time per member workspace activity"})})),n()(j$,{[F1]:_i.Users})),a?n()(C1,{filter:a.tableFilter,usersAndStats:a.usersAndStats,onUserTabFilterChange:r,usersAndStatsError:a.usersAndStatsError&&N$(a.usersAndStatsError,g)}):null)}function X1(e){window.__c={n:"DisplayBox"};const t=(0,ji.yK)((e=>({border:{borderRadius:3,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`,backgroundColor:e.contentBackground,color:e.regularTextColor,padding:20}})),[]);return n()("div",{[L1]:t.border},void 0,e.children)}function e2(e){window.__c={n:"UsersOverTimeGraph"};const{width:t,dailyUsersData:i,userEngagementDaysFilter:o,daysFilter:a,dailyUsersError:r}=e,l=(0,ji.yK)((e=>({graphHeader:{marginBottom:10,[J1]:Q1,[q1]:H1},graphTitle:{[W1]:v.Z[W1].UIRegular.desktop,[K1]:"bolder",[J1]:Q1,[G1]:z1,height:24},graphCaption:{[W1]:v.Z[W1].UISmall.desktop},graphTooltip:{[V1]:5,width:14,height:14},helpInfo:{[V1]:4},emptyGraphBody:{textAlign:z1,paddingTop:50,paddingBottom:50},[U1]:{color:Bv.ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[]),{blueLayer:c}=(0,B8.useTimeSeriesPalette)(),u=(0,qi.VK)((()=>{if(0===i.length)return;const e=i[0].ds,t=i[i.length-1].ds;return{[I1]:e,endDate:t}}),[i]),m=(0,qi.VK)((()=>i.map((e=>({ds:e.ds,[x1]:{active_members:e.active_members||0}})))),[i]);let p;return p=!u||i.length<3?n()("div",{[L1]:l.emptyGraphBody},void 0,n()(Ji.Z,{isSecondaryColor:!0},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.emptyGraph",[R1]:"Not enough data to display graph"}))):n()(Xn.LazyTimeSeries,{[I1]:u[I1],endDate:u.endDate,width:t,data:m,height:300,layers:[{key:"active_members",...c,renderLabel:e=>n()(f.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers",[R1]:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",[x1]:{activeMembers:e}})}],renderTooltipSubLabel:()=>n()("div",{[L1]:l.graphSubLabel},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",[R1]:"Viewed a page in the {dateRange}",[x1]:{dateRange:J.default[A1](xw.xX[a])}}))}),d[N1](d.Fragment,null,n()("div",{[L1]:l.graphHeader},void 0,n()(Ji.Z,{[L1]:l.graphTitle},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.membersOverTime.title",[R1]:"Active members over time"}),"all_time"===o&&n()(ro.Z,{placement:Sw.u.Bottom,render:e=>d[N1](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)("guides.workspaceAnalytics"),[B1]:"workspace_analytics_faq",[L1]:l.helpInfo})),[_1]:()=>n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",[R1]:"All Time selection shows members who have viewed a page in the last 90 days."})}))),r&&n()(Ji.Z,{isMultiline:!1,[L1]:l[U1]},void 0,r),p)}function t2(){return n()("div",{},void 0,n()(rw.Z,{paragraphs:[{[P1]:18,lineMargin:0,[T1]:[100],repeat:0,[Z1]:0}]}),n()(rw.Z,{paragraphs:[{[P1]:300,lineMargin:0,[T1]:[100],repeat:0,[Z1]:12}]}))}const i2=i(85).XhE,o2=i(85).$XE,n2=i(85).Joh,a2=i(85).P3s,s2=i(85).D7I,r2=i(85).MBB,l2=i(85).fCB,d2=i(85).H3N,c2=i(85).Vy4,u2=i(85).eg4,m2=i(85).Wqi,p2=i(85).nx5,g2={[_i.Overview]:n()(f.FormattedMessage,{id:"workspaceAnalyticsTabs.overview.title",[p2]:"Overview"}),[_i.Users]:n()(f.FormattedMessage,{id:"workspaceAnalyticsTabs.members.title",[p2]:"Members"}),[_i.Content]:n()(f.FormattedMessage,{id:"workspaceAnalyticsTabs.content.title",[p2]:"Content"}),[_i.Search]:n()(f.FormattedMessage,{id:"workspaceAnalyticsTabs.search.title",[p2]:"Search"})};const h2=function(e){let{[m2]:t}=e;window.__c={n:"SpaceAnalytics"};const i=(0,ji.yK)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:v.Z.fontWeight.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),o=(0,Hi.O7)(),a=(0,qi.VK)((()=>{var e;return null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),r=function(e){let{spaceId:t}=e;const i=(0,Hi.O7)(),[o,n]=(0,d.useState)("last_90_days"),[{status:a,value:s,error:r}]=(0,lF.r5)((async()=>{const e=await T.getContentEngagementAnalytics(i,{spaceId:t,daysFilter:o});switch(e.type){case"success":return{pageViews:e.data.pageViews,[O$]:e.data[O$],pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,x.unreachable)(e)}}),[i,t,o]);return{data:(0,d.useMemo)((()=>s||U$),[s]),loading:"pending"===a||"idle"===a,error:r,daysFilter:o,setDaysFilter:n}}({spaceId:t.id}),l=function(e){let{spaceStore:t,userId:i}=e;const o=(0,Hi.O7)(),[n,a]=(0,d.useState)("last_90_days"),[{status:s,value:r,error:l}]=(0,lF.r5)((async()=>{if(!i||!(0,g.wv)({permissions:t.getPermissionItems()},i))return K$;const e=await T.getUserEngagementAnalytics(o,{spaceId:t.id,daysFilter:n});switch(e.type){case"success":return{activeMembersCount:e.data.activeMembersCount,[W$]:e.data[W$],activeGuestsCount:e.data.activeGuestsCount,[V$]:e.data[V$],topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,x.unreachable)(e)}}),[o,t,i,n]);return{data:(0,d.useMemo)((()=>r||K$),[r]),loading:"pending"===s||"idle"===s,error:l,daysFilter:n,setDaysFilter:a}}({[m2]:t,userId:a}),[c,u]=(0,qi.AF)(Ai),p=(0,qi.VK)((()=>Boolean(null==t?void 0:t.getSettings()[u2])),[t]),h=(0,qi.VK)((()=>null==t?void 0:t.getName()),[t]),y=(0,d.useCallback)((async e=>{await async function(e){var t,i,o;const{[x$]:n,[I$]:a,spaceAnalyticsStore:s,setState:r,graphFilter:l,tableFilter:d}=e,c=l||(null===(t=s[_$])||void 0===t?void 0:t.graphFilter)||D$,u=d||(null===(i=s[_$])||void 0===i?void 0:i.tableFilter)||D$,m=(null===(o=s[_$])||void 0===o?void 0:o.userTableSort)||E$,[p,g]=await Promise.all([L$({[x$]:n,filter:c,spaceId:a.id,spaceAnalyticsStore:s}),R$({[x$]:n,filter:u,sort:m,[I$]:a,spaceAnalyticsStore:s})]),h=(0,gp.Rp)(p)||!p?[]:p,v=(0,gp.Rp)(g)||!g?[]:g;r({[F$]:a.id,currentTab:s.currentTab,[_$]:{graphFilter:c,tableFilter:u,userTableSort:m,dailyUsersError:(0,gp.Rp)(p)?p:void 0,dailyUsersData:h,usersAndStatsError:(0,gp.Rp)(g)?g:void 0,usersAndStats:v}})}({environment:o,[m2]:t,spaceAnalyticsStore:c,setState:u,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[o,t,c,u]),b=(0,d.useCallback)((e=>{S.trackWorkspaceAnalyticsTabClick(o,{tab:e}),u({...c,[c2]:e})}),[u,c,o]),w=(0,qi.VK)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(_i.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(_i.Users),e.push(_i.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(_i.Search),e}),[t]),k=(0,qi.VK)((()=>w.length>1),[w]),C=c[c2]||w[0];(0,d.useEffect)((()=>{!async function(){const e=t.id;e&&Ai.shouldRefreshState(e)&&(C===_i.Users?await y({graphFilter:d2,tableFilter:d2}):C===_i.Content||C===_i.Overview||C===_i.Search||(0,x.unreachable)(C))}()}));const Z=(0,d.useCallback)((()=>{M[l2]({environment:o,url:(0,X.getLocalizedUrl)(r2)})}),[o]),P=(0,qi.VK)((()=>t.getCreatedTime()<16593264e5),[t]),I=w.map((e=>g2[e])),F=p?n()(sY,{type:"disabled",spaceName:h}):d[s2](d.Fragment,null,k&&n()(OP.Z,{tabs:I,selectedIndex:w.indexOf(C),onChange:e=>{b(w[e])},style:i.tabsStyle}),function(e){const{[c2]:t,spaceAnalyticsStore:i,onUserTabFilterChange:o,[m2]:a}=e;switch(t){case _i.Content:return n()(T0,{[m2]:a,contentEngagement:e.contentEngagementData});case _i.Users:return n()(Y1,{[m2]:a,[i2]:i[i2],onUserTabFilterChange:o,userEngagement:e.userEngagementData});case _i.Overview:return n()(J5,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,[m2]:a,onUserTabFilterChange:o});case _i.Search:return n()(A8,{[m2]:a});default:(0,x.unreachable)(t)}}({[c2]:C,spaceAnalyticsStore:c,onUserTabFilterChange:y,[m2]:t,contentEngagementData:r,userEngagementData:l}));return n()($i.Z,{},void 0,n()(Yi.Z,{large:!0,style:i.headingStyle},void 0,n()("div",{style:i.title},void 0,n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.title",[p2]:"Workspace analytics"}),P&&n()(ro.Z,{placement:Sw.u.Right,render:e=>d[s2](EE.Z,s()({},e,{href:(0,X.getLocalizedUrl)("guides.workspaceAnalytics"),[a2]:"workspace_analytics_faq",style:i.helpInfo})),[n2]:()=>n()(f.FormattedMessage,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",[p2]:"Data available from August 1, 2022 onwards"})})),n()(eo.Z,{isSmall:!0,onClick:Z,icon:m.Z.help},void 0,n()(f.FormattedMessage,{id:"workspaceAnalytics.title.helpButton",[p2]:"Learn more"}))),$i.Z[o2](),F)};var v2=i(86080);var f2=i(51456);class y2 extends E.default{getInitialState(){return{churnSurveyModalOpen:!1,page:"default"}}}const b2=y2;var S2=i(13630);const w2=i(85).$XE,M2=i(85).P3s,k2=i(85).D7I,C2=i(85).jkI,Z2=i(85).H1U,T2=i(85).nx5;const P2=function(e){let{handleExportClick:t}=e;window.__c={n:"ExportSpaceTab"};const i=(0,qi.VK)((()=>B.default.state),[]),{currentSpaceStore:o}=i,a=(0,qi.VK)((()=>S2.Z.state),[]),s=(0,Hi.O7)();return(0,d.useEffect)((()=>{Xi.zh({environment:s,spaceId:null==o?void 0:o.id})}),[null==o?void 0:o.id,s]),n()(d.Fragment,{},void 0,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.title",[T2]:"Export content"})),n()("div",{style:{display:"flex",[Z2]:C2,gap:8}},void 0,n()(eo.Z,{disabled:!!a.count,isLarge:!0,onClick:t},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.exportButton.label",[T2]:"Export all workspace content"})),a.count?n()(ZK.gq,{gap:4},void 0,n()(ao.Z,{}),n()(Ji.Z,{isSmall:!0},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.exportInProgress",[T2]:"Export in progress"}))):d[k2](d.Fragment,null)),n()("div",{style:{height:12}}),n()(EE.Z,{title:n()(f.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",[T2]:"Learn about exporting workspaces."}),href:(0,X.getLocalizedUrl)("guides.exportWorkspace"),[M2]:"space_settings"}),$i.Z[w2]())};var I2=i(93007),F2=i(33411);const _2=i(85).XNW,x2=i(85).jtM,A2=i(85).ij9,B2=i(85).NJt,D2=i(85).$bT,E2=i(85).rBf,L2=i(85).NLk,R2=i(85).MLn,N2=i(85).ChN,O2=i(85).Y9u,U2=i(85).Exd,V2=i(85).cZW,W2=i(85).LlE,K2=i(85).z$9,z2=i(85).AL1,G2=i(85).IY7,H2=i(85).NF1,q2=i(85).Scd,j2=i(85).jkI,Q2=i(85).H1U,J2=i(85).EMU,$2=i(85).sM5,Y2=i(85).aCs,X2=i(85).BQ6,e4=i(85).W_R,t4=i(85)._V5,i4=i(85).D7I,o4=i(85).TPm,n4=i(85).uGP,a4=i(85).qcw,s4=i(85).se3,r4=i(85).wgE,l4=i(85).O87,d4=i(85).Yzm,c4=i(85).nx5,u4=(0,f.defineMessages)({workspaceDomainInputPlaceholder:{id:"spaceBasicSettingsDomain.domainSection.workspaceDomainInput.placeholder",[c4]:"Your domain"},copyDomainTooltip:{id:"spaceBasicSettingsDomain.workspaceDomain.tooltip",[c4]:"Click to copy link"}}),m4=()=>{window.__c={n:"AvailableField"};const e=(0,ji.Fg)();return n()("div",{[X2]:{color:e[E2],[$2]:J2,[D2]:"row",[Q2]:j2,[U2]:"14px"}},void 0,m.Z.circleCheckFilled({height:16,width:16,margin:"0 4px 0 8px",color:e[E2]}),n()("span",{},void 0,n()(f.FormattedMessage,{[c4]:"Available",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.available"})))},p4=()=>n()("div",{[X2]:{color:Bv.ZP.red,[$2]:J2,[D2]:"row",[Q2]:j2,[U2]:"14px"}},void 0,m.Z.warning({height:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,n()(f.FormattedMessage,{[c4]:"Used",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.used"}))),g4=()=>n()("div",{[X2]:{color:Bv.ZP.red,[$2]:J2,[D2]:"row",[Q2]:j2,[U2]:"14px"}},void 0,m.Z.warning({height:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,n()(f.FormattedMessage,{[c4]:"Not allowed",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.notAllowed"}))),h4=()=>n()(F2.Z,{show:!0,showDelay:500,showHold:300,render:()=>n()(ao.Z,{[X2]:{[R2]:j2,[B2]:A2,[$2]:x2,[_2]:8}})}),v4=e=>{window.__c={n:"SpaceBasicSettingsDomain"};const[t,i]=(0,qi.AF)(e[Y2]),{domain:o,domainState:a}=t,r=(0,Hi.O7)(),l=(0,ji.Fg)(),[c,u]=(0,d.useState)(!0),m=d.createRef();return d[i4](d.Fragment,null,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.domainSection.title",[c4]:"Domain"})),n()("div",{[X2]:{[$2]:J2,[Q2]:j2}},void 0,n()("div",{[X2]:{[q2]:l.inputBackground,[H2]:3,[G2]:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",[$2]:J2}},void 0,d[i4](bl.Z,{type:z2,[X2]:{[q2]:K2,[G2]:K2,[W2]:"4px 6px",width:255},ref:m,value:o,[V2]:J.default[d4](u4.workspaceDomainInputPlaceholder),readOnly:!e.canAdminSpaceStore,onChange:e.handleSpaceUrlChange,onFocus:e=>{u(!1),e.target.select()}})),c&&e.domainIsAutogenerated&&n()("div",{[X2]:{color:Bv.ZP.blue,[U2]:v.Z[U2][O2].desktop,[N2]:500,[R2]:"right",[W2]:"4px 6px",[L2]:"nowrap"},onClick:()=>{var e;null===(e=m.current)||void 0===e||e.focusInput(),u(!1),i({...t,domain:""})}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.changeDomain.cta.text",[c4]:"Set your own"})),o&&"available"===a&&n()(m4,{}),"inuse"===a&&n()(p4,{}),"disallowed"===a&&n()(g4,{}),"loading"===a&&h4()),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[X2]:{marginTop:4}},void 0,((e,t)=>{const i=t=>n()(ro.Z,{delayThreshold:0,renderTooltip:()=>J.default[d4](u4.copyDomainTooltip),render:i=>d[i4](RP.Z,s()({onClick:()=>{$n[l4]({[r4]:e,[s4]:t,[a4]:$n[o4][n4]})}},i),t)});return n()("div",{[X2]:{[t4]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.domainSection.workspaceDomainInput.viewPublicPage.caption",[c4]:"Pages shared to web will be under {linkText}.",values:{linkText:i(`${t}.${No.default[e4]}`)}}),n()("div",{[X2]:{[t4]:6}}),n()(f.FormattedMessage,{id:"spaceBasicSettings.domainSection.workspaceDomainInput.joinWorkspace.caption",[c4]:"Anyone with an allowed email domain can join this workspace via {linkText}.",values:{linkText:i(`${window.location.host}/${t}`)}}))})(r,o)))},f4=i(85).D7I,y4=i(85).nx5,b4=i(85).Yzm,S4=i(85).AIq,w4=i(85).XNW,M4=i(85).PXg,k4=i(85).Hco,C4=i(85).NF1,Z4=i(85).Scd,T4=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageInputMenu"};const t=(0,f.useIntl)(),i=(0,ji.Fg)(),o=(0,Hi.O7)(),a=(0,qi.VK)((()=>(0,ee.getPaidTierForCurrentSubscription)(o)),[o]),s=!Boolean(a),[r,l]=(0,qi.AF)(Ii);return n()("div",{onClick:()=>{a&&yB.y(o,{from:"public_domain_home_page",for:a})}},void 0,d[f4](bl.Z,{type:"text",ref:e.textInputRef,style:{[Z4]:i.inputBackground,[C4]:3,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex",padding:"4px 6px"},value:r.query,onChange:e=>{l({...r,query:e.target.value})},onFocus:()=>{s&&l({...r,openDropdown:!0})},disabled:!s,left:m.Z.search({fill:i[k4],width:16,height:16,[M4]:8,[w4]:8,flexGrow:0,[S4]:0}),placeholder:t[b4]({[y4]:"Select a page shared to web",id:"spaceBasicSettings.PublicHomePageSection.input.placeholder"})}))};var P4=i(29026),I4=i(11470);const F4=i(85).jtM,_4=i(85).ij9,x4=i(85).NJt,A4=i(85).jkI,B4=i(85).D7I,D4=i(85).nx5,E4=i(85).XNW,L4=i(85).aCs,R4=()=>n()(F2.Z,{show:!0,showDelay:500,showHold:300,render:()=>n()(ao.Z,{style:{textAlign:A4,[x4]:_4,display:F4,[E4]:8}})}),N4=async(e,t)=>{if(!Qi.Z.state.online)return[];const i=await hp.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:P4.Xv});return""===e?i.splice(0,5):i},O4=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageSearchResults"};const t=(0,Hi.O7)(),[i,o]=(0,qi.AF)(e[L4],Di),[a,r]=(0,qi.AF)(Ii),{query:l}=a,[{value:c,status:u}]=(0,lF.r5)((()=>N4(l,t)),[l,t]),m=(0,qi.VK)((()=>(0,H.getCurrentRootStore)()),[]);if(!(l||c&&0!==c.length))return null;return n()("div",{style:{marginTop:2,marginBottom:2}},void 0,n()(en.Z,{type:en.i.Vertical,sections:[{key:"recent public pages section",render:e=>d[B4](on.Z,e),items:"idle"===u||"pending"===u?[{key:"loading spinner",render:R4,action:()=>{}}]:m&&c&&0!==c.length?[...c.map((e=>{const t=go.G.createChildStore(m,{table:Nm.iU,id:e.id});return{key:`${e.id} page`,render:e=>d[B4](I4.Z,s()({store:t},e)),action:()=>{o({...i,publicHomePage:e.id}),r({...a,openDropdown:!1,displaySummary:!0})}}}))]:[{key:"no results",render:()=>n()(Ji.Z,{isSmall:!0,style:{[E4]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel.noResults",[D4]:"No results"})),action:()=>{}}]}],initialFocus:void 0}))},U4=i(85).nx5,V4=i(85).sei,W4=i(85).NLk,K4=i(85).jtM,z4=i(85).rI1,G4=i(85).PXg,H4=i(85).XCs,q4=i(85).jkI,j4=i(85).H1U,Q4=i(85).EMU,J4=i(85).sM5,$4=i(85).aCs,Y4=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageSummary"};const[t,i]=(0,qi.AF)(e[$4],Di),[o,a]=(0,qi.AF)(Ii),[s,r]=(0,qi.VK)((()=>{const e=(0,H.getCurrentRootStore)();if(!e||!t.publicHomePage)return[];const i=go.G.createChildStore(e,{table:Nm.iU,id:t.publicHomePage});return[i,i.getIcon()]}),[t]);return s?n()("div",{style:{[J4]:Q4,[j4]:q4}},void 0,n()("div",{style:{[J4]:Q4,[H4]:8,[j4]:q4}},void 0,r&&n()(ho.Z,{icon:r,isEmptyPage:!1,size:18,disabled:!0,style:{[J4]:"inline-flex",[G4]:2,[z4]:"text-top"}}),n()(I0.Z,{store:s,style:{[J4]:K4,[W4]:"normal",[G4]:Boolean(r)?3:0,wordBreak:V4}})),n()(eo.Z,{onClick:()=>{a({...o,displaySummary:!1}),i({...t,publicHomePage:void 0})}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel",[U4]:"Clear"}))):null},X4=i(85).Joh,e7=i(85).D7I,t7=i(85).TPm,i7=i(85).uGP,o7=i(85).qcw,n7=i(85).se3,a7=i(85).wgE,s7=i(85).O87,r7=i(85)._lc,l7=i(85).bSA,d7=i(85).eAn,c7=i(85).nLZ,u7=i(85).nx5,m7=i(85).PXg,p7=i(85).jkI,g7=i(85).H1U,h7=i(85).aCs,v7=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePage"};const t=(0,Hi.O7)(),i=d.createRef(),[o,a]=(0,qi.AF)(Ii),[r]=(0,qi.AF)(e[h7]),{openDropdown:l,displaySummary:c}=o,{publicHomePage:u,domain:m}=r,p=`${m}.${No.default.publicDomainName}`,g=(0,qi.VK)((()=>(0,ee.getPaidTierForCurrentSubscription)(t)),[t]),h=!Boolean(g);return d[e7](d.Fragment,null,n()(Yi.Z,{style:{display:"flex",[g7]:p7}},void 0,n()("span",{style:{[m7]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.title",[u7]:"Public home page"})),g&&n()(bB.Z,{[d7]:g,[l7]:"public_domain_home_page",desktopStyle:{[c7]:-1}})),h&&u&&c?n()(Y4,{[h7]:e[h7]}):n()(tn.ZP,{alignmentToOrigin:tn.ZP.Alignment.Start,keepFocus:t.device.isPhone,onDismiss:()=>{var e;null===(e=i.current)||void 0===e||e.handleBlur(),a({...o,openDropdown:!1,displaySummary:!0})},origin:n()(T4,{textInputRef:i}),open:l,popupType:tn.ZP[r7].Popup,style:{width:250},render:()=>n()(Xo.Z,{menuType:jo.og.Popup,width:250},void 0,n()(O4,{[h7]:e[h7]}))}),n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{[c7]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.caption",[u7]:"Access your public home page via {linkText}.",values:{linkText:n()(ro.Z,{delayThreshold:0,[X4]:()=>n()(f.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.caption.tooltip",[u7]:"Click to copy link"}),render:e=>d[e7](RP.Z,s()({onClick:()=>{$n[s7]({[a7]:t,[n7]:p,[o7]:$n[t7][i7]})}},e),p)})}})))};var f7=i(82328),y7=i(40004);const b7=i(85).j7K,S7=i(85).y79,w7=i(85).TLr,M7=i(85).fbO,k7=i(85).eiN,C7=i(85)._lc,Z7=i(85).opm,T7=i(85).XNW,P7=i(85)._V5,I7=i(85).DIE,F7=i(85).yKA,_7=i(85).mFu,x7=i(85).TtP,A7=i(85).EMU,B7=i(85).Bn$,D7=i(85).vwy,E7=i(85).Gpy,L7=i(85).FkY,R7=i(85).dLQ,N7=i(85).$bT,O7=i(85).P3s,U7=i(85).PG2,V7=i(85).bSA,W7=i(85).eAn,K7=i(85).PXg,z7=i(85).u3H,G7=i(85).Zij,H7=i(85).pkR,q7=i(85).H1U,j7=i(85).UPJ,Q7=i(85).sM5,J7=i(85).NF1,$7=i(85).dMt,Y7=i(85).X_m,X7=i(85).Dd5,e6=i(85).cZW,t6=i(85).$XE,i6=i(85).Pxe,o6=i(85).eg4,n6=i(85).omX,a6=i(85).jkI,s6=i(85).MLn,r6=i(85).__z,l6=i(85).LCr,d6=i(85).nxU,c6=i(85).Drs,u6=i(85).JJj,m6=i(85).xrO,p6=i(85).GOX,g6=i(85).tBn,h6=i(85).D7I,v6=i(85).BQ6,f6=i(85).nLZ,y6=i(85).Yzm,b6=i(85).rdW,S6=i(85).NZz,w6=i(85).bZK,M6=i(85).iIv,k6=i(85).gUO,C6=i(85).iqu,Z6=i(85).aTq,T6=i(85).Und,P6=i(85).BCA,I6=i(85).SPm,F6=i(85).Ubh,_6=i(85).qJ8,x6=i(85).hef,A6=i(85).Ql2,B6=i(85).W3n,D6=i(85).H6R,E6=i(85).wgE,L6=i(85).Wqi,R6=i(85).nm$,N6=i(85).Gnd,O6=i(85).QmD,U6=i(85).Wp_,V6=i(85).P0R,W6=i(85).wfR,K6=i(85).dbe,z6=i(85).XtO,G6=i(85).VIS,H6=i(85).aCs,q6=i(85).nx5;function j6(){return n()(f.FormattedMessage,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",[q6]:"You can use your organization or company name. Keep it simple."})}const Q6=(0,f.defineMessages)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",[q6]:"e.g. company name"},workspaceDomainInputPlaceholder:{id:"spaceBasicSettings.domainSection.workspaceDomainInput.placeholder",[q6]:"URL"},allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",[q6]:"Type an email domain…"},copyDomainTooltip:{id:"spaceBasicSettings.workspaceDomain.tooltip",[q6]:"Click to copy link"}});class J6 extends c.Z{constructor(){super(...arguments),this.storeTypes={[H6]:Di,[G6]:Ti.Z,[z6]:b2,[K6]:E.default[W6]("")},this.handleEnableAiFeatureClick=()=>{const{[G6]:e}=this[V6];e&&e[U6]({...e[O6],enableAiFeature:!e[O6].enableAiFeature})},this.handleSpaceNameChange=e=>{this[N6][H6][U6]({...this[N6][H6][O6],name:e[R6].value})},this.handleCheckDomainAvailability=e=>{const{[H6]:t}=this[N6],{[L6]:i}=this[V6];k.checkSpaceDomainAvailability({[E6]:this[E6],[L6]:i,[D6]:e}).then((e=>{if("success"!==e.type)this[N6][H6][U6]({...this[N6][H6][O6],domainState:B6});else{const i=e.data[D6]===t[O6][D6];this[N6][H6][U6]({...this[N6][H6][O6],domainState:i?e.data.domainState:t[O6].domainState})}}))},this.checkSpaceDomainAvailabilityDebounced=r.debounce(this.handleCheckDomainAvailability,250),this.handleSpaceUrlChange=e=>{const t=k.validateSpaceDomain(e[R6].value);this.checkSpaceDomainAvailabilityDebounced(t),this[N6][H6][U6]({...this[N6][H6][O6],[D6]:t}),this.forceUpdate()},this.handleConfirm=async()=>{const{[L6]:e}=this[V6],{[H6]:t,[G6]:i}=this[N6];await k.canSubmitChangesFromSpaceBasicSettingsStore({[E6]:this[E6],[A6]:e.id,[H6]:t})&&(await k.updateSpaceFromSpaceBasicSettingsStore({[E6]:this[E6],[L6]:e,[H6]:t,[G6]:i}),Ii[U6](Ii[x6]()),Wi.Z[U6]({...Wi.Z[O6],open:!1}))},this.handleCancelClick=()=>{Wi.Z[U6]({...Wi.Z[O6],open:!1}),Ii[U6](Ii[x6]())},this.handleExportClick=()=>{const{[_6]:e}=B.default[O6];e&&Xi.q$({[E6]:this[E6],root:{table:"space",id:e.id,[A6]:e.id},isCollectionViewExportTypeSupported:!0})},this.handleExportMembersClick=()=>{const{[_6]:e}=B.default[O6],{data:t}=Ki.default[O6];e&&t&&"subscribed_admin"===t.type&&Xi.$G({[L6]:e,subscriptionData:t,intl:this[V6].intl})},this.handleLeaveClick=()=>{const{[L6]:e}=this[V6],{[F6]:t}=B.default[O6];t&&w.showDialog({[I6]:n()(f.FormattedMessage,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",[q6]:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:n()(f.FormattedMessage,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",[q6]:"Leave"}),color:"red",[P6]:async()=>{await k.leaveSpace({[E6]:this[E6],[A6]:e.id,[T6]:t})&&(S.trackLeaveSpace(this[E6]),Wi.Z[U6]({...Wi.Z[O6],open:!1}))}}]})},this.renderChurnSurveyModal=()=>{const{data:e}=Ki.default[O6],t=this[N6][z6][O6],i=ee[Z6](e);if(i&&t[C6])return n()(y7.Z,{[k6]:t[k6],currentPlan:t[k6],[w6]:!0,periodEnd:i.periodEnd,hasAI:h.de(i.addOns),hasPendingChanges:Boolean(i.schedule||i.willCancelAt),customerId:i.customerId,[P6]:()=>{const{[z6]:e}=this[N6];e[O6][C6]&&e[O6][P6]()},[M6]:()=>{const{[z6]:e}=this[N6];e[O6][C6]&&e[O6][M6](),e.reset()}})},this[S6]=async()=>{const e=(0,te.getSubscriptionTier)();if(!e)return;const{data:t}=Ki.default[O6],i=ee[Z6](t);if(S.trackDeleteWorkspaceAttempt(this[E6]),i){if(!(await new Promise((t=>{const{[z6]:i}=this[N6];i[U6]({...i[O6],[k6]:e,[C6]:!0,[P6]:async()=>{t(!0),await this[b6]()},[M6]:()=>t(!1)})}))))return}await this[b6]()},this[b6]=async()=>{const{[F6]:e}=B.default[O6];if(!e)return;const{[L6]:t,intl:i}=this[V6],o=(0,sT.rn)(this[E6],t)||i[y6]({[q6]:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),a=(0,JH.Bd)(bw.SP)?n()(f.FormattedMessage,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",[q6]:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):d[h6](d[g6],null,n()(I2.Z,{[v6]:{[f6]:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}}));await v2.b({[I6]:n()("div",{},void 0,n()("div",{},void 0,a)),[p6]:n()(f.FormattedMessage,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",[q6]:"Permanently delete workspace"}),requiredInputValue:o})&&(k.deleteSpace({[E6]:this[E6],[A6]:t.id,[T6]:e}),S.trackDeleteSpace(this[E6]),Wi.Z[U6]({...Wi.Z[O6],open:!1}))},this[m6]=e=>{const{[L6]:t}=this[V6];z[u6]({[c6]:"SpaceBasicSettings.handleRecordIconChange",[E6]:this[E6],[d6]:i=>{cT.setValue({[z6]:t.getIconStore(),value:e,[l6]:i})}})}}willMount(e){super.willMount(e);const{[L6]:t}=this[V6],{[H6]:i}=this[N6],o=i.getValueForSpace(t);o&&i[U6](o)}renderComponent(){return Qi.Z[O6].online?this.renderSettings():this[r6]()}[r6](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,[v6]:{[s6]:a6}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.offlineMessage",[q6]:n6})))}validateDomain(){const{[H6]:e}=this[N6],{[D6]:t,domainState:i}=e[O6];return!!t&&("available"===i||"current-space"===i)}renderSettings(){const{[L6]:e}=this[V6],{[H6]:t}=this[N6],{name:i}=t[O6],{data:o}=Ki.default[O6],{device:a}=this[E6];if(!o)return;const s=e.canAdmin(),r=(0,sT.Cx)(e),l=(0,sT.jv)(e),c=ee.subscriptionAllowsMembers(this[E6]),u=s&&!e.getDisableExport(),m=s,p=(0,te.getSubscriptionTier)(),g="subscribed_admin"===o.type&&("enterprise"===p||"business"===p),h=e[i6]()[o6],v=SF.Z.getPublicSpaceData(this[E6],e.id);return n()($i.Z,{controlRow:s&&this.renderControlRow()},void 0,this.renderSpaceBasicHeader(),r&&n()(Ji.Z,{isSmall:!0,isMultiline:!0,[v6]:{[s6]:"center"}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.guestLimitedAccessMessage",[q6]:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages and workspace settings."})),r&&$i.Z[t6](),s&&n()(d.Fragment,{},void 0,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.workspaceNameSection.title",[q6]:"Name"})),n()(bl.Z,{value:i,[e6]:J.default[y6](Q6.nameInputPlaceholder),readOnly:!s,[X7]:this.handleSpaceNameChange}),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[v6]:{[f6]:4}},void 0,n()(j6,{})),$i.Z[t6]()),s&&n()(d.Fragment,{},void 0,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.workspaceIconSection.title",[q6]:"Icon"})),n()("div",{[v6]:{width:72,[Y7]:72,border:`1px solid ${this.theme[$7]}`,[J7]:6,[Q7]:"flex",[j7]:"center",[q7]:"center"}},void 0,n()(ho.Z,s?{bucket:"public",[H7]:!1,icon:(0,sT.Wd)(this[E6],e),isEmptyPage:!1,[G7]:i,size:64,[z7]:{recordTable:e.table,source:"workspace_settings"},[X7]:this[m6]}:{[H7]:!0,icon:(0,sT.Wd)(this[E6],e),isEmptyPage:!1,[G7]:i,size:64})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[v6]:{[f6]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.workspaceIconSection.caption",[q6]:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})),$i.Z[t6]()),(y=this[E6],!(null===(b=B.default.state.currentSpaceStore)||void 0===b||!b.canAdmin())&&(0,ee.userIsOnTier)(y,"enterprise")&&d[h6](d[g6],null,this.renderSpaceBasicFeatureSubheader(),this.renderAiFeature(),$i.Z[t6]())),this.renderSpaceBasicPublicSubHeader(),s&&d[h6](d[g6],null,n()(v4,{canAdminSpaceStore:s,domainIsAutogenerated:null==v?void 0:v.domainIsAutogenerated,[L6]:e,[H6]:t,handleSpaceUrlChange:this.handleSpaceUrlChange}),$i.Z[t6]()),s&&c&&n()(d.Fragment,{},void 0,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",[q6]:"Allowed email domains"})),this.renderAllowedEmailDomains(),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[v6]:{[f6]:4}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",[q6]:"Anyone with email addresses at these domains can automatically join your workspace."})),$i.Z[t6]()),s&&n()(d.Fragment,{},void 0,n()(v7,{[H6]:t}),$i.Z[t6]()),u&&n()(P2,{handleExportClick:this.handleExportClick}),m&&n()(d.Fragment,{},void 0,n()(Yi.Z,{[v6]:{[Q7]:"flex",[q7]:"center"}},void 0,n()("span",{[v6]:{[K7]:8}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.title",[q6]:"Export members"})),!g&&n()(bB.Z,{[W7]:"business",[V7]:"space_export_members",desktopStyle:{[f6]:-1}})),n()("div",{[v6]:{[Q7]:"flex"}},void 0,n()(eo.Z,{isLarge:!0,[H7]:!g,[U7]:this.handleExportMembersClick,disabledFeedback:!0},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",[q6]:"Export members as CSV"}))),n()("div",{[v6]:{[Y7]:12}}),n()(EE.Z,{[G7]:n()(f.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",[q6]:"Learn about exporting members."}),href:(0,X.getLocalizedUrl)("guides.exportMembers"),[O7]:"space_settings"}),$i.Z[t6]()),s&&n()(d.Fragment,{},void 0,n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.analytics.title",[q6]:"Analytics"})),n()("div",{[v6]:{[Q7]:"flex",gap:12,[N7]:"column"}},void 0,n()(NP.Z,{[R7]:a[R7],[G7]:n()(f.FormattedMessage,{id:"spaceBasicSettings.analytics.settings.title",[q6]:"Save and display page view analytics"}),caption:n()(f.FormattedMessage,{id:"spaceBasicSettings.analytics.settings.description",[q6]:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",[E7]:{[L7]:i}}),type:"toggle",isOn:!h,onToggle:()=>{const t=!h;z[u6]({[c6]:"SpaceBasicSettings.analyticsSettings.onSelectOption",[E6]:this[E6],[d6]:i=>{cT[D7]({[z6]:e,data:{[B7]:{...e[i6](),[o6]:t}},[l6]:i})}}),f2.track(this[E6],t?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}}),n()(EE.Z,{[G7]:n()(f.FormattedMessage,{[q6]:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,X.getLocalizedUrl)("guides.workspaceAnalytics"),[O7]:"workspace_analytics_faq"})),$i.Z[t6]()),n()(Yi.Z,{},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.title",[q6]:"Danger zone"})),n()("div",{[v6]:{[Q7]:A7}},void 0,(l[x7]>1||r)&&n()(eo.Z,{isLarge:!0,[U7]:this.handleLeaveClick,[v6]:{[K7]:s?12:void 0}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",[q6]:"Leave workspace"})),s&&d[h6](d[g6],null,this.renderModal(),n()(eo.Z,{isLarge:!0,isRed:!0,[U7]:this[S6]},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",[q6]:"Delete entire workspace"})))),s&&n()(d.Fragment,{},void 0,n()("div",{[v6]:{[Y7]:12}}),n()(EE.Z,{[G7]:n()(f.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",[q6]:"Learn about deleting workspaces."}),href:(0,X.getLocalizedUrl)("guides.deleteWorkspace"),[O7]:"space_settings"})));var y,b}renderAiFeature(){var e;return n()("div",{},void 0,n()("div",{[v6]:{[Q7]:A7,[q7]:a6,cursor:_7},[U7]:this.handleEnableAiFeatureClick},void 0,n()("div",{[v6]:this[F7]()},void 0,n()("div",{[v6]:{[Q7]:A7,[q7]:a6}},void 0,m.Z.sparkles({width:16,[Y7]:16,[K7]:6}),n()(f.FormattedMessage,{id:"spaceBasicSettings.aiFeature.label",[q6]:"Notion AI"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0,[v6]:{[f6]:2,width:"80%"}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.aiFeature.ga.caption",[q6]:"Enable to provide AI-powered functionality for all members of your workspace.{br}By enabling Notion AI, you are agreeing to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",[E7]:{br:n()("br",{}),inlinelink:e=>n()(RP.Z,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,[U7]:e=>e[I7]()},void 0,e)}}))),n()("div",{[v6]:{[f6]:5}},void 0,n()(Sx.Z,{on:Boolean(null===(e=this[V6][G6])||void 0===e?void 0:e[O6].enableAiFeature)}))))}renderSpaceBasicPublicSubHeader(){return n()(Yi.Z,{large:!0,divider:"full",[v6]:{[P7]:12}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.public.subtitle",[q6]:"Public settings"}))}renderSpaceBasicFeatureSubheader(){return n()(Yi.Z,{large:!0,divider:"full",[v6]:{[P7]:12}},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.feature.subtitle",[q6]:"Feature settings"}))}renderSpaceBasicHeader(){return n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.title",[q6]:"Workspace settings"}))}renderControlRow(){return n()("div",{[v6]:{[Q7]:A7}},void 0,n()(Po.Z,{isLarge:!0,[U7]:this.handleConfirm,[H7]:!this.validateDomain()},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.updateButton.label",[q6]:"Update"})),n()(eo.Z,{isLarge:!0,[v6]:{[T7]:12},[U7]:this.handleCancelClick},void 0,n()(f.FormattedMessage,{id:"spaceBasicSettings.cancelButton.label",[q6]:"Cancel"})))}renderAllowedEmailDomains(){const{device:e}=this[E6],{[L6]:t}=this[V6],{[H6]:i}=this[N6],{[Z7]:o}=i[O6],a=t.canAdmin();return n()(tn.ZP,{popupType:e[R7]?tn.ZP[C7].SlideUp:tn.ZP[C7].Popup,sameWidthAsOrigin:!0,open:this[N6][K6][O6][x7]>0,origin:n()(wr.Z,{[e6]:J.default[y6](Q6.allowedEmailDomainsInputPlaceholder),value:this[N6][K6][O6],[X7]:e=>this[N6][K6][U6](e[R6].value),readOnly:!a,onRemoveLastToken:()=>{const e=o.slice(0,o[x7]-1);i[U6]({...i[O6],[Z7]:e})},tokens:o.map((e=>n()(Sr.Z,{showRemoveButton:!0,isSingle:!1,format:vr.l.Medium,onClickRemove:()=>{const t=o[k7]((t=>t!==e));i[U6]({...i[O6],[Z7]:t})},value:e},e)))}),render:()=>{const t=this[N6][K6][O6].trim(),{data:a}=Ki.default[O6],{[L6]:r}=this[V6],l=n()(f.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",[q6]:"Type an email domain…"}),c=n()(f.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",[q6]:"Type an email domain of a member of this workspace…"}),u=a?ee.getVisibleMembers(a).map((e=>{if(("unsubscribed_admin"===a.type||"unsubscribed_member"===a.type||"subscribed_admin"===a.type)&&a.joinedMemberIds[M7](e.userId)){const t=go.U6[w7](r,{table:Ya.KJ,id:e.userId}).getEmail();return t&&(0,uU.Gd)(t)}}))[k7](((e,t,i)=>Boolean(e&&t===i.indexOf(e)&&!o[M7](e)))):[],m=(0,wy.ZP)(t,u,(e=>e)).map(((e,t)=>({key:t,render:t=>d[h6]($o.Z,s()({},t,{[G7]:e})),action:()=>{const t=[...o,e];i[U6]({...i[O6],[Z7]:t}),this[N6][K6][U6]("")}})));let p;return p=e[R7]?{menuType:jo.og.ActionSheet}:{menuType:jo.og.Popup,width:"100%"},d[h6](Xo.Z,p,n()(en.Z,{type:en.i[S7],[b7]:m[x7]>0?0:void 0,sections:[{key:0,render:e=>d[h6](on.Z,s()({},e,{disableDesktopPadding:!0,[G7]:m[x7]>0?l:c})),items:m}]}))},onDismiss:()=>{this[N6][K6][U6]("")}})}renderModal(){const{[C6]:e}=this[N6][z6][O6];return n()(f7.q,{isOpen:e,dismissUsing:"onlyEscape",onDismiss:()=>{const{[z6]:e}=this[N6];e[O6][C6]&&e[O6][M6](),e.reset()}},void 0,this.renderChurnSurveyModal())}[F7](){return{fontSize:14,[K7]:8,flexGrow:1}}}J6.displayName="SpaceBasicSettings";const $6=(0,f.injectIntl)(J6);var Y6=i(40141),X6=i(97832),e3=i(90403),t3=i(78873);let i3;!function(e){e.Password="Password",e.CurrentEmail="TemporaryPasscode"}(i3||(i3={}));class o3 extends E.default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const n3=o3;var a3=i(37770);const s3=i(85).lI2,r3=(i(85).mwV,i(85).wrq),l3=i(85).a3v,d3=i(85).cZW,c3=i(85).kdC,u3=i(85).Dd5,m3=i(85).Gpy,p3=(i(85).MMG,i(85).RhS),g3=i(85).g3q,h3=i(85).pkR,v3=i(85).PG2,f3=i(85).D7I,y3=i(85).E4p,b3=i(85)._V5,S3=i(85).RuO,w3=i(85).FOQ,M3=i(85).mPA,k3=i(85).ChN,C3=i(85).XNW,Z3=i(85).g7N,T3=i(85).nLZ,P3=i(85).UPJ,I3=i(85).jkI,F3=i(85).H1U,_3=i(85).EMU,x3=i(85).sM5,A3=i(85).gGi,B3=i(85).Exd,D3=i(85).NF1,E3=i(85).LlE,L3=i(85).Yzm,R3=i(85).lDz,N3=i(85).l6S,O3=i(85).RHz,U3=i(85).Fu1,V3=i(85).Gg4,W3=i(85).Swd,K3=i(85).KqM,z3=i(85).PpY,G3=i(85).o8N,H3=i(85).Mu6,q3=i(85).FMM,j3=i(85).MWD,Q3=i(85).wgE,J3=i(85).Wp_,$3=i(85).wml,Y3=i(85).T04,X3=i(85).qo,e9=i(85).Fee,t9=i(85).psj,i9=i(85).P0R,o9=i(85).W3n,n9=i(85).tBn,a9=i(85).NQ6,s9=i(85).DiI,r9=i(85).BQ6,l9=i(85).G4H,d9=i(85).QmD,c9=i(85).Gnd,u9=i(85).XtO,m9=i(85).nx5,p9=(0,f.defineMessages)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",[m9]:"Change email"}});class g9 extends c.Z{constructor(){super(...arguments),this.storeTypes={[u9]:n3},this.renderModalContent=()=>{const{[u9]:e}=this[c9],{[d9]:t}=e;return n()("div",{[r9]:{...this[l9].modal,...this.getColors().modal}},void 0,n()(a3.Z,{fetch:this.getAuthorizationType,[o9]:e=>e&&n()("div",{[r9]:this[l9].loadingSpinner},void 0,n()(ao.Z,{})),render:()=>n()(d[n9],{},void 0,t[s9]===i3.Password?this.renderVerifyPassword(t):t[s9]===i3.CurrentEmail?this.renderVerifyCurrentEmail(t):void 0,t[a9]&&this.renderSetNewEmail(t))}))},this.renderSetNewEmail=e=>{const{[u9]:t}=this[c9],{userValue:i}=this[i9];if(t[d9][a9])return n()(d[n9],{},void 0,n()("p",{[r9]:this[l9][t9]},void 0,n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.newEmailInstructions",[m9]:"Please enter a new email and we will send you a verification code."})),n()("div",{},void 0,this.renderNewEmailInput()),t[d9][e9]&&(0,uU.Gd)(t[d9][X3])!==(0,uU.Gd)((null==i?void 0:i[Y3])||"")&&this.renderClaimedEmailDomainWarning(e),t[d9][$3]?this.renderNewEmailPasscodeInput(e):this.renderSendNewEmailPasscodeButton(e),this.renderEducationPlanDowngradeWarning())},this.handleSendCurrentEmailVerification=async()=>{const{userValue:e}=this[i9],{[u9]:t}=this[c9];if(!e)return;t[J3]({...t[d9],[o9]:!0});const i=await T.sendEmailVerification(this[Q3],{[Y3]:e[Y3]});"success"===i[j3]?t[J3]({...t[d9],[q3]:!0,[H3]:"",[G3]:void 0,[o9]:!1}):t[J3]({...t[d9],[q3]:!0,[o9]:!1,[G3]:(0,vp.wf)(this[i9].intl,i)})},this.handleChangeCurrentEmailPasscode=e=>{const{[u9]:t}=this[c9];t[J3]({...t[d9],[H3]:e[z3].value,[G3]:void 0})},this.handleChangePassword=e=>{const{[u9]:t}=this[c9];t[J3]({open:!0,[a9]:!1,[s9]:i3.Password,[K3]:e[z3].value,[G3]:void 0})},this[W3]=()=>{const{[u9]:e}=this[c9];e[J3]({open:!0,[a9]:!1,[s9]:i3.Password,[K3]:""})},this[V3]=async()=>{const{[u9]:e}=this[c9];if(!e[d9][a9])if(e[d9][s9]===i3.Password){if(!this.getUserCurrentEmail())return;e[J3]({...e[d9],[o9]:!0});const t=await T.authVerifyPassword(this[Q3],{[K3]:e[d9][K3]});if("failed"===t[j3])return void e[J3]({...e[d9],[o9]:!1,[G3]:(0,vp.wf)(this[i9].intl,t)});e[J3]({...e[d9],[a9]:!0,[X3]:"",[U3]:"",[$3]:!1,[e9]:!1,[G3]:void 0,[o9]:!1})}else e[d9][s9]===i3.CurrentEmail&&e[J3]({...e[d9],[a9]:!0,[X3]:"",[U3]:"",[$3]:!1,[e9]:!1,[G3]:void 0,[o9]:!1})},this.handleChangeNewEmail=e=>{const{[u9]:t}=this[c9];t[J3]({...t[d9],[X3]:e[z3].value,[G3]:void 0})},this.handleClearNewEmail=()=>{const{[u9]:e}=this[c9];e[J3]({...e[d9],[X3]:"",[$3]:!1,[e9]:!1,[G3]:void 0})},this[O3]=async()=>{const{[u9]:e}=this[c9];if(!e[d9][a9])return;const t=(0,uU.Gd)(e[d9][X3]);e[J3]({...e[d9],[o9]:!0});const[i,o]=await Promise.all([await T.sendEmailVerification(this[Q3],{[Y3]:e[d9][X3]}),t?await T.getVerifiedEmailDomain(this[Q3],{emailDomain:t}):void 0]);if("success"===i[j3]){const t=(0,x.isDefined)(o)&&"failed"===o[j3]?(0,vp.wf)(this[i9].intl,o):void 0;e[J3]({...e[d9],[$3]:!0,[U3]:"",[G3]:t,[o9]:!1,[e9]:(0,x.isDefined)(o)&&"success"===o[j3]&&void 0!==o.data.id})}else e[J3]({...e[d9],[o9]:!1,[G3]:(0,vp.wf)(this[i9].intl,i)})},this.handleChangeNewEmailPasscode=e=>{const{[u9]:t}=this[c9];t[J3]({...t[d9],[U3]:e[z3].value,[G3]:void 0})},this[N3]=async()=>{const{[u9]:e}=this[c9];if(!e[d9][a9])return;const t=e[d9][s9]===i3.Password?{[j3]:"Password",[K3]:e[d9][K3],[X3]:e[d9][X3],[U3]:e[d9][U3]}:{[j3]:"CurrentEmail",[H3]:e[d9][H3],[X3]:e[d9][X3],[U3]:e[d9][U3]};e[J3]({...e[d9],[o9]:!0});const i=await T.changeEmail(this[Q3],t);if("success"===i[j3])S.trackUpdateEmail(this[Q3],{new_email:e[d9][X3],[G3]:void 0}),e[J3]({...e[d9],[o9]:!1}),await this.closeModal();else{var o;const t=(0,vp.wf)(this[i9].intl,i);if(S.trackUpdateEmail(this[Q3],{new_email:e[d9][X3],[G3]:t}),"IntercomError"===(null===(o=i.body)||void 0===o?void 0:o.name))return e[J3]({...e[d9],[o9]:!1}),void(await this.closeModal());e[J3]({...e[d9],[o9]:!1,[G3]:t})}},this.handleSendUsMessageClick=()=>{BL[R3]({[Q3]:this[Q3],from:"change_email_student"})},this.openModal=()=>{const{[u9]:e}=this[c9];e[J3]({open:!0,[a9]:!1,[s9]:void 0})},this.closeModal=async()=>{const{[u9]:e}=this[c9],{hasEducationPlan:t}=this[i9];e.reset(),t&&await _.refresh(this[Q3])},this.getAuthorizationType=async()=>{const{[u9]:e}=this[c9],{intl:t}=this[i9],i=this.getUserCurrentEmail();if(!i)return;const o=await t3.userHasPassword({[Q3]:this[Q3],userEmail:i});o[G3]?e[J3]({open:e[d9].open,[a9]:!1,[s9]:void 0,[G3]:t[L3]({id:"profileSettings.changeEmailModal.errorFetchingAccountData",[m9]:"Could not fetch account information for {currentEmail}."},{currentEmail:i})}):o.value.isSamlEnforced||!o.value.hasPassword?e[J3]({open:!0,[a9]:!1,[s9]:i3.CurrentEmail,[q3]:!1,[H3]:""}):e[J3]({open:!0,[a9]:!1,[s9]:i3.Password,[K3]:""})},this[l9]={modal:{width:460,[E3]:32,[D3]:3,[B3]:14},loadingSpinner:{width:A3,[x3]:_3,[F3]:I3,[P3]:I3},[t9]:{[T3]:12,[Z3]:14},[G3]:{color:Bv.ZP.red,[B3]:12,[T3]:4,[C3]:8},bold:{[k3]:v.Z[k3].bold},[M3]:{[E3]:"4px 8px"},[w3]:{[T3]:14,width:A3},[S3]:{[x3]:_3,[T3]:14,[b3]:14},claimedEmailDomainWarning:{[T3]:14,[Z3]:14}}}renderComponent(){const{userValue:e}=this[i9],{[u9]:t}=this[c9];return d[f3](d[n9],null,n()(NP.Z,{[j3]:"custom",isMobile:!1,title:n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.emailSetting.label",[m9]:y3}),caption:e&&e[Y3],customButton:this.renderChangeEmailButton()}),n()(QI.Z,{ariaLabel:J.default[L3](p9.dialogLabel),open:t[d9].open,onDismiss:this.closeModal,render:this.renderModalContent}))}renderChangeEmailButton(){const{userValue:e,areProfileEditsDisabled:t}=this[i9],i=n()(eo.Z,{isLarge:!0,[v3]:t?()=>{}:this.openModal,[h3]:t,disabledFeedback:t},void 0,n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",[m9]:"Change email"}));return t?n()(ro.Z,{renderTooltip:()=>n()(f.FormattedMessage,{id:g3,[m9]:p3,[m3]:{emailDomain:e?(0,uU.Gd)(e[Y3]):""}}),placement:ro.Z.Placement.Bottom,alignment:ro.Z.Alignment.Center,render:e=>d[f3]("div",e,i)}):i}renderVerifyPassword(e){const{userValue:t}=this[i9];if(t)return n()(d[n9],{},void 0,n()("p",{[r9]:{margin:0}},void 0,this.renderCurrentEmail()),n()("p",{[r9]:this[l9][t9]},void 0,n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",[m9]:"Please enter your password."})),n()(bl.Z,{[r9]:{[x3]:"none"},[j3]:"text",value:t[Y3],autoComplete:"username",[h3]:!0}),n()(bl.Z,{[j3]:K3,[h3]:e[a9],value:e[K3],[u3]:this.handleChangePassword,[c3]:!0,onClearButtonClick:this[W3],onSubmit:this[V3],[d3]:this[i9].intl[L3]({id:"profileSettings.changeEmailModal.passwordInput.label",[m9]:"Password"}),[r9]:this[l9][M3],focusInitial:!0,autoComplete:"current-password"}),!e[a9]&&e[G3]&&n()("div",{[r9]:this[l9][G3]},void 0,e[G3]),!e[a9]&&n()(Po.Z,{isLarge:!0,[r9]:this[l9][w3],[v3]:this[V3],[h3]:e[o9]},void 0,e[o9]?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.continueButton.label",[m9]:"Continue"})))}renderVerifyCurrentEmail(e){return n()(d[n9],{},void 0,n()("p",{[r9]:{...this[l9][t9],[T3]:0}},void 0,this.renderCurrentEmail()," ",e[q3]?n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",[m9]:"We've sent a temporary verification code to this email."}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",[m9]:"We'll send a temporary verification code to this email."})),e[q3]?this.renderCurrentEmailPasscodeInput(e):this.renderSendCurrentEmailPasscodeButton())}renderSendCurrentEmailPasscodeButton(){return n()(Po.Z,{isLarge:!0,[v3]:this.handleSendCurrentEmailVerification,[h3]:this[c9][u9][d9][o9]},void 0,this[c9][u9][d9][o9]?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",[m9]:"Send verification code"}))}renderCurrentEmailPasscodeInput(e){return n()(d[n9],{},void 0,n()(bl.Z,{value:e[H3],[u3]:this.handleChangeCurrentEmailPasscode,onSubmit:this[V3],[d3]:this[i9].intl[L3]({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",[m9]:"Enter verification code"}),focusInitial:!0,[r9]:this[l9][M3]}),!e[a9]&&n()(Po.Z,{isLarge:!0,[r9]:this[l9][w3],[v3]:this[V3],[h3]:e[o9]},void 0,e[o9]?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.continueButton.label",[m9]:"Continue"})))}renderNewEmailInput(){const{[u9]:e}=this[c9];if(e[d9][a9])return n()(bl.Z,{value:e[d9][X3],[u3]:this.handleChangeNewEmail,onSubmit:this[O3],[c3]:!0,onClearButtonClick:this.handleClearNewEmail,[d3]:this[i9].intl[L3]({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",[m9]:"Enter new email"}),[r9]:this[l9][M3],focusInitial:!0})}renderSendNewEmailPasscodeButton(e){return n()(d[n9],{},void 0,e[G3]&&n()("div",{[r9]:this[l9][G3]},void 0,e[G3]),n()(Po.Z,{isLarge:!0,[r9]:this[l9][w3],[v3]:this[O3],[h3]:e[o9]},void 0,e[o9]?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",[m9]:"Send verification code"})))}renderNewEmailPasscodeInput(e){const t=this.getSubmitHandler();return n()(d[n9],{},void 0,n()("p",{[r9]:this[l9][t9]},void 0,n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",[m9]:"We just sent you a temporary verification code to {newEmail}.",[m3]:{[X3]:n()("span",{[r9]:this[l9].bold},void 0,e[X3])}})),n()(bl.Z,{value:e[U3],[u3]:this.handleChangeNewEmailPasscode,onSubmit:t,[d3]:this[i9].intl[L3]({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",[m9]:"Enter verification code"}),focusInitial:!0,[r9]:this[l9][M3]}),e[G3]&&n()("div",{[r9]:this[l9][G3]},void 0,e[G3]),n()(Po.Z,{isLarge:!0,[r9]:this[l9][w3],[v3]:t,[h3]:e[o9]},void 0,e[o9]?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.changeEmailButton.label",[m9]:"Change email"})))}renderEducationPlanDowngradeWarning(){const{hasEducationPlan:e}=this[i9];if(e)return n()("div",{[r9]:{...this[l9][S3],...this.getColors()[S3]}},void 0,m.Z.help({width:14,[T3]:4,marginRight:6,fill:this.theme[l3]})," ",n()("div",{},void 0,n()(f.FormattedMessage,{[m9]:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",[m3]:{sendmessagelink:e=>n()(RP.Z,{[v3]:this.handleSendUsMessageClick},void 0,e)}})))}renderCurrentEmail(){const{userValue:e}=this[i9];if(e)return n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.currentEmail",[m9]:"Your current email is {currentEmail}.",[m3]:{currentEmail:n()("span",{[r9]:this[l9].bold},void 0,e&&e[Y3])}})}renderClaimedEmailDomainWarning(e){return n()(Ji.Z,{isSmall:!0,isMultiline:!0,[r9]:this[l9].claimedEmailDomainWarning},void 0,n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",[m9]:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",[m3]:{newEmailDomain:(0,uU.Gd)(e[X3])??e[X3],domainclaimlink:e=>n()(RP.Z,{href:(0,X.getLocalizedUrl)(r3),external:!0},void 0,e)}}))}showConfirmationModal(e){return w.confirmUserAction({message:n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.title",[m9]:"Are you sure you want to change your email?"}),description:n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.description",[m9]:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",[m3]:{[s3]:(0,uU.Gd)(e)}}),acceptLabel:n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",[m9]:"Change email"}),cancelLabel:n()(f.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",[m9]:"Go back"})})}getUserCurrentEmail(){const{[u9]:e}=this[c9],{userValue:t,intl:i}=this[i9];if(t)return t[Y3];e[J3]({open:e[d9].open,[a9]:!1,[s9]:void 0,[G3]:i[L3]({id:"profileSettings.changeEmailModal.errorNoUserValue",[m9]:"User value is undefined."})})}getSubmitHandler(){const{[u9]:e}=this[c9],{userValue:t}=this[i9];if(!e[d9][a9])return()=>{};if(e[d9][e9]&&(0,uU.Gd)(e[d9][X3])!==(0,uU.Gd)((null==t?void 0:t[Y3])||"")){const t=e[d9][X3];return async()=>{await this.showConfirmationModal(t)&&await this[N3]()}}return this[N3]}getColors(){return{modal:{background:this.theme.contentBackground},[S3]:{color:this.theme.lightTextColor,borderTop:`1px solid ${this.theme.regularDividerColor}`}}}}g9.displayName="EmailChangeSettings";const h9=(0,f.injectIntl)(g9);class v9 extends E.default{getInitialState(){return{open:!1}}}const f9=new v9,y9=i(85).g7N,b9=i(85).rps,S9=i(85).$bT,w9=i(85).D7I,M9=i(85).PG2,k9=i(85).BJF,C9=i(85).NF1,Z9=i(85).nx5,T9=i(85).wgE;class P9 extends c.Z{constructor(){super(...arguments),this.handleLogOutFromActiveSessions=async()=>{S.trackLogOutFromActiveSessions(this[T9]),await T.logoutActiveSessions(this[T9],{}),this.openConfirmationModal()}}renderComponent(){const e=n()(f.FormattedMessage,{id:"manageActiveSessions.title",[Z9]:"Log out of all devices"}),t=n()(f.FormattedMessage,{id:"manageActiveSessions.logOutActiveSessions.label",[Z9]:"Log out of all other active sessions on other devices besides this one."});return d[w9](d.Fragment,null,n()(NP.Z,{type:"custom",isMobile:!1,title:e,caption:t,customButton:n()(nl.Z,{style:{[C9]:"0.25em"},[M9]:this.handleLogOutFromActiveSessions},void 0,m.Z.chevronRightRoundedThin(this[k9]()))}),this.renderManageActiveSessionsModal())}renderManageActiveSessionsModal(){const{open:e}=f9.state,t=this.getUserEmailAddress();return n()(QI.Z,{open:e,onDismiss:this.closeConfirmationModal,innerStyle:{width:350,padding:24,display:"flex",[S9]:b9},render:()=>d[w9](d.Fragment,null,n()("div",{style:{[y9]:24}},void 0,n()(f.FormattedMessage,t?{id:"manageActiveSessions.confirmationModal.withEmail",[Z9]:"You have been logged out from other active sessions for {email}.",values:{email:t}}:{id:"manageActiveSessions.confirmationModal.withoutEmail",[Z9]:"You have been logged out from other active sessions for your account."})),n()(Po.Z,{[M9]:this.closeConfirmationModal},void 0,n()(f.FormattedMessage,{id:"manageActiveSessions.confirmationModal.close",[Z9]:"Close"})))})}openConfirmationModal(){f9.setState({...f9.state,open:!0})}closeConfirmationModal(){f9.setState({...f9.state,open:!1})}getUserEmailAddress(){let e;const{currentUserStore:t}=B.default.state;return t&&(e=t.getEmail()),e}getSettingTextStyle(){return{display:"flex",[S9]:b9,alignItems:"flex-start",width:"100%",height:"auto"}}getSettingStyle(){return{display:"flex",[S9]:"row",alignItems:"center"}}[k9](){return{width:20,height:20,fill:this.theme.lightIconColor}}}P9.displayName="ManageActiveSessions";const I9=P9;var F9=i(1799),_9=i(16010);const x9=i(85).nx5,A9=i(85).Yzm,B9=i(85).FNh,D9=i(85).bbz,E9=i(85).F5W,L9=i(85).Wp_,R9=i(85).IO3,N9=i(85).Kx0,O9=i(85).Un6;class U9 extends E.default{getInitialState(){return{step:O9}}}class V9 extends _9.o{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this[N9]("backupCodesUninitialized"))return;const{onLoadingComplete:t,[R9]:i}=e;this.store[L9]({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,[R9]:i,onLoadingComplete:t}).catch(this[E9])}backupCodesShowCreate(){this[N9]("backupCodesUninitialized")&&this.store[L9]({step:D9})}[D9](){this[N9]("backupCodesRegenerateCodes")&&(this.store[L9]({step:D9,isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,[R9]:()=>{},onLoadingComplete:()=>{}}).catch(this[E9]))}exit(){this.store[L9]({step:O9})}async doCreateBackupCodes(e){const{forceRecreate:t,[R9]:i,onLoadingComplete:o}=e,n=await this.withStep(["backupCodesLoading",D9],(()=>this.service.createBackupCodes(t)));if(!n)return;const{result:a}=n;if("already-exists"===a.status)i();else{const e=function(e){const t=J.default.getIntl(),i=t[A9]({id:"mfa.backupCodes.downloadableTextFile.title",[x9]:"Notion Backup Codes"}),o=t[A9]({id:"mfa.backupCodes.downloadableTextFile.createdAt",[x9]:"Created at {createdAt}"},{createdAt:`${new Date}`}),n=t[A9]({id:"mfa.backupCodes.downloadableTextFile.warningMessage",[x9]:"Please store these in a secure location and mark off codes as they are used."}),a=`${i}\n${o}\n\n${e.map(F9.K).join("\n")}\n\n${n}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store[L9]({step:"backupCodesShowCodes",backupCodes:a.backupCodes,[B9]:a[B9],backupCodesFile:e}),o()}}}var W9=i(75752),K9=i(88175);const z9=i(85).ChN,G9=i(85).nx5,H9=i(85).MQM;function q9(e){let{[H9]:t,isLoading:i,onDisplayBackupCodes:o,onCancel:a,onDismiss:s}=e;const r=n()(f.FormattedMessage,{id:"mfa.regenerateBackupCodes.title",[G9]:"Regenerate backup codes"}),l=n()(f.FormattedMessage,{id:"mfa.regenerateBackupCodes.message",[G9]:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>n()("span",{style:{[z9]:v.Z[z9].semibold}},void 0,e)}}),d={text:i?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",[G9]:"Generate new backup codes"}),onClick:o,view:"outline",disabled:i,isRed:!0},c=[{text:n()(f.FormattedMessage,{id:"mfa.regenerateBackupCodes.cancel.button.message",[G9]:"Cancel"}),onClick:a,view:"outline",type:"button"}];return n()(K9.Z,{title:r,header:l,[H9]:t,primaryAction:d,secondaryActions:c,onDismiss:s})}var j9=i(457);const Q9=i(85).ChN,J9=(i(85).U$0,i(85).nx5),$9=i(85).MQM;function Y9(e){let{backupCodes:t,backupCodeDownload:i,backupCodeFileName:o,[$9]:a,onNoted:s,onDownload:r}=e;const l=n()(f.FormattedMessage,{id:"mfa.showBackupCodes.title",[J9]:"Save your backup codes"}),c=d.createElement(d.Fragment,null,n()(f.FormattedMessage,{id:"mfa.showBackupCodes.message",[J9]:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>n()("span",{style:{[Q9]:v.Z[Q9].semibold}},void 0,e)}})),u={text:n()(f.FormattedMessage,{id:"mfa.showBackupCodes.codesNotedDown.button.message",[J9]:"I've saved them"}),onClick:s},m=[{text:n()(f.FormattedMessage,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",[J9]:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${i}`,saveAs:o,view:"outline",type:"link",onClick:r}];return n()(K9.Z,{title:l,header:c,[$9]:a,primaryAction:u,secondaryActions:m},void 0,n()(j9.Z,{type:"unencryptedCodes",backupCodes:t}))}const X9=i(85).xYh,eee=i(85).Un6,tee=i(85).bbz;function iee(e){const{backupCodesStateMachine:t,onGoToSettings:i,onDismiss:o}=e,a=t.useCurrentStep(),s=()=>t[tee]();switch(a.step){case eee:case"backupCodesLoading":return null;case tee:return n()(q9,{[X9]:a[X9],errorMessage:a.error,onDisplayBackupCodes:s,onDismiss:o,onCancel:i});case"backupCodesShowCodes":return n()(Y9,{errorMessage:a.error,backupCodes:a.backupCodes,backupCodeDownload:a.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:i});default:return(0,x.unreachable)(a)}}var oee=i(99657);const nee=i(85).nx5,aee=i(85).MQM;function see(e){let{type:t,[aee]:i,onDismiss:o,onAddMethod:a}=e;window.__c={n:"MFAPromptSetupComplete"};const s=(0,ji.yK)(ree,[]),r=n()(f.FormattedMessage,{id:"mfa.setupComplete.confirmation.header",[nee]:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),l=[{text:n()(f.FormattedMessage,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",[nee]:"View 2-step methods"}),onClick:a,type:"button",view:"outline"}];return n()(K9.Z,{title:"totp"===t?n()(f.FormattedMessage,{id:"mfa.totp.setupComplete.confirmation.title",[nee]:"2-step verification with authenticator is turned on"}):"sms"===t?n()(f.FormattedMessage,{id:"mfa.sms.setupComplete.confirmation.title",[nee]:"2-step verification with phone number is turned on"}):(0,x.unreachable)(t),header:r,[aee]:i,icon:m.Z.circleCheck(s.confirmationIcon),secondaryActions:l,onDismiss:o})}function ree(e){return(0,ji.EM)({confirmationIcon:{width:30,fill:"green"}})}var lee=i(4387),dee=i(49682);const cee=i(85).L_E,uee=i(85).j7K,mee=i(85).rpY,pee=i(85).y79,gee=i(85).cZW,hee=i(85).Dd5,vee=i(85).D7I,fee=i(85).Yzm,yee=(i(85)._BJ,i(85).nx5),bee=i(85).nm$,See=i(85).MQM,wee=i(85).sOi,Mee=i(85).Lfz,kee={[Mee]:"United States",[wee]:"1",regionCode:"US"},Cee=[{[Mee]:"China",[wee]:"86",regionCode:"CN"}];function Zee(e){let{isLoading:t,phoneNumber:i,country:o,[See]:a,onDismiss:r,onBack:c,onContinue:u}=e;window.__c={n:"MFAPromptSMSAddPhone"};const p=(0,ji.yK)(Tee,[]),g=(0,f.useIntl)(),[h,v]=(0,d.useState)(i??""),[y,b]=(0,d.useState)([]),[S,w]=(0,d.useState)(""),[M,k]=(0,d.useState)(o??kee),Z=(0,qi.qz)(void 0,ea.Z),[T,P]=(0,d.useState)(void 0),I=(0,d.useMemo)((()=>(0,lee.PG)(M.regionCode)),[M.regionCode]),F=(0,d.useCallback)((e=>{const t=e[bee].value.replace(/\D/g,"");v(I.reset(t))}),[I]);(0,d.useEffect)((()=>{v(o!==M?I.reset(h??""):I.reset(i??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,lee.wJ)();let n=-1;const a=t.map(((t,i)=>{const o=(0,lee.t7)(t).toString(),a=e.of(t);return t===M.regionCode&&(n=i),{[Mee]:a??t,[wee]:o,regionCode:t}}));-1!==n&&a.unshift(a.splice(n,1)[0]),b(a),Cee.some((e=>l().isEqual(e,M)))?P(dee.Qj.smsUnsupportedPhoneNumber(M[Mee])):P(void 0)}),[M]);const _=n()(f.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneTitle",[yee]:"Add a phone number"}),x=n()(f.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneHeader",[yee]:"Enter your phone number to receive a 2-step verification code."}),A={text:t?n()(ao.Z,{}):n()(f.FormattedMessage,{id:"profileSettings.mfa.sms.continueButton",[yee]:"Continue"}),onClick:()=>u(M,h.trim()),disabled:t||""===h||void 0!==T},B=[{text:n()(f.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",[yee]:"Need help?"}),href:(0,X.getLocalizedUrl)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],D=g[fee]({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",[yee]:"Enter phone number"}),E=g[fee]({[yee]:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),L=e=>n()("div",{style:p.countryCodeSelectTitle},void 0,e[Mee],n()(Ji.Z,{isSmall:!0},void 0,`+${e[wee]}`)),R=n()(na.ZP,{popupType:na.Z4.Popup,placementToOrigin:$H.Iw.Bottom,alignmentToOrigin:$H.lU.Start,buttonPopupStore:Z,renderOrigin:e=>d[vee](eo.Z,e,`+${M[wee]}`),[mee]:e=>n()(Xo.Z,{menuType:jo.og.Popup,minWidth:280,maxHeight:"30vh",header:n()(on.Z,{isInput:!0},void 0,n()(aj.ZP,{value:S,[hee]:e=>w(e[bee].value),focus:!0,focusAfterAnimation:!0,[gee]:E}))},void 0,n()(en.Z,{type:en.i[pee],[uee]:0,sections:[{key:"countries",[mee]:e=>d[vee](on.Z,e),items:(0,wy.ZP)(S,y,(e=>/\d/.test(S)?`${e[wee]}`:e[Mee])).map((t=>({key:t.regionCode,[mee]:e=>d[vee]($o.Z,s()({},e,{title:L(t),right:t[Mee]===M[Mee]?m.Z.thinCheck(p.selectedCountryCodeIcon):void 0})),action:()=>{w(""),k(t),e.close()}})))}]}))});return n()(K9.Z,{onDismiss:r,onBack:c,title:_,header:x,[See]:T||a,primaryAction:A,secondaryActions:B},void 0,n()("div",{style:p[cee]},void 0,n()("div",{style:p.countryCodeDropdownMenu},void 0,R),n()(bl.Z,{autoFocus:!0,value:h,[gee]:D,spellCheck:!1,style:p.phoneNumberInput,[hee]:F,disabled:t||void 0!==T,customElementAttributes:C.pf})))}function Tee(e){return(0,ji.EM)({[cee]:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},selectedCountryCodeIcon:{width:15,height:15},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?Bv.ZP.transparent:e.inputBackground}})}var Pee=i(56839);const Iee=i(85).kDM,Fee=i(85).Ujd,_ee=i(85).U2T,xee=i(85).u6k,Aee=i(85).MQM,Bee=i(85).pM$,Dee=i(85).wJk;function Eee(e){const{smsStateMachine:t,onGoToSettings:i,[Dee]:o,onStartBackupCodes:a}=e,s=t.useCurrentStep();switch(s.step){case"smsUninitialized":return null;case"smsSendingSMS":case Bee:return n()(Zee,{phoneNumber:s.phoneNumber,country:s.country,isLoading:"smsSendingSMS"===s.step,[Aee]:s.error,[Dee]:o,onBack:i,onContinue:(e,i)=>t.smsCreateSMS(e,i)});case xee:case _ee:case Fee:case"smsVerifying":return n()(Pee.ZP,{isLoading:"smsVerifying"===s.step||"smsBackupCodesLoading"===s.step,[Aee]:s.error,phoneNumber:`+${s.country.countryCode} ${s.phoneNumber}`,[Dee]:o,onBack:()=>t.smsRestart(),onVerifyCode:e=>t[xee]({code:e,onVerified:a}),resentStatus:"smsResendSMS"===s.step?"resending":"resentAt"in s&&void 0!==s.resentAt?"resent":Iee,resentAt:"resentAt"in s&&s.resentAt?s.resentAt:0,onResendLink:()=>t[_ee]()});case"smsVerified":return null;case"smsComplete":return n()(see,{type:"sms",[Aee]:s.error,onAddMethod:i,[Dee]:o});default:return(0,x.unreachable)(s)}}const Lee=i(85).Uie;function Ree(e){window.__c={n:"MFAAuthenticatorNameInput"};const{placeholder:t,value:i,maxlength:o,style:a,onChange:s}=e,r=(0,ji.yK)((e=>(0,ji.EM)({input:{background:Bv.ZP.transparent,color:e.darkTextColor,...a}})),[a]);return n()(bl.Z,{value:i,placeholder:t,maxlength:o,style:r.input,inputStyle:v.Z[Lee],autoFocus:!0,spellCheck:!1,onChange:s,autoComplete:"off",customElementAttributes:C.pf})}const Nee=i(85).jkI,Oee=i(85).UPJ,Uee=i(85).cZW,Vee=(i(85)._BJ,i(85).nx5),Wee=i(85).MQM;function Kee(e){let{isLoading:t,qrCode:i,friendlyName:o,[Wee]:a,onDismiss:s,onBack:r,onCantScanCode:l,onContinue:c}=e;window.__c={n:"MFAPromptTOTPScanQRCode"};const u=(0,ji.yK)(zee,[]),m=(0,f.useIntl)(),[p,g]=(0,d.useState)(o??""),h=(0,d.useCallback)((e=>{g(e.target.value)}),[g]),v=n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeTitle",[Vee]:"Scan code in authenticator app"}),y=n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeHeader",[Vee]:"Generate a verification code with an authenticator app, then enter a name to remember it by."}),b={text:n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.continueButton",[Vee]:"Continue"}),onClick:()=>c(p),disabled:!i||t||0===p.length},S=[{text:n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.cantScanCodeButton",[Vee]:"Can't scan code?"}),onClick:l,type:"button",view:"plain",disabled:t}],w=m.formatMessage({id:"profileSettings.mfa.totp.authenticatorNameInput.placeholder",[Vee]:"Enter authenticator name"});return n()(K9.Z,{onDismiss:s,onBack:r,title:v,header:y,[Wee]:a,primaryAction:b,secondaryActions:S},void 0,n()("div",{style:u.body},void 0,n()("div",{style:u.qrCodeContainer},void 0,i?n()("img",{style:u.qrCode,src:i}):n()(ao.Z,{})),n()(Ree,{[Uee]:w,value:p,maxlength:30,onChange:h})))}function zee(e){return(0,ji.EM)({body:{width:"100%",display:"flex",flexDirection:"column",[Oee]:Nee,alignItems:Nee},qrCodeContainer:{display:"flex",[Oee]:Nee,alignItems:Nee,width:116,height:116,marginBottom:15},qrCode:{width:"100%"}})}const Gee=i(85).jkI,Hee=i(85).UPJ,qee=i(85).$bT,jee=i(85).cZW,Qee=i(85).paz,Jee=(i(85)._BJ,i(85).nx5),$ee=i(85).MQM;function Yee(e){let{textCode:t,friendlyName:i,[$ee]:o,isLoading:a,onDismiss:s,onBack:r,onUseQrCode:l,onContinue:c}=e;window.__c={n:"MFAPromptTOTPTypeTextCode"};const u=(0,ji.yK)(Xee,[]),[m,p]=(0,d.useState)(i??""),g=(0,f.useIntl)(),h=(0,d.useCallback)((e=>{p(e.target.value)}),[p]),v=n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.typeTextCodeTitle",[Jee]:"Type code from authenticator app"}),y=n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.typeText.message",[Jee]:"Input this setup key in your authenticator app, then enter a name to remember it by.",values:{authenticatorlink:e=>n()(RP.Z,{external:!0,href:(0,X.getLocalizedUrl)("guides.mfa")},void 0,e)}}),b={text:n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.continueButton",[Jee]:"Continue"}),onClick:()=>c(m),disabled:a||0===m.length},S=[{text:n()(f.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeButton",[Jee]:"Scan QR code"}),onClick:l,type:"button",view:"plain",disabled:a}],w=g.formatMessage({id:"profileSettings.mfa.totp.authenticatorNameInput",[Jee]:"Enter authenticator name"});return n()(K9.Z,{onDismiss:s,onBack:r,title:v,header:y,[$ee]:o,primaryAction:b,secondaryActions:S},void 0,n()("div",{style:u.body},void 0,n()("div",{style:u[Qee]},void 0,n()("div",{style:u.textCode},void 0,t)),n()(Ree,{[jee]:w,value:m,maxlength:30,onChange:h})))}function Xee(e){return(0,ji.EM)({body:{width:"100%",display:"flex",[qee]:"column",[Hee]:Gee},textCode:{fontWeight:v.Z.fontWeight.medium,fontSize:v.Z.fontSize.UIRegular.desktop,color:e.darkTextColor,textAlign:Gee,verticalAlign:"middle"},[Qee]:{display:"flex",[qee]:"column",[Hee]:Gee,height:50,marginBottom:15}})}var ete=i(18469);const tte=i(85).KnS,ite=i(85).PZO,ote=i(85).MQM,nte=i(85).Zg,ate=i(85).xYh,ste=i(85).Erl,rte=i(85).wJk;function lte(e){const{totpStateMachine:t,onGoToSettings:i,onStartBackupCodes:o,[rte]:a}=e,r=t.useCurrentStep();switch(r.step){case"totpUninitialized":return null;case"totpLoadingQRCode":case ste:const e="totpLoadingQRCode"===r.step?{[ate]:!0,qrCode:void 0}:{[ate]:r[ate],qrCode:r.qrCode};return d.createElement(Kee,s()({},e,{friendlyName:"totpDisplayQRCode"===r.step?r.friendlyName:void 0,[ote]:r.error,[rte]:a,onBack:i,onCantScanCode:()=>t[nte](),onContinue:e=>t.totpDisplayVerification(e)}));case nte:return n()(Yee,{textCode:r.rawString,friendlyName:r.friendlyName,[ote]:r.error,[ate]:r[ate],[rte]:a,onBack:i,onUseQrCode:()=>t[ste](),onContinue:e=>t.totpDisplayVerification(e)});case ite:case tte:case"totpVerifying":return n()(ete.ZP,{[ate]:"totpVerifying"===r.step||"totpBackupCodesLoading"===r.step,[ote]:r.error,[rte]:a,onBack:()=>t[ste](),onVerifyCode:e=>t[ite]({code:e,onVerified:o})});case"totpVerified":return null;case"totpComplete":return n()(see,{type:"totp",[ote]:r.error,[rte]:a,onAddMethod:i});default:return(0,x.unreachable)(r)}}const dte=i(85).wJk,cte=i(85).ma1,ute=i(85).y7y,mte=i(85).L48;function pte(e){window.__c={n:"RootRouter"};const{rootStateMachine:t,[mte]:i,totpStateMachine:o,smsStateMachine:a,backupCodesStateMachine:r,onReloadSettings:l}=e,c=t[ute](),[{showSettings:u,onRootExit:m}]=(0,d.useState)((()=>({onRootExit:()=>t.exit((()=>{i.exit(),o.exit(),a.exit(),r.exit(),l&&l()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{i[cte]()}})}))),p=()=>t.rootCloseSettings((()=>{i.exit(),l&&l()})),g=()=>t.rootStartTOTP((()=>o.totpStart())),h=()=>t.rootStartSMS((()=>a.smsStart())),v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{o.exit(),i.settingsShow({refresh:!0})}})},f=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{a.exit(),i.settingsShow({refresh:!0})}})},y=()=>{r.exit(),t.rootEndBackupCodes({completeTotp:()=>{o.totpComplete()},completeSMS:()=>{a.smsComplete()},showSettings:u})},b=()=>{r.backupCodesInitialSetup({onLoadingComplete:()=>{o.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{o.totpBackupCodesComplete(),o.totpComplete(),y()}})},S=()=>{r.backupCodesInitialSetup({onLoadingComplete:()=>{a.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{a.smsBackupCodesComplete(),a.smsComplete(),y()}})},w=()=>{t.rootStartBackupCodesFromSettings((()=>r.backupCodesShowCreate()))},M=i[ute](),k=o[ute](),C=a[ute](),Z=r[ute]();let T;switch(c.step){case"rootUninitialized":break;case"rootSettings":T={open:"settingsUninitialized"!==M.step,[dte]:m,render:()=>n()(oee.Z,{[mte]:i,[dte]:p,onStartTOTP:g,onStartSMS:h,onStartBackupCodes:w})};break;case"rootTOTP":T={open:"totpUninitialized"!==k.step,[dte]:m,render:()=>n()(lte,{totpStateMachine:o,onGoToSettings:v,onStartBackupCodes:b,[dte]:m})};break;case"rootSMS":T={open:"smsUninitialized"!==C.step,[dte]:m,render:()=>n()(Eee,{smsStateMachine:a,onGoToSettings:f,onStartBackupCodes:S,[dte]:m})};break;case"rootBackupCodes":T={open:"backupCodesUninitialized"!==Z.step,[dte]:"backupCodesRegenerateCodes"===Z.step?m:void 0,render:()=>n()(iee,{backupCodesStateMachine:r,onGoToSettings:y,[dte]:m})};break;default:throw(0,x.unreachable)(c)}return T?d.createElement(QI.Z,s()({},T,{preventHideChildrenWhileOpening:!0})):null}const gte=i(85).fNv,hte=i(85).NSN,vte=i(85).XtO,fte=i(85).Wp_,yte=i(85).Kx0;class bte extends E.default{getInitialState(){return{step:"rootUninitialized"}}}class Ste extends _9.o{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:i}=e;if(this[yte]("rootSettings")){if(!t)return}else this[vte][fte]({step:hte});i()}rootStartBackupCodesFromSettings(e){this[yte]("rootSettings")&&(this[vte][fte]({step:gte,source:"settings"}),e())}rootStartTOTP(e){this[yte]("rootSettings")&&(this[vte][fte]({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this[yte]("rootTOTP")&&this[vte][fte]({step:gte,source:"totp"})}rootStartSMS(e){this[yte]("rootSettings")&&(this[vte][fte]({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this[yte]("rootSMS")&&this[vte][fte]({step:gte,source:"sms"})}rootEndBackupCodes(e){const t=this[yte](gte);if(t)switch(t.source){case"settings":return this[vte][fte]({step:hte}),e.showSettings();case"sms":return this[vte][fte]({step:"rootSMS"}),e.completeSMS();case"totp":return this[vte][fte]({step:"rootTOTP"}),e.completeTotp();default:(0,x.unreachable)(t.source)}}rootCloseSettings(e){e(),this[vte][fte]({step:"rootUninitialized"})}exit(e){this[vte][fte]({step:"rootUninitialized"}),e()}}var wte=i(24173);const Mte=i(85).IFy,kte=i(85).Ujd,Cte=i(85).Txi,Zte=i(85).kIz,Tte=i(85).gd_,Pte=i(85).FNh,Ite=i(85).F5W,Fte=i(85).o8N,_te=i(85).r5p,xte=i(85).u6k,Ate=i(85).U2T,Bte=i(85).pM$,Dte=i(85).XtO,Ete=i(85).Wp_,Lte=i(85).Kx0,Rte=i(85).XCv;class Nte extends E.default{getInitialState(){return{step:"smsUninitialized"}}}class Ote extends _9.o{constructor(e,t){super(e,"sms"),this[Rte]=void 0,this[Rte]=t}smsStart(){this[Lte]("smsUninitialized")&&this[Dte][Ete]({step:Bte})}smsRestart(){const e=this[Lte]([Ate,xte,_te]);e&&this[Dte][Ete]({step:Bte,country:e.country,phoneNumber:e.phoneNumber,[Fte]:void 0})}smsCreateSMS(e,t){this[Lte]("smsSetPhoneNumber")&&(this[Dte][Ete]({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this[Ite]))}[Ate](){const e=this[Lte]([xte,_te]);e&&(this[Dte][Ete]({...e,step:Ate,[Fte]:void 0}),this.doResendSMS().catch(this[Ite]))}[xte](e){const{code:t,onVerified:i}=e,o=this[Lte](xte);o&&(this[Dte][Ete]({...o,step:_te,[Fte]:void 0}),this.doVerifyCode({code:t,onVerified:i}).catch(this[Ite]))}smsBackupCodesComplete(){this[Lte]("smsBackupCodesLoading")&&this[Dte][Ete]({step:"smsVerified"})}smsComplete(){this[Lte]("smsVerified")&&this[Dte][Ete]({step:"smsComplete"})}exit(){this[Dte][Ete]({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this[Rte].createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:i}=e;switch(t.status){case"created":this[Dte][Ete]({...i,step:xte,[Pte]:t[Pte],[Fte]:void 0});break;case Tte:this[Dte][Ete]({step:Bte,[Fte]:dee.Qj.smsAlreadyVerifiedPhoneNumber});break;case Zte:this[Dte][Ete]({step:Bte,[Fte]:dee.Qj.smsInvalidCountryCode});break;case Cte:this[Dte][Ete]({step:Bte,[Fte]:dee.Qj.smsInvalidPhoneCode});break;default:return(0,x.unreachable)(t)}}async doVerifyCode(e){const{code:t,onVerified:i}=e,o=await this.withStep(_te,(e=>this[Rte].verifySMS({[Pte]:e[Pte],code:t})));if(!o)return;const{result:n,state:a}=o;switch(n.status){case"match":this[Dte][Ete]({step:kte,country:a.country,phoneNumber:a.phoneNumber}),i();break;case Fte:this[Dte][Ete]({...a,step:xte,[Fte]:dee.Qj[Mte]});break;case"incorrect":this[Dte][Ete]({...a,step:xte,[Fte]:dee.Qj.smsIncorrectCode});break;default:return(0,x.unreachable)(n.status)}}async doResendSMS(){const e=await this.withStep(Ate,(e=>this[Rte].sendSMS({[Pte]:e[Pte]})));if(!e)return;const{result:t,state:i}=e;switch(t.status){case"ok":this[Dte][Ete]({...i,step:xte,[Pte]:i[Pte],[Fte]:void 0,resentAt:Date.now()});break;case Fte:this[Dte][Ete]({...i,step:xte,[Pte]:i[Pte],[Fte]:dee.Qj[Mte]});break;default:return(0,x.unreachable)(t.status)}}}const Ute=i(85).KnS,Vte=i(85).V_k,Wte=i(85).FNh,Kte=i(85).xYh,zte=i(85).PZO,Gte=i(85).Erl,Hte=i(85).Zg,qte=i(85).F5W,jte=i(85).XtO,Qte=i(85).Wp_,Jte=i(85).Kx0,$te=i(85).XCv;class Yte extends E.default{getInitialState(){return{step:"totpUninitialized"}}}class Xte extends _9.o{constructor(e,t){super(e,"totp"),this[$te]=void 0,this[$te]=t}totpStart(){this[Jte]("totpUninitialized")&&(this[jte][Qte]({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this[qte]))}[Hte](){const e=this.getCurrentStep();switch(e.step){case Gte:case zte:this[jte][Qte]({...e,step:Hte,error:void 0,[Kte]:!1})}}[Gte](){const e=this.getCurrentStep();switch(e.step){case Hte:case zte:this[jte][Qte]({...e,step:Gte,error:void 0,[Kte]:!1})}}totpDisplayVerification(e){this[Jte]([Gte,Hte])&&this.doRenameTOTP(e).catch(this[qte])}[zte](e){const{code:t,onVerified:i}=e,o=this[Jte](zte);o&&(this[jte][Qte]({...o,step:"totpVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:i}).catch(this[qte]))}totpBackupCodesComplete(){this[Jte]("totpBackupCodesLoading")&&this[jte][Qte]({step:"totpVerified"})}totpComplete(){this[Jte]("totpVerified")&&this[jte][Qte]({step:"totpComplete"})}exit(){this[jte][Qte]({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this[$te].createTOTP()));if(!e)return;const{result:t}=e;this[jte][Qte]({step:Gte,qrCode:t.qrCode,rawString:t.secret,[Wte]:t[Wte],[Kte]:!1})}async doRenameTOTP(e){const t=await this.withStep([Gte,Hte],(t=>this[$te].renameSettings({[Wte]:t[Wte],friendlyName:e})));if(!t)return;const{result:i,state:o}=t;switch(i.status){case"saved":this[jte][Qte]({...o,step:zte,friendlyName:e,error:void 0});break;case"duplicate":this[jte][Qte]({...o,[Kte]:!1,error:dee.Qj.totpDuplicateFriendlyName});break;case"empty":this[jte][Qte]({...o,[Kte]:!1,error:dee.Qj.totpEmptyFriendlyName});break;case Vte:this[jte][Qte]({...o,[Kte]:!1,error:dee.Qj.totpBadFriendlyName});break;default:return(0,x.unreachable)(i)}}async doVerifyCode(e){const{code:t,onVerified:i}=e,o=await this.withStep("totpVerifying",(e=>this[$te].verifyTOTP({[Wte]:e[Wte],code:t})));if(!o)return;const{result:n,state:a}=o;switch(n.status){case"match":this[jte][Qte]({step:Ute}),i();break;case"error":this[jte][Qte]({...a,step:zte,error:dee.Qj.unexpectedError});break;case"incorrect":this[jte][Qte]({...a,step:zte,error:dee.Qj.totpIncorrectCode});break;default:return(0,x.unreachable)(n.status)}}}const eie=i(85).ma1,tie=i(85).nx5,iie=i(85).hxe,oie=i(85).QQK,nie=i(85).L48;function aie(e){let{status:t,numMfaSettings:i,onReloadSettings:o,regenerateBackupCodes:a}=e;window.__c={n:"MFASettings"};const s=(0,Hi.O7)(),[{rootStateMachine:r,[nie]:l,totpStateMachine:c,smsStateMachine:u,backupCodesStateMachine:m}]=(0,d.useState)((()=>{const e=new W9.r(s),t={totpStore:new Yte,[oie]:new wte.c,smsStore:new Nte,backupCodesStore:new U9,rootStore:new bte};return{mfaService:e,rootStateMachine:new Ste(t.rootStore),[nie]:new wte.W(t[oie],e),totpStateMachine:new Xte(t.totpStore,e),smsStateMachine:new Ote(t.smsStore,e),backupCodesStateMachine:new V9(t.backupCodesStore,e)}})),p=s.device.isMobile,g=(0,ji.yK)((e=>({configureButton:{marginTop:p?12:0,marginBottom:p?4:0},regenerateBackupCodesBadge:{fontWeight:v.Z.fontWeight.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?Bv.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[p]),h=(0,qi.VK)((()=>Wi.Z.state.highlightedSetting===Wi.R.TwoStepVerification),[]);return d.createElement(d.Fragment,null,n()(NP.Z,{type:iie,isMobile:!1,title:n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",[tie]:"2-step verification"}),caption:n()(f.FormattedMessage,"on"===t?{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",[tie]:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:i}}:{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",[tie]:"Add an additional layer of security to your account during login."}),isOn:"on"===t,buttonStyle:g.configureButton,buttonLabel:n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.label",[tie]:"Change verification methods"}),onClick:()=>{!function(e){let{rootStateMachine:t,[nie]:i}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>i[eie]()})}({rootStateMachine:r,[nie]:l})},tooltipLabel:n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",[tie]:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,disabled:"disabled"===t,badge:a&&n()(e3.Z,{style:g.regenerateBackupCodesBadge,content:n()(f.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",[tie]:"Regenerate backup codes"})}),shouldHighlight:h}),n()(pte,{onReloadSettings:o,rootStateMachine:r,[nie]:l,totpStateMachine:c,smsStateMachine:u,backupCodesStateMachine:m}))}var sie=i(1548),rie=i(30045);const lie=i(85).F7y,die=i(85).NLk,cie=i(85).nHL,uie=i(85).ChN,mie=i(85).a8s,pie=i(85).D7I,gie=i(85).nLZ,hie=i(85).Hco,vie=i(85).XNW,fie=i(85).pkR,yie=i(85).Gpy,bie=(i(85).MMG,i(85).RhS),Sie=i(85).g3q,wie=i(85).H1U,Mie=i(85).rps,kie=i(85).$bT,Cie=i(85).EMU,Zie=i(85).sM5,Tie=i(85)._M,Pie=i(85).ekf,Iie=i(85).BQ6,Fie=i(85).jkI,_ie=i(85).__z,xie=i(85).weq,Aie=i(85).Ubh,Bie=i(85).nx5,Die=i(85).irb,Eie=i(85).JPH,Lie=i(85).LCr,Rie=i(85).JJs,Nie=i(85).SZh,Oie=i(85).nxU,Uie=i(85).Drs,Vie=i(85).JJj,Wie=i(85).QmD,Kie=i(85).P0R,zie=i(85).sT5,Gie=i(85).Wp_,Hie=i(85).$ym,qie=i(85).IO3,jie=i(85).wgE,Qie=i(85).Onp,Jie=i(85).wfR;class $ie extends c.Z{constructor(){super(...arguments),this.storeTypes={isEducationStore:E.default[Jie](!1)},this[Qie]=()=>{S.trackUploadProfilePhoto(this[jie]),Tx.openFilePickerAndUpload({[jie]:this[jie],onStart:this.handleUploadStart,bucket:"public",onError:this.handleUploadError,[qie]:this[Hie],accept:"image/*"})},this.handleRemoveProfilePhoto=()=>{this[Kie][zie][Gie]({...this[Kie][zie][Wie],profilePhoto:void 0}),z[Vie]({[Uie]:"SpaceProfileSettings.handleRemoveProfilePhoto",[jie]:this[jie],[Oie]:e=>{const{[Nie]:t}=B.default[Wie];t&&b.A({[Rie]:t,data:{profilePhoto:null},[Lie]:e})}})},this.handleNameChange=e=>{const t=e.target.value;S.trackNameChanged(this[jie],{from:this[Kie][zie][Wie].name,to:t}),this[Kie][zie][Gie]({...this[Kie][zie][Wie],name:t}),z[Vie]({[Uie]:"SpaceProfileSettings.handleNameChange",[jie]:this[jie],[Oie]:e=>{const{[Nie]:i}=B.default[Wie];i&&b.A({[Rie]:i,data:{name:t},[Lie]:e})}})},this.handleUploadStart=()=>{this[Kie][zie][Gie]({...this[Kie][zie][Wie],[Eie]:!0})},this.handleUploadError=()=>{this[Kie][zie][Gie]({...this[Kie][zie][Wie],[Eie]:!1}),w[Die](n()(f.FormattedMessage,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",[Bie]:"Upload failed."}))},this[Hie]=e=>{const t=e[0];this[Kie][zie][Gie]({...this[Kie][zie][Wie],profilePhoto:t,[Eie]:!1}),z[Vie]({[Uie]:"SpaceProfileSettings.handleUploadComplete",[jie]:this[jie],[Oie]:e=>{const{[Nie]:i}=B.default[Wie];i&&b.A({[Rie]:i,data:{profilePhoto:t},[Lie]:e})}})}}async willMount(e){super.willMount(e);const{isEducationStore:t}=this.stores,{[zie]:i}=this[Kie],{[Nie]:o,[Aie]:n,currentUserRootStore:a}=B.default[Wie];if(o&&n){const t=i.getValueForUser(o,n,e.intl);t&&i[Gie]({...i[Wie],...t})}if(a){const e=((0,ee.getAdminSpaceProductIds)({[jie]:this[jie],userRootStore:a})||[]).some((e=>e===No.default.pricing.student.productId));t[Gie](e)}await I(this[jie],i)}willUnmount(){Wi.Z[Wie].highlightedSetting&&Wi.Z[Gie]({...Wi.Z[Wie],highlightedSetting:void 0}),super.willUnmount()}renderComponent(){return Qi.Z[Wie][xie]?this.renderSettings():this[_ie]()}[_ie](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,[Iie]:{textAlign:Fie}},void 0,n()(f.FormattedMessage,{[Bie]:"Please go online to manage your profile.",id:"profileSettings.offline.message"})))}renderSettings(){const{[Nie]:e}=B.default[Wie];if(!e)return;const t=e.getValue();if(!t)return;const{name:i}=this[Kie][zie][Wie];return n()($i.Z,{},void 0,this.renderPersonalSettings({[Nie]:e,currentUserValue:t,userName:i}))}renderPersonalSettings(e){var t,i;const{userName:o,[Nie]:a,currentUserValue:s}=e,r=function(e,t){return e.isDefined()?e.getIsSuspended()?{type:"suspended"}:yx({profilePhoto:e.getProfilePhoto(),name:e.getFullName(t),email:e.getEmail()}):{type:"icon"}}(a,J.default.getIntl()),l=(0,uU.Gd)(s.email),c=Boolean(null===(t=this[Kie][zie][Wie][Pie])||void 0===t||null===(i=t.settings)||void 0===i?void 0:i[Tie]);return d[pie](d.Fragment,null,this.renderMyProfileHeader({emailDomainForUser:l}),n()("div",{[Iie]:{[Zie]:Cie,[kie]:Mie}},void 0,n()("div",{[Iie]:{[Zie]:Cie,[kie]:"row",[wie]:Fie}},void 0,n()(vx,{size:60,avatarType:r,isOffline:!Qi.Z[Wie][xie],onUploadProfilePhoto:this[Qie],onRemoveProfilePhoto:this.handleRemoveProfilePhoto,[fie]:c,disabledTooltipMessage:n()(f.FormattedMessage,{id:Sie,[Bie]:bie,[yie]:{emailDomain:l}})}),n()("div",{[Iie]:{[vie]:20,width:250}},void 0,n()(bx.Z,{},void 0,n()(f.FormattedMessage,{id:"profileSettings.personalInfoSection.nameInput.label",[Bie]:"Preferred name"})),this.renderUserNameDisplay({userName:o,emailDomainForUser:l,areProfileEditsDisabled:c}))),"photo"!==r.type&&!c&&n()("div",{[Iie]:{color:this.theme[hie],fontSize:14,[gie]:8}},void 0,n()(f.FormattedMessage,{id:"editableUserAvatar.profilePhoto.addPhoto",[Bie]:"Add photo"}))),n()(LP.Z,{size:48,isHidden:!0}),this.renderAccountSecuritySection({currentUserValue:s}),n()(LP.Z,{size:48,isHidden:!0}),this.renderAccountSupportSection())}renderUserNameDisplay(e){const{userName:t,emailDomainForUser:i,areProfileEditsDisabled:o}=e;return o?n()(ro.Z,{renderTooltip:()=>n()(f.FormattedMessage,{id:Sie,[Bie]:bie,[yie]:{emailDomain:i}}),placement:ro.Z.Placement.Bottom,alignment:ro.Z.Alignment.Center,render:e=>d[pie]("div",s()({},e,{[Iie]:{opacity:.4}}),n()(bl.Z,{[fie]:!0,value:t}))}):n()(bl.Z,{value:t,onChange:this.handleNameChange})}renderMyProfileHeader(e){var t;const{emailDomainForUser:i}=e,o=Boolean(null===(t=this[Kie][zie][Wie][Pie])||void 0===t?void 0:t.isDomainVerified),a=Z.default.checkGate(mie);return n()(Yi.Z,{large:!0,divider:"full"},void 0,a&&o?n()(e3.Z,{[Iie]:{[uie]:v.Z[uie].medium,[cie]:0,margin:"0 0 8px",[die]:lie,width:"fit-content"},content:n()(f.FormattedMessage,{id:"profileSettings.myProfile.managedByline",[Bie]:"Your account is managed by {domain}",[yie]:{domain:i}})}):null,n()(f.FormattedMessage,{id:"profileSettings.myProfile.title",[Bie]:"My profile"}))}renderAccountSecuritySection(e){var t,i;const{currentUserValue:o}=e,a=this[Kie][zie][Wie].accountSettings,s=Boolean(null===(t=this[Kie][zie][Wie][Pie])||void 0===t||null===(i=t.settings)||void 0===i?void 0:i[Tie]),r=()=>{I(this[jie],this[Kie][zie])};return d[pie](d.Fragment,null,n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"profileSettings.accountSecurity.title",[Bie]:"Account security"})),n()(h9,{userValue:o,hasEducationPlan:this.stores.isEducationStore[Wie],areProfileEditsDisabled:s}),n()(LP.Z,{size:18,isHidden:!0}),n()(sie.Z,{hasPassword:a.hasPassword,hasPasswordActions:a.canConfigurePassword,isEducationPlan:this[Kie].isEducationPlan,samlEnforced:a.isSamlEnforced,email:o.email,isError:Boolean(a.error),onReloadSettings:r,mfaStatus:a.mfaStatus}),n()(LP.Z,{size:18,isHidden:!0}),n()(aie,{status:a.mfaStatus,numMfaSettings:a.numMfaSettings,onReloadSettings:r,regenerateBackupCodes:a.regenerateBackupCodes}))}renderAccountSupportSection(){var e;const t=(null===(e=this[Kie][zie][Wie][Pie])||void 0===e?void 0:e.settings)??{};return d[pie](d.Fragment,null,n()(Yi.Z,{large:!0,divider:"full"},void 0,n()(f.FormattedMessage,{id:"profileSettings.support.title",[Bie]:"Support"})),n()(rie.Z,{[Pie]:t}),n()(LP.Z,{size:18,isHidden:!0}),n()(I9,{}),n()(LP.Z,{size:18,isHidden:!0}),n()(X6.Z,{userEmailDomainSettings:this[Kie][zie][Wie][Pie]}))}}$ie.displayName="SpaceProfileSettings";const Yie=(0,f.injectIntl)($ie),Xie=i(85).D7I,eoe=i(85).sbn,toe=i(85).I9R,ioe=i(85).Mk5,ooe=i(85).rps;function noe(e){let{users:t,store:i,extraColumns:o,initialSort:a}=e;window.__c={n:"UserTableBox"};const[s,r]=(0,d.useState)(a),c=(0,f.useIntl)();function u(e,t){return n()(nl.Z,{disabled:!t[ioe],ignoreLocalHoverState:!0,onClick:()=>{!function(e){r({[ooe]:e,asc:(null==s?void 0:s[ooe])===e&&!(null!=s&&s.asc)})}(e)},style:{display:"flex",alignItems:"center"}},void 0,t.title,t[ioe]&&s&&s[ooe]===e&&function(e){const{up:t}=e,i={width:10,height:10,marginLeft:4};return t?m.Z.arrowDownSmall({...i,transform:"rotate(180deg)"}):m.Z.arrowDownSmall(i)}({up:s.asc}))}const p=(0,d.useMemo)((()=>({title:n()(f.FormattedMessage,{id:toe,defaultMessage:"User"}),style:{width:"60%"},[ioe]:!0,renderer:e=>n()(mw.Z,{actorStore:e}),[eoe]:e=>e.getDisplayName(c)})),[c]),g=(0,d.useMemo)((()=>({name:p,...o})),[o,p]),h=l().keys(g).map((e=>({key:e,header:u(e,g[e]),style:g[e].style}))),v=(0,qi.VK)((()=>{const e=t.map((e=>go.U6.createChildStore(i,{table:Ya.KJ,id:e.userId}))).filter((e=>e.isDefined()));return s?e.sort(((e,t)=>{const i=g[s[ooe]][eoe](e),o=g[s[ooe]][eoe](t);var n=i<o?-1:i>o?1:0;return s.asc?n:-1*n})):e}),[t,i,g,s]);return n()(TK.Z,{columns:h,rows:v.map((e=>{const t=Object.values(g).map((t=>t.renderer?t.renderer(e):d[Xie](d.Fragment,null,t[eoe](e))));return{key:e.id,columns:t}}))})}const aoe=i(85).g7N,soe=i(85).XCs,roe=i(85).YDv,loe=i(85).D7I,doe=i(85).nx5;var coe;!function(e){e[e.UserUserSimilarity=0]="UserUserSimilarity"}(coe||(coe={}));const uoe={[coe.UserUserSimilarity]:n()(f.FormattedMessage,{id:"spaceSettingsDebugZone.userUserSimilarity.title",[doe]:"User Similarity"})};function moe(){const e=(0,JI.mS)();return["on"===Z.default.getGroup("user_similarity_debugging")||e?coe.UserUserSimilarity:void 0].filter(x.isDefined)}function poe(e){let{store:t}=e;window.__c={n:"DebugZoneUserUserSimilarityTab"};const{isOnline:i,subscriptionDataStoreData:o,userSimilarityData:a,visibleUsersLoaded:s,visibleUsers:r}=(0,qi.VK)((()=>{var e,i;const o=null===(e=Ki.default.state)||void 0===e?void 0:e.data,n=o?ee.getVisibleUsers(o):[],a=l().every(n.map((e=>go.U6.createChildStore(t,{table:Ya.KJ,id:e.userId}).isReady())));return{isOnline:Qi.Z.state.online,subscriptionDataStoreData:o,userSimilarityData:(null===(i=Ki.default.state.data)||void 0===i?void 0:i.userSimilarity)||{},visibleUsersLoaded:a,visibleUsers:n}}),[t]);if(!i)return n()(Ji.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(f.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",[doe]:"Please go online to manage members."}));if(!o)return n()(ao.Z,{style:{margin:"calc(50% - 1em) auto"}});if(!s)return n()(ao.Z,{style:{margin:"calc(50% - 1em) auto"}});const c={style:{},title:d[loe](d.Fragment,null,"Similarity Score"),sortable:!0,renderer:e=>{var t;return d[loe](d.Fragment,null,(null===(t=a[e.id])||void 0===t?void 0:t.toFixed(3))||0)},getValue:e=>a[e.id]||0};return n()(noe,{users:r,store:t,extraColumns:{similarityColumn:c},initialSort:{column:"similarityColumn",asc:!1}})}function goe(e){let{store:t}=e;window.__c={n:"SpaceSettingsDebugZone"};const{tabs:i}=(0,qi.VK)((()=>({tabs:moe()})),[]),[o,a]=(0,d.useState)(i[0]);return n()($i.Z,{},void 0,n()(OP.Z,{tabs:i.map((e=>uoe[e])),selectedIndex:i.indexOf(o),onChange:e=>a(i[e]),style:{[roe]:0,[soe]:0,marginTop:-6,[aoe]:14},tabTitleStyle:{fontSize:16}}),o===coe.UserUserSimilarity&&n()(poe,{store:t}))}const hoe=i(85).Yzm,voe=i(85).z7d,foe=i(85).xm3,yoe=i(85).l5r,boe=i(85).FWH,Soe=i(85).dcu,woe=i(85).h$q,Moe=i(85).h0C,koe=i(85).Bn$,Coe=i(85).L7u,Zoe=i(85).qaU,Toe=i(85).VJq,Poe=i(85).bsu,Ioe=i(85).$NG,Foe=i(85).w0e,_oe=i(85).nx5;const xoe=(0,f.defineMessages)({accountTab:{id:"spaceSettingsSidebar.accountTab.title",[_oe]:"My account"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",[_oe]:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",[_oe]:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",[_oe]:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",[_oe]:"Members"},plansTab:{id:"spaceSettingsSidebar.plansTab.title",[_oe]:"Plans"},upgradeTab:{id:"spaceSettingsSidebar.upgradeTab.title",[_oe]:"Upgrade"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",[_oe]:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",[_oe]:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",[_oe]:"My connected apps"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",[_oe]:"My connections"},securitySAMLTab:{id:"spaceSettingsSidebar.securityAndSAMLTab.title",[_oe]:"Security & identity"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",[_oe]:"Security"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",[_oe]:"Identity & provisioning"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",[_oe]:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",[_oe]:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",[_oe]:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",[_oe]:"Connections"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",[_oe]:"Experiments"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",[_oe]:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",[_oe]:"My notifications & settings"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",[_oe]:"My settings"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",[_oe]:"My notifications"},debugZoneTab:{id:"spaceSettingsSidebar.debugZoneTab.title",[_oe]:"Debug Zone"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",[_oe]:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",[_oe]:"Import"}}),Aoe={width:20,height:20},Boe={profile:e=>m.Z.typesCreatedBy(Aoe),[Foe]:()=>m.Z[Ioe](Aoe),[Poe]:()=>m.Z[Ioe](Aoe),[Toe]:()=>m.Z.settingsNotifications(Aoe),[Zoe]:()=>m.Z.settingsConnectedApps(Aoe),[Coe]:()=>m.Z.settingsLanguage(Aoe),[koe]:()=>m.Z[koe](Aoe),teams:()=>m.Z.settingsWorkspace(Aoe),members:()=>m.Z.settingsMembers(Aoe),plans:()=>{const{data:e}=Ki.default.state;return e&&ee[Moe](e)?m.Z.settingsPlans(Aoe):m.Z.settingsUpgrade(Aoe)},billing:()=>m.Z.settingsBilling(Aoe),[woe]:()=>m.Z.settingsSubscription(Aoe),security:()=>m.Z.settingsSecurity(Aoe),[Soe]:()=>m.Z[boe](Aoe),[yoe]:()=>m.Z.contentSearch(Aoe),[foe]:()=>m.Z.settingsIntegration(Aoe),[voe]:()=>m.Z.sparkles(Aoe),audit_log:()=>m.Z.ledger(Aoe),debug_zone:()=>m.Z.templates(Aoe),analytics:()=>m.Z.magnifyingGlass(Aoe),imports:()=>m.Z.import(Aoe)},Doe={profile:()=>`${J.default[hoe](xoe.accountTab)}`,[Foe]:()=>J.default[hoe](xoe.notificationsAndSettings),[Poe]:()=>J.default[hoe](xoe.mySettings),[Toe]:()=>J.default[hoe](xoe.myNotifications),[Zoe]:()=>J.default[hoe](xoe.userConnectionsTab),[Coe]:()=>J.default[hoe](xoe.languageAndRegionTab),[koe]:()=>J.default[hoe](xoe.settingsTab),teams:()=>J.default[hoe](xoe.teamsTab),members:()=>(0,Q.isTeamspaceGuestsEnabled)()?J.default[hoe](xoe.peopleTab):J.default[hoe](xoe.membersTab),plans:()=>{const{data:e}=Ki.default.state;return e&&ee[Moe](e)?J.default[hoe](xoe.plansTab):J.default[hoe](xoe.upgradeTab)},billing:()=>J.default[hoe](xoe.billingTab),[woe]:()=>J.default[hoe](xoe.subscriptionTab),security:()=>J.default[hoe](xoe.securityTab),[Soe]:()=>J.default[hoe](xoe.identityProvisioningTab),[yoe]:()=>J.default[hoe](xoe.adminContentSearchTab),[foe]:()=>J.default[hoe](xoe.spaceConnectionsTab),[voe]:()=>J.default[hoe](xoe.experimentsTab),audit_log:()=>J.default[hoe](xoe.auditLogTab),debug_zone:()=>J.default[hoe](xoe.debugZoneTab),analytics:()=>J.default[hoe](xoe.analyticsTab),imports:()=>J.default[hoe](xoe.importTab)},Eoe={profile:()=>null,[Foe]:()=>null,[Poe]:()=>null,[Toe]:()=>null,[Zoe]:()=>null,[Coe]:()=>null,[koe]:()=>null,teams:()=>null,members:()=>null,plans:()=>null,billing:()=>null,[woe]:()=>null,security:()=>null,[Soe]:()=>null,[yoe]:()=>null,[foe]:()=>null,[voe]:()=>null,audit_log:()=>null,debug_zone:()=>null,analytics:()=>null,imports:()=>null};var Loe=i(94919);const Roe=i(85).nx5,Noe={workspaceBalance:n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",[Roe]:"Workspace balance"}),applyCoupon:n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",[Roe]:"Apply coupon"}),discount:n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",[Roe]:"Discount"})};var Ooe=i(34859);const Uoe=i(85).IE_;class Voe extends E.default{getInitialState(){return{paymentMethodModalOpen:!1,billingIntervalModalOpen:!1,billingEmailModalOpen:!1,vatIdModalOpen:!1,addressModalOpen:!1,billingEventsLimit:20,applyCouponModalOpen:!1,addressErrorMessage:void 0}}setAddressField(e){const t=this.state[Uoe]?this.state[Uoe]:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""};this.setState({...this.state,[Uoe]:{...t,...e},addressErrorMessage:void 0})}}const Woe=Voe;var Koe=i(18647);const zoe=i(85).ELX,Goe=i(85).PG2,Hoe=i(85).UPJ,qoe=i(85).wuN,joe=i(85).PXg,Qoe=i(85).EMU,Joe=i(85).nx5,$oe=(0,f.defineMessages)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",[Joe]:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",[Joe]:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",[Joe]:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",[Joe]:"Apply"}});class Yoe extends c.Z{renderComponent(){const{title:e,caption:t,buttonArgs:i}=this.props,o=d.createElement(f.FormattedMessage,$oe[i.buttonPurpose]);return n()("div",{style:{display:Qoe,alignItems:"center",fontSize:14}},void 0,n()("div",{style:{[joe]:"auto"}},void 0,e),n()("div",{style:{color:this.theme[qoe]}},void 0,t),n()("div",{style:{minWidth:110,display:Qoe,[Hoe]:"flex-end"}},void 0,i.showButton&&n()(Io.Z,{isBlue:!0,[Goe]:i[Goe],style:Yoe[zoe]},void 0,o)))}}Yoe.displayName="SubscriptionBillingSettingOption",Yoe[zoe]={marginLeft:18,[joe]:-4,fontWeight:v.Z.fontWeight.medium};const Xoe=(0,f.injectIntl)(Yoe);var ene=i(84076);const tne=i(85).D7I,ine=i(85).sI1,one=i(85).v4t,nne=i(85).BI6,ane=i(85).Mcv,sne=i(85).MLn,rne=i(85).T9w,lne=i(85).XCs,dne=i(85).gGi,cne=i(85).F7y,une=i(85).NLk,mne=(i(85).eF2,i(85).pE7),pne=i(85).xQH,gne=i(85).oO1,hne=i(85).MRO,vne=i(85).QmD,fne=i(85).XNW,yne=i(85).BQ6,bne=i(85).nx5,Sne=i(85).Exd,wne=i(85).Au,Mne=i(85).wuN,kne=i(85).TtP,Cne=i(85).Gnd,Zne=i(85).wgE,Tne=i(85).P0R,Pne=i(85).Wqi,Ine=i(85).XtO;class Fne extends c.Z{constructor(){super(...arguments),this.storeTypes={[Ine]:Woe,billingHistoryRequestStore:rT.Z},this.performGetBillingHistoryRequest=async e=>{const{[Pne]:t}=this[Tne],i=await T.getBillingHistory(this[Zne],{spaceId:t.id,limit:e});if("failed"===i.type)throw i.error;return i.data},this.renderBillingHistoryResults=(e,t)=>{this[Tne].mockBillingHistoryResult&&(t=this[Tne].mockBillingHistoryResult);const{billingHistoryRequestStore:i}=this[Cne];return n()("div",{},void 0,t&&0===t.events[kne]&&n()("div",{[yne]:{color:this[wne][Mne],[Sne]:14}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.noInvoicesMessage",[bne]:"This workspace has no payments yet."})),t&&t.events[kne]>0&&n()("table",{},void 0,n()("tbody",{},void 0,t.events.map(this.renderBillingHistoryEvent))),t&&!t.reachedEndOfResults&&n()(Io.Z,{onClick:this.handleLoadMoreBillingEventsClick,[yne]:{[fne]:-4,width:"100%"}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.loadMoreInvoicesButton.label",[bne]:"Load more"})),i[vne].loading&&n()(ao.Z,{}))},this.renderBillingHistoryEvent=(e,t)=>{let i;const{intl:o}=this[Tne];return i="paid"===e.status?e.total<0?n()(f.FormattedMessage,{id:hne,[bne]:"Credited"}):n()(f.FormattedMessage,{id:gne,[bne]:"Paid"}):e.attempted?n()(f.FormattedMessage,{id:pne,[bne]:"Failed"}):n()(f.FormattedMessage,{id:mne,[bne]:"Due"}),n()("tr",{[yne]:{height:28,[Sne]:14,[une]:cne}},t,n()("td",{[yne]:{width:dne,[lne]:18,color:this[wne][Mne]}},void 0,(0,Dv.Yx)(e[rne],"long",bw.SP)),n()("td",{[yne]:{[lne]:18}},void 0,i),n()("td",{[yne]:{[lne]:18,[sne]:ane}},void 0,(0,Iq.Dx)({amount:e.total,[nne]:one,intl:o})),n()("td",{},void 0,n()(ene.Z,{inline:!0,href:`/invoice/${e.id}`,external:!0,[ine]:this.getViewInvoiceButtonStyle()},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.viewInvoiceButton",[bne]:"View invoice"}))))},this.handleLoadMoreBillingEventsClick=()=>{this[Cne][Ine].setState({...this[Cne][Ine][vne],billingEventsLimit:this[Cne][Ine][vne].billingEventsLimit+Fne.billingEventsLimitIncrement})}}renderComponent(){const{[Ine]:e,billingHistoryRequestStore:t}=this[Cne],i={request:e[vne].billingEventsLimit,performRequest:this.performGetBillingHistoryRequest,render:this.renderBillingHistoryResults};return n()("div",{},void 0,n()(Yi.Z,{large:!0,divider:"full",[yne]:{marginTop:36}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.title",[bne]:"Invoices"})),d[tne](fT.Z,s()({},i,{requestStore:t})))}static getModalStyle(e){return{width:480,background:e.popoverBackground,padding:24,borderRadius:3}}getViewInvoiceButtonStyle(){return{color:this[wne][Mne],padding:"2px 3px",borderRadius:3}}}Fne.displayName="BillingHistory",Fne.billingEventsLimitIncrement=20,Fne.modalTitleStyle={[Sne]:18,marginBottom:16,fontWeight:v.Z.fontWeight.medium};const _ne=(0,f.injectIntl)(Fne);var xne=i(86664),Ane=i(19234),Bne=i(6906);const Dne=i(85).xmE;var Ene=i(99498),Lne=i(89859),Rne=i(17153),Nne=i(16100),One=i(94191),Une=i(62216),Vne=i(38479),Wne=i(30751),Kne=i(90850);class zne extends E.default{getInitialState(){return{temporaryCouponCode:void 0,couponCodeInput:void 0,error:void 0}}}const Gne=zne,Hne=i(85)._V5,qne=i(85).xgV,jne=i(85).cZW,Qne=i(85).P0R,Jne=i(85).PXg,$ne=i(85).YDv,Yne=i(85).Yzm,Xne=i(85).$bT,eae=i(85).GZ0,tae=i(85).QmD,iae=i(85).Gnd,oae=i(85).Wp_,nae=i(85).wgE,aae=i(85).aZS,sae=i(85).nx5,rae=(0,f.defineMessages)({couponCodePlaceholder:{id:"couponEntryInput.placeholder",[sae]:"Coupon code"},couponCodeNotFoundError:{id:"couponEntryInput.error.noPromo",[sae]:"Invalid coupon code"}});class lae extends c.Z{constructor(){super(...arguments),this.storeTypes={[aae]:Gne}}didMount(){const e=(0,Kne.Zk)(this[nae].currentUser.id);e&&this[iae][aae][oae]({...this[iae][aae][tae],temporaryCouponCode:e})}renderComponent(){return n()("div",{style:this[eae]()},void 0,n()("div",{style:{display:"flex",[Xne]:"row"}},void 0,n()(bl.Z,{textarea:!1,value:this[iae][aae][tae].couponCodeInput,[jne]:J.default[Yne](rae.couponCodePlaceholder),onSubmit:()=>this.checkCouponCode(),onChange:e=>{this[iae][aae][oae]({...this[iae][aae][tae],couponCodeInput:e.target.value})},style:{height:32,[$ne]:10,[Jne]:this[Qne].hideApply?0:10}}),n()(fT.Z,{request:this[iae][aae][tae].temporaryCouponCode||null,[qne]:async e=>{if(e)return this.applyCouponCode(e)},render:(e,t,i)=>{if(!this[Qne].hideApply)return n()(eo.Z,{isLarge:!1,onClick:()=>this.checkCouponCode()},void 0,n()(EI.Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:500},void 0,n()(f.FormattedMessage,{id:"couponEntryInput.button.apply",[sae]:"Apply"})))}})),this[iae][aae][tae].error&&n()(Ji.Z,{isMultiline:!1,style:{[Hne]:8,color:Bv.ZP.red}},void 0,this[iae][aae][tae].error))}checkCouponCode(){const e=this[iae][aae][tae].couponCodeInput;e&&(this[iae][aae][oae]({...this[iae][aae][tae],temporaryCouponCode:e}),this[iae][aae][oae]({...this[iae][aae][tae],couponCodeInput:""}))}async applyCouponCode(e){const t=await T.getPromoCode(this[nae],{code:e});if("success"===t.type){var i;if(t.data.promo)return null!==(i=t.data.promo.applies_to)&&void 0!==i&&i.length&&!t.data.promo.applies_to.includes(this[Qne].plan)?void this.showError(e):(this[iae][aae][oae]({...this[iae][aae][tae],error:void 0}),this[Qne].handlePromo(t.data.promo),S.trackCouponCodeEntered(this[nae],{code:e,valid:!0,id:t.data.promo.id}),t.data.promo);this.showError(e)}else if("failed"===t.type){const e=t.error.name;this[iae][aae][oae]({...this[iae][aae][tae],error:e})}else(0,x.unreachable)(t)}showError(e){this[iae][aae][oae]({...this[iae][aae][tae],error:J.default[Yne](rae.couponCodeNotFoundError)}),S.trackCouponCodeEntered(this[nae],{code:e,valid:!1,id:void 0})}[eae](){return{display:"flex",[Xne]:"column",...this[Qne].style?this[Qne].style:void 0}}}lae.displayName="CouponEntryInput";const dae=lae;var cae=i(37030);const uae=i(85).wgE,mae=i(85).EKt,pae=i(85).nx5,gae=i(85).YDv,hae=i(85).XCs,vae=i(85).lsp;function fae(){return(0,ji.yK)((e=>({button:{width:"100%",height:40,marginTop:24},cancellationButton:{marginRight:12,border:void 0},[vae]:{display:"flex",alignItems:"center",fontSize:14,paddingTop:16,paddingBottom:16,background:"var(--core-gray-50, #F7F7F5)",borderRadius:4,margin:"12px 0",borderWidth:.5,borderStyle:"solid",borderColor:"#E3E2E0"},textSection:{marginRight:"auto",[hae]:32},allChanges:{color:e.mediumTextColor,fontSize:12,[gae]:8,[hae]:8}})),[])}function yae(){return n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.scheduledChanges.cancel.label",[pae]:"<bold>Cancel changes</bold>",values:{bold:e=>n()("b",{},void 0,e)}})}function bae(e){window.__c={n:"AllChangesText"};const t=fae(),i=(0,f.useIntl)().formatList(e.scheduledChanges.filter(Boolean),{type:"conjunction",style:"narrow"});return n()("div",{style:t.allChanges},void 0,i)}function Sae(e){window.__c={n:"PendingChangesText"};const{periodEndDate:t,scheduledChanges:i}=e,o=(0,Dv.Yx)(t,"medium",bw.SP),a=(0,ji.yK)((e=>({leftSection:{display:"flex",[gae]:12},title:{fontWeight:v.Z.fontWeight.medium,[gae]:8,[hae]:8},icon:{width:14,height:14,marginTop:4}})),[]);return n()("div",{style:a.leftSection},void 0,m.Z.alarmClock(a.icon),n()("div",{},void 0,n()("div",{style:a.title},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBilling.scheduledChanges.pendingChanges.title",[pae]:"Pending changes scheduled for {date}",values:{date:o}})),n()(bae,{scheduledChanges:i})))}function wae(e){window.__c={n:"CancelPendingCancellationChanges"};const{[mae]:t}=e,i=fae(),o=(0,Hi.O7)();return n()(eo.Z,{isLarge:!0,onClick:()=>Rne.cancelScheduledCancellationChanges({[uae]:o,[mae]:t}),style:i.cancellationButton},void 0,n()(yae,{}))}function Mae(e){window.__c={n:"CancelPendingChanges"};const{[mae]:t}=e,i=fae(),o=(0,Hi.O7)();return n()(eo.Z,{isLarge:!0,onClick:()=>Rne.cancelScheduledSubscriptionChanges({[uae]:o,[mae]:t}),style:i.cancellationButton},void 0,n()(yae,{}))}function kae(e){window.__c={n:"ScheduledChangesBillingSection"};const{stripeCustomerData:t}=e,i=fae(),{scheduledChanges:o,periodEndDate:a}=(0,qi.VK)((()=>(0,One.Tg)(t)),[t]),{cancelledChanges:s}=(0,qi.VK)((()=>(0,One.n8)(t)),[t]);if(t.isSubscribed&&t.willCancelAt)return n()("div",{style:i[vae]},void 0,n()("div",{style:i.textSection},void 0,n()(Sae,{scheduledChanges:s,periodEndDate:t.willCancelAt})),n()(wae,{[mae]:e.stripeCustomerData}));const r=(0,One.dY)(t);return(0,One.dA)(t)||r&&(0,One.bM)(t)?n()("div",{style:i[vae]},void 0,n()("div",{style:i.textSection},void 0,n()(Sae,{scheduledChanges:o,periodEndDate:a})),n()(Mae,{[mae]:e.stripeCustomerData})):null}var Cae=i(94699);const Zae=i(85).PXg,Tae=i(85).g7N,Pae=i(85).JRG,Iae=i(85).LCb,Fae=i(85).N4Y,_ae=i(85).D08,xae=i(85).o8N,Aae=i(85).kaW,Bae=(i(85).G9c,i(85).Sbo),Dae=(i(85).pyT,i(85).ZrJ),Eae=i(85).TBj,Lae=i(85)._TO,Rae=i(85).wJk,Nae=i(85).rpY,Oae=i(85).dU4,Uae=i(85).yyc,Vae=i(85).aTq,Wae=i(85).__z,Kae=i(85).P0O,zae=i(85).Yzm,Gae=i(85).nm$,Hae=i(85).irb,qae=i(85).dz$,jae=i(85).HNo,Qae=i(85).DYb,Jae=i(85).YfZ,$ae=i(85).$PO,Yae=i(85).ASm,Xae=i(85).OK,ese=i(85).Vy4,tse=i(85).Wp_,ise=i(85).D7I,ose=i(85).TWq,nse=i(85).gYY,ase=i(85).wgE,sse=i(85).JUg,rse=i(85).Wif,lse=i(85).h0C,dse=i(85).e7B,cse=i(85).Gnd,use=i(85).Zij,mse=i(85).Dd5,pse=i(85).Au,gse=i(85).BCA,hse=i(85).iIv,vse=i(85).P0R,fse=i(85).wNq,yse=i(85).QIj,bse=i(85).EZQ,Sse=i(85).XtO,wse=i(85).XNW,Mse=i(85).QmD,kse=i(85).zrY,Cse=i(85).UPJ,Zse=i(85).Je3,Tse=i(85).Scd,Pse=i(85).IE_,Ise=i(85).K_F,Fse=i(85).EKt,_se=i(85).Gpy,xse=i(85).Rkz,Ase=i(85).SuY,Bse=i(85).jp1,Dse=(i(85).eF2,i(85).pE7),Ese=i(85).xQH,Lse=i(85).oO1,Rse=i(85).MRO,Nse=i(85).ilr,Ose=i(85).qvj,Use=i(85).nLZ,Vse=i(85).Wqi,Wse=i(85).icY,Kse=i(85).PG2,zse=i(85).BQ6,Gse=i(85).MLn,Hse=i(85).wuN,qse=i(85).OM8,jse=i(85).Exd,Qse=i(85).ChN,Jse=i(85).rps,$se=i(85).$bT,Yse=i(85).jkI,Xse=i(85).EMU,ere=i(85).sM5,tre=i(85).FOQ,ire=i(85).nx5,ore={offline:n()(f.FormattedMessage,{[ire]:"Please go online to manage billing.",id:"spaceSubscriptionBillingV2.offline.message"})};function nre(e){window.__c={n:"BillingRow"};const{mainLabel:t,valueLabel:i,metadataLabel:o,[tre]:a}=e,s=(0,ji.yK)((e=>({row:{[ere]:Xse,alignItems:Yse,gap:40,padding:"11px 0",borderBottom:`1px solid ${e.regularDividerColor}`},labelArea:{[Xse]:1,[ere]:Xse,[$se]:Jse,gap:6},mainLabel:{[Qse]:400,[jse]:14,[qse]:"17px",letterSpacing:"-0.154px"},valueLabel:{[Qse]:400,[jse]:12,[qse]:"14px",color:e[Hse]},metadataLabel:{[jse]:12,[qse]:"14px",[Gse]:"right",color:e[Hse]},buttonArea:{},[tre]:{minWidth:144}})),[]);return n()("div",{[zse]:s.row},void 0,n()("div",{[zse]:s.labelArea},void 0,n()("div",{[zse]:s.mainLabel},void 0,t),n()("div",{[zse]:s.valueLabel},void 0,i)),o?n()("div",{[zse]:s.metadataLabel},void 0,o):null,a?n()("div",{[zse]:s.buttonArea},void 0,n()(eo.Z,{isLarge:!0,[Kse]:a[Kse],[zse]:s[tre]},void 0,a[Wse])):null)}function are(e){var t;window.__c={n:"BillingHistoryV2"};const{[Vse]:i,upcomingInvoiceData:o}=e,a=(0,Hi.O7)(),s=(0,ji.yK)((e=>({emptyList:{color:e[Hse],[jse]:14}})),[]),[{status:r,value:l}]=(0,lF.r5)((async()=>await T.getBillingHistory(a,{spaceId:i.id,limit:50})),[a,i]);if("resolved"!==r||!l||"failed"===l.type||null===(t=l.data)||void 0===t||!t.events)return null;const d=i.id,c=l.data.events??[],u=o?`/invoice/upcoming?spaceId=${d}`:void 0,m=0===c.length&&!u;return n()("div",{[zse]:{[Use]:40}},void 0,n()(Yi.Z,{large:!0,divider:"full",[zse]:rre[Ose]},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.invoices",[ire]:"Invoices"})),m?n()("div",{[zse]:s.emptyList},void 0,n()(f.FormattedMessage,{id:Nse,[ire]:"This workspace has no payments yet."})):null,u?n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.upcomingInvoice",[ire]:"Upcoming invoice"}),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.viewInvoice",[ire]:"View invoice"}),[Kse]:()=>{window.open(u,"_blank")}}}):null,c.map((e=>{const t=(0,Dv.Yx)(e.timestamp,"long",bw.SP);let i;i="paid"===e.status?e.total<0?n()(f.FormattedMessage,{id:Rse,[ire]:"Credited"}):n()(f.FormattedMessage,{id:Lse,[ire]:"Paid"}):e.attempted?n()(f.FormattedMessage,{id:Ese,[ire]:"Failed"}):n()(f.FormattedMessage,{id:Dse,[ire]:"Due"});const o=n()(Loe.W,{cost:{amount:e.total,[Bse]:e[Bse]},trailingZeroDisplay:Ase});return n()(nre,{mainLabel:t,valueLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.invoiceSummary",[ire]:"{invoiceStatus} · {formattedAmount}",[_se]:{invoiceStatus:i,[xse]:o}}),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.viewInvoice",[ire]:"View invoice"}),[Kse]:()=>{const t=`/invoice/${e.id}`;window.open(t,"_blank")}}},e.id)})))}function sre(e){window.__c={n:"AddressModal"};const{addressErrorMessage:t,[Fse]:i,getUpdatedAddress:o,handleAddressAccept:a,[Ise]:s,[Pse]:r,updateAddress:l}=e,d=(0,Vne.y)(),{updatedAddress:c,shouldShowBusinessName:u}=(0,qi.VK)((()=>({updatedAddress:o(),shouldShowBusinessName:(0,te.isPlusTierOrAbove)()})),[o]),m=(0,ji.yK)((e=>({modal:{[ere]:Xse,[$se]:Jse,maxHeight:"75vh"},modalBody:{width:500,[Tse]:e[Zse],padding:24,borderRadius:3},footer:{[ere]:Xse,[Cse]:"flex-end",padding:"16px 24px",[Tse]:e[kse]}})),[]),p=(0,Nne.useElementsOptions)({type:"address"});return n()(xne.Elements,{stripe:(0,Nne.getStripe)(),options:p},void 0,n()("div",{[zse]:m.modal},void 0,n()("div",{[zse]:m.modalBody},void 0,n()("div",{[zse]:rre.modalTitleStyle},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeYourAddressModal.title",[ire]:"Change your address"})),n()(Cae.J,{address:r||{name:i.customerName||"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",[Mse]:"",country:""},availableCountries:d,updateAddress:l,shouldShowBusinessName:u}),n()("div",{[zse]:{color:Bv.ZP.red,[Use]:10}},void 0,t)),n()("div",{[zse]:m.footer},void 0,n()(eo.Z,{isLarge:!0,[Kse]:s},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingAddressModal.cancelButton.label",[ire]:"Cancel"})),n()(Po.Z,{[zse]:{[wse]:12},isLarge:!0,disabled:void 0===c,[Kse]:a},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingAddressModal.updateButton.label",[ire]:"Update"})))))}class rre extends c.Z{constructor(){super(...arguments),this.couponEntryInput=null,this.storeTypes={[Sse]:Woe,billingHistoryRequestStore:rT.Z},this.renderPlanTypeName=e=>{switch(e){case bse:return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.personal",[ire]:"Personal"});case"plus":case"team":return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.plus",[ire]:"Plus"});case yse:return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.business",[ire]:"Business"});case fse:return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.enterprise",[ire]:"Enterprise"});default:return null}},this.renderPaymentMethodModal=()=>{const{[Fse]:e,[Vse]:t}=this[vse];return n()(lre,{[Fse]:e,[Vse]:t,[hse]:this[Ise],[gse]:this[Ise]})},this.renderSingleTextFieldModal=(e,t,i,o,a)=>n()(dre,{[pse]:this[pse],[use]:t,acceptAction:a,[gse]:o,[hse]:this[Ise]},void 0,n()(bl.Z,{focus:!0,selectAll:!0,value:e,[mse]:i,onSubmit:o,[zse]:rre.modalInputStyle})),this.renderBillingEmailModal=()=>{const{[Fse]:e}=this[vse],{temporaryBillingEmail:t}=this[cse][Sse][Mse],i=void 0!==t?t:e.billingEmail||"",o=e.billingEmail?dse:"add";return this.renderSingleTextFieldModal(i,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingEmailModal.title",[ire]:"Change billing email"}),this.handleBillingEmailChange,this.handleBillingEmailAccept,o)},this.renderVatIdModal=()=>{const{[Fse]:e}=this[vse],{temporaryVatId:t}=this[cse][Sse][Mse],i=void 0!==t?t:e.vatId||"",o=e.vatId?dse:"add";return n()(dre,{[pse]:this[pse],[use]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeVATIDModal.title",[ire]:"Change VAT/GST number"}),acceptAction:o,[gse]:this.handleVatIdAccept,[hse]:this[Ise]},void 0,n()(bl.Z,{focus:!0,selectAll:!0,value:i,[mse]:this.handleVatIdChange,onSubmit:this.handleVatIdAccept,[zse]:rre.modalInputStyle}),n()("div",{[zse]:{color:this[pse][Hse],[jse]:v.Z[jse].UISmall.desktop,[Use]:-10}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeVATIDModal.subtitle",[ire]:"Please include your country code"})))},this.renderApplyCouponModal=()=>this[vse][Fse][lse]?n()(dre,{[pse]:this[pse],[use]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.applyCouponModal.title",[ire]:"Apply coupon"}),acceptAction:rse,[gse]:()=>{this.couponEntryInput&&this.couponEntryInput.checkCouponCode()},[hse]:this[Ise]},void 0,d[ise](dae,{ref:e=>this.couponEntryInput=e,hideApply:!0,plan:this[vse][Fse].plan,handlePromo:async e=>{this[Ise]();await _[sse]({[ase]:this[ase],[Vse]:this[vse][Vse],coupon:e&&"coupon"===e[nse]?e.code:void 0,promoCodeId:e&&"promo_code"===e[nse]?e.code:void 0,from:ose})&&w.showMessage({message:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.applyCouponModal.successMessage",[ire]:"Coupon applied!"})})}})):null,this.handleChangePlanClick=()=>{Wi.Z[tse]({open:!0,openedFrom:"upsell",[ese]:"plans",[Xae]:void 0,highlightedSetting:void 0})},this.handlePaymentMethodChangeClick=()=>{this[cse][Sse][tse]({...this[cse][Sse][Mse],paymentMethodModalOpen:!0})},this.handleBillingIntervalChangeClick=()=>{const{[Fse]:e}=this[vse],t="interval"in e?e[Yae]:$ae,i="year"===t?Jae:$ae;Rne.showSubscriptionUpdateModal({[ase]:this[ase],from:"billing_page",view:Qae,[jae]:i,[qae]:t})},this.handleAddressChangeClick=()=>{this[cse][Sse][tse]({...this[cse][Sse][Mse],addressModalOpen:!0})},this.handleVatIdChangeClick=()=>{var e;const{[Fse]:t}=this[vse],i=null===(e=t.address)||void 0===e?void 0:e.country;if(!i)return void w[Hae](n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatId.missingCountry",[ire]:"To update your VAT/GST number, please update your billing address."}));!{AE:"ae_trn",AT:Dne,AU:"au_abn",BE:Dne,BG:Dne,CA:"ca_bn",CH:"ch_vat",CY:Dne,CZ:Dne,DE:Dne,DK:Dne,EE:Dne,ES:Dne,FI:Dne,FR:Dne,GB:"gb_vat",GR:Dne,HR:Dne,HU:Dne,IE:Dne,IN:"in_gst",IT:Dne,KR:"kr_brn",LT:Dne,LU:Dne,LV:Dne,MT:Dne,NL:Dne,NZ:"nz_gst",PL:Dne,PT:Dne,RO:Dne,RU:"ru_inn",SE:Dne,SG:"sg_gst",SI:Dne,SK:Dne}[i]?w[Hae](n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatId.vatNotRequired",[ire]:"A VAT/GST number is not required for your tax jurisdiction."})):this[cse][Sse][tse]({...this[cse][Sse][Mse],vatIdModalOpen:!0})},this[Ise]=()=>{this[cse][Sse].reset()},this.handleBillingEmailChange=e=>{this[cse][Sse][tse]({...this[cse][Sse][Mse],temporaryBillingEmail:e[Gae].value})},this.handleBillingEmailAccept=async()=>{const{[Vse]:e,[Fse]:t}=this[vse],{temporaryBillingEmail:i}=this[cse][Sse][Mse];i!==t.billingEmail&&await _[sse]({[ase]:this[ase],[Vse]:e,billingEmail:i,from:ose}),this[Ise]()},this.handleVatIdChange=e=>{this[cse][Sse][tse]({...this[cse][Sse][Mse],temporaryVatId:e[Gae].value})},this.handleVatIdAccept=async()=>{const{[Vse]:e,[Fse]:t}=this[vse],{temporaryVatId:i}=this[cse][Sse][Mse];i!==t.vatId&&await _[sse]({[ase]:this[ase],[Vse]:e,vatId:i,from:ose}),this[Ise]()},this.handleAddressAccept=async()=>{const{[Vse]:e}=this[vse],t=this.getUpdatedAddress();if(t&&(0,Ane.A)(t))try{await _.updateAddress({[ase]:this[ase],[Vse]:e,address:t}),this[Ise]()}catch(i){}else this[cse][Sse][tse]({...this[cse][Sse][Mse],addressErrorMessage:this[vse].intl[zae]({id:"spaceSubscriptionBillingV2.address.invalidError",[ire]:Kae})})},this.getUpdatedAddress=()=>{const{[Fse]:e}=this[vse],{[Pse]:t}=this[cse][Sse][Mse];if(t&&t!==e.address)return t},this.handleBillingEmailChangeClick=()=>{this[cse][Sse][tse]({...this[cse][Sse][Mse],billingEmailModalOpen:!0})}}willMount(){_.refresh(this[ase]),_.refreshUpcomingInvoice(this[ase])}renderComponent(){return Qi.Z[Mse].online?this.renderBilling():rre[Wae]()}static[Wae](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,[zse]:{[Gse]:Yse}},void 0,ore.offline))}renderPlanRow(){const{subscriptionData:e,[Fse]:t}=this[vse];let i,o;const a=ee[Vae](e);a&&(i=n()(Loe.W,{cost:{amount:a.planAmount*a.quantity,[Bse]:a[Bse]},trailingZeroDisplay:Ase}),o=(0,Dv.Yx)(a.periodEnd,"medium",bw.SP));const s=t.willCancelAt,r=n()(f.FormattedMessage,s?{id:"spaceSubscriptionBillingV2.cancels",[ire]:"Cancels"}:{id:"spaceSubscriptionBillingV2.renews",[ire]:"Renews"});let l;if(a)switch(a[Yae]){case Jae:l=n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.month",[ire]:"{planCharge} per month · {renewalOrCancellationMessage} {renewalDate}",[_se]:{planCharge:i,renewalDate:o,renewalOrCancellationMessage:r}});break;case $ae:l=n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.year",[ire]:"{planCharge} per year · {renewalOrCancellationMessage} {renewalDate}",[_se]:{planCharge:i,renewalDate:o,renewalOrCancellationMessage:r}});break;default:(0,x.unreachable)(a[Yae])}return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.plan",[ire]:"Plan"}),metadataLabel:l,valueLabel:a?this.renderPlanTypeName(ee[Uae](a.productId)):"Free",[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.changePlan",[ire]:"Change plan"}),[Kse]:this.handleChangePlanClick}})}renderAdditionalFeaturesRowMetadataLabel(e,t){const{[Fse]:i}=this[vse],o=i[lse]?i[Yae]:Jae,a=n()(Loe.W,{cost:{amount:e.cost,[Bse]:i[Bse]??"USD"},trailingZeroDisplay:Ase}),s=i.periodEnd;return n()(f.FormattedMessage,t?{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.cancels",[ire]:"{planCharge} per {interval} · Cancels {date}",[_se]:{planCharge:a,[Yae]:o,date:(0,Dv.Yx)(t,"medium",bw.SP)}}:s?{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.renews",[ire]:"{planCharge} per {interval} · Renews {date}",[_se]:{planCharge:a,[Yae]:o,date:(0,Dv.Yx)(s,"medium",bw.SP)}}:{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.priceOnly",[ire]:"{planCharge} per {interval}",[_se]:{planCharge:a,[Yae]:o}})}renderAdditionalFeaturesRow(e){const{[Fse]:t}=this[vse],i=One.A0(t);let o;var a;i&&(o=(0,h.ls)(null===(a=Ki.default[Mse].data)||void 0===a?void 0:a.addOns)??t.periodEnd);const s={[Wse]:n()(f.FormattedMessage,i?{id:"spaceSubscriptionBillingV2.resubscribe",[ire]:"Resubscribe"}:{id:"spaceSubscriptionBillingV2.removeFromPlan",[ire]:"Remove from plan"}),[Kse]:async()=>{if(o){if(t.willCancelAt){const e=t.customerId?await Lne.y(this[ase],{offerType:"add_on_upgrade_flow",customerId:t.customerId}):void 0;return Ene.showAddOnUpgradeModal(),void Ene.showConfirmPurchaseStage(e)}await Rne.cancelScheduledSubscriptionChanges({[ase]:this[ase],[Fse]:t})}else Ene.showAddOnCancellationStage()}};return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.additionalFeatures",[ire]:"Additional features"}),metadataLabel:this.renderAdditionalFeaturesRowMetadataLabel(e,o),valueLabel:"Notion AI",[tre]:s})}renderAdditionalFeaturesRows(){const{[Fse]:e}=this[vse];return e.addOns.map((e=>n()(d.Fragment,{},e.feature,this.renderAdditionalFeaturesRow(e))))}renderBillingPeriodRow(){return(0,te.isStudentTier)()||!this[vse][Fse][lse]&&(0,h.E3)(this[vse][Fse].addOns)?null:n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.billingPeriod",[ire]:"Billing period"}),valueLabel:this.renderBillingInterval(),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.editPeriod",[ire]:"Edit period"}),[Kse]:this.handleBillingIntervalChangeClick}})}renderBillingEmailRow(){const{[Fse]:e}=this[vse];return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.billingEmail",[ire]:"Billing email"}),valueLabel:e.billingEmail??"",[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.editEmail",[ire]:"Edit email"}),[Kse]:this.handleBillingEmailChangeClick}})}renderPaymentMethodRow(){return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethod",[ire]:"Payment method"}),valueLabel:this.renderPaymentMethodType(),metadataLabel:this.renderPaymentMethodSummary(),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.editMethod",[ire]:"Edit method"}),[Kse]:this.handlePaymentMethodChangeClick}})}renderAddressRow(){const{[Fse]:e}=this[vse];return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.billedTo",[ire]:"Billed to"}),valueLabel:this.renderAddressString(e.address),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.editInformation",[ire]:"Edit information"}),[Kse]:this.handleAddressChangeClick}})}renderVATRow(){const{[Fse]:e}=this[vse];return n()(nre,{mainLabel:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatGst",[ire]:"VAT/GST number"}),valueLabel:n()("div",{},void 0,e.vatId||"-"),[tre]:{[Wse]:n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.editNumber",[ire]:"Edit number"}),[Kse]:this.handleVatIdChangeClick}})}renderBilling(){const{paymentMethodModalOpen:e,billingEmailModalOpen:t,addressModalOpen:i,vatIdModalOpen:o,applyCouponModalOpen:a}=this[cse][Sse][Mse];return n()("div",{[zse]:rre[Oae]},void 0,n()(Koe.Z,{[zse]:rre.scrollerStyle,type:Ooe.Z.Y},void 0,n()(Yi.Z,{large:!0,divider:"full",[zse]:rre[Ose]},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.billing",[ire]:"Billing"})),n()(kae,{stripeCustomerData:this[vse][Fse]}),this.renderPlanRow(),this.renderAdditionalFeaturesRows(),this.renderBillingPeriodRow(),n()("div",{[zse]:{height:40}}),n()(Yi.Z,{large:!0,divider:"full",[zse]:rre[Ose]},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentDetails",[ire]:"Payment details"})),this.renderPaymentMethodRow(),this.renderAddressRow(),this.renderBillingEmailRow(),this.renderVATRow(),n()(are,{[Vse]:this[vse][Vse],upcomingInvoiceData:this[vse].upcomingInvoiceData}),n()(QI.Z,{open:e,[Nae]:this.renderPaymentMethodModal,[Rae]:this[Ise]}),n()(QI.Z,{open:t,[Nae]:this.renderBillingEmailModal,[Rae]:this[Ise]}),n()(QI.Z,{open:i,[Nae]:()=>n()(sre,{addressErrorMessage:this[cse][Sse][Mse].addressErrorMessage,[Fse]:this[vse][Fse],getUpdatedAddress:this.getUpdatedAddress,handleAddressAccept:this.handleAddressAccept,[Ise]:this[Ise],[Pse]:this[cse][Sse][Mse][Pse],updateAddress:e=>{this[cse][Sse].setAddressField(e)}}),[Rae]:this[Ise]}),n()(QI.Z,{open:o,[Nae]:this.renderVatIdModal,[Rae]:this[Ise]}),n()(QI.Z,{open:a,[Nae]:this.renderApplyCouponModal,[Rae]:this[Ise]})))}renderPaymentMethodType(){const{[Fse]:e}=this[vse],t=e[lse]?e.billing:Lae;if("send_invoice"===t)return n()(f.FormattedMessage,{id:Eae,[ire]:"ACH or Wire Transfer"});if("charge_automatically"!==t)return n()(f.FormattedMessage,{id:Dae,[ire]:"None"});switch(e.paymentMethodType){case"card":return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.creditCard",[ire]:"Credit card"});case"link":return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.link",[ire]:"Stripe Link"});default:return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.other",[ire]:"Other"})}}renderPaymentMethodSummary(){const{[Fse]:e}=this[vse],t=e[lse]?e.billing:Lae;if("send_invoice"===t)return n()(f.FormattedMessage,{id:Eae,[ire]:"ACH or Wire Transfer"});if("charge_automatically"!==t)return n()(f.FormattedMessage,{id:Dae,[ire]:"None"});switch(e.paymentMethodType){case"card":return n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethod.creditCard",[ire]:"{creditCardBrand} ending in {lastFourDigits}",[_se]:{creditCardBrand:(0,Bne.Z)(e.brand),lastFourDigits:e.last4}});default:return}}renderBillingInterval(){const{[Fse]:e}=this[vse];return e[lse]?"month"===e[Yae]?n()(f.FormattedMessage,{id:Bae,[ire]:"Monthly"}):n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.yearly",[ire]:"Yearly"}):n()(f.FormattedMessage,{id:Bae,[ire]:"Monthly"})}renderAddressString(e){return e?this[vse].intl.formatList([e.name,e.businessName,e.addressLine1,e.country].filter(Boolean),{type:"conjunction",[zse]:"narrow"}):""}static getModalStyle(e){return{width:500,[Tse]:e[Zse],padding:24,borderRadius:3}}}function lre(e){window.__c={n:"PaymentModal"};const{[hse]:t,[gse]:i,[Fse]:o,[Vse]:a}=e,s=(0,Hi.O7)(),r=(0,f.useIntl)(),l=(0,ji.Fg)(),d=(0,qi.VK)((()=>Wne.Z[Mse][Aae]),[]),c=(0,Nne.useElementsOptions)({type:"setup",currency:d});if(!(0,qi.VK)((()=>Une.isPaymentElementEnabled()),[]))return n()(Xn.LazySpaceSubscriptionUpdatePaymentMethodModal,{[Fse]:o,[Vse]:a,onComplete:t});const u=[];return n()(xne.Elements,{stripe:(0,Nne.getStripe)(),options:c},void 0,n()(xne.ElementsConsumer,{},void 0,(e=>{let{elements:o,stripe:d}=e;return n()(dre,{[pse]:l,[use]:"Payment method",[gse]:async()=>{if(!o||!d)return;const{[xae]:e}=await o.submit();if(e)return;const t=await d.createPaymentMethod({elements:o});!t[xae]&&t.paymentMethod?(await _[sse]({[ase]:s,[Vse]:a,paymentData:{type:_ae,value:t.paymentMethod.id},from:"space_settings-billing_tab-update_payment_method"}),i()):t[xae]&&w[Hae](Nne.translateStripeError(s,r,t[xae]))},[hse]:t,acceptAction:dse},void 0,n()(cae.k,{paymentMethods:u,[Iae]:"credit_card",[Pae]:Fae}))})))}function dre(e){const t=d[ise](f.FormattedMessage,$oe[e.acceptAction]);return n()("div",{[zse]:rre.getModalStyle(e[pse])},void 0,n()("div",{[zse]:rre.modalTitleStyle},void 0,e[use]),e.children,n()("div",{[zse]:{[Tae]:20}},void 0,e.helpButton),n()("div",{[zse]:{[ere]:Xse,[Cse]:"flex-end"}},void 0,n()(eo.Z,{isLarge:!0,[Kse]:e[hse],[zse]:{[Zae]:12}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionBillingV2.cancelButton.label",[ire]:"Cancel"})),n()(Po.Z,{isLarge:!0,[Kse]:e[gse]},void 0,t)))}rre.displayName="SpaceSubscriptionBillingV2",rre.modalTitleStyle={[jse]:18,[Tae]:16,[Qse]:v.Z[Qse].medium},rre[Oae]={[ere]:Xse,[$se]:Jse,height:"100%"},rre.scrollerStyle={height:"100%",padding:"36px 60px"},rre.modalInputStyle={[Use]:12,[Tae]:20},rre[Ose]={[Tae]:4};const cre=(0,f.injectIntl)(rre),ure=i(85).SuY,mre=i(85).jp1,pre=i(85).jkI,gre=i(85).vCJ,hre=i(85).D7I,vre=i(85).dU4,fre=i(85).__z;class yre extends c.Z{constructor(){super(...arguments),this.storeTypes={store:Woe,billingHistoryRequestStore:rT.Z}}willMount(){_.refresh(this.environment)}renderComponent(){const{data:e}=this.props;return Qi.Z.state.online?n()("div",{style:yre[vre]},void 0,n()(Koe.Z,{style:yre.scrollerStyle,type:Ooe.Z.Y},void 0,n()(Yi.Z,{large:!0,divider:"full"},void 0,d[hre](f.FormattedMessage,xoe.billingTab)),this.renderCredit(e),this[gre](),d[hre](_ne,this.props))):yre[fre]()}static[fre](){return n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,style:{textAlign:pre}},void 0,ore.offline))}renderCredit(e){var t;const i=null===(t=e.customerData)||void 0===t?void 0:t.stripe[mre];if(!i)return null;const o=-Math.min(0,e.accountBalance);return n()(Xoe,{title:Noe.workspaceBalance,caption:n()("div",{},void 0,n()(Loe.W,{cost:{amount:o,[mre]:i},trailingZeroDisplay:ure})),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:l().noop}})}[gre](){return n()("div",{style:{flex:"none",marginTop:30}})}}yre.displayName="SpaceSubscriptionBillingUnsubscribed",yre[vre]={display:"flex",flexDirection:"column",height:"100%"},yre.scrollerStyle={height:"100%",padding:"36px 60px"};const bre=yre;var Sre=i(17126),wre=i(62291),Mre=i(7036);class kre extends E.default{getInitialState(){return{termType:"yearly"}}}const Cre=new kre;var Zre=i(91754),Tre=i(92341),Pre=i(10644),Ire=i(24684);const Fre=function(e){return!!e.device.isMobile||e.WindowSizeStore.state.width<960};var _re=i(73796);const xre=i(85).XNW,Are=i(85).nx5,Bre=i(85).PXg;class Dre extends c.Z{renderComponent(){const e="yearly"===Cre.state.termType?"monthly":"yearly";return n()("div",{style:Dre.getTermToggleStyle(this.theme),onClick:()=>{S.trackFrontTogglePricingTerm(this.environment,{from:"pricing_grid_top",toggle_to:e}),Cre.setState({...Cre.state,termType:e})}},void 0,n()("div",{style:{[Bre]:8}},void 0,n()(f.FormattedMessage,{id:"pricingGrid.pricingTermToggle.payAnnually.label",[Are]:"Pay annually"})),n()(Sx.Z,{on:"monthly"===Cre.state.termType}),n()("div",{style:{[xre]:8}},void 0,n()(f.FormattedMessage,{id:"pricingGrid.pricingTermToggle.payMonthly.label",[Are]:"Monthly"})))}static getTermToggleStyle(e){return{cursor:"pointer",fontSize:14,color:e.mediumTextColor,display:"flex",alignItems:"center",marginBottom:8}}}Dre.displayName="PricingTermToggle";const Ere=Dre;var Lre=i(78641);const Rre=i(85).SEy,Nre=i(85).XCs,Ore=i(85).Mm1,Ure=i(85).dMt,Vre=i(85).f$8,Wre=i(85).Yf1,Kre=i(85).nHL,zre=i(85).lWm,Gre=i(85).Scd,Hre=i(85)._V5,qre=i(85).rI1,jre=i(85).SuY,Qre=i(85).yaA,Jre=i(85).kaW,$re=i(85).bpo,Yre=i(85).Yzm,Xre=(i(85).idF,i(85).Lbi),ele=i(85).SZh,tle=i(85).lGm,ile=i(85).wgE,ole=i(85).gGi,nle=i(85).XB3,ale=i(85).MHh,sle=i(85).ZLE,rle=i(85).X8R,lle=i(85).LX6,dle=i(85).TEz,cle=i(85).QNi,ule=i(85).vK9,mle=i(85).fsm,ple=i(85).Joh,gle=i(85).D7I,hle=i(85).LlE,vle=i(85).ESK,fle=i(85).Wj0,yle=i(85).$Iz,ble=i(85).icY,Sle=i(85).nx5,wle=i(85).OM8,Mle=i(85).wuN,kle=i(85).tvI,Cle=i(85).ChN,Zle=i(85).Exd,Tle=i(85).PG2,Ple=i(85).P0R,Ile=i(85).Au,Fle=i(85).Jkr,_le=i(85).jtM,xle=i(85).sM5,Ale=i(85).BQ6,Ble=i(85).R96,Dle=i(85).aTq,Ele=i(85).wNq,Lle=i(85).QIj,Rle=["free","plus",Lle,Ele];class Nle extends c.Z{willMount(e){const t=ee[Dle](e.data);t&&e.data&&Cre.setState({termType:"year"===t.interval?"yearly":"monthly"})}renderComponent(){const e=(0,Ire.Sl)();return n()("div",{},void 0,n()("table",{[Ale]:Nle.getTableStyle()},void 0,this.renderHeader(),n()("tbody",{},void 0,e.map(((e,t)=>this[Ble](e,t))))))}renderCheck(){return m.Z.thinCheck({[xle]:_le,height:12,[Fle]:12,color:this[Ile].regularTextColor})}upgradeLink(e,t){const{planState:i}=this[Ple];if(i)return n()(RP.Z,{[Tle]:i.plans[e][Tle],[Ale]:{[Zle]:12,[Cle]:500,[kle]:"none",color:this[Ile][Mle],[wle]:1.2}},void 0,t||n()(f.FormattedMessage,{id:"pricingGrid.planAttribute.button.upgrade",[Sle]:"Upgrade"}))}renderPlanContent(e){const{[ble]:t,upgradeCta:i,upgradeCTALabel:o}=e;return t&&i?n()(d.Fragment,{},void 0,t,n()("br",{}),this.upgradeLink(i,o)):t||(i?n()(d.Fragment,{},void 0,n()(f.FormattedMessage,{id:"pricingGrid.planAttribute.notInTrial",[Sle]:"Not in trial"}),n()("br",{}),this.upgradeLink(i,o)):this.renderCheck())}renderPlan(e,t,i){return n()("td",{[Ale]:{...Nle.getRowStyle(this[Ile]),...Nle.getValueStyle(),...Nle[yle](this[Ile],this.isPlanActive(e)),...this[fle](e)}},void 0,i.hasFeature&&n()(ro.Z,{delayThreshold:0,placement:ro.Z[vle].Right,[ple]:()=>(0,Ire.O_)(t),textWrap:!0,render:e=>d[gle]("div",s()({[Ale]:{cursor:"help",[wle]:1.3,[hle]:"6px 0"}},e),this.renderPlanContent(i))}))}renderItem(e,t){const i="auto",o=this[Ple].planState&&this[Ple].planState.isTeamTrial;return n()("tr",{},`table-row-${t}`,n()("td",{[Ale]:{...Nle.getRowStyle(this[Ile]),...Nle.getRowLabelStyle(this[Ile]),[Fle]:i,[mle]:i,[ule]:i}},void 0,n()(ro.Z,{delayThreshold:0,placement:ro.Z[vle].Right,[ple]:()=>(0,Ire.O_)(e[cle]),textWrap:!0,render:t=>d[gle]("span",s()({},t,{[Ale]:Nle.getTooltipInnerStyle()}),e[ble],e.isComingSoon&&this.renderBadge("comingSoon"),e.isBeta&&this.renderBadge("beta"))})),Rle.map((t=>{const i="plus"===t&&o?"teamTrial":t;return this.renderPlan(t,e[cle],e.plans[i])})))}renderEmptyTableCell(e,t){return n()("td",{[Ale]:{...Nle.getSectionStyle(this[Ile],t),...Nle.getValueStyle(),...Nle[yle](this[Ile],this.isPlanActive(e)),...this[fle](e),color:Bv.ZP[dle],[Cle]:400}})}renderEmptyTableCells(e){return n()(d.Fragment,{},void 0,Rle.map((t=>this.renderEmptyTableCell(t,e))))}[Ble](e,t){const i="auto";return n()(d.Fragment,{},`table-section-${t}`,n()("tr",{},void 0,n()("td",{[Ale]:{...Nle.getSectionStyle(this[Ile],t),[Fle]:i,[mle]:i,[ule]:i}},void 0,e[ble]),this.renderEmptyTableCells(t)),e.items.map(((e,t)=>this.renderItem(e,t))))}[lle](e,t){const i=this.getProductCost(e),o=t.plans[e],a=`notion-pricing-grid-upgrade-${e}`;let s;switch(o[rle]){case"current":s=n()(f.FormattedMessage,{id:"pricingGrid.currentPlanButton.label",[Sle]:"Current"});break;case"upgrade":s=n()(f.FormattedMessage,{id:"pricingGrid.upgradePlanButton.label",[Sle]:"Upgrade"});break;case"downgrade":s=n()(f.FormattedMessage,{id:"pricingGrid.downgradePlanButton.label",[Sle]:"Downgrade"});break;case"will-downgrade":s=n()(f.FormattedMessage,{id:"pricingGrid.willDowngradePlanButton.label",[Sle]:"Future plan"});break;case"resubscribe":s=n()(f.FormattedMessage,{id:"pricingGrid.resubscribePlanButton.label",[Sle]:"Resubscribe"});break;default:x[sle](o[rle])}if("current"===o[rle])return this[ale]({[cle]:n()(f.FormattedMessage,{id:"pricingGrid.currentPlan.tooltip",[Sle]:"This is your current active plan"}),[ble]:n()(f.FormattedMessage,{id:"pricingGrid.currentPlan.largeScreenLabel",[Sle]:"Current plan"}),buttonClassName:a,wrapTooltip:!1});if(!t.canSwitchPlans){let e;return e=t.isInAppPurchase?n()(f.FormattedMessage,{id:"pricingGrid.switchPlanFromInAppPurchase.tooltip",[Sle]:nle}):n()(f.FormattedMessage,{id:"pricingGrid.switchPlanAsMember.tooltip",[Sle]:"You need to be an administrator of this workspace to switch plans."}),this[ale]({[cle]:e,[ble]:s,buttonClassName:a,wrapTooltip:!0})}return"will-downgrade"===o[rle]?this[ale]({[cle]:n()(f.FormattedMessage,{id:"pricingGrid.willDowngradePlan.tooltip",[Sle]:"This is the plan after your current plan expires"}),[ble]:n()(f.FormattedMessage,{id:"pricingGrid.willDowngradePlan.largeScreenLabel",[Sle]:"Future plan"}),buttonClassName:a,wrapTooltip:!1}):"downgrade"===o[rle]?n()(eo.Z,{isLarge:!0,[Ale]:{[Fle]:ole},[Tle]:()=>{S.trackPricingGridButtonClick(this[ile],{plan:e,from:"pricing_grid_top",button_text:o[rle]}),o[Tle]()},[tle]:a},void 0,s):n()(Po.Z,{isLarge:!0,[Ale]:{[Fle]:ole},disabled:!i,[Tle]:()=>{S.trackPricingGridButtonClick(this[ile],{plan:e,from:"pricing_grid_top",button_text:o[rle]}),o[Tle]()},[tle]:a},void 0,s)}[ale](e){const{[cle]:t,[ble]:i,buttonClassName:o,wrapTooltip:a}=e;return n()(ro.Z,{[Ale]:{[Fle]:a?320:"auto"},textWrap:a,[ple]:()=>t,render:e=>d[gle](eo.Z,s()({[Ale]:{[Fle]:ole,opacity:.5},isLarge:!0,disabled:!0},e,{[tle]:o}),i)})}renderSalesContactLink(e){const t=`setup_${e}_trial`;return n()(RP.Z,{[Tle]:()=>{const{[ele]:e}=B.default.state,i=null!=e&&e.isDefined()?e.getModel():void 0;S.trackContactSalesClick(this[ile]),_re.Z.setState({open:!0,email:i&&i.getEmail(),name:null==i?void 0:i[Xre](this[Ple].intl),question:t})}},void 0,n()("div",{[Ale]:Nle.getUpgradeButtonBelowLinkStyle()},void 0,n()(f.FormattedMessage,{id:"pricingGrid.requestATrial",[Sle]:"or Request a Trial"})))}getPlanName(e){const{intl:t}=this[Ple];switch(e){case"free":return t[Yre](wO.a.free);case"plus":return t[Yre](wO.a.plus);case Lle:return t[Yre](wO.a[Lle]);case Ele:return t[Yre](wO.a[Ele]);default:x[sle](e)}}getTerms(e){switch(e){case"free":return;case"plus":case Lle:case Ele:return $re;default:x[sle](e)}}getProductCost(e){var t;if("free"===e)return{amount:0,currencyCode:Wne.Z.state[Jre]};const i="monthly"===Cre.state.termType?"month":"year",o=Wne.Z.getPrice(this[ile],(t=>t.billingInterval===i&&t.product===e));return o.isLoaded?null===(t=o.result)||void 0===t?void 0:t.getMonthlyUnitCost().toMoneyValue():void 0}renderHeaderTitle(e){const t=this.getPlanName(e),i=this.getProductCost(e),o=this.getTerms(e);return n()("td",{[Ale]:{...Nle[Qre](),...Nle[yle](this[Ile],this.isPlanActive(e)),...this[fle](e)}},void 0,n()("div",{[Ale]:this.getHeaderTitleStyle()},void 0,t),i?n()("div",{[Ale]:{[xle]:Fre(this[ile])?"block":"flex"}},void 0,n()("div",{[Ale]:Nle.getHeaderPriceStyle()},void 0,n()(Loe.W,{cost:i,trailingZeroDisplay:jre})),o?n()("div",{[Ale]:this.getHeaderTermsStyle(this[Ile])},void 0,(0,Ire.X6)(this[Ple].intl,o)):null):n()(Lre.u,{}))}renderHeaderTitles(){return n()("tr",{},void 0,n()("td",{}),Rle.map((e=>n()(d.Fragment,{},e,this.renderHeaderTitle(e)))))}renderHeaderAction(e){const{planState:t}=this[Ple];if(t)return n()("td",{[Ale]:{...Nle[Qre](),...Nle[yle](this[Ile],this.isPlanActive(e)),...this[fle](e)}},void 0,this[lle](e,t),this.renderHeaderSubAction(e))}renderHeaderSubAction(e){if((0,tO.Rs)(e))return n()("div",{[Ale]:{marginTop:7}},void 0,this.renderSalesContactLink(e))}renderHeaderActions(){if(this[Ple].planState)return n()("tr",{},void 0,n()("td",{[Ale]:{[Fle]:"28%",[qre]:"top",[Hre]:16}},void 0,n()(Ere,{})),Rle.map((e=>this.renderHeaderAction(e))))}renderHeader(){return n()("thead",{},void 0,this.renderHeaderTitles(),this.renderHeaderActions())}renderBadge(e){return n()("div",{[Ale]:{[Gre]:this[Ile][zre],[Zle]:10,[Cle]:500,[Kre]:"0.015em",color:this[Ile][Mle],[xle]:_le,[Wre]:Vre,[hle]:"2px 4px",marginLeft:6,borderRadius:3,whiteSpace:"nowrap",position:"relative",top:-1}},void 0,"comingSoon"===e&&n()(f.FormattedMessage,{id:"pricingGrid.comingSoonBadge",[Sle]:"Coming soon"}),"beta"===e&&n()(f.FormattedMessage,{id:"pricingGrid.betaBadge",[Sle]:"Beta"}))}isPlanActive(e){return Boolean(this[Ple].planState&&this[Ple].planState.plans[e].isActive)}static getTableStyle(){return{[Zle]:14,[Fle]:ole,tableLayout:"fixed",borderCollapse:"initial"}}static getSectionStyle(e,t){const i={borderBottom:`1px solid ${e[Ure]}`,[Ore]:7,[Nre]:15,[Cle]:500,[qre]:"bottom"};return 0===t?{...i,[Hre]:0}:{...i,[Hre]:20}}static getUpgradeButtonBelowLinkStyle(){return{[Zle]:12}}static getRowStyle(e){return{borderBottom:`1px solid ${e[Ure]}`}}static getRowLabelStyle(e){return{color:e[Mle],[Nre]:10,[Hre]:5,[Ore]:6,[qre]:"top"}}static getValueStyle(){return{paddingLeft:10,[Nre]:10,textAlign:"left",overflow:"hidden",[qre]:"top"}}static[yle](e,t){const i=e.cardSidebarBackground;return{[Gre]:t?i:Bv.ZP.transparent}}[fle](e){return{borderLeft:`1px solid ${this[Ile][Rre]}`,borderRight:[Ele].includes(e)?`1px solid ${this[Ile][Rre]}`:void 0}}static[Qre](){return{paddingLeft:10,[Nre]:10,[qre]:"top",[Fle]:"18%",[Hre]:10}}getHeaderTitleStyle(){return{[Zle]:16,[Cle]:Fre(this[ile])?500:700,[wle]:1.3,marginBottom:2,[Hre]:40}}static getHeaderPriceStyle(){return{[Zle]:20,marginRight:7}}static getTooltipInnerStyle(){return{cursor:"help",[Fle]:ole,[xle]:"inline-block"}}getHeaderTermsStyle(e){return{[Zle]:10,[wle]:1,color:e[Mle],[Fle]:70,[Hre]:Fre(this[ile])?0:3}}}Nle.displayName="PricingGrid";const Ole=(0,f.injectIntl)(Nle),Ule=i(85).X8R,Vle=i(85).F1N,Wle=i(85).q_K,Kle=i(85).wNq,zle=i(85).QIj,Gle=i(85).MHZ,Hle=i(85).iDK,qle=i(85)._a5,jle=i(85).rOg,Qle=i(85).Yzm,Jle=i(85).wJk,$le=i(85).sI1,Yle=i(85).ydP,Xle=i(85).f57,ede=i(85)._SV,tde=i(85).LlE,ide=i(85).X_m,ode=i(85).BDC,nde=i(85).Zxd,ade=i(85).C1,sde=i(85).JGC,rde=i(85).$zJ,lde=i(85).irb,dde=i(85).JUg,cde=i(85).dz$,ude=i(85).eAn,mde=i(85).xdk,pde=i(85).T0r,gde=i(85).N3J,hde=i(85).EZQ,vde=i(85).Wqi,fde=i(85).wgE,yde=i(85).Wp_,bde=i(85).iIv,Sde=i(85).BCA,wde=i(85).bZK,Mde=i(85).Nit,kde=i(85).gUO,Cde=i(85).iqu,Zde=i(85).TaW,Tde=i(85).P0R,Pde=i(85).Gnd,Ide=i(85).QmD,Fde=i(85).VIS,_de=i(85).XtO,xde=i(85).aTq,Ade=i(85).ewQ,Bde=i(85).tBn,Dde=i(85).D7I,Ede=i(85).PG2,Lde=(i(85).LZ$,i(85).BQ6),Rde=i(85).nx5,Nde=i(85).psj,Ode=i(85).g7N,Ude=i(85).ChN,Vde=i(85).nLZ,Wde=i(85).Exd;function Kde(e){window.__c={n:"StudentUpgrade"};const{handleEducationPlanClick:t}=e,i=(0,ji.yK)((e=>({subsection:{[Wde]:14,[Vde]:40},subsectionTitle:{[Wde]:20,[Ude]:v.Z[Ude].bold,[Ode]:12},content:{color:e.mediumTextColor,[Ode]:15},[Nde]:{[Ode]:4},link:{textDecoration:"underline"}})),[]);return n()("div",{[Lde]:i.subsection},void 0,n()("div",{[Lde]:i.subsectionTitle},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.studentsAndEducatorsSection.title",[Rde]:"Students & educators"})),n()("div",{[Lde]:i.content},void 0,d[Dde](d[Bde],null,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.studentsAndEducatorsSection.description",[Rde]:"<p>Students and educators can get access to the Plus Plan features (with a 1-member limit) for free! Just sign up with your school email address, or change your existing email in the 'My account' tab.</p>",values:{p:e=>n()("div",{[Lde]:i[Nde]},void 0,e)}}),n()("div",{},void 0,n()(RP.Z,{[Ede]:t,[Lde]:i.link},void 0,n()(f.FormattedMessage,{[Rde]:"Get the Education Plan",id:"sidebarStudentPlanPrompt.eligible.getFreePromptPlus"}))),n()("div",{},void 0,n()(RP.Z,{external:!0,href:(0,X.getLocalizedUrl)("guides.students")},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.studentSection.link",[Rde]:"For more info, go to notion.com/students."}))))))}function zde(e){window.__c={n:"TrialBanner"};const{subscriptionData:t}=e,i=(0,ji.yK)((e=>({text:{color:e[Ade][500]}})),[]),o=ee[xde](t);return o&&o.trialEnd?o.trialEnd<Sre.ou.now().toSeconds()?null:n()(Zre.Z,{type:Zre.$.Beige,isMobile:!1},void 0,n()("div",{[Lde]:i.text},void 0,n()(f.FormattedMessage,{id:"SpaceSubscriptionPlans.trials.bannerText",[Rde]:"Your workspace is on a free trial until {trialEndDate}",values:{trialEndDate:(0,Dv.Yx)(1e3*o.trialEnd,"long",bw.SP)}}))):null}class Gde extends c.Z{constructor(){super(...arguments),this.storeTypes={[_de]:b2,downgradeModalStore:Mre.ZP,[Fde]:Ti.Z},this.renderChurnSurveyModal=()=>{const e=this[Pde][_de][Ide],{data:t}=this[Tde],i=ee[xde](t),o=te[Zde]();if(e[Cde]&&o&&i)return n()(y7.Z,{[kde]:e[kde],currentPlan:o,[wde]:!1,periodEnd:i.periodEnd,hasAI:(0,h.de)(i.addOns),hasPendingChanges:Boolean(i.schedule||i.willCancelAt),customerId:i.customerId,[Sde]:this.handleChurnSurveyModalAccept,[bde]:this[Mde]})},this.handleFreeClick=async()=>{const{data:e}=this[Tde];let t="no_confirmation_required";e&&"subscribed_admin"===e.type&&(t=await new Promise((e=>{const{[_de]:t}=this[Pde];t[yde]({...t[Ide],[kde]:"free",[Cde]:!0,[Sde]:t=>e(t?"churn_immediately":"churn_by_end_of_billing_period"),[bde]:()=>e("no_churn")})})),"no_churn"===t)||await _.cancelSubscription({[fde]:this[fde],[vde]:this[Tde][vde],planType:hde,from:gde,cancelImmediately:"churn_immediately"===t})},this.handleEducationPlanClick=()=>{const{[vde]:e}=this[Tde];_[pde]({[fde]:this[fde],[vde]:e})},this[mde]=async e=>{const{[vde]:t,data:i}=this[Tde],o=ee[xde](i);if(!o||!ee.hasPaymentMethod(i))return void _.openSubscriptionUpgradeModal(this[fde],{[ude]:e,from:"pricing_grid"});const n=te[Zde]();if(n&&tO.rC[e]<tO.rC[n]){if(!(await new Promise((t=>{const{[_de]:i}=this[Pde];i[yde]({...i[Ide],[kde]:e,[Cde]:!0,[Sde]:()=>t(!0),[bde]:()=>t(!1)})}))))return;try{const i=await async function(e){const{[cde]:t,[fde]:i,product:o}=e;await Wne.Z.waitUntilReady();const n=Wne.Z.getPrice(i,(e=>e.product===o&&e[cde]===t));if(!n.result)throw new Error("Could not find price model");return n.result}({[fde]:this[fde],[cde]:o.interval,product:e});await _[dde]({[fde]:this[fde],[vde]:t,plan:i.externalId,from:gde})}catch(a){wre.IE(a),w[lde]("Sorry, something went wrong. Please try again.")}}else{const t="yearly"===Cre[Ide].termType?"year":"month";Rne.showSubscriptionUpdateModal({[fde]:this[fde],from:rde,view:"plans",[sde]:e,[cde]:t,pageSection:"all_plans_grid"})}},this.handleChurnSurveyModalAccept=e=>{const{[_de]:t}=this[Pde];t[Ide][Cde]&&t[Ide][Sde](e),t[ade]()},this[Mde]=()=>{const{[_de]:e}=this[Pde];if(e[Ide][Cde]&&e[Ide][bde](),"grid"===e[Ide].page)return e[ade](),void e[yde]({...e[Ide],page:"grid"});e[ade]()}}willMount(){_.refresh(this[fde]),_.refreshUpcomingInvoice(this[fde])}renderComponent(){if(Qi.Z[Ide].online){const e=Une[nde](),{[Cde]:t,page:i}=this[Pde][_de][Ide],o="grid"===i,a=!e||o;return d[Dde](d[Bde],null,this.renderBanner(ee[ode](this[Tde].data),this[Tde].intl),n()(zde,{subscriptionData:this[Tde].data}),this.renderAllPlansButton(o),n()(Koe.Z,{[Lde]:{[ide]:"100%",[tde]:o?"0px 0px 100px 60px":"100px 0px 100px 60px"},type:Ooe.Z.Y},void 0,n()(Tre.ZP,{data:this[Tde].data,[vde]:this[Tde][vde],[ede]:this[Pde][_de]}),a?d[Dde](d[Bde],null,n()(LP.Z,{size:0}),this.renderPricingGrid(),this.allowEducationUpgrade()?n()(Kde,{handleEducationPlanClick:this.handleEducationPlanClick}):null,this.renderFAQ(),n()(QI.Z,{[$le]:{width:300,[ide]:Xle,[Yle]:"scroll"},open:t,render:this.renderChurnSurveyModal,[Jle]:this[Mde]})):null))}return n()(Pre.Z,{})}renderPricingGrid(){const e=this.getPlanState();return n()(Ole,{planState:e,data:this[Tde].data})}renderFAQ(){return n()("div",{[Lde]:Gde.subsectionStyle},void 0,n()("div",{[Lde]:Gde.subsectionTitleStyle},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.faqSection.title",[Rde]:"FAQ"})),n()(RP.Z,{external:!0,href:(0,X.getLocalizedUrl)("guides.billingAndPaymentRevised")},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.faqSection.link",[Rde]:"Plans, Billing & Payment"})))}handlePlansBackButtonClick(){const{[_de]:e}=this[Pde];e[yde]({...e[Ide],page:"default"})}renderBanner(e,t){const i=(0,te.getSubscriptionTier)();if(!i)return null;if((0,Tre.lu)(e,i)){const o=(0,Tre.QH)(e,i);return n()(Zre.Z,{type:Zre.$.Beige,isMobile:!1},void 0,n()("div",{[Lde]:{color:this.theme[Ade][500]}},void 0,o&&t[Qle](o)))}return null}renderAllPlansButton(e){return e?n()("div",{[Lde]:{[tde]:"30px 0px 0px 60px",display:"flex"}},void 0,n()(kz.Z,{[Lde]:{display:jle,[tde]:10},[Ede]:()=>this.handlePlansBackButtonClick()},void 0,m.Z.chevronLeft({width:16,[ide]:16,[Vde]:4})),n()(Yi.Z,{large:!0,[Lde]:{[Wde]:16,[Ude]:v.Z[Ude].medium,[Ode]:0,[tde]:10}},void 0,n()(f.FormattedMessage,{id:"spaceSubscriptionPlans.allPlans.title",[Rde]:"All plans"}))):null}getMemberCount(){return ee[qle](this[Tde].data)}canSwitchPlans(){const e=ee[ode](this[Tde].data);return this[Tde][vde].canAdmin()&&!e}calculateButtonState(e){const{data:t}=this[Tde],i=ee.isStripeCanceled(t);return(0,tO.QM)(e)?{free:Hle,plus:Gle,[zle]:Gle,[Kle]:Gle}:(0,tO.Aw)(e)?{free:i?Hle:Wle,plus:Gle,[zle]:Gle,[Kle]:Gle}:(0,tO.eR)(e)?{free:Wle,plus:i?"resubscribe":Hle,[zle]:Gle,[Kle]:Gle}:"business"===e?{free:Wle,plus:Wle,[zle]:i?"resubscribe":Hle,[Kle]:Gle}:"enterprise"===e?{free:Wle,plus:Wle,[zle]:Wle,[Kle]:i?"resubscribe":Hle}:void(0,x.unreachable)(e)}[Vle](e){return[Hle,"resubscribe"].includes(e)}getPlanState(){const e=te[Zde]();if(!e)return;const t=ee[ode](this[Tde].data),i=this.calculateButtonState(e);return{plans:{free:{[Ule]:i.free,isActive:this[Vle](i.free),[Ede]:this.handleFreeClick},plus:{[Ule]:i.plus,isActive:this[Vle](i.plus),[Ede]:()=>this[mde]("plus")},[zle]:{[Ule]:i[zle],isActive:this[Vle](i[zle]),[Ede]:()=>this[mde](zle)},[Kle]:{[Ule]:i[Kle],isActive:this[Vle](i[Kle]),[Ede]:()=>this[mde](Kle)}},isTeamTrial:!1,isInAppPurchase:t,canSwitchPlans:this.canSwitchPlans(),memberCount:this.getMemberCount()}}allowEducationUpgrade(){const{data:e}=this[Tde],t=this.getPlanState(),i=te[Zde]();return t&&t.canSwitchPlans&&!ee.isEducationPlan(e)&&1===t.memberCount&&("free"===i||"personal"===i)}}Gde.displayName="SpaceSubscriptionPlans",Gde.subsectionStyle={[Wde]:14,[Vde]:40},Gde.subsectionTitleStyle={[Wde]:20,[Ude]:v.Z[Ude].bold,[Ode]:12};const Hde=(0,f.injectIntl)(Gde);var qde=i(26234),jde=i(42982);const Qde=i(85).l__,Jde="teamColumn",$de="ownersColumn",Yde="membersColumn",Xde="AccessLevelColumn",ece="lastUpdatedColumn",tce="contextMenuColumn",ice=[Jde,Yde,Xde,ece],oce="filterAccessAny",nce="filterAccessOnlyOpen",ace="filterAccessOnlyClosed",sce="filterAccessOnlyPrivate",rce="filterOwnerAny",lce="filterOwnerShowOrphaned",dce="filterOwnerById";class cce extends E.default{getInitialState(){return{searchQuery:"",sortColumn:ece,sortAscending:!1,showOnlyArchivedTeams:!1,filterByOwner:{type:rce},filterAccess:oce,[Qde]:!1}}}const uce=new cce,mce=i(85).nx5,pce=i(85).Wqi,gce=i(85).wgE,hce=i(85).IF2;function vce(e){let{[gce]:t,teamIds:i}=e;const{currentSpaceStore:o,currentUserStore:n}=B.default.state;return o&&n?i.map((e=>{const i=go.zX.createChildStore(o,{table:Nn.e0,id:e,spaceId:o.id});if(i.canRead())return i;const n=o&&Mz.maybeGetUnjoinedPrivateTeamStoreAsEnterpriseAdmin({[gce]:t,teamId:i.id,[pce]:o,from:"manage_teams_table"});return null!=n&&n.canRead()?n:void 0})).filter(x.isDefined):[]}var fce=i(51923);const yce=i(85).unK,bce=i(85).yGY;class Sce extends E.default{getInitialState(){return{tokenQuery:"",[bce]:!1,[yce]:{}}}addedAndCurrentTeams(){return Object.values(this.state[yce]).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state[yce]).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state[yce]).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const wce=new Sce,Mce=i(85).unK;function kce(e){var t;let{team:i}=e;return null===(t=wce.state[Mce][i.id])||void 0===t?void 0:t.state}function Cce(e){let{team:t,persistedDefaultTeams:i}=e;if(i.includes(t))Zce({store:t,state:"current-default"});else{const e={...wce.state[Mce]};delete e[t.id],wce.setState({...wce.state,[Mce]:e})}}function Zce(e){const t=wce.state;wce.setState({...t,[Mce]:{...t[Mce],[e.store.id]:e}})}var Tce=i(75024),Pce=i(30676),Ice=i(47082);const Fce=i(85).PXg,_ce=i(85).wJk,xce=i(85).ccq,Ace=i(85).ymD,Bce=i(85).ceT,Dce=i(85).nQ3,Ece=i(85).j7K,Lce=i(85).y79,Rce=i(85).cZW,Nce=i(85).Dd5,Oce=i(85).pkR,Uce=i(85).Rbl,Vce=i(85).Yzm,Wce=i(85).Gpy,Kce=i(85).jkI,zce=i(85).H1U,Gce=i(85).dLQ,Hce=i(85).ESK,qce=i(85)._lc,jce=i(85).BQ6,Qce=i(85).XNW,Jce=i(85).NF1,$ce=i(85).OHs,Yce=i(85).D7I,Xce=i(85).nx5,eue=i(85).XtO,tue=i(85).yGY,iue=i(85).eiN,oue=i(85).dbe,nue=i(85).unK;function aue(e){let{}=e;window.__c={n:"DefaultTeamsInput"};const t=(0,Hi.Fy)(),i=(0,f.useIntl)(),o=(0,Hi.O7)(),{allTeams:a,loaded:r}=(0,qi.VK)((()=>{const e=R.state;return"loaded"!==e.loadingState?{allTeams:[],loaded:!1}:{allTeams:vce({environment:o,teamIds:e.unarchivedTeamIds}),loaded:!0}}),[o]),[c,u]=(0,d.useState)(!1),m=(0,qi.qz)(wce),p=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),{[nue]:g,[oue]:h}=(0,qi.VK)((()=>{const{[nue]:e,[oue]:t}=m.state;return{[nue]:e,[oue]:t}}),[m]),v=!h,{addedTeams:y,removedTeams:b,addedAndCurrentTeams:S}=(0,qi.VK)((()=>({addedAndCurrentTeams:m.addedAndCurrentTeams(),addedTeams:m.addedTeams(),removedTeams:m.removedTeams()})),[m]),w=(0,qi.VK)((()=>a.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[a]),M=(0,qi.VK)((()=>a[iue]((e=>e.isDefault()))),[a]);(0,d.useEffect)((()=>function(e){let{persistedDefaultTeams:t}=e;const i=t.reduce(((e,t)=>(e[t.id]={state:"current-default",store:t},e)),{}),o=wce.state;wce.setState({...o,[Mce]:i})}({persistedDefaultTeams:M})),[M]);const k=y.length>0||b.length>0,C=e=>function(e){let{team:t,persistedDefaultTeams:i}=e;"add-default"===kce({team:t})?Cce({team:t,persistedDefaultTeams:i}):Zce({store:t,state:"remove-default"})}({team:e,persistedDefaultTeams:M}),Z=e=>{!function(e){let{team:t,persistedDefaultTeams:i}=e;"remove-default"===kce({team:t})?Cce({team:t,persistedDefaultTeams:i}):Zce({store:t,state:"add-default"})}({team:e,persistedDefaultTeams:M}),m.update((e=>({...e,[tue]:!1,[oue]:""})))},T=new Set(b.map((e=>e[eue].id))),P=o.currentUser.id,I=(0,qi.VK)((()=>P?a[iue]((e=>{const t=e.getMembers(),i=e.getSettingsStore().getValue();return!!i&&((0,ja.pd)({membership:t},P)&&"open"===(0,ja.B5)(i))})):[]),[a,P]),F=function(e){let{query:t,addedAndCurrentTeams:i,eligibleDefaultTeams:o,teamIdsToNames:n}=e;const a=new Set;for(const s of i)a.add(s[eue].id);return(0,wy.ZP)(t,o,(e=>n[e.id]??""))}({query:h,addedAndCurrentTeams:S,teamIdsToNames:w,eligibleDefaultTeams:I}),_=[];F.length>0&&!v&&_.push({key:"default-teams-list",render:e=>d[Yce](on.Z,s()({},e,{title:n()(f.FormattedMessage,{id:"defaultTeamsInput.defaultTeamList.title",[Xce]:"Teamspaces"}),loading:!1})),items:F.map((e=>({key:e.id,render:t=>d[Yce](Pce.F,s()({},t,{[$ce]:e})),action:()=>Z(e)})))});const x=(0,qi.VK)((()=>m.state[tue]&&_.length>0),[m,_.length]),A=(0,ji.yK)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{[Jce]:x?lue:rue,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,[Jce]:due},updateButton:{[Qce]:10,height:35}})),[x]);return d[Yce](d.Fragment,null,n()("div",{[jce]:A.defaultTeamsHeader},void 0,n()(f.FormattedMessage,{id:"teamsWorkspaceSettings.defaultTeams.title",[Xce]:"Default teamspaces"})),n()(Ji.Z,{isSmall:!0,isMultiline:!0},void 0,n()(f.FormattedMessage,{id:"teamsWorkspaceSettings.defaultTeams.caption",[Xce]:"Choose teamspaces that all new and current workspace members will automatically join"})),n()("div",{[jce]:A.inputAndButtonContainer},void 0,n()("div",{[jce]:A.inputContainer},void 0,n()(tn.ZP,{popupType:tn.ZP[qce].Popup,[xce]:tn.ZP[Hce].Bottom,sameWidthAsOrigin:!0,open:x,[Jce]:due,[_ce]:()=>m.update((e=>({...e,[tue]:!1}))),origin:n()(Ice.Z,{[Oce]:!r||c,[jce]:A.tokenInputMenu,focusInitial:t[Gce],focusAfterAnimation:!0,format:Ice.Z.Format.Share,inputDivStyle:{[zce]:Kce},value:h,[Nce]:e=>m.update((t=>({...t,[oue]:e.target.value,[tue]:!0}))),type:"default-teams",tokens:Object[Wce](g)[iue]((e=>!T.has(e[eue].id))).map((e=>n()(sue,{[$ce]:e[eue],onClickRemove:C},e[eue].id))),[Rce]:i[Vce]({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",[Xce]:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=S,t=l().last(e);t&&C(t[eue])},onEmptySubmit:l()[Uce],showBorder:!0}),render:()=>n()(Xo.Z,{[Bce]:jo.og.Popup,tokenInputHeader:!0,[Ace]:!0},void 0,n()("div",{[jce]:A.menuList},void 0,n()(en.Z,{type:en.i[Lce],[Ece]:0,[Dce]:_})))})),n()(Po.Z,{[jce]:A.updateButton,[Oce]:!k||c,isLarge:!0,onClick:async()=>{if(p){u(!0);try{await async function(e){let{addedTeams:t,removedTeams:i,[gce]:o,[pce]:n}=e;if(!n.isDefined())return!1;const a=n.getPermissionItems();return await Mz.updateDefaultTeams({addedStores:t.map((e=>{let{store:t}=e;return t})),removedStores:i.map((e=>{let{store:t}=e;return t})),[gce]:o,spaceValue:{permissions:a},createNewTeamFlowId:void 0,from:"workspace_settings"})}({environment:o,addedTeams:y,removedTeams:b,spaceStore:p})}finally{u(!1)}}}},void 0,n()(f.FormattedMessage,{id:"teamsWorkspaceSettings.updateButton.label",[Xce]:"Update"}))))}function sue(e){window.__c={n:"DefaultTeamsToken"};const t=(0,Hi.Fy)(),{[$ce]:i,onClickRemove:o}=e,{name:a}=(0,qi.VK)((()=>({name:i.getName()})),[i]);return n()(Sr.Z,{showRemoveButton:!0,isSingle:!1,format:t[Gce]?vr.l.Large:vr.l.Medium,[jce]:{[Qce]:6},onClickRemove:()=>o(i),value:n()("div",{[jce]:{display:"flex",[zce]:Kce}},void 0,n()(zn.p,{[Oce]:!0,[eue]:i,size:14,[jce]:{[Fce]:4}}),a)})}const rue=3,lue=(0,Tce.wK)({topLeft:rue,topRight:rue,bottomLeft:0,bottomRight:0}),due=(0,Tce.wK)({topLeft:0,topRight:0,bottomLeft:rue,bottomRight:rue});var cue=i(17224);const uue=i(85).D7I;function mue(e){let{selectItems:t,currentSelectedItem:i,onChange:o,icon:a}=e;return n()(al.Z,{items:t,getKey:e=>e.key,selectedItem:i,onSelect:o,renderItem:e=>d[uue]($o.Z,s()({title:e.value.name},e,{checkState:i.key===e.value.key})),renderOrigin:e=>d[uue](Jo.Z,s()({},e,{title:i.originName??i.name,on:!i.showFilterAsOffWhenSelected,icon:a}))})}const pue=i(85).nx5,gue={[oce]:{key:oce,name:n()(f.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",[pue]:"Any"}),originName:n()(f.FormattedMessage,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",[pue]:"Access"}),showFilterAsOffWhenSelected:!0},[nce]:{key:nce,name:n()(f.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",[pue]:"Open"})},[ace]:{key:ace,name:n()(f.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",[pue]:"Closed"})},[sce]:{key:sce,name:n()(f.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",[pue]:"Private"})}},hue=l().compact([gue.filterAccessAny,gue.filterAccessOnlyOpen,gue.filterAccessOnlyClosed,gue.filterAccessOnlyPrivate]);function vue(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsAccessFilter"};const i=(0,Hi.O7)(),o=(0,qi.VK)((()=>t.state.filterAccess),[t]),a=(0,ji.yK)((e=>({keyIcon:{width:18,height:18,...o!==oce?{fill:Bv.ZP.blue}:{fill:e.mediumIconColor}}})),[o]),s=(0,d.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),cue.GZ(i,{filter:"access",value:e.key})}),[t,i]),r=gue[o];return n()(mue,{selectItems:hue,currentSelectedItem:r,onChange:s,icon:m.Z.key(a.keyIcon)})}const fue=i(85).nx5,yue="showArchived",bue="hideArchived",Sue={[bue]:{key:bue,name:n()(f.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",[fue]:"Active"}),originName:n()(f.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",[fue]:"Archived"}),showFilterAsOffWhenSelected:!0},[yue]:{key:yue,name:n()(f.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",[fue]:"Archived"})}};function wue(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsArchivedFilter"};const i=(0,Hi.O7)(),o=(0,qi.VK)((()=>t.state.showOnlyArchivedTeams),[t]),a=(0,ji.yK)((e=>({archiveIcon:{width:16,height:16,marginRight:5,...o?{fill:Bv.ZP.blue}:{fill:e.mediumIconColor}}})),[o]),s=[Sue.hideArchived,Sue.showArchived],r=(0,d.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===yue}))),cue.GZ(i,{filter:"archived",value:e.key})}),[t,i]),l=Sue[o?yue:bue];return n()(mue,{selectItems:s,currentSelectedItem:l,onChange:r,icon:m.Z.archiveFilled(a.archiveIcon)})}const Mue=i(85).Yzm,kue=i(85).D7I,Cue=i(85).nx5,Zue=i(85).qJ8,Tue="ShowTeamsWithNoOwnersId";function Pue(e){let{teamStores:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsOwnerFilter"};const o=(0,Hi.O7)(),a=(0,qi.VK)((()=>i.state.filterByOwner),[i]),r=function(e){switch(e.type){case rce:return;case dce:return e.id;case lce:return Tue;default:(0,x.unreachable)(e)}}(a),c=(0,qi.VK)((()=>B.default.state[Zue]),[]),u=(0,f.useIntl)(),p=(0,qi.VK)((()=>{const e=t.flatMap((e=>(0,ja.XO)({membership:e.getMembers()})));return l().uniq(e)}),[t]),g=(0,ji.yK)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:Bv.ZP.blue}})),[]),h=(0,d.useCallback)((e=>{if(c)return fR({userId:e,[Zue]:c}).getValue()}),[c]),v=(0,d.useCallback)((e=>{const t=e[e.length-1];let n;n=t===r||void 0===t?{type:rce}:t===Tue?{type:lce}:{type:dce,id:t},i.update((e=>({...e,filterByOwner:n}))),cue.GZ(o,{filter:"owner",value:n.type})}),[r,i,o]),y=(0,d.useCallback)((async e=>{let{query:t}=e;if(!c)return[];const i=(await hp.searchUsers({query:t,[Zue]:c,userIds:p})).map((e=>e.id));return""===t?[Tue,...i]:i}),[c,p]),b=(0,d.useCallback)(((e,t)=>{if(!c)return null;if(e===Tue)return d[kue]($o.Z,s()({},t,{title:n()(f.FormattedMessage,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",[Cue]:"No owners"}),checkState:a.type===lce,className:"notranslate"}));const i=h(e);return i?d[kue](Hp.Z,s()({},t,{key:e,actor:(0,zp.m3)(i),checkState:r===e})):null}),[c,h,r,a.type]),S=(0,qi.VK)((()=>{if(a.type!==dce)return;const e=h(a.id);return e?(0,Xa.Nz)(u,e):void 0}),[a,h,u]);let w;return w=a.type===lce?n()(f.FormattedMessage,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",[Cue]:"Owner: None"}):n()(f.FormattedMessage,S?{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",[Cue]:"Owner: {teamOwnerName}",values:{teamOwnerName:S}}:{id:"manageTeamsOwnerFilter.filterTitle.unset",[Cue]:"Owner"}),n()(Ac.Z,{mode:Ac.z.Pill,title:w,disabled:0===t.length,icon:m.Z.person,iconStyles:{...g.icon,...a.type!==rce&&g.blueFill},items:l().compact([r]),hasItemsSelected:(0,x.isDefined)(r),onChange:v,labelText:{title:w,tokenInputPlaceholder:u[Mue]({[Cue]:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u[Mue]({[Cue]:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:y,renderResultMenuItem:b,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const Iue=i(85).nx5,Fue=i(85).l__,_ue="showAll",xue=Fue,Aue={[_ue]:{key:_ue,name:n()(f.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",[Iue]:"Show all"}),originName:n()(f.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",[Iue]:"Security"}),showFilterAsOffWhenSelected:!0},[xue]:{key:xue,name:n()(f.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",[Iue]:"Has overrides"})}};function Bue(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsSecurityOverridesFilter"};const i=(0,Hi.O7)(),o=(0,qi.VK)((()=>t.state[Fue]),[t]),a=(0,ji.yK)((e=>({securityIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor},blueFill:{fill:Bv.ZP.blue}})),[]),s=[Aue.showAll,Aue[xue]],r=(0,d.useCallback)((e=>{t.setState({...t.state,[Fue]:e.key===xue}),cue.GZ(i,{filter:"securityOverrides",value:e.key})}),[t,i]),l=Aue[o?xue:_ue];return n()(mue,{selectItems:s,currentSelectedItem:l,onChange:r,icon:m.Z.integrationSecurity({...a.securityIcon,...o&&a.blueFill})})}const Due=i(85).nx5,Eue=i(85).Yzm,Lue=i(85).Dd5,Rue=i(85).XNW,Nue=i(85).PXg,Oue=i(85).L_E;function Uue(e){let{manageTeamsStore:t,teamStores:i}=e;window.__c={n:"ManageTeamsFilterRow"};const o=(0,ji.yK)((()=>({[Oue]:{display:"flex",alignItems:"center",marginTop:20},searchContainer:{maxWidth:250,[Nue]:"auto"},archivedTeamsSwitch:{display:"flex",alignItems:"center",[Rue]:15,[Nue]:15},archivedTeamsLabel:{[Rue]:10},dropdownContainer:{display:"flex",alignContent:"stretch",[Rue]:5}})),[]),a=(0,qi.VK)((()=>t.state.searchQuery),[t]),s=(0,d.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return n()("div",{style:o[Oue]},void 0,n()(Vue,{style:o.searchContainer,[Lue]:s,value:a}),n()("div",{style:o.dropdownContainer},void 0,n()(wue,{manageTeamsStore:t}),n()(Pue,{teamStores:i,manageTeamsStore:t}),n()(vue,{manageTeamsStore:t}),n()(Bue,{manageTeamsStore:t})))}function Vue(e){let{style:t,value:i,[Lue]:o}=e;window.__c={n:"Search"};const a=(0,f.useIntl)(),s=(0,ji.yK)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:14,height:14,[Nue]:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),r=(0,d.useCallback)((e=>o(e.target.value)),[o]);return n()(bl.Z,{placeholder:a[Eue]({[Due]:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...s.input,...t},value:i,[Lue]:r,left:m.Z.search(s.searchIcon),format:bl.Z.Format.Small,showClearButton:!0})}var Wue=i(12534),Kue=i(48690),zue=i(92350),Gue=i(11913),Hue=i(98742),que=i(45660),jue=i(4657),Que=i(13380);const Jue=i(85).Joh,$ue=i(85).D7I,Yue=i(85).QNi;function Xue(e){let{teamStore:t,accessLevel:i,isTeamOwner:o,onChangeAccessLevel:a,width:r}=e;window.__c={n:"ManageTeamsAccessCell"};const l=(0,Hi.O7)(),c=(0,zue.vR)(t),u=(0,jue.U)({teamStore:t,onChange:a,isDefault:c}),p=c?"default":i,g=u.find((e=>e.key===p)),h=!o||Boolean(null==g?void 0:g.disableAllOptionsTooltip),y=(null==g?void 0:g.disableAllOptionsTooltip)||h&&!o&&n()(f.FormattedMessage,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}),b=(0,que.e)(),S=(0,ji.yK)((e=>{const t=e.lightTextColor;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:r},label:{...h&&{color:t},fontSize:v.Z.fontSize.UIRegular.desktop,fontWeight:v.Z.fontWeight.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...h&&{fill:t}},[Yue]:{width:200}}}),[h,r]);if(!g)throw new Error(`Selected access level is not an option found in team access level option: ${p}`);return n()(al.Z,{items:u,getKey:e=>e.key,selectedItem:g,onSelect:e=>"private"===e.key&&b?yB.y(l,{from:"team_security_settings",for:"business"}):e.onSelect(),renderItem:e=>n()(ro.Z,{textWrap:!0,style:S[Yue],placement:Sw.u.Bottom,disableTooltip:!e.value[Yue],[Jue]:()=>e.value[Yue],render:t=>d[$ue]($o.Z,s()({title:e.value.title},(0,Hue.Z)(e,t)))}),disabled:h,renderOrigin:e=>n()(ro.Z,{textWrap:!0,style:S[Yue],disableTooltip:!y,[Jue]:()=>y,alignment:Sw.v.Center,placement:Sw.u.Left,render:t=>d[$ue](Io.Z,s()({style:S.selectButton,disabled:h},(0,Hue.Z)(e,t)),n()(Que.s,{style:S.label},void 0,g.level),m.Z.chevronDown(S.chevron))})})}const eme=i(85).nx5,tme=i(85).TtP,ime=i(85).L_E,ome=i(85).qJ8;function nme(e){let{teamOwners:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsOwnersCell"};const o=(0,qi.VK)((()=>B.default.state[ome]),[]),a=(0,f.useIntl)(),s=(0,qi.VK)((()=>{if(!o)return;const{filterByOwner:e}=i.state;let n=t[0];if(e.type===dce){const i=e.id;t.includes(i)&&(n=i)}return n?fR({userId:n,[ome]:o}):void 0}),[o,i,t]),r=(0,qi.VK)((()=>{if(null!=s&&s.isDefined())return(0,Xa.Nz)(a,s.getModel())}),[s,a]),l=(0,ji.yK)((e=>({[ime]:{display:"flex",alignItems:"center",fontSize:v.Z.fontSize.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.mediumTextColor},noOwners:{marginRight:8,color:e.lightTextColor},userName:{flexShrink:1}})),[]);return t[tme]<1?n()("div",{style:l.noOwners},void 0,n()(f.FormattedMessage,{id:"manageTeamsOwnersCell.noOwners",[eme]:"No owners"})):n()("div",{style:l[ime]},void 0,n()(es.Z,{style:l.userAvatar,avatarShouldShowShadow:!0,userStore:s,size:20}),n()(Que.s,{style:l.userName},void 0,r),t[tme]>1&&n()("div",{style:l.nMoreOwnersText},void 0,n()(f.FormattedMessage,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",[eme]:"+{numAdditionalOwners}",values:{numAdditionalOwners:t[tme]-1}})))}const ame=i(85).ChN,sme=i(85).L_E,rme=i(85).vK9,lme=i(85).OlC,dme=i(85).OHs,cme=i(85)._mj,ume=i(85).XtO,mme=i(85).wgE,pme=i(85).O9h,gme=i(85).nx5,hme=i(85).XZb,vme=[Jde,$de,Xde,ece,tce],fme={[Xde]:{[hme]:n()(f.FormattedMessage,{id:"manageTeamsTable.columnTitle.access",[gme]:"Access"}),[pme]:e=>{let{data:t,[mme]:i}=e;return n()(Xue,{[dme]:t[ume],accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,onChangeAccessLevel:(e,o)=>Mz.setTeamAccessLevel({[mme]:i,[ume]:t[ume],accessLevel:e,isDefault:o,teamName:t.name,from:cme}),width:90})},colWidth:{width:90},[lme]:!0},[Jde]:{[hme]:n()(f.FormattedMessage,{id:"manageTeamspacesTable.columnTitle.teamspace",[gme]:"Teamspace"}),[pme]:e=>{let{data:t}=e;return n()(yme,{[dme]:t[ume],isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{[rme]:30,widthPercent:35}},[$de]:{[hme]:n()(f.FormattedMessage,{id:"manageTeamsTable.columnTitle.owners",[gme]:"Owners"}),[pme]:e=>{let{data:t,manageTeamsStore:i}=e;return n()(nme,{teamOwners:t.owners,manageTeamsStore:i})},colWidth:{[rme]:60,widthPercent:25}},[Yde]:{[hme]:n()(f.FormattedMessage,{id:"manageTeamsTable.columnTitle.members",[gme]:"Members"}),[pme]:e=>{let{data:t}=e;return n()(Que.s,{},void 0,n()(f.FormattedMessage,{id:"manageTeamsTable.numMembersCell",[gme]:"{numTeamMembers, plural, one {# member} other {# members}}",values:{numTeamMembers:t.members.length}}))},colWidth:{[rme]:40,widthPercent:15}},[ece]:{[hme]:n()(f.FormattedMessage,{id:"manageTeamsTable.columnTitle.updated",[gme]:"Updated"}),[pme]:e=>{let{data:t}=e;return t.lastUpdated&&n()(bme,{lastUpdatedMillis:t.lastUpdated})},colWidth:{[rme]:50,widthPercent:15}},[tce]:{[hme]:void 0,[pme]:e=>{let{data:t}=e;return n()(Gue.o,{[dme]:t[ume],from:cme})},colWidth:{width:30},[lme]:!0}};function yme(e){let{[dme]:t,name:i,isArchivedTeam:o}=e;window.__c={n:"TeamCell"};const a=(0,Hi.O7)(),s=(0,f.useIntl)(),r=(0,zue.e4)(t),c=(0,ji.yK)((e=>({[sme]:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",[rme]:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",[ame]:v.Z[ame].regular},smallText:{fontSize:(0,Tce.yv)(a,"UISmall"),color:e.mediumTextColor,[ame]:v.Z[ame].regular},archivedTag:{marginLeft:5}})),[a]),u=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),m=(0,qi.VK)((()=>{if(!u)return;const e=(0,A.tO)({[dme]:t,spaceStore:u}).length;return(0,Iq.uf)(e,"compact",s)}),[u,s,t]),p=n()(f.FormattedMessage,{id:"manageTeamsTableColumnData.numMembersLabel",[gme]:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:m}}),g=r?d.createElement(d.Fragment,null," • ",n()(f.FormattedMessage,{id:"manageTeamsTableColumnData.joinedLabel",[gme]:"Joined"})):void 0,h=l().compact([p,g]);return n()("div",{style:c[sme]},void 0,n()(zn.p,{style:c.teamIcon,size:28,[ume]:t,disabled:!0}),n()("div",{style:c.nameAndMembersContainer},void 0,n()("div",{style:c.nameAndArchivedPillContainer},void 0,n()(Que.s,{style:c.nameText},void 0,i),o&&n()(Gp.Z,{desktopStyle:c.archivedTag,mobileStyle:c.archivedTag},void 0,n()(f.FormattedMessage,{id:"manageTeamsTable.archivedTag",[gme]:"Archived"}))),n()(Que.s,{style:c.smallText},void 0,h)))}function bme(e){let{lastUpdatedMillis:t}=e;return n()(Que.s,{},void 0,(0,Dv.Yx)(t,"very_short",bw.SP))}const Sme=i(85).nx5,wme=i(85).O9h,Mme=i(85).OlC,kme=i(85).lWm,Cme=i(85).wuN,Zme=i(85).Exd,Tme=i(85).PG2,Pme=i(85).BQ6,Ime=i(85).jkI,Fme=i(85).xej,_me=i(85).abK,xme=i(85).vK9,Ame=i(85).L_E,Bme=i(85)._mj,Dme=i(85).wgE,Eme=i(85).TtP,Lme=i(85).l__,Rme=i(85).XtO,Nme=i(85).IF2;function Ome(e){let{teamStores:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsTable"};const o=(0,Hi.O7)(),a=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,qi.VK)((()=>B.default.state.currentUserStore),[]),{[Nme]:r,sortColumn:c}=(0,qi.VK)((()=>{const{[Nme]:e,sortColumn:t}=i.state;return{[Nme]:e,sortColumn:t}}),[i]),u=(0,qi.VK)((()=>{const e=null==s?void 0:s.id;return e?l().compact(t.map((t=>{if(!t.canRead()||!t.isReady())return;const i=t.getMembers(),o=(0,ja.XO)({membership:i});return{[Rme]:t,name:t.getName()??"",owners:o,isCurrentUserOwnerOfTeam:o.includes(e),members:(0,A.tO)({teamStore:t,spaceStore:a}),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,ja.m4)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[a,null==s?void 0:s.id,t]),m=(0,qi.VK)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,[Lme]:o,filterAccess:n}=i.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!o||e.hasSecurityOverrides)).filter((e=>{if(n===nce&&"open"!==e.accessLevel)return!1;if(n===ace&&"closed"!==e.accessLevel)return!1;if(n===sce&&"private"!==e.accessLevel)return!1;switch(t.type){case lce:return 0===e.owners[Eme];case dce:return e.owners.includes(t.id);case rce:return!0;default:(0,x.unreachable)(t)}}))}),[i,u]),p=(0,qi.VK)((()=>{const{[Nme]:e,sortColumn:t}=i.state;return function(e){let{data:t,sortColumn:i,[hce]:o}=e;const n=[o?"asc":"desc"],a=[o?"desc":"asc"];switch(i){case Jde:return l().orderBy(t,(e=>e.name),a);case Yde:return l().orderBy(t,(e=>e.members.length),n);case Xde:return l().orderBy(t,(e=>Nn.bx.indexOf(e.accessLevel)),n);case ece:return l().orderBy(t,(e=>e.lastUpdated),n);default:(0,x.unreachable)(i)}}({data:m,[Nme]:e,sortColumn:t})}),[i,m]),g=(0,qi.VK)((()=>(0,wy.ZP)(i.state.searchQuery,p,(e=>e.name))),[i,p]),h=(0,d.useCallback)((e=>Mz.viewTeam({[Dme]:o,teamId:e,tab:Kue.a.Members,from:Bme})),[o]),v=(0,ji.yK)((e=>{const t=vme.reduce(((e,t)=>e+qme(fme[t].colWidth)+Gme),0);return{[Ame]:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",[xme]:t},[_me]:{borderTop:`1px solid ${e[Fme]}`,borderBottom:`1px solid ${e[Fme]}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:Ime}}}),[]),f=(0,d.useCallback)((e=>{const{sortColumn:t,[Nme]:n}=i.state,a=e===t&&!n;i.setState({...i.state,[Nme]:a,sortColumn:e}),cue.dw(o,{sortBy:e,sortOrder:n?"ascending":"descending"})}),[i,o]),y=(0,d.useCallback)((()=>{i.reset()}),[i]);return d.createElement(d.Fragment,null,n()("table",{[Pme]:v[Ame]},void 0,n()("tr",{[Pme]:v[_me]},void 0,vme.map((e=>n()(Vme,{column:e,onSortableColumnClick:f,[Nme]:r,sortColumn:c},`header_${e}`)))),n()("tr",{},void 0,vme.map((e=>n()("td",{},`padding_row_${e}`)))),g.map((e=>n()(Ume,{onShowTeamSettings:h,teamData:e,manageTeamsStore:i},`${e[Rme].id}_row`)))),n()(Kme,{[Pme]:v.noTeamsLabel,numItemsAfterFilter:g[Eme],numItemsBeforeFilter:t[Eme],onResetFilters:y}))}function Ume(e){let{teamData:t,manageTeamsStore:i,onShowTeamSettings:o}=e;window.__c={n:"TeamRow"};const[a,s]=(0,d.useState)(!1),r=(0,d.useCallback)((()=>s(!0)),[]),l=(0,d.useCallback)((()=>s(!1)),[]),c=(0,d.useCallback)((e=>{zme(e,(()=>o(t[Rme].id)))}),[o,t[Rme].id]),u=(0,ji.yK)((e=>({teamRow:{cursor:"pointer",borderBottom:`1px solid ${e[Fme]}`}})),[]);return n()("tr",{onMouseLeave:l,onMouseEnter:r,[Pme]:u.teamRow,[Tme]:c},void 0,vme.map((e=>n()(Wme,{isRowHovered:a,teamData:t,columnData:fme[e],manageTeamsStore:i},`${t[Rme].id}_${e}`))))}function Vme(e){let{column:t,onSortableColumnClick:i,sortColumn:o,[Nme]:a}=e;window.__c={n:"HeaderCell"};const s=fme[t],r=(0,ji.yK)((e=>({th:jme(s),innerDiv:{display:"flex",alignItems:Ime,[xme]:qme(s.colWidth),height:32},text:{[Zme]:v.Z[Zme].UISmall.desktop,fontWeight:v.Z.fontWeight.regular,color:e[Cme]},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e[Cme],width:12,height:12,marginLeft:4}})),[s]),l=n()(Que.s,{[Pme]:r.text},void 0,s.headerTitle),d=(c=t,ice.includes(c)?n()(Io.Z,{[Pme]:r.sortButton,[Tme]:()=>i(t)},void 0,l,(()=>{if(t===o)return m.Z.arrowDownSmall({...r.sortIcon,...a&&{transform:"rotate(180deg)"}})})()):l);var c;return n()("th",{[Pme]:r.th},void 0,n()("div",{[Pme]:r.innerDiv},void 0,d))}function Wme(e){let{teamData:t,columnData:i,isRowHovered:o,manageTeamsStore:a}=e;window.__c={n:"Cell"};const s=(0,Hi.O7)(),r=(0,ji.yK)((e=>({td:{...jme(i),...o&&{background:e[kme]}},innerDiv:{[xme]:qme(i.colWidth),[Zme]:v.Z[Zme].UIRegular.desktop,color:e.regularTextColor,height:56,display:"flex",alignItems:Ime}})),[i,o]),l=zme,d=Boolean(i[Mme]);return n()("td",{[Pme]:r.td},void 0,n()("div",{[Pme]:r.innerDiv,[Tme]:d?l:void 0},void 0,i[wme]({[Dme]:s,data:t,manageTeamsStore:a})))}function Kme(e){let{[Pme]:t,numItemsBeforeFilter:i,numItemsAfterFilter:o,onResetFilters:a}=e;const s=0!==i;if(0!==o)return null;let r;return r=n()(f.FormattedMessage,s?{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",[Sme]:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>n()(RP.Z,{[Tme]:a},void 0,e)}}:{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",[Sme]:"Could not find any teamspaces."}),n()(Ji.Z,{isSmall:!0,[Pme]:t},void 0,r)}function zme(e,t){(0,Wue.ZP)({event:e,context:Wue.Af.ManageTeamsRowClick,callback:t})}const Gme=10,Hme={paddingLeft:Gme/2,paddingRight:Gme/2};function qme(e){return"minWidth"in e?e[xme]:e.width}function jme(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,[xme]:e.colWidth[xme]},{...Hme,...t}}const Qme=i(85).D7I,Jme=i(85).nx5,$me=i(85).nLZ,Yme=i(85).L_E;function Xme(e){let{}=e;window.__c={n:"ManageTeamsBrowser"};const{isMobile:t=!1}=(0,Hi.Fy)(),i=(0,Hi.O7)(),o=(0,qi.qz)(uce),a=(0,ji.yK)((()=>({[Yme]:{[$me]:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},subheader:{display:"flex",flexDirection:"column"}})),[]),{unarchivedTeamIds:s,archivedTeamIds:r,isLoading:l}=(0,qi.VK)((()=>{const e=R.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),c=(0,qi.VK)((()=>l?[]:vce({environment:i,teamIds:[...s,...r]})),[r,i,l,s]),u=(0,d.useCallback)((()=>Mz.openCreateTeamModal("workspace_settings")),[]);return n()("div",{style:a[Yme]},void 0,n()(Yi.Z,{large:!t,style:a.header,small:!0},void 0,n()("div",{style:a.subheader},void 0,n()(f.FormattedMessage,{id:"manageTeamsBrowser.title",[Jme]:"Manage teamspaces"}),n()(Ji.Z,{isSmall:!0,style:{[$me]:3}},void 0,n()(f.FormattedMessage,{id:"manageTeamsBrowser.subtitle",[Jme]:"Manage all teamspaces you have access here"}))),n()(Po.Z,{onClick:u,isLarge:!0,className:j.newTeam},void 0,n()(f.FormattedMessage,{id:"manageTeamsBrowser.newTeamButton.text",[Jme]:"New teamspace"}))),l?n()(ao.Z,{}):d[Qme](d.Fragment,null,n()(Uue,{teamStores:c,manageTeamsStore:o}),n()(Ome,{teamStores:c,manageTeamsStore:o})))}var epe=i(44615),tpe=i(2688);const ipe=i(85).SZh,ope=i(85).qJ8;function npe(){window.__c={n:"ManageTeamsListener"};const e=(0,Hi.O7)(),{[ope]:t,[ipe]:i}=(0,qi.VK)((()=>{const{[ope]:e,[ipe]:t}=B.default.state;return{[ope]:e,[ipe]:t}}),[]);return(0,d.useEffect)((()=>{if("loading"===R.state.loadingState||!t||!i)return;const o=tpe.Z.addListener((0,epe.getUserJoinedTeamsInSpaceEventKey)({userId:i.id,spaceId:t.id}),((t,i)=>{K({environment:e,messageStoreEmitValue:i})}),void 0,e);return function(){o&&tpe.Z.removeListener(o,e)}}),[t,i,e]),null}const ape=d.memo(npe),spe=i(85).nLZ,rpe=i(85).PXg,lpe=i(85).pkR;function dpe(e){let{title:t,description:i,[lpe]:o=!1,selected:a,onChange:s=(()=>{})}=e;return n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!o&&s(!a)},void 0,n()("div",{style:{fontSize:14,[rpe]:8,flexGrow:1}},void 0,t,i&&n()(Ji.Z,{isSmall:!0,isMultiline:!0,style:{[spe]:2,width:"80%"}},void 0,i)),n()("div",{style:{[spe]:5}},void 0,n()(Sx.Z,{on:a,[lpe]:o})))}const cpe=i(85).FTQ,upe=i(85).P3s,mpe=i(85).iRX,ppe=i(85).TJu,gpe=i(85).D7I,hpe=i(85).HzR,vpe=i(85).Dd5,fpe=i(85).pkR,ype=i(85).zDZ,bpe=i(85).uQx,Spe=i(85)._Xq,wpe=i(85).nx5,Mpe=i(85).dLQ;function kpe(){window.__c={n:"Header"};const e=(0,Hi.Fy)();return n()(Yi.Z,{large:!e[Mpe]||void 0,divider:e[Mpe]?void 0:"full"},void 0,n()(f.FormattedMessage,{id:"teamsWorkspaceSettings.title",[wpe]:"Teamspace settings"}))}function Cpe(){window.__c={n:"TeamSecuritySettings"};const e=(0,Hi.O7)(),t=(0,qi.VK)((()=>B.default.state.currentSpaceStore),[]),i=(0,qi.qz)(void 0,Ti.Z),o=(0,qi.VK)((()=>t&&i.getValueForSpace(t)),[t,i]),a=(0,qi.VK)((()=>(0,Q.isTeamspaceGuestsEnabled)()),[]),s=(null==o?void 0:o[Spe])??!1,r=(null==o?void 0:o[bpe])??!1,l=void 0===o,c=(0,d.useCallback)((()=>{t&&o&&async function(e){let{newSettingValue:t,[gce]:i,workspaceSecuritySettings:o,[pce]:a}=e;const s=n()(f.FormattedMessage,"allowTeamCreation"===t?{id:"manageTeamsHelpers.confirmChangeSecuritySetting.allowTeamCreation",[mce]:"Are you sure you want allow all members of this workspace to create teams?"}:{id:"manageTeamsHelpers.confirmChangeSecuritySetting.workspaceOwners.disableTeamCreation",[mce]:"Are you sure you want to limit teamspace creation to only workspace owners?"});!!(await w.confirmUserAction({message:s}))&&AJ.n(i,{securitySettingsState:{...o,disableTeamCreation:"disableTeamCreation"===t},[pce]:a})}({newSettingValue:s?"allowTeamCreation":Spe,environment:e,spaceStore:t,workspaceSecuritySettings:o})}),[t,s,e,o]);return d[gpe](d.Fragment,null,n()(LP.Z,{size:34}),n()(dpe,{[fpe]:l,[vpe]:c,title:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",[wpe]:"Limit teamspace creation to only workspace owners"}),[ype]:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",[wpe]:"Only allow workspace owners to create teamspaces"}),[hpe]:s}),n()(LP.Z,{size:34}),a&&d[gpe](d.Fragment,null,n()(dpe,{[fpe]:l,[vpe]:async function(){if(t&&o){if(!Boolean(o[bpe])){if(!(await w.confirmUserAction({message:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",[wpe]:"Are you sure you want to disable teamspace guests?"}),[ype]:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",[wpe]:"This action will remove all teamspace guests from the workspace."}),acceptLabel:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",[wpe]:"Disable and remove teamspace guests"})})))return}AJ.n(e,{securitySettingsState:{...o,[bpe]:!o[bpe]},spaceStore:t})}},title:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",[wpe]:"Allow teamspace owners to add teamspace guests"}),[ype]:n()(f.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",[wpe]:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),[hpe]:!r}),n()(LP.Z,{size:34})))}function Zpe(e){let{}=e;window.__c={n:"TeamsWorkspaceSettings"};const t=(0,ji.yK)((()=>({[ppe]:{paddingTop:6,paddingBottom:20}})),[]);return n()($i.Z,{},void 0,n()(kpe,{}),n()(fce.Z,{helpCenterLocation:mpe,[upe]:"teams_learn_more_workspace_settings",[cpe]:t[ppe]}),n()(aue,{}),n()(Cpe,{}),n()(Xme,{}),n()(ape,{}))}var Tpe=i(47292),Ppe=i(3924),Ipe=i(66836),Fpe=i(75493),_pe=i(2832),xpe=i(73966);i(85).ClN;const Ape=i(85).Und,Bpe=i(85).wgE,Dpe=i(85).nx5,Epe=i(85).Ubh,Lpe=i(85).dLQ;function Rpe(e){let{[Lpe]:t}=e;window.__c={n:"ManualUpdateTimezoneSetting"};const i=(0,Hi.O7)(),o=J.default.getIntl(),a=(0,qi.VK)((()=>B.default.state[Epe]),[]),{currentTimeZone:s,auto_update_disabled:r}=(0,qi.VK)((()=>{const e=null==a?void 0:a.getSettings();return{currentTimeZone:null==e?void 0:e.time_zone,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[a]),l=(0,qi.VK)((()=>_pe.S.map((e=>({key:e,label:(0,Fpe.Z)(o,e)})))),[o]);return(a&&n()(NP.Z,{[Lpe]:t,disabled:!r,title:n()(f.FormattedMessage,{id:"dateAndTimeSettings.timeZone.title",[Dpe]:"Time Zone"}),caption:n()(f.FormattedMessage,{id:"dateAndTimeSettings.timeZone.caption",[Dpe]:"Current time zone setting."}),type:"dropdown",currentOption:s??"error_fetch_timezone",options:l,onSelectOption:e=>{xpe.l6({[Bpe]:i,[Ape]:a,timeZone:e})}}))??null}function Npe(e){let{[Lpe]:t}=e;window.__c={n:"AutoUpdateTimezoneSetting"};const i=(0,Hi.O7)(),o=(0,qi.VK)((()=>B.default.state[Epe]),[]),a=(0,qi.VK)((()=>{var e;return null==o||null===(e=o.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[o])??!1,s=(0,d.useCallback)((e=>{const t=!a;xpe.k2({[Bpe]:i,[Ape]:e,disableAutoSetTimezone:t}),t||xpe.wk({[Bpe]:i,[Ape]:e})}),[i,a]),r=n()(f.FormattedMessage,{id:"dateAndTimeSettings.autoTimeZone.title",[Dpe]:"Set timezone automatically using your location"}),l=n()(f.FormattedMessage,{id:"dateAndTimeSettings.autoTimeZone.caption",[Dpe]:"Reminders, notifications and emails are delivered based on your time zone."});return(o&&n()(NP.Z,{[Lpe]:t,title:r,caption:l,type:"toggle",isOn:!a,onToggle:()=>s(o)}))??null}var Ope=i(79331),Upe=i(16347);const Vpe=i(85).D7I,Wpe=i(85).nx5,Kpe=(i(85).pzV,i(85).omX),zpe=i(85).jkI,Gpe=i(85).YZi,Hpe=i(85).SX3,qpe=i(85).dLQ,jpe=i(85).h_J;const Qpe=(0,Ppe.M)((function(e){let{[jpe]:t,userEmailDomainSettings:i}=e;window.__c={n:"UserSettings"};const{isPhone:o,isIOS:a,[qpe]:s}=(0,Hi.Fy)(),r=(0,Hi.O7)(),l=(0,qi.VK)((()=>Qi.Z.state.online),[]),c=(0,qi.VK)((()=>s&&t?(0,Ope.E)({isPhone:o,isIOS:a,[jpe]:t,userEmailDomainSettings:i}):(0,Ope.Z)({environment:r})),[r,s,o,a,t,i]),u=(0,qi.VK)((()=>Z.default.checkGate(Hpe)),[]),m=[u?{key:"timezone-auto",[Gpe]:()=>n()(Npe,{[qpe]:s})}:void 0,u?{key:"timezone-manual",[Gpe]:()=>n()(Rpe,{[qpe]:s})}:void 0].filter(x.isDefined),p=[(0,qi.VK)((()=>(0,Ipe.h)(r)),[r])?{key:"cookies",[Gpe]:()=>n()(Ipe.Z,{[qpe]:s})}:void 0,{key:"view-history",[Gpe]:()=>n()(Upe.H,{[qpe]:s})}].filter(x.isDefined);return l?n()($i.Z,{disableScroller:s},void 0,n()(Yi.Z,{large:!s,divider:"full"},void 0,n()(f.FormattedMessage,{id:"mySettings.settingsSection.title",[Wpe]:"My settings"})),n()(hJ.O,{items:c}),u&&d[Vpe](d.Fragment,null,n()(LP.Z,{size:48,isHidden:!0}),n()(Yi.Z,{large:!s,divider:"full"},void 0,n()(f.FormattedMessage,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",[Wpe]:"Date & time"})),n()(hJ.O,{items:m})),n()(LP.Z,{size:48,isHidden:!0}),n()(Yi.Z,{large:!s,divider:"full"},void 0,n()(f.FormattedMessage,{id:"mySettings.privacySection.title",[Wpe]:"Privacy"})),n()(hJ.O,{items:p})):n()($i.Z,{},void 0,n()(Ji.Z,{isSmall:!0,style:{textAlign:zpe}},void 0,n()(f.FormattedMessage,{[Wpe]:Kpe,id:"mySettings.goOnline.prompt"})))})),Jpe=i(85).auS,$pe=i(85).uQx,Ype=i(85).sSK,Xpe=i(85).lMF,ege=i(85)._Xq,tge=i(85).fim,ige=i(85).ciu,oge=i(85).vjF,nge=i(85).jA,age=i(85).set,sge=i(85).Go2,rge=i(85).tIL,lge=i(85).LCr,dge=i(85).JJj,cge=i(85).Ubh,uge=i(85).g7N,mge=i(85).h8z,pge=i(85).UPJ,gge=i(85).ChN,hge=i(85).B8U,vge=i(85).XCs,fge=i(85).YDv,yge=i(85).jkI,bge=i(85).H1U,Sge=i(85).EMU,wge=i(85).sM5,Mge=i(85).ShP,kge=i(85).BQ6,Cge=i(85).BDC,Zge=i(85).NF1,Tge=i(85).nAm,Pge=i(85).Yzm,Ige=i(85).dq8,Fge=i(85).SK6,_ge=i(85)._Ce,xge=i(85).c_6,Age=i(85).ipJ,Bge=i(85)._kV,Dge=i(85).PG2,Ege=i(85).wJk,Lge=i(85).xU7,Rge=i(85).fCB,Nge=i(85).MBB,Oge=i(85).C1,Uge=i(85).OK,Vge=i(85).Wp_,Wge=i(85).qWq,Kge=i(85).JJs,zge=i(85).tBn,Gge=i(85).PPD,Hge=i(85).sAV,qge=i(85).XWj,jge=i(85).H$J,Qge=i(85).d6L,Jge=i(85).oTL,$ge=i(85).Pxe,Yge=i(85).o63,Xge=i(85).cfO,ehe=i(85).G3i,the=i(85).SZh,ihe=i(85).GiO,ohe=i(85).EKt,nhe=i(85).unR,ahe=i(85).g65,she=i(85).TaW,rhe=i(85).t$F,lhe=i(85).P0R,dhe=i(85).Wqi,che=i(85).dLQ,uhe=i(85).Gnd,mhe=i(85).Au,phe=i(85).pxq,ghe=i(85).wgE,hhe=i(85).E0z,vhe=i(85).qJ8,fhe=i(85).t5q,yhe=i(85).yKO,bhe=i(85).D7I,She=i(85).QmD,whe=i(85).Vy4,Mhe=i(85).z7d,khe=i(85).xm3,Che=i(85).l5r,Zhe=i(85).dcu,The=i(85).h$q,Phe=i(85).Jg7,Ihe=i(85).Bn$,Fhe=i(85).qaU,_he=i(85).L7u,xhe=i(85).VJq,Ahe=i(85).bsu,Bhe=i(85).w0e,Dhe=i(85).U$X,Ehe=i(85).iy2,Lhe=i(85).uXF,Rhe=i(85).VIS,Nhe=i(85).sT5,Ohe=i(85).aCs,Uhe=i(85).rOU,Vhe=i(85).d4f,Whe=i(85).nx5,Khe=(0,f.defineMessages)({dialogLabel:{id:"spaceSettings.dialogLabel",[Whe]:"Settings & members"}});class zhe extends c.Z{constructor(){super(...arguments),this[Vhe]=void 0,this[Uhe]=!1,this.storeTypes={[Ohe]:Di,[Nhe]:Vi,[Rhe]:Ti.Z,samlSettingsStore:Zi,[Lhe]:Ri},this[Ehe]=()=>{const e={[Dhe]:this.renderProfile,[Bhe]:this.renderNotificationsAndSettings,[Ahe]:this.renderMySettings,[xhe]:this.renderMyNotifications,[_he]:this.renderLanguageAndRegion,[Fhe]:this.renderConnectedApps,debug_zone:this.renderDebugZone,[Ihe]:this.renderSettings,teams:this.renderTeamsSettings,members:this.renderMembers,[Phe]:this.renderAnalytics,plans:this.renderPlans,billing:this.renderBilling,[The]:this.renderSubscription,security:this.renderSecurity,[Zhe]:this.renderIdentityProvisioning,[Che]:this.renderAdminContentSearch,[khe]:this.renderIntegrations,[Mhe]:this.renderExperiments,audit_log:this.renderAuditLog,imports:this.renderImports};return n()(qI.Z,{capture:!0,allowEsc:!0,render:t=>n()(jI.Z,{capture:!0,ignoreBlockSelection:!0,[yhe]:!0,[fhe]:!1,render:()=>d[bhe](P$,s()({sidebar:this.renderSidebar()},t),e[Wi.Z[She][whe]]())})})},this.renderTabDot=e=>{const{[vhe]:t}=B.default[She];return"members"===e&&this[ghe][hhe].isDesktop&&null!=t&&t[phe]()&&(0,Q.enableRequestMembership)()&&zi.Z[She].count>0?n()(Cz.z,{color:this[mhe].redBadgeBackground}):null},this.renderProfile=()=>n()(Yie,{isEducationPlan:ee.isEducationPlan(Ki.default[She].data),[Nhe]:this[uhe][Nhe]}),this.renderNotificationsAndSettings=()=>n()(mJ.Z,{[che]:!1}),this.renderLanguageAndRegion=()=>n()(uJ,{}),this.renderSettings=()=>n()($6,{[dhe]:this[lhe][dhe],[Ohe]:this[uhe][Ohe],[Rhe]:this[uhe][Rhe]}),this.renderMySettings=()=>n()(Qpe,{}),this.renderMyNotifications=()=>n()(xJ,{}),this.renderTeamsSettings=()=>n()(Zpe,{}),this.renderMembers=()=>n()(Y6.Z,{store:this[lhe][dhe],unreadAccessRequests:zi.Z[She].count}),this[rhe]=()=>{var e;const{[hhe]:t}=this[ghe];return!t[che]&&"enterprise"===(null===(e=this[lhe][dhe])||void 0===e?void 0:e[she]())},this.shouldRenderAdminContentSearchTab=()=>{const{[hhe]:e,[ahe]:t}=this[ghe],{[dhe]:i}=this[lhe],o=i.getModel();return Z.default[nhe]("admin_content_search_tab")&&!e[che]&&t.id&&o&&(0,u.H)({spaceModel:o,userId:t.id})},this.renderAnalytics=()=>{const{[dhe]:e}=this[lhe];return this[rhe]()?n()(h2,{[dhe]:e}):null},this.renderPlans=()=>{const{data:e}=Ki.default[She],{data:t}=Gi.Z[She];if(e)return n()(Hde,{[dhe]:this[lhe][dhe],upcomingInvoiceData:t,[Rhe]:this[uhe][Rhe],data:e})},this.renderBilling=()=>{const{data:e}=Ki.default[She],{data:t}=Gi.Z[She];if(!e)return null;const i="unsubscribed_admin"===e.type&&e[ohe]&&(0,h.E3)(e[ohe].stripe.addOns);if("subscribed_admin"===e.type||i){var o;const i=null===(o=e[ohe])||void 0===o?void 0:o.stripe;return i?n()(cre,{[dhe]:this[lhe][dhe],subscriptionData:e,upcomingInvoiceData:t,[ohe]:i}):null}return e&&"unsubscribed_admin"===e.type?n()(bre,{[dhe]:this[lhe][dhe],data:e}):void 0},this.renderExperiments=()=>n()($i.Z,{},void 0,n()(JI.Ub,{})),this.shouldRenderMembersPrompt=()=>{var e,t;const{[ihe]:i,[vhe]:o,[the]:n}=B.default[She];if(null==n||!n.id)return!1;if(null==o||!o[ehe]())return!1;if(!(0,te.isEnterpriseTier)()||!(0,g.wv)({[Xge]:o[Yge]()},n.id)||!(0,Y.shouldShowMembershipAdmin)())return!1;const a=null==i?void 0:i[$ge]();return"dismissed"!==(null==a||null===(e=a[Jge])||void 0===e?void 0:e[Qge])&&"hidden"!==(null==a||null===(t=a[Jge])||void 0===t?void 0:t[Qge])&&(F.W7(this[ghe]),!0)},this.shouldRenderDomainClaimPrompt=()=>{var e,t;const{[ihe]:i,[vhe]:o,[the]:n}=B.default[She];if(null==n||!n.id)return!1;if(null==o||!o[ehe]())return!1;if(!(0,te.isEnterpriseTier)()||!(0,g.wv)({[Xge]:o[Yge]()},n.id))return!1;const a=null==i?void 0:i[$ge]();return"dismissed"!==(null==a||null===(e=a[jge])||void 0===e?void 0:e[Qge])&&"hidden"!==(null==a||null===(t=a[jge])||void 0===t?void 0:t[Qge])&&(F.cm(this[ghe]),!0)},this.shouldRenderAnalyticsPrompt=()=>{var e,t;const{[ihe]:i,[vhe]:o,[the]:n}=B.default[She];if(!this[rhe]())return!1;if(null==n||!n.id)return!1;if(null==o||!o[ehe]())return!1;const a=null==i?void 0:i[$ge]();return"dismissed"!==(null==a||null===(e=a[qge])||void 0===e?void 0:e[Qge])&&"hidden"!==(null==a||null===(t=a[qge])||void 0===t?void 0:t[Qge])&&(F.lo(this[ghe]),!0)},this.shouldRenderMfaPrompt=()=>{var e,t;const{[ihe]:i,[vhe]:o,[the]:n}=B.default[She];if(null==n||!n.id)return!1;if(null==o||!o[ehe]())return!1;const a=null==i?void 0:i[$ge]();return"dismissed"!==(null==a||null===(e=a[Hge])||void 0===e?void 0:e[Qge])&&"hidden"!==(null==a||null===(t=a[Hge])||void 0===t?void 0:t[Qge])&&("off"===this[uhe][Nhe][She].accountSettings.mfaStatus&&(F.GZ(this[ghe]),!0))},this.shouldRenderAuditLog=()=>{const{[hhe]:e}=this[ghe];return!e[che]&&(0,te.isEnterpriseTier)()&&this[lhe][dhe][Gge]()},this.renderAuditLog=()=>this.shouldRenderAuditLog()?d[bhe](d[zge],null,n()($i.Z,{},void 0,n()(tT,{[dhe]:this[lhe][dhe]}))):null,this.renderSubscription=()=>n()($i.Z,{},void 0,n()(jde.Z,{})),this.renderImports=()=>n()($i.Z,{},void 0,n()(zH,{})),this.renderConnectedApps=()=>n()(Tpe.Z,{location:"settings-page"}),this.renderDebugZone=()=>n()(goe,{store:this[lhe][dhe]}),this.renderSecurity=()=>n()(f$,{[dhe]:this[lhe][dhe],[Rhe]:this[uhe][Rhe],[Kge]:this[lhe][Kge]}),this.renderIdentityProvisioning=()=>n()(vK,{[dhe]:this[lhe][dhe],samlConfigStore:this[uhe].samlSettingsStore,domainSettingsStore:this[uhe][Lhe],[Kge]:this[lhe][Kge]}),this.renderAdminContentSearch=()=>n()(pp,{[dhe]:this[lhe][dhe],[Kge]:this[lhe][Kge]}),this.renderIntegrations=()=>n()(HI,{[dhe]:this[lhe][dhe],[Kge]:this[lhe][Kge]}),this.renderNewFeaturePrompt=()=>{if(this.shouldRenderAnalyticsPrompt()){const{[vhe]:e}=B.default[She],t=null!=e&&e[Gge]()?n()(f.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",[Whe]:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):n()(f.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",[Whe]:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return n()(C$,{[Ege]:()=>F.TY(this[ghe]),[Dge]:()=>{this[Wge]((()=>{Wi.Z[Vge]({...Wi.Z[She],[whe]:Phe,[Uge]:void 0}),this[uhe][Lhe][Oge](),S.trackToggleSettingsTab(this[ghe],{tab:Phe}),F.pE(this[ghe])}))},onView:t=>{"enterprise"===(null==e?void 0:e[she]())&&F.pE(t)},onClickLearnMore:()=>{const e=(0,X.getLocalizedUrl)(Nge);M[Rge]({[ghe]:this[ghe],url:e})},[Bge]:t,title:n()(f.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",[Whe]:"New workspace analytics"}),buttonText:n()(f.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",[Whe]:"View metrics"}),icon:m.Z.magnifyingGlass(this[Lge]())})}if(this.shouldRenderMfaPrompt())return n()(C$,{[Dge]:()=>{this[Wge]((()=>{Wi.Z[Vge]({...Wi.Z[She],open:!0,[whe]:Dhe,[Uge]:void 0,highlightedSetting:Wi.R.TwoStepVerification}),S.trackToggleSettingsTab(this[ghe],{tab:Dhe})}))},onView:F.E6,[Ege]:()=>F.ZJ(this[ghe]),onClickLearnMore:()=>{const e=(0,X.getLocalizedUrl)("guides.mfa");M[Rge]({[ghe]:this[ghe],url:e})},[Bge]:n()(f.FormattedMessage,{id:"mfaSettingsPrompt.description",[Whe]:"2-step verification, also known as 2FA or MFA, is now available. Add a secondary method of verification used during login."}),title:n()(f.FormattedMessage,{id:"mfaSettingsPrompt.title",[Whe]:"Add an extra layer of security to your account."}),buttonText:n()(f.FormattedMessage,{id:"mfaSettingsPrompt.button.label",[Whe]:"Enable 2-step verification"}),icon:m.Z.lockedFilled(this[Lge]())})},this.handleModalOpen=()=>{_.refresh(this[ghe]),this[Age](),y.loadUnreadSpaceMembershipRequestCount({[ghe]:this[ghe],spaceId:this[lhe][dhe].id,[Gge]:this[lhe][dhe][Gge]()})},this[xge]=()=>this[Wge]((()=>{Wi.Z[Vge]({...Wi.Z[She],open:!1}),Ii[Oge](),this[uhe][Lhe][Oge](),this[Age](),zi.Z[Oge]()}))}async willMount(e){super.willMount(e);const{[dhe]:t}=this[lhe],{[Rhe]:i}=this[uhe],o=i[_ge](t);o&&i[Vge](o),await I(this[ghe],this[uhe][Nhe])}[Fge](e){super[Fge](e);const{open:t}=Wi.Z[She],i=Wi.Z[She];this[Uhe]===t&&l()[Ige](this[Vhe],i)||t&&S.trackOpenSettings(this[ghe],{tab:i[whe],from:i.openedFrom}),this[Uhe]=t,this[Vhe]=l().clone(i)}renderComponent(){const{open:e}=Wi.Z[She];return n()(QI.Z,{ariaLabel:J.default[Pge](Khe.dialogLabel),open:e,innerStyle:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:Tge,[Zge]:5,maxHeight:715},onOpen:this.handleModalOpen,[Ege]:this[xge],render:this[Ehe],className:j.spaceSettings})}renderSidebar(){const{[dhe]:e}=this[lhe],{data:t}=Ki.default[She],i=ee[Cge](t),o=(0,JI.mS)(),a=moe().length>0,s=e[Gge]();return n()("div",{[kge]:zhe.sidebarStyle},void 0,n()("div",{[kge]:zhe.sidebarTabsStyle},void 0,n()("div",{},void 0,n()("div",{[kge]:this.getSidebarHeader()},void 0,n()(f.FormattedMessage,{id:"spaceSettings.sidebar.personalSettingsSection.title",[Whe]:"Account"})),this.renderUserDetails(),this[Mge](Dhe),(0,$.rB)()?d[bhe](d[zge],null,this[Mge](Ahe),this[Mge](xhe)):d[bhe](d[zge],null,this[Mge](Bhe)),this[Mge](Fhe),this[Mge](_he),a&&this[Mge]("debug_zone"),n()(LP.Z,{size:18,isHidden:!0}),n()("div",{[kge]:this.getSidebarHeader()},void 0,n()(f.FormattedMessage,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",[Whe]:"Workspace"})),this[Mge](Ihe),e[Gge]()&&(0,A.bq)()&&this[Mge]("teams"),e.canRead()&&this[Mge]("members"),this[rhe]()&&this[Mge]("analytics"),e.canRead()&&this[Mge]("plans"),this.shouldRenderBillingTab(i)&&this[Mge]("billing"),i&&this[Mge]("subscription"),e[Gge]()&&this[Mge]("security"),e[Gge]()&&this[Mge]("identity_provisioning"),this.shouldRenderAdminContentSearchTab()&&this[Mge]("admin_content_search"),s&&this[Mge]("integrations"),(0,q.c)()&&!this[ghe][hhe][che]&&n()("span",{[Dge]:()=>{const e=(0,p.default)();ki.Z[Vge]({flowId:e}),S.trackOpenImportModal(this[ghe],{from:"settings",flowId:e})}},void 0,this[Mge]("imports")),this.shouldRenderAuditLog()&&this[Mge]("audit_log"),o&&this[Mge]("experiments"),e.canRead()&&n()(iT.Z,{source:"settings"}),e.canRead()&&!(0,h.E3)(null==t?void 0:t.addOns)&&n()(qde.Z,{source:"settings"}))),this.renderNewFeaturePrompt())}renderUserDetails(){const e=(0,H.getCurrentUserStore)(this[ghe]),t={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,[Kge]:e};return n()("div",{[kge]:{[wge]:Sge,[bge]:yge,height:44,[fge]:12,[vge]:12}},void 0,n()("div",{[kge]:this[hge]()},void 0,d[bhe](es.Z,t)),e?n()("div",{},void 0,this.renderUserName(e),e.getEmail()&&n()(Ji.Z,{isSmall:!0},void 0,e.getEmail())):n()(f.FormattedMessage,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",[Whe]:"Me"}))}renderUserName(e){const t=J.default.getIntl(),i=e.getFullName(t);return i&&n()(Ji.Z,{[kge]:{[gge]:v.Z[gge].medium}},void 0,i)}[Mge](e){const t=Wi.Z[She][whe]===e,i=Boe[e](this[ghe]),o=Doe[e](),a=Eoe[e]();return n()(nl.Z,{hovered:t,[kge]:{[wge]:Sge,[bge]:yge,[pge]:mge,[fge]:12,[vge]:12,[Zge]:3,marginTop:1,[uge]:1,minHeight:27},[Dge]:i=>{t||this[Wge]((()=>{Wi.Z[Vge]({...Wi.Z[She],[whe]:e,[Uge]:void 0}),this[uhe][Lhe][Oge](),S.trackToggleSettingsTab(this[ghe],{tab:e})}))}},void 0,n()("div",{[kge]:{[wge]:Sge,[bge]:yge,...t&&{[gge]:v.Z[gge].semibold}}},void 0,n()("div",{[kge]:this[hge]()},void 0,i),n()(Ji.Z,{isMultiline:!0},void 0,o),a),this.renderTabDot(e))}shouldRenderBillingTab(e){var t;const{[dhe]:i}=this[lhe],{data:o}=Ki.default[She];return!(!o||e||!i[Gge]())&&("subscribed_admin"===o.type||(!("unsubscribed_admin"!==o.type||!(0,h.E3)(null===(t=o[ohe])||void 0===t?void 0:t.stripe.addOns))||!!(0,ee.hasPaymentMethod)(o)))}async[Wge](e){const{[dhe]:t}=this[lhe],{[Nhe]:i}=this[uhe],{[the]:o,[cge]:a}=B.default[She];if(!o||!a)throw new Error("No user or settings store.");const s=n()(f.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",[Whe]:"Your changes have not been saved. Save changes?"}),r=n()(f.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",[Whe]:"Yes"}),d=n()(f.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",[Whe]:"No"}),{[whe]:c}=Wi.Z[She];if("profile"===c){if(!l()[Ige](i[She],i.getValueForUser(o,a,J.default.getIntl()))){const{profilePhoto:t,name:o,startDayOfWeek:r}=i[She];return o?w.showDialog({message:s,showCancel:!0,keepFocus:!0,items:[{label:n()(f.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",[Whe]:"Update"}),color:"blue",onAccept:()=>{z[dge]({userAction:"SpaceSettings.attemptCloseCurrentTab",[ghe]:this[ghe],perform:e=>{const{[the]:i}=B.default[She];if(i&&b.A({[Kge]:i,data:{name:o,profilePhoto:t},[lge]:e}),a){const t=a[$ge]();(null==t?void 0:t[rge])!==r&&G.updateUserSettings({userSettingsStore:a,data:{[rge]:r},[lge]:e})}}}),e()}}],handleCancel:()=>{e()}}):w.showErrorMessage(n()(f.FormattedMessage,{id:"profileSettings.personalInfoSection.nameMissing.message",[Whe]:"Please fill in name."})),!0}e()}else if("settings"===c&&t.canEdit()){const{[Ohe]:i}=this[uhe],{[Rhe]:o}=this[uhe],n=!l()[Ige](o[She],o[_ge](t)),a=!l()[Ige](i[She],i[_ge](t));if(n||a){if(await w.confirmUserAction({message:s,acceptLabel:r,cancelLabel:d})){if(!(await k.canSubmitChangesFromSpaceBasicSettingsStore({[ghe]:this[ghe],spaceId:t.id,[Ohe]:i})))return!1;a&&k.updateSpaceFromSpaceBasicSettingsStore({[ghe]:this[ghe],[dhe]:this[lhe][dhe],[Ohe]:i}),n&&this[sge](o),e()}else e();return!0}e()}else if("audit_log"===c)this[Age](),e();else if("analytics"===c)Ai[Oge](),e();else if("plans"===c&&t[Gge]()){const{[Rhe]:i}=this[uhe],o=i[_ge](t);!l()[Ige](i[She],i[_ge](t))&&o&&(i[Vge](o),this[sge](i)),e()}else"teams"===c?(D.Z.reset(),R.reset(),e()):e();return!1}[Age](){fi[Oge](),Mi[Oge]()}[sge](e){const{[age]:t,[nge]:i,[oge]:o,disableExport:n,[ige]:a,[tge]:s,[ege]:r,[Xpe]:l,[Ype]:d,enableAiFeature:c,[$pe]:u}=e[She];z[dge]({userAction:"SpaceSettings.attemptCloseCurrentTab",[ghe]:this[ghe],perform:e=>{k.updateSecuritySettings({[ghe]:this[ghe],[age]:t,[nge]:i,[oge]:o,disableExport:n,[ige]:a,[tge]:s,[lge]:e,[dhe]:this[lhe][dhe],[ege]:r,[Xpe]:l,[Ype]:d,enableAiFeature:Boolean(c),[$pe]:u})}})}getSidebarHeader(){return{fontSize:12,lineHeight:1,[uge]:1,color:this[mhe].mediumTextColor,[gge]:v.Z[gge].semibold,[bge]:yge,[wge]:Sge,height:24,[fge]:12,[vge]:11,textOverflow:"ellipsis",overflow:Tge}}[hge](){return{width:20,height:20,marginRight:8,color:this[mhe][Jpe],fill:this[mhe][Jpe]}}[Lge](){return{width:14,height:14,color:this[mhe][Jpe]}}}zhe.displayName="SpaceSettings",zhe[mhe]=void 0,zhe.sidebarStyle={[wge]:Sge,flexDirection:"column",height:"100%",[pge]:mge,paddingTop:10,[fge]:4,[vge]:4},zhe.sidebarTabsStyle={overflow:"auto",paddingBottom:12};const Ghe=zhe},13787:(e,t,i)=>{i.r(t),i.d(t,{default:()=>oe});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(49085),l=i(8848),d=i(3909),c=i(89101),u=i(82990),m=i(5366),p=i(54642),g=i(28020),h=i(33846),v=i(92083),f=i(9209),y=i(42922),b=i(74194),S=i(53953),w=i(42402);const M=i(85).a3v,k=i(85).dMt,C=i(85).TEz,Z=i(85).XNW,T=i(85).cZW,P=i(85).X_m,I=i(85).PXg,F=i(85).PG2,_=i(85).ChN,x=i(85).Au,A=i(85).wuN,B=i(85).UA5,D=i(85).AIq,E=i(85).EMU,L=i(85).sM5,R=i(85).gQb,N=i(85).Exd,O=i(85).BQ6,U=i(85).nLZ,V=i(85).dU4,W=i(85).nx5,K=i(85).Yzm,z=i(85).wgE,G=i(85).loK,H=i(85).QmD,q=i(85).Gnd,j=i(85).C$B,Q=i(85).OK,J=i(85).U$X,$=i(85).Vy4,Y=i(85).Wp_,X=i(85).c_6,ee=i(85).wfR,te=i(85).Tnw;class ie extends s.Z{constructor(){super(...arguments),this.storeTypes={[te]:h.Z,promoError:r.default[ee](void 0)},this[X]=()=>{f.Z[Y]({open:!1})},this.handleChangeEmail=()=>{this[X](),v.Z[Y]({open:!0,openedFrom:"upsell",[$]:J,[Q]:void 0,highlightedSetting:void 0})},this[j]=e=>{this[q][te][Y]({...this[q][te][H],[G]:e.target.value.toUpperCase()}),this[q].promoError[Y](void 0)},this.handleSubmitPromoCode=async()=>{const e=this[q][te][H][G];if(e){const t=await p.getPromoCode(this[z],{code:e});"failed"!==t.type&&t.data.promo?f.Z[H].open&&(await f.Z[H].handlePromoCode(this[q][te][H][G]),this[X]()):this[q].promoError[Y](this.props.intl[K]({[W]:"Promo code {code} does not exist",id:"studentNotEligibleModal.numberedList.item2.promocode.errorMessage"},{code:e}))}}}renderComponent(){const{open:e}=f.Z[H];return n()(S.Z,{open:e,innerStyle:ie[V],preventHideChildrenWhileOpening:!0,render:()=>this.renderModalContents(),onDismiss:this[X]})}renderModalContents(){return n()("div",{[O]:{[N]:14}},void 0,n()("div",{},void 0,n()(m.FormattedMessage,{[W]:"<p>Unfortunately you are not eligible for a free Education plan if you use this email address.</p><p>K-12 students, K-12 educators, and personal email addresses such as Gmail and Outlook are not eligible to receive the <pricinglink>Education Plan</pricinglink> for free, but anyone is welcome to use the <pricinglink>Free Plan</pricinglink> for free with unlimited storage.</p>",id:"studentNotEligibleModal.header",values:{br:n()("br",{}),p:e=>n()("p",{[O]:{[U]:0,marginBottom:8}},void 0,1===e.length?e[0]:a.Children.toArray(e)),pricinglink:e=>n()(w.Z,{external:!0,href:c.AR[R]},void 0,e)}})),this.renderSchoolEmailCodePrompt(),this.renderPromoCode(),this.renderContactUs())}renderSchoolEmailCodePrompt(){const e=(0,g.getCurrentUserStore)(this[z]);return n()("div",{[O]:{[L]:E,[U]:16}},void 0,n()("div",{[O]:{width:18,[D]:0,[B]:this[x][A]}},void 0,n()(m.FormattedMessage,{[W]:"1.",id:"studentNotEligibleModal.numberedList.firstItem"})),n()("div",{[O]:{flexGrow:1}},void 0,n()("div",{[O]:{[B]:this[x][A]}},void 0,n()(m.FormattedMessage,{[W]:"Your current email is:",id:"studentNotEligibleModal.numberedList.changeEmailItem.message"})),n()("div",{[O]:{[_]:u.Z[_].medium,[U]:0}},void 0,e&&e.getEmail()),n()("div",{[O]:{[B]:this[x][A],[U]:4}},void 0,n()(m.FormattedMessage,{[W]:"Thousands of university, college, and post-secondary school domains are already eligible, not just .edu emails!",id:"studentNotEligibleModal.numberedList.changeEmailItem.message2"})),n()(y.Z,{[O]:{[U]:12},[F]:this.handleChangeEmail,isLarge:!0},void 0,n()(m.FormattedMessage,{[W]:"Change email",id:"studentNotEligibleModal.numberedList.changeEmailItem.button.label"}))))}renderPromoCode(){const e=this[q].promoError[H],t=this.props.intl[K]({[W]:"Enter code…",id:"studentNotEligibleModal.numberedList.item2.promocodePlaceholder"});return n()("div",{[O]:{[L]:E,[U]:16}},void 0,n()("div",{[O]:{width:18,[D]:0,[B]:this[x][A]}},void 0,n()(m.FormattedMessage,{[W]:"2.",id:"studentNotEligibleModal.numberedList.secondItem"})),n()("div",{[O]:{flexGrow:1}},void 0,n()("div",{[O]:{[B]:this[x][A]}},void 0,n()(m.FormattedMessage,{[W]:"Have a student promo code?",id:"studentNotEligibleModal.numberedList.promoCodeItem.message"})),n()("div",{[O]:{[L]:E,[U]:12}},void 0,n()(b.Z,{[O]:{[I]:8,[P]:32},value:this[q][te][H][G],onChange:this[j],onSubmit:this.handleSubmitPromoCode,[T]:t}),n()(y.Z,{[F]:this.handleSubmitPromoCode,disabled:!this[q][te][H][G],isLarge:!0},void 0,n()(m.FormattedMessage,{[W]:"Submit",id:"studentNotEligibleModal.numberedList.promoCodeItem.submitButton"}))),n()("div",{[O]:{[B]:l.ZP.red,[N]:12,[U]:4,[Z]:8,[P]:20}},void 0,e)))}renderContactUs(){return n()("div",{[O]:{[L]:E,alignItems:"center",[B]:this[x][C],borderTop:`1px solid ${this[x][k]}`,paddingTop:14}},void 0,d.Z.help({width:14,[U]:1,[I]:6,fill:this[x][M]})," ",n()("div",{},void 0,n()(m.FormattedMessage,{[W]:"Have questions about this? <inlinelink>More info & FAQs</inlinelink>.",id:"studentNotEligibleModal.contactUsSection.message",values:{inlinelink:e=>n()(w.Z,{href:"https://www.notion.so/Notion-for-students-teachers-adc631df15ee4ab9a7a33dd50f4c16fe",external:!0},void 0,e)}})))}}ie.displayName="StudentNotEligibleModal",ie[V]={padding:"24px 36px 24px",minWidth:300,maxWidth:400};const oe=(0,m.injectIntl)(ie)},6202:(e,t,i)=>{i.d(t,{Z:()=>v});var o=i(77094),n=i.n(o),a=(i(67294),i(83355)),s=i(8848),r=i(87279),l=i(42922),d=i(64921),c=i(28992);const u=i(85).pkR,m=i(85).P0R,p=i(85).PG2,g=i(85).LX6;class h extends a.Z{renderComponent(){return n()(c.Z,{title:this[g]()})}[g](){const{isMobile:e}=this.environment.device;return e?n()(d.Z,{[p]:this[m][p],mobileFeedback:!0,[u]:this[m][u],style:h.buttonMobileStyle},void 0,this[m].title):n()(l.Z,{[p]:this[m][p],[u]:this[m][u],style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"}},void 0,this[m].title)}}h.displayName="SubmitButtonMenuItem",h.contextTypes={...r.mw,...a.w},h.buttonMobileStyle={width:"100%",color:s.ZP.blue};const v=h},30676:(e,t,i)=>{i.d(t,{F:()=>u});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(81954),d=i(52275),c=i(93686);function u(e){window.__c={n:"TeamMenuItem"};const{teamStore:t}=e,{name:i}=(0,l.VK)((()=>({name:t.getName()})),[t]);return r.createElement(d.Z,n()({},e,{icon:s()(c.p,{size:14,store:t,disabled:!0}),title:i}))}},69735:(e,t,i)=>{i.r(t),i.d(t,{TopbarMoreMenu:()=>On});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),l=i(24405),d=i(5366),c=i(97464),u=i.n(c),m=i(13991),p=i(15145),g=i(41432),h=i(3909),v=i(98459),f=i(70203),y=i(82990),b=i(93286),S=i(62967),w=i(50906),M=i(43132),k=i(79257),C=i(47307),Z=i(54532),T=i(3297),P=i(96802),I=i(94419),F=i(72711),_=i(19785),x=i(5978),A=i(52801),B=i(21325),D=i(12359),E=i(29919),L=i(93405),R=i(72495),N=i(8848),O=i(98742),U=i(64921),V=i(58032),W=i(64369);const K=i(85).D7I,z=i(85).nLZ,G=i(85).dLQ,H=i(85).UPJ,q=i(85).GGR;function j(e,t){let{id:i,caption:o,focused:r,isActive:d,onClick:c,onMouseDown:m,[q]:p,onMouseLeave:g,role:h,style:v,tooltip:f,ignoreLocalHoverState:y,disallowTabbing:b}=e;window.__c={n:"FontMenuItem"};const S=(0,s.Fy)(),w=(0,l.yK)((()=>({optionItem:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:34,[H]:"flex-end"},button:{width:"100%",...S[G]?{padding:16,paddingTop:20,transition:"color 300ms, border 300ms",lineHeight:1}:{padding:6,paddingTop:10,borderRadius:3,transition:"color 300ms, border 300ms",lineHeight:1},[H]:"center",color:d?N.ZP.blue:"inherit"}})),[d,S]);return n()(V.Z,{renderTooltip:()=>f,placement:V.Z.Placement.Bottom,delayThreshold:80,render:e=>{const s=(0,O.Z)(e,{[q]:p,onMouseLeave:g}),{onMouseDown:l,...d}=s;return a[K](U.Z,u()({},d,{id:i,role:h,ref:t,mobileFeedback:S[G],onClick:c,onMouseDown:s.onMouseDown||m,hovered:r,style:w.button,ignoreLocalHoverState:y,disallowTabbing:b,className:"notranslate"}),n()("div",{style:w.optionItem},void 0,n()("div",{style:{...v,height:25}},void 0,"Ag"),n()(W.Z,{isSmall:!0,style:{[z]:4}},void 0,o)))}})}const Q=a.forwardRef(j);var J=i(83355),$=i(87279);const Y=i(85).wgE,X=i(85).PXg,ee=i(85).XNW,te=i(85).h8z,ie=i(85).UPJ;class oe extends J.Z{constructor(){super(...arguments),this.desktopStyle={display:"flex",[ie]:te,[ee]:14,[X]:14}}renderComponent(){return a.createElement(R.Z,this.props,n()("div",{style:this[Y].device.isMobile?this.getMobileStyle():this.desktopStyle},void 0,this.props.children))}getMobileStyle(){return{display:"flex",[ie]:"space-around",boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,background:this.theme.popoverBackground}}}oe.displayName="FontSectionMenuItem",oe.contextTypes={...$.mw,...J.w};const ne=oe;var ae=i(27006),se=i(77420),re=i(97880),le=i(39248),de=i(74181),ce=i(21202),ue=i(15070),me=i(79315),pe=i(52275),ge=i(70301);class he extends J.Z{renderComponent(){const{bot:e}=this.props,{currentUserRootStore:t}=me.default.state;if(e&&t)return a.createElement(pe.Z,u()({},this.props,{icon:n()(ge.Z,{botValue:e}),title:(0,ue.Mh)(e)}))}}he.displayName="BotMenuItem",he.contextTypes={...$.mw,...J.w};const ve=he;var fe=i(68894),ye=i(68785),be=i(28992),Se=i(43765),we=i(31278),Me=i(76798),ke=i(84015),Ce=i(31076),Ze=i(26825),Te=i(48019),Pe=i(78140),Ie=i(40721),Fe=i(95030);const _e=i(85).j7K,xe=i(85).BCA,Ae=i(85).D7I,Be=i(85).xOW,De=(0,a.forwardRef)((function(e,t){const{context:i,parent:o,isSharedDirectly:l,botStore:d,botPermissionSourcePage:c,originConnectionLabel:m,...p}=e,g=(0,s.O7)(),h=(0,r.VK)((()=>me.default.state.currentSpaceStore),[]),v=i.blocks[0],f=(0,r.VK)((()=>v.canAdmin()&&(null==h?void 0:h.canRead())),[v,h]),{botCapabilities:y,botName:b}=(0,r.VK)((()=>({botCapabilities:d.getCapabilities(),botName:d.getName()})),[d]);return a[Ae](Fe.Z,u()({},p,{key:d.id,renderOrigin:e=>a[Ae](pe.Z,u()({},e,{title:m,icon:n()(ge.Z,{botStore:d,showActiveDot:!0,style:{position:Be}})})),renderExtension:(e,t)=>{let s;return s=g.device.isPhone?{menuType:$.og.Modal,right:n()(Ie.DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:$.og.Popup,width:220,...e},a[Ae](Pe.Z,s,n()(Te.Z,{context:i,[_e]:0,[xe]:o[xe],sections:[Ee({isSharedDirectly:l,botCapabilities:y,botPermissionSourcePage:c}),...f?[Le({isSharedDirectly:l,botId:d.id,botName:b})]:[]]}))},onFocus:o.onFocus,focused:p.focused,openOnFocus:!1,ref:t}))}));function Ee(e){const{botCapabilities:t,isSharedDirectly:i,botPermissionSourcePage:o}=e,n=(0,Ze.getCumulativeBotBlockRoleFromCapabilities)(t);return{key:"active connection capabilities section",render:e=>a[Ae](R.Z,u()({},e,{topBorder:!1})),actions:[...i?[]:[ki(o)],Ci(n)]}}function Le(e){const{isSharedDirectly:t,botId:i,botName:o}=e;return{key:"active connection disconnect section",render:e=>a[Ae](R.Z,e),actions:t?[Zi(i,o)]:[Ti(i)]}}var Re=i(55384),Ne=i(9844),Oe=i(31299),Ue=i(41623),Ve=i(28187),We=i(38755),Ke=i(39098);const ze=i(85).Mm1,Ge=i(85)._V5,He=i(85).j7K,qe=i(85).c1s,je=i(85).DIE,Qe=i(85).ceT,Je=i(85).dLQ,$e=i(85).D7I,Ye=i(85).lUt,Xe=i(85).KYG,et=i(85).cbT,tt=i(85).wgE,it=i(85).d6L,ot=i(85).Csb,nt=i(85).GTJ,at=(0,a.forwardRef)((function(e,t){const{context:i,parent:o,alreadyConnectedIntegrationIds:l,alreadyConnectedBotIds:d,originButtonLabel:c,...m}=e,p=i.blocks[0],g=(0,s.O7)(),v=(0,r.VK)((()=>me.default.state.currentSpaceStore),[]),f=(0,r.VK)((()=>null==v?void 0:v.getBotSettingsStore().getValue()),[v]),y=(0,r.VK)((()=>null!=f&&f[nt]&&null!=f&&f[ot]?Object.keys(f[ot]):[]),[f]),[b,S]=(0,a.useState)(""),[M,k]=(0,a.useState)({[it]:"loading"});(0,a.useEffect)((()=>{Promise.all([async function(e){return await Oe.searchSpaceBots({[tt]:g,query:e})}(b),async function(e){return await Oe.searchInstallableIntegrations({query:e,[tt]:g,spaceId:null==v?void 0:v.id,botSettings:f})}(b)]).then((e=>{let[t,i]=e;const o=new Set,n=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:i,botValues:o,[tt]:n}=e,a=[];for(const s of o){const e=s.id,o=t.has(e)||s[et]&&i.has(s[et]),r=Re.kk.fromValue(se.cZ,s),l=(0,Ue.Nq)(n,r)||(0,We.Fn)(n)&&(0,Ue.f_)(r);!o&&l&&a.push(s)}return a}({alreadyConnectedBotIds:d,alreadyConnectedIntegrationIds:l,botValues:t,[tt]:g}).map((e=>(e[et]&&o.add(e[et]),{table:se.cZ,value:e})));let a=i.map((e=>{if(v){const t=Ke.t1.createChildStore(v,{id:e,table:Ne.K2}),i=t[Xe]((e=>{let{getRecordValueAndSubscribe:i}=e;return i(t)}));if(i&&!(0,de.VM)(i)){return{table:Ne.K2,value:i}}}})).filter(re.isDefined).filter((e=>!(o.has(e.value.id)||l.has(e.value.id))));if(de.Cb.name[Ye]().includes(b[Ye]())){const e={table:"legacy_integration",value:de.Cb};a=[...a,e]}const s=[...n,...a].sort(((e,t)=>{var i,o;const n=null===(i=e.value.name)||void 0===i?void 0:i[Ye](),a=null===(o=t.value.name)||void 0===o?void 0:o[Ye]();return n&&a?n<a?-1:n>a?1:0:0}));k({results:s,[it]:"ready"})})).catch((e=>k({[it]:"error"})))}),[b,v,d,f,y,g,l,p]);return a[$e](Fe.Z,u()({},m,{renderOrigin:(e,t)=>a[$e](L.Z,u()({},e,{ref:t,title:c,svg:h.Z.plus})),renderExtension:(e,t)=>{const o=g.device[Je]?{[Qe]:$.og.Modal,right:n()(Ie.DoneMenuText,{}),onClickRight:t.close,...e}:{[Qe]:$.og.Popup,width:220,...e},s=g.device[Je]?{[Qe]:$.og.Modal,topbarStyle:{height:0}}:{[Qe]:$.og.Popup,width:220,maxHeight:"16vh",...e},r=Boolean(p.canAdmin()&&(null==v?void 0:v.canRead()));return a[$e](Pe.Z,u()({},o,{onClick:e=>{e[je]()}}),n()(Te.Z,{[He]:0,context:i,onAccept:()=>{w.trackOpenMoreConnectionsMenu(g)},sections:[...r?[st(b,S),""===b?rt({[qe]:M,resultsMenuProps:s}):dt({[qe]:M,resultsMenuProps:s})]:[],ct(r,de.Cb)]}))},onFocus:o.onFocus,focused:m.focused,openOnFocus:!0,ref:t}))}));function st(e,t){return{key:"search connections section",render:e=>a[$e](R.Z,u()({},e,{isInput:!0})),actions:[vi(e,t)]}}function rt(e){const{[qe]:t,resultsMenuProps:i}=e,o=new Set;return{key:"search initial connections section",render:e=>a[$e](lt,u()({},e,{resultsMenuProps:i})),actions:[..."ready"===t[it]?t.results.map((e=>"bot"===e.table?(e.value[et]&&o.add(e.value[et]),yi(e.value)):Fi(e)?(0,Ve.F6)()&&!(0,Ve.SG)()?void 0:Si(e.value):bi(e.value))).filter(re.isDefined):"loading"===t[it]?[hi()]:[fi()]]}}function lt(e){window.__c={n:"IntegrationSearchResultsSection"};const{resultsMenuProps:t,...i}=e,o=(0,a.useRef)(null),n=(0,a.useCallback)((()=>{var e,t;const i=null===(e=o.current)||void 0===e||null===(t=e.querySelector('[role="menuitem"]'))||void 0===t?void 0:t.clientHeight,n=window.innerHeight<600?3:7;o.current&&i&&(o.current.style.maxHeight=n*i+.5*i+"px")}),[]);return(0,a.useEffect)((()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)})),[n]),a[$e](Pe.Z,u()({},t,{innerRef:o}),a[$e](R.Z,u()({},i,{isInput:!0,topBorder:!1,style:{margin:0,[Ge]:0,[ze]:0}})))}function dt(e){const{[qe]:t,resultsMenuProps:i}=e;let o=[];return o="error"===t[it]?[fi()]:"loading"===t[it]?[hi()]:"ready"===t[it]&&t.results.length>0?t.results.map((e=>e.table===se.cZ?yi(e.value):Fi(e)?(0,Ve.F6)()&&!(0,Ve.SG)()?void 0:Si(e.value):bi(e.value))).filter(re.isDefined):[{key:"connections search error",[ei]:mt.default[Xt](pi[ri]),[Yt]:pi[ri][ui],[$t]:pi[ri][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[qt]:e=>n()(Se.Z,{title:mt.default[Xt](pi[ri])}),[Gt]:()=>{}}],{key:"connections search results",render:e=>a[$e](lt,u()({},e,{resultsMenuProps:i})),actions:o}}function ct(e,t){const i=e,o=!(0,Ve.F6)()||(0,Ve.SG)();return{key:"manage connections section",render:t=>a[$e](R.Z,u()({},t,{style:{marginTop:e?6:0}})),actions:[...!i&&o?[Si(t)]:[],{key:"manage connections",[ei]:mt.default[Xt](pi[ni]),[Yt]:pi[ni][ui],[$t]:pi[ni][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],ut.not(ut[ii])],[qt]:e=>a[Ht](L.Z,u()({},e,{title:mt.default[Xt](pi[ni]),svg:h.Z.settings})),[Gt]:()=>{gt.openSettings({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var ut=i(70183),mt=i(33929),pt=i(76463),gt=i(91376),ht=i(76464),vt=i(14946);const ft=i(85).GGR,yt=i(85).Cz9,bt=i(85).LIR,St=i(85).jDA,wt=i(85).Hww,Mt=i(85).nrD,kt=i(85).nAm,Ct=i(85).F7y,Zt=i(85).NLk,Tt=i(85)._Fe,Pt=i(85).OtN,It=i(85).mFu,Ft=i(85).XNW,_t=i(85).NF1,xt=i(85).$Vg,At=i(85).UPJ,Bt=i(85).jkI,Dt=i(85).H1U,Et=i(85).EMU,Lt=i(85).sM5,Rt=i(85).KS0,Nt=i(85).fCB,Ot=i(85).PPM,Ut=i(85).an9,Vt=i(85).G80,Wt=i(85).t4B,Kt=i(85).wgE,zt=i(85).g5n,Gt=i(85).X5t,Ht=i(85).D7I,qt=i(85).rpY,jt=i(85).I9J,Qt=i(85).SAR,Jt=i(85).Ezy,$t=i(85)._sq,Yt=i(85).bSA,Xt=i(85).Yzm,ei=i(85).kUS,ti=i(85).Aw$,ii=i(85).dLQ,oi=i(85).cE0,ni=i(85).tFM,ai=i(85).JPZ,si=i(85).pT,ri=i(85).jJ,li=i(85).aqt,di=i(85).BFS,ci=i(85).q8D,ui=i(85).nx5,mi=i(85).lDe,pi=(0,d.defineMessages)({[mi]:{id:"topbar.connectionsSection.connectionLoading.label",[ui]:"Connections loading…"},[ci]:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",[ui]:"Search for connections..."},[di]:{id:"topbar.connectionsSection.connectionSearchError.label",[ui]:li},[ri]:{id:"topbar.connectionsSection.noSearchResults.label",[ui]:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",[ui]:"{name}"},[si]:{id:"topbar.connectionSection.slackEmpty.label",[ui]:"Slack"},[ai]:{id:"topbar.connectionSection.slackConnected.label",[ui]:"Connected to Slack channel"},[ni]:{id:"topbar.connectionsSection.manageConnections.label",[ui]:"Manage connections"},[oi]:{id:"topbar.connectionsSection.addConnections.label",[ui]:"Add connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",[ui]:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",[ui]:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",[ui]:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",[ui]:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",[ui]:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",[ui]:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",[ui]:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",[ui]:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",[ui]:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",[ui]:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),gi=ut.not(ut.and([ut[ii],ut.not(ut.and([ut.canAdmin,ut[ti]]))]));function hi(){return{key:"connections loading",[ei]:mt.default[Xt](pi[mi]),[Yt]:pi[mi][ui],[$t]:pi[mi][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[qt]:e=>a[Ht](be.Z,u()({},e,{icon:n()(ye.Z,{}),title:mt.default[Xt](pi[mi])})),[Gt]:()=>{}}}function vi(e,t){return{key:"search connections input",[Yt]:pi[ci][ui],[ei]:mt.default[Xt](pi[ci]),[$t]:pi[ci][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[qt]:()=>n()(fe.ZP,{value:e,onChange:e=>t(e.target.value),placeholder:mt.default[Xt](pi[ci]),focus:!0}),[Gt]:()=>{}}}function fi(){return{key:"connections search error",[ei]:mt.default[Xt](pi[di]),[Yt]:pi[di][ui],[$t]:pi[di][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[qt]:e=>n()(Se.Z,{title:mt.default[Xt](pi[di])}),[Gt]:()=>{}}}function yi(e){const{id:t,name:i}=e,o=mt.default[Xt](pi.connectionSearchResultLabel,{name:i});return{key:`${t}`,[ei]:o,[Yt]:o,[$t]:i,[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[qt]:(t,i)=>a[Ht](ve,u()({},t,{bot:e,focused:t.focused,onClick:async()=>{await Pi(i[zt][0],i[Kt],e)},ref:t.ref})),[Gt]:async t=>{await Pi(t[zt][0],t[Kt],e)}}}function bi(e){const{id:t,name:i,info:o}=e,n=mt.default[Xt](pi.connectionLabel,{connectionName:i});return{key:`${t}`,[ei]:n,[Yt]:n,[$t]:i,[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi,ut.not(ut[ii])],[qt]:e=>a[Ht](pe.Z,u()({},e,{title:n,icon:a[Ht]("img",{src:o.icon,style:{width:18,height:"auto"},ref:e.ref})})),[Gt]:async t=>{let{[Kt]:i}=t;e.id!==de.T0&&await async function(e,t){const{id:i,name:o}=e,n=await C[Ot]({message:mt.default[Xt](pi.connectionIntegrationConfirmlabel,{integrationName:o})}),a=(0,le.E)(i,o);n&&x[Nt]({[Kt]:t,url:a,targetSelf:!1})}(e,i)}}}function Si(e){const t=mt.default[Xt](pi[si]);return{key:"slack empty",[ei]:t,[Yt]:pi[si][ui],[$t]:t,[Jt]:!0,[Qt]:[ut[jt],ut[ti],ut.legacySlackIntegrationIsApproved,ut.legacySlackIntegrationIsReady,ut.legacySlackIntegrationEmpty,ut.not(ut[Wt])],[qt]:i=>n()(V.Z,{placement:V.Z.Placement.Left,[qt]:o=>a[Ht](pe.Z,u()({},(0,O.Z)(o,i),{title:t,icon:n()("img",{src:e.info.icon,style:{height:18}})})),renderTooltip:Ce.WH}),[Gt]:e=>{var t,i;vt.Lh({[Kt]:e[Kt],blockId:null===(t=e[zt])||void 0===t||null===(i=t[0])||void 0===i?void 0:i.id,intl:mt.default.getIntl()})}}}function wi(){const e=mt.default[Xt](pi[ai]);return{key:"slack connected inherited",[ei]:e,[Yt]:pi[ai][ui],[$t]:e,[Jt]:!0,[Qt]:[ut[jt],ut[ti],ut.legacySlackIntegrationIsInherited,ut.not(ut[Wt])],[qt]:(e,t,i)=>a[Ht](Ce.N,u()({blockStore:t[zt][0]},e)),[Gt]:e=>{}}}function Mi(){const e=mt.default[Xt](pi[ai]);return{key:"slack connected on block",[ei]:e,[Yt]:pi[ai][ui],[$t]:e,[Jt]:!0,[Qt]:[ut[jt],ut[ti],ut.legacySlackIntegrationIsOnBlock,ut.not(ut[Wt])],[qt]:(e,t,i)=>a[Ht](Ce.g1,u()({blockStore:t[zt][0]},e)),[Gt]:e=>{const{slackIntegrationStore:t}=(0,Ve.Jk)(e[zt][0]);vt.Hw(e[Kt],t,mt.default.getIntl())}}}function ki(e){const t=mt.default[Xt](pi.fromParentPageLabel);return{key:"from parent page",[ei]:t,[Yt]:t,[$t]:t,[Jt]:!1,[Qt]:[ut[jt],ut[ti]],[Gt]:()=>{},[qt]:(t,i)=>{let{[zt]:o}=i;const a=o[0],s=Ke.G.createChildStore(a,{table:ce.iU,id:e.blockId});return n()(Ii,{[Vt]:s})}}}function Ci(e){const t=mt.default[Xt](pi.capabilitiesLabel);return{key:"capabilities",[ei]:t,[Yt]:t,[$t]:t,[Jt]:!1,[Qt]:[ut[jt],ut[ti]],[Gt]:()=>{},[qt]:()=>n()(ke._,{role:e})}}function Zi(e,t){const i=mt.default[Xt](pi.disconnectLabel);return{key:"disconnect integration",[ei]:i,[Yt]:i,[$t]:pi.disconnectLabel[ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti]],[Gt]:async i=>{let{[zt]:o,[Kt]:n}=i;const a=o[0];await async function(e,t,i,o){await C[Ot]({message:mt.default[Xt](pi.disconnectConfirmationLabel,{botName:o})})&&pt.RN({botId:i,store:e,[Kt]:t})}(a,n,e,t)},[qt]:e=>a[Ht](L.Z,u()({},e,{svg:h.Z[Ut],title:i,focused:!0}))}}function Ti(e){const t=mt.default[Xt](pi.disconnectLabel),i=mt.default[Xt](pi.restrictionLabel);return{key:"restrict page from permission model",[ei]:i,[Yt]:i,[$t]:pi.restrictionLabel[ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti]],[Gt]:async t=>{let{[zt]:i,[Kt]:o}=t;const n=i[0];await async function(e,t,i){if(await C[Ot]({message:mt.default[Xt](pi.restrictionConfirmationLabel),acceptLabel:mt.default[Xt](pi.restrictionAcceptLabel)})){const o={type:"bot_permission",role:"none",bot_id:e};D.createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",[Kt]:i,perform:e=>{ht.restrictPermission({[Kt]:i,store:t,permissionItem:o,shouldInherit:!0,transaction:e})}})}}(e,n,o)},[qt]:e=>a[Ht](L.Z,u()({},e,{svg:h.Z[Ut],title:t,focused:!0}))}}async function Pi(e,t,i){await C[Ot]({message:mt.default[Xt](pi.connectionBotConfirmlabel,{botName:i.name})})&&pt.v2({botValue:i,store:e,[Kt]:t})}function Ii(e){window.__c={n:"FromParentPageMenuItem"};const{[Vt]:t}=e,i=(0,r.VK)((()=>t.getIcon()),[t]),o=(0,r.VK)((()=>t.isEmptyPage()),[t]),c=(0,s.O7)(),m=(0,l.Fg)(),[g,h]=(0,a.useState)(Rt),v=c.device[ii]?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return a[Ht](Se.Z,u()({},e,{title:n()("span",{style:{[Lt]:Et,[Dt]:Bt,[At]:xt}},void 0,n()(d.FormattedMessage,{id:"topbar.connectionSection.parentPage.label",[ui]:"From"}),n()("span",{style:{[Lt]:Et,[Dt]:Bt,padding:2,[_t]:2,[Ft]:2,cursor:It,[Pt]:g,color:m[Tt],[Zt]:Ct,overflow:kt,[Mt]:wt},onClick:()=>{x[St]({[Kt]:c,store:t,[bt]:p.tY.LinkInPage})},[ft]:()=>{h(m[yt][100])},onMouseLeave:()=>{h(Rt)},onMouseDown:()=>{h(m[yt][200])},onMouseUp:()=>{h(m[yt][100])}},void 0,n()(we.Z,{disabled:!0,icon:i,isEmptyPage:o,size:12,style:{margin:"0px 2px"}}),n()(Me.Z,{store:t}))),textWrapperStyle:v}))}function Fi(e){return"legacy_integration"===e.table&&e.value.id===de.Cb.id}var _i=i(67669);const xi=i(85).nx5,Ai=i(85).ISo,Bi=i(85).G3i,Di=i(85).Tb$;function Ei(e,t,i){const o=function(e){var t;const i=e.blocks[0],o=(0,_i.getMostPermissiveBlockPermissions)(i).filter((0,re.makeTypeGuard)((e=>(0,ae.isBotPermission)(e[Di])?{true:{...e,[Di]:e[Di]}}:{false:e})));if(0===o.length)return{status:"no bots"};const n=new Map,a=null===(t=me.default.state.currentSpaceStore)||void 0===t?void 0:t.id,s=o.map((e=>{let{from:t,[Di]:o}=e;const s=Ke.t1.createChildStore(i,{table:se.cZ,id:o.bot_id,spaceId:a});if("block"===t.table)return n.set(o.bot_id,t),s})).filter(re.isDefined);if(s.every((e=>e.isReady()))){const t=s.filter((t=>t[Bi]()&&Boolean((0,Ue.Nq)(e.environment,t.getModel()))));if((0,We.Fn)(e.environment)){const e=t.map((e=>e[Ai]())),i=new Set(e),o=s.filter((e=>!(!e[Bi]()||i.has(e[Ai]())||!Boolean((0,Ue.f_)(e.getModel()))||(i.add(e[Ai]()),0))));t.push(...o)}return{status:"ready",botStores:t,botIdToSharedPageIds:n}}return{status:"loading"}}(e),{status:n}=o;if("no bots"===n||"loading"===n)return o;{const{botStores:e,botIdToSharedPageIds:n}=o;return{status:"ready",botActions:e.map((e=>{if(e[Bi]()){const o=e[Ai]();o&&t.add(o);const s=n.get(e.id);if(s)return i.add(e.id),function(e){const{botStore:t,botPermissionSourcePage:i}=e,{id:o}=t,n=t.getName(),s=mt.default[Xt](pi.connectionLabel,{connectionName:n});return{key:`${o}`,[ei]:s,[Yt]:s,[$t]:s,[Jt]:!1,[Qt]:[ut[jt],ut[ti]],[Gt]:()=>{},[qt]:(e,o,n)=>{const r=o[zt][0].id===i.blockId;return a[Ht](De,u()({},e,{context:o,parent:n,isSharedDirectly:r,botStore:t,botPermissionSourcePage:i,originConnectionLabel:s}))}}}({botStore:e,botPermissionSourcePage:s})}})).filter(re.isDefined)}}}function Li(e){const t=new Set,i=new Set,o=Ei(e,t,i),n=function(e,t){const i=mt.default[Xt](pi[oi]);return{key:"add connections action",[ei]:i,[Yt]:pi[oi][ui],[$t]:pi[oi][ui],[Jt]:!1,[Qt]:[ut[jt],ut[ti],gi],[Gt]:()=>{},[qt]:(o,n,s)=>a[Ht](at,u()({},o,{context:n,parent:s,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:i}))}}(t,i);if("no bots"===o.status)return{loadingAction:[],connectedActions:[],searchSubMenu:n};if("loading"===o.status)return{loadingAction:[hi()],connectedActions:[],searchSubMenu:n};{const{botActions:e}=o;return{loadingAction:[],connectedActions:e,searchSubMenu:n}}}function Ri(e){const{loadingAction:t,connectedActions:i,searchSubMenu:o}=Li(e);return{key:"topbar connections",render:e=>a.createElement(R.Z,u()({},e,{topBorder:!0,title:n()(d.FormattedMessage,{id:"topbar.connectionSection.label",[xi]:"Connections"})})),actions:[...t,...[wi(),Mi()],...i,o]}}var Ni=i(64536),Oi=i(42115),Ui=i(95477),Vi=i(28020),Wi=i(4708),Ki=i(21969),zi=i(84210),Gi=i(41984),Hi=i(9919),qi=i(10161),ji=i(90848),Qi=i(30496),Ji=i(11689),$i=i(43339);const Yi=i(85).DQh,Xi=i(85).O7j,eo=i(85).XqV,to=i(85).UqM,io=i(85).LIR,oo=i(85).aM2,no=i(85).c6Z,ao=i(85).W_R,so=i(85).B2C,ro=i(85).Onc,lo=i(85).vTv,co=i(85).Zs0,uo=i(85).O_u,mo=i(85).D4i,po=i(85).yJI,go=i(85).UdR,ho=i(85).zaB,vo=i(85).mqC,fo=i(85).Gs2,yo=i(85).Wp_,bo=i(85).FqN,So=i(85).uIm,wo=i(85).ChN,Mo=i(85).Ixd,ko=i(85).jkI,Co=i(85).MLn,Zo=i(85).NlX,To=i(85).$wW,Po=i(85).pRQ,Io=i(85).dLQ,Fo=i(85).Yzm,_o=i(85).Oc6,xo=i(85).aFd,Ao=i(85).LCr,Bo=i(85).Drs,Do=i(85).JJj,Eo=i(85).Ezy,Lo=i(85).g4H,Ro=i(85).QNi,No=i(85).Aw$,Oo=i(85).Er,Uo=i(85).HYJ,Vo=i(85).X5t,Wo=i(85).SAR,Ko=i(85).bSA,zo=i(85).kUS,Go=i(85).Lhq,Ho=i(85).D7I,qo=i(85).rpY,jo=i(85).hDW,Qo=i(85).eu,Jo=i(85).g5n,$o=i(85).wgE,Yo=i(85).nLu,Xo=i(85).nx5,en=(0,d.defineMessages)({undoTurnPageIntoWikiName:{id:"action.undoTurnPageIntoWiki.name",[Xo]:"Undo wiki"},[Yo]:{id:"action.customizePage.label",[Xo]:"Customize page"},fontDefaultName:{id:"action.setPageFont.default.fuzzySearchKeywords",[Xo]:"Font Default"},fontDefaultCaption:{id:"action.setPageFont.default.caption",[Xo]:"Default"},fontDefaultTooltip:{id:"action.setPageFont.default.tooltip",[Xo]:"The default sans-serif workhorse"},fontSerifName:{id:"action.setPageFont.serif.fuzzySearchKeywords",[Xo]:"Font Serif"},fontSerifCaption:{id:"action.setPageFont.serif.caption",[Xo]:"Serif"},fontSerifTooltip:{id:"action.setPageFont.serif.tooltip",[Xo]:"Good for publishing"},fontMonoName:{id:"action.setPageFont.mono.fuzzySearchKeywords",[Xo]:"Font Mono"},fontMonoCaption:{id:"action.setPageFont.mono.caption",[Xo]:"Mono"},fontMonoTooltip:{id:"action.setPageFont.mono.tooltip",[Xo]:"Good for drafting and notes"},fontSmallTextKeywords:{id:"action.fontSmallText.fuzzySearchKeywords",[Xo]:"Font Small Text"},fontSmallTextLabel:{id:"action.fontSmallText.label",[Xo]:"Small text"},fontStyleSection:{id:"action.section.fontStyle",[Xo]:"Style"},fullWidthLabel:{id:"action.fullWidth.label",[Xo]:"Full width"},lockPageName:{id:"action.lockPage.name",[Xo]:"Lock page"},unlockPageName:{id:"action.unlockPageName.name",[Xo]:"Unlock page"},openAIAssistant:{id:"action.openMobileAIAssistant.name",[Xo]:"Open AI Assistant"},openinMacAppName:{id:"action.openinMacApp.name",[Xo]:"Open in Mac app"},openinWindowsAppName:{id:"action.openinWindowsApp.name",[Xo]:"Open in Windows app"},openiniOSAppName:{id:"action.openiniOSApp.name",[Xo]:"Open in iOS app"},openinAndroidAppName:{id:"action.openinAndroidApp.name",[Xo]:"Open in Android app"},pageUpdates:{id:"action.pageUpdates.title",[Xo]:"Page updates"},pageHistoryName:{id:"action.pageHistory.name",[Xo]:"Page history"},showDeletedPagesName:{id:"action.showDeletedPages.name",[Xo]:"Show deleted pages"}});function tn(e){return(0,S.PH)({key:`font ${e.font||"default"}`,[zo]:e[zo],[Ko]:e[zo][Xo],[Wo]:[ut.or([ut.not(ut[Uo]),ut[Oo]]),ut[No]],[qo]:(t,i,o)=>{const n=i[Jo][0].getFormat().page_font,s=e.font===n||!e.font&&!n;return a[Ho](Q,u()({},t,{isActive:s,font:e.font,[Ro]:e[Ro],style:e.style,[Lo]:e[Lo]}))},[Eo]:!1,[Vo]:(t,i)=>{let{[Jo]:o,[$o]:n}=t;D[Do]({[Bo]:"actionRegistry.createFontAction",[$o]:n,perform:t=>{P.updateFormat({stores:o,update:{page_font:e.font},[Ao]:t}),w.trackChangeFontType(n,{type:e.font||"default"})}})}})}const on=tn({[zo]:en.fontDefaultName,[Lo]:a[Ho](d.FormattedMessage,en.fontDefaultCaption),font:void 0,[Ro]:a[Ho](d.FormattedMessage,en.fontDefaultTooltip),style:{fontSize:24,[xo]:y.Z[_o](m.SP).sans,position:"relative",top:-2}}),nn=tn({[zo]:en.fontSerifName,[Lo]:a[Ho](d.FormattedMessage,en.fontSerifCaption),font:"serif",[Ro]:a[Ho](d.FormattedMessage,en.fontSerifTooltip),style:{fontSize:25,[xo]:y.Z[_o](m.SP).serif}}),an=tn({[zo]:en.fontMonoName,[Lo]:a[Ho](d.FormattedMessage,en.fontMonoCaption),font:"mono",[Ro]:a[Ho](d.FormattedMessage,en.fontMonoTooltip),style:{fontSize:26,[xo]:y.Z[_o](m.SP).mono,position:"relative",top:-3,letterSpacing:-1}}),sn=(0,S.$J)({key:"font section",title:en.fontStyleSection,[qo]:e=>a[Ho](ne,e),[Go]:[on,nn,an]}),rn=(0,b.wL)({key:"small text",[zo]:en.fontSmallTextKeywords,label:mt.default[Fo](en.fontSmallTextLabel),property:"page_small_text",[Wo]:[ut.not(ut[Io]),ut.or([ut.not(ut[Uo]),ut[Oo]]),ut[No]],afterAction:(e,t)=>w.trackChangeFontSize(t,{type:e?"small":"large"})}),ln=(0,b.wL)({key:"full width",[zo]:en.fullWidthLabel,label:mt.default[Fo](en.fullWidthLabel),property:"page_full_width",[Wo]:[ut.not(ut.isPhone),ut.not(ut[Uo]),ut[No]],afterAction:(e,t)=>w.trackChangePageWidth(t,{type:e?"full_width":"default_width"})}),dn=(0,S.$J)({key:"page style",[qo]:e=>a[Ho](R.Z,e),[Go]:[rn,ln]}),cn=(0,b.Li)([ut.showTurnIntoWiki],b.sY[Po]),un=(0,S.PH)({key:"undo turn page into wiki",[zo]:en.undoTurnPageIntoWikiName,[Ko]:en.undoTurnPageIntoWikiName[Xo],svg:h.Z.undo,[Wo]:[ut[To],ut.canCustomizePage,ut.not(ut.isLocked),ut[Oo],ut[Zo]("wiki_database")],[Eo]:!0,[Vo]:async e=>{let{[$o]:t,[Jo]:i}=e;await C.confirmUserAction({message:n()("div",{style:{[Co]:ko}},void 0,n()(d.FormattedMessage,{[Xo]:"Are you sure you want to turn <bold>{pageName}</bold> back into a normal page?",id:"action.undoTurnIntoWiki.message",values:{pageName:f.getText(i[0][Mo]()),bold:e=>n()("span",{style:{[wo]:y.Z[wo].semibold}},void 0,e)}})),description:n()("div",{style:{[Co]:ko}},void 0,n()(d.FormattedMessage,{[Xo]:"This will remove properties like owners and verification from your pages",id:"action.undoTurnIntoWiki.description"}))})&&D[Do]({[Bo]:"actionRegistry.undoTurnIntoAction.wiki",[$o]:t,perform:e=>{E.Cq({[$o]:t,[Jo]:i,[Ao]:e,source:"page_menu"})}})}}),mn=(0,S.PH)({key:"customize page",[zo]:en[Yo],[Ko]:en[Yo][Xo],svg:h.Z.customizePage,[Wo]:[ut.canCustomizePage,ut.not(ut[Uo])],[Eo]:!0,[qo]:e=>a[Ho](L.Z,u()({},e,{title:a[Ho](d.FormattedMessage,en[Yo]),svg:h.Z.customizePage,[So]:[]})),[Vo]:e=>{k.open({originRect:e.originRect})}}),pn=(0,S.PH)({key:"page lock",[zo]:en.lockPageName,[Ko]:en.lockPageName[Xo],svg:h.Z.locked,[Wo]:[ut.not(ut[Uo]),ut[No],ut.not(ut.isLocked)],[Eo]:!1,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=i[0];F.bo({[$o]:o,store:n,lock:!0})}}),gn=(0,S.PH)({key:"page unlock",[zo]:en.unlockPageName,[Ko]:en.unlockPageName[Xo],svg:h.Z.unlocked,[Wo]:[ut.not(ut[Uo]),ut[No],ut.isLocked],[Eo]:!1,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=i[0];F.bo({[$o]:o,store:n,lock:!1})}}),hn=(0,S.PH)({key:"open ai assistant",[zo]:en.openAIAssistant,[Ko]:en.openAIAssistant[Xo],svg:h.Z.sparkles,[Wo]:[ut[bo],ut.isMobileNative,ut.isPhone,ut.isAIAssistantEnabled,ut[Zo]("assistant-on-mobile")],[Eo]:!0,[Vo]:e=>{ji.Z[yo]({...ji.Z.state,open:!0})}}),vn=(0,S.PH)({key:"copy link to block non-desktop",[zo]:b.sY[fo],[Ko]:b.sY[fo][Xo],svg:h.Z.link,[So]:[vo],[Wo]:[ut[bo],ut[To],ut.not(ut.isElectron)],[Eo]:!0,[Vo]:(e,t)=>{M.copyLinkToBlock({...e,event:t})}}),fn=(0,S.PH)({key:ho,[zo]:b.sY[go],[Ko]:b.sY[go][Xo],svg:h.Z[ho],[Wo]:[ut[po],ut[No],ut[mo],ut.currentPageIsInCollection,ut.not(ut.isType(g.Ti[uo]))],[So]:[ho],[Eo]:!0,[Vo]:e=>{let{[$o]:t}=e;const i=Vi.getCurrentPageStore();if(!i)return;const o=i[co]();o&&B[lo](t)&&D[Do]({[Bo]:"actionRegistry.duplicateToCollection",[$o]:t,perform:e=>{const[n,a]=Z.duplicateBlock({[$o]:t,stores:[i],addCopyName:(0,Gi.Z)(i),[Ao]:e,[ro]:!0,[so]:!i.isInsideTemplate(),targetSpaceId:(0,v.CG)(o.pointer.spaceId),baseUrl:Ui.default.domainBaseUrl,[ao]:Ui.default[ao],[no]:"local"}),s=n[0];_.moveToCollection({childStore:s,parentStore:o,[Ao]:e}),i.isTemplate()&&I.append({parent:o[oo](),append:s,[Ao]:e}),x.navigateToBlock({[$o]:t,store:s,[io]:p.tY.Duplicate})}})}}),yn=(0,S.PH)({key:ho,[zo]:b.sY[go],[Ko]:b.sY[go][Xo],svg:h.Z[ho],[Wo]:[ut[To],ut[mo],ut.not(ut.currentPageIsInCollection),...b.kv],[So]:[ho],[Eo]:!0,[Vo]:e=>{let{[Jo]:t,[$o]:i}=e;if(!B[lo](i))return;const o=t[0].getParentStore();"block"!==(null==o?void 0:o.table)&&"team"!==(null==o?void 0:o.table)&&"space"!==(null==o?void 0:o.table)||T.duplicateTo({[$o]:i,store:t[0],newParent:o})}}),bn=(0,S.PH)({key:"open in mac app",[zo]:en.openinMacAppName,[Ko]:en.openinMacAppName[Xo],svg:h.Z[to],[Wo]:[ut[To],ut.not(ut.isNative),ut.not(ut[Io]),ut.isMac],[Eo]:!0,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=(0,zi.ZP)({store:i[0],[eo]:!1,[io]:p.tY.AppRedirect});x.openInNativeApp({url:(0,Ki.W)(n),[$o]:o})}}),Sn=(0,S.PH)({key:"open in windows app",[zo]:en.openinWindowsAppName,[Ko]:en.openinWindowsAppName[Xo],svg:h.Z[to],[Wo]:[ut[To],ut.not(ut.isNative),ut.not(ut[Io]),ut.isWindows],[Eo]:!0,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=(0,zi.ZP)({store:i[0],[eo]:!1,[io]:p.tY.AppRedirect});x.openInNativeApp({url:(0,Ki.W)(n),[$o]:o})}}),wn=(0,S.PH)({key:"open in ios app",[zo]:en.openiniOSAppName,[Ko]:en.openiniOSAppName[Xo],svg:h.Z[to],[Wo]:[ut[To],ut.not(ut.isNative),ut.isIOS],[Eo]:!0,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=(0,zi.ZP)({store:i[0],[eo]:!1,[io]:p.tY.AppRedirect});x.openInNativeApp({url:n,[$o]:o})}}),Mn=(0,S.PH)({key:"open in android app",[zo]:en.openinAndroidAppName,[Ko]:en.openinAndroidAppName[Xo],svg:h.Z[to],[Wo]:[ut[To],ut.not(ut.isNative),ut.isAndroid],[Eo]:!0,[Vo]:(e,t)=>{let{[Jo]:i,[$o]:o}=e;const n=(0,zi.ZP)({store:i[0],[eo]:!1,[io]:p.tY.AppRedirect});x.openInNativeApp({url:n,[$o]:o})}}),kn=(0,S.PH)({key:"open page updates",[Ko]:"Open page updates",[zo]:en.pageUpdates,svg:h.Z.bell,[Wo]:[ut.canComment,ut[Io]],[Eo]:!0,[Vo]:()=>{Qi.Z[yo]({open:!0})}}),Cn=(0,S.PH)({key:"action page history",[zo]:en.pageHistoryName,[Ko]:en.pageHistoryName[Xo],svg:h.Z[Xi],[Wo]:[ut.or([ut.isAdminMode,ut[Yi]]),ut.isOnline,ut[po],ut[bo]],[Eo]:!0,[Vo]:e=>{let{[$o]:t,[Jo]:i}=e;return A.openHistoryModal({[$o]:t,[jo]:i[0],from:"topbar"})},[qo]:(e,t)=>{let{onClick:i,key:o,...s}=e,{[$o]:r}=t;return n()(Oi.Z,{requireUpgradeToTier:!1,[Ko]:"history_modal",onClick:i,alwaysAllowClick:!0,[qo]:(e,t)=>a[Ho](L.Z,u()({},(0,O.Z)(s,e),{title:mt.default[Fo](en.pageHistoryName),svg:h.Z[Xi],dontShrinkRight:!0,right:t})),renderUpgradeTooltip:()=>{}},o)}}),Zn=(0,S.PH)({key:"open page trash",[zo]:en.showDeletedPagesName,[Ko]:en.showDeletedPagesName[Xo],svg:h.Z.showDeletedPages,[Wo]:[ut[po],ut[No],ut.isCurrentPage,ut[bo],ut.not(ut.isGuest)],[Eo]:!0,[Vo]:()=>{Ji.Z[yo]({open:!0}),$i.Z[yo]({...$i.Z.state,currentTab:"in_current_page"})}}),Tn=(0,S.$J)({key:"pageHistory",[qo]:e=>a[Ho](R.Z,e),[Go]:[kn,b.Yw,Cn,Ni.pageAnalyticsMenu,Zn,b.Op]});var Pn=i(33665),In=i(13713),Fn=i(83182),_n=i(939),xn=i.n(_n),An=i(49427);class Bn extends J.Z{constructor(){super(...arguments),this.wordCount=0}willMount(){this.wordCount=this.getWordCount()}renderComponent(){return n()(a.Fragment,{},void 0,this.wordCount)}getWordCount(){const e=An.Z.find((e=>e.props.store===this.props.store));if(e){const t=e.getContentWrapEl();if(t)return xn()(t.innerText)}return 0}}Bn.displayName="PageWordCount";const Dn=Bn,En=i(85).P3s,Ln=i(85).nx5,Rn=i(85).g4H,Nn=i(85).HYJ;function On(e){window.__c={n:"TopbarMoreMenu"};const{blockStore:t,onClickOriginRect:i,handleAccept:o,handleDismiss:c}=e,u=(0,s.O7)(),m=(0,s.Fy)(),p=(0,r.VK)((()=>({environment:u,blocks:[t],originRect:i,publicEditMode:void 0})),[u,t,i]),g=(0,r.VK)((()=>(0,Wi.getNotificationSettingsEntryPointsVariant)()),[]),v=(0,r.VK)((()=>function(e){const{[$o]:t,context:i,showGetNotified:o}=e,n=i[Jo][0],s=n.getFollowSettingsKey(),r=(0,Wi.isGetNotifiedMenuCopyChangesEnabled)(),l=qi.default.checkGate(Qo),c=(0,d.defineMessages)({getNotifiedFor:{[Xo]:"Get notified",id:"topbar.moreButton.getNotified"}}),u=l?Hi.CA({followSettingsKey:s,[$o]:t,[jo]:n,from:"more_menu",useCopyChanges:r}):Hi.Zk({followSettingsKey:s,[$o]:t,[jo]:n,from:"more_menu"});return[sn,dn,b.ww,(0,S.$J)({key:"topbar move or turn into actions",[qo]:e=>a[Ho](R.Z,e),[Go]:[cn,b.Ao]}),(0,S.$J)({key:"topbar database edit lock",[qo]:e=>a[Ho](R.Z,e),[Go]:[b.cO,b.YZ,b.Bj,b.BC,b.fK,b.MR,un]}),(0,S.$J)({key:"topbar page edit lock",[qo]:e=>a[Ho](R.Z,e),[Go]:[mn,pn,gn]}),(0,S.$J)({key:"topbar primary actions",[qo]:e=>a[Ho](R.Z,e),[Go]:[hn,b._p,b.zm,...o?[(0,S.MV)({key:"get notified for",[zo]:c.getNotifiedFor,[Ko]:c.getNotifiedFor[Xo],svg:h.Z.bell,width:300,[Wo]:[],subActions:()=>[(0,S.$J)({key:"get notified for",[qo]:e=>a[Ho](R.Z,e),[Go]:u.map((e=>{let{[Vo]:t}=e;return t}))})]})]:[],b.aU,vn,fn,yn,b.DN,bn,Sn,wn,Mn,b.l1,b.GZ]}),Tn,(0,S.$J)({key:"topbar import actions",[qo]:e=>a[Ho](R.Z,e),[Go]:[b.AP,b.q$,b.mS]}),Ri(i)]}({environment:u,context:p,showGetNotified:"variant_1"===g})),[u,p,g]),f=(0,r.VK)((()=>!t[Nn]()&&t.canEdit()&&t.hasContent()),[t]),y=(0,r.VK)((()=>t.canEdit()),[t]),w=(0,r.VK)((()=>t.canEdit()&&t[Nn]()),[t]),M=(0,l.yK)((e=>({[Rn]:{color:e.lightTextColor}})),[]),k=m.isMobile?{menuType:$.og.Modal,title:n()(d.FormattedMessage,{[Ln]:"Actions",id:"topbarMoreButton.mobileActionsMenu.title"}),right:n()(Ie.DoneMenuText,{}),onClickRight:c}:{menuType:$.og.Popup,maxHeight:"80vh"};return a.createElement(Pe.Z,k,n()(Te.Z,{sections:v,onAccept:o,context:p}),n()(R.Z,{topBorder:!0},void 0,f&&n()(be.Z,{[Rn]:n()("span",{style:M[Rn]},void 0,n()(d.FormattedMessage,{id:"pageMoreButton.wordCount.caption",[Ln]:"Word count: {count}",values:{count:n()(Dn,{store:t})}}))}),y&&n()(In.Z,{store:t,isPageMoreButton:!0})),w&&n()(Un,{}))}function Un(){return n()(R.Z,{topBorder:!0},void 0,n()(Fn.Z,{title:n()(d.FormattedMessage,{[Ln]:"Learn about databases",id:"topbar.moreButton.collectionHelpButton"}),href:(0,Pn.getLocalizedUrl)("guides.database"),[En]:"topbar_more_button"}))}},88359:(e,t,i)=>{i.d(t,{Z:()=>Z});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(83355),d=i(3909),c=i(64921),u=i(28992),m=i(64369);const p=i(85).D7I,g=i(85).a3v,h=i(85).AIq,v=i(85).NJt,f=i(85).Mcv,y=i(85).F7y,b=i(85).NLk,S=i(85).XNW,w=i(85).pkR,M=i(85).P0R,k=i(85).dLQ;class C extends l.Z{renderComponent(){const{device:e}=this.environment;return s()(c.Z,{mobileFeedback:e[k],onClick:this[M].onClick,hovered:this[M].focused,[w]:this[M][w],style:{width:"100%",...!e[k]&&{width:"calc(100% - 8px)",[S]:4,marginRight:4,borderRadius:3},...this[M].buttonStyle}},void 0,r[p](u.Z,n()({},this[M],{dontShrinkTitle:!0,[f]:s()("div",{style:{display:"flex",[b]:y}},void 0,this[M][f]&&s()(m.Z,{isSecondaryColor:!0,[k]:e[k]},void 0,this[M][f]),!e[k]&&s()("div",{style:{[v]:this[M][w]?"hidden":void 0,[h]:0}},void 0,d.Z.chevronDown({width:10,[S]:4,fill:this.theme[g]})))})))}}C.displayName="DropdownMenuItem";const Z=C},20223:(e,t,i)=>{i.d(t,{Z:()=>N});var o=i(77094),n=i.n(o),a=i(97464),s=i.n(a),r=i(67294),l=i(83355),d=i(3909),c=i(87279),u=i(61766),m=i(49085);class p extends m.default{getInitialState(){return{}}}const g=p;var h=i(31945),v=i(88359),f=i(78140),y=i(32163),b=i(89728);const S=i(85).j7K,w=i(85).y79,M=i(85).TEz,k=i(85).a3v,C=i(85).XNW,Z=i(85).dLQ,T=i(85).wgE,P=i(85).gWL,I=i(85).Gnd,F=i(85).Wp_,_=i(85).PXg,x=i(85).Cz2,A=i(85).D7I,B=i(85).pkR,D=i(85).icY,E=i(85).P0R,L=i(85).LtW;class R extends l.Z{constructor(){super(...arguments),this.storeTypes={[L]:u.Z,SelectButtonStore:g},this.renderMenuItemOrigin=e=>{const{style:t}=this[E];if(this[E].isMenuItem){const i=this[E][D]?{title:this[E][D],right:this[E].selectedTitle}:{title:this[E].selectedTitle};return r[A](v.Z,s()({},e,{focused:!!this[E].focused,[B]:this[E][B],style:t},i))}},this.renderButtonOrigin=e=>{const{[x]:t}=this[E];return r[A](b.Z,s()({[B]:this[E][B],disabledFeedback:!0,style:{[_]:-6,...t}},e),this[E].selectedTitle,this.chevronDownIcon())},this.handleSelection=e=>{this[I].SelectButtonStore[F]({[P]:e})},this.closeMenu=()=>{const{[L]:e}=this[I];e[F]({...e.state,open:!1})},this.chevronDownIcon=()=>{const{device:e}=this[T];return d.Z.chevronDown({width:e[Z]?14:10,[C]:4,fill:this.theme[k]})}}renderComponent(){const{isMenuItem:e,style:t,labelStyle:i}=this[E];return e?this.renderButtonPopup(this.renderMenuItemOrigin):n()("div",{style:{display:"flex",alignItems:"center",height:32,...t}},void 0,this[E][D]&&n()("div",{style:{[_]:"auto",color:this.theme[M],fontSize:14,...i}},void 0,this[E][D]),this.renderButtonPopup(this.renderButtonOrigin))}renderButtonPopup(e){const{device:t}=this[T],{alignmentToOrigin:i}=this[E];return n()(h.ZP,{popupType:t[Z]?h.Z4.SlideUp:h.Z4.Popup,[L]:this[I][L],alignmentToOrigin:void 0!==i?i:h.vR.End,renderOrigin:e,placementToOrigin:this[E].isMenuItem?h.pO.Right:h.pO.Bottom,render:e=>{let i;i=t[Z]?{menuType:c.og.ActionSheet}:{menuType:c.og.Popup};const{focusedIndex:o,menuSections:a}=this.getMenuSections(e);return r[A](f.Z,i,n()(y.Z,{type:y.i[w],[S]:o,sections:a}))}})}getMenuSections(e){let t,i=0;return{menuSections:this[E].renderMenuSections(e).map((e=>({...e,items:e.items.map((e=>(e.key===this[I].SelectButtonStore.state[P]&&(t=i),i++,{...e,action:t=>{e.action(t),this.handleSelection(e.key)}})))}))),focusedIndex:t}}}R.displayName="SelectButton";const N=R},457:(e,t,i)=>{i.d(t,{Z:()=>m});var o=i(77094),n=i.n(o),a=(i(67294),i(13991)),s=i(24405),r=i(8848),l=i(1799),d=i(97880),c=i(82990);const u=i(85).jkI;function m(e){window.__c={n:"MFABackupCodes"};const{type:t}=e,i=(0,s.yK)((e=>({pane:{display:"flex",whiteSpace:"pre-line",flexDirection:"column",alignItems:u,justifyContent:u,borderRadius:4,backgroundColor:r.FN.light.yellow[50],paddingTop:8,paddingBottom:8,marginBottom:10},textCode:{fontFamily:c.Z.getHeaderFontFamily({pageFont:"mono",locale:a.SP}),fontWeight:c.Z.fontWeight.regular,fontSize:c.Z.fontSize.UIRegular.desktop,font:c.Z.baseFontFamily.emailMono,color:r.FN.light.brown[500],textAlign:u},redactedBackupCode:{textDecoration:"line-through",opacity:.2}})),[]);return n()("div",{style:i.pane},void 0,n()("div",{style:i.textCode},void 0,"status"===t?e.status.map(((e,t)=>n()("div",{style:e.hasBeenUsed?i.redactedBackupCode:{}},t,l.A))):"unencryptedCodes"===t?e.backupCodes.map(l.K).join("\n"):(0,d.unreachable)(t)))}},56839:(e,t,i)=>{i.d(t,{R$:()=>S,ZP:()=>w});var o=i(77094),n=i.n(o),a=i(96486),s=i(67294),r=i(24405),l=i(82990),d=i(5366),c=i(33665),u=i(68785),m=i(88175),p=i(73602),g=i(11898);const h=i(85).Bn$,v=(i(85).h78,i(85).D7I),f=(i(85).uUv,i(85).nx5),y=i(85).gUt,b=i(85).MQM,S=6;function w(e){let{isLoading:t,phoneNumber:i,[b]:o,[y]:l,resentAt:w,onDismiss:k,onBack:C,onVerifyCode:Z,onResendLink:T}=e;window.__c={n:"MFAPromptSMSVerification"};const P=(0,r.yK)(M,[]),[I,F]=(0,s.useState)([]),_=n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeTitle",[f]:"Verify phone number"}),x=s[v](s.Fragment,null,n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeHeader.default",[f]:"Enter the code sent to {phoneNumber} to complete setup.",values:{phoneNumber:i}})," ",s[v](p.y,{resentAt:w,[y]:l,onResendLink:T})),A={text:t?n()(u.Z,{}):n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeButton",[f]:"Verify code"}),onClick:()=>Z(I.join("")),disabled:t||"resending"===l||(0,a.compact)(I).length!==S},B=[{text:n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeNeedHelp",[f]:"Need help?"}),href:(0,c.getLocalizedUrl)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}];return n()(m.Z,{title:_,header:x,[b]:o,primaryAction:A,secondaryActions:B,onDismiss:k,onBack:C,disableBackButton:t},void 0,n()("div",{style:P.body},void 0,n()(g.ZP,{numInputs:S,format:h,disabled:!1,value:I,onChange:F,autoFocus:!0,isValidKey:g.rN})))}function M(e){return(0,r.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:16,marginBottom:4},textCode:{fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginTop:32,marginBottom:32,textAlign:"center"}})}},18469:(e,t,i)=>{i.d(t,{R$:()=>f,ZP:()=>y});var o=i(77094),n=i.n(o),a=i(96486),s=i(67294),r=i(24405),l=i(82990),d=i(5366),c=i(33665),u=i(68785),m=i(88175),p=i(11898);const g=i(85).Bn$,h=(i(85).h78,i(85).nx5),v=i(85).MQM,f=6;function y(e){let{isLoading:t,[v]:i,onDismiss:o,onBack:l,onVerifyCode:y}=e;window.__c={n:"MFAPromptTOTPVerification"};const S=(0,r.yK)(b,[]),[w,M]=(0,s.useState)([]),k=n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeTitle",[h]:"Verify code"}),C=n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeHeader",[h]:"Enter the one-time code from authenticator to complete setup."}),Z={text:t?n()(u.Z,{}):n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeButton",[h]:"Verify code"}),onClick:()=>y(w.join("")),disabled:t||(0,a.compact)(w).length!==f},T=[{text:n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.needHelp",[h]:"Need help?"}),href:(0,c.getLocalizedUrl)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}];return n()(m.Z,{title:k,header:C,[v]:i,primaryAction:Z,secondaryActions:T,onDismiss:o,onBack:l,disableBackButton:t},void 0,n()("div",{style:S.body},void 0,n()(p.ZP,{numInputs:f,format:g,disabled:t,value:w,onChange:e=>{M(e)},autoFocus:!0,isValidKey:p.rN})))}function b(e){return(0,r.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:16,marginBottom:4},textCode:{fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginTop:32,marginBottom:32,textAlign:"center"}})}},96880:(e,t,i)=>{i.r(t),i.d(t,{SearchStaticContext:()=>jy,SearchStoresContext:()=>Qy,default:()=>$y});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(83355),d=i(18466),c=i(49085),u=i(15145),m=i(12174),p=i(4615),g=i(97880);const h=i(85).jKg;var v=i(70203),f=i(63143),y=i(50906),b=i(5978),S=i(87531),w=i(74647),M=i(95477),k=i(73744),C=i(69988),Z=i(98165),T=i(65598),P=i(80084),I=i(21115),F=i(23537),_=i(79315),x=i(24042),A=i(10161),B=i(32470),D=i(55320),E=i(2342),L=i(30857),R=i(87956),N=i(29026),O=i(9019),U=i(97464),V=i.n(U),W=i(480),K=i(81954),z=i(24405),G=i(29477),H=i(43250),q=i(87279),j=i(59054),Q=i(21202),J=i(92338),$=i(68120),Y=i(29987),X=i(88632),ee=i(39098);const te=i(85).lme,ie=i(85).IoZ,oe=i(85).oUH,ne=i(85).JQY,ae=i(85).ApF,se=i(85).XBA,re=i(85).fkq,le=i(85).Lyb,de=i(85).U3F,ce=i(85).QVN,ue=i(85).Ttb,me=i(85).Kgm,pe=i(85).e7B,ge=i(85).z_V,he=i(85).jfm,ve=i(85).wgE,fe=i(85).Jcy,ye=i(85).e$R,be=i(85).j75,Se=i(85).VMs,we=i(85).GiO,Me=i(85).jKg,ke=i(85).dfJ,Ce=i(85).qJ8,Ze=i(85).fBu,Te=i(85).QmD,Pe=i(85).I9J,Ie=i(85).XHO,Fe=i(85).oDK,_e=i(85).zZX;function xe(e){let{dependencies:t,[be]:i,localDebounce:o=25,serverDebounce:n=275,[ye]:a,localSearchCache:l,[fe]:d,enabled:c}=e;const u=(0,W.O7)(),m=(0,K.VK)((()=>function(e){const{[Pe]:t,[be]:i}=e,o=i[Te][he];function n(e){return(null==o?void 0:o[e])??A.default.getGroup(e,{disableExposureLogging:!0})}return{shouldSearchLocal:"on"!==n("search-no-local-blending")&&t,[ge]:i[Te][ge],[he]:i[Te][he],forcedBlockIds:i[Te].forcedBlockIds}}({[Pe]:t[Pe],[be]:i})),[t[Pe],i]),p=(0,r.useMemo)((()=>s().debounce(Ae,n)),[n]);(0,j.r5)((()=>c?async function(e){const{[Se]:t,openAsPage:i,store:o,fetchServerResultsFn:n}=e;if(i&&s().isEqual(t,o[Te].selectedQueryResultQuery))return;const a="quick_find_scroll"!==N.ZP[Te].source;o[pe]((e=>({...e,[me]:a?void 0:e[me]})));const r=function(e){const{shouldSearchLocal:t,[Ze]:i,[ve]:o,[Se]:n,debug:a,limit:r,[_e]:l,[Pe]:d,localSearchCache:c,store:u,[fe]:m}=e;let p;const g={...n,[le]:{...n[le],...m}};if(t){var h;return p=P.getResultsWithCount(function(e){const{[Ze]:t,requestInput:i,[Pe]:o,[ve]:n,[_e]:a,localSearchCache:s}=e,{[Se]:r}=i;if(!s)return;if(!r.text.trim())return;if(a)return;const l=Y.default.mark(ce),d=void 0,c=P[de]({[Se]:i,localCachedPages:s,[Ze]:t,[ve]:n,[Pe]:o,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:d});return Y.default.measure(l,{[ve]:n}),c}({[Ze]:i,[ve]:o,requestInput:{[Se]:g,debug:a,limit:r},[_e]:l,[Pe]:d,localSearchCache:c})),L.default[pe]((e=>({...e,numLocalRequests:e.numLocalRequests+1}))),s().isEmpty(null===(h=p)||void 0===h?void 0:h[ue])&&(0,E.Xx)(u[Te])&&u[Te][ae]?u[pe]((e=>({...e,[ne]:!0}))):u[pe]((e=>({...e,[ne]:!1,[me]:p}))),p}}(e),l=[];"on"===A.default.getGroup("search-exclude-local-in-server")&&l.push(...(null==r?void 0:r[ue].map((e=>e.id)))??[]);await n({...e,excludedBlockIds:l})}({...t,...m,store:a,fetchServerResultsFn:p,[ve]:u,localSearchCache:l,[fe]:d}):Promise.resolve()),[t,m,a,p,u,l,d,c],{debounce:o})}async function Ae(e){let{[Ze]:t,[ve]:i,[Se]:o,debug:n,[Pe]:a,[Fe]:r,[Ce]:l,[Me]:d,[he]:c,[ge]:u,[ke]:m,store:p,forcedBlockIds:h,limit:v,[fe]:b,excludedBlockIds:S}=e;const w={...o,[le]:{...o[le],...b}},M={[Se]:w,debug:n,limit:v};p[pe]((e=>({...e,[ae]:!0}))),L.default[pe]((e=>({...e,numServerRequests:e.numServerRequests+1})));const k=p[Te][oe],C=N.ZP[Te].source,Z=await async function(e){const{[Ze]:t,requestInput:i,[Pe]:o,[ve]:n,[Fe]:a,[Me]:s,searchSessionFlowNumber:r,source:l,spaceId:d,[he]:c,[ge]:u,[ke]:m,forcedBlockIds:p,excludedBlockIds:h}=e,{[Se]:v}=i;if(!v.text.trim()&&!P.hasActiveFilter(v[le]))return;if(!o)return{error:J.SearchRequestError.Offline};const y=Y.default.mark(re),b=await P.getServerSearchResults({[ve]:n,input:i,spaceId:d,[Fe]:a,[Me]:s,searchSessionFlowNumber:r,source:l,[he]:c,[ge]:u,[ke]:"on"===(null==c?void 0:c["search-debug-only-no-recent-boosting"])?[]:m,forcedBlockIds:p,excludedBlockIds:h});if(!b)return;if("failed"===b.type)return b.offline?{error:J.SearchRequestError.Offline}:{error:J.SearchRequestError.RequestFailed};const S=b.data.trackEventProperties,w=(0,$.Qr)(S)?{}:(0,f.objectFromEntries)((0,g.objectKeys)(S).map((e=>[`server-${e}`,S[e]]))),M=b.data[ue].map(((e,i)=>({...e,[se]:w,originalPosition:i,store:ee.G.createChildStore(t,{table:Q.iU,id:e.id})})));return Y.default.measure(y,{[ve]:n}),{value:{[ue]:M,total:b.data.total,debugInfo:b.data.debug,[se]:w,clusterInfo:b.data.clusterInfo}}}({[Ze]:t,[ve]:i,requestInput:M,spaceId:null==l?void 0:l.id,[Me]:d,searchSessionFlowNumber:L.default[Te].numServerRequests,[Fe]:r,[Pe]:a,source:C,[he]:c,[ge]:u,[ke]:m,forcedBlockIds:h,excludedBlockIds:S}),T={[Se]:{...N.ZP[Te][Se],[le]:{...N.ZP[Te][Se][le],...b}},limit:N.ZP[Te].limit,debug:B.ZP.getDebugLevel()};if(!s().isEqual(M,T))return;const I=P.getResultsWithCount(Z),F="quick_find_scroll"===C?P.mergePaginationResults({existingResults:k,newPageResults:I}):I;if(Z&&!Z.error){var _,x,A;const e=Z.value[ue];p[pe]((t=>({...t,serverError:null==Z?void 0:Z.error,[ae]:!1,[oe]:F,[ie]:e.length<v,[se]:Z.value[se],[me]:t[ne]?void 0:t[me],[ne]:!1})));const t=new Map;null==F||F[ue].flatMap((e=>e.badges)).forEach((e=>{void 0!==e&&(void 0===t[e.type]&&(t[e.type]=0),t[e.type]+=1)}));const{sections:o}=P.getSectionsFromResults({intentBasedGrouping:D.default[Te][te].enablesGrouping,[me]:null===(_=p[Te][me])||void 0===_?void 0:_[ue],[oe]:null==F?void 0:F[ue]}),n={};for(const[i,a]of Object.entries(o))n[i]=a.map((e=>e.id));y.trackSearchClientResults(i,{numLocalResults:(null===(x=p[Te][me])||void 0===x?void 0:x[ue].length)||0,numServerResults:(null==F?void 0:F[ue].length)||0,localResultsIds:(null===(A=p[Te][me])||void 0===A?void 0:A[ue].map((e=>e.id)))||[],...Z.value[se],badgeCounts:t,idsBySection:n})}else p[pe]((e=>({...e,serverError:null==Z?void 0:Z.error,[ae]:!1,[oe]:void 0,[se]:void 0,[me]:e[ne]?void 0:e[me],[ne]:!1})))}const Be=i(85).Jcy,De=i(85).DgF,Ee=i(85).N4Y,Le=i(85).j75,Re=i(85).SDR,Ne=i(85).GiO,Oe=i(85).qJ8,Ue=i(85).zZX,Ve=i(85).J8Q,We=i(85).wCq,Ke=i(85).T$o,ze=i(85).mRY,Ge=i(85).Tes,He=i(85).z6F,qe=i(85).e$R,je=i(85).DPi,Qe={taskDB:{[je]:["e02ed201-e893-4279-8bac-6b872dabf955"]},projectsDB:{[je]:["37cedb80-b4aa-4674-b0b3-1e8c67f0be86"]},docsDB:{[je]:["e6dce471-f27c-43fb-b28e-40d293f86f8c"]},searchTeam:{[je]:["a02dd678-839d-4a63-9b74-a37f11df723f"]}},Je=!1;function $e(){const e=(0,W.O7)(),t=(0,W.Fy)(),{[qe]:i,[He]:o,[Ge]:n,[ze]:a,[Ke]:s,[We]:l,[Ve]:d}=(0,r.useContext)(jy),{parentStore:c}=(0,r.useContext)(Qy),u=function(e){const t=(0,W.O7)();return(0,K.VK)((()=>{const{[_e]:i,[Fe]:o}=P[Ie](t);return{[Pe]:Boolean(X.Z[Te].online),limit:N.ZP[Te].limit,[Ze]:e,[_e]:i,[Fe]:o,[Ce]:_.default[Te][Ce],debug:B.ZP.getDebugLevel(),openAsPage:D.default[Te].openAsPage,[ke]:N.ZP[Te][ke],[Me]:D.default[Te].sessionId,[we]:_.default[Te][we],[Se]:N.ZP[Te][Se]}}),[t,e])}(c),m=(0,K.VK)((()=>Boolean((0,B.gq)({device:t})&&B.BJ.state.visible)),[t]),[{value:p}]=(0,j.r5)((()=>u[Ue]?Promise.resolve(void 0):u[Oe]?P.getLocalSearchableBlocks({environment:e,[Oe]:u[Oe],[Ne]:u[Ne],excludeCurrentPage:!0}):Promise.resolve(void 0)),[e,u[Oe],u[Ne],u[Ue]]);xe({[Re]:u,[qe]:i,localSearchCache:p,[Le]:B.v_,[Ee]:!0}),xe({[Re]:u,[qe]:o,localSearchCache:p,[Le]:B.BJ,[Ee]:m});const g=(0,K.VK)((()=>{var e;const t=null===(e=_.default.state[De])||void 0===e?void 0:e.id;return{createdBy:t?[t]:[]}}),[]);xe({[Re]:u,[qe]:n,localSearchCache:p,[Le]:B.v_,[Be]:g,[Ee]:Je}),xe({[Re]:u,[qe]:a,localSearchCache:p,[Le]:B.v_,[Be]:Qe.taskDB,[Ee]:Je}),xe({[Re]:u,[qe]:s,localSearchCache:p,[Le]:B.v_,[Be]:Qe.projectsDB,[Ee]:Je}),xe({[Re]:u,[qe]:l,localSearchCache:p,[Le]:B.v_,[Be]:Qe.docsDB,[Ee]:Je}),xe({[Re]:u,[qe]:d,localSearchCache:p,[Le]:B.v_,[Be]:Qe.searchTeam,[Ee]:Je})}var Ye=i(5162),Xe=i(69454),et=i(36488),tt=i(56940),it=i(78140),ot=i(40721),nt=i(37770),at=i(22715),st=i(3909),rt=i(53772),lt=i(82990),dt=i(5366),ct=i(61766),ut=i(23063),mt=i(64921),pt=i(52275),gt=i(31945),ht=i(12508),vt=i(89728),ft=i(72495),yt=i(93481),bt=i(84619),St=i(31299),wt=i(33929),Mt=i(15447),kt=i(31278),Ct=i(11470),Zt=i(76798),Tt=i(255),Pt=i(85567),It=i(98707);const Ft=i(85).Yzm,_t=i(85).PP_,xt=i(85).PXg,At=i(85).jkI,Bt=i(85).H1U,Dt=i(85).rOg,Et=i(85).sM5,Lt=i(85).Mm1,Rt=i(85)._V5,Nt=i(85).TLr,Ot=i(85).fBu,Ut=i(85).d73,Vt=i(85).gaz,Wt=i(85).v2u,Kt=i(85).qJ8,zt=i(85).xgV,Gt=i(85).D7I,Ht=i(85).IRD,qt=i(85).OtN,jt=i(85).KS0,Qt=i(85).wgE,Jt=i(85).E0z,$t=i(85).dLQ,Yt=i(85).N5p,Xt=i(85).Vaw,ei=i(85).G4H,ti=i(85).PG2,ii=i(85).pkR,oi=i(85).EKg,ni=i(85).nx5,ai=(0,dt.defineMessages)({searchPages:{[ni]:"Search pages",id:"searchPageFilter.searchTokenFilter.tokenInput.placeholder"},selectAPage:{[ni]:"Select a page",id:"searchPageFilter.searchTokenFilter.resultSection.title"}});class si extends l.Z{constructor(){super(...arguments),this[oi]=(e,t)=>{let{[ii]:i,onRemove:o,[ti]:a}=t;const s=this[ei],r=this[Xt](e),l=n()(Tt.Z,{[ii]:i,[ti]:o});return n()(Ct.Z,{[ii]:i,focused:!1,store:r,right:l,style:s.menuItem,desktopTitleStyle:s.menuItemTitle,[ti]:a})},this[Yt]=e=>n()(Zt.Z,{store:this[Xt](e),shouldWrap:!0,maxLength:50}),this.renderToken=(e,t)=>{const{blockIds:i}=this.props,o=this.tokenStyles,a=1===i.length,s=this[Xt](e),r=n()("div",{style:o.token},void 0,n()(kt.Z,{[ii]:!0,icon:s.getIcon(),isEmptyPage:!1,size:20,style:o.icon}),n()(Zt.Z,{store:s}));return n()(Pt.Z,{format:this[Qt][Jt][$t]?bt.l.Large:bt.l.Small,value:r,showRemoveButton:!0,onClickRemove:t.onRemove,isSingle:a,shouldShrink:!0,[qt]:jt,shouldWrap:!1},e)},this[Ht]=(e,t)=>{const i=this[Xt](e);return r[Gt](Ct.Z,V()({},t,{key:e,store:i}))},this[zt]=async e=>{let{query:t,current:i}=e;const{[Kt]:o}=_.default.state;if(!o)return[];const n=t?(await St.searchPageIds({[Qt]:this[Qt],query:t,limit:20,spaceId:o.id,[Wt]:!1,[Vt]:!1,source:"ancestor_filter_page_search",[Ut]:!0})).results:Mt.X4.state.map((e=>e.pageId)),a=new Set(i);return n.filter((e=>!a.has(e)))},this[Xt]=e=>{const{[Ot]:t}=this.props;return ee.G[Nt](t,{table:Q.iU,id:e})},this[ei]={menuItem:{minHeight:void 0,[Rt]:this[Qt][Jt][$t]?12:4,[Lt]:this[Qt][Jt][$t]?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{[Et]:Dt,[Bt]:At},menuItemLabel:{[xt]:12},recordIcon:{fill:_t}},this.tokenStyles={token:{[Et]:"flex",[Bt]:At},icon:{[xt]:4}}}renderComponent(){const{mode:e,title:t,blockIds:i,onChange:o,[ii]:a,focused:s,onMenuDismiss:r}=this.props;return n()(It.Z,{mode:e,hasItemsSelected:(null==i?void 0:i.length)>0,title:t,icon:st.Z.searchInPage,iconStyles:this[ei].recordIcon,items:i,onChange:o,focused:s,renderFilter:this[oi],renderToken:this.renderToken,[Yt]:this[Yt],addItemLabel:n()(dt.FormattedMessage,{[ni]:"Add another page",id:"searchPageFilter.searchTokenFilter.addAPage.button"}),labelText:{title:t,tokenInputPlaceholder:wt.default[Ft](ai.searchPages),componentDebugName:"SearchPageFilter"},[zt]:this[zt],[Ht]:this[Ht],[ii]:a,onMenuDismiss:r})}}si.displayName="SearchPageFilter";const ri=si;var li=i(83890),di=i(29369),ci=i(93044),ui=i(30676);const mi=i(85).Yzm,pi=i(85).nx5,gi=i(85).PP_,hi=i(85).PXg,vi=i(85).jkI,fi=i(85).H1U,yi=i(85).rOg,bi=i(85).Mm1,Si=i(85)._V5,wi=i(85).TLr,Mi=i(85).fBu,ki=i(85).Y7T,Ci=i(85).Sgw,Zi=i(85).Wqi,Ti=i(85).SZh,Pi=i(85).qJ8,Ii=i(85).QmD,Fi=i(85).GiO,_i=i(85).xgV,xi=i(85).D7I,Ai=i(85).IRD,Bi=i(85).KS0,Di=i(85).Scd,Ei=i(85).wgE,Li=i(85).E0z,Ri=i(85).dLQ,Ni=i(85).N5p,Oi=i(85).OHs,Ui=i(85).CSh,Vi=i(85).G4H,Wi=i(85).PG2,Ki=i(85).pkR,zi=i(85).EKg;class Gi extends l.Z{constructor(){super(...arguments),this[zi]=(e,t)=>{let{[Ki]:i,onRemove:o,[Wi]:a}=t;const s=this[Vi],r=this[Ui](e),l=n()(Tt.Z,{[Ki]:i,[Wi]:o});return n()(ui.F,{[Ki]:i,focused:!1,[Oi]:r,right:l,style:s.menuItem,desktopTitleStyle:s.menuItemTitle,[Wi]:a},e)},this[Ni]=e=>this[Ui](e).getName(),this.renderAvatarFactory=e=>{const t=e.getIcon();return e=>n()(kt.Z,{[Ki]:!0,icon:t,isEmptyPage:!1,size:e})},this.renderToken=(e,t)=>{const{teamIds:i}=this.props,o=1===(null==i?void 0:i.length),a=this[Ui](e);if(!a)return;const s=a.getName();return n()(ci.ZP,{format:this[Ei][Li][Ri]?ci.lP.Large:ci.lP.Small,showRemoveButton:!0,isSingle:o,onClickRemove:t.onRemove,renderAvatar:this.renderAvatarFactory(a),title:s,style:{[Di]:Bi}},e)},this[Ai]=(e,t)=>{const i=this[Ui](e);return r[xi](ui.F,V()({},t,{key:e,[Oi]:i}))},this[_i]=async e=>{var t;let{query:i,current:o}=e;const n=new Set(o),a=_.default[Ii][Fi],s=_.default[Ii][Pi],r=null===(t=_.default[Ii][Ti])||void 0===t?void 0:t.id;if(!a||!s||!r)return[];const l=await(0,F.qX)({[Ei]:this[Ei],[Zi]:s,[Ci]:r});return(await St.searchTeams({query:i,[ki]:a,teamStores:l})).filter((e=>!n.has(e.id))).slice(0,20).map((e=>e.id))},this[Ui]=e=>{const{[Mi]:t}=this.props;return ee.zX[wi](t,{table:di.e0,id:e})},this[Vi]={menuItem:{minHeight:void 0,[Si]:this[Ei][Li][Ri]?12:4,[bi]:this[Ei][Li][Ri]?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:yi,[fi]:vi},menuItemLabel:{[hi]:12},recordIcon:{[hi]:6,fill:gi}}}renderComponent(){const{mode:e,title:t,teamIds:i,onChange:o,[Ki]:a,focused:s,onMenuDismiss:r,intl:l}=this.props;return n()(It.Z,{mode:e,title:t,icon:st.Z.openTeamSearch,iconStyles:this[Vi].recordIcon,items:i||[],onChange:o,[Ki]:a,focused:s,renderFilter:this[zi],renderToken:this.renderToken,[Ni]:this[Ni],addItemLabel:n()(dt.FormattedMessage,{[pi]:"Add a teamspace",id:"search.filterMenu.addATeamButton.label"}),labelText:{title:t,tokenInputPlaceholder:l[mi]({[pi]:"Search teamspaces",id:"search.filterMenu.searchTeams.placeholder"}),componentDebugName:"SearchTeamFilter"},[_i]:this[_i],[Ai]:this[Ai],onMenuDismiss:r,hasItemsSelected:Boolean(i&&(null==i?void 0:i.length)>0)})}}Gi.displayName="SearchTeamFilter";const Hi=(0,dt.injectIntl)(Gi);var qi=i(33338),ji=i(86825),Qi=i(75689),Ji=i(91642);const $i=i(85).t7b,Yi=i(85)._B2,Xi=i(85).PXg,eo=i(85).PP_,to=i(85).Mm1,io=i(85).wgE,oo=i(85).E0z,no=i(85).dLQ,ao=i(85)._V5,so=i(85).G4H;class ro extends l.Z{constructor(){super(...arguments),this.handleToggle=()=>{const{value:e,onChange:t}=this.props;t(!e)},this[so]={menuItem:{minHeight:void 0,[ao]:this[io][oo][no]?12:4,[to]:this[io][oo][no]?12:4},icon:{height:14,width:14,fill:eo},pillIcon:{height:16,width:16,fill:eo,[Xi]:6},[Yi]:{display:"flex"}}}renderComponent(){const{[oo]:e}=this[io],{mode:t}=this.props;return e[no]?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){return n()(Ji.Z,{marginAfter:!1,style:this[so][Yi]},void 0,this.renderSwitcherMenuItem(e))}renderMobile(e){const{title:t,value:i,disabled:o}=this.props;return e===It.z.Button?this.renderSwitcherMenuItem(e):n()(Qi.Z,{disabled:o,onClick:this.handleToggle,label:t,isToggle:!0,isToggleActive:i})}renderSwitcherMenuItem(e){const{title:t,icon:i,value:o,style:a,...s}=this.props,l=this[so],d=this[$i](),c={...l.menuItem,...d.menuItem,...a};return e===It.z.Pill?n()(qi.Z,{on:o,hideChevron:!0,title:n()("span",{},void 0,t),onClick:this.handleToggle,icon:i(l.pillIcon)}):r.createElement(ji.Z,V()({title:t,icon:i(l.icon),on:o,onClick:this.handleToggle,style:c},s))}[$i](){return{menuItem:{color:this.theme.mediumTextColor}}}}ro.displayName="SearchToggleFilter",ro.Mode=It.z;const lo=ro;var co=i(8848),uo=i(32163);const mo=i(85).iVL,po=i(85).WLZ,go=i(85).wMo,ho=i(85).wuN,vo=i(85).D7I,fo=i(85).Dd5,yo=i(85).nAm,bo=i(85).n99,So=i(85).MZ8,wo=i(85).rHi,Mo=i(85).jfm;function ko(e){window.__c={n:"SearchExperimentFilterPopupButton"};const t=(0,W.Fy)();return n()(gt.ZP,{popupType:t.isMobile?gt.Z4.SlideUp:gt.Z4.Popup,renderOrigin:t=>r[vo](Zo,V()({events:t},e)),render:t=>r[vo](Co,V()({parent:t},e))})}function Co(e){let{parent:t,experiment:i,[Mo]:o,[fo]:a}=e;window.__c={n:"SearchExperimentFilterMenu"};const s=(0,W.Fy)(),l=(0,z.yK)((()=>({menuOptionStyle:{color:co.ZP[ho]}})),[]);let d;d=s.isMobile?{menuType:q.og.Modal,title:i[wo],right:n()(dt.FormattedMessage,{defaultMessage:"Done",id:go}),onClickRight:t.close}:{menuType:q.og.Popup,width:250};const c=i.groups.map((e=>({key:e,action:o=>{a({[wo]:i[wo],group:e}),t.close()},render:(t,i)=>r[vo](pt.Z,V()({},t,{title:e,style:l.menuOptionStyle}))})));return r[vo](it.Z,d,n()(uo.Z,{type:uo.i.Vertical,initialFocus:void 0,sections:[{key:i[wo],render:e=>r[vo](ft.Z,e),items:c}]}))}function Zo(e){let{experiment:t,events:i,[Mo]:o}=e;window.__c={n:"SearchExperimentFilterMenuButton"};const a=(0,z.yK)((e=>({[po]:{width:10,fill:e.lightIconColor},[mo]:{overflowX:yo,justifyContent:"left",overflow:yo,marginLeft:6,color:e[ho]},[So]:{display:"flex",overflow:yo,flexDirection:"row"},groupCell:{overflow:yo,marginRight:4}})),[]);return r[vo](vt.Z,V()({},i,{isSmall:!0,key:t[wo],style:a[mo]}),n()("div",{style:a[So]},void 0,n()("div",{style:a.groupCell},void 0,o[t[wo]]||t.group),n()("div",{},void 0,st.Z.chevronDown(a[po]))))}const To=e=>({fontSize:14,lineHeight:1.2,color:e[ho],marginRight:4,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),Po=function(e){window.__c={n:"SearchExperimentFilter"};const{experiment:t}=e,{leftOverrides:i,rightOverrides:o,experimentDiffers:a,experimentAgreesButNondefault:s}=(0,K.VK)((()=>{const e=B.v_.state[Mo],i=B.BJ.state[Mo],o=(e[t[wo]]??t.group)!==(i[t[wo]]??t.group);return{leftOverrides:e,rightOverrides:i,experimentDiffers:o,experimentAgreesButNondefault:!o&&void 0!==i[t[wo]]&&e[t[wo]]!==t.group}}),[t]),l=(0,z.yK)((e=>({[So]:{backgroundColor:a?e[bo]:s?e.accentColors.yellow[100]:void 0},titleCell:{...To(e),maxWidth:180,textOverflow:"ellipsis",overflow:yo}})),[s,a]),d=(0,r.useCallback)((e=>{const{[wo]:t,group:i,store:o}=e;o.setState({...o.state,[Mo]:{...o.state[Mo],[t]:i}})}),[]);return r[vo](r.Fragment,null,n()("div",{style:{...l.titleCell,...l[So]}},void 0,t[wo].replace("search-","")),n()("div",{style:l[So]},void 0,n()(ko,{experiment:t,[Mo]:i,[fo]:e=>{d({...e,store:B.v_})}})),n()("div",{style:l[So]},void 0,n()(ko,{experiment:t,[Mo]:o,[fo]:e=>{d({...e,store:B.BJ})}})))};var Io=i(53877),Fo=i(42875);const _o=i(85).tDk,xo=i(85).kUS,Ao=i(85).cMN,Bo=i(85).JIU,Do=i(85).DPi,Eo=i(85).D7I,Lo=i(85).nx5,Ro=i(85).wuN,No=i(85).t7b,Oo=i(85).XjH,Uo=i(85).PXg,Vo=i(85).PP_,Wo=i(85).sOA,Ko=i(85).Uie,zo=i(85).nAm,Go=i(85).jkI,Ho=i(85).H1U,qo=i(85).sM5,jo=i(85).Mm1,Qo=i(85).wgE,Jo=i(85).E0z,$o=i(85).dLQ,Yo=i(85)._V5,Xo=i(85).P0R;let en;!function(e){e[e.Button=0]="Button",e[e.MenuItem=1]="MenuItem"}(en||(en={}));class tn extends l.Z{constructor(){super(...arguments),this.handleFilterClick=e=>{const{onMenuDismiss:t}=this[Xo];this.applyFilter(e),this.openSidebar(),t&&t()},this.applyFilter=e=>{N.ZP.updateFilters(e)},this.openSidebar=()=>{N.ZP.isSidebarOpen()||N.ZP.setState({...N.ZP.state,isSidebarOpen:!0})},this.styles={menuItem:{minHeight:void 0,[Yo]:this[Qo][Jo][$o]?12:4,[jo]:this[Qo][Jo][$o]?12:4},buttonFilter:{padding:"4px 8px",[qo]:"flex",[Ho]:Go,overflow:zo},buttonText:{...lt.Z[Ko]},icon:{[qo]:Wo,height:14,width:14,fill:Vo},buttonIcon:{[Uo]:6}}}[Oo](){const{mode:e}=this[Xo];return e===en.Button?this.renderAsButton():e===en.MenuItem?this.renderAsMenuItem():void(0,g.unreachable)(e)}renderAsButton(){const{icon:e,title:t,filter:i}=this[Xo],o=this.styles,a=this[No]();return n()(mt.Z,{style:{...o.buttonFilter,...a.buttonFilter},onClick:()=>this.handleFilterClick(i)},void 0,e&&e({...o.icon,...o.buttonIcon}),n()("span",{style:o.buttonText},void 0,t))}renderAsMenuItem(){const{icon:e,title:t,filter:i,focused:o}=this[Xo],a=this.styles,s=this[No](),r={...a.menuItem,...s.menuItem};return n()(pt.Z,{icon:e&&e(a.icon),focused:o,title:t,onClick:()=>this.handleFilterClick(i),style:r})}[No](){const{[Jo]:e}=this[Qo];return{menuItem:{color:e.isDesktop?this.theme[Ro]:void 0,...this[Xo].isLastInSection&&{boxShadow:void 0}},buttonFilter:{color:this.theme[Ro]}}}}tn[xo]="SearchFilterPreset",tn.Mode=en;class on extends l.Z{[Oo](){const e=on.getCurrentPageFilter();if(e)return r[Eo](tn,V()({icon:st.Z.searchInPage,title:n()(dt.FormattedMessage,{id:"search.filterMenu.quickFilters.inCurrentPage",[Lo]:"In current page"}),filter:e},this[Xo]))}static isActive(e){const t=on.getCurrentPageFilter();if(!t)return!1;if(!t[Do])return!1;const i=t[Do][0];return-1!==e[Do].indexOf(i)}}on[xo]="InCurrentPagePreset",on.getCurrentPageFilter=()=>{const{[_o]:e}=_.default.state;if(e&&e.id)return{[Do]:[e.id]}};class nn extends l.Z{[Oo](){const e=nn.getCurrentUserFilter(this[Qo]);if(e)return r[Eo](tn,V()({icon:st.Z.person,title:n()(dt.FormattedMessage,{id:"search.filterMenu.quickFilters.createdByMe",[Lo]:"Created by me"}),filter:e},this[Xo]))}static isActive(e,t){const i=nn.getCurrentUserFilter(e);if(!i)return!1;if(!i[Bo])return!1;const o=i[Bo][0];return-1!==t[Bo].indexOf(o)}}nn[xo]="CreatedByMePreset",nn.getCurrentUserFilter=e=>{const{id:t}=e.currentUser;if(t)return{[Bo]:[t]}};class an extends l.Z{[Oo](){const e=an.getPastWeekFilter();if(e)return r[Eo](tn,V()({icon:st.Z.calendar,title:n()(dt.FormattedMessage,{id:"search.filterMenu.quickFilters.editedLastWeek",[Lo]:"Edited last week"}),filter:e},this[Xo]))}static isActive(e){const{[Ao]:t}=an.getPastWeekFilter();return s().isEqual(t,e[Ao])}}an[xo]="EditedLastWeekPreset",an.getPastWeekFilter=()=>({[Ao]:{starting:Io.lastWeek((0,Fo.r)()),ending:Io.today((0,Fo.r)())}});var sn=i(1743),rn=i(74194);const ln=i(85).Dd5,dn=i(85).TEz,cn=i(85).cZW;function un(e){window.__c={n:"SearchStringOverrideControls"};const{leftValue:t,rightValue:i,setLeftValue:o,setRightValue:a,[cn]:s,label:l}=e,{titleCell:d,rightTitleCell:c,leftTitleCell:u}=(0,z.yK)((e=>{const o=To(e);return{titleCell:o,rightTitleCell:{...o,color:i?o.color:e[dn],width:"95%"},leftTitleCell:{...o,color:t?o.color:e[dn],width:"95%"}}}),[t,i]),[m,p]=(0,r.useState)(i),[g,h]=(0,r.useState)(t);(0,r.useEffect)((()=>{void 0===i&&p(void 0),void 0===t&&h(void 0)}),[i,t]);const v=(0,r.useCallback)((()=>{a(m)}),[a,m]),f=(0,r.useCallback)((()=>{o(g)}),[o,g]),y=(0,r.useCallback)((e=>{p(e.target.value)}),[]),b=(0,r.useCallback)((e=>{h(e.target.value)}),[]);return r.createElement(r.Fragment,null,n()("div",{style:d},void 0,l),n()(sn.Z,{capture:!0,allowMenuList:!1},void 0,n()(rn.Z,{style:u,onBlur:f,value:g,[ln]:b,[cn]:s}),n()(rn.Z,{style:c,onBlur:v,value:m,[ln]:y,[cn]:s})))}const mn=i(85).e7B,pn=i(85).ij9,gn=i(85).Ixx,hn=(i(85).G63,i(85)._0y),vn=i(85).lzS,fn=i(85).HPN,yn=(i(85).nyS,i(85).fBu),bn=i(85).dYl,Sn=i(85).KXm,wn=i(85).cZW,Mn=i(85).z_V,kn=i(85).fsm,Cn=i(85).vK9,Zn=i(85).Tk1,Tn=i(85).XCs,Pn=i(85).YDv,In=i(85).C1,Fn=i(85).jfm,_n=i(85).ja3,xn=i(85).hT6,An=i(85).nLZ,Bn=i(85).gGi,Dn=i(85).Dd5,En=i(85).PG2,Ln=i(85).wuN,Rn=i(85).tLG,Nn=i(85).X_m,On=i(85).NF1,Un=i(85).Scd,Vn=i(85).UPJ,Wn=i(85).jkI,Kn=i(85).H1U,zn=i(85).t7b,Gn=i(85).DPi,Hn=i(85).cMN,qn=i(85).F7X,jn=i(85).JIU,Qn=i(85).VMs,Jn=i(85).Lyb,$n=i(85).PXg,Yn=i(85).ChN,Xn=i(85).dLQ,ea=i(85).Exd,ta=i(85).sM5,ia=i(85).nAm,oa=i(85).Mm1,na=i(85)._V5,aa=i(85).r9y,sa=i(85).uVN,ra=i(85).QmD,la=i(85).Wp_,da=i(85).Qvt,ca=i(85).J_8,ua=i(85).rHi,ma=i(85).EIp,pa=i(85).Zij,ga=i(85).YR2,ha=i(85).Ie8,va=i(85).BQ6,fa=i(85).D7I,ya=i(85).nx5,ba=i(85).G4H,Sa=i(85).LtW;let wa;!function(e){e.Button="Button",e.Section="Section"}(wa||(wa={}));class Ma extends l.Z{constructor(){super(...arguments),this.storeTypes={[Sa]:ct.Z},this.renderAddFilterOrigin=e=>{const t=this[ba];return r[fa](vt.Z,V()({},e,{[va]:t.addFilterButtonMobile,icon:st.Z.filterCircled,isBlue:!0}),n()(dt.FormattedMessage,{[ya]:"Add filter",id:"search.addFilter.button.label"}))},this.renderAddFilterMenu=()=>n()(it.Z,{menuType:q.og[ha]},void 0,this.renderSuggestedFilters(),n()(Ji.Z,{[pa]:this.renderMoreFiltersTitle()},void 0,this.renderCreatedByFilter(It.Z.Mode.Button),this.renderCreatedTimeFilter(It.Z.Mode.Button),this[ga](It.Z.Mode.Button),this.renderAncestorFilter(It.Z.Mode.Button),this.renderInTeamFilter(It.Z.Mode.Button))),this.searchExperimentsToToggle=this[ma]((()=>Object.entries(m.g6).map((e=>{let[t,i]=e;const o=A.default.getGroup(t);return{[ua]:t,experimentVersion:1,group:o,groups:[ca,...i]}})))),this[da]=()=>{const{[Sa]:e}=this.stores;e[la]({...e[ra],open:!1})},this.callTitleFilterUpdateFns=e=>{N.ZP.updateFilters({[sa]:e})},this.closeSidebar=()=>N.ZP[la]({...N.ZP[ra],isSidebarOpen:!1}),this[ba]={[aa]:{[na]:12,[oa]:24,overflowY:"auto",overflowX:ia,flex:"0 0 440px",minHeight:400},sidebarHidden:{[ta]:"none"},addFilterButtonMobile:{[ea]:this.props[Xn]?lt.Z[ea].UISmall.mobile:lt.Z[ea].UISmall.desktop,[Yn]:lt.Z[Yn].medium,[$n]:-8}}}renderComponent(){return this.props[Xn]?this.props.mode===wa.Button?this.renderAddButtonMobile():this.props.mode===wa.Section?this.renderActiveFiltersMobile():void(0,g.unreachable)(this.props.mode):this.renderSidebar()}renderActiveFiltersMobile(){const{[ra]:e}=N.ZP,t=P.getActiveFilters(e[Qn][Jn]);return n()(ft.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,this.renderTitlesOnlyFilter(It.z.Section),this.renderDeletedOnlyFilter(It.z.Section),this.renderActiveFilters(t,It.Z.Mode.Section))}renderAddButtonMobile(){const{[Sa]:e}=this.stores;return n()(gt.ZP,{popupType:gt.Z4.SlideUp,[Sa]:e,renderOrigin:this.renderAddFilterOrigin,render:this.renderAddFilterMenu})}renderActiveFilters(e,t){return n()(r.Fragment,{},void 0,e[jn]&&this.renderCreatedByFilter(t),e[qn]&&this.renderCreatedTimeFilter(t),e[Hn]&&this[ga](t),e[Gn]&&this.renderAncestorFilter(t),e.inTeams&&this.renderInTeamFilter(t))}renderSuggestedFilters(){const{[Jn]:e}=N.ZP[ra][Qn],t=nn.isActive(this.environment,e),i=an.isActive(e),o=on.isActive(e);if(!(t&&i&&o))return n()(Ji.Z,{[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.quickFiltersSection.title",[ya]:"Quick filters"}),marginAfter:!0},void 0,!t&&n()(nn,{mode:en.MenuItem,focused:!1,onMenuDismiss:this[da]}),!i&&n()(an,{mode:en.MenuItem,focused:!1,onMenuDismiss:this[da]}),!o&&n()(on,{mode:en.MenuItem,focused:!1,onMenuDismiss:this[da],isLastInSection:!0}))}renderSidebar(){const e=this[ba],t=this[zn](),i={...e[aa],...t[aa],...!N.ZP.isSidebarOpen()&&e.sidebarHidden,flex:"0 0 360px"};return n()("aside",{[va]:i},void 0,n()(mt.Z,{[En]:this.closeSidebar,[va]:{[ta]:"flex",[Kn]:Wn,[Vn]:Wn,[Un]:void 0,[On]:6,width:16,[Nn]:16,position:Rn,top:10,right:10}},void 0,st.Z.closeSmall({width:14,fill:this.theme[Ln]})),this.renderDevToolsSection())}renderForcedClusterPatternInput(){return null}renderShowDebugInfoToggle(){return n()(lo,{mode:It.z.Button,focused:!1,[pa]:"Show debug info",icon:st.Z.bot,value:B.ZP[ra].showDebugInfo,[Dn]:e=>{B.ZP[la]({...B.ZP[ra],showDebugInfo:Boolean(e)})}})}renderShowDebugSearchToggle(){return n()(lo,{mode:It.z.Button,focused:!1,[pa]:"Profile query",icon:st.Z.bot,value:"everything"===B.ZP[ra].debug,[Dn]:e=>{B.ZP[la]({...B.ZP[ra],debug:e?"everything":void 0})}})}renderDevToolsSection(){if((0,rt.x)(M.default))return n()(Ji.Z,{[pa]:"Dev Tools"},void 0,n()(ut.Z,{isVisible:!0,animationStyle:{[Nn]:Bn},render:()=>n()("div",{[va]:{overflow:"scroll"}},void 0,this.renderShowDebugInfoToggle(),this.renderShowDebugSearchToggle(),this.renderForcedClusterPatternInput(),n()(Ji.Z,{[va]:{[An]:16},[pa]:"Quick Switch"},void 0,n()(Ca,{[pa]:"No local at all",[Fn]:{[xn]:"on",[_n]:"on"}}),n()(Ca,{[pa]:"No local results",[Fn]:{[xn]:"on"}}),n()(Ca,{[pa]:"No local boosting",[Fn]:{[_n]:"on"}}),n()(Ca,{[pa]:"Vector only",[Fn]:{"search-vectors":"on"}})),n()(Ji.Z,{[va]:{[An]:16},[pa]:"Dev Experiments",right:n()(vt.Z,{[En]:()=>{B.v_[In](),B.BJ[In]()},[va]:{[Pn]:0,[Tn]:0,[Nn]:"unset"}},void 0,st.Z.sync({width:12}))},void 0,n()("div",{[va]:{[ta]:"grid",[Zn]:"auto 1fr 1fr",[Cn]:Bn,[kn]:Bn,[Pn]:14}},void 0,n()("div",{}),n()("div",{}),n()(ka,{columnStore:B.BJ}),this.searchExperimentsToToggle[ra].map((e=>n()(Po,{experiment:e},e[ua]))),n()(un,{leftValue:B.v_[ra][Mn],rightValue:B.BJ[ra][Mn],setLeftValue:B.v_.updateForcedClusterPattern,setRightValue:B.BJ.updateForcedClusterPattern,[wn]:"cluster-pattern",label:"forced cluster pattern"}),n()(un,{leftValue:B.v_[ra].forcedBlockIds,rightValue:B.BJ[ra].forcedBlockIds,setLeftValue:B.v_.updateForcedBlockIds,setRightValue:B.BJ.updateForcedBlockIds,[wn]:"block ids",label:"forced block ids"}))))}))}renderTitlesOnlyFilter(e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(lo,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",[ya]:"Title only"}),icon:st.Z.typesTitle,value:t[sa]||!1,[Dn]:this.callTitleFilterUpdateFns})}renderDeletedOnlyFilter(e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(lo,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.deletedOnlyToggle.label",[ya]:"Deleted only"}),icon:st.Z.trash,value:t[Sn]||!1,[Dn]:this[bn](Sn)})}renderMoreFiltersTitle(){return n()(dt.FormattedMessage,{id:"search.filterMenu.moreFiltersSection.title",[ya]:"More filters"})}renderAncestorFilter(e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(Qy.Consumer,{},void 0,(i=>{let{[yn]:o}=i;return n()(ri,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",[ya]:"In"}),[yn]:o,blockIds:t[Gn],onMenuDismiss:this[da],[Dn]:this[bn](Gn)})}))}renderCreatedByFilter(e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(Qy.Consumer,{},void 0,(i=>{let{[yn]:o}=i;return n()(li.Z,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.createdBy",[ya]:"Created by"}),[yn]:o,userIds:t[jn],onMenuDismiss:this[da],[Dn]:this[bn](jn)})}))}renderCreatedTimeFilter(e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(yt.Z,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:fn,[ya]:"Created"}),icon:st.Z[vn],value:t[qn],onMenuDismiss:this[da],[Dn]:this[bn](qn)})}[ga](e){const{[Jn]:t}=N.ZP[ra][Qn];return n()(yt.Z,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:hn,[ya]:"Last edited"}),icon:st.Z[vn],value:t[Hn],onMenuDismiss:this[da],[Dn]:this[bn](Hn)})}renderInTeamFilter(e){if(!(0,F.bq)())return;const{[Jn]:t}=N.ZP[ra][Qn];return n()(Qy.Consumer,{},void 0,(i=>{let{[yn]:o}=i;return n()(Hi,{mode:e,focused:!1,[pa]:n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",[ya]:"Teamspace"}),[yn]:o,teamIds:t.inTeams,onMenuDismiss:this[da],[Dn]:this[bn]("inTeams")})}))}[bn](e){return t=>N.ZP.updateFilters({[e]:t})}[zn](){return{[aa]:{backgroundColor:this.theme[gn],borderLeft:`1px solid ${this.theme.regularDividerColor}`}}}}function ka(e){let{columnStore:t}=e;window.__c={n:"ExperimentColumnShowHeader"};const i=(0,K.VK)((()=>t[ra][pn]),[t]);return n()(pt.Z,{icon:n()(ht.Z,{checked:i,size:14,[En]:()=>t[mn]((e=>({...e,[pn]:!e[pn]})))}),focused:!1,[pa]:"Show",[En]:()=>t[mn]((e=>({...e,[pn]:!e[pn]})))})}function Ca(e){let{[pa]:t,[Fn]:i}=e;return n()(pt.Z,{focused:!1,[pa]:t,[En]:()=>{B.BJ[mn]((e=>({...e,[pn]:!1}))),B.v_[mn]((e=>({...e,[Fn]:i})))}})}Ma.displayName="SearchFilterMenu";const Za=Ma;var Ta=i(28992),Pa=i(25464),Ia=i(20223);const Fa=i(85).auS,_a=i(85).D7I,xa=i(85).tlC,Aa=i(85).Exd,Ba=i(85).wuN;const Da=function(e){window.__c={n:"SearchSortMenu"};const t=r.useRef(),i=(0,W.Fy)(),{isMobile:o}=i,{activeOption:a,items:s}=r.useMemo((()=>function(e){const{currentSortBy:t,setSortBy:i,sortOptions:o,selectButton:n}=e;let a=o[0];const s=o.map((e=>{const o=t.field,s=`${o}.${"relevance"===o?"":t.direction}`,l=e.key===s;return l&&(a=e),{key:e.key,action:()=>{i(e.sort),n&&n.current&&n.current.closeMenu()},render:t=>r[_a](pt.Z,V()({},t,{title:e[xa],right:l&&st.Z.thinCheck({fill:co.ZP[Fa],width:14,height:14})}))}}));return{activeOption:a,items:s}}({...e,selectButton:t})),[e,t]),l=(0,z.yK)((e=>({selectedTitle:{color:e[Ba]},label:{marginRight:2,[Aa]:o?lt.Z[Aa].UISmall.mobile:lt.Z[Aa].UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e[Ba],fontWeight:lt.Z.fontWeight.semibold,[Aa]:o?lt.Z[Aa].UISmall.mobile:lt.Z[Aa].UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}})),[o]),d=o?n()(dt.FormattedMessage,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return r[_a](Ia.Z,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:Pa.v.Start,selectedTitle:n()("div",{style:l.selectedTitle},void 0,a[xa]),label:void 0,renderMenuSections:()=>[{key:"searchSortOrder",render:e=>r[_a](Ji.Z,V()({},e,{title:d,desktopStyle:l.menu,disableDesktopPadding:!1})),items:s}],labelStyle:l.label,innerButtonStyle:l.innerButton})},Ea=i(85).GCx,La=i(85).nx5,Ra=i(85).tlC,Na=i(85).k1W,Oa=i(85).OM8,Ua=i(85).NF1,Va=i(85).ChN,Wa=i(85).dLQ,Ka=i(85).Exd,za=i(85).wgE,Ga=i(85).g7N,Ha=i(85).Mm1;class qa extends l.Z{constructor(){super(...arguments),this.styles={menuItemMobile:{[Ha]:0},titleWrapper:{flex:void 0,marginTop:-3,[Ga]:-1},showSidebarButton:()=>{const{device:e}=this[za];return{padding:"0 4px",[Ka]:e[Wa]?lt.Z[Ka].UISmall.mobile:lt.Z[Ka].UISmall.desktop,[Va]:lt.Z[Va].medium,[Ua]:3,height:20,[Oa]:"20px"}}}}renderComponent(){const{device:e}=this[za],t=this.styles,i={...e[Wa]&&t.menuItemMobile},o=this.shouldAllowFilters()&&this[Na]();return n()(Ta.Z,{title:this.renderSortMenu(),right:o,textWrapperStyle:t.titleWrapper,style:i})}renderSortMenu(){return n()(Da,{currentSortBy:N.ZP.state.query.sort,setSortBy:e=>{N.ZP.setState({...N.ZP.state,query:{...N.ZP.state.query,sort:e}})},sortOptions:ja})}[Na](){const{device:e}=this[za];if(e[Wa])return n()(Za,{[Wa]:!0,mode:wa.Button})}shouldAllowFilters(){const{isPublicPageSearch:e}=this.props;return!e}}qa.displayName="SearchHeader";const ja=[{key:"relevance.",[Ra]:n()(dt.FormattedMessage,{id:"search.sort.sortOrder.bestMatches",[La]:"Best matches"}),sort:{field:"relevance"}},{key:"lastEdited.desc",[Ra]:n()(dt.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.newestFirst",[La]:"Last edited: Newest first"}),sort:{field:"lastEdited",[Ea]:"desc"}},{key:"lastEdited.asc",[Ra]:n()(dt.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.oldestFirst",[La]:"Last edited: Oldest first"}),sort:{field:"lastEdited",[Ea]:"asc"}},{key:"created.desc",[Ra]:n()(dt.FormattedMessage,{id:"search.sort.sortOrder.created.newestFirst",[La]:"Created: Newest first"}),sort:{field:"created",[Ea]:"desc"}},{key:"created.asc",[Ra]:n()(dt.FormattedMessage,{id:"search.sort.sortOrder.created.oldestFirst",[La]:"Created: Oldest first"}),sort:{field:"created",[Ea]:"asc"}}],Qa=qa;var Ja=i(38755);class $a extends c.default{getInitialState(){return{open:!1}}}const Ya=new $a;var Xa=i(68785),es=i(33411);const ts=i(85).Yzm,is=i(85).tDk,os=i(85).Scd,ns=i(85).nx5,as=i(85).nxm,ss=i(85).XNW,rs=i(85).Au,ls=i(85).wuN,ds=i(85).NLk,cs=i(85).Uie,us=i(85).UPJ,ms=i(85).OM8,ps=i(85).NF1,gs=i(85).IY7,hs=i(85).z$9,vs=i(85).AIq,fs=i(85).jkI,ys=i(85).H1U,bs=i(85).XCs,Ss=i(85).YDv,ws=i(85).X_m,Ms=i(85).Exd,ks=i(85).wJv,Cs=i(85).PcI,Zs=i(85).GPG,Ts=i(85).dLQ,Ps=i(85).t7b,Is=i(85).G4H,Fs=i(85).wgE,_s=i(85).Ixd,xs=i(85).U7z,As=i(85).TtP,Bs=i(85).j6H,Ds=i(85).oUH,Es=i(85).Ttb,Ls=i(85).P0R,Rs=i(85).e$R,Ns=i(85).QmD,Os=i(85).Kgm,Us=i(85).EIp,Vs=i(85)._6l;class Ws extends l.Z{constructor(){super(...arguments),this[Vs]=void 0,this.combined=this[Us]((()=>{var e,t;return P.combineResults({[Os]:null===(e=this[Ls][Rs][Ns][Os])||void 0===e?void 0:e[Es],[Ds]:null===(t=this[Ls][Rs][Ns][Ds])||void 0===t?void 0:t[Es]})})),this[Bs]=this[Us]((()=>{const e=this.combined[Ns];if(void 0===this[Ls].focusedIndexStore[Ns]||!e||e[As]<=0)return;const t=this[Ls][Rs][Ns].insertedActionResultsCount;if(this[Ls].focusedIndexStore[Ns]<t)return;const i=e[this[Ls].focusedIndexStore[Ns]-t];return{focusedResultTitle:v[xs](null==i?void 0:i.store[_s]()),focusedResultIcon:null==i?void 0:i.store.getIcon()}})),this.renderLeft=()=>{var e,t;const{showSpinner:i}=this[Ls],{device:o}=this[Fs],a=this[Is],s={...this[Ps]().searchIcon,...a.searchIcon},r=null===(e=this[Bs])||void 0===e||null===(t=e[Ns])||void 0===t?void 0:t.focusedResultIcon,l=Boolean(N.ZP[Ns].query.text.trim())&&!o[Ts];return n()(es.Z,{show:i,showDelay:500,showHold:200,render:e=>(e=>n()("div",{style:a.headerIcon},void 0,e?n()(Xa.Z,{style:s}):l?n()(kt.Z,{disabled:!0,icon:r,isEmptyPage:Boolean(r),size:20}):st.Z.search(s)))(e)})},this[Zs]=e=>{this.handleTyping();const t=String(e.target.value);this[Ls].onQueryChange(t)},this[Cs]=()=>{N.ZP.resetQuery({resetFilters:!0}),N.ZP.update((e=>({...e,isSidebarOpen:!1,source:"quick_find"})))},this.handleFocus=()=>{const{onFocusChange:e}=this[Ls];e(!0)},this.handleBlur=()=>{const{onFocusChange:e}=this[Ls];e(!1)},this[Is]={[ks]:{[Ms]:18,[ws]:Ws.DESKTOP_INPUT_HEIGHT,[Ss]:12,[bs]:16,[ys]:fs,flexGrow:0,[vs]:0,zIndex:1},inputMobile:{[Ms]:16,border:hs,[gs]:hs,[ps]:7,[ms]:"1.2",padding:"6px 8px"},searchIcon:{width:16,[ws]:16},headerIcon:{[ws]:24,width:24,display:"flex",[ys]:fs,[us]:fs},input:{minWidth:0,...lt.Z[cs]},suggestedText:{[ds]:"pre",color:this[rs][ls]},clearButton:{[ss]:8}}}willUnmount(){this[Vs]&&(clearTimeout(this[Vs]),this[Vs]=void 0)}renderComponent(){var e;const{device:t}=this[Fs],{isOpen:i}=this[Ls],o=this[Is],a=this[Ps](),s=null===(e=this[Bs][Ns])||void 0===e?void 0:e.focusedResultTitle,r=N.ZP[Ns].query.text,l=void 0!==this[Bs][Ns]&&(null==s?void 0:s.slice(0,r[As])[as]())===r[as]()&&r&&r[As]<20&&!t[Ts],d=!l&&void 0!==this[Bs][Ns]&&r&&r[As]<20&&!t[Ts];let c="";l?c=`${null==s?void 0:s.substring(r[As])} — ${Ws.messages.open[ns]}`:d&&(c=s?` — ${Ws.messages.open[ns]} ${s}`:` — ${Ws.messages.open[ns]}`);const u=""!==c&&n()("div",{},void 0,n()("span",{},void 0,r),n()("span",{style:{[os]:this[rs].tint.regular}},void 0,c)),m=t[Ts]?rn.Z.Format.ExtraLarge:rn.Z.Format.Transparent,p=t[Ts]?{...o.inputMobile,...a.inputMobile}:{...o[ks],...a[ks]};return n()(rn.Z,{format:m,placeholder:this.getPlaceholderText(),left:this.renderLeft(),value:r,suggestedText:u,suggestedTextStyle:o.suggestedText,focus:t[Ts]?void 0:i&&!Ya[Ns].open,focusInitial:!(0,Ye.Y)("supportsNativeHome")&&t[Ts],focusAfterAnimation:!0,showClearButton:!0,selectAll:!0,onChange:this[Zs],onClearButtonClick:this[Cs],onFocus:this.handleFocus,onBlur:this.handleBlur,style:p,inputStyle:o.input})}updateIfIsFirstKeyStroke(){void 0===L.default[Ns].firstKeyStrokeTimeMs&&L.default.update((e=>({...e,firstKeyStrokeTimeMs:Date.now()})))}handleTyping(){this.updateIfIsFirstKeyStroke();const{onTypingChange:e}=this[Ls];this[Vs]&&window.clearTimeout(this[Vs]),e(!0),this[Vs]=window.setTimeout((()=>e(!1)),Ws.TYPING_DEBOUNCE_MS)}getPlaceholderText(){const{currentSpaceStore:e,[is]:t}=_.default[Ns],i=e&&(0,Ja.rn)(this[Fs],e);if(i)return this[Ls].intl[ts]({id:"searchInputMenuItem.placeholder.namedSpace",[ns]:"Search {spaceName}…"},{spaceName:i});if(t){const e=v[xs](t[_s]()).slice(0,Ws.MAX_PLACEHOLDER_TITLE_LENGTH);return this[Ls].intl[ts]({id:"searchInputMenuItem.placeholder.namedPage",[ns]:"Search in {pageTitle}…"},{pageTitle:e})}return this[Ls].intl[ts]({id:"searchInputMenuItem.placeholder.unnamedPage",[ns]:"Search in page…"})}[Ps](){return{[ks]:{[gs]:`0 1px 0 ${this[rs].regularDividerColor}`},inputMobile:{[os]:this[rs].inputBackground},searchIcon:{fill:this[rs].mediumIconColor}}}}Ws.displayName="SearchInputMenuItem",Ws.messages=(0,dt.defineMessages)({open:{id:"search.inputMenu.suggestedText.open",[ns]:"Open"}}),Ws.TYPING_DEBOUNCE_MS=300,Ws.DESKTOP_INPUT_HEIGHT=48,Ws.MAX_PLACEHOLDER_TITLE_LENGTH=100;const Ks=(0,dt.injectIntl)(Ws);var zs=i(28020),Gs=i(99417),Hs=i(69327),qs=i(43145),js=i(94184),Qs=i.n(js),Js=i(64369);const $s=i(85).RJH,Ys=i(85).lWm,Xs=i(85).gdQ;function er(e,t){window.__c={n:"SearchActionMenuItem"};const{inline:i,title:o,icon:n,focused:a,isBeforeFocused:s,className:l}=e,d=(0,z.yK)((e=>({[Xs]:{background:e[Ys]}})),[]),c=(0,z.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,...!i&&!s&&!a&&{boxShadow:`0 1px 0 ${e.lightDividerColor}`}},textWrapper:{marginLeft:10,alignItems:void 0,flex:void 0,width:"100%",display:"block",textOverflow:"ellipsis",...i&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor},enterIcon:{height:14,width:14,fill:e.mediumIconColor},[$s]:{marginTop:1}})),[a,i,s]),u={title:o,icon:tr(n,c.icon,c[$s]),style:c.style,textWrapperStyle:c.textWrapper,right:ir(a,c.enterIcon),className:Qs()("notranslate",l),buttonStyle:{paddingLeft:2},[Xs]:d[Xs]};return r.createElement(pt.Z,V()({ref:t},e,u,{disableTransition:!0,ignoreLocalHoverState:!0}))}function tr(e,t,i){return n()(Js.Z,{style:i},void 0,e(t))}function ir(e,t){const i={...t,opacity:e?1:0};return n()("div",{style:{display:"flex"}},void 0,st.Z.enter(i))}const or=r.forwardRef(er);var nr=i(75024),ar=i(63296);const sr=i(85).D7I,rr=i(85).PXg,lr=i(85).x5w,dr=i(85).Uie,cr=i(85).TEz,ur=i(85).AIq,mr=i(85).Y9u,pr=i(85).Exd,gr=i(85).jkI,hr=i(85).H1U,vr=i(85).h8z,fr=i(85).UPJ,yr=i(85).$bT,br=i(85).wgE;class Sr extends l.Z{constructor(){super(...arguments),this.openSidebar=()=>N.ZP.setState({...N.ZP.state,isSidebarOpen:!0}),this.styles={footer:()=>{const{device:e}=this[br];return{display:"flex",[yr]:"row",[fr]:vr,[hr]:gr,[pr]:e.isMobile?lt.Z[pr][mr].mobile:lt.Z[pr][mr].desktop}},footerWrapper:{[ur]:0},footerText:{color:this.theme[cr],[pr]:nr.yv(this[br],"UISmall"),...lt.Z[dr]},[lr]:{...wr(this.theme),[rr]:6}}}renderComponent(){const e=this.styles;return n()("footer",{style:e.footerWrapper},void 0,n()(ft.Z,{topBorder:!0,style:e.footer(),disableDesktopPadding:!0},void 0,r[sr](Ta.Z,V()({},this.props,{style:e.footerText})),(0,rt.x)(M.default)&&!N.ZP.state.isSidebarOpen&&n()(ar.Z,{onClick:this.openSidebar,style:e[lr]},void 0,"Open Debug Sidebar")))}}Sr.displayName="SearchFooterContainer";const wr=e=>({[pr]:12,color:e[cr],marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),Mr=Sr;var kr=i(62134);const Cr=i(85).D4q,Zr=i(85).nx5,Tr=i(85).Yzm,Pr=i(85).TEz,Ir=i(85).Hco,Fr=i(85).jtM,_r=i(85).PXg;function xr(){window.__c={n:"SearchFooterNavigationHints"};const e=(0,W.O7)(),t=(0,dt.useIntl)(),i=(0,z.yK)((t=>({upDownIcon:{[_r]:4,marginBottom:-2,display:Fr,width:12,height:12,fill:t[Ir]},enterIcon:{[_r]:4,marginBottom:-2,display:Fr,width:11,height:11,fill:t[Ir]},commandGlyph:{fontSize:.75*nr.yv(e,"UIRegular"),paddingRight:1,color:t[Pr]},footerText:{fontSize:nr.yv(e,"UISmall"),color:t[Pr],...lt.Z.textOverflowStyle},inlineHint:{display:Fr,[_r]:16}})),[e]),o={...nr.mK,...i.footerText},{command:a}=kr.getShortcutTextItems(e);return n()("ul",{style:o},void 0,n()("li",{style:i.inlineHint},void 0,st.Z.arrowsUpDown(i.upDownIcon),t[Tr]({id:"searchFooter.helpText.selectHint",[Zr]:"Select"})),n()("li",{style:i.inlineHint},void 0,st.Z.enter(i.enterIcon),t[Tr]({id:"searchFooter.helpText.openHint",[Zr]:"Open"})),n()("li",{style:i.inlineHint},void 0,n()("span",{style:i.commandGlyph},void 0,a),st.Z.enter(i.enterIcon),e.device[Cr]?t[Tr]({id:"searchFooter.helpText.openNewWindow",[Zr]:"Open in a new window"}):t[Tr]({id:"searchFooter.helpText.openNewTab",[Zr]:"Open in a new tab"})))}const Ar=i(85).fHe,Br=i(85).Qt1,Dr=i(85).zDZ;var Er=i(45168),Lr=i(43132),Rr=i(19387),Nr=i(84210),Or=i(98742),Ur=i(8323),Vr=i(16402),Wr=i(77907),Kr=i(24039),zr=i(90403),Gr=i(64133),Hr=i(73063),qr=i(53953),jr=i(86176),Qr=i(58032),Jr=i(73299),$r=i(40793),Yr=i(99208),Xr=i(96525);const el=i(85).D7I,tl=i(85).zKq;function il(e){window.__c={n:"SearchBreadcrumbFilterPopup"};const{parent:t,store:i,onClick:o}=e,a=(0,W.O7)(),{device:s}=a;let l;l=s.isMobile?{menuType:q.og.Modal,title:n()(dt.FormattedMessage,{defaultMessage:"Breadcrumb",id:tl}),right:n()(ot.DoneMenuText,{}),onClickRight:t.close}:{menuType:q.og.Popup,width:240};const d=(0,r.useCallback)((()=>{null==o||o({store:i,action:"include"})}),[o,i]),c=(0,r.useCallback)((()=>{null==o||o({store:i,action:"exclude"})}),[o,i]),u=i instanceof ee.zX?"teamspace":"parent page",m={key:"results",render:e=>r[el](ft.Z,e),items:[{key:"include-filter",render:e=>r[el](pt.Z,V()({},e,{title:`Add ${u} to filter`})),action:d},{key:"exclude-filter",render:e=>r[el](pt.Z,V()({},e,{title:`Exclude ${u} from results`})),action:c}]};return r[el](it.Z,l,n()(uo.Z,{type:uo.i.Vertical,onAccept:t.close,initialFocus:void 0,sections:[m]}))}const ol=i(85).j7K,nl=i(85).y79,al=i(85).nx5,sl=i(85).zKq,rl=i(85).Exd,ll=i(85).XCs,dl=i(85).YDv,cl=i(85).vSE,ul=i(85).oWv,ml=i(85).D7I,pl=i(85).BBN,gl=i(85).PvR,hl=i(85).dLQ,vl=i(85).gcw,fl=i(85).TtP,yl=i(85).BQ6,bl=i(85).bey,Sl=i(85).yKA,wl=i(85).SvQ,Ml=i(85).fBf,kl=i(85).XtO,Cl=i(85).P0R,Zl=i(85).PG2;class Tl extends l.Z{constructor(){super(...arguments),this.getFilterPopupRenderer=e=>t=>n()(il,{parent:t,[kl]:e,[Zl]:this[Cl][Zl]}),this[Ml]=e=>({maxWidth:this[Cl][wl],popupRenderer:this.getFilterPopupRenderer(e),iconSize:this[Cl].iconSize,titleStyle:this[Sl](),[bl]:Tl[bl],highlighter:this[Cl].highlighter})}renderComponent(){const{[kl]:e}=this[Cl],t=e.getTitleStore();if(t&&t.isReady())return n()("div",{[yl]:this.getStyle(),className:"notranslate"},void 0,this.renderAncestors())}renderAncestors(){const{[kl]:e,maxAncestorCount:t}=this[Cl],i=Z.getNavigablePath(e),o=e.isNavigableBlock()?i.slice(1):[...i];if(o.reverse(),i.reverse(),o[fl]>t){const[e,n,a]=[o[0],o.slice(1,o[fl]-t+1),o.slice(o[fl]-t+1)];if((0,F.bq)()){const t=a[fl];return[this[vl]({[kl]:e,showDivider:!this[Cl][hl]}),this[gl](this[Cl][hl]?i:n),...a.map(((e,i)=>{const o=!this[Cl][pl]||i!==t-1;return e instanceof ee.zX?r[ml](Yr.Z,V()({[kl]:e,showDivider:o},this[Ml](e))):r[ml]($r.Z,V()({[kl]:e,showDivider:o},this[Ml](e)))}))]}{const e=o.filter((e=>e instanceof ee.G)),i=o.filter((e=>e instanceof ee.G)),n=e[fl];return[r[ml]($r.Z,V()({key:e[0].id,[kl]:e[0],showDivider:!this[Cl][hl]},this[Ml](e[0]))),this[gl](this[Cl][hl]?i:e.slice(1,e[fl]-t+1)),...e.slice(e[fl]-t+1).map(((e,t)=>r[ml]($r.Z,V()({key:e.id,[kl]:e,showDivider:!this[Cl][pl]||t!==n-1},this[Ml](e)))))]}}{const e=o[fl];return o.map(((t,i)=>this[vl]({[kl]:t,showDivider:!this[Cl][pl]||i!==e-1})))}}[vl](e){const{[kl]:t,showDivider:i}=e;return t instanceof ee.zX?r[ml](Yr.Z,V()({[kl]:t,showDivider:i},this[Ml](t))):r[ml]($r.Z,V()({[kl]:t,showDivider:i},this[Ml](t)))}[ul](e){const t=this[Cl][hl]?gt.Z4.SlideUp:gt.Z4.Popup;return[{key:"results",render:e=>r[ml](ft.Z,e),items:e.map(((e,i)=>({key:e.id,render:o=>r[ml](Xr.Z,V()({},o,{stopClickPropagation:!0,popupType:t,renderOrigin:t=>r[ml](Ct.Z,V()({},t,{isSubpage:0!==i,[kl]:e,hidePath:!0,focused:!1})),render:t=>n()(il,{parent:t,[kl]:e,[Zl]:this[Cl][Zl]})})),action:()=>{}})))}]}[gl](e){return n()(gt.ZP,{popupType:this[Cl][hl]?gt.Z4.SlideUp:gt.Z4.Popup,renderOrigin:e=>{var t;return this[Cl][hl]?r[ml](mt.Z,V()({[yl]:{...Tl[cl]},mobileFeedback:!0},e),n()(Jr.f,{}),n()("div",{[yl]:Pl},void 0,"..."),n()(Jr.f,{})):n()("div",{[yl]:Tl[cl]},void 0,r[ml](vt.Z,V()({isSmall:!0},e,{[yl]:{[dl]:2,[ll]:2,[rl]:null===(t=this[Cl][yl])||void 0===t?void 0:t[rl]}}),"..."),n()(Jr.f,{}))},render:t=>{let i;return i=this[Cl][hl]?{menuType:q.og.Modal,title:n()(dt.FormattedMessage,{[al]:"Breadcrumb",id:sl}),right:n()(ot.DoneMenuText,{}),onClickRight:t.close}:{menuType:q.og.Popup,width:240},r[ml](it.Z,i,n()(uo.Z,{type:uo.i[nl],[ol]:void 0,sections:this[ul](e)}))}},"pages-popup")}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,[rl]:this[Cl][hl]?lt.Z[rl].UIRegular.mobile:lt.Z[rl].UIRegular.desktop,color:this.theme.text.tertiary,filter:"grayscale(70%)",...this[Cl][yl]}}[Sl](){return{lineHeight:1.2,[rl]:this[Cl][hl]?lt.Z[rl].UISmall.mobile:lt.Z[rl].UISmall.desktop,color:this.theme.text.tertiary}}}Tl.displayName="SearchPathBreadcrumb",Tl[bl]={marginRight:3},Tl[cl]={display:"flex",alignItems:"center",flexShrink:0};const Pl={marginLeft:3,marginRight:3},Il=i(85).YNC,Fl=i(85).sI1,_l=i(85).I7L,xl=i(85).D7e,Al=i(85).OBh,Bl=(i(85).BBN,i(85).SvQ,i(85).$J2),Dl=i(85).bey,El=i(85).Yzm,Ll=i(85).NF1,Rl=i(85).NR2,Nl=i(85).M4f,Ol=i(85).gFR,Ul=i(85).h8z,Vl=i(85).lme,Wl=i(85).$UZ,Kl=i(85).otH,zl=i(85).IYn,Gl=i(85).fR6,Hl=i(85).fbO,ql=i(85).bSY,jl=i(85).JBY,Ql=i(85).TLr,Jl=i(85).VRX,$l=i(85).yrE,Yl=i(85).cZW,Xl=i(85).NlW,ed=i(85).Oi5,td=i(85).t7b,id=i(85).zEC,od=i(85).tBn,nd=i(85).D7I,ad=i(85).PG2,sd=i(85).FOQ,rd=i(85).DIE,ld=i(85).Gnd,dd=i(85).Wp_,cd=i(85).xad,ud=i(85).TtP,md=i(85).GmX,pd=i(85).rBf,gd=i(85).OP1,hd=i(85).UA5,vd=i(85).ewQ,fd=i(85).Au,yd=i(85).Scd,bd=i(85).XCs,Sd=i(85).fsm,wd=i(85).QNi,Md=i(85).Exd,kd=i(85).T9w,Cd=i(85).aFd,Zd=i(85).g4H,Td=i(85).PXg,Pd=i(85).X_m,Id=i(85).UPJ,Fd=i(85).$bT,_d=i(85).NLk,xd=i(85).nNG,Ad=i(85).gGi,Bd=i(85).jkI,Dd=i(85).H1U,Ed=i(85).XNW,Ld=i(85).Mm1,Rd=i(85).E0z,Nd=i(85).dLQ,Od=i(85)._V5,Ud=i(85).jms,Vd=i(85).Jkr,Wd=i(85).EMU,Kd=i(85).sM5,zd=i(85).OM8,Gd=i(85).ChN,Hd=i(85).TPm,qd=i(85).uGP,jd=i(85).qcw,Qd=i(85).se3,Jd=i(85).O87,$d=i(85).LIR,Yd=i(85).wgE,Xd=i(85).wOu,ec=i(85).paz,tc=i(85).BQ6,ic=i(85).G4H,oc=i(85).qOV,nc=i(85).mv_,ac=i(85).QmD,sc=i(85).VMs,rc=i(85).Lyb,lc=i(85).DPi,dc=i(85).zkl,cc=i(85).P0R,uc=i(85).XtO,mc=i(85).Joh,pc=i(85).wfR,gc=i(85).zQS,hc=i(85).nx5,vc=(0,dt.defineMessages)({openInSidePeekButtonLabel:{id:"search.result.openInSidePeek.button.label",[hc]:"Open search result in side peek"},copySearchResultLinkButtonLabel:{id:"search.result.copyLink.button.label",[hc]:"Copy link to search result"}});class fc extends l.Z{constructor(){super(...arguments),this.storeTypes={[gc]:c.default[pc](!1)},this[mc]=()=>n()(Kr.Z,{[uc]:this[cc][uc]}),this.handleSearchPathBreadcrumbClick=e=>{let{[uc]:t,action:i}=e;"block"===t[dc]?"include"===i?N.ZP.updateFilters({[lc]:s().uniq(N.ZP[ac][sc][rc][lc].concat(t.id))}):N.ZP.updateFilters({[nc]:s().uniq((N.ZP[ac][sc][rc][nc]||[]).concat(t.id))}):"team"===t[dc]&&("include"===i?N.ZP.updateFilters({inTeams:s().uniq((N.ZP[ac][sc][rc].inTeams||[]).concat(t.id))}):N.ZP.updateFilters({[oc]:s().uniq((N.ZP[ac][sc][rc][oc]||[]).concat(t.id))}))},this.renderVerifiedBadge=()=>n()(zr.Z,{[tc]:this[ic].badge,[ec]:n()("div",{[tc]:this[ic].badgeContent},void 0,st.Z.typesVerification(this[ic].verifiedBadgeIcon),n()("div",{[tc]:this[ic].badgeCaption},void 0,n()(dt.FormattedMessage,{id:"search.result.verified.badge.text",[hc]:"Verified"})))}),this.renderPopularThisWeekBadge=()=>n()(zr.Z,{[tc]:this[ic].badge,[ec]:n()("div",{[tc]:this[ic].badgeCaption},void 0,n()(dt.FormattedMessage,{id:"search.result.popularThisWeek.badge.text",[hc]:"Popular this week"}))}),this.renderMostViewedBadge=()=>n()(zr.Z,{[tc]:this[ic].badge,[ec]:n()("div",{[tc]:this[ic].badgeCaption},void 0,n()(dt.FormattedMessage,{id:"search.result.mostViewed.badge.text",[hc]:"Most viewed"}))}),this.renderIsTemplateBadge=()=>n()(zr.Z,{[ec]:n()("div",{[tc]:this[ic].grayedOutBadgeCaption},void 0,n()(dt.FormattedMessage,{id:"search.result.template.badge.text",[hc]:"Template"}))}),this.getPageVisitSource=()=>"recent_pages"===this[cc].type?u.tY.SearchRecents:u.tY.SearchQuery,this.handleOpenInSidePeek=()=>{const{[uc]:e,queryId:t,result:i}=this[cc],o=this.getPageVisitSource();i?b.navigateToSearchResult({searchResult:i,[Xd]:!0,[Yd]:this[Yd],[$d]:o,queryId:t,openInNew:void 0}):b.navigateToPage({[uc]:e,queryId:t,[Yd]:this[Yd],[$d]:o,[Xd]:!0,peekMode:"s"})},this.handleCopy=()=>{const{[uc]:e,queryId:t}=this[cc],i=(0,Nr.ZP)({[uc]:e,[$d]:this.getPageVisitSource(),queryId:t});Lr[Jd]({[Yd]:this[Yd],[Qd]:i,[jd]:Lr[Hd][qd]})},this[ic]={title:{[Gd]:lt.Z[Gd].medium,[zd]:"20px"},titleContent:{[Kd]:Wd,...this[cc].inline?{}:{[Vd]:0,flexGrow:1}},menuItem:{[Ud]:36,[Od]:this[Yd][Rd][Nd]?12:8,[Ld]:this[Yd][Rd][Nd]?12:8},textWrapper:{[Ed]:4,[Dd]:Bd,[Vd]:Ad},inlineTextWrapper:{[Dd]:Bd},[xd]:{[Gd]:lt.Z[Gd].medium},vectorHighlight:{[Gd]:lt.Z[Gd].medium,[_d]:"pre-wrap"},rightContentWrapper:{[Kd]:Wd,[Fd]:"row",[Dd]:Bd,[Id]:Bd},rightIcon:{[Pd]:16,[Vd]:16},rightIconButtonIcon:{[Pd]:12,[Vd]:12},rightIconButtonWrapper:{[Pd]:18,[Vd]:18,[Td]:6},uniqueIDBadgeWrapper:{[Kd]:Wd,gap:8,[Td]:8,[Dd]:Bd},[Zd]:{marginTop:1},debugArea:{[Cd]:"monospace"},[kd]:{[Md]:lt.Z[Md].UISmall.desktop,[Gd]:lt.Z[Gd].regular},[wd]:{[Sd]:300},tooltipTitle:{[Gd]:lt.Z[Gd].medium,[Md]:lt.Z[Md].UISmall.desktop},tooltipText:{[Gd]:lt.Z[Gd].medium,[Md]:lt.Z[Md].UISmall.desktop,[Ed]:0,[bd]:20},tooltipValue:{[Md]:lt.Z[Md].UISmall.desktop,[Gd]:lt.Z[Gd].regular},tooltipMenuItem:{[Ud]:20},badge:{[yd]:"light"===this[fd].mode?this[fd][vd].blue[30]:this[fd][vd].blue[200]},badgeContent:{[Kd]:Wd,[Dd]:Bd,[Vd]:Ad},badgeCaption:{[Ed]:2,[hd]:this[fd][gd]},grayedOutBadgeCaption:{[Ed]:1},vectorBadge:{[yd]:this[fd][pd],[hd]:this[fd][md]},verifiedBadgeIcon:{[Vd]:10,[Pd]:10,fill:this[fd][gd]},right:{[Kd]:Wd},collectionTextMatchingProperty:{[zd]:2}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:i}=e;if(2===i[ud]&&"_explanation"===i[0])return{[cd]:r[nd](r[od],null,n()(sd,{[ad]:e=>{this[ld][gc][dd](!0),e[rd]()}},void 0,"show simplified explanation")),[id]:!1};const o=t._ltrlog;if(o)return function(e){const t=Object.keys(e[0])[0],i=e[0][t].map(((e,t)=>{const i=t%2==0?wc:Sc;return n()("tr",{},e.name,n()("td",{[tc]:i},void 0,`${t}`),n()("td",{[tc]:i},void 0,`${e.name}`),n()("td",{[tc]:i},void 0,`${e.value}`))}));return{[cd]:r[nd](r[od],null,n()("div",{},void 0,n()("b",{},void 0,`Featureset: ${t}`)),n()("div",{[tc]:Mc},void 0,n()(dc,{[tc]:kc},void 0,i))),[id]:!1}}(o);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:a,matched_queries:s}=t;return{[cd]:r[nd](r[od],null,`score ${a}, ${(s??[])[ud]} matched query clauses`),[id]:!1}}}renderComponent(){const{focused:e,isLastInSection:t,isBeforeFocused:i,inline:o,className:a}=this[cc],s=this[ic],l=this[td](),d={...s.menuItem,...!o&&!t&&!i&&!e&&l.menuItemBorder},c={...s[Zd],...l[Zd]},u={...s[kd],...l[kd]},m={...s.textWrapper,...this[cc].inline&&s.inlineTextWrapper},p={title:this.renderTitle(),icon:this.renderIcon(),[Zd]:this[ed](),body:this[Xl](),right:this.renderRight(),rightStyle:e?void 0:u,dontShrinkRight:!0,captionStyle:c,[tc]:d,spacerStyle:this.hasPath()?void 0:Cc,textWrapperStyle:m,className:Qs()("notranslate",a),buttonStyle:{paddingLeft:2},hoveredStyle:{[yd]:this[fd].tint.regular}};return(0,Ur.isMultiplayerEnabled)()?n()(Qr.Z,{delayThreshold:50,placement:Qr.Z.Placement.Right,originGap:18,[mc]:this[mc],[tc]:s[wd],render:e=>r[nd](pt.Z,V()({},this[cc],p,{disableTransition:!0},(0,Or.Z)(this[cc],e)))}):r[nd](pt.Z,V()({},this[cc],p,{disableTransition:!0,ignoreLocalHoverState:!0}))}renderTitle(){var e,t,i;const{[uc]:o,result:a,[Yl]:s,index:r}=this[cc],l=this[ic],d=this[td](),c=void 0===a,u={...l.title,...!c&&!this[cc].focused&&d[$l]},m=[];if(a&&a[xd])if(m.push(...(0,C.fe)(a[xd].pathText)),this[Jl]())m.push(...(0,C.fe)(a[xd].title));else{ee.G[Ql](this[cc][uc],{[dc]:Q.iU,id:a.id,spaceId:a.spaceId})[jl]()&&m.push(...(0,C.fe)(a[xd].text))}let p,g=!1;var h;"development"===M.default.env&&(null!=a&&null!==(e=a[ql])&&void 0!==e&&e[Hl](J.SearchResultSource[Gl])||null!=a&&null!==(t=a[ql])&&void 0!==t&&t[Hl](J.SearchResultSource[zl]))&&(g=!0,p=null!=a&&null!==(h=a[ql])&&void 0!==h&&h[Hl](J.SearchResultSource[Gl])?"Vector Block":"Vector Collection");const v=this[cc].focused?void 0:this[Kl]({words:m}),f=null===(i=(0,Z.getTeam)(o))||void 0===i?void 0:i.isArchived(),y=(0,Er.e)(a);const b=D.default.getState()[Vl].enablesBadges&&(0,Ur.isMultiplayerEnabled)()?function(){function e(e){var t;return void 0!==(null==a||null===(t=a.badges)||void 0===t?void 0:t.find((t=>t.type===e)))}return e("is_template")?Wl:e("verified")?"verified":e("popular_this_week")?"popular_this_week":e("most_viewed")?"most_viewed":void 0}():void 0,S={[Wl]:this.renderIsTemplateBadge,verified:this.renderVerifiedBadge,popular_this_week:this.renderPopularThisWeekBadge,most_viewed:this.renderMostViewedBadge};return n()("div",{[tc]:{[Kd]:Wd,[Id]:Ul,...u}},void 0,n()("div",{[tc]:l.titleContent},void 0,B.ZP[ac].showDebugInfo&&void 0!==r&&`${r+1}. `,y&&this[Ol](a),n()(Zt.Z,{[tc]:u,[uc]:o,[Yl]:s,highlighter:v}),g&&n()(zr.Z,{[ec]:p,[tc]:this[ic].vectorBadge}),f&&n()(zr.Z,{[ec]:n()("div",{[tc]:this[ic].grayedOutBadgeCaption},void 0,n()(dt.FormattedMessage,{id:"search.result.archived.badge.text",[hc]:"Archived"}))}),b&&S[b]()),B.ZP[ac].showDebugInfo&&this.renderDebugIcons())}[Ol](e){var t;const{focused:i}=this[cc],o=null==e||null===(t=e[xd])||void 0===t?void 0:t.uniqueId;if(!o)return;const a="dark"===this[Yd].ThemeStore[ac].mode,s=this[ic],r=this[Kl]({words:[o]}),l=i?a?co.FN.dark[Nl][300]:co.se.light.darkgray.alpha(.09):a?co.FN.dark[Nl][200]:co.se.light.darkgray.alpha(.06);return n()("div",{[tc]:s.uniqueIDBadgeWrapper},void 0,n()("div",{},void 0,n()(Gr.Z,{text:o,highlighter:r})),n()("div",{[tc]:{[Rl]:`1.5px solid ${l}`,[Pd]:14,[Ll]:1}}))}renderRight(){return n()("div",{[tc]:this[ic].right},void 0,this.rightContent())}rightContent(){const{lastViewed:e,focused:t}=this[cc];if(this[Yd][Rd][Nd])return;if(e&&!t)return(0,Vr.IS)(e,{useCompactFormat:!0});const i=this[ic],o=this[td](),a={...i.rightIcon,...o.enterIcon,opacity:t?1:0},s={...i.rightIconButtonIcon,opacity:t?1:0};return("development"===M.default.env||"local"===M.default.env)&&"on"===A.default.getGroup("search-results-new-utilities")?n()("div",{[tc]:i.rightContentWrapper},void 0,n()(Hr.Z,{icon:st.Z.peekModeSide,[Dl]:s,showShadow:t,[tc]:i.rightIconButtonWrapper,[ad]:this.handleOpenInSidePeek,ariaLabel:wt.default[El](vc.openInSidePeekButtonLabel)}),n()(Hr.Z,{icon:st.Z.copy,[Dl]:s,showShadow:t,[tc]:i.rightIconButtonWrapper,[ad]:this.handleCopy,ariaLabel:wt.default[El](vc.copySearchResultLinkButtonLabel)}),st.Z.enter(a)):st.Z.enter(a)}renderDebugIcons(){var e;const{result:t,index:i,originalPosition:o}=this[cc],a=null===(e=(null==t?void 0:t[ql])??[])||void 0===e?void 0:e.flatMap((e=>e===J[Bl].Local?["💻"]:e===J[Bl].ElasticSearch?["🌐"]:e===J[Bl].Postgres?["🐘"]:e===J[Bl][Gl]||e===J[Bl][zl]?["🔭"]:e===J[Bl].ElasticsearchRandom?["🎲"]:e===J[Bl].ElasticsearchUniqueID?["🆔"]:e===J[Bl].ElasticsearchForcedRecentRecall?["⏰"]:void(0,g.unreachable)(e))).reverse(),s=[...void 0===i||void 0===o?[" "]:i>o?["⬇️"]:i<o?["⬆️"]:[],...a].join("").trim();return s&&n()("span",{},void 0,s)}renderIcon(){const{[uc]:e}=this[cc];return n()(kt.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:20,largeIcon:!1})}[ed](){var e;const{[uc]:t,inline:i,result:o,debugLocal:a,debugHits:s}=this[cc],{[Rd]:l}=this[Yd],d=this[Kl]({words:(0,C.fe)(o&&o[xd]&&o[xd].pathText),removeDuplicate:!0}),c=i||l[Nd]?0:2,u=(s??[]).find((e=>"elasticsearch"===e.type&&void 0!==e._explanation)),m="elasticsearch"===(null==u?void 0:u.type)?null==u?void 0:u._explanation:void 0,p=null==o||null===(e=o.matchedCollectionProperties)||void 0===e?void 0:e.collectionText;return r[nd](r[od],null,n()(jr.Z,{[uc]:t,extraLength:c,showFullPathInTooltip:!0,highlighter:d,enableHoverAncestor:!0,tooltipStyle:this[td]().captionTooltip,tooltipDividerStyle:this[td]().captionTooltipDivider}),void 0!==p&&n()(Rr.Z,{[Al]:p,showIcon:!0,[tc]:this[ic].collectionTextMatchingProperty}),r[nd]("div",{ref:this[cc].debugAreaRef},a&&n()("div",{[tc]:this[ic].debugArea},void 0,n()(Wr.LazyAdminReactJson,{data:{debugLocal:a},defaultCollapsed:!0,[xl]:[bc],showCopyButton:!1,showModalButton:!1})),s&&n()("div",{[tc]:this[ic].debugArea},void 0,n()(Wr.LazyAdminReactJson,{data:{debugHits:s},defaultCollapsed:!0,[xl]:[this.debugHitCustomRenderer],showCopyButton:"small",showModalButton:!0})),s&&(null==o?void 0:o.rankingSignals)&&n()("div",{[tc]:this[ic].debugArea},void 0,n()(Wr.LazyAdminReactJson,{data:{rankingSignals:o.rankingSignals},defaultCollapsed:!0,showCopyButton:"small",showModalButton:!1})),m&&n()(qr.Z,{open:this[ld][gc][ac],[Fl]:{[_l]:"90vh",[Sd]:"90vw",[Pd]:"90vh",[Vd]:"90vw",overflow:"scroll",padding:10},onDismiss:()=>{this[ld][gc][dd](!1)},render:()=>n()("pre",{},void 0,function(e){var t;let{explanation:i,simple:o=!1,filterZeros:n=!1}=e;return function e(t,i){if(!t)return[];const{value:a,[Dr]:s,details:r}=t;if(0===a&&n)return[];const l=(0===a?"0":a.toFixed(4)).padStart(8);function d(e){return`${"  ".repeat(i+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0))}${e}`}const c=`[${l}] ${s}`;if(s[Br]("match on required clause"))return[d(`[${l}] match on required clause ${null==r?void 0:r[1][Dr]}`)];if(["max of:","sum of:","min of:"].includes(s)&&1===(null==r?void 0:r.length))return e(r[0],i);if(s[Br]("tf")||s[Br]("idf")){var u;const e=s.split(",")[0],t=null===(u=s.split(" computed as ")[1])||void 0===u?void 0:u[Ar](" from:","");return[d(`[${l}] ${e}: [${(r??[]).map((e=>`${e[Dr].split(",")[0]}=${e.value}`)).join(" ")}] --\x3e ${t}`)]}if(s[Br]("ConstantScore(_id:"))return[d(`[${l}] ids query`)];const m=o&&0!==i&&(s[Br]("weight")||s[Br]("Function"));return[d(c[Ar](", result of:","")[Ar](" from:","")[Ar](" [PerFieldSimilarity]","")[Ar](/:$/,"").trim()),...(m?[]:r??[]).flatMap((t=>e(t,i+1)))]}(null==i||null===(t=i.details)||void 0===t?void 0:t[0],0)}({explanation:m}).join("\n"))})))}[Xl](){var e,t;const{result:i}=this[cc];if(!i)return;if(!i[xd])return;if(ee.G[Ql](this[cc][uc],{[dc]:Q.iU,id:i.id,spaceId:i.spaceId})[jl]()&&!this[Jl]())return;const o=i[xd].text||i[xd].collectionText;if(!o)return;const a=(0,C.ZP)(o);if(this[Jl]()){const e=e=>e.filter(C.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,C.ZP)(t)),o=[...new Set([...t(i[xd].title),...t(i[xd].pathText)])],n=e=>o.some((t=>t[Hl](e)));if(e(a).every((e=>n(e))))return}const s=this[ic],l=null!==(e=i[ql])&&void 0!==e&&e[Hl](J.SearchResultSource[Gl])||null!==(t=i[ql])&&void 0!==t&&t[Hl](J.SearchResultSource[zl])?s.vectorHighlight:s[xd],d=this[td]();return r[nd](r[od],null,n()(Gr.Z,{text:o,highlighter:{tokenize:e=>(0,C.Vu)(a),[tc]:{...l,...d.highlightedText}}}))}[Jl](){const{result:e}=this[cc];return e&&!e[ql][Hl](J.SearchResultSource.Local)}[Kl](e){const{words:t,removeDuplicate:i}=e;if(0===t[ud])return;const o={...this[ic][xd],...this[td]().highlightedText},n=i?new Set:void 0;return{tokenize:e=>(0,C.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:n}),[tc]:o}}hasPath(){const{hidePath:e,[uc]:t}=this[cc];return!e&&(0,jr.L)(t)}[td](){return{[$l]:{[hd]:this[fd].text[Il]},menuItemBorder:{boxShadow:`0 1px 0 ${this[fd].lightDividerColor}`},highlightedText:{[hd]:this[fd].text.primary},enterIcon:{fill:this[fd].icon[Il]},bookmarkedIcon:{fill:this[fd].topbarFavorite},[Zd]:{[hd]:this[fd].text[Il]},captionTooltip:{[hd]:this[fd].text.contrast},captionTooltipDivider:{[hd]:this[fd].text.contrast},[kd]:{[hd]:this[fd].text.tertiary},tooltipTitle:{[hd]:this[fd].text[Il]},tooltipText:{[hd]:this[fd].text.primary},tooltipValue:{[hd]:this[fd].text.tertiary}}}}fc.displayName="SearchResultMenuItem",fc.contextTypes={...q.mw,...l.w};const yc=fc,bc=e=>{let{data:t}=e;const i=t;if(!i)return null;const{localSource:o,score:n,frecencyScore:a,personalizationBoost:s}=i;let l=o;return l||(l=new Set("unknown")),{[cd]:r[nd](r[od],null,`from ${[...l].join(",")} [s ${n} | f ${a} | b ${s}]`),[id]:!1}},Sc={paddingLeft:5,[bd]:20,[Od]:2,[Ld]:2,border:"1px solid black",[hd]:co.FN.dark.green[900]},wc={...Sc,[hd]:co.FN.dark.gray[30]},Mc={[_l]:200,overflowY:"scroll"},kc={border:"1px solid black"};const Cc={visibility:"hidden"},Zc=(i(85).QaA,i(85).rLh,i(85).nx5),Tc=i(85).o9u,Pc=i(85).MRL,Ic=i(85).Hww,Fc=i(85).nrD,_c=i(85).OM8,xc=i(85).XNW,Ac=i(85).g7N,Bc=i(85).ChN,Dc=i(85).nAm,Ec=i(85).gGi,Lc=i(85).Wp_,Rc=i(85).g65,Nc=i(85).Gnd,Oc=i(85).ve3,Uc=i(85).Dd5,Vc=i(85).m3I,Wc=i(85).nQ3,Kc=i(85).j7K,zc=i(85).y79,Gc=i(85).rGB,Hc=i(85).lsp,qc=i(85).lGm,jc=i(85).Lhq,Qc=i(85).ELX,Jc=i(85).D7I,$c=i(85).YDv,Yc=i(85).dLQ,Xc=i(85).rpY,eu=i(85).XBA,tu=i(85).v8q,iu=i(85).JmH,ou=i(85).Ql2,nu=i(85).UpL,au=i(85).X5t,su=i(85).XtO,ru=i(85).cmB,lu=i(85).Juc,du=i(85).qJ8,cu=i(85).wgE,uu=i(85).QmD,mu=i(85).XjH,pu=i(85).chv,gu=i(85).wfR,hu=i(85).RlD;class vu extends l.Z{constructor(){super(...arguments),this.storeTypes={[hu]:c.default[gu](!1),[pu]:c.default[gu](!1)},this[mu]=()=>{if(!Mt.X4[uu])return;const{device:e}=this[cu],t=this.defaultViewStyles,{[du]:i}=_.default[uu];if(!i)return;const o=(0,zs.getCurrentPageStore)(),a=Mt.X4[uu].filter((e=>e[lu]!==(null==o?void 0:o.id))),s={};a.forEach((e=>{let{[lu]:t,[ru]:i}=e;return s[t]=i}));const l=new Map;a.map(((t,i)=>{const o=Mt._5(t[ru]),n="Today"!==o&&"Yesterday"!==o,a={key:`${t[su].id}:${i}`,[au]:e=>this.props.onSelect({[au]:e,[nu]:"recents",selectedResult:{[su]:t[su],id:t[su].id,score:-1,[ou]:t[su][iu](),sources:[J.SearchResultSource.Local],featureGroups:[],[tu]:i,[eu]:void 0}}),[Xc]:i=>r[Jc](yc,V()({},i,{inline:!e[Yc],[su]:t[su],hidePath:!1,lastViewed:n?s[t[su].id]:void 0,[Qc]:{[$c]:1},type:"recent_pages"}))};var d;l.has(o)?null===(d=l.get(o))||void 0===d||d.push(a):l.set(o,[a])}));const d=[];(0,Gs.lN)()&&d.push({key:jc,items:[{key:"actionMenuItem.assistant",[au]:()=>{S.Ky({[cu]:this[cu]})},[Xc]:e=>r[Jc](or,V()({},e,{title:n()("div",{[qc]:"notranslate",style:t.notionAiLabel},void 0,"Ask Notion AI"),icon:e=>st.Z.sparkles({...e,...t.notionAiIcon})}))}],[Xc]:e=>n()(ft.Z,{title:"Actions",desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t[Hc]},void 0,e[Gc])});for(const[r,u]of l.entries()){const e=this.getMessageFromBucket(r),i={key:r,items:u,[Xc]:i=>n()(ft.Z,{title:e,desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t[Hc]},void 0,i[Gc])};d.push(i)}const c=!e[Yc]&&a.length>0;return r[Jc](r.Fragment,null,n()("div",{style:t.wrapper},void 0,n()(uo.Z,{type:uo.i[zc],[Kc]:0,disableKeyboardArrowWrap:!0,[Wc]:d,unfocusOnScroll:!0}),n()(qs.Z,{[Uc]:this[Vc]})),c&&n()(Mr,{title:n()(xr,{})}))},this[Vc]=e=>{this[Oc]()&&e<=200&&!this[Nc][hu][uu]&&!this[Nc][pu][uu]&&this.loadMoreRecents()},this.loadMoreRecents=s().throttle((async()=>{const e=this[Oc](),{[du]:t}=_.default[uu],i=this[cu][Rc].id,o=null==t?void 0:t.id;if(!i||!o||!e)return;this[Nc][hu][Lc](!0);const n=await Mt.Od(e,{[cu]:this[cu],userId:i,[ou]:o});this[Nc][hu][Lc](!1),n||this[Nc][pu][Lc](!0)}),300),this.defaultViewStyles={wrapper:{width:Ec,height:Ec,overflowX:Dc,overflowY:"auto"},sectionHeader:{[Bc]:lt.Z[Bc].semibold,[Ac]:7,[xc]:2},[Hc]:{[Ac]:18},notionAiLabel:{[_c]:"20px",fontSize:15,[Fc]:Ic,overflow:Dc,display:"block",color:this.theme[Pc],[Bc]:lt.Z[Bc].semibold},notionAiIcon:{fill:this.theme[Pc]}}}[Oc](){const{[du]:e}=_.default[uu];if(!e)return;const t=Hs.Z[Tc](e.id),i=t[t.length-1];return null==i?void 0:i[ru]}getMessageFromBucket(e){switch(e){case"Today":return n()(dt.FormattedMessage,{id:"search.recentPagesTimeBuckets.today.text",[Zc]:"Today"});case"Yesterday":return n()(dt.FormattedMessage,{id:"search.recentPagesTimeBuckets.yesterday.text",[Zc]:"Yesterday"});case"Past Week":return n()(dt.FormattedMessage,{id:"search.recentPagesTimeBuckets.pastWeek.text",[Zc]:"Past Week"});case"Past 30 Days":return n()(dt.FormattedMessage,{id:"search.recentPagesTimeBuckets.past30Days.text",[Zc]:"Past 30 Days"});case"Older":return n()(dt.FormattedMessage,{id:"search.recentPagesTimeBuckets.older.text",[Zc]:"Older"})}(0,g.unreachable)(e)}}vu.displayName="SearchDefaultBody";const fu=vu;var yu=i(15157),bu=i(34859),Su=i(79131),wu=i(18647),Mu=i(76725),ku=i(19889),Cu=i(7928);const Zu=i(85).voC,Tu=i(85).TLr,Pu=(i(85)._0y,i(85).HPN,i(85).cMN),Iu=i(85).F7X,Fu=(i(85).nyS,i(85).G63,i(85).nx5),_u=i(85).TtP,xu=i(85).KC6,Au=i(85).TOD;function Bu(e){window.__c={n:"SearchFilterBarTitle"};const{filterUIName:t}=e,{parentStore:i}=(0,r.useContext)(Qy),o=(0,K.VK)((()=>N.ZP.state.query.filters),[]),a=(0,z.yK)((e=>({title:{maxWidth:220,...lt.Z.textOverflowStyle}})),[]),l=(0,K.VK)((()=>{switch(t){case"personFilter":return function(e,t){const i=e.createdBy,o=wt.default.getIntl(),n=s().compact(i.map((e=>{const i=ee.U6[Tu](t,{table:ku.KJ,id:e});return(0,Cu.Nz)(o,i.getModel())})));return(0,Mu.Z)(n,Ru)}(o,i);case"teamsFilter":case Au:return function(e,t){const i=e.inTeams;if(!i)return[];const o=s().compact(i.map((e=>ee.zX[Tu](t,{table:di.e0,id:e}).getName())));return(0,Mu.Z)(o,Ru)}(o,i);case"pageFilter":return Nu(o,i);case"dateFilter":return function(e){const t=wt.default.getIntl(),i=Eu(e);if("createdTime"===i)return P.formatDateRange(e[Iu],t);if("lastEditedTime"===i)return P.formatDateRange(e[Pu],t);return""}(o);case"pageFilter":case xu:return Nu(o,i);case"titleToggle":return[];default:(0,g.unreachable)(t)}}),[i,t,o]);return n()("div",{style:a.title},void 0,n()(dt.FormattedMessage,{[Fu]:"{filterName}{colon} {filterOperator} {filterValues}",id:"search.filterBarFilter.title",values:{filterName:Du(t),filterOperator:0===l[_u]?void 0:Lu(t,o),filterValues:l,colon:0===l[_u]?void 0:":"}}))}function Du(e){switch(e){case"personFilter":return n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.person",[Fu]:"Created by"});case"teamsFilter":return n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",[Fu]:"Teamspace"});case"pageFilter":return n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",[Fu]:"In"});case"dateFilter":return n()(dt.FormattedMessage,{id:"search.filterMenu.moreFilters.date",[Fu]:"Date"});case"titleToggle":return n()(dt.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",[Fu]:"Title only"});case xu:return n()(dt.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInPageFilter.label",[Fu]:"[dev] Not in page"});case Au:return n()(dt.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInTeamFilter.label",[Fu]:"[dev] Not in teamspace"})}(0,g.unreachable)(e)}function Eu(e){const t=P.isFilterActive[Iu](e[Iu]),i=P.isFilterActive[Pu](e[Pu]);return t?Iu:i?Pu:void 0}function Lu(e,t){switch(e){case"personFilter":case"teamsFilter":case"pageFilter":case xu:case Au:case"dateFilter":case"titleToggle":return}(0,g.unreachable)(e)}const Ru=e=>", ";function Nu(e,t){const i=e.ancestors,o=s().compact(i.map((e=>{const i=ee.G[Tu](t,{table:Q.iU,id:e});return i.isDefined()?i.getModel().getRenderTitle({[Zu]:i[Zu],userTimeZone:(0,Fo.r)(),intl:wt.default.getIntl()}):""})));return(0,Mu.Z)(o,Ru)}var Ou=i(41558),Uu=i(3386),Vu=i(44532),Wu=i(14871),Ku=i(83264);const zu=i(85).Neb,Gu=i(85).nx5,Hu={today:n()(dt.FormattedMessage,{[Gu]:"Today",id:"searchDateFilter.quickActions.today.label"}),pastWeek:n()(dt.FormattedMessage,{[Gu]:"Last 7 days",id:"searchDateFilter.quickActions.last7Days.label"}),pastMonth:n()(dt.FormattedMessage,{[Gu]:"Last 30 days",id:"searchDateFilter.quickActions.last30Days.label"})};function qu(e){let{date:t,onClick:i,onDismiss:o}=e;const a=(0,Fo.r)(),s=Io.today(a),r=s;let l;const d=Hu[t];"today"===t?l=s:"pastWeek"===t?l=Io.lastWeek(a):"pastMonth"===t?l=Io.lastMonth(a):(0,g.unreachable)(t);return n()(pt.Z,{focused:!1,icon:st.Z.calendar({height:18,width:18}),title:d,onClick:e=>{i({value:{starting:{type:"date",[zu]:l[zu]},ending:{type:"date",[zu]:r[zu]}}}),o(e)}})}const ju=i(85)._lc,Qu=i(85).ayt,Ju=i(85).R6V,$u=i(85).HPN,Yu=i(85).F7X,Xu=i(85)._0y,em=i(85).cMN,tm=i(85).ufi,im=i(85).ccq,om=i(85).ESK,nm=i(85).XNW,am=i(85).jkI,sm=i(85).H1U,rm=i(85).h8z,lm=i(85).UPJ,dm=i(85).AIq,cm=i(85).NF1,um=i(85).XCs,mm=i(85).YDv,pm=i(85).Exd,gm=i(85).ChN,hm=i(85).a3v,vm=i(85).wuN,fm=i(85).g7N,ym=i(85).Au,bm=i(85).dMt,Sm=i(85).rOg,wm=i(85).vyS,Mm=i(85).nLZ,km=i(85).$Vg,Cm=i(85).PXg,Zm=i(85).PP_,Tm=i(85).Jkr,Pm=i(85).X_m,Im=i(85).EMU,Fm=i(85).sM5,_m=i(85)._B2,xm=i(85).Mm1,Am=i(85).wgE,Bm=i(85).E0z,Dm=i(85).dLQ,Em=i(85)._V5,Lm=i(85).YGn,Rm=i(85).HK6,Nm=i(85).nuP,Om=i(85).Lnw,Um=i(85).JcN,Vm=i(85).WCo,Wm=i(85).Wp_,Km=i(85).pkR,zm=i(85).D7I,Gm=i(85).wJk,Hm=i(85).OYG,qm=i(85).ANz,jm=i(85).BQ6,Qm=i(85).nx5,Jm=i(85).NeY,$m=i(85).KJg,Ym=i(85).PG2,Xm=i(85).fxG,ep=i(85).Jyz,tp=i(85).QmD,ip=i(85).G4H,op=i(85).Gnd,np=i(85).P0R,ap=i(85).Zij,sp=i(85).zJh,rp=i(85).XtO;class lp extends l.Z{constructor(){super(...arguments),this.storeTypes={[rp]:Ou.Z},this[sp]=()=>{const{icon:e,[ap]:t}=this[np],{[rp]:i}=this[op],o=this[ip],{dateFilterType:a}=i[tp],s=N.ZP[tp].query.filters[a][ep];return n()(qi.Z,{on:Boolean(s),icon:e(o.pillIcon),[ap]:n()("span",{},void 0,t),[Ym]:this[Xm]})},this[$m]=()=>{const{[ap]:e}=this[np],{[rp]:t}=this[op];return r[zm](r.Fragment,null,n()("div",{[jm]:this[ip].dateFilterHeader},void 0,this[Jm](),n()(mt.Z,{[jm]:this[ip].clearButton,[Ym]:this.handleClear},void 0,n()(dt.FormattedMessage,{[Qm]:"Clear",id:"searchDateFilter.clearButton.label"}))),n()("div",{[jm]:this[ip].quickDatesWrapper},void 0,n()(qu,{date:"today",[Ym]:this[qm],[Gm]:this[Hm]}),n()(qu,{date:"pastWeek",[Ym]:this[qm],[Gm]:this[Hm]}),n()(qu,{date:"pastMonth",[Ym]:this[qm],[Gm]:this[Hm]})),n()(Ku.Z,{[ap]:e,value:this.getCurrentValue(),onUpdate:this[qm],[rp]:t,[Gm]:this[Hm],hideDateInputMenuItems:!0}))},this[Xm]=()=>{const{[Km]:e}=this[np],{[rp]:t}=this[op];e||t[Wm]({...t[tp],[Vm]:!0,focus:ep})},this[Hm]=e=>{const{onMenuDismiss:t}=this[np],{[rp]:i}=this[op],{[Um]:o,dateFilterType:n}=i[tp];P.clickedInsideDayPicker(e)||(this[Om](n,o),i[Wm]({...i[tp],[Vm]:!1}),t&&t())},this.handleClear=()=>{const{[rp]:e}=this[op],{dateFilterType:t}=e[tp];this[Om](t,{[ep]:void 0,[Nm]:void 0}),e.clearTemporaryDateRange()},this[Rm]=e=>{e[Lm]&&e[Lm]()},this[qm]=e=>{const{[rp]:t}=this[op];if(e.error)return;t[Wm]({...t[tp],[Um]:{...t[tp][Um],...e.value}});const{dateFilterType:i,[Um]:o}=t[tp],{[ep]:n,[Nm]:a}=o;n&&a&&this[Om](i,{[ep]:n,[Nm]:a})},this[ip]={menuItem:{minHeight:void 0,[Em]:this[Am][Bm][Dm]?12:4,[xm]:this[Am][Bm][Dm]?12:4},[_m]:{[Fm]:Im},icon:{[Pm]:14,[Tm]:14,fill:Zm},pillIcon:{[Pm]:16,[Tm]:16,fill:Zm,[Cm]:6},iconActiveDesktop:{[Pm]:14,[Tm]:14,fill:Zm,alignSelf:km,[Mm]:2,[Cm]:2},[wm]:{[Mm]:0},iconActiveMobile:{[Pm]:14,[Tm]:14,fill:Zm,[Mm]:1,[Cm]:6},popup:{[Em]:12,[xm]:8},menuItemTitleDesktop:{[Tm]:"100%"},summary:{[Fm]:Sm},quickDatesWrapper:{[Mm]:12,boxShadow:`0 1px 0 ${this[ym][bm]}`,[xm]:15,[fm]:15},clearButton:{color:this[ym][vm],fill:this[ym][hm],[gm]:500,[pm]:13,[mm]:2,[um]:2,[xm]:2,[cm]:3,[dm]:0},dateFilterHeader:{[Fm]:Im,[lm]:rm,[sm]:am,[nm]:12,[Cm]:12}}}didMount(){this[qm]({value:this[np].value})}renderComponent(){const{[Bm]:e}=this[Am],{mode:t}=this[np];return e[Dm]?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{[rp]:t}=this[op],i=this[ip];return n()(Ji.Z,{[jm]:i[_m]},void 0,n()(Uu.Z,{capture:t[tp][Vm],onUp:this[Rm],onDown:this[Rm],onEnter:this[Rm]},void 0,n()(Vu.ZP,{popupType:this.getPopupType(),open:t[tp][Vm],origin:this[sp](),render:this[$m],[Gm]:this[Hm],[im]:Vu.ZP[om].Bottom,alignmentToOrigin:Vu.ZP.Alignment.Start,keepFocus:!0,[jm]:i.popup})))}[Om](e,t){N.ZP.updateFilters({[e]:t})}[tm](e){return{[em]:n()(dt.FormattedMessage,{id:Xu,[Qm]:"Last edited"}),[Yu]:n()(dt.FormattedMessage,{id:$u,[Qm]:"Created"})}[e]}updateFilterFromToggle(e){const{value:t}=this[np],{[rp]:i}=this[op],{dateFilterType:o}=i[tp];this[Om](e,t),e!==o&&(this[Om](o,{[ep]:void 0,[Nm]:void 0}),i[Wm]({...i[tp],dateFilterType:e}))}[Jm](){const{[Bm]:e}=this[Am],t=[Yu,em],{[rp]:i}=this[op],{dateFilterType:o}=i[tp],a={[Tm]:190,items:t,selectedItem:o,getKey:e=>e,onSelect:e=>this.updateFilterFromToggle(e),renderItem:e=>r[zm](pt.Z,V()({[ap]:this[tm](e.value)},e)),renderOrigin:t=>r[zm](mt.Z,V()({},t,{[jm]:{[mm]:2,[um]:2,[xm]:2,[cm]:3,[dm]:0}}),n()("div",{[jm]:{[Fm]:Im,[sm]:am,...!e[Dm]&&{color:this[ym][vm],fill:this[ym][hm],[gm]:500,[pm]:13}}},void 0,n()("span",{[jm]:{[Cm]:4}},void 0,this[tm](o)),this.renderOperatorChevron()))};return r[zm](Wu.Z,V()({},a,{mobileActionSheet:!0}))}renderOperatorChevron(){const{[Bm]:e}=this[Am];return st.Z.chevronDown({[Tm]:10,[Pm]:10,...e[Dm]&&{[Mm]:2}})}renderMobile(e){const{[rp]:t}=this[op],i=e===It.z.Section?this[Ju]():this[Qu]();return n()(Vu.ZP,{popupType:Vu.ZP[ju].SlideUp,open:t[tp][Vm],origin:i,render:this[$m],[Gm]:this[Hm],preventScaleTransition:!0})}[Qu](){const{icon:e,[ap]:t,[Km]:i}=this[np],o=this[ip];return n()(pt.Z,{[Km]:i,focused:!1,icon:e(o.icon),[ap]:t,[Ym]:this[Xm]})}[Ju](){const{[ap]:e,value:t,dateFormat:i,[Km]:o,intl:a}=this[np],s=this[ip],r=n()("div",{[jm]:s.summary},void 0,st.Z.calendar(s.iconActiveMobile),P.formatDateRange(t,a,i));return n()(Qi.Z,{[Km]:o,[Ym]:this[Xm],onClickClear:this.handleClear,label:e,[ap]:r})}getCurrentValue(){const{[rp]:e}=this[op],{dateFilterType:t,[Um]:i}=e[tp];return{...N.ZP[tp].query.filters[t],...i}}getPopupType(){const{[Bm]:e}=this[Am];return e[Dm]?Vu.ZP[ju].SlideUp:Vu.ZP[ju].Popup}}lp.displayName="SearchGenericDateFilter";const dp=(0,dt.injectIntl)(lp),cp=i(85).D7I,up=i(85).PP_,mp=i(85).tlC;function pp(e){const t=N.ZP.state.query.sort,i=ja.find((e=>s().isEqual(e.sort,t)))??ja[0],o="relevance"===i.sort.field?n()(dt.FormattedMessage,{id:"search.sort.sortOrder.bestMatches.title",defaultMessage:"Sort"}):i[mp];return n()(qi.Z,{disabled:!1,title:o,onClick:e.onClick,icon:st.Z.arrowsUpDown({width:16,marginRight:6,fill:up})})}function gp(){const e=N.ZP.state.query.sort,t=ja.findIndex((t=>s().isEqual(t.sort,e))),i=[];for(const o of ja)i.push({key:o.key,render:e=>r[cp](pt.Z,V()({},e,{title:o[mp]})),action:()=>{N.ZP.setState({...N.ZP.state,query:{...N.ZP.state.query,sort:o.sort}})}});return n()(it.Z,{menuType:q.og.Popup},void 0,n()(uo.Z,{type:uo.i.Vertical,initialFocus:t<0?0:t,sections:[{key:"sortOptions",items:i,render:e=>r[cp](ft.Z,V()({},e,{disableDesktopPadding:!0}))}]}))}const hp=function(){window.__c={n:"SearchSortButton"};const e=(0,z.yK)((()=>({popup:{paddingTop:12,paddingBottom:8}})),[]);return n()(gt.ZP,{popupType:gt.Z4.Popup,renderOrigin:pp,render:gp,disabled:!1,placementToOrigin:Vu.ZP.Placement.Bottom,alignmentToOrigin:Vu.ZP.Alignment.Start,style:e.popup})},vp=i(85).tBn,fp=i(85).D7I,yp=i(85).u9,bp=i(85).XGW,Sp=i(85).uVN,wp=i(85).cMN,Mp=i(85).qOV,kp=i(85).TOD,Cp=i(85).mv_,Zp=i(85).KC6,Tp=i(85).DPi,Pp=i(85).Dd5,Ip=i(85).JIU,Fp=i(85).fBu,_p="SearchFilterSettings";function xp(e){window.__c={n:"SearchFilterBar"};const t=(0,K.qz)(void 0,ct.Z),{isMobile:i}=e,{[Fp]:o}=(0,r.useContext)(Qy),a=(0,W.O7)(),s=(0,K.VK)((()=>a.currentUser.id),[a]),l=(0,K.VK)((()=>N.ZP),[]),d=(0,K.Kw)(l),c=d.query.filters,u=(0,K.VK)((()=>D.default.state.isPublicPageSearch),[]),m=(0,K.VK)((()=>(0,F.bq)()&&A.default.checkGate("enable_search_team_filter")&&!u),[u]),p=(0,K.VK)((()=>!u),[u]),g=!1,h=(0,z.yK)((e=>({scroller:{display:"flex",alignItems:"center",paddingTop:10,paddingRight:12,paddingBottom:10,paddingLeft:12},barContainer:{display:"flex",alignItems:"center"},scrollerContainer:{position:"relative",flexGrow:0,overflow:"hidden"},draggableList:{display:"flex",flexShrink:0,marginLeft:6},divider:{height:16,width:1,borderRadius:1,backgroundColor:e.stroke.deemphasized}})),[]),v=(0,r.useCallback)((e=>t=>l.updateFilters({[e]:t})),[l]),f=(0,r.useCallback)((()=>{t.setState({...t.state,open:!1})}),[t]),y=(0,r.useCallback)((()=>{if(p)return n()(li.Z,{mode:It.z.Pill,focused:!1,title:n()(Bu,{filterUIName:"personFilter"}),[Fp]:o,userIds:c[Ip],onMenuDismiss:f,[Pp]:v(Ip)})}),[p,o,c[Ip],f,v]),b=(0,r.useCallback)((()=>m&&n()(Hi,{mode:It.z.Pill,focused:!1,title:n()(Bu,{filterUIName:"teamsFilter"}),[Fp]:o,teamIds:c.inTeams,onMenuDismiss:f,[Pp]:v("inTeams")})),[o,c.inTeams,f,v,m]),S=(0,r.useCallback)((()=>n()(ri,{mode:It.z.Pill,focused:!1,title:n()(Bu,{filterUIName:"pageFilter"}),[Fp]:o,blockIds:c[Tp],onMenuDismiss:f,[Pp]:v(Tp)})),[o,c[Tp],f,v]),w=(0,r.useCallback)((()=>null),[o,c[Cp],f,v,g]),M=(0,r.useCallback)((()=>null),[o,c[Mp],f,v,g]),k=(0,r.useCallback)((()=>n()(dp,{mode:It.z.Pill,focused:!1,title:n()(Bu,{filterUIName:"dateFilter"}),icon:st.Z.calendar,value:c[wp],onMenuDismiss:f})),[c[wp],f]),C=(0,r.useCallback)((()=>!i&&n()(lo,{mode:It.z.Pill,focused:!1,title:n()(Bu,{filterUIName:"titleToggle"}),icon:st.Z.title,value:c[Sp]||!1,[Pp]:v("navigableBlockContentOnly")})),[c[Sp],v,i]);(0,r.useEffect)((()=>{const e=yu.Z.get({userId:s,key:_p});e&&e.filterOrder&&l.updateFilterState(e)}),[s,l]);const Z={titleToggle:C(),personFilter:y(),teamsFilter:b(),pageFilter:S(),dateFilter:k(),[Zp]:w(),[kp]:M()};const T=(0,r.useCallback)((()=>r[fp](r[vp],null,n()(hp,{}),n()("div",{style:h.divider}))),[h.divider]);return n()("div",{style:h.barContainer},void 0,n()("div",{style:h.scrollerContainer},void 0,n()(wu.Z,{type:bu.Z.X,style:h.scroller,showLeftRightOverlay:!1},void 0,r[fp](r[vp],null,T()),r[fp](r[vp],null,n()(Su.ZP,{direction:bp,keys:d.filterState.filterOrder,disableVerticalEdgeScroll:!0,[yp]:!0,renderKey:e=>Z[e],style:h.draggableList,onDrop:e=>function(e){const t={...d.filterState,filterOrder:e};yu.Z.set({userId:s,key:_p,value:t}),l.updateFilterState(t)}(e)})))))}var Ap=i(29798),Bp=i(1800),Dp=i(54642),Ep=i(47307),Lp=i(64964),Rp=i(31194),Np=i(1310),Op=i(16354),Up=i(43765),Vp=i(92660);const Wp=i(85).H0L,Kp=i(85).Vzy,zp=i(85).XHO,Gp=i(85).oDK,Hp=i(85).PG2,qp=i(85).Dd5,jp=i(85).cZW,Qp=i(85).nm$,Jp=i(85).IfY,$p=i(85).Yzm,Yp=i(85).wgE,Xp=i(85).qJ8,eg=i(85).g7N,tg=i(85).Je3,ig=i(85).z7d,og=i(85).Kgm,ng=i(85).oUH,ag=i(85).j7K,sg=i(85).y79,rg=i(85).Ttb,lg=i(85).BQ6,dg=i(85).D7I,cg=i(85).a3v,ug=i(85).XNW,mg=i(85).gGi,pg=i(85).nx5,gg=i(85).qh_,hg=(0,dt.defineMessages)({[gg]:{id:"SearchBadResultsForm.additionalInformation.placeholder",[pg]:"Any additional comments or context (e.g. ...)"},urlPlaceholder:{id:"SearchBadResultsForm.url.placeholder",[pg]:"Link to page you were looking for"}}),vg=e=>{window.__c={n:"SearchResultPicker"};const t=(0,z.Fg)(),i=(0,K.qz)(void 0,ct.Z);return n()(gt.ZP,{popupType:gt.Z4.Popup,buttonPopupStore:i,renderOrigin:e=>r[dg](r.Fragment,null,r[dg](vt.Z,V()({[lg]:{width:mg}},e),n()(Up.Z,{title:"Select Result"}),st.Z.chevronDown({width:10,[ug]:4,fill:t[cg]}))),placementToOrigin:Rp.Iw.Bottom,alignmentToOrigin:Rp.lU.Start,render:t=>{var i;const o=[{key:rg,render:e=>r[dg](ft.Z,V()({},e,{topBorder:0!==e.index})),items:(null===(i=e[rg])||void 0===i?void 0:i.map((i=>({key:i.id,render:e=>r[dg](Ct.Z,V()({store:i.store,checkState:!1,hidePath:!0},e)),action:()=>{e.onSelect(i),t.close()}}))))||[]}],a={menuType:q.og.Popup,width:240};return r[dg](it.Z,a,n()(uo.Z,{type:uo.i[sg],[ag]:void 0,sections:o}))}})};function fg(){Ya.reset()}const yg=e=>{var t;let{searchStoreState:i,[Xp]:o,[ng]:a,[og]:s,[Yp]:r,[ig]:l}=e;const d=Ya.getState(),c=P.transformResultsToSimpleArray(a),u=P.transformResultsToSimpleArray(s),m={query:i.query,limit:i.limit,debug:"everything"},{[Gp]:p}=P[zp](r),g=P.buildServerSearchParams({input:m,spaceId:null==o?void 0:o.id,[Gp]:p,source:"report_bad_search"});if(!g)return;const h=null===(t=document[Kp]("search-results-list")[0])||void 0===t?void 0:t.outerHTML,v="on"===(null==l?void 0:l["vector-search-vanilla-ltr"])||c.some((e=>e.sources.includes(J.SearchResultSource.VectorDBBlock)||e.sources.includes(J.SearchResultSource.VectorDBCollection)));v&&c.splice(0,-20);const f={queryText:i.query.text.trim(),apiRequest:g,[ng]:JSON[Wp](c,null,2),[og]:JSON[Wp](u,null,2),desiredUrl:d.desiredUrl,[Jp]:d[Jp],renderedHtml:h,[ig]:JSON[Wp](l??{},null,2),isVectorSearchEnabled:v};Dp.reportBadSearch(r,f).then((e=>{if("failed"===e.type)Ep.showErrorMessage(n()("h1",{},void 0,"Failed to submit report"));else{const{url:t}=e.data;Lp.oV({label:n()("div",{},void 0,n()(Op.Z,{href:t},void 0,"Your report has been submitted, thanks!")),durationMs:Np.JY})}})),Ya.reset()},bg=function(e){window.__c={n:"ReportBadSearchForm"};const{[ng]:t,[og]:i,[ig]:o}=e,a=(0,z.yK)((e=>({textArea:{width:mg,background:e[tg],display:"block",marginTop:17,[eg]:17},urlArea:{width:mg,height:"50%",background:e[tg],display:"block",marginTop:17,[eg]:17},modalWrap:{width:360,padding:24,fontSize:14},modalTitle:{fontSize:16,[eg]:12,fontWeight:lt.Z.fontWeight.medium},buttonArea:{display:"flex",justifyContent:"flex-end",marginTop:18},outlineButton:{marginRight:12}})),[]),[s]=(0,r.useState)(N.ZP),l=(0,K.VK)((()=>_.default.state[Xp]),[]),[d,c]=(0,K.AF)(Ya),u=(0,W.O7)(),m=(0,r.useCallback)((e=>{c({...d,desiredUrl:e?(0,Bp.Z)({pageId:e.store.id,pageModel:e.store.getModel(),baseUrl:M.default.domainBaseUrl,pageVisitSource:void 0}):void 0})}),[d,c]),p=(0,r.useCallback)((()=>{yg({searchStoreState:s.state,[Xp]:l,[ng]:t,[og]:i,[ig]:o,[Yp]:u})}),[s,l,t,i,o,u]);return n()(Vp.Z,{onDismiss:fg,render:()=>n()(et.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,render:e=>r[dg]("div",V()({[lg]:a.modalWrap},e),n()("div",{[lg]:a.modalTitle},void 0,n()(dt.FormattedMessage,{id:"SearchBadResultsForm.title",[pg]:"Report Bad Search"})),n()(rn.Z,{textarea:!0,[lg]:a.textArea,[jp]:wt.default[$p](hg[gg]),value:d[Jp],[qp]:e=>{c({...d,[Jp]:e[Qp].value})},focusInitial:!0}),n()(vg,{[rg]:P.combineResults({[og]:i,[ng]:t}),onSelect:m}),n()(rn.Z,{textarea:!0,[lg]:a.urlArea,[jp]:wt.default[$p](hg.urlPlaceholder),value:d.desiredUrl,[qp]:e=>{c({...d,desiredUrl:e[Qp].value})}}),n()("div",{[lg]:a.buttonArea},void 0,n()(ar.Z,{isLarge:!0,[Hp]:fg,[lg]:a.outlineButton},void 0,n()(dt.FormattedMessage,{id:"SearchBadResultsForm.cancelButton.label",[pg]:"Cancel"})),n()(ar.Z,{isRed:!0,isLarge:!0,[Hp]:p,disabledFeedback:!0},void 0,n()(dt.FormattedMessage,{id:"SearchBadResultsForm.reportButton.label",[pg]:"Submit"}))))}),requireOnline:!0,modalStore:Ya})},Sg=i(85).D7I,wg=i(85).nx5;function Mg(e){window.__c={n:"ReportBadSearchButton"};const[t,i]=(0,K.AF)(Ya),o=(0,z.yK)((e=>({button:{...wr(e)}})),[]);return n()(ar.Z,{style:o.button,onClick:()=>{i({...t,open:!0})}},void 0,n()(dt.FormattedMessage,{[wg]:"Report bad search",id:"search.header.badSearch.button.label"}),r[Sg](bg,e))}const kg=i(85).wuN,Cg=i(85).PG2,Zg=i(85).wJk,Tg=i(85).sI1,Pg=i(85).Wp_,Ig=i(85).Gnd,Fg=i(85).tBn,_g=i(85).D7I,xg=i(85).s1d,Ag=i(85).z7d,Bg=i(85).Ttb,Dg=i(85).XBA,Eg=i(85).lme,Lg=i(85).vNt,Rg=i(85).wiT,Ng=i(85).nx5,Og=i(85).Yzm,Ug=i(85).t7b,Vg=i(85).P0R,Wg=i(85).e$R,Kg=i(85).QmD,zg=i(85).oUH,Gg=i(85).Kgm,Hg=i(85).XNW,qg=i(85).KoE,jg=i(85).x5w,Qg=i(85).g7N,Jg=i(85).V3,$g=i(85).rI1,Yg=i(85).ChN,Xg=i(85).Tr,eh=i(85).PXg,th=i(85).jtM,ih=i(85).Uie,oh=i(85).Y9u,nh=i(85).Exd,ah=i(85).jkI,sh=i(85).H1U,rh=i(85).h8z,lh=i(85).UPJ,dh=i(85).$bT,ch=i(85).EMU,uh=i(85).sM5,mh=i(85).wgE,ph=i(85).G4H,gh=i(85).sh$,hh=i(85).wfR,vh=i(85).E4f;class fh extends l.Z{constructor(){super(...arguments),this.storeTypes={[vh]:c.default[hh](!1),[gh]:c.default[hh](!1)},this[ph]={footer:()=>{const{device:e}=this[mh];return{[uh]:ch,[dh]:"row",[lh]:rh,[sh]:ah,[nh]:e.isMobile?lt.Z[nh][oh].mobile:lt.Z[nh][oh].desktop}},footerText:{[nh]:nr.yv(this[mh],"UISmall"),...lt.Z[ih]},inlineHint:{[uh]:th,[eh]:16},resultCountWrapper:{[uh]:ch,[sh]:ah,...lt.Z[ih]},[Xg]:{[Yg]:lt.Z[Yg].medium},resultText:{[$g]:"middle",[eh]:6},spinner:{[uh]:th,width:12,height:12,[$g]:"middle"},[Jg]:{[eh]:4,[Qg]:1,fontVariant:"all-small-caps",[nh]:1.1*nr.yv(this[mh],"UISmall")},commandGlyph:{[nh]:.75*nr.yv(this[mh],"UIRegular")},[jg]:wr(this.theme),[qg]:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{[Hg]:15}}}renderComponent(){var e;const{[Gg]:t,[zg]:i}=this[Vg][Wg][Kg],{shouldShow:o}=this[Vg],a="production"!==M.default.env&&"staging"!==M.default.env;if(!a&&!o)return;const s=this[ph],l=this[Ug](),d={...s[Xg],...l[Xg]},{count:c,isLowerBound:u}=this[Vg][Wg].getResultCount(),m=n()("span",{style:s.resultText},void 0,u?this[Vg].intl[Og]({id:"SearchResultsFooter.helpText.resultCountApproximate",[Ng]:Rg},{[Xg]:c,resultwrapper:e=>n()("span",{style:d},void 0,e)}):this[Vg].intl[Og]({id:"SearchResultsFooter.helpText.resultCount",[Ng]:Lg},{[Xg]:c,resultwrapper:e=>n()("span",{style:d},void 0,e)})),p=D.default[Kg][Eg].enablesGrouping,g=p?n()(xr,{}):n()("div",{style:s.resultCountWrapper},void 0,p?void 0:n()("div",{},void 0,m,this.renderSpinner(this[Vg].showSpinner)),n()("div",{style:s.navigationHints},void 0,n()(xr,{})));return n()(Mr,{title:g,right:r[_g](r[Fg],null,a&&n()(Mg,{[Ag]:null==i||null===(e=i[Dg])||void 0===e?void 0:e["server-searchExperiments"],[Gg]:null==t?void 0:t[Bg],[zg]:null==i?void 0:i[Bg]}),this[xg]())})}renderSpinner(e){const t=this[ph];return n()(es.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&n()(Xa.Z,{style:t.spinner})})}[xg](){var e,t;if(!B.ZP[Kg].debug&&!B.ZP[Kg].showDebugInfo)return;const{rawRequests:i,rawResponses:o}=(null===(e=this[Vg][Wg][Kg][zg])||void 0===e||null===(t=e.debugInfo)||void 0===t?void 0:t.response)||{};return r[_g](r[Fg],null,i&&r[_g](r[Fg],null,n()(qr.Z,{open:this[Ig][vh][Kg],[Tg]:this[ph][qg],[Zg]:()=>{this[Ig][vh][Pg](!1)},render:()=>n()(Wr.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:i})}),n()(ar.Z,{style:this[ph][jg],[Cg]:()=>this[Ig][vh][Pg](!0)},void 0,"Open Request")),o&&r[_g](r[Fg],null,n()(qr.Z,{open:this[Ig][gh][Kg],[Tg]:this[ph][qg],[Zg]:()=>{this[Ig][gh][Pg](!1)},render:()=>n()(Wr.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:o},defaultCollapsed:!1})}),n()(ar.Z,{style:this[ph][jg],[Cg]:()=>this[Ig][gh][Pg](!0)},void 0,"Open Response")))}[Ug](){return{footerText:{color:this.theme.lightTextColor},[Xg]:{color:this.theme[kg]},[Jg]:{color:this.theme[kg]}}}}fh.displayName="SearchResultsFooter";const yh=(0,dt.injectIntl)(fh);var bh=i(73935),Sh=i(11689),wh=i(43339),Mh=i(39634),kh=i(36507);const Ch=i(85).ZiL,Zh=i(85).aqt,Th=i(85).nx5,Ph=(i(85).kIZ,i(85).G9v),Ih=i(85).t7b,Fh=i(85).KXm,_h=i(85).OM8,xh=i(85).GbH,Ah=i(85).jtM,Bh=i(85).sM5,Dh=i(85).lez,Eh=i(85).g4H,Lh=i(85).g7N,Rh=i(85).f57,Nh=i(85).nLZ,Oh=i(85).G4H,Uh=i(85).wgE,Vh=i(85).lDz;class Wh extends l.Z{constructor(){super(...arguments),this.handleSendMessageClick=()=>{Mh[Vh]({[Uh]:this[Uh],from:"quick_find"})},this[Oh]={menuItem:{[Nh]:Rh,[Lh]:Rh},[Eh]:{[Nh]:Rh},[Dh]:{[Bh]:Ah},[xh]:{[Bh]:Ah,[_h]:"25px"}}}renderComponent(){return r.createElement(kh.Z,V()({},this.getErrorMessage(),{style:this[Oh].menuItem,captionStyle:this[Oh][Eh],shouldWrapCaption:!0}))}renderNoResults(){const e=Wh.noResultsTitle,t=this.renderNoResultsMessage();return{title:e,[Eh]:t}}renderNoResultsMessage(){const e=N.ZP.state.query.filters,t=P.hasActiveFilter(e);if(!P.isFilterActive[Fh](e[Fh])){const e=this[Oh],t=this[Ih](),i={...e[xh],...t[xh]};return n()(dt.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.searchDeleted",[Th]:Ph,values:{searchdeleted:e=>n()(Op.Z,{onClick:this.props.handleSearchDeletedOnly,style:i},void 0,e),br:n()("br",{})}})}return n()(dt.FormattedMessage,t?{[Th]:"Try different search terms or filters",id:"searchErrorMenuItem.errorPrompt.searchTermsAndFilters"}:{[Th]:"Try different search terms",id:"searchErrorMenuItem.errorPrompt.searchTerms"})}renderOffline(){const e=Wh.noResultsTitle,t=n()(dt.FormattedMessage,{[Th]:"Go online for more results.",id:"searchErrorMenuItem.errorPrompt.goOnline"});return{title:e,[Eh]:t}}renderRequestFailed(){const e=this[Oh],t=this[Ih](),i={...e[Dh],...t[Dh]},o=n()(dt.FormattedMessage,{id:"searchErrorMenuItem.error.genericErrorMessage",[Th]:Zh}),a=n()(dt.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.refreshOrReport",[Th]:Ch,values:{reportlink:e=>n()(Op.Z,{onClick:this.handleSendMessageClick,style:i},void 0,e)}});return{title:o,[Eh]:a}}getErrorMessage(){const{error:e}=this.props;switch(e.type){case J.SearchRequestError.NoResults.type:return this.renderNoResults();case J.SearchRequestError.Offline.type:return this.renderOffline();case J.SearchRequestError.RequestFailed.type:return this.renderRequestFailed();default:(0,g.unreachable)(e)}}[Ih](){return{[Dh]:{color:this.theme.blueColor},[xh]:{color:this.theme.blueColor}}}}Wh.displayName="SearchErrorMenuItem",Wh.contextTypes={...q.mw,...l.w},Wh.noResultsTitle=n()(dt.FormattedMessage,{[Th]:"No results",id:"searchErrorMenuItem.error.noResults"});const Kh=Wh,zh=i(85).zDZ,Gh=i(85).zEC,Hh=i(85).T9w,qh=i(85).xad,jh=i(85).O__,Qh=i(85).XBA,Jh=i(85).v8q,$h=i(85).fbO,Yh=i(85).WT2,Xh=i(85).Wp_,ev=i(85).p7y,tv=i(85).lGm,iv=i(85).j7K,ov=i(85).y79,nv=i(85).D7e,av=i(85).tBn,sv=i(85).hfx,rv=i(85).CZ2,lv=i(85).nQ3,dv=i(85).w2i,cv=i(85).UpL,uv=i(85).lme,mv=i(85).uM3,pv=i(85).D7I,gv=i(85).TtP,hv=i(85).jfm,vv=i(85).oUH,fv=i(85).nLZ,yv=i(85).rE$,bv=i(85).$bT,Sv=i(85).Ttb,wv=i(85).HId,Mv=i(85).Gpy,kv=i(85).dRS,Cv=i(85).d5x,Zv=i(85).xY8,Tv=i(85).nx5;function Pv(e,t){return n()(ft.Z,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!1,style:{[fv]:0,paddingTop:0}},void 0,n()(Ta.Z,{body:e,bodyStyle:t}))}const Iv=(0,dt.injectIntl)((function(e){var t,i,o,a,l,d,c,u;window.__c={n:"SearchResultsMenuList"};const[m,p]=(0,r.useState)(!1),h=(0,W.Fy)().isMobile,v=(0,z.yK)((e=>({[Sv]:{flex:1,display:"flex",[bv]:"column",overflow:"auto",height:"100%"},messageMenuItem:{...h&&{background:void 0,boxShadow:void 0}},[yv]:{whiteSpace:"pre-wrap",fontFamily:"monospace",[fv]:0},actionMenuItemTitle:{fontWeight:lt.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",[bv]:"column",gap:12,[fv]:h?13:void 0,marginBottom:4}})),[h]),{searchResultStore:f,localResults:y,[vv]:b,resultListStore:w,[hv]:M,intl:k,showActions:C}=e,Z=e.errorState,T=(0,K.VK)((()=>N.ZP.state.query.text),[]),I=C[gv]>0?{key:"actions",render:e=>r[pv](ft.Z,V()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:n()(dt.FormattedMessage,{id:"search.searchActions.actions.text",[Tv]:"Actions"})})),items:s()[mv](C.map((e=>function(e){const{type:t,title:i,icon:o,action:n}=e;return{key:`actionMenuItem.${t}`,action:n,render:e=>r[pv](or,V()({},e,{title:i,icon:o}))}}({...e,title:e.renderTitle(T,k,v.actionMenuItemTitle)}))))}:void 0,F=(0,K.VK)((()=>D.default.state[uv].enablesGrouping),[]),_=(0,P.getSectionsFromResults)({intentBasedGrouping:F,localResults:y,[vv]:b}),{allSearchResults:x}=_,A=(0,r.useCallback)((t=>{const{[Sv]:i,sectionTitle:o,[mv]:a,rendersTimeSinceLastViewedMs:l}=t,{id:d,title:c}=function(e){if(!e)return{id:"defaultSearchResults",title:void 0};switch(e.type){case"unique-id":return{id:Zv,title:n()(dt.FormattedMessage,{id:"search.searchResultBuckets.uniqueID.text",[Tv]:"ID matches"})};case"jump-back-in":return{id:Cv,title:n()(dt.FormattedMessage,{id:"search.searchResultBuckets.recent.text",[Tv]:"Jump back in"})};case"server":return{id:kv,title:n()(dt.FormattedMessage,{id:"search.searchResultBuckets.server.text",[Tv]:"{count}{maybeLowerBoundSign} results",[Mv]:{count:e[Mv].count,maybeLowerBoundSign:e[Mv].isLowerBound?"+":""}})};case"non-unique-id":return{id:wv,title:n()(dt.FormattedMessage,{id:"search.searchResultBuckets.bestMatches.text",[Tv]:"Best Matches"})}}(0,g.unreachable)(e)}(o);return i[gv]>0?{key:d,render:e=>r[pv](ft.Z,V()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:c})),items:s()[mv](i.map(((t,i)=>{var o;return function(e){var t,i;const{selectedResult:o,index:n,[cv]:a,allSearchResults:s,props:l,[mv]:d,[dv]:c}=e,{store:u}=o,m=u.isNavigableBlock()?u:u[Yh]();if(!m)return;const p=r.createRef(),g=Boolean(B.ZP.getDebugLevel()),h=g&&o.sources[$h](J.SearchResultSource.Local)?{score:o.score,frecencyScore:o.frecencyScore,localSource:o.localSource,personalizationBoost:o.personalizationBoost,id:o.id}:void 0,v=g&&(o.sources[$h](J.SearchResultSource.ElasticSearch)||o.sources[$h](J.SearchResultSource.VectorDBBlock)||o.sources[$h](J.SearchResultSource.VectorDBCollection))?null===(t=l.debugInfo)||void 0===t||null===(i=t[rv])||void 0===i?void 0:i.resultsDebugMap[u.id]:void 0,f=l.clusterInfo,y=Date.now();return{key:`${u.id}:${n}`,action:e=>{const{event:t}=e;function i(e){const i=bh.findDOMNode(e.current);return Boolean(i&&"target"in t&&t.target&&(i===t.target||i.contains(t.target)))}p.current&&i(p)||l.handleSelectResult({action:e,selectedResult:o,[cv]:a,allSearchResults:s})},render:e=>{var t;return r[pv](yc,V()({},e,{index:n,[Jh]:o[Jh],isFirstInSection:0===n,store:m,hidePath:!1,result:o,[tv]:H.searchQueryResultItem,debugLocal:h,debugHits:v,debugAreaRef:p,clusterInfo:f,inline:d&&!g,inlineCaptionMinWidthPercentage:20,lastViewed:c?y-c:void 0,queryId:null===(t=o[Qh])||void 0===t?void 0:t["server-queryId"],type:"query_results"}))}}}({selectedResult:t,index:i,[cv]:d,allSearchResults:x,props:e,[mv]:a,[dv]:l&&null!==(o=t.localSource)&&void 0!==o&&o.has("recentVisit")?t[dv]:void 0})})))}:void 0}),[x,e]),E=(0,K.VK)((()=>A({[Sv]:"intent-based-grouping"===_.type?_[lv][Cv]:[],sectionTitle:{type:"jump-back-in"},[mv]:!0,rendersTimeSinceLastViewedMs:!0})),[A,_[lv],_.type]),L=(0,K.VK)((()=>{const e="intent-based-grouping"===_.type?_[lv][kv]:[],t=f.getResultCount();return A({[Sv]:e,sectionTitle:{type:"server",[Mv]:{count:e[gv],isLowerBound:t.isLowerBound}},[mv]:!1})}),[A,_[lv],_.type,f]),R=(0,K.VK)((()=>A({[Sv]:"uniqueIdSearchResults"in _[lv]?_[lv][Zv]:[],sectionTitle:{type:"unique-id"},[mv]:!1})),[A,_[lv]]),O=(0,K.VK)((()=>A({[Sv]:"unique-id"===_.type?_[lv][wv]:"default"===_.type?_[lv].defaultSearchResults:[],sectionTitle:"unique-id"===_.type?{type:"non-unique-id"}:void 0,[mv]:!1})),[A,_[lv],_.type]),U=[I,E,R,L,O].filter(g.isDefined),G=null===(t=e.debugInfo)||void 0===t||null===(i=t[rv])||void 0===i?void 0:i.parsedQueries,q=null===(o=e.debugInfo)||void 0===o||null===(a=o[rv])||void 0===a?void 0:a.detectedLanguages,j=null===(l=e.debugInfo)||void 0===l?void 0:l.traceLogs,Q=null===(d=e.debugInfo)||void 0===d||null===(c=d[rv])||void 0===c?void 0:c.debugUrls,$=(0,r.useCallback)(((t,i)=>{const{onMaybeLoadMoreResults:o}=e,n=t<=200;n&&!m&&o(),p(n),i.offsetFromTop&&N.ZP.update((e=>({...e,hasScrolled:!0})))}),[m,e]),Y=O||L?(null==I||null===(u=I.items)||void 0===u?void 0:u[gv])??0:0;return n()(jy.Consumer,{},void 0,(e=>{let{[sv]:t}=e;return r[pv]("section",{style:v[Sv],ref:t},!s().isEmpty(M)&&Pv(r[pv](r[av],null,n()(Wr.LazyAdminReactJson,{data:{[hv]:M},showCopyButton:!1,showModalButton:!1,defaultCollapsed:!1})),v[yv]),G&&Pv(n()(Wr.LazyAdminReactJson,{data:{parsedQueries:G},[nv]:[Av],showCopyButton:"small",showModalButton:!0,defaultCollapsed:!0}),v[yv]),q&&Pv(n()(Wr.LazyAdminReactJson,{data:{detectedLanguages:q},[nv]:[xv]}),v[yv]),j&&Pv(n()(Wr.LazyAdminReactJson,{data:{tracer:{traceLogs:j}},[nv]:[_v],defaultCollapsed:!0}),v[yv]),Q&&Pv(n()(Wr.LazyAdminReactJson,{data:{debugUrls:Q},defaultCollapsed:!0,[nv]:[Dv],showCopyButton:"small",showModalButton:!0,maxLinkValueLength:40}),v[yv]),U&&n()("div",{[tv]:"search-results-list"},void 0,n()(uo.Z,{type:uo.i[ov],[iv]:Y,store:w,disableKeyboardArrowWrap:!0,[lv]:U,style:v.menuListContainer})),function(e,t){if(e.isLoading)return;if(e.showMajorError)return n()(Kh,{error:e[ev],handleSearchDeletedOnly:()=>{const e=N.ZP.state.query.text;S.IB(),Sh.Z[Xh]({...Sh.Z.state,open:!0}),wh.Z[Xh]({...wh.Z.state,currentTab:"all_pages",filter:e,limit:wh.Z.startLimit})}});if(e[ev]&&e[ev]!==J.SearchRequestError.NoResults)return function(e,t){return n()(ft.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,n()(Up.Z,{title:e,style:t}))}(e[ev].message,t)}(Z,v.messageMenuItem)||n()(qs.Z,{onChange:$}))}))}));function Fv(e){const t=e[jh](/\(MatchNoDocsQuery\("Matching no documents because no terms present"\)\)\^[0-9\.]/g,"")[jh](/MatchNoDocsQuery\("Matching no documents because no terms present"\)/g,"")[jh](/ConstantScore\(([^)]+):([^)]+)\)/g,"<i>$1</i>:<b>$2</b>").replace(/function score \(\((.*)\), functions:.*\)/,"$1")[jh]("( ","(")[jh](" )",")")[jh]("|","| <br/>")[jh](/([^( ]+):"([^"]+)"/g,'<i>$1</i>:<b>"$2"</b>')[jh](/([^( ]+):([^) ]+)/g,"<i>$1</i>:<b>$2</b>");return n()("span",{dangerouslySetInnerHTML:{__html:t}})}const _v=e=>{let{data:t,keyPath:i}=e;if("traceLogs"===(null==i?void 0:i[0])&&s().isPlainObject(t)&&s().isArray(t.log)&&t.log[gv]>0){const{log:e,startTimeMs:i}=t;return{[qh]:r[pv](r[av],null,n()("div",{},void 0,n()("b",{},void 0,`Trace started at ${i}`)),e.map(((e,t)=>n()("div",{},t,n()("span",{style:Bv},void 0,`[${e[Hh]-i}ms][${e.callerFileName.split(".")[0]}]`),n()("span",{},void 0,`${e.msg}`))))),[Gh]:!1}}return null},xv=e=>{let{data:t,keyPath:i}=e;return"detectedLanguages"===i.join(".")&&s().isPlainObject(t)?{[qh]:r[pv](r[av],null,Object.entries(t).filter((e=>{let[t,i]=e;return Boolean(i)})).map((e=>{let[t]=e;return t})).join(", ")||"None"),[Gh]:!1}:null},Av=e=>{var t,i;let{data:o,keyPath:n}=e;const a=o,s=Object[Mv](a).find((e=>void 0!==e));if(!s)return null;if(!["type",zh,"time_in_nanos"].every((e=>s[e])))return null;if(1===n[gv])return{[qh]:Fv(s[zh]),[Gh]:!1};let r=s[zh]??"";return null!==(t=r)&&void 0!==t&&t[$h]("permissions.teamIds")&&(r="PermissionsQuery"),null!==(i=r)&&void 0!==i&&i[$h]("(_id:[")&&(r="BoostRecentPageIds"),{[qh]:Fv(r),[Gh]:!1}},Bv={color:"blue"},Dv=e=>{let{data:t}=e;const i=t;if(!i)return null;const o=Object[Mv](i).find((e=>{let{clusterName:t}=e;return void 0!==t}));if(o){const{clusterName:e}=o;return{[qh]:r[pv](r[av],null,e),[Gh]:!1}}return{[qh]:r[pv](r[av],null,"unknown"),[Gh]:!1}},Ev=i(85).iB2,Lv=i(85).mEi,Rv=i(85).Ttb,Nv=i(85).XHO,Ov=i(85).IoZ,Uv=i(85).zZX,Vv=i(85).jfm,Wv=i(85).ApF,Kv=i(85).oUH,zv=i(85).Kgm,Gv=i(85).H_S,Hv=i(85).QmD,qv=i(85).VFs,jv=i(85).ChN,Qv=i(85).MRL,Jv=i(85).L_E,$v=i(85).e$R;const Yv=function(e){window.__c={n:"SearchResultsBody"};const{[$v]:t,sxsMode:i,searchDebugColumnStore:o}=e,a=(0,W.O7)(),s=(0,W.Fy)(),l=(0,z.yK)((e=>({[Jv]:{display:"flex",flexDirection:"column",width:i?"50%":"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e[Qv],[jv]:lt.Z[jv].semibold},askAiQuery:{[jv]:lt.Z[jv].regular},askAiIcon:{fill:e[Qv]}})),[i]),d=(0,K.qz)(void 0,Ap.Z),c=(0,K.VK)((()=>d[Hv].focus[qv]),[d]),{[Gv]:u,globalFocusedIndex:m}=(0,r.useContext)(jy),{[zv]:p,[Kv]:g,clusterInfo:h,debugInfo:v,[Wv]:f,[Vv]:y,[Uv]:b,errorState:w,[Ov]:M}=(0,K.VK)((()=>{var e,i;const{[Uv]:n}=P[Nv](a);return{[zv]:t[Hv][zv],[Kv]:t[Hv][Kv],[Wv]:t[Hv][Wv],clusterInfo:null===(e=t[Hv][Kv])||void 0===e?void 0:e.clusterInfo,debugInfo:null===(i=t[Hv][Kv])||void 0===i?void 0:i.debugInfo,[Vv]:o[Hv][Vv],[Uv]:n,errorState:t[Hv].errorState,[Ov]:t[Hv][Ov]}}),[t,o,a]),k=!1===w.isLoading&&w.showMajorError,C=Boolean(p||g),Z=(0,r.useCallback)((()=>{!f&&!M&&void 0!==g&&N.ZP.update((e=>({...e,limit:e.limit+N.Xv,isScrolled:!0,source:"quick_find_scroll"})))}),[f,M,g]),T=(0,K.VK)((()=>P.combineResults({[zv]:null==p?void 0:p[Rv],[Kv]:null==g?void 0:g[Rv]})),[p,g]),I=(0,K.VK)((()=>[{type:"assistant",renderTitle:(e,t,i)=>function(e,t){return n()("div",{className:"notranslate",style:t},void 0,e)}(r.createElement(r.Fragment,null,n()("span",{},void 0,"Ask Notion AI "),n()("span",{style:l.askAiQuery},void 0,e)),{...i,...l.askAiLabel}),icon:e=>st.Z.sparkles({...e,...l.askAiIcon}),action:()=>{S.Ky({environment:a})},[Lv]:()=>!!(0,Gs.lN)()||!!(0,Gs.jp)(a.device)&&(N.ZP[Hv].query.text.split(" ").length-1>=2&&N.ZP[Hv].query.text.length>6)}].filter((e=>e[Lv](a)))),[a,l],{useDeepEqual:!0});(0,K.VK)((()=>{const e=t[Hv].insertedActionResultsCount,i=I.length;e!==i&&t.update((e=>({...e,insertedActionResultsCount:i})))}),[I,t]);const F=(0,r.useCallback)((()=>d.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus[Ev]&&0===e.focus[qv]?e:{...e,focus:I.length>0?{section:1,[Ev]:0,[qv]:I.length}:{section:0,[Ev]:0,[qv]:0}}))),[d,I]);return(0,r.useEffect)((()=>{F()}),[T,F]),(0,r.useEffect)((()=>{m.setState(c)}),[m,c]),n()("div",{style:l[Jv]},void 0,n()(Iv,{errorState:w,[Gv]:u,onMaybeLoadMoreResults:Z,resultListStore:d,[$v]:t,[zv]:null==p?void 0:p[Rv],[Kv]:null==g?void 0:g[Rv],debugInfo:v,clusterInfo:h,publicAccessPermission:b,[Vv]:y,showActions:I}),n()(yh,{[$v]:t,showSpinner:f,[Lv]:!k&&C&&!s.isMobile}))},Xv=i(85).D7I,ef=i(85).dLQ,tf=i(85).$bT,of=i(85).kEc,nf=i(85).z6F,af=i(85).e$R,sf=i(85).emB;function rf(){window.__c={n:"SearchNavigationalView"};const{searchFilterMenuRef:e,[sf]:t,[af]:i,[nf]:o}=(0,r.useContext)(jy),a=(0,W.Fy)(),{errorState:s,shouldShowSxSView:l,hasQuery:d}=(0,K.VK)((()=>({shouldShowSxSView:Boolean((0,B.gq)({device:a})&&B.BJ.state.visible),errorState:i.state.errorState,hasQuery:Boolean(N.ZP.state.query.text.trim())||P[of](N.ZP.state.query.filters)})),[i,a]),c=(0,z.yK)((()=>({container:{display:"flex",[tf]:"column",width:l?"50%":"100%"},sxsContainer:{display:"flex",[tf]:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[l]),u=!1===s.isLoading&&s.showMajorError,m={[af]:i,searchDebugColumnStore:B.v_,sxsMode:l};return r[Xv](r.Fragment,null,!a[ef]&&n()(xp,{[ef]:a[ef]}),d?r[Xv](r.Fragment,null,!u&&a[ef]&&r[Xv](Za,{[ef]:!0,mode:wa.Section,ref:e}),n()("div",{style:c.sxsContainer},void 0,r[Xv](Yv,m),l&&r[Xv](Yv,V()({},m,{[af]:o,searchDebugColumnStore:B.BJ})))):n()(fu,{onSelect:t}))}const lf=i(85).kdG,df=i(85).qJ8,cf=i(85).t4B,uf=i(85).kEc,mf=i(85).ApF,pf=i(85).XHO,gf=i(85).P0z,hf=i(85).zZX,vf=i(85).$bT,ff=i(85).e$R,yf=i(85).pBI,bf=i(85).D7I,Sf=i(85).dLQ,wf="80vh";function Mf(e){window.__c={n:"SearchContentPane"};const t=(0,W.Fy)();return $e(),n()(tt.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!t[Sf],render:()=>n()(et.Z,{capture:!0,allowMenuList:!0,render:t=>r[bf](kf,V()({},e,{ignoreAreaEvents:t}))})})}function kf(e){window.__c={n:"SearchContentPaneInner"};const{ignoreAreaEvents:t,[yf]:i,onClose:o}=e,{handleQueryChange:a,searchFilterMenuRef:l,modalBodyMenuRef:d,[ff]:c,globalFocusedIndex:u}=(0,r.useContext)(jy),m=(0,z.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",[vf]:"column"},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarRightButtonWrapper:{flex:void 0,paddingLeft:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",[vf]:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:i?"100vh":wf},clearButton:{color:e.lightTextColor},sxsContainer:{display:"flex",[vf]:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[i]),[p,g]=(0,r.useState)(!1),[h,v]=(0,r.useState)(!1),f=(0,W.O7)(),y=(0,W.Fy)(),{isSearchMenuOpen:b,shouldShowFilterSidebar:S,[hf]:w,hasQuery:M,[gf]:k}=(0,K.VK)((()=>{const e=Boolean(X.Z.state.online),{[hf]:t}=P[pf](f);return{isSearchMenuOpen:D.default.state.open,[gf]:e&&Boolean(N.ZP.state.query.text)&&c.state[mf]&&!p,shouldShowFilterSidebar:Pf({device:y,isPublicAccessPermissionForPage:t}),[hf]:t,hasQuery:Boolean(N.ZP.state.query.text.trim())||P[uf](N.ZP.state.query.filters)}}),[p,c,y,f]),C=(0,r.useMemo)((()=>s().debounce((()=>{const{activeElement:e}=document;e instanceof HTMLInputElement&&e.blur()}),500,{leading:!0})),[]),Z=(0,r.useCallback)((()=>{h&&C()}),[C,h]),T=(0,r.useCallback)((e=>{v(e),e||y[cf]&&Xe.Z.updateKeyboardPhase(f,Xe.i.willHide,0)}),[y[cf],f]),I=(0,r.useMemo)((()=>n()(Ks,{isOpen:Boolean(i||b),onTypingChange:g,onFocusChange:T,showSpinner:k,onQueryChange:a,[ff]:c,focusedIndexStore:u})),[i,b,T,k,a,c,u]),F=(0,r.useMemo)((()=>{if(y[Sf]){return{menuType:q.og.Modal,left:I,shouldRenderLeftDirectly:!0,width:i?"100vw":void 0,...Zf({isPhone:y.isPhone,[yf]:i,style:m.topbarRightButtonWrapper,onClick:o}),header:M&&n()(Qa,{isPublicPageSearch:w}),disableHeaderShadow:!0,topbarStyle:m.topbar,leftRightButtonStyle:m.topbarButton,onScroll:Tf(y)?Z:void 0,bodyScrollerClassName:H.searchResultMobileBodyScroller,...t}}const e={menuType:q.og.Popup,maxHeight:i?"100vh":wf,minHeight:50,disableScroller:!0,scrollerStyle:m.scroller,...t};return i&&y.isDesktop&&(e.maxWidth="100%"),e}),[y,m,t,I,i,o,M,w,Z]);return r[bf](it.Z,V()({},F,{className:H.searchMenu,ref:d}),n()(Cf,{enableLazyLoading:i},void 0,n()("div",{style:m.body},void 0,n()(at.Z,{}),!y[Sf]&&I,n()(rf,{})),S&&r[bf](Za,{ref:l})))}function Cf(e){window.__c={n:"SearchMenuContentsWrapper"};const{enableLazyLoading:t,children:i}=e,o=(0,W.O7)();return t?n()(nt.Z,{fetch:async()=>{var e;await G.timeout(0),await _.default.waitUntil((()=>void 0!==_.default.state[df])),null===(e=o[lf])||void 0===e||e.markTransitionReady({type:"search"})},loading:()=>n()(r.Fragment,{}),render:()=>i}):n()(r.Fragment,{},void 0,i)}function Zf(e){let{isPhone:t,style:i,[yf]:o,onClick:a}=e;return t&&(0,Ye.Y)("supportsNativeHome")||o?{rightOuterStyle:{display:"none"}}:{right:n()(ot.CancelMenuText,{}),onClickRight:a,rightOuterStyle:i}}function Tf(e){return!!e[Sf]&&(!e.isIOS||e[cf])}function Pf(e){let{device:t,isPublicAccessPermissionForPage:i}=e;if(!i&&!t[Sf])return N.ZP.isSidebarOpen()}const If=i(85).zZX,Ff=i(85).XHO,_f=i(85).JXA,xf=i(85).PR5,Af=i(85).c0M,Bf=i(85).qJ8,Df=i(85).Ixd,Ef=i(85).IEk,Lf=i(85).KRW,Rf=i(85).cMN,Nf=i(85).JBY,Of=i(85).nxJ,Uf=i(85).WT2,Vf=i(85).QBz,Wf=i(85).Kgm,Kf=i(85).iDK,zf=i(85).oUH,Gf=i(85).wOu,Hf=i(85).LIR,qf=i(85).PBn,jf=i(85).v8q,Qf=i(85).nNG,Jf=i(85).w2i,$f=i(85).bSY,Yf=i(85).iB2,Xf=i(85).Nei,ey=i(85).TtP,ty=i(85).irQ,iy=i(85).UpL,oy=i(85).Im_,ny=i(85).dLQ,ay=i(85).Q6q,sy=i(85).J_8,ry=i(85).fHC,ly=i(85).I_z,dy=i(85).rHi,cy=i(85).ToI,uy=i(85).Lyb,my=i(85).C1,py=i(85).jKg,gy=i(85).CKQ,hy=i(85).L$z,vy=i(85).XBA,fy=i(85).wgE,yy=i(85).E0z,by=i(85).e7B,Sy=i(85).QmD,wy=i(85).Gm5,My=i(85).Cv2,ky=i(85).pBI,Cy=i(85).P0R,Zy=i(85).iy2,Ty=i(85).fBu,Py=i(85).GPG,Iy=i(85).emB,Fy=i(85).JNi,_y=i(85).H_S,xy=i(85).vF0,Ay=i(85).yUP,By=i(85).UtJ,Dy=i(85).J8Q,Ey=i(85).wCq,Ly=i(85).T$o,Ry=i(85).mRY,Ny=i(85).Tes,Oy=i(85).z6F,Uy=i(85).e$R,Vy=i(85)._q7,Wy=i(85).Dv6,Ky=i(85).hfx,zy=i(85).FjY,Gy=i(85).WCo,Hy=i(85).Ql2,qy=i(85).CdN,jy=r.createContext(null),Qy=r.createContext(null);class Jy extends l.Z{constructor(){super(...arguments),this[qy]=void 0,this[Hy]=void 0,this[Gy]=!1,this[zy]=!1,this[Ky]=r[Wy](),this[Vy]=r[Wy](),this.modalBodyMenuRef=r[Wy](),this[Uy]=new E.ZP,this[Oy]=new E.ZP,this[Ny]=new E.ZP,this[Ry]=new E.ZP,this[Ly]=new E.ZP,this[Ey]=new E.ZP,this[Dy]=new E.ZP,this[By]=c.default[Ay](0),this.getStaticContext=s()[xy]((()=>({[Ky]:this[Ky],[Vy]:this[Vy],modalBodyMenuRef:this.modalBodyMenuRef,[_y]:this[Fy],[Iy]:this[Iy],[Py]:this[Py],[Uy]:this[Uy],[Oy]:this[Oy],[Ny]:this[Ny],[Ry]:this[Ry],[Ly]:this[Ly],[Ey]:this[Ey],[Dy]:this[Dy],[By]:this[By]}))),this.getStoresContext=s()[xy]((e=>({[Ty]:e}))),this[Zy]=()=>n()(jy.Provider,{value:this.getStaticContext()},void 0,n()(Qy.Provider,{value:this.getStoresContext(this[Cy][Ty])},void 0,n()(Mf,{[ky]:this[Cy][ky],onClose:this[My]}))),this[Iy]=e=>{this[_y]({...e,[wy]:"recent_pages"})},this[Fy]=e=>{this[_y]({...e,[wy]:"query_results"})},this.handleComponentOpenClose=()=>{this[Gy]!==D.default[Sy].open&&(this[Gy]=D.default[Sy].open,D.default[Sy].open&&(clearTimeout(this[qy]),N.ZP[by]((e=>({...e,hasScrolled:!1})))))},this[My]=()=>{const{[yy]:e}=this[fy],{selectedQueryResult:t,numKeystrokes:i,numServerRequests:o,numLocalRequests:n,hadMetaClick:a}=L.default[Sy],{[vy]:s}=this[Uy][Sy],{query:r,hasScrolled:l}=N.ZP[Sy];if(i>0&&(o>0||n>0)&&!t&&!a&&(D.default[Sy].openAsPage||D.default[Sy].open)){const e=Date.now(),t=D.default[Sy].openedTimeMs,n=D.default[Sy][hy],a=L.default[Sy].firstKeyStrokeTimeMs;y.trackAbandonedSearch(this[fy],{...s,timeToAbandonMs:e-t,timeFromFirstKeyStrokeToAbandonMs:a?e-a:void 0,numKeystrokes:i,numResultsAboveFold:this[gy](),[py]:n,searchSessionFlowNumber:o,hasScrolled:l,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:(0,I.getVisibleMembersCountFromSubscriptionData)()})}S.IB(),""===r.text.trim()?N.ZP[my]():P.hasActiveFilter(r[uy])||N.ZP[by]((e=>({...e,isSidebarOpen:!1})));const d=A.default[cy]({[dy]:ly,[ry]:sy});let c=120*f.SecondMs;"control"!==d&&m.g6["search-shorten-inactive-timer"].includes(d)&&(c=parseInt(d,10)*f.SecondMs),this[qy]&&clearTimeout(this[qy]),c>0?this[qy]=window[ay](this.resetState,c):this.resetState(),!this[Cy][ky]&&e[ny]&&w.close(),L.default[my]()},this[oy]=e=>{this[Cy][ky]&&this[My]()},this[_y]=e=>{let{action:t,[iy]:i,[wy]:o,selectedResult:n,allSearchResults:a}=e;const{[vy]:s,store:r}=n,{numKeystrokes:l,hadMetaClick:d}=L.default[Sy];if(!D.default[Sy].open&&!D.default[Sy].openAsPage)return;const{event:c}=t,m=k[ty](c);"query_results"===o&&(L.default[by]((e=>({...e,selectedQueryResult:!0}))),this[Uy][by]((e=>({...e,selectedQueryResultQuery:N.ZP[Sy].query}))));const p=Date.now(),{openedTimeMs:v,[hy]:f}=D.default[Sy],{firstKeyStrokeTimeMs:S}=L.default[Sy],{numServerRequests:w}=L.default[Sy],{query:C}=N.ZP[Sy],Z=(0,I.getVisibleMembersCountFromSubscriptionData)();y.trackSelectSearchItem(this[fy],{...s,[wy]:o,queryStringLength:C.text.trim()[ey],hasFilters:P.hasActiveFilter(C[uy]),[Xf]:C[uy],selectedItemIndex:t.index,selectedItemLocalIndex:{[iy]:i,index:t[Yf][Yf]},numKeystrokes:l,isMetaClick:Boolean(m),isSidebarOpen:N.ZP.isSidebarOpen(),timeToSelectMs:p-v,timeFromFirstKeyStrokeToSelectMs:S?p-S:p-v,[$f]:null==n?void 0:n[$f],localSources:[...(null==n?void 0:n.localSource)??[]],indexInRecentPages:null==n?void 0:n.indexInRecentPages,[Jf]:null==n?void 0:n[Jf],hadMetaClick:d,numResultsAboveFold:this[gy](),selectedSearchResultMetadata:this.getSearchResultMetadata(n),selectedSearchResultContent:"production"!==M.default.env?this.getSearchResultContent(r,null==n?void 0:n[Qf]):void 0,allSearchResultMetadata:null==a?void 0:a.slice(0,Jy.MAX_RESULT_TO_TRACK).map((e=>this.getSearchResultMetadata(e))),totalSearchResultCount:null==a?void 0:a[ey],[py]:f,searchSessionFlowNumber:w,[jf]:null==n?void 0:n[jf],numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:Z});const T=(null==s?void 0:s["server-queryId"])??function(e){let{[h]:t,searchSessionFlowNumber:i}=e;if((0,g.isDefined)(t)&&(0,g.isDefined)(i))return`1:${t}:${i}`}({[py]:f,searchSessionFlowNumber:w});let F;"recent_pages"===o?F=u.tY.SearchRecents:"query_results"===o?F=u.tY.SearchQuery:(0,g.unreachable)(o);const _=("development"===M.default.env||"local"===M.default.env)&&"on"===A.default[qf]("search-results-new-utilities")&&Boolean("altKey"in c&&c.altKey);b.navigateToSearchResult({searchResult:n,[fy]:this[fy],[Hf]:F,queryId:T,openInNew:m,[Gf]:_}),R.Z.setState({queryId:T,pageId:r.id,timeEntered:new Date}),m?L.default[by]((e=>({...e,hadMetaClick:!0}))):this[My]()},this[Py]=e=>{this[zy]&&(this[Uy][by]((e=>({...e,[zf]:void 0}))),this[Oy][by]((e=>({...e,[zf]:void 0})))),""!==e?(L.default[by]((e=>({...e,numKeystrokes:e.numKeystrokes+1}))),N.ZP.updateQueryText(e)):N.ZP.resetQuery({resetFilters:!1})},this[gy]=()=>P[gy]({[fy]:this[fy],searchResultsSection:this[Ky][Kf],modalBodyMenu:this.modalBodyMenuRef[Kf],searchFilterMenu:this[Vy][Kf]}),this.getNumLocalResults=()=>{var e;return(null===(e=this[Uy][Sy][Wf])||void 0===e?void 0:e.results[ey])??0},this.getNumTotalLocalResults=()=>{var e;return(null===(e=this[Uy][Sy][Wf])||void 0===e?void 0:e.total)??0},this.getSearchResultMetadata=e=>{const{store:t,[Qf]:i,[$f]:o,localSource:n}=e;return d.Z[Vf]((()=>{var a,s,r;return{blockId:t.id,blockType:t.getType(),lowestNavigableAncestorId:null===(a=t[Uf]())||void 0===a?void 0:a.id,depth:Z[Of](t)[ey],matchesText:Boolean(null==i?void 0:i.text),matchesPathText:Boolean((null==i?void 0:i.pathText)||(null==i?void 0:i.title)),matchesTitle:Boolean(null==i?void 0:i.title),isNavigable:t[Nf](),[Rf]:t[Lf](),isTeamArchived:null===(s=(0,Z.getTeam)(t))||void 0===s?void 0:s.isArchived(),[$f]:o,localSource:[...n??[]],badges:(null===(r=e.badges)||void 0===r?void 0:r.map((e=>e.type)))??[]}}))},this.getPathText=e=>{const t=[];return Z[Ef](e).forEach((e=>{if(T.isBlockStore(e)){var i;const o=(0,v.getText)(null===(i=e[Uf]())||void 0===i?void 0:i[Df]());o&&t.push(o)}else if((0,F.bq)()&&T.isTeamStore(e)){const i=e.getName();i&&t.push(i)}})),t},this.handleSpaceChange=()=>{const e=_.default[Sy][Bf]&&_.default[Sy][Bf].id;this[Hy]!==e&&(this[Hy]=e,this.resetState())},this.resetState=()=>{N.ZP[my](),D.default[my](),this[Uy][my](),this[Oy][my](),L.default[my]()}}willMount(){var e;this[Hy]=null===(e=_.default[Sy][Bf])||void 0===e?void 0:e.id,this[zy]="on"===A.default[qf]("search-clear-results-on-query-change"),(0,B.lO)()}willMountOrUpdate(e){if(e[ky]&&!D.default[Sy][hy]){const e=(0,p.default)();D.default[by]((t=>({...t,open:!1,openAsPage:!0,openedTimeMs:Date.now(),[hy]:e}))),y.trackOpenSearch(this[fy],{from:"nativeTab-search-direct-link",[py]:e})}}didMount(){this[Cy][ky]||D.default[Af](this.handleComponentOpenClose),_.default[Af](this.handleSpaceChange),b.potentialWebSearchAbandonEventEmitter[Af](this[oy])}willUnmount(){this.resetState(),this[Cy][ky]||D.default[xf](this.handleComponentOpenClose),b.potentialWebSearchAbandonEventEmitter[xf](this[oy]),_.default[xf](this.handleSpaceChange),this[qy]&&(clearTimeout(this[qy]),this[qy]=void 0)}renderComponent(){if(x.Z[Sy].isGlobalSearchHost)return null;if(this[Cy][ky])return this[Zy]();const{[yy]:e,mobileNative:t}=this[fy],i=Boolean(D.default[Sy].open);return n()(O.Z,{open:i,onDismiss:this[My],modalStyle:this.getModalStyle(),disableAnimation:!e[ny]||(null==t?void 0:t[_f]())||!1,[Zy]:this[Zy]})}getPublicAccessPermissionForPage(){return P[Ff](this[fy])}getSearchResultContent(e,t){return d.Z[Vf]((()=>{var i;return{title:(0,v.getText)(null===(i=e[Uf]())||void 0===i?void 0:i[Df]()),pathText:this.getPathText(e),[Qf]:{text:(0,C.fe)(null==t?void 0:t.text),pathText:(0,C.fe)(null==t?void 0:t.pathText)}}}))}getModalStyle(){const{[ky]:e}=this[Cy],t=(0,B.gq)({[yy]:this[fy][yy]}),i=Pf({[yy]:this[fy][yy],isPublicAccessPermissionForPage:this.getPublicAccessPermissionForPage()[If]});return{width:"75%",minHeight:50,maxHeight:e?"100vh":"80vh",transform:"translate3d(0,0,0)",background:this.theme.popoverBackground,maxWidth:t?"90vw":i?900:660,borderRadius:12}}}Jy.displayName="Search",Jy.MAX_RESULT_TO_TRACK=50;const $y=Jy},32357:(e,t,i)=>{i.d(t,{Z:()=>_e});var o=i(77094),n=i.n(o),a=i(67294),s=i(83355),r=i(49085),l=i(3909),d=i(5366),c=i(97880),u=i(50906),m=i(57688),p=i(43250),g=i(4708),h=i(79817),v=i(45094),f=i(38755),y=i(37688),b=i(8323),S=i(23537),w=i(85834),M=i(78291),k=i(42922),C=i(64921),Z=i(12508),T=i(63296),P=i(31278),I=i(64369),F=i(22193);const _=i(85).lWA,x=i(85).crr,A=i(85).GmX,B=i(85).OtN,D=i(85)._Fe,E=i(85).Yzm,L=i(85).XYO,R=i(85).cof,N=i(85).Wqi,O=i(85).dz$,U=i(85).P0R,V=i(85).eAn,W=(i(85).fXf,i(85).bqK),K=(i(85).paW,i(85).NLk),z=i(85).pkR,G=i(85).PG2,H=i(85).fmZ,q=i(85).PXg,j=i(85).nLZ,Q=i(85).tBn,J=i(85).D7I,$=i(85).Gpy,Y=i(85).nx5,X=i(85).g7N,ee=i(85).ChN,te=i(85).h8z,ie=i(85).UPJ,oe=i(85).BQ6,ne=i(85).dMt,ae=i(85).Scd,se=i(85).XCs,re=i(85).YDv,le=i(85).Mm1,de=i(85)._V5,ce=i(85).H3I,ue=i(85).TtP,me=i(85).FcT,pe=i(85).QmD,ge=i(85).Wp_,he=i(85).Gnd,ve=i(85).kyC,fe=i(85).wgE,ye=i(85).Au,be=i(85).a3v,Se=i(85).bey,we=i(85).rps,Me=i(85).$bT,ke=i(85).EMU,Ce=i(85).sM5,Ze=i(85).FTQ,Te=i(85).wfR,Pe=i(85).SUK,Ie=i(85).DL8;class Fe extends s.Z{constructor(){super(...arguments),this.storeTypes={[Ie]:w.ZP,[Pe]:r.default[Te](!1)},this[Ze]={padding:12,[Ce]:ke,[Me]:we,gap:16},this[Se]={width:20,height:20,fill:this[ye][be]}}didMount(){u.trackOpenShareWorkspaceInvite(this[fe],h[ve](this[fe],this[he][Ie])),(0,S.$)(this[fe])&&this[he][Ie][ge]({...this[he][Ie][pe],[me]:w.uq.page_guest})}renderComponent(){const{[Ie]:e}=this[he],t=e.getGuestEmails();if(!t[ue])return null;const i=(0,S.$)(this[fe]),o=(0,g.getInviteModalExperimentGroup)({shouldCheck:e[pe][ce]===w.TG.share_workspace});return a[J](a[Q],null,"copy_and_ui"===o?n()("div",{[oe]:{[de]:16,[le]:16,[re]:18,[se]:18,[ae]:"#F9F9F8",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:this[ye][ne]}},void 0,this.renderSpaceCard({showSpaceCardToggle:i,inviteModalExperimentGroup:o})):null,n()("div",{className:p.shareMenu,[oe]:{...this[Ze],[de]:16,[le]:16,[re]:18,[se]:18}},void 0,n()("div",{},void 0,n()("div",{[oe]:{[Ce]:ke,[Me]:"row",[ie]:te}},void 0,n()("div",{},void 0,e[pe][ce]===w.TG.share_workspace?this.renderShareWorkspace({useZeroTeamsExperience:i,guestEmails:t,inviteModalExperimentGroup:o}):a[J](a[Q],null,n()(I.Z,{[oe]:{[ee]:600,[X]:4}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.requestToWorkspace.title",[Y]:"Request to add to workspace"})),n()(I.Z,{isMultiline:!0,isSmall:!0},void 0,n()(d.FormattedMessage,{id:"contextualInvite.requestToWorkspace.subtitle",[Y]:"Do you want to send a request to your workspace admin to add {emailCount, plural, one {this person} other {these people}} to the workspace?",[$]:{emailCount:t[ue]}}))),"copy_and_ui"!==o?n()("div",{[oe]:{[Ce]:ke,flexWrap:"wrap",[j]:16,[X]:16}},void 0,this.renderEmailTokensSubtitle(t)):null)),"copy_and_ui"!==o?this.renderSpaceCard({showSpaceCardToggle:i}):null,n()("div",{[oe]:{[Ce]:ke,[ie]:"flex-end",[j]:18}},void 0,n()(T.Z,{isLarge:!0,[oe]:{[q]:10},[G]:()=>{this.selectPageGuestOption(),this[H]()}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.skip.button",[Y]:"Skip for now"})),n()(k.Z,{isLarge:!0,[z]:i&&!this[he][Pe][pe],[G]:()=>{e[pe][ce]===w.TG.share_workspace&&this.selectWorkspaceMemberOption(),e[pe][ce]===w.TG.request_workspace&&this.selectRequestWorkspaceMemberOption(),this[H]()}},void 0,e[pe][ce]===w.TG.share_workspace?n()(d.FormattedMessage,{id:"ContextualInvite.addToWorkspace.button",[Y]:"Add to workspace"}):n()(d.FormattedMessage,{id:"ContextualInvite.sendRequest.button",[Y]:"Send request"}))))))}getBillingInterval(){const e="year";if(!M.default[pe].data)return e;const t="customerData"in M.default[pe].data?M.default[pe].data.customerData:void 0;return t&&"stripe"in t&&"interval"in t.stripe?"year"===t.stripe.interval?"year":"month":e}renderShareWorkspace(e){let{useZeroTeamsExperience:t,guestEmails:i,inviteModalExperimentGroup:o}=e;const s=this.getBillingInterval();switch(o){case"copy_only":case"copy_and_ui":return a[J](a[Q],null,n()(I.Z,{[oe]:{[ee]:600,[X]:4,[K]:"normal"}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.addToWorkspace.title.v1",[Y]:"Add {emailMessage} to workspace",[$]:{[W]:i[ue]>1?2===i[ue]?`${i[0]} and another`:`${i[0]} and ${i[ue]-1} others`:`${i[0]}`}})),n()(I.Z,{isMultiline:!0,isSmall:!0,[oe]:{[X]:6}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.addToWorkspace.subtitle.v1",[Y]:"This gives them access to all shared pages in the space. You'll be billed {dollarAmount} {billingInterval}ly for additional members.",[$]:{dollarAmount:(0,y._)({[V]:(0,b.getSubscriptionTier)(),intl:this[U].intl,quantity:i[ue]*("year"===s?12:1)})[s],[O]:s}})));case"control":return a[J](a[Q],null,n()(I.Z,{[oe]:{[ee]:600,[X]:4}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.addToWorkspace.title",[Y]:"Add to workspace"})),n()(I.Z,{isMultiline:!0,isSmall:!0,[oe]:{[X]:6}},void 0,n()(d.FormattedMessage,{id:"contextualInvite.addToWorkspace.subtitle",[Y]:"Do you want to add {emailCount, plural,\n\t\t\t\t\t\t\t\t\tone {this person}\n\t\t\t\t\t\t\t\t\tother {these people}\n\t\t\t\t\t\t\t\t} to the workspace in addition to the page? {isPaid, select,\n\t\t\t\t\t\t\t\t\ttrue {This is a billable event.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",[$]:{emailCount:i[ue],isPaid:!(0,b.isFreeTier)()}})),n()(I.Z,{isMultiline:!0,isSmall:!0},void 0,n()(d.FormattedMessage,t?{id:"contextualInvite.addToWorkspace.zeroTeams.subtitle.blockLimit",[Y]:"Adding them as a member will auto-create a teamspace{isFreeTier, select,\n\t\t\t\t\t\t\t\t\tfree { and apply the 1,000 block limit to your workspace.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",[$]:{isFreeTier:(0,b.isFreeTier)()?"free":"paid"}}:{id:"contextualInvite.addToWorkspace.zeroTeams.subtitle",[Y]:"{isFreeTier, select,\n\t\t\t\t\t\t\t\t\tfree {This action will apply the 1,000 block limit to your workspace.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",[$]:{emailCount:i[ue],isFreeTier:(0,b.isFreeTier)()?"free":"paid"}})))}}renderEmailTokensSubtitle(e){const{[N]:t}=this[U];return e.map((e=>n()(F.Z,{store:t,tokenType:"guest",showRemoveButton:!1,target:{source:"email",type:"newUser",value:{email:e},spaceRole:"not_in_space"}},e)))}renderSpaceCard(e){let{showSpaceCardToggle:t,inviteModalExperimentGroup:i}=e;const{[N]:o}=this[U],a=(0,f.Wd)(this[fe],o),s=this[R](),r=o.getPublicSpaceData();let c;r&&"none"!==r.role&&(c=n()(d.FormattedMessage,{id:"contextualInvite.spaceCard.subtitle",[Y]:L,[$]:{numberOfWorkspaceMembers:this[U].intl.formatNumber(r.memberCount),planType:this[U].intl[E]((0,v.getProductName)(r[V]))}}));const u=a||s?n()(P.Z,{[z]:!0,icon:a,isEmptyPage:!1,title:s,size:30,[oe]:{color:this[ye][D],[q]:12}}):l.Z.folder(this[Se]);return n()(C.Z,{[oe]:{[Ce]:ke,borderWidth:1,borderStyle:"solid",borderColor:this[ye][ne],borderRadius:5,padding:12,[ie]:te,alignItems:"center",[B]:"copy_and_ui"===i?this[ye][A]:void 0},[z]:!t,[G]:()=>this[he][Pe][ge](!this[he][Pe][pe])},void 0,n()("div",{[oe]:{[Ce]:ke}},void 0,u,n()("div",{},void 0,n()(I.Z,{},void 0,s),n()(I.Z,{isSmall:!0},void 0,c))),t&&n()(Z.Z,{round:!0,checked:this[he][Pe][pe],fill:this[ye][A],size:20,[G]:()=>this[he][Pe][ge](!this[he][Pe][pe])}))}[R](){const{[N]:e}=this[U];return(0,f.rn)(this[fe],e)}selectWorkspaceMemberOption(){this[he][Ie][ge]({...this[he][Ie][pe],[me]:w.uq[x]})}selectRequestWorkspaceMemberOption(){this[he][Ie][ge]({...this[he][Ie][pe],[me]:w.uq[_]})}selectPageGuestOption(){this[he][Ie][ge]({...this[he][Ie][pe],[me]:w.uq.page_guest})}async[H](){const{[Ie]:e}=this[he],{[N]:t,blockStore:i,intl:o}=this[U];if(e[pe][ce]===w.TG.closed||e[pe][ce]===w.TG.share_page)return;const{[me]:n}=e[pe];switch(n){case w.uq[_]:u.trackClickMembershipRequest(this[fe],{...h[ve](this[fe],e),from:"share_menu"}),await h.requestMembers({[fe]:this[fe],[N]:t,originId:i.id,originType:"share_menu",reasonMessage:void 0,[Ie]:e,intl:o});break;case w.uq[x]:if(u.trackClickShareWorkspace(this[fe],h[ve](this[fe],e)),(0,S.$)(this[fe])){e[ge]({...e[pe],[ce]:w.TG.closed});if(!(await m.enableTeams({[fe]:this[fe],flowId:e[pe].flowId??"",trackCreateTeamComplete:!1})))return}await h.inviteMembers({[fe]:this[fe],[N]:t,[Ie]:e,from:"page_contextual_invite",intl:o});break;case w.uq.page_guest:e.reset();break;default:(0,c.unreachable)(n)}}}Fe.displayName="ContextualInvite";const _e=(0,d.injectIntl)(Fe)},22193:(e,t,i)=>{i.d(t,{Z:()=>Q});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(24405),u=i(8848),m=i(84619),p=i(33728),g=i(3909),h=i(97880),v=i(82990),f=i(7928),y=i(5366),b=i(75472),S=i(16639),w=i(21115),M=i(53353),k=i(26781),C=i(25464),Z=i(79315),T=i(55899),P=i(78291),I=i(58032),F=i(45653),_=i(85567);const x=i(85).dLQ,A=i(85).D7I,B=i(85).nx5,D=i(85).wuN,E=i(85).H1U,L=i(85).jkI,R=i(85).UPJ,N=i(85).N8h,O=i(85).OtN,U=i(85).QLx,V=i(85).n87,W=i(85).Ey3,K=i(85).naR,z=i(85).tHd,G=i(85).lI2,H=i(85).T04,q=i(85).adB,j=i(85).M_x;const Q=function(e){window.__c={n:"InviteTargetToken"};const{store:t,target:i}=e,o=(0,l.Fy)(),a=(0,y.useIntl)(),Q=(0,c.yK)((()=>({[G]:{margin:"0",[O]:"rgba(83, 168, 63, 0.1)"},disabled:{margin:"0",[O]:"rgba(211, 79, 67, 0.1)",border:"dashed #D9655B 1px",paddingLeft:5},normal:{margin:"0"},[V]:{margin:"0",[O]:"rgba(218, 163, 64, 0.2)"},tokenContent:{display:"flex",[E]:L,maxWidth:"100%"},tokenSpan:{maxWidth:"100%"},tokenText:{marginLeft:4,...v.Z.textOverflowStyle}})),[]),J=(0,d.VK)((()=>{const{data:e}=P.default.state,t=e?w.getVisibleUsers(e):[],i={};return t.forEach((e=>{i[e.userId]=e})),i}),[]),$=(0,d.VK)((()=>{const e=Z.default.state.currentSpaceStore;return new Set(null==e?void 0:e.getEmailDomains())}),[]),Y=(0,M.Z)(t),X=(0,k.i)(t),ee=(0,d.VK)((()=>{if(e.tokenType)return e.tokenType;if("group"===i.type)return j;if("existingUser"===i.type&&!Boolean(i.spaceRole)){const e=J[i.value.id];i.spaceRole=e?e.role:"not_in_space"}if(!(0,b.OA)(i))return q;const t=(0,p.Gd)(i.value[H]);return t&&$.has(t)?G:Y[z]&&!Y.teamAllowsGuests?K:!Y[z]&&!Y.spaceAllowsGuests||Y[z]&&!Y.teamAllowsGuests&&!Y.spaceAllowsGuests?W:V}),[e.tokenType,i,J,$,Y]),te=(0,d.VK)((()=>{switch(ee){case q:case j:return Q.normal;case V:return Q[V];case G:return Q[G];case W:case K:case U:return Q.disabled;default:(0,h.unreachable)(ee)}}),[ee,Q]);function ie(){const e=g.Z.help({height:16,width:16,color:"#D34F43"});switch(ee){case q:return(0,T.fZ)(i)?s()(F.Z,{userValue:i.value,size:16}):(0,T.KU)(i)?s()(F.Z,{size:16,avatar:i.value}):s()(F.Z,{size:16});case V:return g.Z.globe2({height:16,width:16,color:"#DAA340"});case G:return g.Z.circleCheck({height:16,width:16,color:"#53A83F"});case j:return s()("div",{style:{height:16,width:16,[O]:u.ZP[N](.8),borderRadius:"50%",display:"flex",[R]:L,[E]:L}},void 0,g.Z.typesPerson({height:12,width:12,color:u.ZP[D]}));case W:case K:case U:return e;default:(0,h.unreachable)(ee)}}function oe(t){const o=ie();let n=function(){switch(i.type){case"newUser":return i.value[H].trim();case"existingUser":return(0,f.Nz)(a,i.value);case j:return(0,S.kF)({intl:a,[j]:i.value});default:(0,h.unreachable)(i)}}(),r=Q.tokenText;return e.onlyShowTokenType&&(["guest","teamGuestDisabled","spaceGuestDisabled"].includes(t)?(n="Guest",r={...r,color:"#DAA340"}):(n="Member",r={...r,color:"#53A83F"})),s()("div",{style:Q.tokenContent},void 0,o,s()("div",{style:r},void 0,n))}function ne(t){var i;t.stopPropagation(),null===(i=e.onClickRemove)||void 0===i||i.call(e)}const ae="newUser"===i.type?i.value[H]:i.value.id,se="group"!==i.type?i.value[H]:void 0;return s()(I.Z,{placement:C.u.Top,renderTooltip:()=>function(e){const{tokenType:t,target:i,[H]:o}=e;return"guest"===t?s()(y.FormattedMessage,{[B]:"{email} will be invited as a guest",id:"inviteTargetToken.guest.tooltip",values:{[H]:o}}):"spaceGuestDisabled"===t||"teamGuestDisabled"===t?X:"teamGroupOwner"===t&&"group"===i.type?s()(y.FormattedMessage,{[B]:"Groups cannot be added as team owners.",id:"inviteTargetToken.groupTeamOwner.tooltip"}):"verifiedDomain"===t&&"group"!==i.type?r[A](r.Fragment,null,s()(y.FormattedMessage,{[B]:"{email}{br}will automatically be added to the workspace{br}since @{domain} is a verified domain.",id:"inviteTargetToken.verifiedDomain.tooltip",values:{[H]:i.value[H],br:s()("br",{}),domain:(0,p.Gd)(i.value[H])}})):"group"===i.type?i.value.name:o}({tokenType:ee,[H]:se,target:i}),render:t=>r[A]("span",n()({style:Q.tokenSpan},t),s()(_.Z,{isSingle:!1,format:o[x]?m.l.Large:m.l.Medium,showRemoveButton:e.showRemoveButton,onClickRemove:ne,disabledFeedback:!0,value:oe(ee),style:te,shouldWrap:!1}))},ae)}},20346:(e,t,i)=>{i.d(t,{Z:()=>k});var o=i(77094),n=i.n(o),a=(i(67294),i(480)),s=i(81954),r=i(24405),l=i(3909),d=i(5366),c=i(50906),u=i(33665),m=i(23537),p=i(16354),g=i(89728),h=i(64369);const v=i(85).nx5,f=i(85).PXg,y=i(85).XNW,b=i(85).dLQ,S=i(85).K07,w=i(85).XeC;function M(e){window.__c={n:"LearnAboutSharingLink"};const t=(0,a.O7)(),{device:i,WindowSizeStore:o}=t,M=(0,s.VK)((()=>({left:o[w](8),right:o[S](12)})),[o]),k=(0,s.VK)((()=>(0,m.bq)()),[]),C=(0,r.yK)((e=>({button:{display:"flex",alignItems:"center",width:i[b]?"100%":void 0,height:i[b]?44:24,paddingTop:i[b]?12:4,paddingBottom:i[b]?12:4,paddingLeft:M.left,paddingRight:M.right},helpIcon:{width:i[b]?16:14,height:i[b]?16:14,fill:i[b]?e.mediumIconColor:e.lightIconColor}})),[i[b],M]);return n()(p.Z,{href:(0,u.getLocalizedUrl)("guides.sharing"),onClick:()=>c.trackClickHelpButton(t,{from:"sharing"}),style:{width:i[b]?"100%":void 0},external:!0},void 0,n()(g.Z,{mobileFeedback:i[b],isSmall:!0,style:{...C.button,...e.style},disabled:Boolean(e.disableHover)},void 0,n()("div",{style:{[y]:i[b]?2:0,[f]:i[b]?8:6}},void 0,l.Z.help(C.helpIcon)),n()(h.Z,{isSmall:!0,[b]:i[b],isSecondaryColor:!i[b]},void 0,n()(d.FormattedMessage,k?{[v]:"Learn more",id:"blockPermissionsSettings.learnMore.prompt"}:{[v]:"Learn about sharing",id:"blockPermissionsSettings.learnAboutSharing.prompt"}))))}M.displayName="LearnAboutSharingLink";const k=M},37432:(e,t,i)=>{i.d(t,{Z:()=>Ve});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(96486),l=i.n(r),d=i(67294),c=i(83355),u=i(15145),m=i(8848),p=i(27006),g=i(21202),h=i(29369),v=i(97880),f=i(82990),y=i(5366),b=i(47307),S=i(57688),w=i(84210),M=i(21115),k=i(23537),C=i(31075),Z=i(61766),T=i(39098),P=i(48690),I=i(78291),F=i(64921),_=i(84076),x=i(31278),A=i(76798),B=i(58032),D=i(64369),E=i(7567),L=i(81954),R=i(24405);const N=i(85).pXY,O=i(85).L_E;function U(e){window.__c={n:"NameAndIconWrap"};const{store:t}=e,i=(0,L.VK)((()=>t.getIcon()),[t]),o=(0,R.yK)((()=>({[O]:{whiteSpace:"nowrap",fontWeight:f.Z.fontWeight.bold},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},[N]:{display:"inline"}})),[]);return s()("span",{style:o[O]},void 0,i&&s()(x.Z,{disabled:!0,icon:i,isEmptyPage:!1,size:12,style:o.recordIcon}),s()(A.Z,{store:t,style:o[N]}))}const V=function(e){const{store:t}=e;return s()(y.FormattedMessage,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:s()(U,{store:t})}})},W=i(85).K07,K=i(85).XeC,z=i(85).Zs0,G=i(85).sI1,H=i(85).NbQ,q=i(85).jtM,j=i(85).GPw,Q=i(85).rOg,J=i(85).tmd,$=(i(85).pV_,i(85).ELX),Y=i(85).bsV,X=i(85).wuN,ee=i(85).lGJ,te=i(85).AIq,ie=i(85).AEv,oe=i(85).XNW,ne=i(85).$bT,ae=i(85).bey,se=i(85).PXg,re=i(85).UPJ,le=i(85).jkI,de=i(85).H1U,ce=i(85).EMU,ue=i(85).sM5,me=i(85).pkR,pe=i(85).D7I,ge=i(85).dLQ,he=i(85).Joh,ve=i(85).Ubc,fe=i(85).PG2,ye=i(85).TLr,be=i(85).zkl,Se=i(85).Gnd,we=i(85).l81,Me=i(85).sqI,ke=i(85).wgE,Ce=i(85).Ww0,Ze=i(85).GOX,Te=i(85).Gpy,Pe=i(85).nx5,Ie=i(85).BQ6,Fe=i(85).ChN,_e=i(85).SPm,xe=i(85).PPM,Ae=i(85)._a5,Be=i(85).ttt,De=i(85).c9r,Ee=i(85).P0R,Le=i(85).Tb$,Re=i(85).JQm,Ne=i(85).GrF,Oe=i(85).LtW;class Ue extends c.Z{constructor(){super(...arguments),this.storeTypes={[Oe]:Z.Z},this[Ne]=void 0,this.handleRoleSelect=async e=>{if(this[Re](this[Ee][Le]))return;const t=this[Ee][Le],i=l().clone(t);i[De]=e;const o=this[Ee][Be].isTopLevel();if(o&&p.isSpacePermission(i)){const{data:e}=I.default.state,n=e?M[Ae](e):1;if(!(0,k.bq)()&&p.canRead(t[De])&&!p.canRead(i[De])&&n>1){if(!(await b[xe]({[_e]:s()("span",{},void 0,s()(y.FormattedMessage,{[Pe]:"Are you sure you want to make this page private? <semibold>Only you will be able to access it.</semibold>",[Te]:{semibold:e=>s()("span",{[Ie]:{[Fe]:f.Z[Fe].semibold}},void 0,e)},id:"blockPermissionsSettings.confirmationDialog.private.message"})),[Ze]:s()(y.FormattedMessage,{[Pe]:"Move to Private",id:"blockPermissionsSettings.confirmationDialog.privateButton.label"})})))return}else if(!(0,k.bq)()&&o&&!p.canRead(t[De])&&p.canRead(i[De])){if(!(await b[xe]({[_e]:s()("span",{},void 0,s()(y.FormattedMessage,{[Pe]:"Are you sure you want to share this page with the workspace? <semibold>It will be accessible by all {memberCount} members.</semibold>",id:"blockPermissionsSettings.confirmationDialog.workspace.message",[Te]:{semibold:e=>s()("span",{[Ie]:{[Fe]:f.Z[Fe].semibold}},void 0,e),[Ce]:n}})),[Ze]:s()(y.FormattedMessage,{[Pe]:"Move to workspace",id:"blockPermissionsSettings.confirmationDialog.workspaceButton.label"})})))return}}await(0,C.i)({oldPermissionItem:t,newPermissionItem:i,wasInherited:this.isInherited(),[ke]:this[ke],store:this[Ee][Be],[Me]:this[Ee][Me],[we]:this[Ee][we],fromPermissionWrapper:this[Ee].fromPermissionWrapper})},this.handleUserItemClick=()=>{this[Se][Oe].setState({...this[Se][Oe].state,open:!0})},this.getPermissionItemStore=()=>{const{from:e,[Be]:t}=this[Ee],i=e[be];return i===g.iU?T.G[ye](t,{[be]:g.iU,id:e.blockId}):i===h.e0?T.zX[ye](t,{[be]:h.e0,id:e.teamId}):void(0,v.unreachable)(i)}}willMountOrUpdate(){this[Ne]=this.getPermissionItemStore()}renderComponent(){const{device:e}=this[ke],t=this[Ee][fe]?this[Ee][fe]:this.handleUserItemClick,i=this[ve](),o=this[he]();return s()(B.Z,{delayThreshold:0,[he]:()=>o,textWrap:!0,disableTooltip:!Boolean(o),[Ie]:{maxWidth:240},render:o=>d[pe](F.Z,n()({[me]:i,mobileFeedback:e[ge],ignoreLocalHoverState:this[Ee].ignoreLocalHoverState,[Ie]:{...i?{cursor:"not-allowed"}:{}},[fe]:t},o),this.renderMenuItem()),placement:B.Z.Placement.Left})}renderMenuItem(){const{device:e}=this[ke],{showInherited:t,[Le]:i}=this[Ee],o=this.isUserItem(),n=this.isInherited();return s()("div",{className:"notranslate",[Ie]:this.getMenuItemStyle()},void 0,s()("div",{[Ie]:{[ue]:ce,[de]:le,[re]:le,width:32,height:32,[se]:e[ge]?12:10,...this[Ee][ae]}},void 0,this[Ee].icon),s()("div",{[Ie]:{[se]:"auto",minWidth:0}},void 0,s()("div",{[Ie]:{[ue]:ce,[ne]:"row"}},void 0,s()(D.Z,{[Ie]:{...!o&&{[Fe]:400}}},void 0,this[Ee].title),this[Ee].tag&&s()("div",{[Ie]:{[oe]:4}},void 0,this[Ee].tag)),this[Ee][ie]&&s()(D.Z,{isSmall:!0},void 0,this[Ee][ie]),t&&n&&this.renderInheritedRecordTitle()),s()("div",{[Ie]:{[ue]:ce,[de]:le,[te]:0,[oe]:8}},void 0,this[Ee].permissionRoleSelect?this[Ee].permissionRoleSelect:!this[Re](i)&&s()(E.ZP,{[De]:this[De],[be]:g.iU,blockType:this[Ee][Be].getType(),type:i.type,[me]:this[ve](),[Y]:this.permissionItemIsUserItem(i),onChange:this.handleRoleSelect,[ee]:this[Ee][ee],upgradeButtonName:this[Ee].upgradeButtonName,[Oe]:this[Se][Oe],[$]:{[se]:-8,color:this.theme[X],fontSize:e[ge]?14:12},showPermissionOverrideWarning:n,isRemovableOverride:this[Ee].isRemovableOverride})))}[he](){return this.isInherited()?!this.isTeamOuterItem()&&this[Ne]?s()(V,{store:this[Ne]}):null:this[Ee].nonInheritedTooltip}renderInheritedRecordTitle(){const e=this[Ne]||this.getPermissionItemStore(),t=e[be]===g.iU?(0,w.ZP)({store:e,fullyQualified:!1,pageVisitSource:u.tY.LinkInPage}):void 0,i=e[be]===h.e0?()=>{e[be]===h.e0&&S.viewTeam({[ke]:this[ke],teamId:e.id,tab:P.a.Members,from:"permission_item"})}:void 0,{device:o}=this[ke],n=e.getIcon(),a="team"!==e[be]&&e.isEmptyPage();return s()(D.Z,{isSmall:!0,[Ie]:{lineHeight:1.4}},void 0,o[ge]?s()(y.FormattedMessage,{[Pe]:"Based on {linkBoxWithPageTitle}",id:"pagePermissionItem.inheritedRecordPermissions.setting",[Te]:{[J]:s()(_.Z,{[me]:o[ge],[H]:!o[ge],[q]:!0,href:t,[fe]:i},void 0,s()(A.Z,{store:e,[Ie]:{[ue]:q}}))}}):s()(y.FormattedMessage,{[Pe]:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting",[Te]:{[J]:s()(_.Z,{[me]:o[ge],[H]:!1,[q]:!0,href:t,[fe]:i,[G]:{[ue]:Q,[de]:le,[j]:`0.5px solid ${m.ZP[X]}`}},void 0,s()(x.Z,{[me]:!0,[Ie]:{[se]:4},icon:n,size:14,isEmptyPage:a}),s()(A.Z,{store:e,[Ie]:{[ue]:q,[Fe]:f.Z[Fe].semibold}}))}}))}permissionItemIsUserItem(e){const t=this[ke].currentUser.id;return"user_permission"===e.type&&e.user_id===t}isUserItem(){return"user_permission"===this[Ee][Le].type}isTeamOuterItem(){return"team_overview_permission"===this[Ee][Le].type}get[De](){const{[Le]:e,[Be]:t}=this[Ee];if(this[Re](e))return"none";if("content_only_editor"===e[De]&&this.isInherited()){var i,o;const n=t[z](),a=null==n?void 0:n.getParentBlockStore();return a&&a[be]===(null===(i=this[Ne])||void 0===i?void 0:i[be])&&a.id===(null===(o=this[Ne])||void 0===o?void 0:o.id)?e[De]:"read_and_write"}return e[De]}[ve](){return"hidden_permission"===this[Ee][Le].type||!this.isTeamOuterItem()&&!this[Ee][Be].canAdmin()}isInherited(){var e;return(null===(e=this[Ne])||void 0===e?void 0:e.id)!==this[Ee][Be].id}[Re](e){return"team_overview_permission"===e.type||"hidden_permission"===e.type}getMenuItemStyle(){const{WindowSizeStore:e}=this[ke];return{[ue]:ce,[de]:le,minHeight:this[Ee].isCompact?44:52,paddingTop:8,paddingBottom:8,paddingLeft:e[K](14),paddingRight:e[W](14)}}}Ue.displayName="PermissionItem",Ue.iconSize=32;const Ve=Ue},3984:(e,t,i)=>{i.r(t),i.d(t,{OfflineMessage:()=>Yp,default:()=>Xp});var o={};i.r(o),i.d(o,{handleClickRemoveToken:()=>gn,handleInputChange:()=>pn});var n=i(97464),a=i.n(n),s=i(77094),r=i.n(s),l=i(67294),d=i(480),c=i(81954),u=i(24405),m=i(5366),p=i(43250),g=i(87279),h=i(33665),v=i(96486),f=i.n(v),y=i(26825),b=i(27006),S=i(21202),w=i(90468),M=i(29369),k=i(28020),C=i(98165),Z=i(67669),T=i(23537),P=i(79315),I=i(39098);const F=i(85).foJ,_=i(85).EUZ,x=i(85).o$g,A=i(85).FYR,B=i(85).C7g,D=i(85).x6c,E=i(85).P38,L=i(85).TUD,R=i(85).KKT,N=i(85).Tb$,O=i(85).UXS,U=i(85).TtP,V=i(85).CtD,W=i(85).XtO;function K(e){const{[W]:t}=e;if(t[V]()===w.bx)return!1;const i=(0,C.getParentStore)(t),o=i?(0,y.getInheritedPermissionItems)((0,C.getPermissionsPath)(i)):[],n=t.getPermissionItems(),a={};for(const s of o)a[(0,y.getPermissionTargetAsString)(s)]=s;for(const s of n){const e=s.role,t=a[(0,y.getPermissionTargetAsString)(s)];if(t){if((0,b.isTieredPermissionRole)(e)&&(0,b.isTieredPermissionRole)(t.role)&&(0,y.tieredRoleIsGreaterThan)(e,t.role))return!0;if(b.isUnlistedSpacePermission(t)&&!b.isUnlistedSpacePermission(s))return!0}else if((0,b.isSpacePermission)(s)||(0,b.isImplicitOrExplicitTeamOwnerPermission)(s)||(0,b.isImplicitOrExplicitTeamPermission)(s))return!0}return!1}function z(e){const{[W]:t}=e,i=(0,C.getNavigablePath)(t)[1];return{parentStore:i,canAccessParent:i&&i.canRead()}}function G(e){const{mostPermissivePermissions:t,[W]:i,teamId:o,type:n}=e;if(!o)return;const a=t.find((e=>{let{[N]:t}=e;return t.type===n}));if(a)return a;const s=t.find((e=>{let{[N]:t}=e;return b.isRestrictedPermission(t)}));return"explicit_team_guest_permission"!==n||s?{[N]:{type:n,role:"none",[R]:o},from:(null==s?void 0:s.from)??{table:S.iU,blockId:i.id}}:void 0}function H(e){const{environment:t,spaceStore:i,[W]:o}=e,n=(0,Z.getMostPermissiveBlockPermissions)(o);let a=[];i&&(a=i[E]());const s=C.getTeam(o),r=function(e){let{mostPermissivePermissions:t,[W]:i}=e;return t.find((e=>{let{[N]:t}=e;return b.isPublicPermission(t)}))||{[N]:{type:L,role:"none"},from:{table:S.iU,blockId:i.id}}}({mostPermissivePermissions:n,[W]:o}),l=function(e){let{mostPermissivePermissions:t,[W]:i,teamStore:o}=e;const n=t.find((e=>{let{[N]:t}=e;return b.isSpacePermission(t)}));if(n)return n;const a=t.find((e=>b.isRestrictedPermission(e[N])));return{[N]:{type:"space_permission",role:"none"},from:null!=a&&a.from||!o||"none"!==o.getSpacePermissionRole()?(null==a?void 0:a.from)??{table:S.iU,blockId:i.id}:{table:M.e0,teamId:o.id}}}({mostPermissivePermissions:n,[W]:o,teamStore:s}),d=G({mostPermissivePermissions:n,[W]:o,teamId:null==s?void 0:s.id,type:D}),c=G({mostPermissivePermissions:n,[W]:o,teamId:null==s?void 0:s.id,type:B}),u=G({mostPermissivePermissions:n,[W]:o,teamId:null==s?void 0:s.id,type:A});let m=n.filter((e=>{let{[N]:t}=e;return b.isGroupPermission(t)}));m=f().sortBy(m,(e=>{if(i){return i[E]().findIndex((t=>t.id===e[N].group_id))}return e[N].group_id}));let p=n.filter((e=>{let{[N]:t}=e;return(b[x](t)||b[_](t))&&t[R]!==(null==s?void 0:s.id)}));const g=new Map;p.forEach(((e,t)=>{let{[N]:i}=e;g.has(i[R])||g.set(i[R],t)})),p=f().sortBy(p,[e=>{let{[N]:t}=e;return g.get(t[R])||0},e=>{let{[N]:t}=e;return"explicit_team_owner_permission"===t.type?0:1}]);const h=n.filter((e=>{let{[N]:t}=e;return b.isUserPermission(t)})),v=(0,k.sidebarStateStore)(t).state,y=Boolean(null==s?void 0:s.isDefined());let w=v&&v.showWorkspaceSection||i&&"team"===i.getPlanType()||"none"!==l[N].role;(0,T.bq)()&&(w=i&&"team"===i.getPlanType()||"none"!==l[N].role);const P=w||y||h[U]>1||h[U]&&!b.canAdmin(h[0][N].role)||m[U]||b.canRead(l[N].role),I=n.some((e=>b.isRestrictedPermission(e[N])&&e.from.table===S.iU&&e.from.blockId===o.id)),O=(P?h[U]:0)+p[U]+m[U]+(w?1:0)+(y?1:0);return{showRestrictedPermissionBanner:I,showTeamPermission:y,showSpacePermission:w,mostPermissivePublicItem:r,mostPermissiveTeamOwnerItem:u,mostPermissiveTeamMemberItem:c,mostPermissiveTeamGuestItem:d,mostPermissiveSpaceItem:l,pagePermissionUIModel:{showUserPermissions:P,[F]:m,mostPermissiveTeamPermissions:p,mostPermissiveUserPermissions:h,spacePermissionGroups:a},permissionItemsCount:O}}var q=i(92994),j=i(88632),Q=i(85834),J=i(97238),$=i(52878),Y=i(1743),X=i(56940),ee=i(78140),te=i(40721),ie=i(64369),oe=i(46247),ne=i(32357),ae=i(97880),se=i(55899),re=i(41892),le=i(8848),de=i(3909),ce=i(82990),ue=i(51456);var me=i(51077),pe=i(73063),ge=i(66957),he=i(22421);const ve=i(85).NF1,fe=i(85).Yzm,ye=(i(85).u0P,i(85).Vtp),be=i(85).PG2,Se=i(85).L_E,we=i(85).XNW,Me=i(85).PXg,ke=i(85).D7I,Ce=i(85).nx5,Ze=i(85).cfO,Te=i(85).Wp_,Pe=i(85).jkI,Ie=i(85).H1U,Fe=i(85).EMU,_e=i(85).h8z,xe=i(85).UPJ,Ae=i(85).ChN,Be=i(85).Oad,De=i(85).sM5,Ee=i(85).yNZ;function Le(e){let{[Ee]:t,mostPermissivePublicItem:i}=e;window.__c={n:"ShareMenuHeader"};const{[De]:o,source:n}=(0,c.VK)((()=>{const{[De]:e}=J.ZP.state;if(e===J.wV.Invite){const{source:t}=J.ZP.state;return{[De]:e,source:t}}return{[De]:e,source:void 0}}),[]);switch(o){case J.wV[Be]:case J.wV.Publish:return r()(Ne,{mostPermissivePublicItem:i});case J.wV.Invite:if("notion"===n)return r()(Ue,{[Ee]:t});if("slack"===n)return r()(Ve,{});throw(0,ae.unreachable)(n);default:(0,ae.unreachable)(o)}}const Re=[J.XF.Share,J.XF.Publish];function Ne(e){let{mostPermissivePublicItem:t}=e;window.__c={n:"ShareMenuTabs"};const i=(0,d.O7)(),o=l.useRef(null),{isMobile:n}=i.device,s=(0,c.VK)((()=>J.ZP.state.tab),[]),p=(0,u.yK)((e=>({tabStyle:{color:e.lightTextColor,...n&&{width:"50%",textAlign:"center"}},selectedTabStyle:{[Ae]:ce.Z[Ae].medium},tabTitleStyle:{color:"inherit"},style:n?{marginBottom:8,[xe]:_e}:{marginBottom:14}})),[n]),g=(0,u.yK)((()=>({publishTabContainer:{[De]:Fe,[Ie]:Pe}})),[]),h=(0,l.useCallback)((e=>{const t=Re[e];t!==s&&(!function(e,t){ue.track(e,"share_menu_tab_click",t)}(i,{tab:t}),t===J.XF.Share&&J.ZP[Te]({...J.ZP.state,[De]:J.wV[Be],tab:J.XF.Share}),t===J.XF.Publish&&J.ZP[Te]({...J.ZP.state,[De]:J.wV.Publish,tab:J.XF.Publish}))}),[s,i]),v="none"!==t.permissionItem.role,f=[l[ke](l.Fragment,null,n?r()(m.FormattedMessage,{[Ce]:"Permissions",id:"shareMenu.permissionsTab.title"},Ze):r()(m.FormattedMessage,{[Ce]:"Share",id:"shareMenu.shareTab.title"},"share")),l[ke]("div",{key:"publishTab",ref:o,style:g.publishTabContainer},r()(m.FormattedMessage,{[Ce]:"Publish",id:"shareMenu.publishTab.title"},"publish"),v&&Oe.publishedCheckIcon({opacity:s===J.XF.Publish?1:.5}),r()(he.jG,{originRef:o}))];return l[ke](ge.Z,a()({},p,{tabs:f,selectedIndex:Re.indexOf(s),onChange:h}))}const Oe={[J.XF.Share]:de.Z.iOSShare({height:17,width:17,[Me]:4}),[J.XF.Publish]:de.Z.globe3({height:15,width:15,[Me]:4}),publishedCheckIcon:e=>{let{opacity:t}=e;return de.Z.circleCheckFilled({color:le.ZP.blue,width:14,height:14,[we]:4.5,opacity:t})}};function Ue(e){let{[Ee]:t}=e;window.__c={n:"InviteFromNotionHeader"};const i=(0,u.yK)((()=>({[Se]:{[De]:Fe,margin:"0 12px 6px",height:48}})),[]),o=(0,l.useCallback)((()=>{t.reset(),J.ZP[Te]({...J.ZP.state,[De]:J.wV[Be],tab:J.XF.Share})}),[t]);return r()("div",{style:i[Se]},void 0,r()(We,{[be]:o}))}function Ve(){window.__c={n:"InviteFromSlackHeader"};const e=(0,m.useIntl)(),t=(0,u.yK)((()=>({[Se]:{[De]:Fe,[xe]:_e,margin:"0 12px",height:48,[Ie]:Pe},titleLabel:{[De]:Fe,fontSize:12,[Ie]:Pe,[Ae]:ce.Z[Ae].semibold}})),[]),i=(0,l.useCallback)((()=>{J.ZP[Te]({...J.ZP.state,tab:J.XF.Share,[De]:J.wV.Invite,source:J.T5.Notion,focus:J.Sw.Search,emailMessage:""})}),[]),o=l[ke](l.Fragment,null,r()(me.Z,{type:"image_url",imageURL:re.Z.images[ye].slackIconPng,size:18,imageStyle:{[we]:4,[Me]:4}}),r()(m.FormattedMessage,{[Ce]:"Slack",id:"shareMenu.slackIntegrationName.label"}));return r()("div",{style:t[Se]},void 0,r()(ie.Z,{style:t.titleLabel},void 0,r()(m.FormattedMessage,{id:"shareMenu.addFromSlack.label",[Ce]:"Add people from {integrationNameWithLogo}",values:{integrationNameWithLogo:o}})),r()(pe.Z,{ariaLabel:e[fe]({id:"shareMenuHeader.goBackToInviteFromNotionMenu.iconButton",[Ce]:"Close slack integration and go back to the main invite flow."}),icon:de.Z.closeSmall,style:{[ve]:"100%"},[be]:i}))}function We(e){window.__c={n:"BackButton"};const{[be]:t}=e,i=(0,m.useIntl)(),o=(0,u.yK)((()=>({topContainer:{[De]:Fe,[Ie]:Pe,width:"max-content"},backButtonPressedStyle:{backgroundColor:"transparent"},iconButton:{[Me]:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:ce.Z[Ae].semibold},sendInviteLabel:{[Ae]:ce.Z[Ae].medium}})),[]);return r()("div",{style:o.topContainer},void 0,r()(pe.Z,{icon:de.Z.arrowLeftThick,iconStyle:o.arrowIcon,style:o.iconButton,[be]:t,ariaLabel:i[fe]({id:"shareMenu.backButton.iconButton",[Ce]:"Go back to main share menu."})}),r()(ie.Z,{style:o.sendInviteLabel},void 0,r()(m.FormattedMessage,{id:"shareMenu.sendInvite.label",[Ce]:"Send invite"})))}const Ke=i(85).jGl;function ze(e){const{store:t}=e;return(0,c.VK)((()=>{const e=P.default.state.currentSpaceStore,i=(0,C.getTeam)(t);return i?{isPublicAccessDisabled:Boolean(i[Ke]()),disabledBy:"team"}:{isPublicAccessDisabled:Boolean(null==e?void 0:e[Ke]()),disabledBy:"space"}}),[t])}var Ge=i(31075),He=i(42922);i(85)._Ur;const qe=i(85).nx5,je=i(85).Q$w,Qe=i(85).otN,Je=i(85).g7N,$e=i(85).jkI,Ye=i(85).L_E,Xe=i(85).sqI;function et(e){window.__c={n:"PublishToWeb"};const{store:t,mostPermissivePublicItem:i,permissionItemArgs:o}=e,{permissionItem:n,from:a}=i,{[Xe]:s,location:p}=o,g=(0,d.O7)(),h=(0,c.VK)((()=>t.canAdmin()),[t]),{isPublicAccessDisabled:v}=ze({store:t}),f=!h||v,y=(0,u.yK)((e=>({[Ye]:{display:"flex",flex:1,justifyContent:$e,alignItems:$e,flexDirection:"column",padding:32,textAlign:$e,cursor:f?"not-allowed":""},icon:{height:30,width:30,[Je]:10,fill:e.mediumIconColor},title:{fontWeight:ce.Z.fontWeight.semibold,fontSize:14,[Je]:6},caption:{marginLeft:26,marginRight:26,[Je]:20},button:{display:"flex",width:"100%",padding:16,cursor:f?"not-allowed":"pointer"}})),[f]),b=(0,c.VK)((()=>{var e;return null===(e=P.default.state.currentSpaceStore)||void 0===e?void 0:e[Qe]()}),[]),w=a.table===S.iU?a.blockId:a.teamId,M=(0,l.useCallback)((()=>{const e=!b&&n[je];(0,Ge.i)({oldPermissionItem:n,newPermissionItem:{...n,role:"reader",[je]:e},wasInherited:w!==t.id,environment:g,store:t,[Xe]:s,location:p})}),[g,w,p,b,n,t,s]);return r()("div",{style:y[Ye]},void 0,de.Z.globe3(y.icon),r()("div",{style:y.title},void 0,r()(m.FormattedMessage,{[qe]:"Publish to web",id:"publishTab.publishToWeb.title"})),r()(ie.Z,{isMultiline:!0,isSecondaryColor:!0,style:y.caption},void 0,r()(tt,{store:t})),r()(He.Z,{style:y.button,disabled:f,onClick:M},void 0,r()(m.FormattedMessage,{[qe]:"Publish to web",id:"publishTab.publishToWeb.button"})))}function tt(e){let{store:t}=e;window.__c={n:"PublishToWebMessage"};const{isPublicAccessDisabled:i,disabledBy:o}=ze({store:t}),n=(0,c.VK)((()=>t.canAdmin()),[t]);return r()(m.FormattedMessage,i?"team"===o?{[qe]:"Publishing to web is disabled for this page via teamspace settings.",id:"publishTab.publishToWeb.disabledByTeamspace.caption"}:{[qe]:"Publishing to web is disabled for this page via workspace settings.",id:"publishTab.publishToWeb.disabledByWorkspace.caption"}:n?{[qe]:"Publish a static website of this page. You can allow others to view, duplicate, and remix.",id:"publishTab.publishToWeb.hasFullAccess.caption"}:{[qe]:"You must have full access to this page to publish to web.",id:"publishTab.publishToWeb.noFullAccess.caption"})}var it=i(15145),ot=i(5978),nt=i(84210),at=i(81236),st=i(63296),rt=i(58032),lt=i(91376);const dt=i(85).NbQ,ct=i(85).tvI,ut=i(85).Bn$,mt=i(85).Vy4,pt=i(85).rER,gt=i(85).Vgm,ht=i(85).z$9,vt=i(85).mFu,ft=i(85).D7I,yt=i(85).nx5,bt=i(85).BQ6,St=i(85).XCs,wt=i(85).jkI,Mt=i(85).L_E,kt=i(85).dLQ,Ct=i(85).K07,Zt=i(85).XeC;function Tt(e){window.__c={n:"LearnAboutAutogeneratedDomainsCTA"};const t=(0,d.O7)(),{WindowSizeStore:i}=t,{safePaddingLeftCSS:o,safePaddingRightCSS:n}=(0,c.VK)((()=>({safePaddingLeftCSS:i[Zt](8),safePaddingRightCSS:i[Ct](8)})),[i]),{[kt]:s}=(0,d.Fy)(),{spaceStore:p,canChangeSettings:g,publicSpaceData:h}=(0,c.VK)((()=>{const e=P.default.state.currentSpaceStore;return e?{spaceStore:e,canChangeSettings:e.canAdmin(),publicSpaceData:at.Z.getPublicSpaceData(t,e.id)}:{}}),[t]),v=(0,u.yK)((t=>({[Mt]:{boxShadow:`0 -1px 0 ${t.regularDividerColor}`,width:"100%",display:"flex",alignItems:wt,justifyContent:wt,flexDirection:"column",textAlign:wt,padding:"8px 8px",paddingLeft:o,[St]:n,color:t.mediumTextColor,backgroundColor:t.inputBackground,...e[bt]}})),[e[bt],o,n]);if(!p)return null;if(s)return null;if(!h)return null;return h.domainIsAutogenerated&&g?r()("span",{[bt]:v[Mt]},void 0,r()("div",{[bt]:{display:"flex"}},void 0,l[ft](ie.Z,a()({isSmall:!0,[kt]:!1,isSecondaryColor:!0,[bt]:{[St]:"4px"}},e.labelStyle),r()(m.FormattedMessage,{[yt]:"Set a domain for your public links in",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.setDomainForPublicLinks"})),r()("span",{[bt]:{cursor:vt,userSelect:ht,[gt]:ht,color:le.ZP.inherit},onClick:()=>{lt[pt]({[mt]:ut})}},void 0,l[ft](ie.Z,a()({isSmall:!0,[kt]:!1,isSecondaryColor:!1,[bt]:{[ct]:dt}},e.labelStyle),r()(m.FormattedMessage,{[yt]:"Settings",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.openSettingsCTA"}))))):null}var Pt=i(98459),It=i(50906),Ft=i(43132),_t=i(33929),xt=i(21115),At=i(5162),Bt=i(10161),Dt=i(64921),Et=i(74194),Lt=i(89728),Rt=i(24006),Nt=i(60442),Ot=i(42115),Ut=i(37432),Vt=i(13991),Wt=i(7057),Kt=i(63143),zt=i(61766),Gt=i(31194),Ht=i(52275),qt=i(31945),jt=i(32163),Qt=i(72495),Jt=i(93289),$t=i(95030);const Yt=i(85).OBp,Xt=i(85).j7K,ei=i(85).y79,ti=i(85).Dd5,ii=i(85).XZm,oi=i(85).lMs,ni=i(85).g4H,ai=i(85).N1Z,si=i(85).rpY,ri=i(85).Zij,li=i(85).D7I,di=i(85).a3v,ci=i(85).XNW,ui=i(85).Tb$,mi=i(85).XCs,pi=i(85).YDv,gi=i(85).nx5,hi=i(85).dLQ,vi=i(85).pkR;function fi(e){window.__c={n:"PublicPermissionItemLinkExpirationMenu"};const t=(0,d.Fy)(),[,,i]=(0,c.AF)(void 0,zt.Z),o=(0,u.Fg)(),n=(0,d.O7)(),s=(0,c.VK)((()=>(0,xt.subscriptionAllowsExpiringPublicLinks)(n)),[n]),{buttonMenuItemStyle:h}=(0,u.yK)((()=>({buttonMenuItemStyle:{opacity:e[vi]?.6:1,cursor:e[vi]?"not-allowed":""}})),[e[vi]]);return l[li](qt.ZP,a()({},e.upsellEvents,{disablePopup:!s,[vi]:e[vi],popupType:t[hi]?qt.Z4.SlideUp:qt.Z4.Popup,buttonPopupStore:i,renderOrigin:t=>l[li](Ht.Z,a()({},t,{focused:!1,[vi]:e[vi],style:h,[ri]:r()(ie.Z,{},void 0,r()(m.FormattedMessage,{id:"publicPermissionItem.expirationTime.label",[gi]:"Link expires"})," ",e.upgradeLabel),right:l[li](Lt.Z,a()({},t,{[vi]:e[vi],ignoreLocalHoverState:!0,style:{[pi]:0,[mi]:0}}),r()(yi,{[ui]:e[ui]}),de.Z.chevronDown({width:10,[ci]:4,fill:o[di]}))})),alignmentToOrigin:Gt.lU.End,placementToOrigin:Gt.Iw.Bottom,[si]:i=>{const o=[{key:"options",[si]:e=>l[li](Qt.Z,e),items:Si().map((t=>({key:t.type,action:()=>{bi(e,n,t.time),i[ai]()},[si]:e=>l[li](Ht.Z,a()({},e,{focused:e.focused,[vi]:!1,[ri]:t[ri],[ni]:t[ni]}))})))},{key:oi,[si]:e=>l[li](Qt.Z,a()({},e,{topBorder:!0})),items:[{key:oi,action:()=>{i[ai]()},[si]:(t,o)=>l[li]($t.Z,a()({},t,{renderOrigin:e=>l[li](Ht.Z,a()({},e,{[vi]:!1,[ri]:r()(m.FormattedMessage,{id:"publicPermissionItem.expiration.chooseDate",[gi]:"Choose date"})})),onFocus:o.onFocus,disableDefaultClick:!0,renderExtension:(t,o)=>r()("div",{style:{padding:"18px 14px 14px"}},void 0,l[li](Jt.Z,a()({},t,{firstDayOfWeek:k.userSettingsStartOfWeekStore.state,value:e[ui][ii]||(new Date).getTime(),[ti]:t=>{bi(e,n,t),o[ai](),i[ai]()},disabledDays:{before:new Date}})))}))}]}];let s;return s=t[hi]?{menuType:g.og.Modal,[ri]:r()(m.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.title",[gi]:"Expiration time"}),right:r()(m.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.label",[gi]:"Done"}),onClickRight:i[ai]}:{menuType:g.og.Popup,width:264},l[li](ee.Z,a()({className:p.sharingPermissionExpirationTimestamp},s),r()(jt.Z,{type:jt.i[ei],[Xt]:void 0,sections:o}))}}))}function yi(e){const{[ui]:t}=e;return!t[ii]||(0,b.isPublicPermissionExpired)(t)?r()(m.FormattedMessage,{id:"publicPermissionItem.expiration.never",[gi]:"Never"}):r()(ie.Z,{},void 0,e[ui][ii]&&(0,Wt.tv)(e[ui][ii],Vt.SP))}function bi(e,t,i){const{[ui]:o,[ti]:n}=e;if("public_permission"!==o.type)return;if(void 0!==i&&i<=(new Date).getTime())return;const a=o,s=f().clone(a),r=i;s[ii]=r,n(s),It.trackSetExpirationTimeOnPublicPage(t,{expiration_time:r})}function Si(){const e=(new Date).getTime()+Kt.HourMs,t=(new Date).getTime()+Kt.DayMs,i=(new Date).getTime()+7*Kt.DayMs;return[{type:"never",time:void 0,[ri]:r()(m.FormattedMessage,{id:"publicPermissionItem.expiration.never",[gi]:"Never"})},{type:"hour",time:e,[ri]:r()(m.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.hour",[gi]:"In an hour"}),[ni]:new Intl.DateTimeFormat(Vt.SP,{hour:Yt,minute:Yt}).format(e)},{type:"day",time:t,[ri]:r()(m.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.day",[gi]:"In a day"}),[ni]:new Intl.DateTimeFormat(Vt.SP,{day:Yt,month:"long",hour:Yt,minute:Yt}).format(t)},{type:"week",time:i,[ri]:r()(m.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.week",[gi]:"In a week"}),[ni]:new Intl.DateTimeFormat(Vt.SP,{day:Yt,month:"long",hour:Yt,minute:Yt}).format(i)}]}const wi=i(85).K07,Mi=i(85).XeC,ki=i(85).g4H,Ci=i(85).e5W,Zi=i(85).Dsi,Ti=i(85).TPm,Pi=i(85).uGP,Ii=i(85).kdG,Fi=i(85).jFW,_i=i(85).FOQ,xi=i(85).S9$,Ai=i(85).nx5,Bi=i(85).rpY,Di=i(85).Joh,Ei=i(85).bSA,Li=i(85).ESK,Ri=i(85).XZm,Ni=i(85).PWK,Oi=i(85).PCZ,Ui=i(85).tQz,Vi=i(85).BQ6,Wi=i(85).Dd5,Ki=i(85).D7I,zi=i(85).pkR,Gi=i(85).PG2,Hi=i(85).Q$w,qi=i(85).otN,ji=i(85).qJ8,Qi=i(85).Mm1,Ji=(i(85).DI_,i(85).L_E),$i=i(85).lGJ,Yi=(i(85).sqI,i(85).ttt),Xi=i(85).Tb$;function eo(e){window.__c={n:"PageLinkOptions"};const{[Xi]:t,[$i]:i,[Wi]:o,[Yi]:n}=e,s=(0,d.O7)(),p=(0,c.VK)((()=>!n.canAdmin()),[n]),g=(0,c.VK)((()=>{var e;return Boolean(null===(e=P.default.state[ji])||void 0===e?void 0:e[qi]())}),[]),h=b.canComment(t.role),v=!1!==t[Hi],f=b.canEdit(t.role),y=Boolean(t[Ui]),S=(0,l.useCallback)((()=>{o({role:f?Oi:"read_and_write"})}),[f,o]),w=(0,l.useCallback)((()=>{o({role:h?"reader":Oi})}),[h,o]),M=(0,l.useCallback)((()=>{const e=!y;o({[Ui]:e}),It.trackToggleAllowSearchEngineIndexing(s,{[Ui]:e})}),[s,o,y]),k=(0,l.useCallback)((()=>{const e=!v;o({[Hi]:e}),It.trackToggleAllowDuplicate(s,{[Hi]:e})}),[v,s,o]),C=(0,c.VK)((()=>Bt.default.checkGate("expiring_public_links")),[]),Z=(0,c.VK)((()=>!(0,xt.subscriptionAllowsExpiringPublicLinks)(s)&&(0,xt.getPaidTierForCurrentSubscription)(s)),[s]),T=(0,c.VK)((()=>!(0,xt.subscriptionAllowsSearchEngineIndexing)(s)&&(0,xt.getPaidTierForCurrentSubscription)(s)),[s]),I=(0,c.VK)((()=>lo(s)),[s]),F=(0,c.VK)((()=>p||g&&!v),[p,v,g]),_=(0,u.yK)((()=>({optionLabel:{marginRight:"auto",opacity:p?.6:1},[Ni]:p?{...I,cursor:"not-allowed"}:I})),[p,I]);return l[Ki](l.Fragment,null,l[Ki](l.Fragment,null,C&&r()(Ot.Z,{alwaysAllowClick:Boolean(t[Ri]),[Gi]:()=>{},[Ei]:"public_permission_item_expiration",requireUpgradeToTier:Z,tooltipPlacement:rt.Z[Li].Left,[Di]:no,renderUpgradeTooltip:ao,onUpgradeClick:i,[Bi]:(e,i)=>r()(fi,{upsellEvents:e,upgradeLabel:i,[Xi]:t,[Wi]:o,[zi]:p})}),r()(rt.Z,{placement:rt.Z[Li].Left,[Di]:io,[Bi]:e=>l[Ki](Dt.Z,a()({[Gi]:S,[Vi]:_[Ni],[zi]:p},e),r()(ie.Z,{[Vi]:_.optionLabel},void 0,r()(m.FormattedMessage,{[Ai]:"Allow editing",id:"pagePermissionItem.allowEdits.setting"})),r()(Rt.Z,{on:f,[Gi]:S,[zi]:p}))}),r()(rt.Z,{placement:rt.Z[Li].Left,[Di]:oo,[Bi]:e=>l[Ki](Dt.Z,a()({[Gi]:w,[Vi]:_[Ni],[zi]:p},e),r()(ie.Z,{[Vi]:_.optionLabel},void 0,r()(m.FormattedMessage,{[Ai]:"Allow comments",id:"pagePermissionItem.allowComments.setting"})),r()(Rt.Z,{on:h,[Gi]:w,[zi]:p}))})),r()(rt.Z,{placement:rt.Z[Li].Left,[Di]:g&&!v?ro:so,[Bi]:e=>l[Ki](Dt.Z,a()({[Gi]:k,[zi]:F,[Vi]:_[Ni]},e),r()(ie.Z,{[Vi]:_.optionLabel},void 0,r()(m.FormattedMessage,{[Ai]:"Allow duplicate as template",id:"pagePermissionItem.allowDuplicateTemplate.setting"})),r()(Rt.Z,{on:v,[Gi]:k,[zi]:F}))}),r()(Ot.Z,{requireUpgradeToTier:T,alwaysAllowClick:t[Ui],[Ei]:Ui,[Gi]:M,onUpgradeClick:i,tooltipPlacement:rt.Z[Li].Left,[Di]:no,renderUpgradeTooltip:ao,[Bi]:(e,t)=>l[Ki](Dt.Z,a()({[Vi]:_[Ni],[zi]:p},e),r()(ie.Z,{[Vi]:_.optionLabel},void 0,r()(m.FormattedMessage,{[Ai]:"Search engine indexing",id:"pagePermissionItem.allowSearchEngines.setting"})," ",t),r()(Rt.Z,{on:y,[Gi]:M,[zi]:p||Boolean(t)}))}))}function to(e){window.__c={n:"PageLinkButton"};const[t,i]=l.useState(!1),[o,n]=l.useState(void 0),{[Yi]:a}=e,s=(0,d.O7)(),p=(0,c.VK)((()=>lo(s)),[s]),g=(0,u.yK)((()=>({[Ji]:{...p,height:"auto"},flex:{flex:1},wrapper:{display:"flex",padding:"1px 0"},input:{flex:1,borderTopRightRadius:0,[xi]:0,paddingRight:0},[_i]:{height:28,borderTopLeftRadius:0,[Fi]:0,borderLeft:"none"}})),[p]),h=(0,c.VK)((()=>(0,nt.ZP)({store:a,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=at.Z.getPublicSpaceData(s,(0,Pt.CG)(a.getSpaceId())))||void 0===e?void 0:e.domain},pageVisitSource:it.tY.CopyLink})),[a,s]),v=(0,l.useCallback)((()=>{s[Ii]&&(0,At.Y)("supportsNativeCopy")?s[Ii].copyText(h,_t.default.formatMessage(Ft[Ti][Pi])):Ft.copyString({environment:s,stringValue:h,copiedMessage:Ft[Ti][Pi]}),clearTimeout(o),i(!0),n(window.setTimeout((()=>{i(!1)}),1e3)),It.trackCopyWebLink(s)}),[s,h,o]);return r()("div",{[Vi]:g[Ji]},void 0,r()("div",{[Vi]:g.flex},void 0,r()("div",{[Vi]:g.wrapper},void 0,r()(Et.Z,{value:h,[zi]:!0,[Vi]:g.input}),r()(st.Z,{[Gi]:v,[Vi]:g[_i]},void 0,r()(m.FormattedMessage,t?{id:"pageShareMenu.copiedLinkButton.label",[Ai]:"✓ Copied"}:{id:"pageShareMenu.copyMaybePublicLinkButton.label.web",[Ai]:"Copy web link"})))))}function io(){return r()(Nt.Z,{[ki]:r()(m.FormattedMessage,{[Ai]:"Any logged in Notion user can edit this page. Share the secret link with people you trust.",id:"pagePermissionItem.allowEdits.tooltip"}),imageHeight:120,imageWidth:240,imageURL:re.Z[Ci][Zi].share.allowEditingPng})}function oo(){return r()(Nt.Z,{[ki]:r()(m.FormattedMessage,{[Ai]:"Any logged in Notion user can comment on this page.",id:"pagePermissionItem.allowComments.tooltip"}),imageHeight:120,imageWidth:240,imageURL:re.Z[Ci][Zi].share.allowCommentsPng})}function no(){return r()(Nt.Z,{[ki]:r()(m.FormattedMessage,{[Ai]:"If allowed, your public page may appear in search engines such as Google, but only if you or someone else links to it elsewhere on the web.",id:"pagePermissionItem.allowSearchEngine.tooltip"}),imageHeight:120,imageWidth:240,imageURL:re.Z[Ci][Zi].share.allowSearchEnginesPng})}function ao(){return r()(Nt.Z,{imageURL:re.Z[Ci][Zi].upsells.searchEngineIndexingPng,imageWidth:240,imageHeight:100,title:r()(m.FormattedMessage,{[Ai]:"Upgrade for search engine indexing",id:"pagePermissionItem.searchEngineUpgradeTooltip.title"}),[ki]:r()(m.FormattedMessage,{[Ai]:"Have your page appear in search engine results.",id:"pagePermissionItem.searchEngineUpgradeTooltip.caption"})})}function so(){return r()(Nt.Z,{[ki]:r()(m.FormattedMessage,{[Ai]:"If allowed, this will allow other people to duplicate your public page to their workspace.",id:"pagePermissionItem.allowDuplicateTemplate.tooltip"}),imageHeight:120,imageWidth:240,imageURL:re.Z[Ci][Zi].share.allowDuplicatePng})}function ro(){return r()(Nt.Z,{[ki]:r()(m.FormattedMessage,{[Ai]:"This workspace does not allow page duplication to other workspaces.",id:"pagePermissionItem.duplicateTemplateDisabled.tooltip"}),imageWidth:240})}function lo(e){const t=e.WindowSizeStore;return{display:"flex",alignItems:"center",width:"100%",height:e.device.isMobile?36:30,paddingTop:5,[Qi]:5,paddingLeft:t[Mi](14),paddingRight:t[wi](14)}}const co=i(85).Joh,uo=i(85).PG2,mo=i(85).D7I,po=i(85).ttt,go=i(85).nx5,ho=(i(85)._Ur,i(85).FOQ),vo=i(85).lGJ,fo=i(85).sqI,yo=i(85).Tb$;function bo(e){window.__c={n:"PublishToWebSettings"};const{store:t,mostPermissivePublicItem:i,permissionItemArgs:o}=e,{[yo]:n,from:s}=i,{[fo]:p,location:g,[vo]:h}=o,v=(0,d.O7)(),{isMobile:f}=v.device,y=(0,u.yK)((e=>({title:{color:e.blueColor,fontWeight:ce.Z.fontWeight.medium,fontSize:14,display:"flex",alignItems:"center",margin:"0px 16px 10px",paddingTop:f?4:0},icon:{height:16,width:16,marginRight:6},linkSharingOptions:{margin:"10px 2px"},learnAboutDomainsCTA:{fontSize:14,margin:"8px 8px",padding:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},buttonGroup:{margin:"10px 14px 16px",display:"flex",gap:10},[ho]:{flexGrow:1,height:34},disabledButton:{opacity:.7,cursor:"not-allowed"}})),[f]),b=(0,c.VK)((()=>!t.canAdmin()),[t]),w=s.table===S.iU?s.blockId:s.teamId,M=(0,l.useCallback)((e=>{(0,Ge.i)({oldPermissionItem:n,newPermissionItem:{...n,...e},wasInherited:w!==t.id,environment:v,store:t,[fo]:p,location:g})}),[n,w,t,v,p,g]),k=(0,l.useCallback)((()=>{M({role:"none"})}),[M]),C=(0,c.VK)((()=>(0,nt.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=at.Z.getPublicSpaceData(v,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:it.tY.LinkInPage})),[t,v]),Z=(0,l.useCallback)((()=>{!function(e){ue.track(e,"view_public_site_click")}(v),ot.navigate({url:C,environment:v,openInNew:"tab"})}),[v,C]);return r()("div",{},void 0,r()("div",{style:y.title},void 0,de.Z.blueCircleDot(y.icon),r()(m.FormattedMessage,{[go]:"This page is live on the web",id:"publishTab.settings.liveOnWeb.title"})),r()(to,{[po]:t}),r()(Tt,{style:y.learnAboutDomainsCTA,labelStyle:{isSmall:!1}}),r()("div",{style:y.linkSharingOptions},void 0,r()(eo,{[po]:t,[yo]:n,onChange:M,[vo]:h})),r()("div",{style:y.buttonGroup},void 0,r()(rt.Z,{disableTooltip:!b,[co]:()=>r()(m.FormattedMessage,{[go]:"You must have full access to this page to unpublish it",id:"publishTab.settings.liveOnWeb.unpublishTooltip"}),render:e=>l[mo](st.Z,a()({[uo]:k,disabled:b,style:b?{...y[ho],...y.disabledButton}:y[ho]},e),r()(m.FormattedMessage,{[go]:"Unpublish",id:"publishTab.settings.liveOnWeb.unpublish"}))}),r()(He.Z,{[uo]:Z,style:y[ho]},void 0,r()(m.FormattedMessage,{[go]:"View site",id:"publishTab.settings.liveOnWeb.viewSite"}))))}const So=i(85).KAl;function wo(e){const{store:t,mostPermissivePublicItem:i,[So]:o}=e,{permissionItem:n}=i;return"none"!==n.role?r()(bo,{store:t,mostPermissivePublicItem:i,[So]:o}):r()(et,{store:t,mostPermissivePublicItem:i,[So]:o})}var Mo=i(94044),ko=i(5500),Co=i(54642),Zo=i(95209),To=i(48429),Po=i(4708),Io=i(79817),Fo=i(53353),_o=i(26781),xo=i(29987),Ao=i(34859),Bo=i(30874),Do=i(29798),Eo=i(78291),Lo=i(3386),Ro=i(18647),No=i(7567),Oo=i(44385),Uo=i(29477),Vo=i(68626),Wo=i(77719),Ko=i(68785);const zo=i(85).nuv,Go=i(85).Q9F,Ho=i(85).TtP,qo=i(85).nx5,jo=(i(85).u0P,i(85).Vtp),Qo=i(85).D7I,Jo=i(85).L_E,$o=i(85).piI,Yo=i(85).XNW,Xo=i(85).PLy,en=i(85).Csb,tn=i(85).GTJ;function on(e){window.__c={n:"ImportContactsButton"};const{onClickAuthenticated:t}=e,i=(0,d.O7)(),[o,n]=l.useState(!1),a=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),s=(0,c.VK)((()=>{const e=null==a?void 0:a.getBotSettingsStore().getValue();return"approved_only"!==(null==e?void 0:e[tn])||Boolean((null==e?void 0:e[en])&&e[en][ko.nO])}),[a]),p=(0,c.VK)((()=>Bo.Z.integrations.state.find((e=>e.id===ko.nO))),[]),g=(0,c.VK)((()=>Bo.Z[Xo].state),[]),h=(0,u.yK)((e=>({circleCheck:{height:14,width:14,[Yo]:6,color:le.ZP.blue},chevron:{height:12,width:12,[Yo]:6},title:{display:"flex",alignItems:"center",color:le.ZP.uiLightBlack,size:14},[$o]:{display:"flex"},integrationIcon:{[Yo]:4,marginRight:4},[Jo]:{height:36,bottom:0,width:"100%",backgroundColor:e.modalBackground,pointerEvents:"all",transitionProperty:"max-height",transitionDuration:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",padding:3},button:{width:"100%",paddingTop:15,paddingBottom:15,paddingLeft:9},loadingSpinner:{width:14,height:14,[Yo]:6}})),[]);if(!a)return l[Qo](l.Fragment,null);if(!s)return l[Qo](l.Fragment,null);const v=r()("div",{style:h[$o]},void 0,r()(me.Z,{type:"image_url",imageURL:re.Z.images[jo].slackIconPng,size:18,imageStyle:h.integrationIcon}),r()(m.FormattedMessage,{[qo]:"Slack",id:"importContactsButton.integrationName"})),f=o?r()(Ko.Z,{style:h.loadingSpinner}):l[Qo](l.Fragment,null,g[Ho]>0&&de.Z.circleCheckFilled(h.circleCheck),de.Z[Go](h.chevron));return r()("div",{style:h[Jo]},void 0,r()(Lt.Z,{style:h.button,onClick:async()=>{0===g[Ho]?await async function(){const e=i.currentUser.id;if(!p||!a||!e)return;try{var o;n(!0);const e=await Wo.hM({environment:i,integration:p,spaceId:a.id,from:"share_menu"});if(Vo.x.isFail(e))return;const s=null===(o=e.value[zo])||void 0===o?void 0:o.parent_id;if(!s)return;const r=Bt.default.getEligibleGroup({experimentId:"import_slack_contacts",defaultGroup:2e3,parameter:"load_contacts_timeout"}),l=Number(r);await Promise.race([Co.loadContacts(i,{botId:s,spaceId:a.id,integrationId:p.id}),(0,Uo.timeout)(Number.isNaN(l)?2e3:l)]),null==t||t()}finally{n(!1)}}():g[Ho]>0&&(null==t||t())}},void 0,r()("div",{style:h.title},void 0,r()(m.FormattedMessage,{[qo]:"Add contacts from {integrationNameWithLogo}",id:"importContactsButton.integrationButton.label",values:{integrationNameWithLogo:v}}),f)))}var nn=i(33728),an=i(26907),sn=i(8323);const rn=i(85).H6e,ln=i(85).Wp_,dn=i(85).yNZ,cn=i(85).eAn,un=i(85).wgE,mn=f().debounce((e=>{let{[un]:t,flowId:i,[cn]:o,origin:n}=e;It.trackInviteTyped(t,{invite_flow_id:i,subscription_tier:o,invite_origin:n})}),1e3);async function pn(e){const{[un]:t,event:i,flowId:o,[dn]:n,inviteOrigin:a}=e;n[ln]({...n.state,tokenQuery:i.target.value}),mn({[un]:t,flowId:o,[cn]:(0,sn.getSubscriptionTier)(),origin:a});const s=i.target.value,{extractedEmails:r,newInputValue:l}=(0,nn.zI)(s),d=(await Zo.getInviteUserFromEmails(t,r)).filter((e=>!an.isInInviteTargets({[dn]:n,target:e}))),c=[...n.state[rn],...d];n[ln]({...n.state,[rn]:c,tokenQuery:l})}function gn(e){const{targetToRemove:t,[dn]:i}=e;if(0===i.state[rn].length)return;const o=i.state[rn].filter((e=>e!==t));0===o.length?i[ln]({...i.state,[rn]:[]}):i[ln]({...i.state,[rn]:o})}var hn=i(47082),vn=i(22193);const fn=i(85).C$B,yn=i(85).Ut2,bn=i(85).H6e,Sn=i(85).yNZ;const wn=function(e){window.__c={n:"InviteTargetsInput"};const{flowId:t,store:i,disabled:n,placeholder:a,right:s,focus:l,onFocus:m,onSubmit:p}=e,g=(0,d.O7)(),h=(0,d.Fy)(),v=(0,c.qz)(e[Sn],se.ZP),f=(0,c.VK)((()=>v.state[bn]),[v]),y=(0,c.VK)((()=>v.state.tokenQuery),[v]),b=f.map((e=>{const t="newUser"===e.type?e.value.email:e.value.id;return r()(vn.Z,{store:i,target:e,showRemoveButton:!0,onClickRemove:()=>o[yn]({[Sn]:v,targetToRemove:e})},t)})),S=(0,u.yK)((e=>({tokenSpan:{maxWidth:"100%"},tokenInputMenuItem:{paddingTop:0===f.length?0:6,paddingLeft:6,paddingRight:6,paddingBottom:0,borderRadius:3,minHeight:"unset",...l&&{background:"none"},...n&&{background:e.inputBackground,color:e.mediumTextColor,fill:le.ZP.white,opacity:.4}},tokenInputMenuItemInput:{paddingTop:0===f.length?6:0}})),[f,l,n]);return r()(hn.Z,{focus:l,focusAfterAnimation:!0,onClick:()=>{h.isMobile||null==m||m()},format:hn.Z.Format.Share,value:y,onChange:e=>o[fn]({environment:g,event:e,[Sn]:v,inviteOrigin:"page_contextual_invite",flowId:t}),type:"email",tokens:b,disabled:n,autoComplete:"off",placeholder:a,onRemoveLastToken:()=>{v.setState({...v.state,[bn]:v.state[bn].slice(0,-1)})},right:s,showBorder:!0,inputStyle:S.tokenInputMenuItemInput,style:S.tokenInputMenuItem,onSubmit:p})};var Mn=i(75472),kn=i(77907),Cn=i(83355);const Zn=i(85).lGm,Tn=i(85).GGR,Pn=i(85).yzD,In=i(85).lWm,Fn=i(85).Scd,_n=i(85).od_,xn=i(85).P0R;class An extends Cn.Z{renderComponent(){return r()(Dt.Z,{hovered:this[xn].hovered,onClick:this[xn].onClick,disabled:this[xn].disabled,disabledFeedback:!0,style:{...this[_n](),...this[xn].isLarge&&{height:32},...this[xn].style},hoveredStyle:{[Fn]:this.theme[In]},pressedStyle:{[Fn]:this.theme[Pn]},onFocus:this[xn].onFocus,onBlur:this[xn].onBlur,onMouseDown:this[xn].onMouseDown,[Tn]:this[xn][Tn],onMouseLeave:this[xn].onMouseLeave,[Zn]:this[xn][Zn]},void 0,this[xn].children)}[_n](){return{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:3,boxShadow:this.theme.plainButtonBoxShadow,[Fn]:this.theme.inputBackground,color:this.theme.mediumTextColor,fill:le.ZP.white,lineHeight:1.2,paddingLeft:12,paddingRight:12,fontSize:14}}}An.displayName="InputButton";const Bn=An,Dn=i(85).D7I,En=i(85).pkR,Ln=(i(85).VO,i(85).YyZ),Rn=i(85).Uie,Nn=i(85).PG2,On=i(85).nx5,Un=i(85).$ig,Vn=i(85).EJF;const Wn=function(e){window.__c={n:"PermissionsInviteEntry"};const{store:t}=e,{isMobile:i}=(0,d.Fy)(),o=(0,c.VK)((()=>t.canEditMembership()),[t]),n=(0,u.yK)((()=>({[Vn]:{display:"flex",alignItems:"center",gap:Mo.p_},inputButton:{flex:1,justifyContent:"flex-start",height:30,overflow:"hidden"},blueButton:{minWidth:Mo.UF}})),[]);return r()(rt.Z,{renderTooltip:()=>r()(m.FormattedMessage,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",[On]:Un}),disableTooltip:o,render:t=>l[Dn]("div",a()({style:n[Vn]},t),r()(Bn,{[Nn]:e[Nn],[En]:!o&&!0,style:n.inputButton},void 0,r()("div",{style:ce.Z[Rn]},void 0,r()(m.FormattedMessage,{[On]:"Add emails or people",id:Ln}))),!i&&r()(He.Z,{isLarge:!0,[Nn]:e[Nn],[En]:!o&&!0,style:n.blueButton},void 0,r()(m.FormattedMessage,{id:"inviteUserButton.invitePersonLabel",[On]:"Invite"})))})},Kn=i(85).wgE,zn=i(85).ELX,Gn=i(85).pkR,Hn=i(85).wYS,qn=i(85).h0C,jn=i(85).Jy7,Qn=i(85).sqI,Jn=i(85).lGJ;function $n(e){window.__c={n:"MobileInviteSection"};const{store:t,permissionItemArgs:i}=e,{[Jn]:o,[Qn]:n}=i,a=(0,c.qz)(void 0,$.Z),{[jn]:s}=(0,c.VK)((()=>a.state),[a]),l=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),m=(0,c.VK)((()=>a.stage),[a]),p=(0,c.VK)((()=>s.state.modalOpen),[s]),g=(0,d.O7)(),h=(0,c.VK)((()=>t.canAdmin()),[t]),v=(0,c.VK)((()=>{const{data:e}=Eo.default.state;return Boolean(e&&xt[qn](e))}),[]),f=(0,c.VK)((()=>function(e){const{[W]:t}=e,i=(0,C.getTeam)(t),o=P.default.state.currentSpaceStore;return Boolean((null==o?void 0:o[O]())||(null==i?void 0:i[O]()))}({store:t})),[t]),y=(0,u.yK)((e=>({button:{display:"flex",alignItems:"center",minHeight:52},buttonInner:{width:"100%"},modalButton:{height:36}})),[]);return l?m!==Q.TG.closed?r()(kn.LazyUniversalMemberInvite,{universalInviteStore:a,mode:"milestone_2",spaceStore:l,[Qn]:n,store:t,[Gn]:!h,membersOnly:f,[qn]:v,[Jn]:o,upgradeButtonName:Hn,shouldGrow:!0,[zn]:{height:36}}):r()(Dt.Z,{mobileFeedback:!0,[Gn]:!0,style:y.button},void 0,r()("div",{style:y.buttonInner},void 0,p&&r()(kn.LazyPermissionsInviteWithModal,{store:t,[Gn]:!h,membersOnly:f,[qn]:v,[Jn]:o,upgradeButtonName:"invite_permission_block",shouldGrow:!0,[zn]:y.modalButton,[jn]:s}),r()(Wn,{store:t,onClick:()=>(0,Mn.z5)({[Kn]:g,[jn]:s,store:t,[qn]:v,renderInShareModal:!1})}))):null}var Yn=i(19889),Xn=i(7928),ea=i(91536),ta=i(64684);function ia(){const{data:e}=Eo.default.state,t=e?xt.getVisibleUsers(e):[],i=new Map;return t.forEach((e=>{i.set(e.userId,e)})),i}function oa(e){const{spaceVisibleUserMap:t,blockStore:i,userId:o}=e,n=t.get(o);if(!n||"none"!==n.role)return;if(!n.isTeamGuest)return"guest";const a=C.getTeam(i);if(!a)return"guest";return(0,ta.s8)({team:{membership:a.getRawMembership()},userId:o})?"team_level_guest":"guest"}var na=i(65598),aa=i(16639),sa=i(12793),ra=i(31278),la=i(25735);const da=i(85).ki8,ca=i(85).ttt,ua=i(85).D7I,ma=i(85).KAl,pa=i(85).i$f,ga=i(85).p_Z,ha=i(85).nx5,va=(i(85).ls5,i(85).xvx),fa=i(85).ChN,ya=i(85).Tb$;function ba(e){window.__c={n:"GroupPermissionTooltip"};const{group:t}=e,i=(0,m.useIntl)(),o=(0,aa.kF)({intl:i,group:t});return r()(la.Y,{group:t,limit:15,noMembersMessage:r()(Nt.Z,{imageURL:re.Z.images.tooltips.share.sharedPng,imageWidth:240,imageHeight:120,caption:r()(m.FormattedMessage,{[ha]:"For all members of the {groupName} group, this page will show up in the <boldtext>Shared</boldtext> section in their sidebar.",values:{boldtext:e=>r()("span",{style:{[fa]:ce.Z[fa].bold}},void 0,e),[da]:o},id:"blockPermissionsSettings.groupPermission.tooltip"})})})}const Sa=function(e){window.__c={n:"BlockGroupPermissionItem"};const{store:t,groupPermission:i,spaceId:o,fromPermissionWrapper:n}=e,s=(0,m.useIntl)(),d=(0,c.VK)((()=>{const{currentSpaceStore:e}=P.default.state;if(!e)return!1;return e.getPermissionGroups().find((e=>e.id===i[ya].group_id))}),[i[ya].group_id]);if(!d)return null;const u=d.user_ids||[],g=(0,aa.kF)({intl:s,group:d}),h=d.icon&&r()(ra.Z,{disabled:!0,title:g,icon:d.icon?{pointer:{table:"space",id:o},icon:d.icon}:void 0,isEmptyPage:!1,size:18});return r()("div",{style:{[fa]:400},className:p.blockPermissionSettingsGroupAccess},d.id,l[ua](Ut.Z,a()({[ca]:t,[ya]:i[ya],from:i.from,icon:r()(sa.Z,{size:Ut.Z.iconSize}),title:g,tag:h,ignoreLocalHoverState:e.ignoreLocalHoverState,showInherited:e.showInherited,nonInheritedTooltip:r()(ba,{group:d}),subtitle:r()("div",{},void 0,r()(m.FormattedMessage,{[ha]:"Group",id:va})," · ",r()(m.FormattedMessage,{[ha]:ga,id:pa,values:{numberOfGroupMembers:u.length}})),upgradeButtonName:"group_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:n},e[ma])))};var wa=i(88198),Ma=i(45653);const ka=i(85).cZW,Ca=i(85).nx5,Za=i(85).NF1,Ta=i(85).ttt,Pa=i(85).D7I,Ia=i(85).KAl,Fa=i(85).Tb$;function _a(e){window.__c={n:"Icon"};const{userValue:t}=e,i=(0,u.yK)((()=>({iconPlaceholder:{height:Ut.Z.iconSize,width:Ut.Z.iconSize,[Za]:20}})),[]);return t?r()(Ma.Z,{userValue:t,size:Ut.Z.iconSize}):r()(Ba,{style:i.iconPlaceholder})}function xa(e){window.__c={n:"Title"};const{userValue:t,guestLabel:i}=e,o=(0,m.useIntl)(),n=(0,u.yK)((()=>({titlePlaceholder:{height:8,width:81,[Za]:3}})),[]);if(!t)return r()(Ba,{style:n.titlePlaceholder});const a=(0,Xn.Nz)(o,t);return l[Pa](l.Fragment,null,a?r()("div",{style:{display:"flex",gap:4}},void 0,r()(ie.Z,{className:"notranslate"},void 0,a),i&&r()(wa.b,{labelType:i})):r()(m.FormattedMessage,{[Ca]:"Invitation sent",id:"blockPermissionsSettings.sentInvitation.message"}))}function Aa(e){window.__c={n:"Subtitle"};const{userValue:t}=e,i=(0,u.yK)((()=>({uiLabel:{display:"flex"},subtitlePlaceholder:{height:8,width:139,[Za]:3,marginTop:10},dotSeparator:{marginLeft:2,marginRight:2}})),[]);return null!=t&&t.email?r()(ie.Z,{isSmall:!0},void 0,t.email):r()(Ba,{style:i.subtitlePlaceholder})}function Ba(e){window.__c={n:"Placeholder"};const t=(0,u.yK)((t=>({[ka]:{...e.style,background:t.lightDividerColor}})),[e.style]);return r()("div",{style:t[ka]})}const Da=function(e){window.__c={n:"BlockUserPermissionItem"};const{store:t,userPermission:i,spaceVisibleUserMap:o,fromPermissionWrapper:n}=e,s=(0,c.VK)((()=>I.U6.createChildStore(t,{table:Yn.KJ,id:i[Fa].user_id}).getValue()),[t,i[Fa].user_id]),d=(0,c.VK)((()=>{if(null!=s&&s.id)return oa({spaceVisibleUserMap:o,userId:s.id,blockStore:t})}),[t,o,s]);return r()("div",{},i[Fa].user_id,l[Pa](Ut.Z,a()({[Ta]:t,[Fa]:i[Fa],from:i.from,ignoreLocalHoverState:e.ignoreLocalHoverState,icon:r()(_a,{userValue:s}),title:r()(xa,{userValue:s,guestLabel:d}),subtitle:r()(Aa,{userValue:s}),showInherited:e.showInherited,upgradeButtonName:"user_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:n},e[Ia])))},Ea=i(85).nx5;function La(e){let{permissions:t}=e;window.__c={n:"ExpandablePermissionsList"};const[i,o]=(0,l.useState)(!1),n=(0,u.yK)((e=>({button:{display:i?"none":"inline-flex",padding:10,width:"100%"},icon:{width:14,transform:"rotate(90deg)",marginLeft:14,marginRight:18,fill:e.lightIconColor},list:{display:i?"block":"none"}})),[i]);return l.createElement(l.Fragment,null,r()(Dt.Z,{onClick:()=>o(!0),style:n.button},void 0,r()("div",{},void 0,de.Z.dots(n.icon)),r()(ie.Z,{isSmall:!0,isSecondaryColor:!0},void 0,r()(m.FormattedMessage,{id:"blockPermissionsSettings.permissionsList.expandButton",[Ea]:"{count} more people",values:{count:t.length}}))),r()("div",{style:n.list},void 0,t))}const Ra=i(85).D7I,Na=i(85).nx5,Oa=i(85).UWG,Ua=i(85).RJH;const Va=function(e){window.__c={n:"MorePeoplePermissionItem"};const{store:t}=e,i=(0,u.yK)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},[Ua]:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]),o={table:S.iU,blockId:t.id};return r()(Ut.Z,{icon:de.Z[Oa](i.icon),iconStyle:i[Ua],title:r()(m.FormattedMessage,{[Na]:"More people may have access",id:"blockPermissionsSettings.permissionItem.hiddenAccess"}),nonInheritedTooltip:r()(m.FormattedMessage,{[Na]:"This page may be shared with additional people through a parent page or teamspace that you don't have access to",id:"blockPermissionsSettings.hiddenAccess.tooltip"}),permissionRoleSelect:l[Ra](l.Fragment,null),currentBlockStore:t,permissionItem:{type:"hidden_permission"},from:o,upgradeButtonName:"team_permission_item"})};var Wa=i(38755),Ka=i(84076),za=i(93686),Ga=i(57688),Ha=i(47307),qa=i(76464),ja=i(12359),Qa=i(18878);const Ja=i(85).ne5,$a=i(85).s6j,Ya=i(85).wgE;const Xa=i(85).s6j,es=i(85).kOq,ts=i(85).wgE;var is=i(25464),os=i(48690),ns=i(76798),as=i(62385);const ss=i(85).tmd,rs=i(85).D7I,ls=(i(85).ns,i(85).nx5),ds=i(85).wgE,cs=i(85).FOQ,us=i(85).BQ6,ms=i(85).EJF,ps=i(85).ChN,gs=i(85).wuN,hs=i(85).XNW,vs=i(85).icY,fs=i(85).PXg,ys=i(85).UPJ,bs=i(85).RJH,Ss=i(85).jkI,ws=i(85).H1U,Ms=i(85).$bT,ks=i(85).EMU,Cs=i(85).sM5,Zs=i(85).L_E,Ts=i(85).XCs,Ps=i(85).Xte,Is=i(85).XeC,Fs=i(85).YDv,_s=i(85).sqI;function xs(e){window.__c={n:"PermissionsRestoreBanner"};const{showRestoreButton:t,store:i,type:o,[_s]:n}=e,{isMobile:a}=(0,d.Fy)(),s=(0,c.VK)((()=>C.getNavigablePath(i)[1]),[i]),l=(0,d.O7)(),m=(0,c.VK)((()=>({[Fs]:l[Ps][Is](14),[Ts]:l[Ps][Is](14)})),[l]),p=(0,u.yK)((e=>({[Zs]:{[Cs]:ks,minHeight:20,[Ms]:"row",[ws]:Ss,paddingTop:8,paddingBottom:6,[Fs]:m[Fs],[Ts]:m[Ts]},banner:{[Cs]:ks,[Ms]:"row",width:"100%",fontSize:12},icon:{width:16,fill:e.mediumIconColor},[bs]:{width:20,height:20,[Cs]:ks,[ys]:Ss,[ws]:Ss,[fs]:5},messageContainer:{[Cs]:ks,[Ms]:"column"},[vs]:{[Cs]:"inline",[hs]:a?14:0,color:a?"#CF8807":e[gs],[ps]:a?ce.Z[ps].regular:ce.Z[ps].medium,[fs]:6,lineHeight:"20px"},[ms]:{[hs]:-5},divider:{opacity:"75%"},mobileContainer:{borderRadius:4,height:34,[hs]:14,[fs]:14,marginTop:5,marginBottom:5,[Ts]:9,[Cs]:ks,[ws]:Ss,[ys]:"space-between",backgroundColor:"rgba(246, 192, 80, 0.26)"}})),[a,m]);return a?r()("div",{[us]:p.mobileContainer},void 0,r()(ie.Z,{isMultiline:!0,isSmall:!0,[us]:p[vs]},void 0,r()(Ds,{type:o,navigableParentStore:s,showRestoreButton:t})),t&&r()(As,{store:i,type:o})):r()("div",{[us]:p[Zs]},void 0,r()("div",{[us]:p.banner},void 0,r()("div",{[us]:p[bs]},void 0,Es[o](p.icon)),r()("div",{},void 0,r()(ie.Z,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,[us]:p[vs]},void 0,r()(Ds,{type:o,navigableParentStore:s,showRestoreButton:t})),t&&r()("span",{[us]:p[ms]},void 0,r()(As,{store:i,type:o,[_s]:n})))))}function As(e){window.__c={n:"PermissionsRestoreButton"};const{type:t,store:i,[_s]:o}=e,{isMobile:n}=(0,d.Fy)(),a=(0,c.VK)((()=>!!o&&o.shouldSaveTransactionWithSudoMode(i)),[i,o]),s=(0,u.yK)((e=>({[cs]:{color:n?"#CF8807":e.regularTextColor,[ps]:ce.Z[ps].medium},tooltip:{width:210,whiteSpace:"initial"}})),[n]),p=(0,d.O7)();if("restore-team"===t){const e=async()=>{await async function(e){const{[ts]:t,useSudoMode:i,store:o}=e,n={type:es,permissionChanges:[]};await Ha.confirmUserAction({message:(0,Qa.mX)(n),acceptLabel:(0,Qa.nH)(n),cancelLabel:r()(m.FormattedMessage,{id:Xa,defaultMessage:"Close"})})&&ja.createAndCommit({userAction:"PermissionsRestoreBanner.restoreTeamPermissions",[ts]:t,useSudoMode:i,perform:e=>{qa.restorePermissionsForTopLevelTeamPage({[ts]:t,store:o,transaction:e})}})}({[ds]:p,useSudoMode:a,store:i})};return r()(rt.Z,{[us]:s.tooltip,placement:is.u.Bottom,renderTooltip:()=>r()(m.FormattedMessage,{[ls]:"Reset page permissions to match default teamspace permissions",id:"permissionsRestoreBanner.tooltip.teamPermissions"}),render:t=>l[rs]("span",t,r()(as.Z,{[us]:s[cs],onClick:e},void 0,r()(m.FormattedMessage,{id:"permissionsRestoreBanner.button.teamPermissions",[ls]:"Reset"})))})}if("unrestrict"===t){const e=async()=>{const e=i.getPermissionItems(),t=C.getParentStore(i),o=t?(0,y.getInheritedPermissionItems)(C.getPermissionsPath(t)):[],n=(0,y.getPermissiveChangesFromRestoringInheritance)(e,o);await async function(e){const{[Ya]:t,useSudoMode:i,store:o,permissionChanges:n}=e,a={type:"restore",permissionChanges:n};await Ha.confirmUserAction({message:(0,Qa.mX)(a),acceptLabel:(0,Qa.nH)(a),cancelLabel:r()(m.FormattedMessage,{id:$a,defaultMessage:"Close"}),description:r()(Qa.mo,{openState:a})})&&(o[Ja]().canAdmin()?ja.createAndCommit({userAction:"PermissionsRestoreBanner.restoreRestrictedPermissions",[Ya]:t,useSudoMode:i,perform:e=>{qa.restoreInheritedPermissions({[Ya]:t,store:o,transaction:e})}}):qa.adminRestoreInheritedPermissions({[Ya]:t,store:o}))}({[ds]:p,useSudoMode:a,store:i,permissionChanges:n})};return r()(as.Z,{[us]:s[cs],onClick:e},void 0,r()(m.FormattedMessage,{id:"permissionsRestoreBanner.button.restrictedPermissions",[ls]:"Restore"}))}(0,ae.unreachable)(t)}function Bs(e){window.__c={n:"ClickableAttribution"};const{navigableParentStore:t,maxLength:i,showUnderline:o}=e,{isMobile:n}=(0,d.Fy)(),a=(0,d.O7)(),s=(0,u.yK)((e=>({linkBox:{color:e[gs]},title:{[Cs]:"inline"}})),[]),l=(0,c.VK)((()=>{if(t instanceof I.G)return(0,nt.ZP)({store:t,fullyQualified:!1,pageVisitSource:it.tY.LinkInPage})}),[t]);if(!t)return null;const m=n&&t.table===M.e0;return r()(Ka.Z,{disabled:m,[us]:m?void 0:s.linkBox,underline:o&&!m,inline:!0,onClick:t.table===M.e0?()=>{t.table===M.e0&&Ga.viewTeam({[ds]:a,teamId:t.id,tab:os.a.Members,from:"permission_item"})}:void 0,href:l},void 0,r()(ns.Z,{shouldWrap:!0,maxLength:i,store:t,[us]:s.title}))}function Ds(e){window.__c={n:"PermissionsRestoreBannerLabel"};const{type:t,navigableParentStore:i,showRestoreButton:o}=e,{isMobile:n}=(0,d.Fy)(),a=r()(Bs,{navigableParentStore:i,maxLength:n||!o?void 0:30,showUnderline:!0});switch(t){case"restore-team":return r()(m.FormattedMessage,{id:"pageShareMenu.restoreTeamPermissionsBanner.label",[ls]:"Page access is different from {linkBoxWithPageTitle}.",values:{[ss]:a}});case"unrestrict":return r()(m.FormattedMessage,n?{id:"pageShareMenu.restrictedAccessBanner.mobileLabel",[ls]:"Page access is restricted to people below.",values:{[ss]:a}}:{id:"pageShareMenu.restrictedAccessBanner.label",[ls]:"Access restricted. May not be shared with everyone from {linkBoxWithPageTitle}.",values:{[ss]:a}});default:(0,ae.unreachable)(t)}}const Es={unrestrict:de.Z.eyeHide,"restore-team":de.Z.info},Ls=i(85).$cP,Rs=i(85).D7I,Ns=i(85).BQ6,Os=i(85).Ls_,Us=i(85).bep,Vs=i(85).Xvb,Ws=i(85).wgE,Ks=i(85).HSG,zs=i(85).rOg,Gs=i(85).PXg,Hs=i(85).XNW,qs=i(85).L_E,js=i(85).nx5,Qs=(0,m.defineMessages)({fullAccess:{id:"permissionsLevelBanner.fullAccess.label",[js]:"You have full access to this page {hasAttribution, select, true {via {attribution}} other {}}"},editor:{id:"permissionsLevelBanner.editor.label",[js]:"You have edit access to this page {hasAttribution, select, true {via {attribution}} other {}}"},contentEditor:{id:"permissionsLevelBanner.contentEditor.label",[js]:"You have edit access to content on this page {hasAttribution, select, true {via {attribution}} other {}}"},commenter:{id:"permissionsLevelBanner.commenter.label",[js]:"You have comment access to this page {hasAttribution, select, true {via {attribution}} other {}}"},reader:{id:"permissionsLevelBanner.reader.label",[js]:"You have view access to this page {hasAttribution, select, true {via {attribution}} other {}}"}});function Js(e){let{store:t}=e;window.__c={n:"PermissionLevelBanner"};const i=(0,d.O7)(),o=(0,c.VK)((()=>(0,k.getCurrentUserStore)(i)),[i]),n=(0,c.VK)((()=>t.canEditContentOnly()),[t]),s=(0,u.yK)((e=>({[qs]:{backgroundColor:e.accentColors.gray[50],borderRadius:4,height:34,[Hs]:14,[Gs]:14,marginTop:5,marginBottom:5,paddingRight:14,display:"flex",alignItems:"center"},banner:{fontSize:12,display:zs},icon:{[Hs]:14,[Gs]:8},[Ks]:{display:zs,alignItems:"center",fill:e.regularIconColor,[Hs]:5}})),[]),{role:p,[Ks]:g}=(0,c.VK)((()=>{if(!o)return{role:"none",[Ks]:null};const e=(0,Z.getCalculatedPermissionItemForUser)({userId:o.id,store:t}),n=function(e){let{[Ws]:t,calculatedPermission:i,store:o}=e;const n=(0,C.getSpace)(o)||P.default.state.currentSpaceStore;if(!n)return null;if((0,b.isGroupPermission)(i)){const e=(0,Wa.TC)({spaceStore:n,groupId:i.group_id}),t=null==e?void 0:e.name;return t?l[Rs](l.Fragment,null,de.Z.group({width:18,[Gs]:5}),t):null}if((0,b.isExplicitBlockTeamMemberOrOwnerPermission)(i)){var a;const e=i.team_id||(null===(a=(0,C.getTeam)(o))||void 0===a?void 0:a.id);if(!e)return null;const t=I.zX.createChildStore(n,{table:M.e0,id:e,spaceId:n.id});return l[Rs](l.Fragment,null,r()(za.p,{disabled:!0,store:t,size:18,[Ns]:{[Gs]:5}}),r()(Bs,{navigableParentStore:t,showUnderline:!0}))}if((0,b.isSpacePermission)(i))return(0,b.isUnlistedSpacePermission)(i)?r()(m.FormattedMessage,{[js]:"the link",id:"permissionsLevelBanner.spacePermission.attribution"}):l[Rs](l.Fragment,null,r()(za.p,{disabled:!0,store:n,size:18,[Ns]:{[Gs]:5}}),(0,Wa.rn)(t,n));if((0,b.isPublicPermission)(i))return r()(Ka.Z,{underline:!0,inline:!0,onClick:()=>{J.ZP.setState({...J.ZP.state,display:J.wV.Publish,tab:J.XF.Publish})}},void 0,r()(m.FormattedMessage,{[js]:"the published site",id:"permissionsLevelBanner.publicPermission.attribution"}));return null}({[Ws]:i,calculatedPermission:e,store:t});return{role:e.role,[Ks]:n}}),[o,t,i]);if((0,l.useEffect)((()=>{p&&It.trackPageShareUserAccessRole(i,{[Vs]:J.ZP.state.sessionId,role:p})}),[]),!(0,b.isTieredPermissionRole)(p))return null;const h=function(e){switch(e){case"editor":return Qs.fullAccess;case"read_and_write":return Qs.editor;case Ls:return Qs.contentEditor;case"comment_only":return Qs.commenter;case"reader":return Qs.reader;case"none":case"membership_admin":return null;default:(0,ae.unreachable)(e)}}(p);return h?r()(rt.Z,{delayThreshold:0,renderTooltip:()=>r()(m.FormattedMessage,{[js]:Us,id:Os}),disableTooltip:!n,textWrap:!0,[Ns]:{maxWidth:180},render:e=>l[Rs]("div",a()({[Ns]:s[qs]},e),r()(Ma.Z,{userStore:o,size:20,[Ns]:s.icon}),r()(ie.Z,{[Ns]:s.banner},void 0,l[Rs](m.FormattedMessage,a()({},h,{values:{hasAttribution:Boolean(g),[Ks]:r()("span",{[Ns]:s[Ks]},void 0,g)}})))),placement:rt.Z.Placement.Left}):null}const $s=i(85).K07,Ys=i(85).XeC,Xs=i(85).XCs,er=i(85).YDv,tr=i(85).HSG,ir=i(85).nx5;function or(){return r()(nr,{},void 0,r()(m.FormattedMessage,{id:"blockPermissionsSettings.permissionsList.moreAttribution",[ir]:"More people with access"}))}function nr(e){window.__c={n:"AttributionWrapper"};const{children:t}=e,{WindowSizeStore:i}=(0,d.O7)(),{[er]:o,[Xs]:n}=(0,c.VK)((()=>({[er]:i[Ys](14),[Xs]:i[$s](14)})),[i]),a=(0,u.yK)((e=>({label:{color:e.mediumTextColor,fontWeight:ce.Z.fontWeight.medium,[er]:o,[Xs]:n,paddingTop:8,paddingBottom:6}})),[o,n]);return r()(ie.Z,{isSmall:!0,style:a.label},void 0,t)}const ar=function(e){window.__c={n:"PermissionsAttributionHeader"};const{store:t}=e,{parentStore:i,canAccessParent:o}=(0,c.VK)((()=>z({store:t})),[t]);return r()(nr,{},void 0,r()(m.FormattedMessage,o?{id:"blockPermissionsSettings.permissionsList.attribution",[ir]:"From {attribution}",values:{[tr]:r()(Bs,{navigableParentStore:i})}}:{id:"blockPermissionsSettings.permissionsList.genericHeader",[ir]:"People with access"}))};var sr=i(70183);const rr=i(85).wgE,lr=i(85).sqI;function dr(e){window.__c={n:"RestrictedBanner"};const{store:t}=e,i=(0,d.O7)(),o=(0,c.VK)((()=>function(e){const{store:t,[rr]:i}=e;return sr.or([sr.canAdmin,sr.and([sr.isSpaceAdmin,sr.not(sr.canAdmin)])])({[rr]:i,blocks:[t],publicEditMode:void 0})}({store:t,[rr]:i})),[t,i]);return r()(xs,{type:"unrestrict",showRestoreButton:o,store:t,[lr]:e[lr]})}function cr(e){window.__c={n:"ElevatedBanner"};const{store:t}=e;return(0,c.VK)((()=>K({store:t})),[t])?r()(xs,{type:"restore-team",showRestoreButton:!1,store:t,[lr]:e[lr]}):null}const ur=function(e){window.__c={n:"PermissionsWarningBanner"};const{store:t,showRestrictedPermissionBanner:i}=e,{canAccessParent:o}=(0,c.VK)((()=>z({store:t})),[t]);return o?i?r()(dr,{store:t,[lr]:e[lr]}):r()(cr,{store:t,[lr]:e[lr]}):null};var mr=i(20346);function pr(){const e=(0,d.O7)(),{currentSpaceStore:t}=(0,c.Kw)(P.default);return(0,c.VK)((()=>t?(0,Wa.rn)(e,t):""),[e,t])}var gr=i(23063);const hr=i(85).wgE,vr=i(85).KK3,fr=i(85).dMt,yr=i(85).RJH,br=i(85).OBT,Sr=i(85).sqI,wr=i(85).L_E,Mr=i(85).I7L,kr=i(85).auS,Cr=i(85).rpY,Zr=i(85).Joh,Tr=i(85).pkR,Pr=i(85).bey,Ir=i(85).D7I,Fr=i(85).Wp_,_r=i(85).BQ6,xr=i(85).ESK,Ar=i(85).wuN,Br=i(85).NF1,Dr=i(85).FOQ,Er=i(85).Hco,Lr=i(85).XNW,Rr=i(85).qJ8,Nr=i(85).z$E,Or=i(85).Tb$,Ur=i(85).owK,Vr=(i(85).wnl,i(85).s9u),Wr=(i(85).zM5,i(85).dBC),Kr=i(85).lUP,zr=i(85).g4H,Gr=i(85).nx5,Hr=(i(85).q41,i(85).Zij),qr=[{key:"private",[Hr]:e=>r()(m.FormattedMessage,"variant1"===e?{id:"linkSharingPill.visibilityTitle.private",[Gr]:"Private"}:{id:"linkSharingPill.visibilityTitle.inviteOnly",[Gr]:"Invite only"}),[zr]:r()(m.FormattedMessage,{id:"linkSharingPill.visibilityCaption.inviteOnly",[Gr]:"Only you and people invited can access"}),[Kr]:de.Z.lockedFilled},{key:Wr,[Hr]:(e,t)=>r()(m.FormattedMessage,"variant1"===e?{id:"linkSharingPill.visibilityTitle.unlisted",[Gr]:"Unlisted"}:{id:"linkSharingPill.visibilityTitle.anyoneWithLink",[Gr]:"Anyone with link at {spaceName}",values:{[Vr]:t}}),[zr]:r()(m.FormattedMessage,{id:"linkSharingPill.visibilityCaption.anyoneWithLink",[Gr]:"People invited and workspace members with link can access"}),[Kr]:de.Z.link},{key:"open",[Hr]:(e,t)=>r()(m.FormattedMessage,"variant1"===e?{id:"linkSharingPill.visibilityTitle.open",[Gr]:"Open"}:{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",[Gr]:"Everyone at {spaceName}",values:{[Vr]:t}}),[zr]:r()(m.FormattedMessage,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspace",[Gr]:"All workspace members can search and access"}),[Kr]:de.Z.openPage}];function jr(e){window.__c={n:"MobileLinkSharingPill"};const{store:t,[Ur]:i}=e,o=Jr(i[Or]),n=(0,c.VK)((()=>t.canAdmin()),[t]),s=(0,q.a)(Nr),d=pr(),p=(0,c.VK)((()=>{const e=P.default.state[Rr];return null!=e&&e.isDefined()?e:null}),[]),[g,h]=(0,l.useState)(!1),v=(0,u.yK)((e=>({chevron:{width:12,fill:e[Er],[Lr]:"auto"},[Dr]:{height:42,color:e[Ar],marginBottom:8,padding:"0 6px",[Lr]:-6,marginRight:-6,width:"100%"},[Kr]:{fill:e[kr],width:32,height:32,backgroundColor:e.lightDividerColor,padding:6,[Br]:4,marginRight:12},animation:{[Mr]:220},enterAnimation:{[Mr]:0},exitAnimation:{[Mr]:0},[wr]:{overflow:"hidden"}})),[]),f={[Mr]:{stiffness:60,damping:12,precision:.1}},y=qr.find((e=>e.key===o));return y&&p?r()("div",{[_r]:v[wr]},void 0,r()(Lt.Z,{[_r]:v[Dr],[Kr]:y[Kr],[Pr]:v[Kr],[Tr]:!n,disabledFeedback:!0,onClick:()=>h(!g)},void 0,r()("div",{},void 0,r()(ie.Z,{isSmall:!0},void 0,r()(m.FormattedMessage,{id:"linkSharingPill.visibilityMobileTitle",[Gr]:"Page visibility"})),r()(ie.Z,{},void 0,y[Hr](s,d))),n&&(g?de.Z.chevronDown(v.chevron):de.Z.chevronUpRounded(v.chevron))),r()(gr.Z,{isVisible:g,animationStyle:v.animation,enterAnimationStyle:v.enterAnimation,exitAnimationStyle:v.exitAnimation,springConfig:f,[Cr]:()=>l[Ir](Qr,a()({},e,{parentCloseCallback:()=>h(!1)}))})):null}function Qr(e){window.__c={n:"PrivacyMenu"};const{store:t,[Ur]:i,[Sr]:o,location:n,isRestricted:s,parentCloseCallback:m}=e,p=(0,d.O7)(),h=p.device.isMobile,v=Jr(i[Or]),f=(0,q.a)(Nr),M=i.from,k=M.table===S.iU?M.blockId:M.teamId,Z=!(M.table===t.table&&k===t.id),T=(0,c.VK)((()=>{const{[Rr]:e}=P.default.state;return!!e&&t[br](e.id)}),[t]),I=pr(),F=(0,c.VK)((()=>{const e=function(e){const{[W]:t}=e;if(t[V]()===w.bx)return;const i=(0,C.getParentStore)(t);if(!i)return;const o=(0,y.getInheritedPermissionItems)((0,C.getPermissionsPath)(i));for(const n of o)if((0,b.isSpacePermission)(n))return n}({store:t});return e?Jr(e):"private"}),[t]),_=(0,l.useRef)(null),x=(0,u.yK)((e=>{const t={width:14,fill:h?e[kr]:e[Ar]};return{[Kr]:{fill:h?e[kr]:e[Ar],width:16},[yr]:{alignSelf:"center",[Lr]:h?13:9},hiddencheckmark:{...t,visibility:"hidden"},selectedCheckmark:{...t,visibility:"visible"},checkmarkContainer:{[Lr]:12},selectedTitle:{fontWeight:ce.Z.fontWeight.semibold},mobileScroller:{border:`1px solid ${e[fr]}`,[Br]:8,marginBottom:24},mobileButton:{paddingTop:8,paddingBottom:8},mobileButtonDivider:{borderBottom:`1px solid ${e[fr]}`},[zr]:{whiteSpace:"normal"}}}),[h]);return r()(ee.Z,{menuType:g.og.Popup,disableScroller:!0,scrollerStyle:h?x.mobileScroller:{}},void 0,r()(jt.Z,{type:jt.i.Vertical,initialFocus:void 0,sections:[{key:"visibilityOptions",[Cr]:e=>l[Ir](Qt.Z,a()({},e,{disableDesktopPadding:h})),items:qr.map(((e,d)=>{const c=e.key,u=v===c,g=u?x.selectedCheckmark:x.hiddencheckmark,y=d!==qr.length-1,b={...h?x.mobileButton:{},...h&&y?x.mobileButtonDivider:{}};return{key:c,[Cr]:t=>r()("div",{},void 0,"unlisted"===c&&l[Ir]("div",{ref:_},r()(he.C8,{originRef:_})),l[Ir](Ht.Z,a()({[Hr]:e[Hr](f,I),[zr]:r()(ie.Z,{isSmall:!0,isMultiline:!0,[_r]:x[zr]},void 0,e[zr]),[Kr]:e[Kr](x[Kr]),desktopIconStyle:x[yr],titleStyle:u&&!h?x.selectedTitle:void 0,right:de.Z.thinCheck(g),rightStyle:x.checkmarkContainer,[_r]:b},t))),action:()=>{if(u)return;const e=i[Or],a={type:vr,role:$r(e,v,c)};"unlisted"===c&&(a.unlisted_timestamp=Date.now());const r=function(e,t){if(e===t)return!1;switch(t){case"open":return!1;case Wr:return"open"===e;case"private":return!0;default:(0,ae.unreachable)(t)}}(F,c)&&!s&&!T;(0,Ge.i)({oldPermissionItem:e,newPermissionItem:a,wasInherited:Z,[hr]:p,store:t,[Sr]:o,location:n,restrictingVisibility:r}),m()}}}))}]}))}function Jr(e){return"none"===e.role?"private":e.unlisted_timestamp?Wr:"open"}function $r(e,t,i){return"private"===i?"none":"private"===t?"reader":e.role}const Yr=function(e){window.__c={n:"LinkSharingPill"};const{store:t,[Ur]:i}=e,o=Jr(i[Or]),n=(0,c.VK)((()=>t.canAdmin()),[t]),s=(0,q.a)(Nr),d=pr(),p=(0,c.VK)((()=>{const e=P.default.state[Rr];return null!=e&&e.isDefined()?e:null}),[]),g=(0,c.qz)(void 0,zt.Z),h=(0,l.useRef)(null),v=(0,u.yK)((e=>({chevron:{width:12,[Lr]:4,fill:e[Er]},popup:{overflow:"visible",width:"100%",minWidth:430},[Dr]:{justifyContent:"center",[Br]:32,height:32,color:e[Ar],paddingLeft:12,maxWidth:380},[Hr]:{...ce.Z.textOverflowStyle},[Kr]:{fill:e[Ar],width:16}})),[]);return p?r()(qt.ZP,{buttonPopupStore:g,popupType:qt.Z4.Popup,popupWrapStyle:v.popup,renderOrigin:e=>{const t=qr.find((e=>e.key===o));return t?r()(rt.Z,{placement:rt.Z[xr].Bottom,alignment:rt.Z.Alignment.Start,disableTooltip:n,[Zr]:()=>r()(m.FormattedMessage,{[Gr]:"You must have full access to change the privacy setting",id:"linkSharingPill.disabledTooltip.message"}),[Cr]:i=>l[Ir](st.Z,a()({},e,{ref:h,[_r]:v[Dr],[Kr]:t[Kr],[Pr]:v[Kr],[Tr]:!n,disabledFeedback:!0},i),r()("div",{[_r]:v[Hr]},void 0,t[Hr](s,d)),n&&de.Z.chevronDown(v.chevron),r()(he.iq,{originRef:h,handlePrimaryButtonClick:()=>{g[Fr]({...g.state,open:!0})}}))}):null},placementToOrigin:Gt.Iw.Bottom,alignmentToOrigin:Gt.lU.Start,sameWidthAsOrigin:!0,[Cr]:t=>l[Ir](Qr,a()({},e,{parentCloseCallback:()=>t.close()}))}):null};var Xr=i(32739),el=i(95477);const tl=i(85).uGP,il=i(85).LIR,ol=i(85).Tb$,nl=i(85)._Fe,al=i(85).D7I,sl=i(85).nx5,rl=i(85).wgE,ll=i(85).t4B,dl=i(85).kdG,cl=i(85).cmt,ul=i(85).LtW,ml=i(85).XtO;function pl(e){window.__c={n:"MobilePageLinkButtonInner"};const{[ml]:t,[ul]:i,events:o}=e,n=(0,d.O7)(),{device:s,[dl]:c}=n,p=(0,u.yK)((e=>({button:{flex:1,height:36,minHeight:36}})),[]);return l[al](He.Z,a()({onClick:()=>{s[ll]?function(e){const{[ml]:t,[dl]:i}=e,o=(0,Xr.u5)({schemeUrl:(0,nt.ZP)({[ml]:t,[il]:it.tY.CopyLink}),baseUrl:el.default.domainBaseUrl});i&&i.share(o)}({[ml]:t,[dl]:c}):vl({[ml]:t,[ul]:i,[rl]:n}),It.trackCopyLinkFromPermissionsSetting(n)},style:p.button},o),s[ll]?r()(m.FormattedMessage,{id:"pageShareMenu.shareLinkButton.label",[sl]:"Share link"}):r()(m.FormattedMessage,{id:"pageShareMenu.copyLinkButton.label",[sl]:"Copy link"}))}function gl(e){window.__c={n:"PageLinkButtonInner"};const{[ml]:t,[ul]:i,events:o}=e,n=(0,d.O7)(),s=(0,u.yK)((e=>({button:{height:24,paddingLeft:8,paddingRight:8,color:e[nl],marginLeft:"auto"},icon:{width:14,height:14,fill:e.regularIconColor,marginLeft:0,marginRight:6},label:{color:e[nl]}})),[]);return l[al](Lt.Z,a()({isSmall:!0,onClick:()=>{vl({[ml]:t,[ul]:i,[rl]:n}),It.trackCopyLinkFromPermissionsSetting(n)},style:s.button},o),de.Z.link(s.icon),r()(ie.Z,{isSmall:!0,style:s.label},void 0,r()(m.FormattedMessage,{id:"blockPermissionsSettings.copyLinkButton.label",[sl]:"Copy link"})))}function hl(e){const{[cl]:t}=e,i=t.mostPermissivePublicItem[ol];if((0,b.canRead)(i.role))return r()(m.FormattedMessage,{[sl]:"This page has public link access, so anyone with the link will be able to view the page.",id:"blockPermissionsSettings.publicLinkInfo.tooltip"});const o=t.mostPermissiveSpaceItem[ol];return(0,b.canRead)(o.role)?r()(m.FormattedMessage,{[sl]:"This page has workspace access, so anyone in the workspace will be able to view the link.",id:"blockPermissionsSettings.workspacePermissions.tooltip"}):t.permissionItemsCount>1?r()(m.FormattedMessage,{[sl]:"Only you and other invited members and guests will be able to view the link.",id:"blockPermissionsSettings.userPermissions.tooltip"}):r()(m.FormattedMessage,{[sl]:"Only you can access this page, so the link will only work for you.",id:"blockPermissionsSettings.privatePermissions.tooltip"})}async function vl(e){const{[ml]:t,[ul]:i,[rl]:o}=e,n=(0,nt.ZP)({[ml]:t,[il]:it.tY.CopyLink});await Ft.copyString({[rl]:o,stringValue:n,copiedMessage:Ft.clipboardMessages[tl]}),i&&i.setState({open:!1})}const fl=function(e){window.__c={n:"PageLinkButton"};const{[ml]:t,[ul]:i,[cl]:o}=e,{device:n}=(0,d.O7)(),a=(0,u.yK)((()=>({tooltip:{width:280}})),[]);return r()(rt.Z,{delayThreshold:0,placement:rt.Z.Placement.Bottom,renderTooltip:()=>r()(hl,{[cl]:o}),textWrap:!0,style:a.tooltip,render:e=>n.isMobile?r()(pl,{[ml]:t,[ul]:i,events:e}):r()(gl,{[ml]:t,[ul]:i,events:e})})},yl=i(85).LtW,bl=i(85).owK,Sl=i(85).l81,wl=i(85).KAl,Ml=i(85).sqI,kl=i(85).XtO,Cl=i(85).cmt,Zl=i(85).L_E;const Tl=function(e){window.__c={n:"ShareMenuFooter"};const{isMobile:t}=(0,d.Fy)(),i="control"!==(0,q.a)("link_sharing_pill"),o=(0,u.yK)((e=>({[Zl]:{display:"flex",alignItems:t&&i?"normal":"center",boxShadow:`0 -1px 0 ${e.regularDividerColor}`,flexDirection:t&&i?"column":"row",justifyContent:"space-between",padding:t||i?"8px 14px":"4px 4px"}})),[t,i]),{mostPermissiveSpaceItem:n,showRestrictedPermissionBanner:a}=e[Cl];return l.createElement(l.Fragment,null,r()("div",{style:o[Zl]},void 0,i&&t&&r()(jr,{[kl]:e[kl],[Ml]:e[wl][Ml],[Sl]:e[wl][Sl],[bl]:n,isRestricted:a}),i&&!t&&r()(Yr,{[kl]:e[kl],[Ml]:e[wl][Ml],[Sl]:e[wl][Sl],[bl]:n,isRestricted:a}),!t&&!i&&r()(mr.Z,{}),r()(fl,{[kl]:e[kl],[yl]:e[yl],[Cl]:e[Cl]})))};var Pl=i(90965);const Il=i(85).FkY,Fl=i(85).nx5,_l=i(85).RJH,xl=i(85).ttt,Al=i(85).KAl,Bl=i(85).Wqi,Dl=i(85).D7I,El=i(85).Tb$,Ll=i(85).L_E,Rl=i(85).owK;function Nl(e){window.__c={n:"UnlistedPermissionItem"};const{store:t,[Rl]:i,fromPermissionWrapper:o}=e,n=(0,u.yK)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},[_l]:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]);return l[Dl](Ut.Z,a()({icon:de.Z.link(n.icon),iconStyle:n[_l],title:r()(m.FormattedMessage,{[Fl]:"Members with the link",id:"blockPermissionsSettings.permissionItem.linkAccess"}),[xl]:t,[El]:i[El],from:i.from,upgradeButtonName:"space_permission_item",fromPermissionWrapper:o},e[Al]))}function Ol(e){window.__c={n:"Title"};const{[Bl]:t}=e,i=(0,d.O7)(),o=(0,c.VK)((()=>(0,Wa.rn)(i,t)),[i,t]);return r()(m.FormattedMessage,{[Fl]:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{[Il]:o}})}function Ul(e){window.__c={n:"Subtitle"};const{[Bl]:t}=e,i=(0,c.VK)((()=>(0,Pl.t5)((0,Wa.jv)(t))),[t]);return r()(m.FormattedMessage,{[Fl]:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} person} other {{numberOfWorkspaceMembers} people}}",id:"blockPermissionsSettings.spacePermission.none",values:{numberOfWorkspaceMembers:i}})}function Vl(){return r()(m.FormattedMessage,{[Fl]:"Applies to all members in your workspace.",id:"blockPermissionsSettings.spacePermission.tooltip"})}const Wl=function(e){window.__c={n:"SpacePermissionItem"};const{store:t,[Rl]:i,fromPermissionWrapper:o}=e,n=(0,c.VK)((()=>{const e=P.default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),s=(0,u.yK)((()=>({[Ll]:{width:"100%"}})),[]);return n?i[El].unlisted_timestamp?l[Dl](Nl,e):r()("div",{style:s[Ll],className:p.blockPermissionSettingsWorkspaceAccess},void 0,l[Dl](Ut.Z,a()({[xl]:t,[El]:i[El],from:i.from,icon:r()(za.p,{disabled:!0,store:n,size:Ut.Z.iconSize}),title:r()(Ol,{[Bl]:n}),nonInheritedTooltip:r()(Vl,{}),subtitle:r()(Ul,{[Bl]:n}),upgradeButtonName:"space_permission_item",fromPermissionWrapper:o},e[Al]))):null};var Kl=i(79362);i(85).e4w;const zl=i(85).e4o,Gl=i(85).dOG,Hl=(i(85).YZ8,i(85).nx5),ql=i(85).ttt,jl=i(85).D7I,Ql=i(85).KAl,Jl=i(85).L_E,$l=i(85).Muk,Yl=i(85).OzF,Xl=i(85).Tb$;function ed(e){const{[Yl]:t,isCompact:i}=e;return r()(m.FormattedMessage,i?{[Hl]:"Teamspace guests",id:"blockPermissionsSettings.permissionItem.teamGuestAccess.compact"}:t?{[Hl]:"Teamspace guests of {teamName}",id:"blockPermissionsSettings.permissionItem.teamGuestAccess",values:{[Yl]:t}}:{id:"blockPermissionsSettings.permissionItem.teamspaceGuestsTeamName.hidden",[Hl]:"Teamspace guests of a private teamspace"})}function td(e){const{[$l]:t,isCompact:i}=e;return i?null:r()(m.FormattedMessage,{[Hl]:Gl,id:zl,values:{[$l]:t}})}function id(e){window.__c={n:"TeamGuestPermissionTooltip"};const{[Yl]:t}=e,i=(0,u.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?r()("div",{style:i.tooltip},void 0,r()(m.FormattedMessage,{[Hl]:"Applies to all teamspace guests of {teamName}.",values:{[Yl]:t},id:"blockPermissionsSettings.teamGuestPermission.tooltip"})):null}const od=function(e){var t;window.__c={n:"TeamGuestPermissionItem"};const{store:i,blockTeamGuestPermission:o,isExternalTeam:n,fromPermissionWrapper:s}=e,{[Xl]:d}=o,m=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),g=b.isExplicitBlockTeamGuestPermission(d)?d.team_id:null===(t=C.getTeam(i))||void 0===t?void 0:t.id,{teamStore:h,teamIsDefined:v,[Yl]:f,teamIcon:y,[$l]:S}=(0,c.VK)((()=>{if(!m||!g)return{};const e=I.zX.createChildStore(m,{table:M.e0,id:g,spaceId:m.id});return null!=e&&e.isDefined()?{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),[Yl]:e.getName(),teamIcon:e.getIcon(),[$l]:(0,T.xf)({teamStore:e,spaceStore:m}).length}:{}}),[m,g]),w=!n,k=(0,u.yK)((()=>({[Jl]:{width:"100%"}})),[]);if(!h)return null;const Z=y&&Kl.isNotionStaticIcon(y.icon)?Kl.getIconColor(y.icon):"gray",F=y?{...y,icon:`/icons/user-circle_${Z}.svg`}:void 0;return r()("div",{style:k[Jl],className:p.blockPermissionSettingsTeamAccess},void 0,l[jl](Ut.Z,a()({isCompact:w,[ql]:i,[Xl]:d,icon:v?r()(za.p,{disabled:!0,store:h,size:Ut.Z.iconSize,icon:F}):de.Z.privateTeam(),title:r()(ed,{[Yl]:f,isCompact:w}),nonInheritedTooltip:r()(id,{[Yl]:f}),from:o.from,subtitle:v&&r()(td,{[$l]:S,isCompact:w}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:s},e[Ql])))},nd=(i(85).e4w,i(85).e4o),ad=i(85).dOG,sd=(i(85).YZ8,i(85).nx5),rd=i(85).ttt,ld=i(85).D7I,dd=i(85).KAl,cd=i(85).L_E,ud=i(85).Muk,md=i(85).OzF,pd=i(85).o$g,gd=i(85).Tb$;function hd(e){const{[md]:t,isCompact:i}=e;return r()(m.FormattedMessage,i&&t?{[sd]:"Teamspace members",id:"blockPermissionsSettings.permissionItem.teamAccessV2"}:t?{[sd]:"Members of {teamName}",id:"blockPermissionsSettings.permissionItem.teamAccess",values:{[md]:t}}:{id:"blockPermissionsSettings.permissionItem.membersTeamName.hidden",[sd]:"Members of a private teamspace"})}function vd(e){const{[ud]:t,isCompact:i}=e;return i?null:r()(m.FormattedMessage,{[sd]:ad,id:nd,values:{[ud]:t}})}function fd(e){window.__c={n:"TeamMemberPermissionTooltip"};const{[md]:t}=e,i=(0,u.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?r()("div",{style:i.tooltip},void 0,r()(m.FormattedMessage,{[sd]:"Applies to all owners and members of {teamName}.",values:{[md]:t},id:"blockPermissionsSettings.teamPermission.tooltip"})):null}const yd=function(e){var t;window.__c={n:"TeamMemberPermissionItem"};const{store:i,blockTeamPermission:o,isExternalTeam:n,fromPermissionWrapper:s}=e,{[gd]:d}=o,m=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),g=b[pd](d)?d.team_id:null===(t=C.getTeam(i))||void 0===t?void 0:t.id,{teamStore:h,teamIsDefined:v,[md]:f,[ud]:y}=(0,c.VK)((()=>{if(!m||!g)return{};const e=I.zX.createChildStore(m,{table:M.e0,id:g,spaceId:m.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),[md]:null==e?void 0:e.getName(),[ud]:(0,T.xf)({teamStore:e,spaceStore:m}).length}}),[m,g]),S=!n,w=(0,u.yK)((()=>({[cd]:{width:"100%"}})),[]);return h?r()("div",{style:w[cd],className:p.blockPermissionSettingsTeamAccess},void 0,l[ld](Ut.Z,a()({isCompact:S,[rd]:i,[gd]:o[gd],from:o.from,icon:v?r()(za.p,{disabled:!0,store:h,size:Ut.Z.iconSize}):de.Z.privateTeam(),title:r()(hd,{[md]:f,isCompact:S}),nonInheritedTooltip:r()(fd,{[md]:f}),subtitle:v&&r()(vd,{[ud]:y,isCompact:S}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:s},e[dd]))):null};var bd=i(62512);i(85).YZ8;const Sd=i(85).nx5,wd=(i(85).ltg,i(85).ttt),Md=i(85).D7I,kd=i(85).KAl,Cd=i(85).L_E,Zd=i(85).TLr,Td=i(85).OzF,Pd=i(85).OHs,Id=i(85).EUZ,Fd=i(85).Tb$;function _d(e){const{store:t,teamOwners:i,[Pd]:o,[Td]:n}=e;if(n){const e=i.map((e=>I.U6[Zd](t,{table:Yn.KJ,id:e})));return r()(bd.n,{[Pd]:o,ownerStores:e})}return de.Z.privateTeam()}function xd(e){const{[Td]:t,isCompact:i}=e;return r()(m.FormattedMessage,i&&t?{[Sd]:"Teamspace owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV2",values:{[Td]:t}}:t?{[Sd]:"Owners of {teamName}",id:"blockPermissionsSettings.permissionItem.teamOwnerAccess",values:{[Td]:t}}:{id:"blockPermissionsSettings.permissionItem.teamName.hidden",[Sd]:"Owners of a private teamspace"})}function Ad(e){const{teamOwnersCount:t,isCompact:i}=e;return i||0===t?null:r()(m.FormattedMessage,{[Sd]:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:t}})}function Bd(e){window.__c={n:"TeamOwnerPermissionTooltip"};const{[Td]:t}=e,i=(0,u.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?r()("div",{style:i.tooltip},void 0,r()(m.FormattedMessage,{[Sd]:"Applies to all owners of {teamName}",values:{[Td]:t},id:"blockPermissionsSettings.teamOwnerPermission.tooltip"})):null}const Dd=function(e){var t;window.__c={n:"TeamOwnerPermissionItem"};const{store:i,blockTeamOwnerPermission:o,isExternalTeam:n,fromPermissionWrapper:s}=e,{[Fd]:d}=o,m=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),g=b[Id](d)?d.team_id:null===(t=C.getTeam(i))||void 0===t?void 0:t.id,{[Pd]:h,[Td]:v,teamOwners:f}=(0,c.VK)((()=>{if(!m||!g)return{undefined:void 0};const e=I.zX[Zd](m,{table:M.e0,id:g,spaceId:m.id});return{[Pd]:e,[Td]:e.getName(),teamOwners:(0,ta.XO)({membership:e.getMembers()})}}),[m,g]),y=!n,S=(0,u.yK)((()=>({[Cd]:{width:"100%"}})),[]);return h?r()("div",{style:S[Cd],className:p.blockPermissionSettingsOwnerAccess},void 0,l[Md](Ut.Z,a()({isCompact:y,[wd]:i,[Fd]:o[Fd],from:o.from,icon:r()(_d,{store:i,[Td]:v,[Pd]:h,teamOwners:f}),title:r()(xd,{[Td]:v,isCompact:y}),nonInheritedTooltip:r()(Bd,{[Td]:v}),subtitle:r()(Ad,{teamOwnersCount:f.length,isCompact:y}),upgradeButtonName:"team_owner_permission_item",fromPermissionWrapper:s},e[kd]))):null};var Ed=i(92350),Ld=i(33241);i(85).e4w;const Rd=i(85).e4o,Nd=i(85).dOG,Od=(i(85).YZ8,i(85).nx5),Ud=i(85).ttt,Vd=i(85).D7I,Wd=i(85).KAl,Kd=i(85).ELX,zd=i(85).Muk,Gd=i(85).pkR,Hd=i(85).Xvb,qd=i(85).OzF,jd=i(85).nou,Qd=i(85).o$g,Jd=i(85).Tb$;function $d(e){const{[qd]:t}=e;return r()(m.FormattedMessage,t?{[Od]:"Everyone at {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccess",values:{[qd]:t??""}}:{[Od]:"Everyone at a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hidden"})}function Yd(e){const{[zd]:t}=e;return r()(m.FormattedMessage,{[Od]:Nd,id:Rd,values:{[zd]:t}})}const Xd=function(e){var t;window.__c={n:"TeamPermissionItem"};const{store:i,blockTeamMemberPermission:o,blockTeamOwnerPermission:n,blockTeamGuestPermission:s}=e,m=(0,d.O7)(),p=(0,d.Fy)(),[g,h]=(0,l.useState)(!1),{[Jd]:v}=o,f=(0,c.VK)((()=>P.default.state.currentSpaceStore),[]),y=b[Qd](v)?v.team_id:null===(t=C.getTeam(i))||void 0===t?void 0:t.id,w=n[Jd].role,k=v.role,Z={type:jd,role:w===k?k:"none"===k||"none"===w?"limited":"access"},{teamStore:T,teamIsDefined:F,[qd]:_}=(0,c.VK)((()=>{if(!f||!y)return{undefined:void 0};const e=I.zX.createChildStore(f,{table:M.e0,id:y,spaceId:f.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),[qd]:null==e?void 0:e.getName()}}),[f,y]),x=(0,Ed.KR)(T),A=(0,c.VK)((()=>{if(!f)return!1;return!f.getDisableTeamGuests()&&((null==T||!T.isDefault())&&(0,Po.isTeamspaceGuestsEnabled)())}),[f,T]),B=(0,l.useCallback)((()=>{const e=!1===g;if(h(!g),e){if(!T)return;It.trackExpandPermission(m,{[Hd]:J.ZP.state.sessionId,type:"team",team_id:T.id})}}),[m,g,h,T]),D=(0,u.yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor},teamPermissionsContainer:{paddingLeft:16,display:g?"block":"none"},roleButton:{marginRight:-8,color:e.mediumTextColor,fontSize:p.isMobile?14:12}})),[g,p.isMobile]),E=de.Z.chevronUpRounded(D.icon);return T?l[Vd](l.Fragment,null,l[Vd](Ut.Z,a()({[Ud]:i,[Jd]:Z,from:o.from,icon:F?r()(za.p,{[Gd]:!0,store:T,size:Ut.Z.iconSize}):de.Z.privateTeam(),title:r()($d,{[qd]:_}),subtitle:F&&r()(Yd,{[zd]:x}),upgradeButtonName:"team_permission_item",onClick:B,permissionRoleSelect:g?E:r()(Ld.d,{role:Z.role,icon:de.Z.expandThin,[Gd]:!0,[Kd]:D.roleButton,table:S.iU,isRemovable:!1,isCurrentUser:!1})},e[Wd])),r()("div",{style:D.teamPermissionsContainer},void 0,n&&r()(Dd,{store:i,[Wd]:e[Wd],blockTeamOwnerPermission:n,fromPermissionWrapper:"expandable_permission"}),o&&r()(yd,{store:i,[Wd]:e[Wd],blockTeamPermission:o,fromPermissionWrapper:"expandable_permission"}),A&&s&&r()(od,{store:i,[Wd]:e[Wd],blockTeamGuestPermission:s,fromPermissionWrapper:"expandable_permission"}))):null},ec=i(85).KKT,tc=i(85).EUZ,ic=i(85).fO_,oc=i(85).Tb$,nc=i(85).foJ,ac=i(85).owK,sc=i(85).tBn,rc=i(85).D7I,lc=i(85).LtW,dc=i(85).dLQ,cc=i(85).wgE,uc=i(85).fmU,mc=i(85).qJ8,pc=i(85).sqI,gc=i(85).cmt,hc=i(85).KAl,vc=i(85).XtO;function fc(e){const{[vc]:t,[hc]:i}=e,{showTeamPermission:o,showSpacePermission:n,mostPermissiveTeamOwnerItem:a,mostPermissiveTeamMemberItem:s,mostPermissiveTeamGuestItem:d,mostPermissiveSpaceItem:c,pagePermissionUIModel:u}=e[gc],m=Number(o)+Number(n);return l[rc](l[sc],null,o&&a&&s&&r()(Xd,{[vc]:t,blockTeamOwnerPermission:a,blockTeamMemberPermission:s,blockTeamGuestPermission:d,[hc]:i}),n&&r()(Wl,{[vc]:t,[ac]:c,[hc]:i,fromPermissionWrapper:"permission_list"}),r()(yc,{[vc]:t,pagePermissions:u,numberPermissionsAlreadyRendered:m,[hc]:i}))}function yc(e){window.__c={n:"PagePermissionsList"};const t=(0,m.useIntl)(),i=(0,c.VK)((()=>{const e=P.default.state[mc];return null!=e&&e.isDefined()?e.id:""}),[]),{[vc]:o,pagePermissions:n,numberPermissionsAlreadyRendered:a,[hc]:s,showHeader:d}=e,{showUserPermissions:u,[nc]:p,mostPermissiveTeamPermissions:g,mostPermissiveUserPermissions:h,spacePermissionGroups:v}=n,y=(0,c.VK)((()=>ia()),[]),S=(0,c.VK)((()=>{const e=u?function(e){const{mostPermissiveUserPermissions:t,spaceVisibleUserMap:i}=e,o={};return t.forEach((t=>{o[t[oc].user_id]=r()(Da,{[vc]:e[vc],userPermission:t,showInherited:!1,[hc]:e[hc],spaceVisibleUserMap:i,fromPermissionWrapper:ic})})),o}({[vc]:o,mostPermissiveUserPermissions:h,[hc]:s,spaceVisibleUserMap:y}):[];return f().compact(Object.keys(e).map((i=>{const n=I.U6.createChildStore(o,{table:Yn.KJ,id:i}),a=n.getModel();if(!n.isReady()||a)return{title:(0,Xn.Nz)(t,a),[oc]:e[i]}})))}),[u,h,s,o,t,y]),w=i?function(e){const{spaceId:t,spacePermissionGroups:i,[nc]:o}=e,n={};return o.forEach((o=>{const a=o[oc].group_id;i.find((e=>e.id===a))&&(n[a]=r()(Sa,{[vc]:e[vc],groupPermission:o,spaceId:t,showInherited:!1,[hc]:e[hc],fromPermissionWrapper:ic}))})),n}({[vc]:o,spaceId:i,spacePermissionGroups:v,[nc]:p,[hc]:s}):[],M=function(e){const{[vc]:t,mostPermissiveTeamPermissions:i,[hc]:o}=e;return i.map((e=>b[tc](e[oc])?r()(Dd,{[vc]:t,blockTeamOwnerPermission:e,isExternalTeam:!0,[hc]:o,fromPermissionWrapper:ic},`${e[oc][ec]}.owner`):b.isExplicitBlockTeamGuestPermission(e[oc])?r()(od,{[vc]:t,blockTeamGuestPermission:e,isExternalTeam:!0,[hc]:o,fromPermissionWrapper:ic},`${e[oc][ec]}.teamGuest`):r()(yd,{[vc]:t,blockTeamPermission:e,isExternalTeam:!0,[hc]:o,fromPermissionWrapper:ic},`${e[oc][ec]}.member`)))}({[vc]:o,mostPermissiveTeamPermissions:g,[hc]:s}),k=[...S,...Object.keys(w).map((e=>{const i=v.find((t=>t.id===e));return{title:i?(0,aa.kF)({intl:t,group:i}):"",[oc]:w[e]}}))];k.sort(((e,t)=>e.title.localeCompare(t.title)));const C=M.concat(k.map((e=>e[oc]))),Z=C.length;if(0===Z)return null;if(Z>5-a){const e=Math.max(2-a,0);return l[rc](l[sc],null,d&&r()(or,{}),C.slice(0,e),r()(La,{permissions:C.slice(e,-1)}),C[Z-1])}return l[rc](l[sc],null,d&&r()(or,{}),C)}function bc(e,t){return e.from.table===S.iU&&e.from.blockId===t.id}const Sc=function(e){window.__c={n:"PermissionsList"};const t=(0,d.O7)(),{device:i}=t,{[vc]:o,[hc]:n,[gc]:a}=e,{[pc]:s}=n,{permissionItemsCount:m,pagePermissionUIModel:p,showRestrictedPermissionBanner:g}=a,h=(0,c.VK)((()=>{const e=P.default.state[mc];if(!e)return!0;if(o[uc]({spaceStore:e,[cc]:t}))return!0;const i=(0,C.getNavigablePath)(o);for(const o of i)if((0,na.isBlockStore)(o)&&o[uc]({spaceStore:e,[cc]:t}))return!0;return!1}),[o,t]);let v=null;const y=(0,c.VK)((()=>function(e){const{[W]:t,showRestrictedPermissionBanner:i}=e,{canAccessParent:o}=z({[W]:t});return o&&(i||K({[W]:t}))}({[vc]:o,showRestrictedPermissionBanner:g})),[o,g]),{canAccessParent:b}=(0,c.VK)((()=>z({[vc]:o})),[o]),S={...a};if(!y&&b){const[e,t]=function(e,t){const{[nc]:i,mostPermissiveTeamPermissions:o,mostPermissiveUserPermissions:n}=t,[a,s]=f().partition(i,(t=>bc(t,e))),[r,l]=f().partition(o,(t=>bc(t,e))),[d,c]=f().partition(n,(t=>bc(t,e))),u={...t,[nc]:s,mostPermissiveTeamPermissions:l,mostPermissiveUserPermissions:c},m={...t,[nc]:a,mostPermissiveTeamPermissions:r,mostPermissiveUserPermissions:d};return[u,m]}(o,p);S.pagePermissionUIModel=e,v=r()(yc,{[vc]:o,pagePermissions:t,numberPermissionsAlreadyRendered:0,[hc]:n,showHeader:!0})}const M=(0,c.VK)((()=>!function(e){const{[W]:t}=e,i=(0,C.getNavigablePath)(t),o=i.find((e=>e instanceof I.G&&e.isRestricted())),n=i[i[U]-1];return o||n[V]()===w.bx&&n.canRead()}({[vc]:o})),[o]),k=i[dc]?Ao.Z.None:Ao.Z.Y,Z=(0,u.yK)((e=>({scroller:{paddingBottom:10,minHeight:i[dc]||0===m?void 0:1===m?60:90}})),[i,m]);return(0,l.useEffect)((()=>{ea.oE({[cc]:t,[gc]:a})}),[]),l[rc](l[sc],null,r()(Ro.Z,{style:Z.scroller,type:k},void 0,!h&&r()(Js,{[vc]:o}),r()(ur,{[vc]:o,showRestrictedPermissionBanner:g,[pc]:s}),!y&&m>0&&r()(ar,{[vc]:o}),r()(fc,{[vc]:o,[gc]:S,[hc]:n}),v,M&&r()(Va,{[vc]:o})),!i[dc]&&r()(Tl,{[vc]:o,[lc]:e[lc],[gc]:S,[hc]:n}))};var wc=i(59054),Mc=i(98742),kc=i(21752),Cc=i(43765),Zc=i(69507),Tc=i(70268);const Pc=i(85).$cP,Ic=i(85).nx5,Fc=i(85).PXg;function _c(e){window.__c={n:"PublicPermissionLevelBanner"};const{publicPermission:t}=e,i=(0,u.yK)((e=>({banner:{backgroundColor:e.accentColors.gray[50],borderRadius:4,height:34,marginLeft:14,[Fc]:14,marginTop:5,marginBottom:5,paddingRight:14,display:"flex",alignItems:"center"},label:{fontSize:12,display:"inline-flex",[Fc]:10},icon:{height:20,width:20,marginLeft:14,[Fc]:8,color:e.mediumIconColor},manageButton:{color:e.regularTextColor,fontWeight:ce.Z.fontWeight.medium}})),[]),o=t.permissionItem.role;return b.canRead(o)?r()("div",{style:i.banner},void 0,r()(ie.Z,{style:i.label},void 0,de.Z.globe3(i.icon),r()(xc,{role:o})),r()(as.Z,{style:i.manageButton,onClick:()=>J.ZP.setState({...J.ZP.state,display:J.wV.Publish,tab:J.XF.Publish})},void 0,r()(m.FormattedMessage,{id:"shareMenu.managePublishSettingsButton.label",[Ic]:"Manage"}))):null}function xc(e){const{role:t}=e;switch(t){case"read_and_write":return r()(m.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canEdit",[Ic]:"This page allows edits from anyone on the web"});case"comment_only":return r()(m.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canComment",[Ic]:"This page allows comments from anyone on the web"});case"reader":return r()(m.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canRead",[Ic]:"This page can be viewed by anyone on the web"});case"editor":case"membership_admin":case Pc:case"none":return null;default:(0,ae.unreachable)(t)}}const Ac=i(85).AqE,Bc=(i(85).lGY,i(85).x$V,i(85).Vtp),Dc=i(85).yzD,Ec=i(85).NDH,Lc=i(85).FTQ,Rc=i(85).SFZ,Nc=i(85).TLr,Oc=i(85).Joh,Uc=i(85).ELX,Vc=i(85).i$f,Wc=i(85).p_Z,Kc=(i(85).ls5,i(85).xvx),zc=i(85).Pm5,Gc=i(85).pkR,Hc=i(85).PG2,qc=i(85).ESK,jc=i(85).NF1,Qc=i(85).ct8,Jc=i(85).LAF,$c=i(85).QNi,Yc=i(85).jtM,Xc=i(85).pXY,eu=i(85).rI1,tu=i(85).sOA,iu=i(85).ChN,ou=i(85).L_E,nu=i(85).EGI,au=i(85).NuR,su=i(85).ayx,ru=i(85).XNW,lu=i(85).Mm1,du=i(85).z8h,cu=i(85).Xvb,uu=i(85).zkl,mu=i(85).M_x,pu=i(85).qJ8,gu=i(85).ARt,hu=i(85).Ql2,vu=i(85).JmH,fu=i(85).H6e,yu=i(85).Wp_,bu=i(85).IOR,Su=i(85).X5t,wu=i(85).PXg,Mu=i(85).EMb,ku=i(85).gYY,Cu=i(85).tBn,Zu=i(85).Gpy,Tu=i(85).BQ6,Pu=i(85).rpY,Iu=i(85).W3n,Fu=i(85).Zij,_u=i(85).nx5,xu=i(85).aqt,Au=i(85).c9r,Bu=i(85).Tb$,Du=i(85).cdV,Eu=i(85).foJ,Lu=i(85).$VW,Ru=i(85).owK,Nu=i(85).hDW,Ou=i(85).nm$,Uu=i(85).T04,Vu=i(85).MWD,Wu=i(85).g7N,Ku=i(85).wuN,zu=i(85).UPJ,Gu=i(85).jkI,Hu=i(85).H1U,qu=i(85).rps,ju=i(85).$bT,Qu=i(85).EMU,Ju=i(85).sM5,$u=i(85)._V5,Yu=i(85)._B2,Xu=i(85).xzF,em=i(85).P0G,tm=i(85).KAl,im=i(85).cmt,om=i(85).XtO,nm=i(85).D7I,am=i(85).PLy,sm=i(85).TtP,rm=i(85).kV7,lm=i(85).yNZ,dm=i(85).QmD,cm=i(85).dbe;function um(e){window.__c={n:"ShareMenuSearchRequestImpl"};const{[om]:t,shouldShowSlackOnly:i,[im]:o,[tm]:n,[cm]:s,showShimmer:p,error:g,ready:h,result:v}=e,f=o.pagePermissionUIModel,y=(0,d.O7)(),w=(0,c.qz)(e[lm],se.ZP),M=(0,c.qz)(e[em],Do.Z),k=(0,c.VK)((()=>ia()),[]),T=(0,c.VK)((()=>Po.isImportSlackContactsEnabled()),[]),P=(0,c.VK)((()=>Po[Xu]()),[]),I=(0,c.VK)((()=>P),[P]),F=(0,u.yK)((e=>({[Yu]:{[$u]:0,[Ju]:Qu,[ju]:qu,gap:2},zeroState:{[Qu]:1,[Ju]:Qu,[Hu]:Gu,[zu]:Gu,[ju]:qu,textAlign:Gu,color:e[Ku],fontSize:14,position:"relative",pointerEvents:"auto",[$u]:10,marginTop:110},zeroStateText:{width:"70%",alignSelf:Gu},zeroStateIcon:{height:54,width:54,[Wu]:12,fill:e.mediumIconColor}})),[]),{inPageTargets:_,notInPageTargets:x,filteredImportedContacts:A}=(0,c.VK)((()=>{const{inviteUsers:e,inviteGroups:i,importedContacts:n=[]}=v??{inviteUsers:[],inviteGroups:[],importedContacts:[]},a=[...e,...i],s=[],r=[],l=new Set;a.forEach((e=>{"group"!==e[Vu]&&l.add(e.value[Uu].toLowerCase());const i=Boolean(Mn.Zp({[om]:t,[Ou]:e})),n=function(e){const{inviteTarget:t,[Nu]:i,[Ru]:o,[Lu]:n,groupPermission:a}=e,s=t[Vu];if("newUser"===s)return{[Au]:"none",[Vu]:"user_permission",user_id:t.value[Uu]};if("existingUser"===s)return Po[Xu]()?Z.getAllMostPermissivePermissionsForUser({userId:t.value.id,[om]:i}):Z.getCalculatedPermissionItemForUser({userId:t.value.id,[om]:i});if("group"===s){const e={[Au]:"none",[Vu]:"group_permission",[Du]:t.value.id},s=(0,C.getTeam)(i),r=null==s?void 0:s.getMembers().find((e=>(0,ta.lF)({groupId:t.value.id,teamMember:e}))),l=s&&n&&r;if(!Po[Xu]()){return[o,...l?[n]:[],a??{[Bu]:e,from:{[uu]:S.iU,blockId:i.id}}].sort(((e,t)=>b[Ac][t[Bu][Au]]-b[Ac][e[Bu][Au]]))[0][Bu]}return[o,...l?[n]:[],a||{[Bu]:e,from:{[uu]:S.iU,blockId:i.id}}].sort(((e,t)=>b[Ac][t[Bu][Au]]-b[Ac][e[Bu][Au]]))}(0,ae.unreachable)(s)}({inviteTarget:e,[Nu]:t,[Ru]:o.mostPermissiveSpaceItem,[Lu]:o.mostPermissiveTeamMemberItem,groupPermission:"group"===e[Vu]?f[Eu].find((t=>t[Bu][Du]===e.value.id)):void 0}),a=Array.isArray(n)?n[0][Bu]:n;if("existingUser"===e[Vu]&&!Boolean(e.spaceRole)){const t=k.get(e.value.id);e.spaceRole=t?t[Au]:"not_in_space"}(i||b.canRead(a[Au]??"none"))&&"newUser"!==e[Vu]?s.push({inviteTarget:e,[Bu]:a,mostPermissivePermissions:Array.isArray(n)?n:void 0}):"newUser"!==e[Vu]&&r.push(e)}));const d=n.filter((e=>!l.has(e.value[Uu].toLowerCase())));return{inPageTargets:s,notInPageTargets:r,filteredImportedContacts:d}}),[t,v,o.mostPermissiveSpaceItem,o.mostPermissiveTeamMemberItem,f[Eu],k]),{isValidEmail:B,isEmailInTargets:D}=(0,c.VK)((()=>{const e=(0,nn.H3)(s);return{isValidEmail:(0,nn.oH)(e),isEmailInTargets:[..._.map((e=>{let{inviteTarget:t}=e;return t})),...x].some((t=>"group"!==t[Vu]&&t.value[Uu]===e))}}),[s,_,x]),E=B&&!D,L=(0,c.VK)((()=>E&&Po.isGuestVsMemberGuestTagEnabled()),[E]);if(g)return r()(Zc.l,{[Iu]:!h},void 0,r()(Cc.Z,{[Fu]:r()(m.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",[_u]:xu})}));if(!h&&p)return r()(Tc.B,{areaHeight:window.innerHeight});const R={key:"user results",[Pu]:e=>l[nm](Qt.Z,a()({},e,{[Tu]:F[Yu],[Iu]:!h,[Fu]:r()(m.FormattedMessage,{id:"shareMenuSearchRequest.suggestedEmail.title",[_u]:"Keep typing an email to invite"})})),items:[{key:s,[Pu]:e=>l[nm](Ht.Z,a()({icon:de.Z.addPerson({width:24,height:24}),[Fu]:l[nm](l[Cu],null,r()(m.FormattedMessage,{id:"shareMenuSearchRequest.inviteNewUser.buttonItem",[_u]:"Invite {tokenQuery}",[Zu]:{[cm]:s}})),right:L?r()(vn.Z,{[om]:t,onlyShowTokenType:!0,showRemoveButton:!1,[Ou]:{[ku]:Uu,[Vu]:Mu,value:{[Uu]:s},spaceRole:"not_in_space"}},s):null,rightStyle:{[wu]:4}},e)),[Su]:async()=>{const e=(0,nn.H3)(s);if(!(0,nn.oH)(e))return;const t=await Zo.getInviteUserFromEmails(y,[e]);if(!t[sm])return;const i=t[0];an[bu]({[Ou]:i,[lm]:w})||(w[yu]({[fu]:[...w[dm][fu],i],[cm]:""}),M.unsetFocus())}}]},N=!i&&x[sm]>0&&0===s[sm],O={key:"suggested",[Pu]:e=>l[nm](Qt.Z,a()({},e,{[Tu]:F[Yu],[Fu]:r()(m.FormattedMessage,{id:"shareMenuSearchRequest.suggestedSection.title",[_u]:"Suggested"}),[Iu]:!h})),items:x.map(((e,i)=>({key:"newUser"===e[Vu]?e.value[Uu]:e.value.id,[Pu]:i=>{const o=an[bu]({[Ou]:e,[lm]:w});return l[nm](wm,a()({},i,{invited:!1,inviteTarget:e,[bu]:o,[Nu]:t,spaceVisibleUserMap:k}))},[Su]:()=>mm({inviteTarget:e,[lm]:w,[em]:M})})))},U=!i&&s[sm]>0&&_[sm]>0,V={key:"in page",[Pu]:e=>l[nm](Qt.Z,a()({},e,{[Tu]:F[Yu],[Fu]:r()(m.FormattedMessage,{id:"shareMenuSearchRequest.inPageSection.title",[_u]:"In page"}),[Iu]:!h})),items:_.map((e=>{const{inviteTarget:i,[Bu]:o,mostPermissivePermissions:s}=e,{[Vu]:d}=i;if("existingUser"===d){const e=!!s&&s[sm]>1;if(P&&e)return{key:i.value.id,[Pu]:e=>l[nm](hm,a()({},e,{[Nu]:t,inviteTarget:i,[Bu]:o,mostPermissivePermissions:s,spaceVisibleUserMap:k,[tm]:n})),[Su]:()=>{}};{const e=f.mostPermissiveUserPermissions.find((e=>e[Bu].user_id===i.value.id));return e?{key:i.value.id,[Pu]:i=>l[nm](Ht.Z,a()({},i,{itemMarginLeft:0,itemMarginRight:0,[Fu]:r()(Da,{[om]:t,userPermission:e,showInherited:!0,ignoreLocalHoverState:!0,spaceVisibleUserMap:k,[tm]:n})})),[Su]:()=>{}}:{key:i.value.id,[Pu]:e=>l[nm](hm,a()({},e,{[Nu]:t,inviteTarget:i,[Bu]:o,spaceVisibleUserMap:k,[tm]:n})),[Su]:()=>mm({inviteTarget:i,[lm]:w,[em]:M})}}}if("group"===d){if(P)return{key:i.value.id,[Pu]:s=>l[nm](hm,a()({},s,{[Nu]:t,inviteTarget:i,[Bu]:o,mostPermissivePermissions:e.mostPermissivePermissions,spaceVisibleUserMap:k,[tm]:n})),[Su]:()=>{}};{const e=f[Eu].find((e=>e[Bu][Du]===i.value.id));return e?{key:i.value.id,[Pu]:i=>l[nm](Ht.Z,a()({},i,{itemMarginLeft:0,itemMarginRight:0,[Fu]:r()(Sa,{[om]:t,groupPermission:e,[hu]:t[vu](),showInherited:!0,[tm]:n})})),[Su]:()=>{}}:{key:i.value.id,[Pu]:e=>l[nm](hm,a()({},e,{[Nu]:t,inviteTarget:i,[Bu]:o,spaceVisibleUserMap:k,[tm]:n})),[Su]:()=>mm({inviteTarget:i,[lm]:w,[em]:M})}}}(0,ae.unreachable)(d)}))},W=!i&&x[sm]>0&&s[sm]>0,K={key:"not in page",[Pu]:e=>l[nm](Qt.Z,a()({},e,{[Tu]:F[Yu],[Fu]:s[sm]>0&&r()(m.FormattedMessage,{id:"shareMenuSearchRequest.notInPageSection.title",[_u]:"Not in page"}),[Iu]:!h})),items:x.map((e=>({key:"newUser"===e[Vu]?e.value[Uu]:e.value.id,[Pu]:i=>l[nm](wm,a()({},i,{invited:!1,inviteTarget:e,[bu]:an[bu]({[Ou]:e,[lm]:w}),[Nu]:t,spaceVisibleUserMap:k})),[Su]:()=>mm({inviteTarget:e,[lm]:w,[em]:M})})))},z=T&&A[sm]>0,G={key:"imported contacts",[Pu]:e=>l[nm](Qt.Z,a()({},e,{[Tu]:F[Yu],[Fu]:r()(m.FormattedMessage,{id:"shareMenuSearchRequest.importedContactsSection.title",[_u]:"From Slack"}),[Iu]:!h})),items:A.map((e=>({key:e.value[Uu],[Pu]:i=>l[nm](wm,a()({},i,{invited:!1,inviteTarget:e,[bu]:an[bu]({[Ou]:e,[lm]:w}),[Nu]:t,spaceVisibleUserMap:k})),[Su]:()=>{an[bu]({[Ou]:e,[lm]:w})?w[yu]({...w[dm],[fu]:w[dm][fu].filter((t=>"newUser"!==t[Vu]||e.value[Uu]!==t.value[Uu]))}):(w[yu]({[fu]:[...w[dm][fu],e],[cm]:""}),M.unsetFocus())}})))};let H=[];return E&&H.push(R),N&&H.push(O),U&&H.push(V),W&&H.push(K),z&&H.push(G),i&&(H=[G],0===G.items[sm])?r()(Mm,{styles:F}):0===H[sm]&&(H=[R],0===s[sm])?r()(km,{styles:F,shouldShowSlackMessage:T}):l[nm](l[Cu],null,I&&r()(_c,{publicPermission:o.mostPermissivePublicItem}),r()(jt.Z,{[Vu]:jt.i.Vertical,initialFocus:s[sm]>0?0:void 0,sections:H,[om]:M}))}function mm(e){const{inviteTarget:t,[lm]:i,[em]:o}=e;if(an[bu]({[Ou]:t,[lm]:i})){const e=i[dm][fu].filter((e=>"group"===t[Vu]&&"group"===e[Vu]||"existingUser"===t[Vu]&&"existingUser"===e[Vu]?t.value.id!==e.value.id:"newUser"!==t[Vu]||"newUser"!==e[Vu]||t.value[Uu]!==e.value[Uu]));return i[yu]({...i[dm],[fu]:e}),void o.unsetFocus()}i[yu]({[fu]:[...i[dm][fu],t],[cm]:""}),o.unsetFocus()}const pm=l[gu](((e,t)=>{window.__c={n:"InPageGroupResultItem"};const{[Nu]:i,inviteTarget:o,[Bu]:n,mostPermissivePermissions:s,[tm]:p}=e,g=(0,d.O7)(),h=(0,m.useIntl)(),[v,f]=(0,l.useState)(!1),y=(0,c.VK)((()=>P.default[dm][pu]),[]),b=(0,c.VK)((()=>i[vu]()),[i]),w=(0,c.VK)((()=>Po[Xu]()&&s&&s[sm]>0),[s]),M=(0,c.VK)((()=>{if("group"===o[Vu])return(0,aa.kF)({[mu]:o.value,intl:h})}),[o,h]),k=(0,c.VK)((()=>{if(y&&"group"===o[Vu]&&o.value.icon)return{pointer:{[uu]:y[uu],id:y.id},icon:o.value.icon}}),[y,o]),C=(0,c.VK)((()=>y?"group"!==o[Vu]?0:(0,aa.rm)({[mu]:o.value,spaceStore:y,limit:void 0}).totalNumberMembers:0),[y,o]),Z=(0,l.useCallback)((()=>{if(w){const e=!1===v;f(!v),e&&It.trackExpandPermission(g,{[cu]:J.ZP[dm].sessionId,[Vu]:mu,[Du]:o.value.id})}}),[g,w,v,f,o]),T=(0,u.yK)((e=>({[du]:{[Ju]:Qu,[Hu]:Gu,[$u]:8,[lu]:8,[ru]:2,minHeight:36},[su]:{[Ju]:Qu,[ju]:qu},[au]:{[Ju]:Qu,[Hu]:Gu},groupNameLabel:{[ru]:10,[wu]:4},groupMembersLabel:{[ru]:10},[nu]:{[wu]:-6,color:e[Ku],fontSize:12},[ou]:{whiteSpace:"nowrap",[iu]:ce.Z[iu].bold},recordIcon:{[wu]:4,[Ju]:tu,[eu]:"middle"},[Xc]:{[Ju]:Yc},[$c]:{maxWidth:180},[Jc]:{paddingLeft:16},[Qc]:{[jc]:3,overflow:"hidden",[wu]:4}})),[]);return r()(rt.Z,{delayThreshold:0,placement:rt.Z[qc].Left,textWrap:!0,[Tu]:T[$c],[Oc]:()=>r()(vm,{[Nu]:i,blockPermissionItem:n}),[Pu]:o=>l[nm](l[Cu],null,l[nm]("div",o,l[nm](Ht.Z,a()({},e,(0,Mc.Z)(e,{[Hc]:Z}),{ref:t,[Fu]:r()("div",{[Tu]:T[du]},void 0,r()(sa.Z,{size:32}),r()("div",{[Tu]:T[su]},void 0,r()("div",{[Tu]:T[au]},void 0,r()(ie.Z,{[Tu]:T.groupNameLabel},void 0,M),Boolean(null==k?void 0:k.icon)&&r()(ra.Z,{[Gc]:!0,[zc]:"public",[Fu]:M,icon:k,size:18,isEmptyPage:!1})),r()(ie.Z,{isSmall:!0,[Tu]:T.groupMembersLabel},void 0,w&&v?r()(fm,{}):l[nm](l[Cu],null,r()(m.FormattedMessage,{[_u]:"Group",id:Kc})," · ",r()(m.FormattedMessage,{[_u]:Wc,id:Vc,[Zu]:{numberOfGroupMembers:C}}))))),right:r()(Ld.d,{[uu]:S.iU,[Gc]:!0,icon:w?v?de.Z.chevronUpRounded:de.Z.expandThin:void 0,[Au]:n[Au]??"none",isRemovable:!1,isCurrentUser:!1,[Uc]:T[nu]})}))),w&&v&&r()("div",{[Tu]:T[Jc]},void 0,null==s?void 0:s.map(((e,t)=>{const o=e[Bu][Vu];let n=null;switch(o){case"space_permission":n=r()(Wl,{[om]:i,[Ru]:e,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_permission":n=r()(yd,{[om]:i,blockTeamPermission:e,isExternalTeam:!0,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":n=r()(Sa,{[hu]:b,[om]:i,groupPermission:e,[tm]:p,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":break;case"explicit_team_owner_permission":case"explicit_team_guest_permission":break;case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":break;case"team_owner_permission":case"team_permission":break;default:(0,ae.unreachable)(o)}return r()("div",{[Tu]:T[Qc]},t,n)}))))})})),gm=l[gu](((e,t)=>{window.__c={n:"InPageUserResultItem"};const{[Nu]:i,inviteTarget:o,[Bu]:n,mostPermissivePermissions:s,spaceVisibleUserMap:m,[tm]:p}=e,g=(0,d.O7)(),[h,v]=(0,l.useState)(!1),f="existingUser"===o[Vu]?I.U6[Nc](i,{[uu]:Yn.KJ,id:o.value.id}):void 0,y=(0,c.VK)((()=>"none"===o.spaceRole?oa({spaceVisibleUserMap:m,userId:o.value.id,[Nu]:i}):(0,kc.K)(o.spaceRole)),[o,m,i]),b=(0,c.VK)((()=>i[vu]()),[i]),w=(0,c.VK)((()=>Po[Xu]()&&s&&s[sm]>0),[s]),M=(0,l.useCallback)((()=>{if(w){const e=!1===h;v(!h),e&&It.trackExpandPermission(g,{[cu]:J.ZP[dm].sessionId,[Vu]:"user",userId:o.value.id})}}),[g,w,h,v,o]),k=(0,u.yK)((e=>({[nu]:{[wu]:-6,color:e[Ku],fontSize:12},[ou]:{whiteSpace:"nowrap",[iu]:ce.Z[iu].bold},[Rc]:{[$u]:8,[lu]:8},recordIcon:{[wu]:4,[Ju]:tu,[eu]:"middle"},[Xc]:{[Ju]:Yc},[$c]:{maxWidth:180},[Jc]:{paddingLeft:24},[Qc]:{[jc]:3,overflow:"hidden",[wu]:4}})),[]);return r()(rt.Z,{delayThreshold:0,placement:rt.Z[qc].Left,textWrap:!0,[Tu]:k[$c],[Oc]:()=>r()(vm,{[Nu]:i,blockPermissionItem:n}),[Pu]:o=>l[nm](l[Cu],null,l[nm]("div",o,l[nm](Ht.Z,a()({},e,(0,Mc.Z)(e,{[Hc]:M}),{ref:t,[Fu]:r()(kc.Z,{isLarge:!0,actorStore:f,[Lc]:k[Rc],spaceRole:y,caption:w&&h?r()(fm,{}):void 0}),right:r()(Ld.d,{[uu]:S.iU,[Gc]:!0,icon:w?h?de.Z.chevronUpRounded:de.Z.expandThin:void 0,[Au]:n[Au]??"none",isRemovable:!1,isCurrentUser:!1,[Uc]:k[nu]})}))),w&&h&&r()("div",{[Tu]:k[Jc]},void 0,null==s?void 0:s.map(((e,t)=>{const o=e[Bu][Vu];let n=null;switch(o){case"space_permission":n=r()(Wl,{[om]:i,[Ru]:e,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_owner_permission":n=r()(Dd,{[om]:i,blockTeamOwnerPermission:e,isExternalTeam:!0,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_permission":n=r()(yd,{[om]:i,blockTeamPermission:e,isExternalTeam:!0,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_guest_permission":n=r()(od,{[om]:i,blockTeamGuestPermission:e,isExternalTeam:!0,[tm]:p,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":n=r()(Sa,{[om]:i,[hu]:b,groupPermission:e,[tm]:p,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":n=r()(Da,{[om]:i,userPermission:e,[tm]:p,spaceVisibleUserMap:m,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":break;case"team_owner_permission":case"team_permission":break;default:(0,ae.unreachable)(o)}return r()("div",{[Tu]:k[Qc]},t,n)}))))})})),hm=l[gu](((e,t)=>{const{inviteTarget:i}=e,o=i[Vu];switch(o){case mu:return l[nm](pm,a()({},e,{ref:t,inviteTarget:i}));case Ec:return l[nm](gm,a()({},e,{ref:t,inviteTarget:i}));default:(0,ae.unreachable)(o)}}));function vm(e){window.__c={n:"InPageItemTooltip"};const{[Nu]:t,blockPermissionItem:i}=e,o=(0,d.O7)(),n=(0,c.VK)((()=>P.default[dm][pu]),[]),a=(0,c.VK)((()=>{if(n)return(0,Wa.Wd)(o,n)}),[o,n]),s=(0,c.VK)((()=>{const e=i[Vu];if("explicit_team_permission"===e||"explicit_team_owner_permission"===e||"explicit_team_guest_permission"===e){return I.zX[Nc](t,{[uu]:M.e0,id:i.team_id})}}),[t,i]),p=(0,c.VK)((()=>null==s?void 0:s.getIcon()),[s]),g=(0,u.yK)((()=>({[ou]:{[iu]:ce.Z[iu].bold,...ce.Z.textOverflowStyle},recordIcon:{[wu]:4,[Ju]:tu,[eu]:"middle"},[Xc]:{[Ju]:Yc}})),[]),h=i[Vu];return"space_permission"===h?r()(m.FormattedMessage,{id:"shareMenu.searchResult.spacePermission.tooltip",[_u]:"Everyone at {spaceIconAndName} has access.",[Zu]:{spaceIconAndName:r()("span",{[Tu]:g[ou]},void 0,a&&r()(ra.Z,{[Gc]:!0,icon:a,isEmptyPage:!1,size:12,[Tu]:g.recordIcon}),n&&r()(ns.Z,{[om]:n,[Tu]:g[Xc]}))}}):"explicit_team_owner_permission"===h?r()(m.FormattedMessage,{id:"shareMenu.searchResult.teamPermission.tooltip",[_u]:"Teamspace owners of {teamIconAndName} have access.",[Zu]:{teamIconAndName:r()("span",{[Tu]:g[ou]},void 0,p&&r()(ra.Z,{[Gc]:!0,icon:p,isEmptyPage:!1,size:12,[Tu]:g.recordIcon}),s&&r()(ns.Z,{[om]:s,[Tu]:g[Xc]}))}}):"explicit_team_permission"===h?r()(m.FormattedMessage,{id:"shareMenu.searchResult.teamMemberPermission.tooltip",[_u]:"Teamspace members of {teamIconAndName} have access.",[Zu]:{teamIconAndName:r()("span",{[Tu]:g[ou]},void 0,p&&r()(ra.Z,{[Gc]:!0,icon:p,isEmptyPage:!1,size:12,[Tu]:g.recordIcon}),s&&r()(ns.Z,{[om]:s,[Tu]:g[Xc]}))}}):"explicit_team_guest_permission"===h?r()(m.FormattedMessage,{id:"shareMenu.searchResult.teamGuestPermission.tooltip",[_u]:"Teamspace guests of {teamIconAndName} have access.",[Zu]:{teamIconAndName:r()("span",{[Tu]:g[ou]},void 0,p&&r()(ra.Z,{[Gc]:!0,icon:p,isEmptyPage:!1,size:12,[Tu]:g.recordIcon}),s&&r()(ns.Z,{[om]:s,[Tu]:g[Xc]}))}}):"group_permission"===h?r()(m.FormattedMessage,{id:"shareMenu.searchResult.groupPermission.tooltip",[_u]:"This group has access."}):"user_permission"===h||"exclusive_user_permission"===h||"public_permission"===h||"restricted_permission"===h||"deleted_permission"===h||"team_permission"===h||"team_owner_permission"===h||"bot_permission"===h?l[nm](l[Cu],null,b.canRead(i[Au]??"none")&&r()(m.FormattedMessage,{id:"shareMenu.searchResult.userPermission.tooltip",[_u]:"This user has access"})):void(0,ae.unreachable)(h)}function fm(){return r()(m.FormattedMessage,{id:"shareMenu.inPageSearchResult.caption",[_u]:"Permission from"})}function ym(e){window.__c={n:"CircleCheckmark"};const{checked:t}=e,i=(0,u.yK)((e=>({circleCheckmark:{[Ju]:Qu,[zu]:Gu,[Hu]:Gu,width:22,height:22,[jc]:"50%",borderStyle:"solid",borderWidth:1.75,borderColor:t?le.ZP.blue:e[Dc],backgroundColor:t?le.ZP.blue:"transparent",[wu]:6},checkIcon:{height:12,width:12,color:"white"}})),[t]);return r()("div",{[Tu]:i.circleCheckmark},void 0,t&&de.Z.check(i.checkIcon))}const bm=l[gu](((e,t)=>{window.__c={n:"NotInPageGroupResultItem"};const{inviteTarget:i,[bu]:o,[Gc]:n}=e,s=(0,m.useIntl)(),d=(0,c.VK)((()=>P.default[dm][pu]),[]),p=(0,c.VK)((()=>(0,aa.kF)({[mu]:i.value,intl:s})),[i,s]),g=(0,c.VK)((()=>{if(d&&i.value.icon)return{pointer:{[uu]:d[uu],id:d.id},icon:i.value.icon}}),[d,i]),h=(0,c.VK)((()=>{if(!d)return 0;return(0,aa.rm)({[mu]:i.value,spaceStore:d,limit:void 0}).totalNumberMembers}),[d,i]),v=(0,u.yK)((()=>({[du]:{[Ju]:Qu,[Hu]:Gu,[$u]:8,[lu]:8,[ru]:2,minHeight:36},[su]:{[Ju]:Qu,[ju]:qu},[au]:{[Ju]:Qu,[Hu]:Gu},groupNameLabel:{[ru]:10,[wu]:4},groupMembersLabel:{[ru]:10}})),[]),f=r()("div",{[Tu]:v[du]},void 0,r()(sa.Z,{size:32}),r()("div",{[Tu]:v[su]},void 0,r()("div",{[Tu]:v[au]},void 0,r()(ie.Z,{[Tu]:v.groupNameLabel},void 0,p),Boolean(null==g?void 0:g.icon)&&r()(ra.Z,{[Gc]:!0,[zc]:"public",[Fu]:p,icon:g,size:18,isEmptyPage:!1})),r()(ie.Z,{isSmall:!0,[Tu]:v.groupMembersLabel},void 0,r()(m.FormattedMessage,{[_u]:"Group",id:Kc})," · ",r()(m.FormattedMessage,{[_u]:Wc,id:Vc,[Zu]:{numberOfGroupMembers:h}}))));return l[nm](Ht.Z,a()({},e,{ref:t,[Fu]:f,right:r()(ym,{checked:o}),[Gc]:n}))})),Sm=l[gu](((e,t)=>{window.__c={n:"NotInPageUserResultItem"};const{inviteTarget:i,[Nu]:o,[bu]:n,[Gc]:s,spaceVisibleUserMap:d,...m}=e,p=(0,u.yK)((()=>({[Rc]:{[$u]:8,[lu]:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,[jc]:"100%"}})),[]),g=(0,c.VK)((()=>"existingUser"===i[Vu]?oa({spaceVisibleUserMap:d,userId:i.value.id,[Nu]:o}):void 0),[i,d,o]),h=(0,l.useMemo)((()=>"existingUser"===i[Vu]?{actorStore:I.U6[Nc](o,{[uu]:Yn.KJ,id:i.value.id}),avatar:void 0}:"newUser"===i[Vu]?{actorStore:void 0,avatar:{[Uu]:i.value[Uu],name:"slack"===i[ku]?i.value.name:void 0,avatarUrl:"slack"===i[ku]?i.value.avatar_url:void 0}}:void(0,ae.unreachable)(i)),[i,o]);return l[nm](Ht.Z,a()({},m,{ref:t,[Fu]:l[nm](kc.Z,a()({isLarge:!0},h,{[Lc]:p[Rc],avatarBadge:"newUser"===i[Vu]&&"slack"===i[ku]?r()(me.Z,{[Vu]:"image_url",imageURL:re.Z.images[Bc].slackIconPng,size:18,[Tu]:p.iconBox,imageStyle:p.iconBoxImage}):void 0,spaceRole:g})),[Gc]:s,right:!s&&r()(ym,{checked:n})}))})),wm=l[gu](((e,t)=>{const{inviteTarget:i,[Nu]:o,spaceVisibleUserMap:n}=e,s=i[Vu];switch(s){case mu:return l[nm](bm,a()({},e,{ref:t,inviteTarget:i}));case Mu:case Ec:return l[nm](Sm,a()({},e,{ref:t,inviteTarget:i,[Nu]:o,spaceVisibleUserMap:n}));default:(0,ae.unreachable)(s)}}));function Mm(e){const{styles:t}=e;return r()("div",{[Tu]:t.zeroState},void 0,de.Z.personBadgeExclamationMark(t.zeroStateIcon),r()("div",{[Tu]:t.zeroStateText},void 0,r()("div",{[Tu]:{[iu]:ce.Z[iu].semibold,[Wu]:4}},void 0,r()(m.FormattedMessage,{id:"shareMenuSearchRequest.noImportedContacts.title",[_u]:"No contacts found"})),r()("div",{},void 0,r()(m.FormattedMessage,{id:"shareMenuSearchRequest.noImportedContacts.text",[_u]:"Try connecting a different Slack workspace or typing an email address"}))))}function km(e){const{styles:t,shouldShowSlackMessage:i}=e;return r()("div",{[Tu]:t.zeroState},void 0,de.Z.addPersonCircle(t.zeroStateIcon),r()("div",{[Tu]:t.zeroStateText},void 0,r()("div",{[Tu]:{[iu]:ce.Z[iu].semibold,[Wu]:4}},void 0,r()(m.FormattedMessage,{id:"shareMenuSearchRequest.noSuggestions.title",[_u]:"Search or add people"})),r()("div",{},void 0,r()(m.FormattedMessage,i?{id:"shareMenuSearchRequest.noSuggestions.text",[_u]:"Try connecting a Slack workspace or typing an email address"}:{id:"shareMenuSearchRequest.noSuggestions.defaultText",[_u]:"Try typing an email address"}))))}const Cm=function(e){window.__c={n:"ShareMenuSearchRequest"};const t=(0,d.O7)(),i=(0,m.useIntl)(),[o,n]=(0,l.useState)(!0),s=(0,c.VK)((()=>e[lm][dm][cm]),[e[lm]]),r=(0,c.VK)((()=>{if(e.shouldShowSlackOnly)return{userLimit:0,botLimit:0,groupLimit:0,importContactLimit:e[rm]};const t=Bo.Z[am][dm][sm]>0&&Po.isImportSlackContactsEnabled();return{userLimit:e[rm],botLimit:0,groupLimit:e.shouldShowGroups?e[rm]:0,importContactLimit:t?e[rm]:0}}),[e[rm],e.shouldShowGroups,e.shouldShowSlackOnly]),[{value:u,status:p}]=(0,wc.r5)((async()=>Zo.getInvitableActorsFromInputQuery({query:s,sectionLimit:r,membersOnly:e.membersOnly,environment:t,intl:i}).finally((()=>n(!1)))),[t,i,e.membersOnly,s,r],{debounce:40});return l[nm](um,a()({},e,{[cm]:s,showShimmer:o,ready:"pending"!==p,error:"rejected"===p,result:u}))},Zm=i(85).UPJ,Tm=i(85).raT,Pm=i(85).OtN,Im=i(85).XNW,Fm=i(85).Joh,_m=i(85).PG2,xm=i(85).cav,Am=i(85).cZW,Bm=i(85).ELX,Dm=i(85).ONn,Em=i(85).pkR,Lm=i(85).Yzm,Rm=i(85).$ig,Nm=i(85).nx5,Om=i(85).t2y,Um=i(85).tHd,Vm=i(85).D7I,Wm=i(85).Dd5,Km=i(85).wgE,zm=i(85).dbe,Gm=i(85).kV7,Hm=i(85).PLy,qm=i(85).TtP,jm=i(85).qJ8,Qm=i(85).H6e,Jm=i(85).LtW,$m=i(85).cmt,Ym=i(85).BQ6,Xm=i(85).P0G,ep=i(85).DL8,tp=i(85).sqI,ip=i(85).bqK,op=i(85).gYY,np=i(85).Wp_,ap=i(85).dLQ,sp=i(85).EMU,rp=i(85).F3c,lp=i(85).Oad,dp=i(85).L_E,cp=i(85).QmD,up=i(85).sM5,mp=i(85).yNZ,pp=i(85).KAl,gp=i(85).XtO;function hp(e){window.__c={n:"InviteContent"};const t=(0,d.O7)(),i=(0,c.qz)(e[mp],se.ZP),o=(0,c.VK)((()=>i[cp][Qm]),[i]),{[up]:n,[op]:a,focus:s,[ip]:m}=(0,c.VK)((()=>{const{[up]:e}=J.ZP[cp];return e===J.wV.Invite?J.ZP[cp]:{[up]:e,[op]:void 0,focus:void 0,[ip]:""}}),[]),p=(0,c.VK)((()=>P.default[cp][jm]),[]),g=(0,c.VK)((()=>a===J.T5.Notion&&0===o[qm]&&(0,Po.isImportSlackContactsEnabled)()),[o[qm],a]),h=(0,c.VK)((()=>Bo.Z[Hm][cp]),[]),v=(0,l.useCallback)((()=>{i.reset()}),[i]),[f,y]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(p&&!f&&g){for(const e of h)Co.loadContacts(t,{botId:e.id,spaceId:p.id,integrationId:ko.nO}).catch((e=>{}));y(!0)}}),[g]);const b=n===J.wV.Invite&&o[qm]>0,S=(0,u.yK)((()=>({scroller:{flexGrow:1}})),[]);return n!==J.wV.Invite?null:l[Vm](l.Fragment,null,r()(Ro.Z,{type:Ao.Z.Y,[Ym]:S.scroller},void 0,r()(Cm,{[mp]:i,[gp]:e[gp],[Xm]:e[Xm],shouldShowGroups:!0,shouldShowSlackOnly:a===J.T5.Slack,membersOnly:!1,[Gm]:10,[$m]:e[$m],[pp]:e[pp]})),g&&r()(on,{onClickAuthenticated:()=>{J.ZP[np]({...J.ZP[cp],tab:J.XF.Share,[up]:J.wV.Invite,focus:J.Sw.Search,[op]:J.T5.Slack,[ip]:m}),i[np]({...i[cp],[zm]:""})}}),r()(bp,{open:b&&!g,focus:s===J.Sw.Message,value:m,onFocus:()=>{a&&n===J.wV.Invite&&J.ZP[np]({...J.ZP[cp],focus:J.Sw.Message,tab:J.XF.Share,[up]:n,[op]:a,[ip]:m})},[Wm]:e=>{J.ZP[np]({...J.ZP[cp],focus:s,tab:J.XF.Share,[up]:n,[op]:a,[ip]:e.target.value})},onCancel:async()=>{await To.confirmCloseShareMenu({[Km]:t,[mp]:i})&&(To.closeShareMenu(t),v())},maxLength:1e3}))}function vp(e){window.__c={n:"InviteSection"};const{[gp]:t,[Xm]:i,[tp]:o,[ep]:n}=e,s=(0,d.O7)(),p=(0,m.useIntl)(),g=(0,c.qz)(e[mp],se.ZP),{[up]:h,[op]:v,focus:f,[ip]:y}=(0,c.VK)((()=>{const{[up]:e}=J.ZP[cp];return e===J.wV.Invite?J.ZP[cp]:{[up]:e,[op]:void 0,focus:void 0,[ip]:""}}),[]),[b,S]=(0,l.useState)("editor"),w=(0,c.VK)((()=>t.getType()),[t]),M=(0,c.VK)((()=>n[cp].flowId),[n]),k=(0,c.VK)((()=>g[cp][Qm]),[g]),C=(0,c.VK)((()=>P.default[cp][jm]),[]),T=(0,c.VK)((()=>new Set(null==C?void 0:C.getEmailDomains())),[C]),I=(0,c.VK)((()=>{const{data:e}=Eo.default[cp],t=e?xt.getVisibleUsers(e):[],i={};return t.forEach((e=>{i[e.userId]=e})),i}),[]),F=e=>{const t=e.type;if("existingUser"===t){const t=I[e.value.id];if(!t)return!0;return"none"===t.role&&!t.isTeamGuest&&t.isPageGuest}return"newUser"===t||"group"!==t&&void 0},_=e=>!Io.isVerifiedDomain({contextualInviteUser:e,allowedDomains:T}),x=(0,c.VK)((()=>t.canEditMembership()),[t]),A=(0,c.VK)((()=>{const e=k.filter((e=>{let{type:t}=e;return"newUser"===t})).map((e=>{let{value:t}=e;return t.email})),t=k.filter((e=>{let{type:t}=e;return"existingUser"===t})).map((e=>{let{value:t}=e;return t.id}));return Z.isOverGuestLimit(s,[...e,...t])}),[s,k]),B=(0,Fo.Z)(t),D=(0,c.VK)((()=>{const e=B[Um]&&!B.teamAllowsGuests,t=!B[Um]&&!B.spaceAllowsGuests||B[Um]&&!B.teamAllowsGuests&&!B.spaceAllowsGuests,i=k.some((e=>"newUser"===e.type||("existingUser"===e.type?"none"===e.spaceRole||"not_in_space"===e.spaceRole:void 0)));return(e||t)&&i}),[k,B]),E=(0,c.VK)((()=>{const{[jm]:e}=P.default[cp];return(0,Po.isShareModalPlaceholderExpEnabled)({[jm]:e})}),[]),L=(0,_o.i)(t),R=y[qm]>1e3,N=k[qm]>0,O=(0,u.yK)((()=>({permissionsRoleSelectButton:{[up]:sp,whiteSpace:"nowrap",height:20,margin:0,borderRadius:3,color:le.ZP.uiGray}})),[]);async function U(){const e=xo.default.mark(Om);await To.handleInviteClick({[Km]:s,intl:p,inviteOrigin:"page_share_modal",role:b,[ip]:y,[mp]:g,blockStore:t,[tp]:o,onInviteClick:()=>{g.reset(),J.ZP[np]({...J.ZP[cp],tab:J.XF.Share,[up]:J.wV[lp]}),(e=>{n[np]({...n[cp],invitedUsers:e.filter(F).map(Io.createContextualInviteUser).filter(ae.isDefined).filter(_)}),C&&Io.handlePermissionsInviteInitiated({[Km]:s,spaceStore:C,[ep]:n})})(k)},onInviteComplete:e=>To.handleInviteComplete({success:e,[Qm]:k})}),xo.default.measure(e,{[Km]:s})}async function V(){void 0===i[cp].focus.indexGlobal&&void 0===i[cp].focus.indexLocal&&void 0===i[cp].focus.section&&await U()}let W;return W=D?L:R?r()(m.FormattedMessage,{id:"shareMenu.inviteButton.emailOverMaxLength.tooltip",[Nm]:"Message exceeds the limit of 1000 characters."}):void 0,r()(rt.Z,{disableTooltip:x,[Fm]:()=>{if(!x)return r()(m.FormattedMessage,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip",[Nm]:Rm})},render:e=>l[Vm]("div",a()({[Ym]:{[up]:sp}},e),r()(wn,{[gp]:t,[mp]:g,flowId:M,[Em]:!x,origin:"share_menu_v2",focus:f===J.Sw.Search,onFocus:()=>{J.ZP[np]({...J.ZP[cp],tab:J.XF.Share,[up]:J.wV.Invite,focus:J.Sw.Search,[op]:v||J.T5.Notion,[ip]:y||""}),It.trackInviteModalInputFocus(s,{[op]:v||J.T5.Notion})},onSubmit:V,[Am]:E?p[Lm]({id:"shareMenu.inviteTargetsInput.placeholder.exp",[Nm]:"Email or group, separated by commas"}):p[Lm]({id:"shareMenu.inviteTargetsInput.placeholder",[Nm]:"Add people, groups, or emails..."}),right:N&&r()(No.ZP,{[Em]:!x,role:b,table:"block",type:"user_permission",[Dm]:w,isInvite:!0,upgradeButtonName:"invite_permission_block",[Bm]:O.permissionsRoleSelectButton,isMenuItem:!1,[Wm]:e=>S(e)})}),A?r()(fp,{[_m]:()=>Zo[xm]({[Km]:s,upgradeButtonName:"user_permission_item"})}):r()(yp,{tooltip:W,[Em]:!x||D||R,[_m]:async()=>{h!==J.wV[lp]?await U():J.ZP[np]({...J.ZP[cp],tab:J.XF.Share,[up]:J.wV.Invite,focus:J.Sw.Search,[op]:J.T5.Notion,[ip]:""})}}))})}function fp(e){const{[_m]:t}=e;return r()(rt.Z,{disableTooltip:!1,[Fm]:()=>r()(Oo.e,{}),render:e=>l[Vm](He.Z,a()({isLarge:!0,[Ym]:{[Im]:8},[_m]:t},e),r()(m.FormattedMessage,{id:"shareMenu.inviteButton.upgrade",[Nm]:"Upgrade"}))})}function yp(e){const{tooltip:t,[Em]:i,[_m]:o}=e;return r()(rt.Z,{disableTooltip:!Boolean(t),[Fm]:()=>t,render:e=>l[Vm](He.Z,a()({isLarge:!0,[Ym]:{[Im]:8},[Em]:i,[_m]:o},e),r()(m.FormattedMessage,{id:"shareMenu.inviteButton.invite",[Nm]:"Invite"}))})}function bp(e){window.__c={n:"EmailMessageInput"};const{open:t,focus:i,value:o,maxLength:n,onFocus:a,[Wm]:s,onCancel:l}=e,d=(0,m.useIntl)(),c=o[qm]/n>=.8,p=(0,Mo.TQ)(o),g=c||p,h=(0,u.yK)((e=>({[dp]:{maxHeight:t?100:0,position:"absolute",bottom:0,width:"100%",[Pm]:e.modalBackground,pointerEvents:t?"all":"none",transitionProperty:"max-height",[rp]:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",overflow:"hidden",zIndex:1},input:{maxHeight:t?100:0,borderTop:1,borderTopStyle:"solid",borderTopColor:e.regularDividerColor,padding:18,fontSize:14,transitionProperty:"max-height",[rp]:"0.3s"}})),[t]),v=d[Lm]({id:"shareMenu.emailMessageInput.placeholder",[Nm]:"Add a message to your invite..."});return r()("div",{[Ym]:h[dp]},void 0,g&&r()(Sp,{value:o,maxLength:n,shouldShowLengthWarning:c,shouldShowLinkWarning:p}),r()(Et.Z,{textarea:!0,focusInitial:!1,format:Et.B[Tm],[Am]:v,maxlength:n,focus:i,value:o,onFocus:a,[Wm]:s,inputStyle:h.input,onCancel:l}))}function Sp(e){window.__c={n:"EmailMessageWarning"};const{shouldShowLengthWarning:t,shouldShowLinkWarning:i,value:o,maxLength:n}=e,a=(0,u.yK)((e=>({[dp]:{position:"absolute",top:0,[up]:sp,[Zm]:"center",fontSize:12,color:e.lightTextColor,width:"100%"},warning:{[up]:sp,[Zm]:"center",width:"calc(100% - 36px)",[Pm]:e.modalBackground,marginTop:1}})),[]);return r()("div",{[Ym]:a[dp]},void 0,r()("div",{[Ym]:a.warning},void 0,t&&r()(m.FormattedMessage,{[Nm]:"{characters} / {maxCharacters} characters",id:"ContextualInvite.permissions_invites.messageLengthWarning",values:{characters:o[qm],maxCharacters:n}}),t&&i&&" · ",i&&r()(m.FormattedMessage,{[Nm]:"Links will be omitted from your message",id:"ContextualInvite.permissions_invites.removeLinkWarning"})))}const wp=function(e){window.__c={n:"ShareMenuInviteTab"};const{[gp]:t,[pp]:i,[mp]:o}=e,n=(0,d.Fy)(),a=(0,c.qz)(void 0,Do.Z),{[up]:s}=(0,c.VK)((()=>J.ZP[cp]),[]),l=(0,u.yK)((()=>({[dp]:{position:"relative",height:s!==J.wV[lp]?540:"unset",transition:"all",[rp]:"0.3s",[up]:sp,flexDirection:"column",maxHeight:540},searchBar:{paddingLeft:14,paddingRight:14,paddingBottom:8}})),[s]);return r()(Lo.Z,{capture:!0,onTab:function(e){e.preventDefault(),n[ap]||s!==J.wV[lp]||J.ZP[np]({...J.ZP[cp],tab:J.XF.Share,[up]:J.wV.Invite,focus:J.Sw.Search,[op]:J.T5.Notion,[ip]:""})}},void 0,r()("div",{[Ym]:l[dp]},void 0,r()("div",{[Ym]:l.searchBar},void 0,n[ap]?r()($n,{[gp]:t,[pp]:i}):r()(vp,{[gp]:t,[mp]:o,[Xm]:a,[tp]:i[tp],[ep]:e[ep]})),s===J.wV[lp]&&r()(Sc,{[gp]:t,[$m]:e[$m],[Jm]:e[Jm],[pp]:i}),s===J.wV.Invite&&!n[ap]&&r()(hp,{[gp]:t,[mp]:o,[Xm]:a,[$m]:e[$m],[pp]:e[pp]})))},Mp=(i(85).AQ6,i(85).nx5),kp=(i(85).hOZ,i(85).Tbo),Cp=i(85).UPJ,Zp=i(85).L_E,Tp=i(85).UN$,Pp=i(85).K02,Ip=i(85).Knl;const Fp=function(e){window.__c={n:"WorkspaceOwnerPermissionOverride"};const{store:t,sudoModeStore:i}=e,o=(0,c.VK)((()=>i.state[Ip]),[i]),n=(0,c.VK)((()=>i&&i[Pp]()&&!i[Tp](t.id)&&i.state.privatePageStore),[i,t]),a=(0,u.yK)((e=>({[Zp]:{background:e.cardBackground,padding:"12px 18px",boxShadow:e.borderBoxShadow,display:"flex",flexDirection:"column",[Cp]:"center",alignItems:"baseline"},button:{fontWeight:ce.Z.fontWeight.medium,[Cp]:"center",marginTop:8,opacity:o?.5:1},icon:{width:16,height:16,marginRight:6,transition:"all 200ms ease",transform:o?"rotate(-90deg)":void 0}})),[o]);return n?r()("div",{style:a[Zp]},void 0,r()(ie.Z,{isMultiline:!0},void 0,r()(m.FormattedMessage,{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessage",[Mp]:kp,values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r()("b",{},void 0,t)}}})),r()(st.Z,{disabled:o,style:a.button,onClick:()=>{i.setState({...i.state,[Ip]:!0})}},void 0,de.Z.settingsSecurity(a.icon),r()(m.FormattedMessage,o?{id:"blockPermissionsSettings.workspaceOwner.isChangingPermissionsMessageButton",[Mp]:"Changing permissions"}:{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessageButton",[Mp]:"Change permissions"}))):null},_p=i(85).D7I,xp=i(85).cmt,Ap=i(85).sqI,Bp=i(85).L_E,Dp=i(85).yNZ,Ep=i(85).KAl;function Lp(e){window.__c={n:"ShareMenuContent"};const t=(0,c.VK)((()=>J.ZP.state.tab),[]);switch(t){case J.XF.Share:return l[_p](wp,e);case J.XF.Publish:return r()(wo,{store:e.store,[Ep]:e[Ep],mostPermissivePublicItem:e[xp].mostPermissivePublicItem});default:(0,ae.unreachable)(t)}}const Rp=function(e){window.__c={n:"ShareMenu"};const{store:t,[Ep]:i}=e,o=(0,d.Fy)(),n=(0,c.qz)(e[Dp],se.ZP),s=(0,u.yK)((()=>({[Bp]:{display:"flex",flexDirection:"column",height:"100%"}})),[]);return r()("div",{style:s[Bp]},void 0,i[Ap]&&r()(Fp,{store:t,[Ap]:i[Ap]}),!o.isMobile&&r()(Le,{[Dp]:n,mostPermissivePublicItem:e[xp].mostPermissivePublicItem}),l[_p](Lp,a()({[Dp]:n},e)))},Np=i(85).L_E,Op=i(85).D7I,Up=i(85).t5q,Vp=i(85).yKO,Wp=i(85).yNZ,Kp=i(85).KAl,zp=i(85).cmt,Gp=i(85).LtW,Hp=i(85).nx5,qp=i(85).dLQ,jp=i(85).QmD,Qp=i(85).DL8,Jp=i(85).lGJ,$p=i(85).sqI;function Yp(){window.__c={n:"OfflineMessage"};const e=(0,d.Fy)(),t=(0,u.yK)((()=>({[Np]:{display:"flex",alignItems:"center",justifyContent:"center",height:160}})),[]);return r()("div",{style:t[Np]},void 0,r()(ie.Z,{[qp]:e[qp],isSecondaryColor:!0,isMultiline:!0},void 0,r()(m.FormattedMessage,{[Hp]:"Please go online to publish & share.",id:"blockPermissionsSettings.offline.prompt"})))}const Xp=function(e){window.__c={n:"ShareMenuContainer"};const{store:t,[$p]:i,[Jp]:o,location:n}=e,s=(0,d.O7)(),v=(0,d.Fy)(),f=(0,c.qz)(void 0,$.Z),{[Qp]:y}=(0,c.VK)((()=>f[jp]),[f]),b=(0,c.VK)((()=>P.default[jp].currentSpaceStore),[]),S=(0,c.VK)((()=>H({environment:s,spaceStore:b,store:t})),[s,b,t]);"control"!==(0,q.a)("link_sharing_pill")&&(S.showSpacePermission="none"!==S.mostPermissiveSpaceItem.permissionItem.role);const w=(0,c.VK)((()=>y[jp].inviteStage),[y]),M=(0,c.VK)((()=>J.ZP[jp].tab),[]),k=(0,u.yK)((()=>({title:{fontSize:18},topbarStyle:{paddingTop:15,paddingBottom:15,height:"auto"}})),[]),C=(0,l.useMemo)((()=>({[Jp]:o,[$p]:i,location:n})),[o,i,n]);if(!b)return null;if(!v[qp]&&(w===Q.TG.share_workspace||w===Q.TG.request_workspace))return r()(ne.Z,{blockStore:t,spaceStore:b,[Qp]:y});const Z=v[qp]?{menuType:g.og.Modal,disableHeaderShadow:!0,title:r()(ie.Z,{[qp]:v[qp],style:k.title},void 0,r()(m.FormattedMessage,{[Hp]:"Share",id:"blockPermissionsSettings.mobileShareMenu.title"})),additionalTopbarContent:r()(Ne,{mostPermissivePublicItem:S.mostPermissivePublicItem}),left:r()(oe.Z,{href:(0,h.getLocalizedUrl)("guides.sharing"),analyticsFrom:"sharing"}),footer:M===J.XF.Share&&r()(Tl,{store:t,[Gp]:e[Gp],[zp]:S,[Kp]:C}),topbarStyle:k.topbarStyle,right:r()(te.DoneMenuText,{}),onClickRight:e.onClose,whiteBackground:!0}:{menuType:g.og.Popup,maxHeight:"90vh"};return l[Op](l.Fragment,null,l[Op](ee.Z,a()({},Z,{className:p.shareMenu}),r()(Y.Z,{capture:!0,allowEsc:!0},void 0,r()(X.Z,{capture:!0,ignoreBlockSelection:!0,[Vp]:!1,[Up]:!1,render:()=>j.Z[jp].online?r()(Rp,{store:t,[Kp]:C,[zp]:S,[Gp]:e[Gp],[Wp]:e[Wp],[Qp]:y}):r()(Yp,{})}))))}},93638:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Pe});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(83355),d=i(42875),c=i(94044),u=i(5366),m=i(4708),p=i(79817),g=i(87279),h=i(75472),v=i(65598),f=i(38755),y=i(23537),b=i(25464),S=i(79315),w=i(85834),M=i(52878),k=i(74194),C=i(78140),Z=i(89728),T=i(44532),P=i(57806),I=i(32357),F=i(20346);const _=i(85).K07,x=i(85).XeC,A=i(85).Yzm,B=i(85).TEz,D=i(85).nx5,E=i(85).XF5,L=i(85).jkI,R=i(85).h8z,N=i(85).UPJ,O=i(85).$bT,U=i(85).EMU,V=i(85).sM5,W=i(85).X9J,K=i(85).qJ8,z=i(85).fmZ,G=i(85).Mm1,H=i(85)._V5,q=i(85).XCs,j=i(85).YDv,Q=i(85).$Vg,J=i(85).H1U,$=i(85).bqK,Y=i(85).ccq,X=i(85).GZ0,ee=i(85).z$9,te=i(85).PpY,ie=i(85).UV5,oe=i(85).YBg,ne=i(85).mPB,ae=i(85).Wkb,se=i(85).voC,re=i(85).QhS,le=i(85).kaG,de=i(85).G3i,ce=i(85).H6e,ue=i(85).TtP,me=i(85).D7I,pe=i(85).Wp_,ge=i(85).qJT,he=i(85).XtO,ve=i(85).wgE,fe=i(85).Wqi,ye=i(85).QmD,be=i(85).DL8,Se=i(85).Jy7,we=i(85).Gnd,Me=i(85).XjH,ke=i(85).P0R,Ce=i(85).EIp;class Ze extends l.Z{constructor(){super(...arguments),this.storeTypes={universalInviteStore:M.Z},this.renderEmailInput=this[Ce]((()=>"milestone_2"===this[ke].mode))}[Me](){const{universalInviteStore:e}=this[we],{[Se]:t,[be]:i}=e[ye],o=e.stage,{[fe]:a}=this[ke];if(this[ve].device.isMobile||o===w.TG.closed)return null;if(!(0,v.isSpaceStore)(this[ke][he])&&(o===w.TG.share_workspace||o===w.TG.request_workspace))return n()(I.Z,{blockStore:this[ke][he],[fe]:a,[be]:i});if(o===w.TG.share_page){const o={...this[ke],[ge]:!0,[fe]:a,[Se]:t,[be]:i,onInviteClick:()=>{(0,y.$)(this[ve])?i[pe]({...i[ye],inviteStage:w.TG.closed}):p.handlePermissionsInviteInitiated({[ve]:this[ve],[fe]:a,[be]:i})},onInviteComplete:e=>{p.handlePermissionsInviteComplete({success:e,intl:this[ke].intl,[be]:i})},onCancel:async()=>{await(0,h.Aw)({[ve]:this[ve],permissionsInviteStoreState:t[ye],from:"share_menu"})||e.reset()}};return this.renderEmailInput[ye]?r[me](Te,o):r[me](P.default,o)}}}Ze.displayName="UniversalMemberInvite";class Te extends P.PermissionsInviteBase{constructor(){super(...arguments),this.inviteTargetLength=this[Ce]((()=>this[we][Se][ye][ce][ue])),this.blockTitle=this[Ce]((()=>{if((0,v.isSpaceStore)(this[ke][he]))return"";const e=this[ke][he];if(!e[de]())return"";const t=e[re]()[le]({[se]:e[se],[ae]:(0,d.r)(),intl:this[ke].intl});return t||e[re]()[ne]({[se]:e[se],[ae]:(0,d.r)(),intl:this[ke].intl})})),this[oe]=async()=>{const{[Se]:e}=this[we];"invitee"===e[ye].inputFocus?e[pe]({...e[ye],inputFocus:ie}):await super[oe]()},this.resetFocusOnClickEmpty=e=>{const{[Se]:t}=this[we];e[te]===e.target&&t[pe]({...t[ye],inputFocus:ee})}}[Me](){return this[ge][ye]?this.renderUniversalInviteInner():super[Me]()}renderUniversalInviteInner(){const{[Se]:e}=this[we];return n()("div",{style:this[X](),onClick:this.resetFocusOnClickEmpty},void 0,n()(T.ZP,{popupType:T.kQ.Popup,alignmentToOrigin:b.v.Start,[Y]:b.u.Bottom,open:"invitee"===e[ye].inputFocus,originGap:10,disableMouseCapture:!0,forceRemeasureStore:this.inviteTargetLength,origin:super.renderHeader(),onDismiss:()=>{e[pe]({...e[ye],inputFocus:ie})},render:()=>{const e=super.renderSearchRequest(),t={menuType:g.og.Popup,disableScroller:!1};return n()("div",{},void 0,r[me](C.Z,t,e))},style:{width:360}}),this.renderEmailMessageInput(),this.renderSinglePlayerOptions(),this.renderActions())}renderEmailMessageInput(){const{[Se]:e}=this[we],t=this.getEmailMessage(),{inputFocus:i,[$]:o}=e[ye],a=o[ue]/c.vr>=.8,s=(0,c.TQ)(o),r=a||s,l=(0,m.isContextualInviteOnSelectFocusEnabled)(this[ve]),d="email-content"===i;return n()(k.Z,{textarea:!0,value:o,focus:d,focusInitial:!1,maxlength:c.vr,onFocus:()=>{e[pe]({...e[ye],inputFocus:ie})},style:{background:d?ee:this.theme.inputBackground,[J]:Q,[j]:12,[q]:12,[H]:8,[G]:r?34:12},inputStyle:{minHeight:l?80:100},placeholder:t,onChange:t=>{e[pe]({...e[ye],[$]:t.target.value})},right:r&&this.renderMessageWarning({shouldShowLengthWarning:a,shouldShowLinkWarning:s}),isRightLastElementOfInput:!0,onSubmit:async()=>{await super[z]()}})}renderSinglePlayerOptions(){if((0,v.isSpaceStore)(this[ke][he]))return null;const{[be]:e,[Se]:t}=this[we],{[K]:i}=S.default[ye];if(!i)return null;if(!(0,y.$)(this[ve]))return null;const{[ce]:o}=t[ye];return!t[ye][W]&&o.some((e=>h.OA(e)))?n()(I.Z,{blockStore:this[ke][he],[fe]:i,[be]:e}):null}renderActions(){return n()("div",{style:{[V]:U,[O]:"row-reverse",[N]:R,[J]:L,width:"100%"},onClick:this.resetFocusOnClickEmpty},void 0,n()("div",{style:{[V]:U,[O]:"row-reverse",[N]:"flex-end",gap:8}},void 0,this[E]({isLarge:!1}),n()(Z.Z,{style:{minWidth:c.UF,[N]:L},isLarge:!1,isLightGray:!0,onClick:()=>{var e,t;null===(e=(t=this[ke]).onCancel)||void 0===e||e.call(t)}},void 0,n()(u.FormattedMessage,{[D]:"Cancel",id:"ContextualInvite.permissions_invites.button.cancel"}))),n()(F.Z,{style:{[j]:0,[q]:0},disableHover:!0}))}renderMessageWarning(e){const{[Se]:t}=this[we],{shouldShowLengthWarning:i,shouldShowLinkWarning:o}=e;return n()("span",{style:{fontSize:12,color:this.theme[B],position:"absolute",bottom:8,left:12}},void 0,i&&n()(u.FormattedMessage,{[D]:"{characters} / {maxCharacters} characters",id:"ContextualInvite.permissions_invites.messageLengthWarning",values:{characters:t[ye][$][ue],maxCharacters:c.vr}}),i&&o&&" · ",o&&n()(u.FormattedMessage,{[D]:"Links will be omitted from your message",id:"ContextualInvite.permissions_invites.removeLinkWarning"}))}getEmailMessage(){const{currentUserStore:e,[K]:t}=S.default[ye],{[Se]:i}=this[we],{intl:o}=this[ke],{[ce]:n}=i[ye],a=!i[ye][W]&&s().every(n,h.OA);if(!t)return o[A](c.VX.default);const r=null==e?void 0:e.getDisplayName(o),l=(0,f.rn)(this[ve],t);if(!r||!l)return o[A](c.VX.default);return(0,c.jm)({includeOptional:!1,isGuest:a,emailProps:{userName:r,pageName:this.blockTitle[ye],spaceName:l},intl:this[ke].intl})}[X](){const{WindowSizeStore:e}=this[ve];return{[V]:U,[J]:L,minHeight:52,[H]:10,[G]:10,[j]:e[x](14),[q]:e[_](14),[O]:"column",gap:10}}}const Pe=(0,u.injectIntl)(Ze)},40732:(e,t,i)=>{i.r(t),i.d(t,{isLimitReachedStage:()=>dt,isConfirmPurchaseStage:()=>ct,isCancellationStage:()=>ut,default:()=>pt});var o=i(77094),n=i.n(o),a=i(67294),s=i(13991),r=i(480),l=i(81954),d=i(24405),c=i(41892),u=i(8848),m=i(94919),p=i(7057),g=i(3909),h=i(5366),v=i(3791),f=i(896),y=i(47425),b=i(97880),S=i(82990),w=i(47307),M=i(64964),k=i(21325),C=i(99498),Z=i(65544),T=i(93678),P=i(52533),I=i(33665),F=i(38755),_=i(80554),x=i(94191),A=i(31925),B=i(21115),D=i(8323),E=i(79315),L=i(78291),R=i(8711),N=i(30751),O=i(42922),U=i(11066),V=i(68785),W=i(92660),K=i(42402);const z=i(85).yzD,G=i(85).ChN,H=i(85).lWm,q=i(85).UPJ,j=i(85).H1U,Q=i(85).rOg,J=i(85).OM8,$=i(85).tLG,Y=i(85).wuN,X=i(85).EMU,ee=i(85).sM5,te=i(85).nLZ,ie=i(85).g7N,oe=i(85).NF1,ne=i(85).jkI,ae=i(85).MLn,se=i(85).Exd,re=i(85).LlE,le=(i(85).NOb,i(85).Afo,i(85).Ddu),de=i(85).Scd,ce=(i(85).ZXp,i(85).N7X,i(85).JUg),ue=i(85).DQg,me=(i(85).Cui,i(85).f57),pe=(i(85).qVP,i(85).SuY),ge=i(85).tpU,he=i(85).n8$,ve=i(85)._Ny,fe=i(85).g6p,ye=i(85).dz$,be=i(85).jp1,Se=i(85).Gpy,we=i(85).FUb,Me=i(85).AL1,ke=i(85).psj,Ce=i(85).L7r,Ze=i(85).Zij,Te=i(85).nAl,Pe=(i(85).lj,i(85).t74),Ie=i(85).TI9,Fe=i(85).Wqi,_e=i(85).ASm,xe=i(85).irb,Ae=i(85).XB3,Be=i(85).EKt,De=i(85).wgE,Ee=i(85).qJ8,Le=i(85).QmD,Re=i(85).tBn,Ne=i(85).D7I,Oe=(i(85).TBW,i(85).nx5),Ue=i(85).FOQ,Ve=i(85).eam,We=i(85).gdQ,Ke=i(85).PG2,ze=i(85).v8Q,Ge=i(85).MQR,He=i(85).BQ6,qe=i(85).sV,je=i(85).sI1,Qe=i(85).h0C;function Je(e){window.__c={n:"LimitReachedStage"};const{[Ve]:t,canPurchaseAddOn:i,[Qe]:o}=e,s=lt(),l=(0,r.O7)();return i&&o?n()($e,{[Ve]:t,canPurchaseAddOn:i}):a[Ne](a[Re],null,g.Z.info(s.icon),n()(Ye,{[Ve]:t,canPurchaseAddOn:i}),n()(Xe,{[Ve]:t,canPurchaseAddOn:i}),n()(O.Z,{isLarge:!0,[He]:s[Ue],[Ke]:async()=>i?o?C.showConfirmPurchaseStage(void 0):async function(e,t){await T.y(e,{from:"plans_page",for:t,[Ve]:"ai"}),C[qe]()}(l,"free"):C[qe]()},void 0,n()(h.FormattedMessage,i?{id:"addOnUpgradeModal.purchase.button.label",[Oe]:"Purchase"}:{id:"addOnUpgradeModal.gotIt.button.label",[Oe]:"Got it"})))}function $e(e){var t,i,o;window.__c={n:"ConfirmPurchase"};const{[Ve]:s,canPurchaseAddOn:d}=e,u=(0,r.O7)(),m=lt(),p=(0,l.VK)((()=>(0,D.getSubscriptionTier)()),[]),g=(0,l.VK)((()=>L.default[Le].data),[]),v=(0,l.VK)((()=>R.Z[Le].open?R.Z[Le].coupon:null),[]),f=(0,l.VK)((()=>E.default[Le][Ee]),[]);if(!f)return null;const S=(0,P.S$)({[De]:u})&&(0,y.QR)(p);if(u.device.isMobileNative&&!S)return null;let M;if(!g||"unsubscribed_admin"!==g.type&&"subscribed_admin"!==g.type||(M=g),M&&"revenueCat"===(null===(t=M[Be])||void 0===t?void 0:t.activeSubscriptionPlatform)){const e=n()(h.FormattedMessage,{id:"addOnUpgradeModal.errorMessage.switchPlanFromInAppPurchase",[Oe]:Ae});return w[xe](e),null}const k=n()(h.FormattedMessage,{id:"addOnUpgradeModal.errorMessage.notAdmin",[Oe]:"You don't have permissions to upgrade this workspace to an add-on. If you think this is a mistake please contact your administrator."});if(!(0,B.isAdmin)(g))return w[xe](k),null;const C=null===(i=M)||void 0===i||null===(o=i[Be])||void 0===o?void 0:o.stripe;if(!C)return null;const Z=C[Qe]?C[_e]:"month",T=v?function(e){switch(e){case"ai_fifty_percent":return n()(h.FormattedMessage,{id:"addOnUpgradeModal.coupon.fiftyPercent.label",[Oe]:"50% off discount"});default:(0,b.unreachable)(e)}}(v):"year"===Z?n()(h.FormattedMessage,{id:"addOnUpgradeModal.coupon.twentyPercent.label",[Oe]:"20% off discount"}):null;return a[Ne](a[Re],null,n()("img",{src:c.Z.images.pricing.aiLogoPng,[He]:m.aiLogo}),n()(Ye,{[Ve]:s,canPurchaseAddOn:d}),n()(et,{[Ve]:s}),T?function(e){window.__c={n:"DiscountBadge"};const t=lt();return n()(U.Z,{[He]:{...t[Ie]},disabled:!0},void 0,n()("div",{[He]:{...t[Pe]}},void 0,e))}(T):null,n()(tt,{[Ve]:s,[_e]:Z,stripeData:C,[Fe]:f}))}function Ye(e){window.__c={n:"Title"};const{[Ve]:t,canPurchaseAddOn:i}=e,o=lt();let a;switch(t){case"ai":a=n()(h.FormattedMessage,i?{id:"addOnUpgrade.title.admin",[Oe]:"Get more Notion AI"}:{id:"addOnUpgrade.title.nonAdmin",[Oe]:Te});break;default:(0,b.unreachable)(t)}return n()("h3",{[He]:o[Ze]},void 0,a)}function Xe(e){window.__c={n:Ce};const{[Ve]:t,canPurchaseAddOn:i}=e;let o;const a=lt();switch(t){case"ai":o=n()(h.FormattedMessage,i?{id:"addOnUpgrade.description.admins",[Oe]:"Your one-time promotion has ran out. To continue using AI features, purchase more AI uses for your workspace"}:{id:"addOnUpgrade.description.nonAdmins",[Oe]:"Your workspace’s one-time Notion AI promotion is over. Contact a workspace admin to purchase unlimited AI for your team to use."});break;default:(0,b.unreachable)(t)}return n()("p",{[He]:a[ke]},void 0,n()("div",{[He]:a[Me]},void 0,o))}function et(e){window.__c={n:"ConfirmationDescription"};const{[Ve]:t}=e;let i;const o=(0,r.O7)(),a=lt(),s=(0,l.VK)((()=>E.default[Le][Ee]),[]);if(!s)return null;const d=(0,l.VK)((()=>(0,F.rn)(o,s)),[o,s]);switch(t){case"ai":i=n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.description.admins",[Oe]:we,[Se]:{spaceName:d}});break;default:(0,b.unreachable)(t)}return n()("p",{[He]:a[ke]},void 0,n()("div",{[He]:a[Me]},void 0,i))}function tt(e){window.__c={n:"ConfirmationBillingSummary"};const{[Ve]:t,[_e]:i,stripeData:o,[Fe]:s}=e,d=lt(),c=(0,r.O7)(),u=(0,l.VK)((()=>(0,B.getVisibleMembersCountFromSubscriptionData)()),[]),p=o[be]??"USD",{tax:g,coupon:f}=(0,l.VK)((()=>({tax:R.Z[Le].open?R.Z[Le].tax:0,coupon:R.Z[Le].open?R.Z[Le].coupon:void 0})),[]),y=(0,l.VK)((()=>N.Z.getPrice(c,(e=>e.product===t&&e[ye]===i&&e[be]===p))),[t,c,i,p]),b=(0,l.VK)((()=>N.Z.getPrice(c,(e=>e.product===t&&"month"===e[ye]&&e[be]===p))),[t,p,c]);if((0,a.useEffect)((()=>{!async function(){if(y.result&&o&&o.address){const e=y.result[ve]({quantity:u,coupon:f})[fe];await Z.nf({[De]:c,priceForTaxCalculation:e,address:o.address,customerId:o.customerId,vatId:o.vatId})}}()}),[c,o,y,u,f]),!y.isLoaded||!b.isLoaded)return n()(V.Z,{});if(!y.result||!b.result)return null;const S=y.result,w=S[ve]({quantity:u,coupon:f}).withAddedAmount(g),T=b.result,P=T.getMonthlyUnitCost();let F=T.getMonthlyCost({quantity:u});"year"===i&&(F=F[he](12));const{addOnCostItem:A,addOnCostItemWithMembers:D}=(0,_.OL)(t,u,i,n()(m.W,{cost:P[ge](),trailingZeroDisplay:pe}));return a[Ne](a[Re],null,n()("p",{[He]:d.monthlyCostText},void 0,n()("h3",{[He]:d[Ze]},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.monthlyCost.title",[Oe]:"Add on"})),n()("div",{[He]:d.costSectionTitle},void 0,n()("div",{},void 0,A),n()("div",{[He]:d.rightAlign},void 0,n()(m.W,{cost:F[ge](),trailingZeroDisplay:me}))),n()("div",{[He]:d.costSection},void 0,D),n()(it,{cost:S[ve]({quantity:u}),fullCost:F}),n()(ot,{price:S,coupon:f,quantity:u}),n()("div",{[He]:d.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.taxes",[Oe]:"Taxes:"}),n()("div",{[He]:d.rightAlign},void 0,n()(m.W,{cost:{[fe]:g,[be]:p},trailingZeroDisplay:me}))),n()("div",{[He]:d.totalCostSection},void 0,n()("h3",{[He]:d[Ze]},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.total",[Oe]:"Total"})),n()("div",{[He]:d.rightAlign},void 0,n()("h3",{[He]:d[Ze]},void 0,n()(m.W,{cost:w[ge](),trailingZeroDisplay:me})))),n()("div",{[He]:d.perMonth},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.interval.label",[Oe]:"{interval, select, month {per month} other {per year}}",[Se]:{[_e]:i}}))),n()(O.Z,{isLarge:!0,[He]:d[Ue],[Ke]:async()=>{const e=(0,v.aG)({[Ve]:t,addOnTier:"base",addOnBillingInterval:i,addOnPricingModel:ue,addOnPricingVariant:"retail",[be]:S[be],isCancellation:!1});await k[ce]({[De]:c,[Fe]:s,from:"add_on_upgrade_modal",addOns:e,inAppOffer:f}),C[qe]();const o=x.mV({type:"purchaseAddOn",[Ve]:t});o&&M.oV(o)}},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.confirmPurchase.button.label",[Oe]:"Confirm purchase"})),n()("p",{[He]:d.termsOfService},void 0,n()("div",{[He]:d[Me]},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.prorated.description",[Oe]:"Performance subject to <fairUsePolicies>fair use policies</fairUsePolicies>.{br}By clicking Confirm Purchase you agree to the <terms>Notion AI Supplementary Terms</terms>.",[Se]:{br:n()("br",{}),fairUsePolicies:e=>n()(K.Z,{href:(0,I.getLocalizedUrl)("ai.fairUsePolicies")},void 0,e),terms:e=>n()(K.Z,{href:(0,I.getLocalizedUrl)("ai.terms")},void 0,e)}}))))}function it(e){window.__c={n:"AnnualDiscount"};const t=lt(),{cost:i,fullCost:o}=e;if(i[fe]===o[fe])return null;const s=o.minus(i),r=Math.floor(s[fe]/o[fe]*100);return a[Ne](a[Re],null,n()("div",{[He]:t.costSectionTitle},void 0,n()("div",{},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.annual.dynamicDiscountMessage",[Oe]:"<bold>Annual discount ({discountPercent}%)</bold>",[Se]:{bold:e=>n()("b",{},void 0,e),discountPercent:r}})),n()("div",{[He]:t.greenRightAlign},void 0,n()(m.W,{cost:s[he](-1)[ge](),trailingZeroDisplay:me,currencySign:ue}))),n()("div",{[He]:t.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.annualPlanMessage",[Oe]:"for being on the annual plan"})))}function ot(e){window.__c={n:"CouponDiscount"};const t=lt(),{price:i,coupon:o,quantity:s}=e;if(!(0,f.pp)(o))return null;const r=i.getDiscountPerBillingInterval({quantity:s,coupon:o})[he](-1);return a[Ne](a[Re],null,n()("div",{[He]:t.costSectionTitle},void 0,n()("div",{},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount",[Oe]:"<bold>Special discount ({percentage})</bold>",[Se]:{bold:e=>n()("b",{},void 0,e),percentage:(0,A.ov)(o)}})),n()("div",{[He]:t.greenRightAlign},void 0,n()(m.W,{cost:r,trailingZeroDisplay:me,currencySign:ue}))),n()("div",{[He]:t.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.threeMonthsMessage",[Oe]:"for the next 3 months"})))}function nt(e){window.__c={n:"CancellationStageCTA"};const{data:t,[Ve]:i}=e,o=lt(),s=(0,r.O7)(),l=function(e,t){var i;return null===(i=e.addOns.find((e=>e.feature===t)))||void 0===i?void 0:i[ye]}(t,i);return l?a[Ne](a[Re],null,n()("div",{[He]:o.buttonWithTopPadding},void 0,n()(U.Z,{[He]:o.redButton,[We]:{[de]:u.ZP[le](.8)},[Ke]:async()=>{const e=E.default[Le][Ee],{data:t}=L.default[Le];let o;var a;"unsubscribed_admin"!==(null==t?void 0:t.type)&&"subscribed_admin"!==(null==t?void 0:t.type)||(o=null===(a=t[Be])||void 0===a?void 0:a.stripe[be]);if(!e||!o)return w[xe](n()(h.FormattedMessage,{id:"addOnUpgradeModal.cancellationStage.errorMessage",[Oe]:"Unable to cancel add-on subscription. Please try again later."}));const r=(0,v.aG)({[Ve]:i,addOnTier:"base",addOnBillingInterval:l,addOnPricingModel:ue,addOnPricingVariant:"retail",[be]:o,isCancellation:!0});await k[ce]({[De]:s,[Fe]:e,from:"add_on_upgrade_modal",addOns:r}),C[qe]()}},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.midterm.yesButton.label",[Oe]:"Schedule removal"}))),n()("div",{[He]:o.buttonWithTopPadding},void 0,n()(U.Z,{[He]:o.noButton,[Ke]:()=>C[qe]()},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.noButton.label",[Oe]:"Cancel"})))):null}function at(e){window.__c={n:"CancellationStageDescription"};const{data:t}=e,i=lt();let o,a=!1;if("subscribed_admin"===t.type||"unsubscribed_admin"===t.type){var r;const e=null===(r=t[Be])||void 0===r?void 0:r.stripe;o=null==e?void 0:e.periodEnd,a=Boolean((null==e?void 0:e.schedule)||(null==e?void 0:e.willCancelAt))}return o?n()("p",{[He]:i[ke]},void 0,n()("div",{[He]:i[Me]},void 0,n()(h.FormattedMessage,a?{id:"addOnUpgradeModal.midterm.cancellationWithPendingChanges.description",[Oe]:"You can continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. This change will cancel your previous pending changes. You can resubscribe anytime.",[Se]:{periodEnd:(0,p.Yx)(o,"long",s.SP),bold:e=>n()("b",{},void 0,e)}}:{id:"addOnUpgradeModal.midterm.cancellation.description",[Oe]:"Thank you for your input! You can continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. You can resubscribe anytime.",[Se]:{periodEnd:(0,p.Yx)(o,"long",s.SP),bold:e=>n()("b",{},void 0,e)}}))):null}function st(e){window.__c={n:"CancellationStage"};const{[Ve]:t,canPurchaseAddOn:i,data:o}=e,s=lt();if(!i)return null;let r;switch(t){case"ai":r=n()(h.FormattedMessage,{id:"addOnUpgradeModal.midterm.cancellation.title",[Oe]:"Remove AI at the end of your billing period?"});break;default:(0,b.unreachable)(t)}return a[Ne](a[Re],null,n()("h3",{[He]:s.cancellationTitle},void 0,r),n()(at,{data:o}),n()(nt,{data:o,[Ve]:t}))}function rt(){window.__c={n:"MobileMessage"};const e=lt(),t=(0,r.O7)();let i=n()(h.FormattedMessage,{id:"addOnUpgradeModal.mobileMessage.button.label",[Oe]:"Use the web or desktop app to add Notion AI to your plan and go unlimited."});return(t.device.isIOS||t.device.isIpad)&&(i=n()(h.FormattedMessage,{id:"addOnUpgradeModal.mobileMessage.ios.button.label",[Oe]:"You are out of free AI."})),a[Ne](a[Re],null,g.Z.info(e.icon),n()("h3",{[He]:e[Ze]},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.title.nonAdmin",[Oe]:Te})),n()("p",{[He]:e[ke]},void 0,n()("div",{[He]:e[Me]},void 0,i)),n()(O.Z,{isLarge:!0,[He]:e[Ue],[Ke]:()=>C[qe]()},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.gotIt.button.label",[Oe]:"Got it"})))}function lt(){return(0,d.yK)((e=>({modal:{maxWidth:350,[re]:24,[se]:14,[ae]:ne},largeModal:{maxWidth:420,[re]:24,[se]:14,[ae]:ne},mobileModal:{[re]:24,[se]:14,[ae]:ne},cancellationModal:{maxWidth:350,[re]:"24px 16px 12px",[se]:14,[ae]:ne},innerModalPadding:{[re]:"0px 8px"},cancellationInnerModalPadding:{[re]:0},[je]:{[oe]:10},[Ze]:{margin:0,[ie]:0},cancellationTitle:{margin:0,[ie]:0,[te]:14},monthlyCostText:{[ae]:"left",paddingBottom:16},costSection:{margin:0,[ie]:8,[ee]:X,color:e[Y]},costSectionTitle:{[ee]:X,color:e[Y]},totalCostSection:{[ee]:X},paymentMethodSection:{[ie]:8,[te]:8,[ee]:X},rightAlign:{position:$,right:24},greenRightAlign:{position:$,right:24,color:e.invoiceGreen},[ke]:{[J]:1.4,[te]:4,[ie]:12},termsOfService:{[se]:"small",[te]:8},[Me]:{margin:0,color:e[Y],[ie]:8},icon:{[ee]:"inline",height:24,fill:e.lightIconColor,[te]:8,[ie]:8},aiLogo:{height:60},[Ue]:{width:"100%"},buttonWithTopPadding:{paddingTop:12},noButton:{width:"100%",height:24,[ee]:Q,[j]:ne,[q]:ne},[Ge]:{position:$,top:"10px",right:"10px",[de]:e[H],[oe]:"100%",width:20,height:20,[ee]:X,[j]:ne,[q]:ne,zIndex:10},redButton:{width:"100%",color:u.ZP.white,[de]:e.redBadgeBackground,[ee]:Q,[j]:ne,[q]:ne,height:32,[oe]:3,[J]:1.2,paddingLeft:12,paddingRight:12,[G]:S.Z[G].medium},closeIcon:{width:14,fill:e[Y]},[ze]:{[de]:e[z]},perMonth:{position:$,right:24,[ee]:X,color:e[Y],[te]:-4},[Ie]:{[ee]:Q,[j]:ne,[oe]:3},[Pe]:{[re]:"2px 6px",[oe]:3,color:e.regularTextColor,[de]:e.accentColors.gray[50],[G]:400,[se]:14,[J]:"16px",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[])}function dt(){return mt("limit_reached")}function ct(){return mt("confirm_purchase")}function ut(){return mt("cancel_plan")}function mt(e){const t=R.Z[Le];if(t.open)return t.stage===e}const pt=function(e){window.__c={n:"AddOnUpgradeModal"};const{data:t}=e,i="ai",o=(0,B.isAdmin)(t),a=lt(),s=B[Qe](t),l=(0,r.O7)().device.isMobile;return n()(W.Z,l?{[je]:a[je],requireOnline:!0,modalStore:R.Z,onDismiss:()=>C[qe](),render:()=>n()("div",{[He]:a.mobileModal},void 0,n()("div",{[He]:a.innerModalPadding},void 0,n()(rt,{})))}:{[je]:a[je],requireOnline:!0,modalStore:R.Z,onDismiss:()=>C[qe](),render:()=>n()("div",{[He]:ct()||dt()&&s&&o?a.largeModal:ut()?a.cancellationModal:a.modal},void 0,n()("div",{[He]:ut()?a.cancellationInnerModalPadding:a.innerModalPadding},void 0,n()(U.Z,{[Ke]:()=>{C[qe]()},[He]:a[Ge],[We]:a[ze]},void 0,g.Z.closeSmall(a.closeIcon)),dt()&&n()(Je,{[Ve]:i,canPurchaseAddOn:o,[Qe]:s}),ct()&&n()($e,{[Ve]:i,canPurchaseAddOn:o}),ut()&&n()(st,{[Ve]:i,canPurchaseAddOn:o,data:t})))})}},62889:(e,t,i)=>{i.r(t),i.d(t,{CreateTeamFromPageConfirmModal:()=>D});var o=i(77094),n=i.n(o),a=(i(67294),i(480)),s=i(24405),r=i(3909),l=i(5366),d=i(82990),c=i(57688),u=i(72684),m=i(42922),p=i(63296),g=i(92660),h=i(29551),v=i(51923);const f=i(85).$bT,y=i(85).P3s,b=i(85).PG2,S=i(85).wgE,w=i(85).veP,M=i(85).QmD,k=i(85).BQ6,C=i(85).nx5,Z=i(85).rps,T=i(85).Wp_,P=i(85).UPJ,I=i(85).H1U,F=i(85).MQR,_=i(85).jkI,x=i(85).zDZ,A=i(85).g7N,B=i(85).Wsu;function D(){window.__c={n:"CreateTeamFromPageConfirmModal"};const e=(0,a.O7)(),t=(0,l.useIntl)(),i=(0,s.yK)((e=>({modal:{maxWidth:350,padding:24},loopIcon:{height:28,width:28,fill:e[B]},infoIcon:{height:16,width:16,fill:e.lightIconColor,marginRight:4},title:{marginTop:16,[A]:12,color:e.regularTextColor,fontWeight:d.Z.fontWeight.semibold,fontSize:18},[x]:{color:e[B],textAlign:_,fontSize:14,[A]:18},confirmButton:{width:"100%",[A]:8},[F]:{width:"100%",display:"flex",[I]:_,[P]:_,[A]:14}})),[]);return n()(g.Z,{onDismiss:()=>{u.Z[T]({open:!1})},render:()=>n()("div",{[k]:i.modal},void 0,n()(h.gq,{[f]:Z,[P]:_,[I]:_},void 0,r.Z.loop(i.loopIcon),n()("div",{[k]:i.title},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.title",[C]:"Turn into teamspace?"})),n()("div",{[k]:i[x]},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.description",[C]:"This will move this page into a newly created teamspace along with people who already have access to this page."})),n()(m.Z,{isLarge:!0,[k]:i.confirmButton,[b]:()=>{if(u.Z[M].open){const{[w]:i,flowId:o}=u.Z[M];c.createTeamFromPage({[S]:e,intl:t,page:i,flowId:o}),u.Z[T]({open:!1})}}},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.confirmButton",[C]:"Create teamspace"})),n()(p.Z,{isLarge:!0,[k]:i[F],[b]:()=>u.Z[T]({open:!1})},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.cancelButton",[C]:"Cancel"})),n()(v.Z,{message:n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.learnMore",[C]:"Learn more about teamspaces"}),[y]:"teams_learn_more_turn_page_into_team",helpCenterLocation:"bestPractices"}))),requireOnline:!0,modalStore:u.Z})}},89350:(e,t,i)=>{i.r(t),i.d(t,{SidebarCreateTeamModal:()=>xt});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(480),d=i(53150),c=i(81954),u=i(24405),m=i(41892),p=i(3909),g=i(97880),h=i(82990),v=i(5366),f=i(50906),y=i(57688),b=i(33929),S=i(38755),w=i(23537),M=i(79315),k=i(39098),C=i(19522),Z=i(33052),T=i(64921),P=i(74194),I=i(3386),F=i(68785),_=i(53953),x=i(58032),A=i(64369),B=i(45653),D=i(13490),E=i(8323),L=i(78122),R=i(42922),N=i(51923);const O=i(85).zDZ,U=i(85).nx5,V=i(85).rOg,W=i(85).P3s,K=i(85).FTQ,z=i(85).Wqi,G=i(85).wgE,H=i(85).GiO,q=i(85).Y7T,j=i(85).qJ8;function Q(){window.__c={n:"SidebarCreateTeamModalFooter"};const e=(0,l.O7)(),{[j]:t,[q]:i}=(0,c.VK)((()=>({[j]:M.default.state[j],[q]:M.default.state[H]})),[]),o=(0,c.VK)((()=>C.Z.state),[]),a=(0,w.OX)(),d=function(){const e=(0,c.VK)((()=>E.isMultiplayerEnabled()&&!C.Z.state.isDefault),[]),t=C.F.Team,i=C.F.Members;return e?[t,i]:[t]}(),{screen:m,pageNumber:p,teamId:h}=o,f=""===o.name,b=(0,u.yK)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},previous:{fontSize:14,color:e.mediumTextColor,cursor:"pointer"},learnMoreLink:{overflow:"hidden"}})),[]),S=(0,r.useCallback)(((i,o)=>{t&&function(e){let{pageOrder:t,pageNumber:i,teamId:o,[j]:n,[G]:a,from:s}=e;const r=i+1;if(r<=t.length)C.Z.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(o){const e=k.zX.createChildStore(n,{table:"team",id:o,spaceId:n.id});y.openTeamHome({[G]:a,teamStore:e,shouldScroll:!0}),y.closeTeamCreateModal({[G]:a,from:s,teamStore:e})}}({pageOrder:d,pageNumber:p,teamId:o||h,[j]:t,[G]:e,from:i})}),[t,e,p,d,h]),Z=s().debounce((async()=>{if(!t||!i)return;let n=h;switch(m){case C.F.Team:n=await async function(e){var t;let{[z]:i,[G]:o,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:a}=e;const{name:s,[O]:r,icon:l,flowId:d,accessLevel:c,isDefault:u,persona:m}=a;if(!(await(0,L.Xg)({[G]:o,[z]:i,teamName:s})))return;let p;C.Z.update((e=>({...e,loading:!0}))),p=n?await y.enableTeams({[G]:o,name:s,[O]:r,icon:l,flowId:d,trackCreateTeamComplete:!0,persona:m}):await y.createTeam({[G]:o,name:s,[O]:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0,createTemplates:!0,persona:m});if(!p)return;const g=null===(t=p)||void 0===t?void 0:t.id;return C.Z.update((e=>({...e,teamId:g}))),g}({[z]:t,[G]:e,shouldShowZeroTeamsExperience:a,sidebarCreateTeamModalStoreState:o});break;case C.F.Members:break;default:(0,g.unreachable)(m)}n?S("success",n):C.Z.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),T=(0,r.useCallback)(Z,[Z]);return n()("div",{style:b.box},void 0,n()(N.Z,{[K]:b.learnMoreLink,helpCenterLocation:"bestPractices",[W]:"teams_learn_more_sidebar_create_team_modal"}),n()("div",{style:{display:V}},void 0,n()(R.Z,{isLarge:!0,onClick:T,disabled:f,style:b.button},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.footer.createTeam",[U]:"Create teamspace"}))))}var J=i(97464),$=i.n(J),Y=i(87279),X=i(17311),ee=i(31194),te=i(52275),ie=i(31945),oe=i(61519),ne=i(78140),ae=i(32163),se=i(72495),re=i(38294);const le=i(85).j7K,de=i(85).tBn,ce=i(85).rpY,ue=i(85).y79,me=i(85).D7I,pe=i(85).NF1,ge=i(85).nx5,he=i(85).lUP,ve=i(85).Zij,fe=i(85).Uql,ye={[fe]:{[ve]:re.J[fe],[he]:p.Z[fe]},sales:{[ve]:re.J.sales,[he]:p.Z.sales},product:{[ve]:re.J.product,[he]:p.Z.product},eng:{[ve]:re.J.eng,[he]:p.Z.engineering},other:{[ve]:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.generalTitle",[ge]:"General"}),[he]:p.Z.settingsMembers},no_template:{[ve]:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.noneTitle",[ge]:"Blank"}),[he]:p.Z.noTemplate}};const be=function(){window.__c={n:"SidebarCreateTeamModalPersonaSelection"};const e=(0,l.O7)(),t=(0,c.VK)((()=>C.Z.state.persona),[]),{teamId:i,flowId:o}=(0,c.VK)((()=>C.Z.state),[]),a=(0,u.yK)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},button:{border:`1px solid ${e.regularDividerColor}`,[pe]:X.Z[pe],margin:0,width:"100%"},[he]:{width:16,height:16}})),[]);return n()(ie.ZP,{popupType:ie.Z4.Popup,renderOrigin:e=>{const i=ye[t];return i?r[me](te.Z,$()({},e,{buttonStyle:a.button,[ve]:i[ve],[he]:i[he]?i[he](a[he]):void 0,right:p.Z.chevronDown(a.chevron),focused:!1})):null},placementToOrigin:ee.Iw.Bottom,alignmentToOrigin:ee.lU.Start,sameWidthAsOrigin:!0,[ce]:t=>n()(ne.Z,{menuType:Y.og.Popup},void 0,n()(ae.Z,{type:ae.i[ue],[le]:void 0,sections:[{key:"functions",[ce]:e=>r[me](se.Z,e),items:Object.entries(ye).map((s=>{let[l,d]=s;const c=l,u=d[he]?d[he](a[he]):void 0;return{key:c,[ce]:e=>r[me](r[de],null,"no_template"===c?r[me](r[de],null,n()(oe.Z,{size:12}),r[me](te.Z,$()({[ve]:d[ve],[he]:u},e))):r[me](te.Z,$()({[ve]:d[ve],[he]:u},e))),action:()=>{C.Z.update((e=>({...e,persona:c}))),i&&f.trackSelectFunctionForNewTeamClick(e,{teamId:i,flowId:o,persona:c}),t.close()}}})).filter(g.isDefined)}]}))})};var Se=i(65426),we=i(30688),Me=i(93686);const ke=i(85).Rbl,Ce=i(85).$bT,Ze=i(85).gdQ,Te=i(85).PG2,Pe=i(85).PdN,Ie=i(85).yzD,Fe=i(85).xVP,_e=i(85).lWm,xe=i(85).NF1,Ae=i(85).UPJ,Be=i(85).H1U,De=i(85).SPm,Ee=i(85).jkI,Le=i(85).Scd,Re=i(85).K_F,Ne=i(85).wJk,Oe=i(85).Jy7,Ue=(i(85).ssR,i(85).cfL),Ve=i(85).RJH,We=i(85).EMU,Ke=i(85).wuN,ze=i(85).Joh,Ge=i(85).ESK,He=i(85).QNi,qe=i(85).u3H,je=i(85).qeQ,Qe=i(85).nLZ,Je=i(85).sM5,$e=i(85).L_E,Ye=i(85).qJ8,Xe=i(85)._MZ,et=i(85).OHs,tt=i(85).wgE,it=i(85).BQ6,ot=i(85).ChN,nt=i(85).tBn,at=i(85).D7I,st=i(85).Dd5,rt=i(85).cZW,lt=i(85).nm$,dt=i(85).Yzm,ct=i(85).zDZ,ut=i(85).L7r,mt=i(85).nx5,pt=i(85).gGi,gt=i(85).fBv,ht=i(85).Vgm,vt=i(85).z$9,ft={userSelect:vt,[ht]:vt,[gt]:"relative",padding:"22px 26px"},yt={createTeamContainer:{...ft,width:480},addMembersContainer:{...ft,width:500},full:{width:pt}},bt=(0,v.defineMessages)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",[mt]:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",[mt]:"Details about your teamspace"}});function St(){window.__c={n:"TeamDescriptionRow"};const[e,t]=(0,c.AF)(C.Z);return r[at](r[nt],null,n()(D.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",[mt]:ut})),n()(P.Z,{value:e[ct],[rt]:b.default[dt](bt.teamDescriptionPlaceholder),textarea:!0,[st]:i=>{t({...e,[ct]:i[lt].value})}}))}function wt(e){return n()("div",{id:e.titleAriaId,[it]:{fontSize:18,[ot]:h.Z[ot].semibold}},void 0,(()=>{switch(e.screen){case C.F.Team:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamTitle.label",[mt]:"Create a new teamspace"});case C.F.Members:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.membersTitle.label",[mt]:"Add people"});default:(0,g.unreachable)(e.screen)}})())}function Mt(e){window.__c={n:"ModalContent"};const t=(0,l.O7)(),[i]=(0,c.AF)(C.Z),o=(0,r.useCallback)(((e,i)=>{y.closeTeamCreateModal({[tt]:t,from:i,[et]:e})}),[t]),{screen:a}=i;switch(a){case C.F.Team:return n()(Zt,{titleAriaId:e.titleAriaId,[Xe]:e[Xe]});case C.F.Members:const t=i.teamId;return t?n()(It,{teamId:t,onCompleted:e=>{o(e,"success")},onCanceled:e=>{o(e,"dismiss_button")}}):null;default:(0,g.unreachable)(a)}}function kt(){window.__c={n:"TeamIconAndNameRow"};const[e,t]=(0,c.AF)(C.Z),i=(0,c.VK)((()=>M.default.state[Ye]),[]),o=(0,u.yK)((e=>({[$e]:{[Je]:"inline-flex",width:pt,verticalAlign:"middle"},icon:{marginRight:8,[Qe]:1}})),[]);if(!i)return null;const a=e.icon?{icon:e.icon,pointer:{table:"space",id:i.id}}:void 0;return r[at](r[nt],null,n()(D.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",[mt]:"Icon & name"})),n()("div",{[it]:o[$e]},void 0,n()(Me.p,{icon:a,size:26,[it]:o.icon,[st]:i=>{t({...e,icon:i})},[qe]:{recordTable:je,source:"team_creation"}}),n()(P.Z,{value:e.name,[rt]:b.default[dt](bt.teamNamePlaceholder),[st]:i=>{t({...e,name:i[lt].value})},preventSafariAutofill:!0})))}function Ct(e){window.__c={n:ut};const t=(0,u.yK)((()=>({})),[]);return n()(A.Z,{id:e[Xe],isMultiline:!0,isSmall:!0,isSecondaryColor:!0,[it]:t[ct]},void 0,(()=>{switch(e.screen){case C.F.Team:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamDescription.label",[mt]:"Teamspaces are where your team organizes pages, permissions, and members"});case C.F.Members:return null;default:(0,g.unreachable)(e.screen)}})())}function Zt(e){window.__c={n:"TeamScreen"};const[t]=(0,c.AF)(C.Z),i=(0,l.O7)();(0,r.useEffect)((()=>{if(t.open){const{from:e,flowId:o}=t;f.trackCreateTeamStart(i,{from:e,flowId:o})}}),[]);const o=(0,u.yK)((()=>({personaPickerDescription:{[Qe]:3},[He]:{maxWidth:300,whiteSpace:"pre-wrap"}})),[]);return n()("div",{[it]:yt.createTeamContainer},void 0,n()(wt,{titleAriaId:e.titleAriaId,screen:C.F.Team}),n()(Ct,{[Xe]:e[Xe],screen:C.F.Team}),n()("div",{[it]:yt.full},void 0,n()(kt,{}),n()(St,{}),n()(x.Z,{render:e=>r[at]("div",e,n()(D.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.optionalTemplateSelection.label",[mt]:"Templates"})),n()(be,{})),[ze]:()=>n()("div",{[it]:o[He]},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.optionalFunctionSelectionDescription.label",[mt]:"This will determine the default templates in your teamspace. You can always change them later."})),placement:x.Z[Ge].Left}),n()(Pt,{})),n()(Q,{}))}function Tt(){window.__c={n:"ScreenLoadingSpinner"};const e=(0,c.VK)((()=>C.Z.state.loading),[]),t=(0,u.yK)((e=>({spinner:{width:pt,height:pt,backgroundColor:e.modalUnderlayBackground,[gt]:"absolute",top:0,left:0}})),[]);return r[at](r[nt],null,e&&n()("div",{[it]:t.spinner},void 0,n()(F.Z,{[it]:{[gt]:"absolute",top:"50%",left:"50%"}})))}function Pt(){window.__c={n:"AccessLevelSection"};const e=(0,u.yK)((e=>({openAccessMessage:{fontSize:13,color:e[Ke],[Qe]:20,lineHeight:1.4,[Je]:We},[Ve]:{marginRight:8},openTeamIcon:{width:24,fill:e.mediumIconColor},teamAccessPopupContainer:{[Qe]:20}})),[]),[t,i]=(0,c.AF)(C.Z),o=(0,w.OX)(),a=(0,l.O7)(),s=(0,c.VK)((()=>{const e=M.default.state[Ye];return e?(0,S.rn)(a,e):"this workspace"}),[a]);return o?n()("div",{[it]:e.openAccessMessage},void 0,n()("div",{[it]:e[Ve]},void 0,p.Z.openTeam(e.openTeamIcon)),n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",[mt]:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:s}})):r[at](r[nt],null,n()(D.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",[mt]:"Permissions"})),n()(Se._,{currentAccessLevel:t.accessLevel,currentIsDefault:t[Ue],[st]:(e,o)=>{i(o?{...t,accessLevel:"open",[Ue]:o}:{...t,accessLevel:e,[Ue]:o})}}))}function It(e){window.__c={n:"MemberScreen"};const t=(0,l.O7)(),[,,i]=(0,c.AF)(C.Z),[,,o]=(0,c.AF)(void 0,Z.Z);(0,c.VK)((()=>{const{defaultInviteTargets:e,flowId:t}=i.state;o.setState({...o.state,flowId:t}),e&&o.setState({...o.state,isInviteTargetsEmpty:!1,inviteTargets:e})}),[i,o]);const a=(0,c.VK)((()=>M.default.state[Ye]),[]);if(!a)return null;const s=k.zX.createChildStore(a,{table:je,id:e.teamId,spaceId:a.id});return n()("div",{[it]:yt.full},void 0,n()("div",{[it]:yt.addMembersContainer},void 0,n()(we.Z,{store:s,[Oe]:o,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(s),y.openTeamHome({[tt]:t,[et]:s,shouldScroll:!0})},[Ne]:()=>{e.onCanceled(s)}})))}const Ft=[m.Z.images.avatars.avatar1Png,m.Z.images.avatars.avatar2Png,m.Z.images.avatars.avatar3Png];function _t(e){let{[Re]:t}=e;window.__c={n:"FirstTeamHeader"};const i=(0,u.yK)((e=>({[$e]:{borderTopLeftRadius:5,borderTopRightRadius:5,[Le]:e.inputBackground,boxShadow:e.inputBoxShadow},header:{[Je]:We,padding:14,[ot]:h.Z[ot].medium},avatarGroup:{[Je]:We,width:"100",marginLeft:4,alignSelf:Ee},avatar:{marginLeft:-4},[De]:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,[Je]:We,[Be]:Ee,[Ae]:Ee,[xe]:pt,[Le]:e[_e],width:20,height:20,padding:4},[Fe]:{[Le]:e[Ie]},[Pe]:{width:16,fill:e[Ke]}})),[]);return n()("div",{[it]:i[$e]},void 0,n()("div",{[it]:i.header},void 0,n()("div",{[it]:i.avatarGroup},void 0,Ft.map(((e,t)=>n()(B.Z,{avatarShouldShowShadow:!0,[it]:i.avatar,size:28,avatar:{avatarUrl:e}},t)))),n()(A.Z,{[it]:i[De],isMultiline:!0,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",[mt]:"Create your first teamspace to start using Notion with your teammates"})),n()(T.Z,{[Te]:t,[it]:i.closeButton,[Ze]:i[Fe]},void 0,p.Z.closeSmall(i[Pe]))))}function xt(){window.__c={n:"SidebarCreateTeamModal"};const e=(0,l.O7)(),[t,,]=(0,c.AF)(C.Z),i=(0,d.C)(),o=(0,d.C)(),a=(0,u.yK)((e=>({modal:{maxWidth:500,[xe]:5},closeButton:{[gt]:"absolute",top:14,right:14,zIndex:10,[Je]:We,[Be]:Ee,[Ae]:Ee,[xe]:pt,[Le]:e[_e],width:20,height:20},[Fe]:{[Le]:e[Ie]},[Pe]:{width:14,fill:e[Ke]},wrapper:{[Je]:We,[Be]:Ee,[Ae]:Ee,[Ce]:"column",userSelect:vt,[ht]:vt},[$e]:{[Je]:We,[Be]:Ee,[Ae]:Ee,[Ce]:"column",userSelect:vt,[ht]:vt}})),[]),m=(0,r.useCallback)((t=>{y.closeTeamCreateModal({[tt]:e,from:t})}),[e]),{open:g,loading:h,screen:v}=t,f=(0,w.OX)(),b=(0,r.useRef)(f);return(0,r.useEffect)((()=>{h||(b.current=f&&v===C.F.Team)}),[h,v,f]),g?n()(_.Z,{ariaLabelledBy:i,ariaDescribedBy:o,open:g,innerStyle:a.modal,[Ne]:()=>{m("modal")},render:()=>{const{device:t}=e;return n()("div",{[it]:{height:pt}},void 0,!t.isMobile&&(b.current?n()(_t,{[Re]:()=>{m("close_button")}}):n()(T.Z,{[Te]:()=>{m("close_button")},[it]:a.closeButton,[Ze]:a[Fe]},void 0,p.Z.closeSmall(a[Pe]))),n()("div",{[it]:a.wrapper},void 0,n()(I.Z,{capture:!0,onBackspace:s()[ke],onLeft:s()[ke],onRight:s()[ke],onSelectAll:s()[ke],onRedo:s()[ke],onUndo:s()[ke],onCut:s()[ke],onCopy:s()[ke],onPaste:s()[ke],onKeypress:s()[ke],onDelete:s()[ke],onTab:s()[ke]},void 0,n()(Mt,{titleAriaId:i,[Xe]:o}))),n()(Tt,{}))}}):null}},65426:(e,t,i)=>{i.d(t,{_:()=>R});var o=i(77094),n=i.n(o),a=i(97464),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(24405),u=i(3909),m=i(87279),p=i(98742),g=i(92350),h=i(4657),v=i(25464),f=i(31194),y=i(52275),b=i(31945),S=i(78140),w=i(32163),M=i(72495),k=i(58032);const C=i(85).j7K,Z=i(85).y79,T=i(85).QNi,P=i(85).rpY,I=i(85).Joh,F=i(85).ELX,_=i(85).pkR,x=i(85).D7I,A=i(85).Q9F,B=i(85).g4H,D=i(85).Zij,E=i(85).dLQ,L=i(85).AlG;function R(e){let{currentAccessLevel:t,currentIsDefault:i=!1,onChange:o,teamStore:a,disabledWithRightChevron:R=!1,style:N}=e;window.__c={n:"TeamAccessLevelButtonPopup"};const{device:O}=(0,l.O7)(),U=(0,g.ql)(a),V=(0,c.yK)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},[L]:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...N},selectedCheckmark:{width:O[E]?16:14},icon:{alignSelf:"center",marginTop:0}})),[O[E],N]),W=(0,d.VK)((()=>(null==a?void 0:a.isDefault())??i),[a,i]),K=W?"default":t,z=(0,h.U)({teamStore:a,onChange:o,isDefault:W});return n()(b.ZP,{popupType:O[E]?b.Z4.SlideUp:b.Z4.Popup,renderOrigin:e=>{const t=z.find((e=>e.key===K));if(!t)return null;const i=t.disableAllOptionsTooltip,o=R||Boolean(i)||Boolean(a)&&!U;return n()(k.Z,{placement:v.u.Bottom,alignment:v.v.Start,disableTooltip:!i||!U,[I]:()=>i,style:{width:350},textWrap:!0,[P]:i=>r[x](y.Z,s()({},(0,p.Z)(e,i),{[D]:t[D],[B]:t[B],icon:t.icon({fill:t.iconColor}),desktopIconStyle:V.icon,[_]:o,right:R?u.Z[A](V.chevron):o?void 0:u.Z.chevronDown(V.chevron),focused:!1,shouldWrapCaption:!0,[F]:V[L]}))})},placementToOrigin:f.Iw.Bottom,alignmentToOrigin:f.lU.Start,sameWidthAsOrigin:!0,[P]:e=>{const t=[{key:"access levels",[P]:e=>r[x](M.Z,s()({},e,{topBorder:0!==e.index})),items:z.map((t=>{const i=t.key===K;return{key:t.key,[P]:e=>n()(k.Z,{placement:v.u.Top,disableTooltip:!t[T],[I]:()=>t[T],[P]:o=>r[x](y.Z,s()({},(0,p.Z)(e,o),{[D]:t[D],[B]:t[B],icon:t.icon({fill:t.iconColor}),desktopIconStyle:V.icon,right:i?n()("div",{style:V.selectedCheckmark},void 0,u.Z.check()):void 0,[_]:t[_],shouldWrapCaption:!0}))}),action:()=>{t.onSelect(),e.close()}}}))}];return n()(S.Z,{menuType:m.og.Popup},void 0,n()(w.Z,{type:w.i[Z],[C]:void 0,sections:t}))}})}},67110:(e,t,i)=>{i.r(t),i.d(t,{default:()=>de});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),l=i(24405),d=i(33728),c=i(59054),u=i(5366),m=i(21325),p=i(4708),g=i(87279),h=i(75472),v=i(23537),f=i(79315),y=i(33052),b=i(78140),S=i(43579),w=i(91487),M=i(47082),k=i(97464),C=i.n(k),Z=i(96486),T=i.n(Z),P=i(3909),I=i(92350),F=i(31194),_=i(52275),x=i(31945),A=i(32163),B=i(89728),D=i(72495),E=i(58032);const L=i(85).g4H,R=i(85).wuN,N=i(85).jkI,O=i(85).H1U,U=i(85).EMU,V=(i(85).YC3,i(85).nx5),W=i(85).a3v,K=i(85).D7I,z=i(85).icY,G=i(85).pkR;function H(e){window.__c={n:"TeamRoleSelect"};const{[G]:t,selectedRole:i,allRoles:o,onChange:d,store:c,labelStyle:m}=e,{device:p}=(0,s.O7)(),h=(0,l.Fg)(),y=(0,I.ql)(c),S=(0,r.VK)((()=>{const{currentSpaceStore:e}=f.default.state;return null==e?void 0:e.canEditMembership()}),[]),w=(0,r.VK)((()=>c.isDefault()),[c]);return n()(x.ZP,{popupType:p.isMobile?x.Z4.SlideUp:x.Z4.Popup,renderOrigin:e=>a[K](B.Z,C()({style:m,[G]:t,disabledFeedback:!0},e),a[K](u.FormattedMessage,v.q9[i][z]),P.Z.chevronDown({width:10,marginLeft:4,fill:h[W]})),placementToOrigin:F.Iw.Bottom,render:e=>{const t=[{key:"roles",render:e=>a[K](D.Z,C()({},e,{topBorder:0!==e.index})),items:o.map((t=>{const o=!y&&"owner"===t,s=w&&"team_level_guest"===t,r=!S&&"team_level_guest"===t,l=!y&&"team_level_guest"===t,c=o||s||r||l;return{key:t,render:e=>n()(E.Z,{disableTooltip:!c,placement:E.Z.Placement.Right,textWrap:!0,renderTooltip:()=>o?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingOwnerForMembers",[V]:"Teamspace members can't add owners"}):s?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingGuestsInDefaultTeam",[V]:"Default teams can't contain teamspace guests"}):r||l?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingGuestForNonSpaceAdminsOrNonTeamOwners",[V]:"You must be a workspace owner and a teamspace owner to add teamspace guests"}):void 0,render:o=>a[K]("span",o,a[K](_.Z,C()({},e,{focused:!1,checkState:T().isEqual(t,i),[G]:c,disabledFeedback:c,title:n()("div",{style:{display:U,[O]:N}},void 0,a[K](u.FormattedMessage,v.q9[t][z])),[L]:n()("span",{style:{color:h[R]}},void 0,a[K](u.FormattedMessage,v.q9[t][L])),shouldWrapCaption:!0})))}),action:()=>{d(t),e.close()}}}))}];let s;return s=p.isMobile?{menuType:g.og.Modal,title:n()(u.FormattedMessage,{id:"teamPermissionsMenu.mobile.title",[V]:"Select teamspace role"}),right:n()(u.FormattedMessage,{id:"teamPermissionsMenu.mobile.doneButton.label",[V]:"Done"}),onClickRight:e.close}:{menuType:g.og.Popup,width:264},a[K](b.Z,s,n()(A.Z,{type:A.i.Vertical,initialFocus:void 0,sections:t}))}})}const q=i(85).nx5,j=i(85).Yzm,Q=i(85).X9J,J=i(85).bb$,$=i(85).g7N,Y=i(85).H6e,X=i(85).pPv,ee=i(85).kV7,te=i(85).Wp_,ie=i(85).OtN,oe=i(85).dbe,ne=i(85).QmD,ae=i(85).Jy7,se="member";function re(e){window.__c={n:"TeamPermissionsInviteInput"};const{store:t,[ae]:i,onEmptySubmit:o}=e,a=(0,u.useIntl)(),s=(0,r.VK)((()=>Boolean(i[ne].isFocused)),[i]),c=(0,r.VK)((()=>i[ne][oe]),[i]),m=(0,r.VK)((()=>i[ne][X]),[i]),p=(0,r.VK)((()=>i[ne][Y]),[i]),g=(0,l.yK)((e=>({inputTokenVerticalMargin:{marginTop:3,[$]:3},tokenMenuItem:{alignItems:"unset",borderRadius:3,paddingTop:5,paddingBottom:5,paddingLeft:8,paddingRight:5,boxShadow:s?e[J]:e.inputBoxShadow,maxHeight:"40vh"},inputDiv:{[$]:0}})),[s]);function v(e){if(i[ne][Q])return;const t=i[ne][Y].filter((t=>t!==e));0===p.length?i[te]({...i[ne],[Y]:[],[X]:se,[Q]:!0}):i[te]({...i[ne],[Y]:t})}function f(e){i[te]({...i[ne],isFocused:e})}const y=p.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`;return n()(w.Z,{target:e,onClickRemove:v,role:m,shouldWrap:!0,style:g.inputTokenVerticalMargin,[ie]:(0,h.gQ)(e)},t)}));return n()(M.Z,{focus:s,onClick:()=>f(!0),format:M.Z.Format.Share,value:c,onChange:function(e){const t=e.target.value,{extractedEmails:o,newInputValue:n}=(0,d.zI)(t),a=o.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,h.Nd)({target:e,[ae]:i}))),s=[...i[ne][Y],...a];s.length>0?(i[te]({...i[ne],[Y]:s,[Q]:!1,[oe]:n}),f(!(a.length>0))):i[te]({...i[ne],[Y]:[],[Q]:!0,[oe]:n})},onEmptySubmit:o,type:"email",placeholder:a[j]({id:"teamPermissionsInvite.searchInput.placeholder",[q]:"Search people or groups"}),tokens:y,onRemoveLastToken:function(){const e={...i[ne]};e[Y]=e[Y].slice(0,-1),0===e[Y].length&&(e[Q]=!0,e[X]=se),i[te](e)},focusAfterAnimation:!0,right:n()(le,{store:t,[ae]:i}),style:g.tokenMenuItem,inputStyle:g.inputTokenVerticalMargin,inputDivStyle:g.inputDiv})}function le(e){window.__c={n:"TeamPermissionsInviteRoleSelect"};const{store:t,[ae]:i}=e,o=(0,r.VK)((()=>{const e=f.default[ne].currentSpaceStore;return!(null!=e&&e.getDisableTeamGuests())&&(0,p.isTeamspaceGuestsEnabled)()}),[]),a=(0,r.VK)((()=>i[ne][X]),[i]),s=(0,l.yK)((()=>({teamRoleLabel:{marginTop:3,[$]:3,marginLeft:5}})),[]);function d(e){i[te]({...i[ne],[X]:e})}return n()(H,o?{store:t,selectedRole:a,allRoles:v.ZN,onChange:d,labelStyle:s.teamRoleLabel}:{store:t,selectedRole:a,allRoles:v.$r,onChange:d,labelStyle:s.teamRoleLabel})}const de=function(e){window.__c={n:"TeamPermissionsInvite"};const{store:t,onEmptySubmit:i}=e,o=(0,s.O7)();(0,c.r5)((async()=>{await m.refresh(o)}),[]);const a=(0,r.qz)(e[ae],y.Z),d=(0,r.VK)((()=>Boolean(a[ne].isFocused)),[a]),u=(0,r.VK)((()=>a[ne][oe]),[a]),p=(0,r.VK)((()=>d&&u.length>0),[d,u]),h=(0,l.yK)((e=>({permissionsInviteSearchRequest:{position:"absolute",width:"100%",borderRadius:3,[ie]:e.contentBackground,boxShadow:e.largeBoxShadow,marginTop:4},scroller:{zIndex:1}})),[]);function v(e){a[te]({...a[ne],isFocused:e})}return n()("div",{onFocus:()=>v(!0),onBlur:()=>v(!1)},void 0,n()(b.Z,{menuType:g.og.Popup,header:n()(re,{store:t,[ae]:a,onEmptySubmit:i}),scrollerStyle:h.scroller,width:"100%",tokenInputHeader:!1,disableScroller:!0},void 0,p&&n()("div",{style:h.permissionsInviteSearchRequest},void 0,n()(S.Z,{[ae]:a,store:t,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!0,[ee]:10,membersOnly:!1,hideUserTypeToken:!0,disableInvitedUsers:!0}))))}},30688:(e,t,i)=>{i.d(t,{u:()=>ge,Z:()=>he});var o=i(97464),n=i.n(o),a=i(77094),s=i.n(a),r=i(67294),l=i(480),d=i(81954),c=i(24405),u=i(33728),m=i(3909),p=i(82990),g=i(5366),h=i(50906),v=i(43132),f=i(95209),y=i(64964),b=i(57688),S=i(43250),w=i(4708),M=i(75472),k=i(8323),C=i(23537),Z=i(77907),T=i(79315),P=i(42922),I=i(68785),F=i(63296),_=i(89728),x=i(58032),A=i(64369),B=i(93686),D=i(13380);i(85).jvk;const E=i(85).uGP,L=i(85).X9J,R=i(85).wgE,N=i(85).Iwv,O=i(85).Jy7,U=i(85).XtO,V=(i(85).MpB,i(85).GYk),W=(i(85).KLm,i(85).FkY),K=i(85).D7I,z=i(85).Gpy,G=i(85).nx5,H=i(85).pkR,q=i(85).BQ6,j=i(85).TtP,Q=i(85).pPv,J=i(85).H6e,$=i(85).wJk,Y=i(85).xYh,X=i(85).AEv,ee=i(85).OzF,te=i(85).Vgm,ie=i(85).$bT,oe=i(85).jkI,ne=i(85).H1U,ae=i(85).UPJ,se=i(85).EMU,re=i(85).sM5,le=i(85)._V5,de=i(85).gGi,ce=i(85).FOQ,ue={[ce]:{height:32},buttonContainer:{width:de,[le]:22,[re]:se,[ae]:"end"},multiButtonContainer:{width:de,[le]:12,[re]:se,[ae]:"space-between"},singleButtonContainer:{width:de,[le]:12,[re]:se,[ae]:"right"},container:{[re]:se,[ne]:oe,[ae]:oe,[ie]:"column",userSelect:"none",[te]:"none",width:de},containerLeftAligned:{[re]:se,[ne]:"left",[ae]:"left",[ie]:"column",userSelect:"none",[te]:"none",width:de},titleAndIcon:{paddingBottom:18,[ne]:oe,[re]:se},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},[ee]:{paddingRight:10,fontWeight:p.Z.fontWeight.medium,...p.Z.textOverflowStyle,maxWidth:250},full:{width:de},submitTooltip:{minWidth:250},[X]:{[le]:16}};function me(e){var t;let{[Y]:i,isNewlyCreatedTeam:o,[$]:a,onSubmit:l,[J]:c,includesGroups:u,[Q]:m,canEditSpaceMembership:p,membershipRequestsDisabled:h,spaceAllowedDomains:v,hasTeamGuestsMatchAllowedDomain:f}=e;window.__c={n:"InviteSubmitButton"};const y=c[j]>0,b=u&&"owner"===m,S=c.filter((e=>(0,M.OA)(e)))[j]>0&&h&&!p,k=(0,d.VK)((()=>(0,w.isTeamspaceGuestsEnabled)()&&"team_level_guest"===m&&c.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[m,c]),C=b||k||S||f;if(i)return s()(P.Z,{[q]:{...ue[ce],minWidth:80},[H]:!0},void 0,s()(I.Z,{isWhite:!0}));if(o&&!y)return s()(F.Z,{[q]:ue[ce],onClick:a,[H]:i},void 0,s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",[G]:"Skip for now"}));const Z=b?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.groupsAsOwnersTooltip",[G]:"Cannot add groups as teamspace owners. Remove any groups to continue."}):k?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",[G]:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):f?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",[G]:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",[z]:{emailDomains:null==v||null===(t=v.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return s()(x.Z,{textWrap:!0,[q]:ue.submitTooltip,disableTooltip:!Z,renderTooltip:()=>Z,render:e=>r[K](P.Z,n()({[q]:ue[ce],onClick:l,[H]:!y||i||C},e),s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",[G]:"Invite"}))})}function pe(e){let{[J]:t,[W]:i,canEditSpaceMembership:o,membershipRequestsDisabled:n,isFreeTier:a,[Q]:r,hasTeamGuestsMatchAllowedDomain:l}=e;if(void 0===o)return null;if(!t||0===t[j])return null;const d=t.map((e=>{if("group"!==e.type&&(0,M.OA)(e))return e.value.email})).filter((e=>e));if(!d||0===d[j])return null;const c=e=>s()("b",{},void 0,e),u=i??"this workspace";return o?a?s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d[j]?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",[G]:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",[z]:{guestEmail:d[0],[W]:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",[G]:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",[z]:{firstGuest:d[0],secondGuest:d[1],[V]:d[j]-1,[W]:u,b:c}})):"team_level_guest"===r?l?null:s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d[j]?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",[G]:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",[z]:{guestEmail:d[0],[W]:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",[G]:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",[z]:{firstGuest:d[0],secondGuest:d[1],[V]:d[j]-1,[W]:u,b:c}})):s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d[j]?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",[G]:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",[z]:{guestEmail:d[0],[W]:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",[G]:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",[z]:{firstGuest:d[0],secondGuest:d[1],[V]:d[j]-1,[W]:u,b:c}})):s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,n?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",[G]:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."}):1===d[j]?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",[G]:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",[z]:{guestEmail:d[0],[W]:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",[G]:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",[z]:{firstGuest:d[0],secondGuest:d[1],[V]:d[j]-1,[W]:u,b:c}}))}function ge(e){window.__c={n:"InviteLink"};const{[U]:t,isSmall:i}=e,o=(0,l.O7)(),n=(0,c.yK)((e=>({[ce]:{marginRight:5,marginLeft:5,height:32,fontSize:i?12:14},icon:{width:i?12:14,height:i?12:14}})),[i]);return s()(_.Z,{onClick:()=>{v.copyString({[R]:o,stringValue:C.W8(t.id),copiedMessage:v.clipboardMessages[E]}),h.trackCopyTeamInviteLink(o,{[U]:t})},icon:m.Z.link,[q]:n[ce],iconStyle:n.icon,isBlue:!0},void 0,s()(g.FormattedMessage,i?{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",[G]:"Copy link"}:{id:"teamPermissionsInviteOverlay.copyLinkButton.label",[G]:"Copy invite link"}))}const he=function(e){let{[U]:t,[O]:i,isNewlyCreatedTeam:o,onSubmitSuccessful:n,[$]:a}=e;window.__c={n:"TeamPermissionsInviteOverlay"};const c=(0,l.O7)(),{[ee]:m,[W]:p,canEditSpaceMembership:h,membershipRequestsDisabled:v,teamAccessLevel:P,spaceAllowedDomains:I}=(0,d.VK)((()=>{const{currentSpaceStore:e}=T.default.state;return{[ee]:t.getName(),[W]:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e[N](),teamAccessLevel:t.getTeamAccessLevel(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,r.useEffect)((()=>()=>{o&&b.openTeamHome({[R]:c,teamStore:t,shouldScroll:!0})}),[o,t,c]);const[F,_]=(0,r.useState)(!1),x=(0,d.VK)((()=>i.state[J]),[i]),A=(0,d.VK)((()=>i.state[J][j]),[i]),E=(0,d.VK)((()=>i.state[Q]),[i]),V=(0,d.VK)((()=>{if(i.state[L])return!1;return Boolean(i.state[J].find((e=>"group"===e.type)))}),[i]),K=(0,d.VK)((()=>k.isFreeTier()),[]),z=(0,d.VK)((()=>!(null==I||!I[j]||"team_level_guest"!==E||!(0,w.isTeamspaceGuestsEnabled)())&&x.some((e=>"group"!==e.type&&(0,u.dy)(I,e.value.email)))),[I,E,x]),te=(0,d.VK)((()=>(0,w.isTeamInviteLinkMs2Enabled)()?!K&&!C.U2(t):"open"===P&&(0,w.isTeamsInviteLinkEnabled)()),[t,P,K]),ie=async()=>{if(_(!0),A>0){const e=i.state[J],o=await f.processInvite({[R]:c,[U]:t,[O]:i,inviteOrigin:"team_invite_overlay"});if(void 0!==h)if(o){const i=(0,M.t0)({[J]:e,recordStore:t,canEditSpaceMembership:h});if(!i)return;setTimeout((()=>{y.oV({label:i})}))}else setTimeout((()=>{y.oV({label:s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",[G]:"Failed to send invites"})})}))}f.closeModal({[O]:i}),_(!1),null==n||n()};return s()("div",{className:S.inviteTeamMembersModal,[q]:{...ue.full}},void 0,s()("div",{[q]:ue.containerLeftAligned},void 0,s()("div",{[q]:ue.titleAndIcon},void 0,s()("div",{[q]:ue.addMembersTo},void 0,s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",[G]:"Invite people to"})),s()("div",{[q]:ue.icon},void 0,s()(B.p,{[H]:!0,[U]:t,size:20})),s()(D.s,{[q]:ue[ee]},void 0,m)),s()("div",{[q]:ue.full},void 0,s()(Z.LazyTeamPermissionsInvite,{[U]:t,[O]:i,onEmptySubmit:ie}),s()("div",{[q]:ue[X]},void 0,s()(pe,{[J]:x,[W]:p,canEditSpaceMembership:h,membershipRequestsDisabled:v,isFreeTier:K,[Q]:E,hasTeamGuestsMatchAllowedDomain:z}))),s()("div",{[q]:te?ue.multiButtonContainer:ue.singleButtonContainer},void 0,s()("div",{[q]:te?ue.multiButtonContainer:{}},void 0,te&&s()(ge,{[U]:t}),s()(me,{[Y]:F,onSubmit:ie,[$]:()=>{f.closeModal({[O]:i}),null==a||a()},isNewlyCreatedTeam:o,[J]:x,includesGroups:V,[Q]:E,canEditSpaceMembership:h,membershipRequestsDisabled:v,spaceAllowedDomains:I,hasTeamGuestsMatchAllowedDomain:z})))))}},86100:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var o=i(77094),n=i.n(o),a=(i(67294),i(81954)),s=i(9019),r=i(30688);const l=i(85).wJk,d=i(85).H1U,c=i(85).rps,u=i(85).$bT,m=i(85).Jy7;const p=function(e){window.__c={n:"TeamPermissionsInviteWithModal"};const[t,,i]=(0,a.AF)(e[m]),o=()=>{i.reset()};return n()(s.Z,{modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:500},open:t.modalOpen,[l]:o,renderContent:()=>n()("div",{style:{display:"flex",[u]:c,[d]:"end",padding:22}},void 0,n()(r.Z,{store:e.store,[m]:i,isNewlyCreatedTeam:!1,onSubmitSuccessful:o,[l]:o})),origin:e.origin})}},51923:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(77094),n=i.n(o),a=(i(67294),i(24405)),s=i(5366),r=i(97880),l=i(33665),d=i(74523),c=i(13380);const u=i(85).FTQ,m=i(85).P3s,p=i(85).nx5,g=i(85).iRX;function h(e){switch(e){case"bestPractices":return(0,l.getLocalizedUrl)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,l.getLocalizedUrl)("guides.teamspacesWorkspaceOwner");case g:return(0,l.getLocalizedUrl)("guides.teamspacesSettingsAndPermissions");default:return(0,r.unreachable)(e)}}function v(e){return e||n()(c.s,{},void 0,n()(s.FormattedMessage,{[p]:"Learn about teamspaces",id:"teamsLearnMoreLink"}))}function f(e){let{onClick:t,message:i,helpCenterLocation:o,[m]:s,[u]:r}=e;window.__c={n:"TeamsLearnMoreLink"};const l=(0,a.yK)((()=>({button:{maxWidth:"100%"}})),[]);return n()("div",{style:r},void 0,n()(d.Z,{buttonStyle:l.button,title:v(i),[m]:s,href:h(o),onClick:t}))}},62512:(e,t,i)=>{i.d(t,{n:()=>v});var o=i(77094),n=i.n(o),a=(i(67294),i(81954)),s=i(24405),r=i(7928),l=i(5366),d=i(31278),c=i(45653),u=i(37432),m=i(37708);const p=i(85).L_E,g=u.Z.iconSize,h=m.Kt;function v(e){let{ownerStores:t,teamStore:i,isSmall:o=!1}=e;window.__c={n:"TeamOwnerIcons"};const r=o?h:g,l=o?10:16,c=(0,s.yK)((e=>({[p]:{position:"relative",width:r,height:r},teamBadge:{position:"absolute",bottom:-5,right:-3,background:e.modalBackground,padding:.75,borderRadius:"0.25em"}})),[r]),{teamName:u,teamIcon:m}=(0,a.VK)((()=>({teamName:i.getName(),teamIcon:i.getIcon()})),[i]),v=e=>n()(d.Z,{disabled:!0,title:u,icon:m,isEmptyPage:!1,size:e});return 0===t.length?v(r):n()("div",{style:c[p]},void 0,n()(f,{isSmall:o,store:t[0]}),n()("div",{style:c.teamBadge},void 0,v(l)))}function f(e){let{store:t,isSmall:i=!1,style:o={}}=e;window.__c={n:"OwnerIcon"};const u=(0,l.useIntl)(),m=i?h:g,p=(0,s.yK)((e=>({icon:{width:m,height:m,borderRadius:m,boxShadow:e.avatarBoxShadow,...o}})),[m,o]),v=(0,a.VK)((()=>null!=t&&t.isDefined()?(0,r.Nz)(u,null==t?void 0:t.getModel()):void 0),[u,t]),f=v?n()(c.Z,{avatarShouldShowShadow:!0,userStore:t,size:m}):n()(d.Z,{bucket:"public",disabled:!0,isEmptyPage:!1,title:v,size:m,icon:void 0});return n()("div",{style:p.icon},void 0,f)}},49469:(e,t,i)=>{i.d(t,{z:()=>d});var o=i(77094),n=i.n(o),a=(i(67294),i(24405)),s=i(82990);const r=i(85).ChN,l=i(85).AEv;function d(e){let{title:t,[l]:i,style:o}=e;window.__c={n:"TeamSettingsHeader"};const d=(0,a.yK)((e=>({base:{width:"100%"},title:{[r]:s.Z[r].medium,color:e.regularTextColor,fontSize:14},[l]:{[r]:s.Z[r].regular,color:e.mediumTextColor,fontSize:12}})),[]);return n()("div",{style:{...d.base,...o}},void 0,n()("div",{style:d.title},void 0,t),i&&n()("div",{style:d[l]},void 0,i))}},37708:(e,t,i)=>{i.d(t,{oM:()=>f,MQ:()=>y,Kt:()=>b,Ph:()=>S});var o=i(77094),n=i.n(o),a=i(67294),s=i(24405),r=i(61519),l=i(89728),d=i(49469);const c=i(85).sI1,u=i(85).dMt,m=i(85).L_E,p=i(85).tBn,g=i(85).D7I,h=i(85).PG2,v=i(85).Zij,f=15,y=8,b=20;function S(e){window.__c={n:"TeamSettingsList"};const t=(0,s.yK)((()=>({button:{height:"auto",paddingLeft:0,paddingRight:0,display:"flex"},[v]:{marginBottom:10}})),[]);return Boolean(e[h])?a[g](a[p],null,n()(d.z,{[v]:e[v],style:t[v]}),n()(l.Z,{[h]:e[h],style:t.button},void 0,a[g](w,e))):a[g](a[p],null,n()(d.z,{[v]:e[v],style:t[v]}),a[g](w,e))}function w(e){let{[v]:t,rows:i,hideDividers:o=!1,itemStyle:l,[h]:d}=e;window.__c={n:"TeamSettingsListContainer"};const b=(0,s.yK)((e=>({[m]:{border:`1px solid ${e[u]}`,borderRadius:4,width:"100%"},list:{listStyle:"none",padding:0,margin:0},listItem:{marginLeft:f,marginRight:f,paddingTop:y,paddingBottom:y,...l},divider:{marginLeft:f,marginRight:f,borderColor:`${e[u]}`}})),[l]);return n()("div",{style:{...b[m]}},void 0,n()("ul",{style:b.list},void 0,i.map(((e,t)=>a[g](a[p],null,!o&&t>0&&n()(r.Z,{size:1,[c]:b.divider}),n()("li",{style:b.listItem},t,e))))))}},9281:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ko});var o=i(77094),n=i.n(o),a=i(67294),s=i(480),r=i(81954),l=i(24405),d=i(15145),c=i(5366),u=i(11002),m=i(50906),p=i(54642),g=i(51127),h=i(5299),v=i(88428),f=i(5978),y=i(87788);var b=i(12359),S=i(28020),w=i(77373),M=i(93959),k=i(54258),C=i(4708),Z=i(98165),T=i(45096),P=i(94660),I=i(46740),F=i(79315),_=i(37394),x=i(53953),A=i(97464),B=i.n(A),D=i(41892),E=i(3909),L=i(21202),R=i(97880),N=i(95477),O=i(92350);var U=i(82136),V=i(39098),W=i(42922),K=i(31945),z=i(62896),G=i(73063),H=i(16354),q=i(64369),j=i(90530),Q=i(87279),J=i(52275),$=i(78140),Y=i(32163),X=i(72495),ee=i(45653),te=i(14254),ie=i(93686);const oe=i(85).ssy,ne=i(85).j7K,ae=i(85).y79,se=i(85).nx5,re=i(85).xOW,le=i(85).D7I,de=i(85).g4H,ce=i(85).Wt6;function ue(e){window.__c={n:"TeamPickerButton"};const{renderOrigin:t,onTeamAccept:i,sectionTitle:o,showMemberCount:l,right:d,showPrivate:u,onPrivateAccept:m,captionItem:p}=e,g=(0,s.Fy)().isMobile,h=pe(),v=(0,O.E7)(),f=(0,r.VK)((()=>v.filter((e=>e[ce]()))),[v]),y=(0,r.VK)((()=>F.default.state.currentUserStore),[]),b=[];if(p){const e={key:de,render:e=>a[le](X.Z,B()({},e,{topBorder:!0})),items:[p]};b.push(e)}const S=f.map((e=>({key:e.id,action:()=>{i(e)},render:t=>a[le](me,B()({},t,{team:e,onAccept:i,showMemberCount:l,right:d}))}))),w={key:"teams",render:e=>a[le](X.Z,B()({},e,{title:o})),items:S};if(b.push(w),u){const e={key:"private",render:e=>a[le](X.Z,B()({},e,{topBorder:S.length>0})),items:[{key:"private",action:()=>{},render:e=>a[le](J.Z,B()({},e,{icon:n()("div",{style:{position:re}},void 0,n()(ee.Z,{hasTooltip:!1,userStore:y}),E.Z.lockedFilled(h.privateItemLockIcon)),title:n()(c.FormattedMessage,{id:"teamPickerButton.addToPrivate",[se]:"Add to Private"}),onClick:()=>{null==m||m()}}))}]};b.push(e)}return a[le](K.ZP,B()({},e,{popupType:g?K.Z4.SlideUp:K.Z4.Popup,renderOrigin:t,render:e=>{let t;return t=g?{menuType:Q.og.ActionSheet}:{menuType:Q.og.Popup,width:"100%"},a[le]($.Z,t,n()(Y.Z,{style:{width:g?void 0:256},type:Y.i[ae],[ne]:void 0,sections:b}))}}))}function me(e){window.__c={n:"TeamItem"};const{team:t,onAccept:i,showMemberCount:o,right:s,...l}=e,d=pe(),u=(0,r.VK)((()=>t.getUserIdsInTeam().length),[t]);return a[le](J.Z,B()({},l,{onClick:e=>i(t),icon:n()(ie.p,{store:t,size:20,disabled:!0}),title:n()(te.o,{teamStore:t}),right:l.focused?s:null,[de]:o?n()("div",{style:d[de]},void 0,n()(c.FormattedMessage,{[se]:oe,id:"teamPickerButton.teamItem.teamMemberCount",values:{numberOfMembers:u}})):null}))}function pe(){return(0,l.yK)((e=>({privateItemLockIcon:{position:"absolute",bottom:-2,right:-2,zIndex:1,width:10,height:10,fill:e.accentColors.red[500]},[de]:{color:e.lightTextColor}})),[])}const ge=i(85).OM8,he=i(85).$Vg,ve=i(85).tLG,fe=i(85).KS0,ye=i(85).AEP,be=i(85).xOW,Se=i(85).fBv,we=i(85).AuS,Me=i(85).PXg,ke=i(85).XNW,Ce=i(85).qc1,Ze=i(85).D7I,Te=i(85).P3s,Pe=i(85).UwW,Ie=i(85).nx5,Fe=i(85).j_T,_e=i(85).Wt6,xe=i(85).e5W,Ae=i(85).BQ6,Be=i(85).pkR,De=i(85).Mm1,Ee=i(85).XCs,Le=i(85).YDv,Re=i(85)._V5,Ne=i(85).Y0v,Oe=i(85).OtN,Ue=i(85).nAm,Ve=i(85).ChN,We=i(85).jkI,Ke=i(85).z$9,ze=i(85).Exd,Ge=i(85).g7N,He=i(85).nLZ,qe=i(85).UPJ,je=i(85).NF1,Qe=i(85).H1U,Je=i(85).rps,$e=i(85).$bT,Ye=i(85).sM5,Xe=i(85).EMU,et=i(85).f57,tt=i(85).ydP,it=i(85).X_m,ot=i(85).gGi,nt=i(85).Jkr,at=i(85).L_E;function st(e){window.__c={n:"TemplateDetail"};const t=(0,s.O7)(),i=function(e){const[t,i]=a.useState(!1);return a.useEffect((()=>{const t=window.matchMedia(e);function o(e){i(e.matches)}return t.addEventListener("change",o),()=>{t.removeEventListener("change",o)}}),[e]),t}("(max-width: 960px)"),o=(0,l.yK)((e=>({[at]:{[nt]:ot,[it]:ot,[tt]:et,[Xe]:1,[Ye]:Xe,[$e]:Je,[Qe]:"stretch",background:e.contentBackground,color:e.regularTextColor},contentContainer:{margin:16,padding:"20px 24px",border:"1px solid rgba(0, 0, 0, 0.07)",[je]:8,background:e.sidebarBackground,[Ye]:Xe,[$e]:"row",[qe]:"space-between",columnGap:50,flexWrap:i?"wrap":"nowrap"},getTemplateColumn:{[nt]:i?ot:void 0,[Ye]:Xe,[$e]:i?"column-reverse":Je},madeByLabelV1:{[He]:16,[Ge]:16},heroImg:{[it]:ot,[nt]:ot},getTemplateButton:{[nt]:i?ot:220,[it]:38,[ze]:16},addBadgeTeamTemplateButton:{textTransform:Ke,color:e.blueColor},madeByV2Container:{[Ge]:16,[Ye]:Xe,[$e]:"row",[Qe]:We,gap:6,[nt]:"content-fit"},madeByV2Label:{[ze]:14,[Ve]:500},madeByV2AvatarContainer:{[nt]:30,[it]:30,[Ye]:Xe,[$e]:"row",[Qe]:We,[qe]:We,[je]:"50%",border:`1px solid ${e.outlineButtonBorder}`,[tt]:Ue,[Oe]:"rgb(245, 245, 245)"},madeByV2Avatar:{[nt]:30,[it]:30},madeByV2NotionAvatar:{[nt]:16,[it]:16}})),[i]),{status:d,selectedTemplate:u,cloneTo:p,selectedTeam:g}=(0,r.VK)((()=>_.Z.state),[]),h=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()),[]),v=(0,r.VK)((()=>{if("open"===d&&"preset"===(null==u?void 0:u.type)){const e=u.uri,t=(0,M.SP)(e),i=null==t?void 0:t.presets.find((t=>t.uri===e));if(t&&i)return{currentApp:t,currentPreset:i}}}),[d,u]),f=(0,r.VK)((()=>{if(u){if("preset"===u.type){var e;if(!v)return;const{currentPreset:i}=v,a=null===(e=i.previews)||void 0===e?void 0:e.find((e=>"previewRootId"in e)),s=a&&new V.G(t,{table:L.iU,id:a[Ne],spaceId:a.spaceId}),r=s?n()("div",{[Ae]:{[tt]:Ue,[Re]:64,[Le]:64,[Ee]:64}},void 0,n()(j.Z,{store:s,loadingContainerStore:void 0,context:U.S.InAppTemplatePreview,[Le]:0,[Ee]:0,[De]:0,pageCoverHeight:0,titleStyle:{[ze]:32},[Be]:!0},s.id)):n()("img",{[Ae]:o.heroImg,src:D.Z[xe].appPackages.projectPreview1Png});return[i.name,i.description,n()("img",{src:i.icon,[Ae]:{[nt]:30,[it]:30}},i.uri),r]}if("pageTemplate"===u.type){const{template:e}=u,i=new V.G(t,{table:L.iU,id:e[Ne],spaceId:e.spaceId}),o=i.isCollectionView()?64:0,a=n()("div",{[Ae]:{[tt]:Ue,[Re]:o,[Le]:o,[Ee]:o}},void 0,n()(j.Z,{store:i,loadingContainerStore:void 0,context:U.S.InAppTemplatePreview,[Le]:0,[Ee]:0,[De]:0,pageCoverHeight:j.Z.defaultPageCoverHeight(t),[Be]:!0,[Ae]:{...i.isFullWidth()?{[nt]:"calc(100% - 64px)",margin:"0 32px"}:{}}}));return[e.name,e.description,n()("span",{[Ae]:{[ze]:20,[it]:30}},e.rootId,e.emoji?n()(z.Z,{},void 0,e.emoji):n()("img",{src:e.icon,[Ae]:{[nt]:30,[it]:30}},e.icon)),a]}(0,R.unreachable)(u)}}),[v,t,u,o.heroImg]),y=(0,O.E7)(),b=(0,r.VK)((()=>y.filter((e=>e[_e]()))),[y]),{creatorName:S,creatorAvatar:w,creatorUrl:k}=(0,r.VK)((()=>{if(!h||!u||"preset"===u.type)return{creatorName:"Notion",creatorAvatar:D.Z[xe].notionLogoPng,creatorUrl:`${N.default[Fe]}/@notion`,duplicates:void 0};const{template:e}=u,{creatorName:t,creatorAvatar:i,creatorHandle:o,duplicates:n}=e;return{creatorName:t,creatorAvatar:t?i:void 0,creatorUrl:t&&o?`${N.default[Fe]}/@${o}`:void 0,duplicates:t?n:void 0}}),[h,u]);if("open"!==d||void 0===u||!f)return null;const[Z,T,P,I]=f,F=b.length>0&&"destination_picker"===p&&!g,x=n()(c.FormattedMessage,{id:"templateDetail.getTemplateButton.label",[Ie]:"Get template"}),A=n()(W.Z,{[Ae]:o.getTemplateButton,onClick:()=>{e.onAcceptTemplate(u,g),m.trackGetTemplateClick(t,{[Pe]:Z,from:_.Z.state[Te],target_team:null==g?void 0:g.id})}},void 0,x),Q=n()(ue,{showMemberCount:!0,showPrivate:!0,placementToOrigin:K.pO.Top,originGap:4,sectionTitle:n()(c.FormattedMessage,{id:"templateDetail.addToTeamspace",[Ie]:"Add to a teamspace"}),renderOrigin:e=>a[Ze](W.Z,B()({},e,{[Ae]:o.getTemplateButton}),x),onTeamAccept:i=>{e.onAcceptTemplate(u,i),m.trackGetTemplateClick(t,{[Pe]:Z,from:_.Z.state[Te],target_team:i.id})},onPrivateAccept:()=>{e.onAcceptTemplate(u),m.trackGetTemplateClick(t,{[Pe]:Z,from:_.Z.state[Te],target_team:"private"})},right:n()(G.Z,{isBlue:!0,[Ae]:{[je]:"100px",[Ce]:Ke},icon:E.Z.plusThick,hovered:!0,caption:n()(c.FormattedMessage,{[Ie]:"Add",id:"TemplateDetail.TeamItem.addButton"}),captionStyle:o.addBadgeTeamTemplateButton})}),J=n()("div",{[Ae]:o.madeByLabelV1},void 0,n()(q.Z,{isSmall:!0},void 0,n()(c.FormattedMessage,{id:"templateDetail.madeBy.label",[Ie]:"Made by"})),n()("div",{[Ae]:{[Ye]:Xe,[$e]:"row",[Qe]:We,[He]:4}},void 0,n()("img",{src:D.Z[xe].notionLogoPng,[Ae]:{[nt]:15,[it]:16}}),n()("span",{[Ae]:{[ze]:14,[Ve]:500,[ke]:5,[Me]:5}},void 0,"Notion"))),$=S?n()(H.Z,{[Ae]:{...o.madeByV2Container,...!k&&{cursor:"default"}},href:k,[Be]:!k,external:!0},void 0,w&&n()("div",{[Ae]:o.madeByV2AvatarContainer},void 0,n()("img",{src:w,[Ae]:w===D.Z[xe].notionLogoPng?o.madeByV2NotionAvatar:o.madeByV2Avatar})),n()(q.Z,{[Ae]:o.madeByV2Label},void 0,n()(c.FormattedMessage,{id:"templateDetail.madeBy.label.v2",[Ie]:"By {author}",values:{author:S}}))):null;return a[Ze](a.Fragment,null,n()("div",{[Ae]:o[at]},void 0,n()("div",{[Ae]:{[it]:ot,overflowX:Ue,overflowY:et,maskImage:we,WebkitMaskImage:we}},void 0,n()("div",{[Ae]:{[Se]:be}},void 0,n()("div",{[Ae]:{[He]:-20,[ye]:1,zIndex:999,[Ce]:Ke}},void 0,I),n()("div",{[Ae]:{[Oe]:fe,[Se]:ve,left:0,top:0,right:0,bottom:0,zIndex:1e3}}))),n()("div",{[Ae]:o.contentContainer},void 0,n()("div",{[Ae]:{[Ye]:Xe,[$e]:Je}},void 0,n()("div",{[Ae]:{[Ye]:Xe,[$e]:"row",[Qe]:he,[Ge]:h?0:20}},void 0,!h&&P,n()("div",{[Ae]:{[Ye]:Xe,[$e]:Je,[ke]:h?0:10}},void 0,n()("span",{[Ae]:{[ze]:20,[Ve]:700,[ge]:1.2,[He]:3,[Ge]:12}},void 0,Z))),n()("div",{},void 0,h&&$),n()("div",{[Ae]:{[ze]:14}},void 0,T)),n()("div",{[Ae]:o.getTemplateColumn},void 0,F?Q:A,!h&&J))))}var rt=i(96486),lt=i.n(rt),dt=i(58573),ct=i(10482),ut=i(33929),mt=i(33665),pt=i(31194),gt=i(73657),ht=i(61519),vt=i(74194),ft=i(3386),yt=i(64921);const bt=i(85).a3v,St=i(85).XNW,wt=i(85).PG2,Mt=i(85).GGR,kt=i(85).J9j,Ct=i(85).Ss1,Zt=i(85).Scd,Tt=i(85).OP1,Pt=i(85).NF1,It=i(85).rOg;function Ft(e){window.__c={n:"SelectPill"};const{icon:t,title:i,on:o,wrapStyle:a,innerStyle:r,hideChevron:d}=e,c=(0,l.Fg)(),u=(0,s.O7)(),m=(0,l.yK)((e=>({button:{fontSize:14,display:It,alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",[Pt]:32,height:u.device.isMobile?28:24,lineHeight:u.device.isMobile?"28px":"24px",padding:"0 8px",border:`1px solid ${e.outlineButtonBorder}`,color:e.mediumTextColor,...o&&{color:e[Tt],border:`1px solid ${e.filterPillBorder}`,[Zt]:e.filterPillBackground},...r}})),[u.device.isMobile,r,o]);return n()("div",{style:{[Pt]:14,marginRight:6,display:It,...a}},void 0,n()(yt.Z,{style:m.button,hoveredStyle:o?{[Zt]:c[Ct]}:void 0,pressedStyle:o?{[Zt]:c[kt]}:void 0,[Mt]:e[Mt],onMouseLeave:e.onMouseLeave,[wt]:e[wt],onDoubleClick:e.onDoubleClick},void 0,t,i,!d&&E.Z.chevronDown({width:10,[St]:4,marginTop:1,fill:o?c[Tt]:c[bt]})))}var _t=i(14694);function xt(e){let{topCategoryId:t,categoryId:i}=e;window.__c={n:"TemplateGallerySidebarCategoryName"};const o=(0,c.useIntl)(),a=(0,l.yK)((e=>({sidebarTitle:{fontSize:12,color:e.lightTextColor,fontWeight:600,margin:"4px 4px 0 6px"}})),[]),s=(0,r.VK)((()=>{const e=function(){var e;if(!t)return;const o=T.oO(t);return o?null===(e=o.subcategories)||void 0===e?void 0:e.find((e=>e.id===i)):void 0}();if(e)return e.name;const n=ct._5[i];return n?o.formatMessage(n):""}),[t,i,o]);return n()(_t.Z,{style:a.sidebarTitle},void 0,s)}const At=i(85).nx5,Bt=i(85).jkI,Dt=i(85).$bT,Et=i(85).ChN,Lt=i(85).H1U;function Rt(){window.__c={n:"TemplateGallerySidebarMoreFromCommunity"};const e=(0,s.O7)(),t=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()),[]),i=(0,l.yK)((e=>({button:{height:28,padding:"0 4px",borderRadius:5,transition:"background 0.2s ease",color:e.mediumTextColor,[Lt]:"flex-start",[Et]:500,marginLeft:6,marginRight:6,width:"calc(100% - 12px)"},icon:{width:14,height:14,marginLeft:6,transform:"rotate(45deg)"},linkContentV2Container:{display:"flex",[Dt]:"column",gap:4},linkContentV2Title:{display:"flex",[Dt]:"row",[Lt]:Bt,[Et]:600,fontSize:14},linkContentV2Subtitle:{maxWidth:250,whiteSpace:"inherit",overflow:"inherit",[Et]:400,fontSize:13}})),[]),o=(0,a.useMemo)((()=>a.createElement(a.Fragment,null,E.Z.typesRelation(i.icon),n()(c.FormattedMessage,{[At]:"More from the Community",id:"templateGallerySidebar.goToMarketingTemplateGalleryButton.label"}))),[i.icon]),d=(0,a.useMemo)((()=>n()("div",{style:i.linkContentV2Container},void 0,n()(q.Z,{isInline:!1,style:i.linkContentV2Title},void 0,n()(c.FormattedMessage,{[At]:"More templates",id:"templateGallerySidebar.goToCommunityTemplateGalleryButton.labe2"}),E.Z.sendArrow(i.icon)),n()(q.Z,{isInline:!1,isSecondaryColor:!0,style:i.linkContentV2Subtitle},void 0,n()(c.FormattedMessage,{[At]:"Discover thousands of templates made by Notion users like you",id:"templateGallerySidebar.goToCommunityTemplateGalleryButton.reason2"})))),[i.icon,i.linkContentV2Container,i.linkContentV2Subtitle,i.linkContentV2Title]);return n()(H.Z,{href:(0,mt.getLocalizedUrl)("templateGallery"),onClick:()=>m.trackBrowseMoreTemplatesLink(e),style:{display:"flex",[Dt]:"row",[Lt]:Bt},external:!0},void 0,t?d:o)}var Nt=i(8848),Ot=i(82990),Ut=i(98742),Vt=i(51077),Wt=i(89728);const Kt=i(85).gio,zt=i(85).$bT,Gt=i(85).ccq,Ht=i(85).j7K,qt=i(85).D7I,jt=i(85).DN7,Qt=i(85).rpY,Jt=i(85).Wp_,$t=i(85).y79,Yt=i(85).h8z,Xt=i(85).UPJ,ei=i(85).jkI,ti=i(85).H1U;function ii(e){let{}=e;window.__c={n:"TemplateGalleryTopCategoryFilter"};const t=(0,l.yK)((e=>({newInAppGalleryTopCategoryFilterBarContainer:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginBottom:8},newInAppGalleryTopCategoryFilterButton:{display:"flex",[ti]:ei,[Xt]:Yt,color:e.mediumTextColor,padding:"8px 12px",borderRadius:4,marginRight:0,fontSize:Ot.Z.fontSize.UIRegular.desktop,background:e.inputBackground},newInAppGalleryTopCategoryFilterChevronIcon:{width:15,height:15,fill:e.mediumIconColor}})),[]),{selectedTopCategory:i}=(0,r.VK)((()=>_.Z.state),[]),o=(0,r.VK)((()=>y.Z.getTopTemplateCategories()),[]),s=(0,r.VK)((()=>i?T.oO(i):void 0),[i]),d=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()&&(null==o?void 0:o.length)>0),[o]);return d?n()("div",{style:t.newInAppGalleryTopCategoryFilterBarContainer},void 0,n()(K.ZP,{popupType:K.Z4.Popup,alignmentToOrigin:K.vR.End,[Gt]:K.pO.Bottom,sameWidthAsOrigin:!0,[Qt]:e=>n()($.Z,{menuType:Q.og.Popup},void 0,n()(Y.Z,{type:Y.i[$t],[Ht]:void 0,sections:[{key:"top-category",items:o.map((e=>({key:e.id,action:()=>{if(!d)return;const t=(0,P.rq)(e);_.Z[Jt]({..._.Z.state,selectedTopCategory:e.id,allTemplates:t,limitResults:T.JL(t)})},[Qt]:t=>a[qt](J.Z,B()({},t,{title:n()(oi,{[jt]:e,showSelected:e.id===i})}))}))),[Qt]:e=>a[qt](X.Z,e)}],onAccept:()=>e.close()})),renderOrigin:e=>a[qt](Wt.Z,B()({},(0,Ut.Z)(e,{onClick:()=>{}}),{style:t.newInAppGalleryTopCategoryFilterButton}),n()(oi,{[jt]:s}),E.Z.chevronDown(t.newInAppGalleryTopCategoryFilterChevronIcon))})):null}function oi(e){let{[jt]:t,showSelected:i=!1}=e;window.__c={n:"TemplateGalleryTopCategoryWithIcon"};const o=(0,l.yK)((e=>({selectedIconStyle:{width:14,height:14,fill:Nt.ZP.defaultText},categorySelection:{display:"flex",[zt]:"row",[ti]:ei,gap:8,lineHeight:"20px"},categoryButtonContainer:{display:"flex",[zt]:"row",[ti]:ei,[Xt]:Yt}})),[]);return t?n()("span",{style:o.categoryButtonContainer},void 0,n()("span",{style:o.categorySelection},void 0,n()(Vt.Z,{type:"notion_icon",size:20,icon:t.icon.name,isLoading:!1,[Kt]:void 0,largeIcon:!0}),n()("span",{},void 0,t.name)),i&&n()("span",{},void 0,E.Z.thinCheck(o.selectedIconStyle))):null}const ni=i(85)._8D,ai=i(85).ELX,si=i(85).OM8,ri=i(85).Gpy,li=i(85).KNX,di=i(85).hcJ,ci=i(85).TtP,ui=i(85).YDv,mi=i(85).TEz,pi=i(85).lWm,gi=i(85).HAy,hi=i(85).$Vg,vi=i(85).wuN,fi=i(85).FOQ,yi=i(85).PG2,bi=i(85).ccq,Si=i(85).OP1,wi=i(85).Ubh,Mi=i(85).D7I,ki=i(85).BQ6,Ci=i(85).kdC,Zi=i(85).Yzm,Ti=i(85).Rbl,Pi=i(85)._Fe,Ii=i(85).ChN,Fi=i(85).g7N,_i=i(85).Exd,xi=i(85).NF1,Ai=i(85).PXg,Bi=i(85).qpZ,Di=i(85).LlE,Ei=i(85).H1U,Li=i(85).$bT,Ri=i(85).EMU,Ni=i(85).sM5,Oi=i(85).Scd,Ui=i(85).jkI,Vi=i(85).bCl,Wi=i(85).Lfz,Ki=i(85).L92,zi=i(85).nx5,Gi=(0,c.defineMessages)({allPersona:{id:"templateGallery.sidebar.persona.allTemplates",[zi]:"All templates"},noResults:{id:"templateGallery.sidebar.results",[zi]:"No results"}});function Hi(){window.__c={n:"TemplateGallerySidebar"};const[e,t]=(0,a.useState)(""),i=(0,c.useIntl)(),o=(0,l.Fg)(),d=(0,s.O7)(),u=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()),[]),{selectedCategory:p,status:g}=(0,r.VK)((()=>_.Z.state),[]),[h,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(!h){const i=_.Z.state[Ki];var e,t;if(i)null===(e=document)||void 0===e||null===(t=e.getElementById(`tg-${"uri"in i?M.XR[i.uri]:i[Vi][Wi]}`))||void 0===t||t.scrollIntoView({block:Ui}),v(!0)}}),[h]),(0,a.useEffect)((()=>{"closed"===g&&v(!1)}),[v,g]);const f=(0,l.yK)((e=>({sidebar:{height:"100%",width:275,[Oi]:e.sidebarBackground,alignContent:Ui,[Ni]:Ri,[Li]:"column",justifyContent:"space-between",[Ei]:"stretch",boxShadow:e.sidebarBoxShadow},sidebarMoreFromCommunityContainer:{[Di]:12,borderTop:`1px solid ${e.accentColors.translucentGray[200]}`},[Bi]:{[Di]:"12px 12px 0 12px"},searchIcon:{width:14,height:14,[Ai]:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor},searchBar:{height:32,[xi]:5,[_i]:14,marginTop:0,[Fi]:8,[Di]:"16px 10px"},filterBar:{[Ni]:Ri,[Li]:"row",width:273,flexWrap:"wrap",gap:6},newInAppGalleryBrandContainer:{[Ni]:Ri,[Ei]:Ui,width:"100%",gap:6,[Fi]:10},newInAppGalleryBrandName:{[_i]:15,[Ii]:600,color:e[Pi]},newInAppGalleryBrandIcon:{width:18,height:15,fill:e[Pi]},newInAppGallerySearchBarContainer:{[Di]:"0px 12px"}})),[]),y=(0,a.useMemo)((()=>n()(ft.Z,{capture:!0,onBackspace:lt()[Ti],onLeft:lt()[Ti],onRight:lt()[Ti],onSelectAll:lt()[Ti],onRedo:lt()[Ti],onUndo:lt()[Ti],onCut:lt()[Ti],onCopy:lt()[Ti],onPaste:lt()[Ti],onKeypress:lt()[Ti],onDelete:lt()[Ti],onTab:lt()[Ti]},void 0,n()(vt.Z,{placeholder:i[Zi]({id:"templateGallery.sidebar.searchbar.placeholder",[zi]:"Search templates"}),left:E.Z.search(f.searchIcon),[Ci]:!0,format:vt.Z.Format.Small,value:e,[ki]:f.searchBar,onChange:e=>t(e.target.value)}))),[e,i,f.searchBar,f.searchIcon]),b=(0,a.useCallback)((e=>{var t,i,o;const s=[{key:"personas",render:e=>a[Mi](X.Z,B()({},e,{topBorder:0!==e.index})),items:[void 0,...(0,P.Io)({userPersona:null===(t=F.default.state[wi])||void 0===t||null===(i=t.getSettings())||void 0===i?void 0:i.persona,subscriptionTier:null===(o=F.default.state.currentSpaceStore)||void 0===o?void 0:o.getSubscriptionTier()}).filter((e=>"suggested"!==e))].map((t=>({key:t??"all",render:e=>a[Mi](J.Z,B()({},e,{focused:!1,checkState:lt().isEqual(t,p),title:n()("div",{[ki]:{[Ni]:Ri,[Ei]:Ui}},void 0,a[Mi](c.FormattedMessage,t?ct._5[t]:Gi.allPersona)),shouldWrapCaption:!0})),action:()=>{_.Z.setState({..._.Z.state,selectedCategory:t}),e.close(),m.trackTemplateModalPersonaSelection(d,{persona:t??"all"})}})))}],r={menuType:Q.og.Popup,width:260};return a[Mi]($.Z,r,n()(Y.Z,{type:Y.i.Vertical,initialFocus:void 0,sections:s}))}),[d,p]),S=(0,a.useMemo)((()=>n()("div",{[ki]:f.filterBar},void 0,n()(K.ZP,{popupType:K.Z4.Popup,renderOrigin:e=>a[Mi](Ft,B()({on:!0,icon:E.Z.person({width:14,[Ai]:6,fill:o[Si]}),title:n()("span",{},void 0,a[Mi](c.FormattedMessage,p?ct._5[p]:Gi.allPersona))},e)),[bi]:pt.Iw.Bottom,render:e=>b(e)}))),[b,p,f.filterBar,o[Si]]);return n()("div",{[ki]:f.sidebar},void 0,!u&&n()("div",{[ki]:f[Bi]},void 0,y,S),u&&a[Mi](a.Fragment,null,n()("div",{[ki]:f[Bi]},void 0,n()(H.Z,{href:(0,mt.getLocalizedUrl)("templateGallery"),[yi]:()=>m.trackTemplatesBrandClick(d),[ki]:f.newInAppGalleryBrandContainer,external:!0},void 0,E.Z.sidebarTemplates(f.newInAppGalleryBrandIcon),n()("span",{[ki]:f.newInAppGalleryBrandName},void 0,n()(c.FormattedMessage,{id:"templateGallery.brand.title",[zi]:"Templates"}))),n()(ii,{})),n()("div",{[ki]:f.newInAppGallerySearchBarContainer},void 0,y)),n()(qi,{currentQuery:e,selectedCategory:p}),u&&n()("div",{},void 0,n()(ht.Z,{size:"0"}),n()("div",{[ki]:f.sidebarMoreFromCommunityContainer},void 0,n()(Rt,{}))))}function qi(e){window.__c={n:"TemplateGallerySidebarItemList"};const{currentQuery:t,selectedCategory:i}=e,o=""!==t||void 0!==i,{allTemplates:s,selectedTopCategory:d,status:u,limitResults:m}=(0,r.VK)((()=>_.Z.state),[]),p=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()),[]),g=(0,l.yK)((e=>({[fi]:{height:44,[Di]:"8px 0",[xi]:4,[Fi]:4,transition:"all 0.2s ease",color:e[vi],[Ei]:hi},categoryDiv:{[Fi]:o?0:14},unSelectedItem:{color:e[vi]},[gi]:{[Oi]:"dark"===e.mode?e.popoverHoveredBackground:e[pi],[Ii]:500,color:e[Pi]},hoveredItem:{[xi]:4,[Oi]:e[pi]},presetTitle:{[_i]:14,color:e[Pi]},presetDescription:{[_i]:12},sidebarTitle:{[_i]:12,color:e[mi],[Ii]:600,margin:"4px 4px 0 6px"},sidebarShowMore:{[_i]:12,color:e[mi],[Ii]:600,margin:"2px 2px 0 6px"}})),[o]),h=(0,r.VK)((()=>{if("open"!==u||void 0===s)return[];const e=new Set;return Object.fromEntries(Object.entries(s).filter((e=>{let[t]=e;return void 0===i||t===i})).map((i=>{let[o,n]=i;return[o,(0,dt.ZP)(t.replaceAll("-",""),n,(e=>`${e[Wi]}`.replaceAll("-",""))).filter((t=>{const i=e.has(t[Wi]);return e.add(t[Wi]),!i}))]})))}),[u,s,i,t]),v=(0,a.useCallback)((e=>{"open"===u&&void 0!==m&&_.Z.setState({..._.Z.state,limitResults:{...m,[e]:!1}})}),[m,u]);return"open"!==u?null:n()("div",{[ki]:{flexGrow:1,width:"100%",overflowX:"hidden",overflowY:"auto"}},void 0,n()(X.Z,{desktopTitleStyle:{[ui]:8}},void 0,Object.entries(h).map((e=>{let[t,i]=e;if(0===i[ci])return;const a=(null==m?void 0:m[t])&&!o&&i[ci]>P.IJ+1,s=a?i[ci]-P.IJ:0,r=a?i.slice(0,P.IJ):i;return n()("div",{[ki]:g.categoryDiv},t,!o&&n()(xt,{topCategoryId:d,categoryId:t}),r.map((e=>"uri"in e?n()(ji,{icon:e.icon,[Wi]:e[Wi],[Vi]:{type:di,uri:e.uri}},e.uri):n()(ji,{icon:e.icon,[li]:e[li],[Wi]:e[Wi],[Vi]:{type:"pageTemplate",[Vi]:e}},e.id))),a&&s>0?n()(J.Z,{[ki]:g.sidebarShowMore,focused:!1,[yi]:()=>v(t),title:n()(c.FormattedMessage,{[zi]:"{numNotShown} more...",id:"templateGallerySidebar.category.showMore",[ri]:{numNotShown:s}})}):void 0)})),0===Object[ri](h).flatMap((e=>e))[ci]&&n()(gt.Z,{caption:ut.default[Zi](Gi.noResults),[ki]:{[si]:"14px",[Di]:6,margin:0}}),!p&&n()(J.Z,{desktopIconStyle:{alignSelf:"unset"},focused:!1,[ai]:{...g[fi]},title:n()(Rt,{})})))}function ji(e){var t;window.__c={n:"TemplateGallerySidebarItem"};const i=(0,s.O7)(),o=(0,l.yK)((e=>({[fi]:{height:28,[Di]:"0 4px",[xi]:5,transition:"background 0.2s ease",color:e[vi],[Ei]:hi,[Ii]:500,marginLeft:6,[Ai]:6,width:"calc(100% - 12px)"},itemText:{marginLeft:5},unSelectedItemText:{color:e[vi]},selectedItemText:{color:e[Pi]},[gi]:{[Oi]:"dark"===e.mode?e.popoverHoveredBackground:e[ni],[Ii]:500},hoveredItem:{[Oi]:e[pi]},presetIcon:{width:16,height:16,[_i]:16,color:e.regularEmojiColor},presetTitle:{[_i]:14},presetDescription:{[_i]:12}})),[]),{status:d,[Ki]:c,analyticsFrom:u}=(0,r.VK)((()=>_.Z.state),[]),p=(0,r.VK)((()=>"open"===d&&lt().isEqual(c,e[Vi])),[d,e[Vi],c]),g=(0,a.useCallback)((()=>{const t="uri"in e[Vi]?M.XR[e[Vi].uri]:e[Vi][Vi].previewRootId,o=(0,P.W4)({templateGalleryItem:t});f.navigate({environment:i,url:o}),m.trackTemplateModalItemClick(i,{template_name:"preset"===e[Vi].type?e[Vi].uri:e[Vi][Vi][Wi],page_prepopulated_template_id:t,from:u})}),[u,i,e[Vi]]);if("open"!==d)return null;const h=null!==(t=e.icon)&&void 0!==t&&t.startsWith("/")?n()("img",{src:e.icon,[ki]:o.presetIcon}):n()("div",{[ki]:o.presetIcon},void 0,n()(z.Z,{},void 0,e[li]??e.icon??"")),v=`tg-${"uri"in e[Vi]?M.XR[e[Vi].uri]:e[Vi][Vi][Wi]}`;return n()(J.Z,{id:v,desktopIconStyle:{alignSelf:"unset"},[ai]:{...o[fi],...p?o[gi]:void 0},textWrapperStyle:{...p?o.selectedItemText:o.unSelectedItemText,...o.itemText},focused:!1,icon:h,title:n()("span",{[ki]:o.presetTitle},void 0,e[Wi]),shouldWrapCaption:!0,hoveredStyle:o.hoveredItem,[yi]:g})}const Qi=i(85).qed,Ji=i(85).nAm,$i=i(85).$bT,Yi=i(85).nx5,Xi=i(85).Yzm,eo=i(85).tDk,to=i(85).BK9,io=i(85).hcJ,oo=i(85).H8E,no=i(85).Y7T,ao=i(85).gRm,so=i(85).OHs,ro=i(85).iru,lo=i(85).GiO,co=i(85).bCl,uo=i(85).UwW,mo=i(85).P3s,po=i(85).Ubh,go=i(85).wgE,ho=i(85).Wp_,vo=i(85).iDK,fo=i(85).L92,yo=i(85).jdj,bo=i(85).vrj,So=i(85).QmD,wo=i(85).qJ8,Mo=i(85).NF1;function ko(){window.__c={n:"TemplateGalleryModal"};const e=(0,s.Fy)(),t=(0,s.O7)(),i=(0,c.useIntl)(),o=(0,a.useRef)(void 0),u=(0,l.yK)((t=>({modal:{width:e.isMobile?"auto":"90vw",height:e.isMobile?"auto":"90vh",[Mo]:8}})),[e.isMobile]),A=(0,r.VK)((()=>F.default[So][wo]),[]),{[bo]:B}=(0,r.VK)((()=>t[yo][So].route),[t[yo]]),D=(0,r.VK)((()=>(0,C.isNewInAppTemplateGalleryEnabled)()),[]),{status:E,allTemplates:L,[fo]:R,cloneTo:N,limitResults:O}=(0,r.VK)((()=>_.Z[So]),[]);(0,a.useEffect)((()=>{if(B)return o[vo]=window.setTimeout((()=>{_.Z[ho]({..._.Z[So],status:"closed"})}),1e4),()=>{void 0!==o[vo]&&window.clearTimeout(o[vo])}}),[]);const U=(0,a.useRef)(void 0);(0,a.useEffect)((()=>{U[vo]&&(U[vo]=void 0)}),[null==A?void 0:A.id]),(0,a.useEffect)((()=>{var e;U[vo]||"closed"!==E&&(U[vo]=D?async function(e){const{environment:t,spaceId:i}=e,o=await p.getInAppCategoriesAndTemplates(t,{spaceId:i});return"success"===o.type&&(y.Z.setState({data:o.data}),"current"===o.data.version)}({[go]:t,spaceId:null==A?void 0:A.id}):Promise.resolve(),null===(e=U[vo])||void 0===e||e.then((()=>{var e,t,i;const{selectedTopCategory:o,allTemplates:n}=T.Lr({isNewInAppGalleryEnabled:D,userPersona:null===(e=F.default[So][po])||void 0===e||null===(t=e.getSettings())||void 0===t?void 0:t.persona,subscriptionTier:null===(i=F.default[So][wo])||void 0===i?void 0:i.getSubscriptionTier()});_.Z[ho]({..._.Z[So],selectedTopCategory:o,allTemplates:n,limitResults:T.JL(n)})})).finally((()=>{void 0!==o[vo]&&window.clearTimeout(o[vo])})))}),[t,D,null==A?void 0:A.id,U,E]),(0,a.useEffect)((()=>{if(void 0!==L&&"opening"===E){const e=void 0!==R&&(void 0===B||"gallery"===B)?R:Co({[bo]:B,allTemplates:L});return _.Z[ho]({..._.Z[So],status:"open",allTemplates:L,[fo]:e,limitResults:O??T.JL(L),cloneTo:_.Z[So].cloneTo,[mo]:_.Z[So][mo]}),void m.trackTemplateModalOpen(t,{[uo]:"preset"===e.type?e.uri:e[co].name,from:_.Z[So][mo]})}}),[B,t,L,E,R,N,O]),(0,a.useEffect)((()=>{"open"===E&&void 0!==L&&void 0!==B&&"gallery"!==B&&_.Z[ho]({..._.Z[So],[fo]:Co({[bo]:B,allTemplates:L})})}),[L,E,B]);const V=(0,r.VK)((()=>{const e=(0,S.getCurrentPageStore)();if("open"===E&&"current_page"===N&&e&&e.isEmptyPage())return e}),[N,E]),W=(0,a.useCallback)((async(e,i)=>{var o,n,a;_.Z[ho]({..._.Z[So],status:"closed",[fo]:void 0});const{[wo]:s,[lo]:r}=F.default[So],l=null==V||!V[ro]()||"block"!==(null===(o=V[ro]())||void 0===o?void 0:o.table)&&"space"!==(null===(n=V[ro]())||void 0===n?void 0:n.table)&&"team"!==(null===(a=V[ro]())||void 0===a?void 0:a.table)?i||s:V[ro](),c=Date.now();let u;if("preset"!==e.type||e.uri.startsWith("notion://wiki")){const o="preset"===e.type?(0,k.CQ)(e.uri):e[co];if(!o)return;if(!s||!r)return;const n={[go]:t,item:o,spaceStore:s,[no]:r,useMinimalTemplates:!1,from:oo},a=V?await v[to]({...n,isPrivate:!1,initializeStore:V,type:"inExistingStore"}):i?await v[to]({...n,isPrivate:!1,[so]:i,type:"inTeam",appendOrPrepend:"append"}):await v[to]({...n,isPrivate:!0,type:"inSpace"});u=a,a&&f.navigateToBlock({[go]:t,store:a,pageVisitSource:d.tY.Create})}else{var y;const o=e.uri,n=null===(y=(0,M.SP)(o))||void 0===y?void 0:y.uri;if(!(n&&s&&r&&l))return;const a=i||Z.getTeam(l);if(a){if(!(await async function(e){let{[go]:t,spaceId:i,presetUri:o,[so]:n}=e;const a=g.getDatabaseCreationTypeV1FromPresetUri(o);if(!a)return!0;if("tasks"===a)return!0;return await(0,I.l)({[go]:t,spaceId:i,databaseCreationType:a,parentStore:n,teamId:n.id,from:oo})}({[go]:t,spaceId:s.id,presetUri:o,[so]:a})))return}const d=V||(i?i.getTeamPagesStores().find((e=>e.getFormat()[ao]&&e.getFormat()[ao]===n)):void 0);b.createAndCommit({[go]:t,userAction:"templateGallery.getTemplate",perform:e=>{const i=(0,w.p)().find((e=>e.uri===n)),a=null==i?void 0:i.presets.find((e=>e.uri===o));if(r&&a){const i=g.initializeApp({[go]:t,[no]:r,appUri:n,presetUri:a.uri,appParentStore:l,temporaryContainerBlockStore:d,transaction:e,from:oo});h.G({[go]:t,[no]:r,appParentStore:l,transaction:e,blockStores:i,creationEntryPoint:{type:io,presetUri:a.uri}})}}}),p.finalizeAppTemplate(t,{})}const S="preset"===e.type?e.uri:e[co].name,C=Date.now()-c,T=V?!Z.getTeam(V):!Boolean(i),P=T||null==i?void 0:i.id;m.trackTemplateModalAccept(t,{[uo]:S,destination:T?"private":"team",template_block_id:"pageTemplate"===e.type?e[co].rootId:void 0,template_duplication_duration_ms:C,team_id:P,created_page_id:u?u.id:null==V?void 0:V.id}),"preset"===e.type&&u&&m.trackCreateAppTemplateForPreset(t,{preset_uri:e.uri,created_block_stores:[u],from:oo,destination_team_id:P}),"pageTemplate"===e.type&&To(e[co].id)&&u&&m.trackCreateAppTemplateForWikiPageTemplate(t,{from:oo,wiki_block_id:u.id,destination_team_id:P,wiki_template_id:e[co].id})}),[t,V]),K=(0,a.useCallback)((()=>{const{[eo]:e}=F.default[So],{[yo]:i}=t,o=i[So].route;if(e&&"page"===o.name){const e=(0,P.p8)();f.navigate({[go]:t,url:e})}}),[t]);return n()(x.Z,{ariaLabel:i[Xi]({id:"templateGallery.dialogLabel",[Yi]:"Templates"}),open:"open"===E,innerStyle:u.modal,onDismiss:K,render:()=>"open"!==E?null:n()("div",{style:{height:"100%",display:"flex",[$i]:"row",[Mo]:8,overflow:Ji}},void 0,n()(Hi,{}),n()(st,{onAcceptTemplate:W}))})}function Co(e){let{[bo]:t,allTemplates:i}=e;if(!t||"gallery"===t){var o;return"team"===(null===(o=F.default[So][wo])||void 0===o?void 0:o.getPlanType())?{type:io,uri:Qi}:Zo(i)}const n=Object.values(i).flatMap((e=>e)).find((e=>"uri"in e?M.XR[e.uri]===t:e.previewRootId===t));return n?"uri"in n?{type:io,uri:n.uri}:{type:"pageTemplate",[co]:n}:Zo(i)}function Zo(e){const t=e[Object.keys(e)[0]][0];return"uri"in t?{type:io,uri:t.uri}:{type:"pageTemplate",[co]:t}}function To(e){return["defaultWiki","teamWiki","salesWiki","engineeringWiki","companyHome"].some((t=>u.Y[t].nameMessage.id===e))}},72340:(e,t,i)=>{i.d(t,{CN:()=>l,Tc:()=>d,$6:()=>c});var o=i(10161);const n=i(85).OCW,a=i(85).fHC,s=i(85).rHi,r=i(85).ToI,l=5;function d(e){return"on"===o.default[r]({[s]:"parallel_confluence_importer_via_api",[a]:"control"})}function c(e){return o.default[r]({[s]:n,[a]:l.toString()})}},8989:(e,t,i)=>{i.d(t,{t:()=>r,b:()=>l});var o=i(10161),n=i(72340);const a=i(85).x9H,s=i(85).ToI;function r(){return"on"===o.default[s]({experimentId:"generic_importer",defaultGroup:"control"})}function l(e){const t=o.default[s]({experimentId:a,defaultGroup:n.CN.toString()});return Number(t)}},37688:(e,t,i)=>{i.d(t,{_:()=>g});var o=i(24684),n=i(95477);const a=i(85).wNq,s=i(85).QIj,r=i(85).C7Z,l=i(85).YfZ,d=i(85).g6p,c=i(85).QOh,u=i(85).xU_,m=i(85).Rkz,p=i(85).$PO;function g(e){const t=(0,o.MZ)(n.default,e.intl,e.quantity,e.additionalAmount,e.alwaysShowCents);return{free:{[p]:t[u][p].free[m],[c]:t[u][p].free[d],[l]:t[u][l].free[m],[r]:t[u][l].free[d]},team_free:{[p]:t[u][p].free[m],[c]:t[u][p].free[d],[l]:t[u][l].free[m],[r]:t[u][l].free[m]},personal_free:{[p]:t[u][p].free[m],[c]:t[u][p].free[d],[l]:t[u][l].free[m],[r]:t[u][l].free[m]},student:{[p]:t[u][p].education[m],[c]:t[u][p].education[d],[l]:t[u][l].education[m],[r]:t[u][l].education[d]},personal:{[p]:t[u][p].pro[m],[c]:t[u][p].pro[d],[l]:t[u][l].pro[m],[r]:t[u][l].pro[d]},plus:{[p]:t[u][p].team[m],[c]:t[u][p].team[d],[l]:t[u][l].team[m],[r]:t[u][l].team[d]},team:{[p]:t[u][p].team[m],[c]:t[u][p].team[d],[l]:t[u][l].team[m],[r]:t[u][l].team[d]},[s]:{[p]:t[u][p][s][m],[c]:t[u][p][s][d],[l]:t[u][l][s][m],[r]:t[u][l][s][d]},[a]:{[p]:t[u][p][a][m],[c]:t[u][p][a][d],[l]:t[u][l][a][m],[r]:t[u][l][a][d]}}[e.subscriptionTier]}},4657:(e,t,i)=>{i.d(t,{U:()=>Z});var o=i(77094),n=i.n(o),a=(i(67294),i(480)),s=i(81954),r=i(24405),l=i(8848),d=i(3909),c=i(5366),u=i(64684),m=i(93678),p=i(74136);const g=i(85).nx5;const h=function(e){let{tier:t}=e;const i=()=>n()(c.FormattedMessage,"business"===t?{id:"upgradeToBusinessBadge",[g]:"Business"}:{id:"upgradeToEnterpriseBadge",[g]:"Enterprise"});return n()(p.Z,{},void 0,n()(i,{}))};var v=i(38755),f=i(79315),y=i(12205),b=i(45660),S=i(35901);const w=i(85).L_E,M=i(85).nx5,k=i(85).jkI,C=i(85).RJH;function Z(e){let{teamStore:t,isDefault:i,onChange:o=(()=>{})}=e;const p=(0,a.O7)(),g=(0,y.J)(),w=(0,S.y)(null==t?void 0:t.id),Z=(0,b.e)(),P="business",I=(0,s.VK)((()=>f.default.state.currentSpaceStore),[]),F=(0,s.VK)((()=>{if(I)return(0,v.rn)(p,I)}),[p,I]),_=(0,s.VK)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&("private"===(0,u.B5)(e)??!1)}),[t]),x=(0,r.yK)((()=>({openIcon:{width:20,height:20},lockIcon:{width:18,height:18},closedIcon:{width:20,height:20},[C]:{width:20,height:20,display:"flex",justifyContent:k,alignItems:k,marginLeft:5,marginRight:5}})),[]),A=n()(c.FormattedMessage,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",[M]:"Upgrade to Business Plan to enable Private teamspaces"}),B=n()(c.FormattedMessage,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",[M]:"Default"}),D=n()(c.FormattedMessage,{id:"TeamAccessLevelSwitcher.openTeamspace.title",[M]:"Open"}),E=n()(c.FormattedMessage,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",[M]:"Closed"}),L=n()(c.FormattedMessage,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",[M]:"Private"}),R="dark"===(0,r.Fg)().mode?l.ZP.uiLightGray:l.ZP.black,N=[{key:"open",icon:e=>n()("div",{style:x[C]},void 0,d.Z.openTeam({...e,...x.openIcon})),iconColor:R,level:D,title:D,caption:n()(c.FormattedMessage,{id:"CreateTeamspaceMenu.openTeamspace.caption",[M]:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>o("open",!1)},{key:"closed",icon:e=>n()("div",{style:x[C]},void 0,d.Z.closedTeam({...e,...x.closedIcon})),iconColor:R,level:E,title:E,caption:n()(c.FormattedMessage,{id:"CreateTeamspaceMenu.closedTeamspace.caption",[M]:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>o("closed",!1)},{key:"private",icon:e=>n()("div",{style:x[C]},void 0,d.Z.locked({...e,...x.lockIcon})),iconColor:R,level:L,title:Z?n()(T,{title:L,badge:n()(h,{tier:P})}):L,caption:n()(c.FormattedMessage,{id:"CreateTeamspaceMenu.privateTeamspace.caption",[M]:"Only members can see that this teamspace exists"}),disabled:Z&&!g,tooltip:Z?A:void 0,onSelect:()=>{if(Z&&!_)return m.y(p,{from:"team_security_settings",for:P,dontOpenPlansOnCancel:!0});o("private",!1)}}];if(i||g){const e=i&&(!g||w),t={key:"default",icon:e=>n()("div",{style:x[C]},void 0,d.Z.globe2({...e,...x.lockIcon})),iconColor:R,level:B,title:B,caption:n()(c.FormattedMessage,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",[M]:"Everyone at {spaceName} must be a member",values:{spaceName:F}}),disabled:!1,disableAllOptionsTooltip:e?n()(c.FormattedMessage,g?{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",[M]:"Add another default teamspace to change teamspace permissions."}:{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",[M]:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>o("open",!0)};N.unshift(t)}return N}function T(e){let{title:t,badge:i}=e;window.__c={n:"TitleWithBadge"};const o=(0,r.yK)((()=>({[w]:{display:"flex",flexWrap:"wrap",alignItems:k},badge:{marginLeft:5}})),[]);return n()("div",{style:o[w]},void 0,t,n()("div",{style:o.badge},void 0,i))}},14275:(e,t,i)=>{i.r(t),i.d(t,{GlobalSearchStaticContext:()=>Hr,GlobalSearchStoresContext:()=>qr,default:()=>Qr});var o=i(77094),n=i.n(o),a=i(96486),s=i.n(a),r=i(67294),l=i(83355),d=i(13991),c=i(49085),u=i(15145),m=i(49271),p=i(1800),g=i(84908),h=i(95477),v=i(43250),f=i(24042),y=i(2342),b=i(97464),S=i.n(b),w=i(81954),M=i(24405),k=i(36488),C=i(56940),Z=i(78140),T=i(87279),P=i(35630),I=i(88632),F=i(3909),_=i(70203),x=i(82990),A=i(5366),B=i(74194),D=i(68785),E=i(31278),L=i(33411),R=i(34700),N=i(80084),O=i(38755),U=i(79315),V=i(92338),W=i(29026);const K=i(85).VMs,z=i(85).QmD,G=i(85).Wp_;class H extends c.default{constructor(){super(...arguments),this.resetQuery=()=>{this[G]({...this[z],[K]:{...this[z][K],text:"",filters:(0,V.createDefaultFilters)()},limit:W.Xv})},this.updateQueryText=e=>{this[G]({...this[z],[K]:{...this[z][K],text:e},limit:W.Xv})}}getInitialState(){return{isOpen:!1,[K]:{text:"",filters:(0,V.createDefaultFilters)(),sort:{field:"relevance"}},limit:20}}}const q=new H,j=i(85).nxm,Q=i(85).Uie,J=i(85).PXg,$=i(85).dLQ,Y=i(85).wgE,X=i(85).AIq,ee=i(85).XCs,te=i(85).YDv,ie=i(85).wJv,oe=i(85).PcI,ne=i(85).GPG,ae=i(85).t7b,se=i(85).G4H,re=i(85).Ixd,le=i(85).U7z,de=i(85).TtP,ce=i(85).oUH,ue=i(85).Ttb,me=i(85).P0R,pe=i(85).e$R,ge=i(85).QmD,he=i(85).Kgm,ve=i(85).EIp,fe=i(85)._6l;class ye extends l.Z{constructor(){super(...arguments),this[fe]=void 0,this.combined=this[ve]((()=>{var e,t;return N.combineResults({[he]:null===(e=this[me][pe][ge][he])||void 0===e?void 0:e[ue],[ce]:null===(t=this[me][pe][ge][ce])||void 0===t?void 0:t[ue]})})),this.jumpToStore=this[ve]((()=>{const e=this.combined[ge],t=this[me].focusedIndexStore[ge];if(!e||e[de]<0||void 0===t)return;const i=e[t];return{focusedResultTitle:_[le](null==i?void 0:i.store[re]()),focusedResultIcon:null==i?void 0:i.store.getIcon()}})),this.renderLeft=e=>{var t,i;const{showSpinner:o}=this[me],a=this[se],s={...this[ae]().searchIcon,...a.searchIcon()},r=Boolean(q[ge].query.text.trim()),l=null===(t=this.jumpToStore)||void 0===t||null===(i=t[ge])||void 0===i?void 0:i.focusedResultIcon,d=r?n()(E.Z,{disabled:!0,icon:l,isEmptyPage:Boolean(l),size:20,style:s}):F.Z.search(s);return n()(L.Z,{show:o,showDelay:500,showHold:200,render:e=>e?n()(D.Z,{style:s}):d})},this[ne]=e=>{this.handleTyping();const t=String(e.target.value);this[me].onQueryChange(t)},this[oe]=()=>{q.resetQuery()},this[se]={[ie]:{fontSize:18,height:ye.DESKTOP_INPUT_HEIGHT,[te]:16,[ee]:16,flexGrow:0,[X]:0,zIndex:1,...(0,R.X)(!0,!0)},searchIcon:()=>{const{device:e}=this[Y];return{width:e[$]?16:18,height:e[$]?16:18,[J]:e[$]?12:10,flexGrow:0,[X]:0}},input:{minWidth:0,...x.Z[Q],...(0,R.X)(!0,!1)},clearButton:{...(0,R.X)(!0,!1)}}}willUnmount(){this[fe]&&(clearTimeout(this[fe]),this[fe]=void 0)}renderComponent(){var e;const{device:t}=this[Y],{isOpen:i,[pe]:o}=this[me],a=this[se],s=this[ae](),r=null===(e=this.jumpToStore[ge])||void 0===e?void 0:e.focusedResultTitle,l=q[ge].query.text,d=(null==r?void 0:r.slice(0,l[de])[j]())===l[j]()&&l&&l[de]<20&&!t[$]?l+(null==r?void 0:r.substring(l[de])):"",c=B.Z.Format.Transparent,u={...a[ie],...s[ie]};return n()(B.Z,{format:c,placeholder:this.getPlaceholderText(),left:this.renderLeft(o),value:l,suggestedText:d,focus:i,focusInitial:!0,focusAfterAnimation:!0,showClearButton:!0,clearButtonStyle:a.clearButton,selectAll:!0,onChange:this[ne],onClearButtonClick:this[oe],style:u,inputStyle:a.input,window:this[me].window})}handleTyping(){const{onTypingChange:e}=this[me];this[fe]&&window.clearTimeout(this[fe]),e(!0),this[fe]=window.setTimeout((()=>e(!1)),ye.TYPING_DEBOUNCE_MS)}getPlaceholderText(){const{currentSpaceStore:e}=U.default[ge],t=e&&(0,O.rn)(this[Y],e);if(t)return this[me].intl.formatMessage({id:"searchInputMenuItem.placeholder.namedSpace",defaultMessage:"Search {spaceName}…"},{spaceName:t})}[ae](){return{[ie]:{boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`},inputMobile:{background:this.theme.inputBackground},searchIcon:{fill:this.theme.mediumIconColor}}}}ye.displayName="SearchInputMenuItem",ye.TYPING_DEBOUNCE_MS=300,ye.DESKTOP_INPUT_HEIGHT=48,ye.MAX_PLACEHOLDER_TITLE_LENGTH=100;const be=(0,A.injectIntl)(ye);var Se=i(97880),we=i(32163),Me=i(43145),ke=i(72495),Ce=i(28020),Ze=i(15447),Te=i(69327),Pe=i(480),Ie=i(28992),Fe=i(75024);const _e=i(85).D7I,xe=i(85).TEz,Ae=i(85).Exd;const Be=e=>({[Ae]:12,color:e[xe],marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),De=function(e){window.__c={n:"GlobalSearchFooterContainer"};const t=(0,Pe.O7)(),{device:i}=t,o=(0,M.yK)((e=>({footer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",[Ae]:i.isMobile?x.Z[Ae].UIRegular.mobile:x.Z[Ae].UIRegular.desktop},footerWrapper:{flexShrink:0,...(0,R.X)(!0,!0)},footerText:{color:e[xe],[Ae]:Fe.yv(t,"UISmall"),...x.Z.textOverflowStyle},footerDebugButton:{...Be(e),marginRight:6}})),[i.isMobile,t]);return n()("footer",{style:o.footerWrapper},void 0,n()(ke.Z,{topBorder:!0,style:o.footer,disableDesktopPadding:!0},void 0,r[_e](Ie.Z,S()({},e,{style:o.footerText}))))},Ee=i(85).nx5,Le=i(85).Yzm,Re=i(85).TEz,Ne=i(85).Hco,Oe=i(85).jtM,Ue=i(85).PXg;function Ve(){window.__c={n:"GlobalSearchFooterNavigationHints"};const e=(0,Pe.O7)(),t=(0,A.useIntl)(),i=(0,M.yK)((t=>({upDownIcon:{[Ue]:4,marginBottom:-2,display:Oe,width:12,height:12,fill:t[Ne]},enterIcon:{[Ue]:4,marginBottom:-2,display:Oe,width:11,height:11,fill:t[Ne]},commandGlyph:{fontSize:.75*Fe.yv(e,"UIRegular"),paddingRight:1,color:t[Re]},footerText:{fontSize:Fe.yv(e,"UISmall"),color:t[Re],...x.Z.textOverflowStyle},inlineHint:{display:Oe,[Ue]:16}})),[e]),o={...Fe.mK,...i.footerText};return n()("ul",{style:o},void 0,n()("li",{style:i.inlineHint},void 0,F.Z.enter(i.enterIcon),t[Le]({id:"searchFooter.helpText.openNewTab",[Ee]:"Open in a new tab"})))}var We=i(94184),Ke=i.n(We),ze=i(8848),Ge=i(79362),He=i(21202),qe=i(32739),je=i(45168),Qe=i(24039),Je=i(90403),$e=i(52275),Ye=i(64133),Xe=i(71669),et=i(86176),tt=i(76798),it=i(58032),ot=i(69988),nt=i(98742),at=i(98165),st=i(8323),rt=i(16402),lt=i(39098),dt=i(73299),ct=i(40793),ut=i(99208),mt=i(64921),pt=i(31945),gt=i(96525),ht=i(40721),vt=i(89728),ft=i(11470),yt=i(23537);const bt=i(85).TEz,St=i(85).j7K,wt=i(85).y79,Mt=i(85).nx5,kt=i(85).Exd,Ct=i(85).XCs,Zt=i(85).YDv,Tt=i(85).vSE,Pt=i(85).oWv,It=i(85).D7I,Ft=i(85).BBN,_t=i(85).PvR,xt=i(85).dLQ,At=i(85).gcw,Bt=i(85).TtP,Dt=i(85).BQ6,Et=i(85).bey,Lt=i(85).yKA,Rt=i(85).P0R,Nt=i(85).SvQ,Ot=i(85).fBf;class Ut extends l.Z{constructor(){super(...arguments),this[Ot]=e=>({maxWidth:this[Rt][Nt],iconSize:this[Rt].iconSize,titleStyle:this[Lt](),[Et]:Ut[Et],highlighter:this[Rt].highlighter})}renderComponent(){const{store:e}=this[Rt],t=e.getTitleStore();if(t&&t.isReady())return n()("div",{[Dt]:this.getStyle(),className:"notranslate"},void 0,this.renderAncestors())}renderAncestors(){const{store:e,maxAncestorCount:t}=this[Rt],i=at.getNavigablePath(e),o=e.isNavigableBlock()?i.slice(1):[...i];if(o.reverse(),i.reverse(),o[Bt]>t){const[e,n,a]=[o[0],o.slice(1,o[Bt]-t+1),o.slice(o[Bt]-t+1)];if((0,yt.bq)()){const t=a[Bt];return[this[At]({store:e,showDivider:!this[Rt][xt]}),this[_t](this[Rt][xt]?i:n),...a.map(((e,i)=>{const o=!this[Rt][Ft]||i!==t-1;return e instanceof lt.zX?r[It](ut.Z,S()({key:e.id,store:e,showDivider:o},this[Ot](e))):r[It](ct.Z,S()({key:e.id,store:e,showDivider:o},this[Ot](e)))}))]}{const e=o.filter((e=>e instanceof lt.G)),i=o.filter((e=>e instanceof lt.G)),n=e[Bt];return[r[It](ct.Z,S()({key:e[0].id,store:e[0],showDivider:!this[Rt][xt]},this[Ot](e[0]))),this[_t](this[Rt][xt]?i:e.slice(1,e[Bt]-t+1)),...e.slice(e[Bt]-t+1).map(((e,t)=>r[It](ct.Z,S()({key:e.id,store:e,showDivider:!this[Rt][Ft]||t!==n-1},this[Ot](e)))))]}}{const e=o[Bt];return o.map(((t,i)=>this[At]({store:t,showDivider:!this[Rt][Ft]||i!==e-1})))}}[At](e){const{store:t,showDivider:i}=e;return t instanceof lt.zX?r[It](ut.Z,S()({store:t,showDivider:i},this[Ot](t))):r[It](ct.Z,S()({store:t,showDivider:i},this[Ot](t)))}[Pt](e){const t=this[Rt][xt]?pt.Z4.SlideUp:pt.Z4.Popup;return[{key:"results",render:e=>r[It](ke.Z,e),items:e.map(((e,i)=>({key:e.id,render:o=>r[It](gt.Z,S()({},o,{stopClickPropagation:!0,popupType:t,renderOrigin:t=>r[It](ft.Z,S()({},t,{isSubpage:0!==i,store:e,hidePath:!0,focused:!1})),render:e=>{}})),action:()=>{}})))}]}[_t](e){return n()(pt.ZP,{popupType:this[Rt][xt]?pt.Z4.SlideUp:pt.Z4.Popup,renderOrigin:e=>{var t;return this[Rt][xt]?r[It](mt.Z,S()({[Dt]:{...Ut[Tt]},mobileFeedback:!0},e),n()(dt.f,{}),n()("div",{[Dt]:Vt},void 0,"..."),n()(dt.f,{})):n()("div",{[Dt]:Ut[Tt]},void 0,r[It](vt.Z,S()({isSmall:!0},e,{[Dt]:{[Zt]:2,[Ct]:2,[kt]:null===(t=this[Rt][Dt])||void 0===t?void 0:t[kt]}}),"..."),n()(dt.f,{}))},render:t=>{let i;return i=this[Rt][xt]?{menuType:T.og.Modal,title:n()(A.FormattedMessage,{[Mt]:"Breadcrumb",id:"globalSearch.breadcrumb.mobileBreadcrumbMenu.title"}),right:n()(ht.DoneMenuText,{}),onClickRight:t.close}:{menuType:T.og.Popup,width:240},r[It](Z.Z,i,n()(we.Z,{type:we.i[wt],[St]:void 0,sections:this[Pt](e)}))}},"pages-popup")}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,[kt]:this[Rt][xt]?x.Z[kt].UIRegular.mobile:x.Z[kt].UIRegular.desktop,color:this.theme[bt],filter:"grayscale(70%)",...this[Rt][Dt]}}[Lt](){return{lineHeight:1.2,[kt]:this[Rt][xt]?x.Z[kt].UISmall.mobile:x.Z[kt].UISmall.desktop,color:this.theme[bt]}}}Ut.displayName="SearchPathBreadcrumb",Ut[Et]={marginRight:3},Ut[Tt]={display:"flex",alignItems:"center",flexShrink:0};const Vt={marginLeft:3,marginRight:3},Wt=i(85).TEz,Kt=i(85)._Fe,zt=i(85).wuN,Gt=(i(85).BBN,i(85).SvQ,i(85).YGn),Ht=i(85).NF1,qt=i(85).NR2,jt=i(85).M4f,Qt=i(85).nx5,Jt=i(85).paz,$t=i(85).GmX,Yt=i(85).rBf,Xt=i(85).gFR,ei=i(85).h8z,ti=i(85).UPJ,ii=i(85).otH,oi=i(85).IYn,ni=i(85).fR6,ai=i(85).JBY,si=i(85).zkl,ri=i(85).TLr,li=i(85).VRX,di=i(85).yrE,ci=i(85).bSY,ui=i(85).fbO,mi=i(85).cZW,pi=i(85).XtO,gi=i(85).Joh,hi=i(85).Au,vi=i(85).lWm,fi=i(85).Scd,yi=i(85).BQ6,bi=i(85).NlW,Si=i(85).Oi5,wi=i(85).t7b,Mi=i(85).P0R,ki=i(85).zEC,Ci=i(85).tBn,Zi=i(85).D7I,Ti=i(85).PG2,Pi=i(85).FOQ,Ii=i(85).DIE,Fi=i(85).Wp_,_i=i(85).xad,xi=i(85).TtP,Ai=i(85).XCs,Bi=i(85).T9w,Di=i(85).aFd,Ei=i(85).g4H,Li=i(85).jkI,Ri=i(85).PXg,Ni=i(85).sM5,Oi=i(85).X_m,Ui=i(85).NLk,Vi=i(85).nNG,Wi=i(85).EMU,Ki=i(85).H1U,zi=i(85).XNW,Gi=i(85).Mm1,Hi=i(85).wgE,qi=i(85).E0z,ji=i(85).dLQ,Qi=i(85)._V5,Ji=i(85).jms,$i=i(85).Exd,Yi=i(85).OM8,Xi=i(85).ChN,eo=i(85).G4H,to=i(85).wfR,io=i(85).zQS;class oo extends l.Z{constructor(){super(...arguments),this.storeTypes={[io]:c.default[to](!1)},this[eo]={title:{[Xi]:x.Z[Xi].medium,[Yi]:"20px"},jumpToTitle:{[Xi]:x.Z[Xi].medium,[$i]:15,[Yi]:"20px"},menuItem:{[Ji]:36,[Qi]:this[Hi][qi][ji]?12:8,[Gi]:this[Hi][qi][ji]?12:8},textWrapper:{[zi]:10,[Ki]:void 0,[Wi]:void 0,width:"100%"},inlineTextWrapper:{[Ki]:"baseline"},[Vi]:{[Xi]:x.Z[Xi].medium},vectorHighlight:{[Xi]:x.Z[Xi].medium,[Ui]:"pre-wrap"},enterIcon:{[Oi]:14,width:14},uniqueIDBadgeWrapper:{[Ni]:Wi,gap:8,[Ri]:8,[Ki]:Li},[Ei]:{marginTop:1},debugArea:{[Di]:"monospace"},[Bi]:{[$i]:x.Z[$i].UISmall.desktop,[Xi]:x.Z[Xi].regular},toolTip:{maxWidth:300},toolTipTitle:{[Xi]:x.Z[Xi].medium,[$i]:x.Z[$i].UISmall.desktop},toolTipText:{[Xi]:x.Z[Xi].medium,[$i]:x.Z[$i].UISmall.desktop,[zi]:0,[Ai]:20},toolTipValue:{[$i]:x.Z[$i].UISmall.desktop,[Xi]:x.Z[Xi].regular},toolTipMenuItem:{[Ji]:20}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:i}=e;if(2===i[xi]&&"_explanation"===i[0])return{[_i]:r[Zi](r[Ci],null,n()(Pi,{[Ti]:e=>{this.stores[io][Fi](!0),e[Ii]()}},void 0,"show simplified explanation")),[ki]:!1};const o=t._ltrlog;if(o)return function(e){const t=Object.keys(e[0])[0],i=e[0][t].map(((e,t)=>{const i=t%2==0?so:ao;return n()("tr",{},e.name,n()("td",{[yi]:i},void 0,`${t}`),n()("td",{[yi]:i},void 0,`${e.name}`),n()("td",{[yi]:i},void 0,`${e.value}`))}));return{[_i]:r[Zi](r[Ci],null,n()("div",{},void 0,n()("b",{},void 0,`Featureset: ${t}`)),n()("div",{[yi]:{maxHeight:200,overflowY:"scroll"}},void 0,n()(si,{[yi]:{border:"1px solid black"}},void 0,i))),[ki]:!1}}(o);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:a,matched_queries:s}=t;return{[_i]:r[Zi](r[Ci],null,`score ${a}, ${(s??[])[xi]} matched query clauses`),[ki]:!1}}}renderComponent(){const{focused:e,isLastInSection:t,isBeforeFocused:i,inline:o,className:a}=this[Mi],s=this[eo],l=this[wi](),d={...s.menuItem,...!o&&!t&&!i&&!e&&l.menuItemBorder},c={...s[Ei],...l[Ei]},u={...s[Bi],...l[Bi]},m={...s.textWrapper,...this[Mi].inline&&s.inlineTextWrapper},p={title:this.renderTitle(),icon:this.renderIcon(),[Ei]:this[Si](),body:this[bi](),right:this.renderRight(e),rightStyle:e?void 0:u,dontShrinkRight:!0,captionStyle:c,[yi]:d,spacerStyle:this.hasPath()?void 0:lo,textWrapperStyle:m,className:Ke()("notranslate",a),buttonStyle:{paddingLeft:2},hoveredStyle:{[fi]:this[hi][vi]}};return(0,st.isMultiplayerEnabled)()?n()(it.Z,{delayThreshold:50,disableTooltip:!0,placement:it.Z.Placement.Right,originGap:18,[gi]:()=>this[gi](),[yi]:s.toolTip,render:e=>r[Zi]($e.Z,S()({},this[Mi],p,{disableTransition:!0,ignoreLocalHoverState:!0},(0,nt.Z)(e,this[Mi])))}):r[Zi]($e.Z,S()({},this[Mi],p,{disableTransition:!0,ignoreLocalHoverState:!0}))}[gi](){return n()(Qe.Z,{[pi]:this[Mi][pi]})}renderTitle(){var e,t,i;const{[pi]:o,result:a,[mi]:s,index:r}=this[Mi],l=this[eo],d=this[wi](),c=void 0===a,u={...(null==a?void 0:a[ci][ui](V.SearchResultSource.Local))&&0===r?l.jumpToTitle:l.title,...!c&&d[di]},m=[];if(a&&a[Vi])if(m.push(...(0,ot.fe)(a[Vi].pathText)),this[li]())m.push(...(0,ot.fe)(a[Vi].title));else{lt.G[ri](this[Mi][pi],{[si]:He.iU,id:a.id,spaceId:a.spaceId})[ai]()&&m.push(...(0,ot.fe)(a[Vi].text))}let p,g=!1;var v;"development"===h.default.env&&(null!=a&&null!==(e=a[ci])&&void 0!==e&&e[ui](V.SearchResultSource[ni])||null!=a&&null!==(t=a[ci])&&void 0!==t&&t[ui](V.SearchResultSource[oi]))&&(g=!0,p=null!=a&&null!==(v=a[ci])&&void 0!==v&&v[ui](V.SearchResultSource[ni])?"Vector Block":"Vector Collection");const f=this[ii]({words:m}),y=null===(i=(0,at.getTeam)(o))||void 0===i?void 0:i.isArchived(),b=(0,je.e)(a);return n()("div",{[yi]:{[Ni]:Wi,[ti]:ei,...u}},void 0,n()("div",{[yi]:{[Ni]:Wi}},void 0,b&&this[Xt](a),n()(tt.Z,{[yi]:u,[pi]:o,[mi]:s,highlighter:f}),g&&n()(Je.Z,{[Jt]:p,[yi]:{[fi]:this[hi][Yt],color:this[hi][$t]}}),y&&n()(Je.Z,{[Jt]:n()(A.FormattedMessage,{id:"globalSearch.result.archived.badge.text",[Qt]:"Archived"}),[yi]:ro})))}[Xt](e){var t;const{focused:i}=this[Mi],o=null==e||null===(t=e[Vi])||void 0===t?void 0:t.uniqueId;if(!o)return;const a="dark"===this[Hi].ThemeStore.state.mode,s=this[eo],r=this[ii]({words:[o]}),l=i?a?ze.FN.dark[jt][300]:ze.se.light.darkgray.alpha(.09):a?ze.FN.dark[jt][200]:ze.se.light.darkgray.alpha(.06);return n()("div",{[yi]:s.uniqueIDBadgeWrapper},void 0,n()("div",{},void 0,n()(Ye.Z,{text:o,highlighter:r})),n()("div",{[yi]:{[qt]:`1.5px solid ${l}`,[Oi]:14,[Ht]:1}}))}renderRight(e){const{result:t}=this[Mi],i=Boolean(t);return n()("div",{[yi]:{[Ni]:Wi,width:i?this[eo].enterIcon.width:void 0}},void 0,e?this.renderEnterIcon():this.renderTimestamp())}renderTimestamp(){const{result:e,lastViewed:t}=this[Mi];if(!e&&t)return(0,rt.IS)(t,{useCompactFormat:!0})}renderIcon(){const{[pi]:e}=this[Mi],t=e.getIcon();if(t&&Ge.isNotionStaticIcon(t.icon)){const e=(0,qe.NV)({httpUrl:h.default.domainBaseUrl,protocol:h.default.protocol,includePort:!0}),i={width:20,[Oi]:20,objectFit:"cover",[Ht]:3,transition:"opacity 100ms ease-out"};return n()("div",{[yi]:{[Ni]:Wi,[Ki]:Li,[ti]:Li,[Oi]:20,width:20,[Ht]:"0.25em",flexShrink:0},className:`${v.recordIcon} notranslate`},void 0,n()("div",{},void 0,n()(Xe.Z,{src:`${e}${t.icon}?mode=${this[hi].mode}`,[yi]:{...i,[fi]:void 0},onContextMenu:e=>e[Gt]()})))}return r[Zi](r[Ci],null,n()(E.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:20,largeIcon:!0}))}[Si](){const{[pi]:e,inline:t,result:i}=this[Mi],o=this[ii]({words:(0,ot.fe)(i&&i[Vi]&&i[Vi].pathText),removeDuplicate:!0}),{[qi]:a}=this[Hi],s=t||a[ji]?0:2;return r[Zi](r[Ci],null,n()(et.Z,{[pi]:e,extraLength:s,showFullPathInTooltip:!0,highlighter:o}))}[bi](){var e,t;const{result:i}=this[Mi];if(!i)return;if(!i[Vi])return;if(lt.G[ri](this[Mi][pi],{[si]:He.iU,id:i.id,spaceId:i.spaceId})[ai]()&&!this[li]())return;if(!i[Vi].text)return;const o=i[Vi].text,a=(0,ot.ZP)(o);if(this[li]()){const e=e=>e.filter(ot.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,ot.ZP)(t)),o=[...new Set([...t(i[Vi].title),...t(i[Vi].pathText)])],n=e=>o.some((t=>t[ui](e)));if(e(a).every((e=>n(e))))return}const s=this[eo],l=null!==(e=i[ci])&&void 0!==e&&e[ui](V.SearchResultSource[ni])||null!==(t=i[ci])&&void 0!==t&&t[ui](V.SearchResultSource[oi])?s.vectorHighlight:s[Vi],d=this[wi]();return r[Zi](r[Ci],null,n()(Ye.Z,{text:o,highlighter:{tokenize:e=>(0,ot.Vu)(a),[yi]:{...l,...d[Vi]}}}))}[li](){const{result:e}=this[Mi];return e&&!e[ci][ui](V.SearchResultSource.Local)}[ii](e){const{words:t,removeDuplicate:i}=e;if(0===t[xi])return;const o={...this[eo][Vi],...this[wi]()[Vi]},n=i?new Set:void 0;return{tokenize:e=>(0,ot.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:n}),[yi]:o}}renderEnterIcon(){const{[qi]:e}=this[Hi],{focused:t}=this[Mi],i=this[eo],o=this[wi]();if(e[ji])return;const n={...i.enterIcon,...o.enterIcon,opacity:t?1:0};return F.Z.enter(n)}hasPath(){const{hidePath:e,[pi]:t}=this[Mi];return!e&&(0,et.L)(t)}[wi](){return{[di]:{color:this[hi][zt]},menuItemBorder:{boxShadow:`0 1px 0 ${this[hi].lightDividerColor}`},[Vi]:{color:this[hi][Kt]},enterIcon:{fill:this[hi].mediumIconColor},[Ei]:{color:this[hi][zt]},[Bi]:{color:this[hi][Wt]},toolTipTitle:{color:this[hi][zt]},toolTipText:{color:this[hi][Kt]},toolTipValue:{color:this[hi][Wt]}}}}oo.displayName="SearchResultMenuItem",oo.contextTypes={...T.mw,...l.w};const no=oo,ao={paddingLeft:5,[Ai]:20,[Qi]:2,[Gi]:2,border:"1px solid black",color:ze.FN.dark.green[900]},so={...ao,color:ze.FN.dark.gray[30]};const ro={[Xi]:x.Z[Xi].regular},lo={visibility:"hidden"},co=(i(85).QaA,i(85).rLh,i(85).nx5),uo=i(85).o9u,mo=i(85).XNW,po=i(85).g7N,go=i(85).ChN,ho=i(85).nAm,vo=i(85).gGi,fo=i(85).Wp_,yo=i(85).g65,bo=i(85).Gnd,So=i(85).ve3,wo=i(85).Dd5,Mo=i(85).m3I,ko=i(85).nQ3,Co=i(85).j7K,Zo=i(85).y79,To=i(85).rGB,Po=i(85).lsp,Io=i(85).ELX,Fo=i(85).D7I,_o=i(85).YDv,xo=i(85).dLQ,Ao=i(85).XtO,Bo=i(85).cmB,Do=i(85).Juc,Eo=i(85).qJ8,Lo=i(85).wgE,Ro=i(85).QmD,No=i(85).XjH,Oo=i(85).chv,Uo=i(85).wfR,Vo=i(85).RlD;class Wo extends l.Z{constructor(){super(...arguments),this.storeTypes={[Vo]:c.default[Uo](!1),[Oo]:c.default[Uo](!1)},this[No]=()=>{if(!Ze.X4[Ro])return;const{device:e}=this[Lo],t=this.defaultViewStyles,{[Eo]:i}=U.default[Ro];if(!i)return;const o=(0,Ce.getCurrentPageStore)(),a=Ze.X4[Ro].filter((e=>e[Do]!==(null==o?void 0:o.id))),s={};a.forEach((e=>{let{[Do]:t,[Bo]:i}=e;return s[t]=i}));const l=new Map;a.map(((t,i)=>{const o=Ze._5(t[Bo]),n="Today"!==o&&"Yesterday"!==o,a={key:`${t[Ao].id}:${i}`,action:e=>this.props.onSelect({[Ao]:t[Ao],action:e}),render:i=>r[Fo](no,S()({},i,{inline:!e[xo],[Ao]:t[Ao],hidePath:!1,lastViewed:n?s[t[Ao].id]:void 0,[Io]:{[_o]:1}}))};var d;l.has(o)?null===(d=l.get(o))||void 0===d||d.push(a):l.set(o,[a])}));const d=[];for(const[r,u]of l.entries()){const e=this.getMessageFromBucket(r),i={key:r,items:u,render:i=>n()(ke.Z,{title:e,desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t[Po]},void 0,i[To])};d.push(i)}const c=!e[xo]&&a.length>0;return r[Fo](r.Fragment,null,n()("div",{style:t.wrapper},void 0,n()(we.Z,{type:we.i[Zo],[Co]:0,disableKeyboardArrowWrap:!0,[ko]:d,unfocusOnScroll:!0}),n()(Me.Z,{[wo]:this[Mo]})),c&&n()(De,{title:n()(Ve,{})}))},this[Mo]=e=>{this[So]()&&e<=200&&!this[bo][Vo][Ro]&&!this[bo][Oo][Ro]&&this.loadMoreRecents()},this.loadMoreRecents=s().throttle((async()=>{const e=this[So](),{[Eo]:t}=U.default[Ro],i=this[Lo][yo].id,o=null==t?void 0:t.id;if(!i||!o||!e)return;this[bo][Vo][fo](!0);const n=await Ze.Od(e,{[Lo]:this[Lo],userId:i,spaceId:o});this[bo][Vo][fo](!1),n||this[bo][Oo][fo](!0)}),300),this.defaultViewStyles={wrapper:{width:vo,height:vo,overflowX:ho,overflowY:"auto"},sectionHeader:{[go]:x.Z[go].semibold,[po]:7,[mo]:2},[Po]:{[po]:18}}}[So](){const{[Eo]:e}=U.default[Ro];if(!e)return;const t=Te.Z[uo](e.id),i=t[t.length-1];return null==i?void 0:i[Bo]}getMessageFromBucket(e){switch(e){case"Today":return n()(A.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.today.text",[co]:"Today"});case"Yesterday":return n()(A.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.yesterday.text",[co]:"Yesterday"});case"Past Week":return n()(A.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.pastWeek.text",[co]:"Past Week"});case"Past 30 Days":return n()(A.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.past30Days.text",[co]:"Past 30 Days"});case"Older":return n()(A.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.older.text",[co]:"Older"})}(0,Se.unreachable)(e)}}Wo.displayName="SearchDefaultBody";const Ko=Wo;var zo=i(87531),Go=i(99417),Ho=i(29798),qo=i(53953),jo=i(63296),Qo=i(77907),Jo=i(32470);const $o=i(85).wuN,Yo=i(85).PG2,Xo=i(85).wJk,en=i(85).sI1,tn=i(85).Wp_,on=i(85).Gnd,nn=i(85).QmD,an=i(85).tBn,sn=i(85).D7I,rn=i(85).s1d,ln=i(85).vNt,dn=i(85).wiT,cn=i(85).nx5,un=i(85).Yzm,mn=i(85).e$R,pn=i(85).t7b,gn=i(85).P0R,hn=i(85).XNW,vn=i(85).KoE,fn=i(85).x5w,yn=i(85).g7N,bn=i(85).V3,Sn=i(85).rI1,wn=i(85).ChN,Mn=i(85).Tr,kn=i(85).PXg,Cn=i(85).jtM,Zn=i(85).Uie,Tn=i(85).Y9u,Pn=i(85).Exd,In=i(85).jkI,Fn=i(85).H1U,_n=i(85).h8z,xn=i(85).UPJ,An=i(85).$bT,Bn=i(85).EMU,Dn=i(85).sM5,En=i(85).wgE,Ln=i(85).G4H,Rn=i(85).sh$,Nn=i(85).wfR,On=i(85).E4f;class Un extends l.Z{constructor(){super(...arguments),this.storeTypes={[On]:c.default[Nn](!1),[Rn]:c.default[Nn](!1)},this[Ln]={footer:()=>{const{device:e}=this[En];return{[Dn]:Bn,[An]:"row",[xn]:_n,[Fn]:In,[Pn]:e.isMobile?x.Z[Pn][Tn].mobile:x.Z[Pn][Tn].desktop}},footerText:{[Pn]:Fe.yv(this[En],"UISmall"),...x.Z[Zn]},inlineHint:{[Dn]:Cn,[kn]:16},resultCountWrapper:{[Dn]:Bn,[Fn]:In,...x.Z[Zn]},[Mn]:{[wn]:x.Z[wn].medium},resultText:{[Sn]:"middle",[kn]:6},spinner:{[Dn]:Cn,width:12,height:12,[Sn]:"middle"},[bn]:{[kn]:4,[yn]:1,fontVariant:"all-small-caps",[Pn]:1.1*Fe.yv(this[En],"UISmall")},commandGlyph:{[Pn]:.75*Fe.yv(this[En],"UIRegular")},[fn]:Be(this.theme),[vn]:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{[hn]:15}}}renderComponent(){const{shouldShow:e}=this[gn];if(!("production"!==h.default.env&&"staging"!==h.default.env)&&!e)return;const t=this[Ln],i=this[pn](),o={...t[Mn],...i[Mn]},{count:a,isLowerBound:s}=this[gn][mn].getResultCount(),l=n()("span",{style:t.resultText},void 0,s?this[gn].intl[un]({id:"SearchResultsFooter.helpText.resultCountApproximate",[cn]:dn},{[Mn]:a,resultwrapper:e=>n()("span",{style:o},void 0,e)}):this[gn].intl[un]({id:"SearchResultsFooter.helpText.resultCount",[cn]:ln},{[Mn]:a,resultwrapper:e=>n()("span",{style:o},void 0,e)})),d=n()("div",{style:t.resultCountWrapper},void 0,l,this.renderSpinner(this[gn].showSpinner),n()("div",{style:t.navigationHints},void 0,n()(Ve,{})));return n()(De,{title:d,right:r[sn](r[an],null,this[rn]())})}renderSpinner(e){const t=this[Ln];return n()(L.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&n()(D.Z,{style:t.spinner})})}[rn](){var e,t;if(!Jo.ZP[nn].debug&&!Jo.ZP[nn].showDebugInfo)return;const{rawRequests:i,rawResponses:o}=(null===(e=this[gn][mn][nn].serverResults)||void 0===e||null===(t=e.debugInfo)||void 0===t?void 0:t.response)||{};return r[sn](r[an],null,i&&r[sn](r[an],null,n()(qo.Z,{open:this[on][On][nn],[en]:this[Ln][vn],[Xo]:()=>{this[on][On][tn](!1)},render:()=>n()(Qo.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:i})}),n()(jo.Z,{style:this[Ln][fn],[Yo]:()=>this[on][On][tn](!0)},void 0,"Open Request")),o&&r[sn](r[an],null,n()(qo.Z,{open:this[on][Rn][nn],[en]:this[Ln][vn],[Xo]:()=>{this[on][Rn][tn](!1)},render:()=>n()(Qo.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:o},defaultCollapsed:!1})}),n()(jo.Z,{style:this[Ln][fn],[Yo]:()=>this[on][Rn][tn](!0)},void 0,"Open Response")))}[pn](){return{footerText:{color:this.theme.lightTextColor},[Mn]:{color:this.theme[$o]},[bn]:{color:this.theme[$o]}}}}Un.displayName="SearchResultsFooter";const Vn=(0,A.injectIntl)(Un);var Wn=i(43765),Kn=i(64369);const zn=i(85).RJH,Gn=i(85).lWm,Hn=i(85).gdQ;function qn(e){window.__c={n:"GlobalSearchActionMenuItem"};const{inline:t,title:i,icon:o,focused:n,isBeforeFocused:a,className:s}=e,l=(0,M.yK)((e=>({[Hn]:{background:e[Gn]}})),[]),d=(0,M.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,...!t&&!a&&!n&&{boxShadow:`0 1px 0 ${e.lightDividerColor}`}},textWrapper:{marginLeft:10,alignItems:void 0,flex:void 0,width:"100%",display:"block",textOverflow:"ellipsis",...t&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor},enterIcon:{height:14,width:14,fill:e.mediumIconColor},[zn]:{marginTop:1}})),[n,t,a]),c={title:i,icon:jn(o,d.icon,d[zn]),style:d.style,textWrapperStyle:d.textWrapper,right:Qn(n,d.enterIcon),className:Ke()("notranslate",s),buttonStyle:{paddingLeft:2},[Hn]:l[Hn]};return r.createElement($e.Z,S()({},e,c,{disableTransition:!0,ignoreLocalHoverState:!0}))}function jn(e,t,i){return n()(Kn.Z,{style:i},void 0,e(t))}function Qn(e,t){const i={...t,opacity:e?1:0};return n()("div",{style:{display:"flex"}},void 0,F.Z.enter(i))}var Jn=i(39634),$n=i(16354),Yn=i(36507);const Xn=i(85).ZiL,ea=i(85).aqt,ta=i(85).nx5,ia=(i(85).kIZ,i(85).G9v),oa=i(85).t7b,na=i(85).KXm,aa=i(85).OM8,sa=i(85).GbH,ra=i(85).jtM,la=i(85).sM5,da=i(85).lez,ca=i(85).g4H,ua=i(85).g7N,ma=i(85).f57,pa=i(85).nLZ,ga=i(85).G4H,ha=i(85).wgE,va=i(85).lDz;class fa extends l.Z{constructor(){super(...arguments),this.handleSendMessageClick=()=>{Jn[va]({[ha]:this[ha],from:"quick_find"})},this[ga]={menuItem:{[pa]:ma,[ua]:ma},[ca]:{[pa]:ma},[da]:{[la]:ra},[sa]:{[la]:ra,[aa]:"25px"}}}renderComponent(){return r.createElement(Yn.Z,S()({},this.getErrorMessage(),{style:this[ga].menuItem,captionStyle:this[ga][ca],shouldWrapCaption:!0}))}renderNoResults(){const e=fa.noResultsTitle,t=this.renderNoResultsMessage();return{title:e,[ca]:t}}renderNoResultsMessage(){const e=q.state.query.filters,t=N.hasActiveFilter(e);if(!N.isFilterActive[na](e[na])){const e=this[ga],t=this[oa](),i={...e[sa],...t[sa]};return n()(A.FormattedMessage,{id:"globalSearchErrorMenuItem.errorPrompt.searchDeleted",[ta]:ia,values:{searchdeleted:e=>n()($n.Z,{onClick:this.props.handleSearchDeletedOnly,style:i},void 0,e),br:n()("br",{})}})}return n()(A.FormattedMessage,t?{[ta]:"Try different search terms or filters",id:"globalSearchErrorMenuItem.errorPrompt.searchTermsAndFilters"}:{[ta]:"Try different search terms",id:"globalSearchErrorMenuItem.errorPrompt.searchTerms"})}renderOffline(){const e=fa.noResultsTitle,t=n()(A.FormattedMessage,{[ta]:"Go online for more results.",id:"globalSearchErrorMenuItem.errorPrompt.goOnline"});return{title:e,[ca]:t}}renderRequestFailed(){const e=this[ga],t=this[oa](),i={...e[da],...t[da]},o=n()(A.FormattedMessage,{id:"globalSearchErrorMenuItem.error.genericErrorMessage",[ta]:ea}),a=n()(A.FormattedMessage,{id:"globalSearchErrorMenuItem.errorPrompt.refreshOrReport",[ta]:Xn,values:{reportlink:e=>n()($n.Z,{onClick:this.handleSendMessageClick,style:i},void 0,e)}});return{title:o,[ca]:a}}getErrorMessage(){const{error:e}=this.props;switch(e.type){case V.SearchRequestError.NoResults.type:return this.renderNoResults();case V.SearchRequestError.Offline.type:return this.renderOffline();case V.SearchRequestError.RequestFailed.type:return this.renderRequestFailed();default:(0,Se.unreachable)(e)}}[oa](){return{[da]:{color:this.theme.blueColor},[sa]:{color:this.theme.blueColor}}}}fa.displayName="SearchErrorMenuItem",fa.contextTypes={...T.mw,...l.w},fa.noResultsTitle=n()(A.FormattedMessage,{[ta]:"No results",id:"globalSearchErrorMenuItem.error.noResults"});const ya=fa,ba=i(85).v8q,Sa=i(85).WT2,wa=i(85).p7y,Ma=i(85).j7K,ka=i(85).y79,Ca=i(85).D7I,Za=i(85).$bT,Ta=i(85).Lhq,Pa=i(85).nx5;function Ia(e){if(e){switch(e){case"local":return n()(A.FormattedMessage,{id:"globalSearch.searchResultBuckets.recent.text",[Pa]:"Jump back in"});case"server":return n()(A.FormattedMessage,{id:"globalSearch.searchResultBuckets.server.text",[Pa]:"More results"});case Ta:return n()(A.FormattedMessage,{id:"globalSearch.searchActions.actions.text",[Pa]:"Actions"});case"unique_id":return n()(A.FormattedMessage,{id:"globalSearch.searchResultBuckets.uniqueID.text",[Pa]:"ID matches"});case"main":return n()(A.FormattedMessage,{id:"globalSearch.searchResultBuckets.bestMatches.text",[Pa]:"Best Matches"})}(0,Se.unreachable)(e)}}function Fa(e,t,i,o){const{store:n}=e,a=n.isNavigableBlock()?n:n[Sa]();if(a)return{key:`${n.id}:${t}`,action:t=>{o.handleSelectResult({store:n,action:t,selectedResult:e,allSearchResults:i})},render:i=>r[Ca](no,S()({},i,{index:t,[ba]:e[ba],isFirstInSection:0===t,store:a,hidePath:!1,result:e,className:v.searchQueryResultItem,inline:!1}))}}const _a=(0,A.injectIntl)((function(e){var t;window.__c={n:"GlobalSearchResultsMenuList"};const[i,o]=(0,r.useState)(!1),a=(0,Pe.Fy)().isMobile,l=(0,M.yK)((e=>({results:{flex:1,display:"flex",[Za]:"column",overflow:"auto",height:"100%"},messageMenuItem:{...a&&{background:void 0,boxShadow:void 0}},actionMenuItemTitle:{fontWeight:x.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",[Za]:"column",gap:12,marginTop:a?13:void 0}})),[a]),{results:d,resultListStore:c,intl:u,showActions:m}=e,p=e.errorState,g=(0,w.VK)((()=>q.state.query.text),[]),h=m.length>0?{key:Ta,render:e=>r[Ca](ke.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:Ia(Ta)})),items:s().compact(m.map((e=>function(e){const{type:t,title:i,icon:o,action:n}=e;return{key:`actionMenuItem.${t}`,action:n,render:e=>r[Ca](qn,S()({},e,{title:i,icon:o}))}}({...e,title:e.renderTitle(g,u,l.actionMenuItemTitle)}))))}:void 0,v=(0,w.VK)((()=>d?d.filter((e=>e.sources.includes(V.SearchResultSource.ElasticsearchUniqueID))):[]),[d]),f=(0,r.useMemo)((()=>new Set(v.map((e=>e.id)))),[v]),y=(0,w.VK)((()=>v.length>0?{key:"uniqueIdSearchResultSection",render:e=>r[Ca](ke.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:Ia("unique_id")})),items:s().compact(v.map(((t,i)=>Fa(t,i,v,e))))}:void 0),[v,e]),b=(0,w.VK)((()=>(d||[]).filter((e=>!f.has(e.id)))),[d,f]),k=(0,w.VK)((()=>[]),[]),C=(0,w.VK)((()=>{const t=(()=>{if(0!==f.size)return f.size>0?"main":void 0})();return b.length>0?{key:"mainSearchResultSection",render:e=>r[Ca](ke.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:Ia(t)})),items:s().compact(b.map(((t,i)=>Fa(t,i,b,e))))}:void 0}),[b,f.size,e]),Z=(0,w.VK)((()=>k.length>0?{key:"serverOnlySearchResultSection",render:e=>r[Ca](ke.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:Ia("server")})),items:s().compact(k.map(((t,i)=>Fa(t,i,k,e))))}:void 0),[k,e]),T=[h,y,C,Z].filter(Se.isDefined),P=(0,r.useCallback)(((t,n)=>{const{onMaybeLoadMoreResults:a}=e,s=t<=200;s&&!i&&a(),o(s)}),[i,e]),I=C||Z?(null==h||null===(t=h.items)||void 0===t?void 0:t.length)??0:0;return n()("section",{style:l.results},void 0,T&&n()("div",{className:"search-results-list"},void 0,n()(we.Z,{type:we.i[ka],[Ma]:I,store:c,disableKeyboardArrowWrap:!0,sections:T,style:l.menuListContainer})),function(e,t){if(e.isLoading)return;if(e.showMajorError)return n()(ya,{error:e[wa],handleSearchDeletedOnly:()=>{}});if(e[wa]&&e[wa]!==V.SearchRequestError.NoResults)return function(e,t){return n()(ke.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,n()(Wn.Z,{title:e,style:t}))}(e[wa].message,t)}(p,l.messageMenuItem)||n()(Me.Z,{onChange:P}))})),xa=i(85).iB2,Aa=i(85).mEi,Ba=i(85).XHO,Da=i(85).IoZ,Ea=i(85).zZX,La=i(85).ApF,Ra=i(85).oUH,Na=i(85).Kgm,Oa=i(85).H_S,Ua=i(85).QmD,Va=i(85).VFs,Wa=i(85).ChN,Ka=i(85).MRL,za=i(85).L_E,Ga=i(85).e$R;const Ha=function(e){window.__c={n:"GlobalSearchResultsBody"};const{[Ga]:t}=e,i=(0,Pe.O7)(),o=(0,Pe.Fy)(),a=(0,M.yK)((e=>({[za]:{display:"flex",flexDirection:"column",width:"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e[Ka],[Wa]:x.Z[Wa].semibold},askAiQuery:{[Wa]:x.Z[Wa].regular},askAiIcon:{fill:e[Ka]}})),[]),s=(0,w.qz)(void 0,Ho.Z),l=(0,w.VK)((()=>s[Ua].focus[Va]),[s]),{[Oa]:d,globalFocusedIndex:c}=(0,r.useContext)(Hr),{[Na]:u,[Ra]:m,clusterInfo:p,debugInfo:g,[La]:h,[Ea]:v,errorState:f,[Da]:y}=(0,w.VK)((()=>{var e,o;const{[Ea]:n}=N[Ba](i);return{[Na]:t[Ua][Na],[Ra]:t[Ua][Ra],[La]:t[Ua][La],clusterInfo:null===(e=t[Ua][Ra])||void 0===e?void 0:e.clusterInfo,debugInfo:null===(o=t[Ua][Ra])||void 0===o?void 0:o.debugInfo,[Ea]:n,errorState:t[Ua].errorState,[Da]:t[Ua][Da]}}),[t,i]),b=!1===f.isLoading&&f.showMajorError,S=Boolean(u||m),k=(0,r.useCallback)((()=>{!h&&!y&&void 0!==m&&q.update((e=>({...e,limit:e.limit+20})))}),[h,y,m]),C=(0,w.VK)((()=>N.combineResults({[Na]:null==u?void 0:u.results,[Ra]:null==m?void 0:m.results})),[u,m]),Z=(0,w.VK)((()=>[{type:"assistant",renderTitle:(e,t,i)=>function(e,t){return n()("div",{className:"notranslate",style:t},void 0,e)}(r.createElement(r.Fragment,null,n()("span",{},void 0,"Ask AI "),n()("span",{style:a.askAiQuery},void 0,e)),{...i,...a.askAiLabel}),icon:e=>F.Z.sparkles({...e,...a.askAiIcon}),action:()=>{zo.Ky({environment:i})},[Aa]:()=>(0,Go.jp)(i.device)&&q[Ua].query.text.split(" ").length-1>=2&&q[Ua].query.text.length>6}].filter((e=>e[Aa](i)))),[i,a],{useDeepEqual:!0}),T=(0,r.useCallback)((()=>s.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus[xa]&&0===e.focus[Va]?e:{...e,focus:Z.length>0?{section:1,[xa]:0,[Va]:Z.length}:{section:0,[xa]:0,[Va]:0}}))),[s,Z]);return(0,r.useEffect)((()=>{T()}),[C,T]),(0,r.useEffect)((()=>{c.setState(l)}),[c,l]),n()("div",{style:a[za]},void 0,n()(_a,{errorState:f,[Oa]:d,onMaybeLoadMoreResults:k,resultListStore:s,results:C,debugInfo:g,clusterInfo:p,publicAccessPermission:v,showActions:Z}),n()(Vn,{[Ga]:t,combinedResults:C,showSpinner:h,[Aa]:!b&&S&&!o.isMobile}))},qa=i(85).D7I,ja=i(85).kEc,Qa=i(85).e$R,Ja=i(85).emB;function $a(){window.__c={n:"GlobalSearchNavigationalView"};const{[Ja]:e,[Qa]:t}=(0,r.useContext)(Hr),{hasQuery:i}=(0,w.VK)((()=>({hasQuery:Boolean(q.state.query.text.trim())||N[ja](q.state.query.filters)})),[]),o={[Qa]:t};return r[qa](r.Fragment,null,i?r[qa](Ha,o):n()(Ko,{onSelect:e}))}var Ya=i(59054),Xa=i(63143),es=i(68120),ts=i(29987);const is=i(85).IoZ,os=i(85).oUH,ns=i(85).JQY,as=i(85).ApF,ss=i(85).XBA,rs=i(85).fkq,ls=i(85).Lyb,ds=i(85).U3F,cs=i(85).QVN,us=i(85).Kgm,ms=i(85).e7B,ps=i(85).jfm,gs=i(85).z_V,hs=i(85).wgE,vs=i(85).Jcy,fs=i(85).e$R,ys=i(85).j75,bs=i(85).VMs,Ss=i(85).GiO,ws=i(85).jKg,Ms=i(85).dfJ,ks=i(85).qJ8,Cs=i(85).fBu,Zs=i(85).QmD,Ts=i(85).I9J,Ps=i(85).XHO,Is=i(85).oDK,Fs=i(85).zZX;function _s(e){let{dependencies:t,[ys]:i,localDebounce:o=25,serverDebounce:n=275,[fs]:a,localSearchCache:l,[vs]:d,enabled:c}=e;const u=(0,Pe.O7)(),m=(0,w.VK)((()=>function(e){const{[ys]:t}=e;return{shouldSearchLocal:!0,[gs]:t[Zs][gs],[ps]:t[Zs][ps],forcedBlockIds:t[Zs].forcedBlockIds}}({[Ts]:t[Ts],[ys]:i})),[t[Ts],i]),p=(0,r.useMemo)((()=>s().debounce(xs,n)),[n]);(0,Ya.r5)((()=>c?async function(e){const{[bs]:t,openAsPage:i,store:o,fetchServerResultsFn:n}=e;if(i&&s().isEqual(t,o[Zs].selectedQueryResultQuery))return;o[ms]((e=>({...e,[us]:e[us]}))),function(e){const{shouldSearchLocal:t,[Cs]:i,[hs]:o,[bs]:n,limit:a,[Fs]:r,[Ts]:l,localSearchCache:d,store:c,[vs]:u}=e;let m;const p={...n,[ls]:{...n[ls],...u}};if(t){var g;m=N.getResultsWithCount(function(e){const{[Cs]:t,requestInput:i,[Ts]:o,[hs]:n,[Fs]:a,localSearchCache:s}=e,{[bs]:r}=i;if(!s)return;if(!r.text.trim())return;if(a)return;const l=ts.default.mark(cs),d=void 0,c=N[ds]({[bs]:i,localCachedPages:s,[Cs]:t,[hs]:n,[Ts]:o,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:d});return ts.default.measure(l,{[hs]:n}),c}({[Cs]:i,[hs]:o,requestInput:{[bs]:p,limit:a},[Fs]:r,[Ts]:l,localSearchCache:d})),s().isEmpty(null===(g=m)||void 0===g?void 0:g.results)&&(0,y.Xx)(c[Zs])&&c[Zs][as]?c[ms]((e=>({...e,[ns]:!0}))):c[ms]((e=>({...e,[ns]:!1,[us]:m})))}}(e),await n(e)}({...t,...m,store:a,fetchServerResultsFn:p,[hs]:u,localSearchCache:l,[vs]:d}):Promise.resolve()),[t,m,a,p,u,l,d,c],{debounce:o})}async function xs(e){let{[Cs]:t,[hs]:i,[bs]:o,[Ts]:n,[Is]:a,[ks]:r,[ws]:l,[ps]:d,[gs]:c,[Ms]:u,store:m,forcedBlockIds:p,limit:g,[vs]:h}=e;const v={...o,[ls]:{...o[ls],...h}},f={[bs]:v,limit:g};m[ms]((e=>({...e,[as]:!0})));const y=m[Zs][os],b=await async function(e){const{[Cs]:t,requestInput:i,[Ts]:o,[hs]:n,[Is]:a,[ws]:s,source:r,spaceId:l,[ps]:d,[gs]:c,[Ms]:u,forcedBlockIds:m}=e,{[bs]:p}=i;if(!p.text.trim()&&!N.hasActiveFilter(p[ls]))return;if(!o)return{error:V.SearchRequestError.Offline};const g=ts.default.mark(rs),h=await N.getServerSearchResults({[hs]:n,input:i,spaceId:l,[Is]:a,[ws]:s,source:r,[ps]:d,[gs]:c,[Ms]:"on"===(null==d?void 0:d["search-debug-only-no-recent-boosting"])?[]:u,forcedBlockIds:m});if(!h)return;if("failed"===h.type)return h.offline?{error:V.SearchRequestError.Offline}:{error:V.SearchRequestError.RequestFailed};const v=h.data.trackEventProperties,f=(0,es.Qr)(v)?{}:(0,Xa.objectFromEntries)((0,Se.objectKeys)(v).map((e=>[`server-${e}`,v[e]]))),y=h.data.results.map(((e,i)=>({...e,[ss]:f,originalPosition:i,store:lt.G.createChildStore(t,{table:He.iU,id:e.id})})));return ts.default.measure(g,{[hs]:n}),{value:{results:y,total:h.data.total,debugInfo:h.data.debug,[ss]:f,clusterInfo:h.data.clusterInfo}}}({[Cs]:t,[hs]:i,requestInput:f,spaceId:null==r?void 0:r.id,[ws]:l,[Is]:a,[Ts]:n,source:void 0,[ps]:d,[gs]:c,[Ms]:u,forcedBlockIds:p}),S={[bs]:{...q[Zs][bs],[ls]:{...q[Zs][bs][ls],...h}},limit:q[Zs].limit};if(!s().isEqual(f,S))return;const w=N.getResultsWithCount(b),M=y?N.mergePaginationResults({existingResults:y,newPageResults:w}):w;if(b&&!b.error){const e=b.value.results;m[ms]((t=>({...t,serverError:null==b?void 0:b.error,[as]:!1,[os]:M,[is]:e.length<g,[ss]:b.value[ss],[us]:t[ns]?void 0:t[us],[ns]:!1})))}else m[ms]((e=>({...e,serverError:null==b?void 0:b.error,[as]:!1,[os]:void 0,[ss]:void 0,[us]:e[ns]?void 0:e[us],[ns]:!1})))}const As=i(85).Jcy,Bs=i(85).DgF,Ds=i(85).N4Y,Es=i(85).j75,Ls=i(85).SDR,Rs=i(85).GiO,Ns=i(85).qJ8,Os=i(85).zZX,Us=i(85).J8Q,Vs=i(85).wCq,Ws=i(85).T$o,Ks=i(85).mRY,zs=i(85).Tes,Gs=i(85).z6F,Hs=i(85).e$R,qs=i(85).DPi,js={taskDB:{[qs]:["e02ed201-e893-4279-8bac-6b872dabf955"]},projectsDB:{[qs]:["37cedb80-b4aa-4674-b0b3-1e8c67f0be86"]},docsDB:{[qs]:["e6dce471-f27c-43fb-b28e-40d293f86f8c"]},searchTeam:{[qs]:["a02dd678-839d-4a63-9b74-a37f11df723f"]}},Qs=!1;function Js(){const e=(0,Pe.O7)(),{[Hs]:t,[Gs]:i,[zs]:o,[Ks]:n,[Ws]:a,[Vs]:s,[Us]:l}=(0,r.useContext)(Hr),{parentStore:d}=(0,r.useContext)(qr),c=function(e){const t=(0,Pe.O7)();return(0,w.VK)((()=>{const{[Fs]:i,[Is]:o}=N[Ps](t);return{[Ts]:Boolean(I.Z[Zs].online),limit:q[Zs].limit,[Cs]:e,[Fs]:i,[Is]:o,[ks]:U.default[Zs][ks],debug:void 0,openAsPage:!1,[Ms]:[],[ws]:void 0,searchMode:"default",[Ss]:U.default[Zs][Ss],[bs]:q[Zs][bs]}}),[t,e])}(d),[{value:u}]=(0,Ya.r5)((()=>c[Os]?Promise.resolve(void 0):c[Ns]?N.getLocalSearchableBlocks({environment:e,[Ns]:c[Ns],[Rs]:c[Rs],excludeCurrentPage:!0}):Promise.resolve(void 0)),[e,c[Ns],c[Rs],c[Os]]);_s({[Ls]:c,[Hs]:t,localSearchCache:u,[Es]:Jo.v_,[Ds]:!0}),_s({[Ls]:c,[Hs]:i,localSearchCache:u,[Es]:Jo.BJ,[Ds]:!1});const m=(0,w.VK)((()=>{var e;const t=null===(e=U.default.state[Bs])||void 0===e?void 0:e.id;return{createdBy:t?[t]:[]}}),[]);_s({[Ls]:c,[Hs]:o,localSearchCache:u,[Es]:Jo.v_,[As]:m,[Ds]:Qs}),_s({[Ls]:c,[Hs]:n,localSearchCache:u,[Es]:Jo.v_,[As]:js.taskDB,[Ds]:Qs}),_s({[Ls]:c,[Hs]:a,localSearchCache:u,[Es]:Jo.v_,[As]:js.projectsDB,[Ds]:Qs}),_s({[Ls]:c,[Hs]:s,localSearchCache:u,[Es]:Jo.v_,[As]:js.docsDB,[Ds]:Qs}),_s({[Ls]:c,[Hs]:l,localSearchCache:u,[Es]:Jo.v_,[As]:js.searchTeam,[Ds]:Qs})}const $s=i(85).ApF,Ys=i(85).P0z,Xs=i(85).$bT,er=i(85).e$R,tr=i(85).D7I;function ir(e){return window.__c={n:"GlobalSearchContentPane"},Js(),n()(C.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!0,render:()=>n()(k.Z,{capture:!0,allowMenuList:!0,render:t=>r[tr](or,S()({},e,{ignoreAreaEvents:t}))})})}function or(e){window.__c={n:"GlobalSearchContentPaneInner"};const{ignoreAreaEvents:t}=e,{handleQueryChange:i,[er]:o,globalFocusedIndex:a}=(0,r.useContext)(Hr),s=(0,M.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",[Xs]:"column"},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",[Xs]:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:"100vh"},clearButton:{color:e.lightTextColor}})),[]),[l,d]=(0,r.useState)(!1),{[Ys]:c}=(0,w.VK)((()=>({[Ys]:Boolean(I.Z.state.online)&&Boolean(q.state.query.text)&&o.state[$s]&&!l,hasQuery:Boolean(q.state.query.text.trim())})),[l,o]),u=(0,P.zY)(),m=(0,r.useMemo)((()=>n()(be,{isOpen:!0,onTypingChange:d,showSpinner:c,onQueryChange:i,[er]:o,focusedIndexStore:a,window:u})),[c,u,i,o,a]),p=(0,r.useMemo)((()=>({menuType:T.og.Popup,maxHeight:"100%",maxWidth:"100%",minHeight:50,disableScroller:!0,scrollerStyle:s.scroller,...t})),[s,t]);return r[tr](Z.Z,S()({},p,{className:v.searchMenu}),n()("div",{style:s.body},void 0,m,n()($a,{})))}var nr=i(62134),ar=i(45023),sr=i(22294);const rr=i(85).p06,lr=i(85).yrh,dr=i(85).EmK,cr=i(85).DWI;function ur(e){window.__c={n:"GlobalSearchKeyboardShortcutStackListener"};const t=(0,P.zY)(),i=(0,Pe.O7)(),o=(0,r.useCallback)((e=>{nr.handleEvent(i,e)}),[i]),n=(0,r.useCallback)((e=>{const{shortcutMap:t}=i[cr],o=s().findKey(t,((t,o)=>(0,ar.Z)(i,e,t)));if(o&&!{cut:!0,copy:!0,paste:!0}[o]){if("esc"===o)return void g.closeGlobalSearchModal();nr.propagateShortcut(i,e,o)}}),[i]),a=(0,r.useCallback)((()=>{sr.Z.setKeyboardMode(!1)}),[]);return(0,r.useEffect)((()=>t?(t[dr](lr,a),t[dr]("keydown",n),t[dr]("cut",o),t[dr]("copy",o),t[dr]("paste",o),t[dr]("keypress",o),()=>{t[dr](lr,a),t[rr]("keydown",n),t[rr]("cut",o),t[rr]("copy",o),t[rr]("paste",o),t[rr]("keypress",o)}):()=>{}),[a,n,o,t]),null}var mr=i(23078),pr=i.n(mr),gr=i(58710),hr=i(27186);const vr=i(85).p06,fr=i(85).GjK,yr=i(85).Z97,br=i(85).i7F,Sr=i(85).yrh,wr=i(85).EmK,Mr=i(85).YUp,kr={};function Cr(e){window.__c={n:"ChildWindow"};const t=e.name.startsWith("Notion")?e.name:`Notion - ${e.name}`,[i,o]=(0,r.useState)(!0),[a,s]=(0,r.useState)({id:gr[Mr].length++});function l(){const e=gr.CHILD_WINDOWS.get(a);gr.setFocusedChildWindow(e)}(0,r.useEffect)((()=>(gr[Mr].push(a),()=>{gr[Mr].splice(gr[Mr].indexOf(a),1)})),[a]);const d=e.features||kr,c=!1===e.draggableTop?null:n()("div",{style:{width:"100vw",height:"20px",appRegion:"drag"}});return n()(pr(),{onOpen:function(t){gr.CHILD_WINDOWS.set(a,t),e.onOpen&&e.onOpen(t),t[wr]("focus",l),t[wr](Sr,hr[br]),t[wr](yr,hr[fr])},onUnload:function(){e.onUnload&&e.onUnload(),o(!1);const t=gr.CHILD_WINDOWS.get(a);null==t||t[vr]("focus",l),null==t||t[vr](Sr,hr[br]),null==t||t[vr](yr,hr[fr]),gr.getWindow()===t&&gr.setFocusedChildWindow(void 0),gr.CHILD_WINDOWS.delete(a)},features:d,copyStyles:e.copyStyles,name:t,title:t},void 0,c,n()("div",{style:c?{marginTop:20}:void 0},void 0,i&&e.children))}function Zr(e){window.__c={n:"GlobalSearchWindow"};const[t,i]=(0,r.useState)(void 0);return n()(Cr,{name:"Notion Global Search Modal",onOpen:e=>{i(e)},draggableTop:!1,features:{show:!1,type:"panel",frame:!1,alwaysOnTop:!0}},void 0,n()(P.oB.Provider,{value:t},void 0,e.children))}const Tr=i(85).lGm,Pr=i(85).cx2,Ir=i(85).LIR,Fr=i(85).j_T,_r=i(85).Gm5,xr=i(85).fBu,Ar=i(85).GPG,Br=i(85).emB,Dr=i(85).JNi,Er=i(85).H_S,Lr=i(85).vF0,Rr=i(85).yUP,Nr=i(85).UtJ,Or=i(85).J8Q,Ur=i(85).wCq,Vr=i(85).T$o,Wr=i(85).mRY,Kr=i(85).Tes,zr=i(85).z6F,Gr=i(85).e$R,Hr=r.createContext(null),qr=r.createContext(null);class jr extends l.Z{constructor(){super(...arguments),this[Gr]=new y.ZP,this[zr]=new y.ZP,this[Kr]=new y.ZP,this[Wr]=new y.ZP,this[Vr]=new y.ZP,this[Ur]=new y.ZP,this[Or]=new y.ZP,this[Nr]=c.default[Rr](0),this.getStaticContext=s()[Lr]((()=>({[Er]:this[Dr],[Br]:this[Br],[Ar]:this[Ar],[Gr]:this[Gr],[zr]:this[zr],[Kr]:this[Kr],[Wr]:this[Wr],[Vr]:this[Vr],[Ur]:this[Ur],[Or]:this[Or],[Nr]:this[Nr]}))),this.getStoresContext=s()[Lr]((e=>({[xr]:e}))),this[Br]=e=>{this[Er]({...e,[_r]:"recent_pages"})},this[Dr]=e=>{this[Er]({...e,[_r]:"query_results"})},this[Er]=e=>{let{[_r]:t,selectedResult:i,store:o}=e;"query_results"===t&&this[Gr].update((e=>({...e,selectedQueryResultQuery:q.state.query})));const n=(0,p.Z)({pageModel:o.getModel(),pageId:o.id,baseUrl:h.default[Fr],[Ir]:u.tY.SearchQuery});g.openPageFromGlobalSearch(n),g.closeGlobalSearchModal()},this[Ar]=e=>{""!==e?q.updateQueryText(e):q.resetQuery()}}renderComponent(){const e=Boolean(f.Z.state.isGlobalSearchHost),t="light"===this.theme.mode?v.notionLightTheme:v.notionDarkTheme;return e?n()(Zr,{},void 0,n()(ur,{}),n()(Hr.Provider,{value:this.getStaticContext()},void 0,n()(qr.Provider,{value:this.getStoresContext(this.props[xr])},void 0,n()("div",{style:this[Pr](),[Tr]:["notion-app-inner",t].join(" ")},void 0,n()(ir,{onClose:()=>{}}))))):null}[Pr](){return{...(0,m.default)(d.SP),color:this.theme.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:this.theme.contentBackground}}}jr.displayName="Search";const Qr=jr},14568:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(35431);class n extends o.Z{}const a=new n},31075:(e,t,i)=>{i.d(t,{i:()=>b});var o=i(77094),n=i.n(o),a=(i(67294),i(26825)),s=i(5366),r=i(50906),l=i(47307),d=i(76464),c=i(12359),u=i(64369),m=i(18878),p=i(29987);const g=i(85).nx5,h=i(85).Wyj,v=i(85).JJj,f=i(85).Tb$,y=i(85).wgE;async function b(e){const{oldPermissionItem:t,newPermissionItem:i,wasInherited:o,[y]:b,store:S,sudoModeStore:w,restrictingVisibility:M,fromPermissionWrapper:k}=e;if(!(0,a.permissionItemsAreSameTarget)(t,i))throw new Error("Permission type mismatch.");const C=!!w&&w.shouldSaveTransactionWithSudoMode(S),Z=(0,a.getMostPermissiveRole)(t.role,i.role);if(o&&Z!==i.role||M)return void(await async function(e){const{[y]:t,useSudoMode:i,store:o,[f]:a,fromPermissionWrapper:r}=e,p="none"===a.role?{type:"remove",[f]:a}:{type:"restrict"},h="user_permission"===a.type&&a.user_id===t.currentUser.id;(h||await l.confirmUserAction({message:(0,m.mX)(p),acceptLabel:(0,m.nH)(p),cancelLabel:n()(s.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",[g]:"Close"}),description:n()(u.Z,{isSmall:!0,isMultiline:!0},void 0,n()(s.FormattedMessage,{id:"restrictedPermissionConfirmationModal.footer.whisperText",[g]:"Admins will still be able to restore permissions from restricted pages."}))}))&&c[v]({userAction:"PermissionItem.onAccept",[y]:t,useSudoMode:i,perform:e=>{d.restrictPermission({[y]:t,store:o,[f]:a,shouldInherit:!0,transaction:e,fromPermissionWrapper:r})}})}({[y]:b,useSudoMode:C,store:S,[f]:i,fromPermissionWrapper:k}));!S.isTopLevel()&&t.role!==i.role&&Z!==t.role&&r.trackWidenPermission(b),c[v]({userAction:"PermissionItem.handlePermissionItemChange",[y]:b,useSudoMode:C,perform:t=>{const o=p.default.mark(h);d.setPermissionItems({[y]:b,store:S,permissionItems:[i],transaction:t,pagePermissionChangeLocation:e.location,metric:o,fromPermissionWrapper:k})}})}},22756:(e,t,i)=>{i.d(t,{Z:()=>c});var o=i(49085);const n=i(85).vWz,a=i(85).p4K,s=i(85).HVc,r=i(85).eJX,l=i(85).hef;class d extends o.default{[l](){return{isModalOpen:!1,currentTab:"selectData",account:void 0,[r]:!1,isAccountDelinkingInProgress:!1,[s]:[],teamsAndProjects:[],selectedWorkspace:void 0,[a]:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,[n]:!1,isFetchingAsanaAccount:!1}}resetImport(){const{account:e,[s]:t}=this.getState();this.setState({...this[l](),account:e,[s]:t})}}const c=new d},74021:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const a=new n},17549:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const a=new n},45214:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const a=new n},5188:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const a=new n},78900:(e,t,i)=>{i.d(t,{Z:()=>o});const o=new(i(61766).Z)},2342:(e,t,i)=>{i.d(t,{Xx:()=>f,ZP:()=>b});var o=i(49085),n=i(92338),a=i(62965),s=i(29026);const r=i(85).p7y,l=i(85).xYh,d=i(85).g94,c=i(85).UIt,u=i(85).IoZ,m=i(85).XBA,p=i(85).oUH,g=i(85).ApF,h=i(85).Kgm;class v extends o.default{getInitialState(){return{insertedActionResultsCount:0,[h]:void 0,[g]:!1,[p]:void 0,[m]:void 0,[u]:!1,errorState:y,selectedQueryResultQuery:void 0}}setState(e){const t={...this[c]};if(!(0,a.Z)(this[c],t))return;const i=function(e){const{newState:t,priorState:i}=e,{[h]:o,[r]:a,[g]:s,[p]:c}=t,u=Boolean(o),m=s?void 0:a;if(!u&&s)return!i.errorState[l]&&i.errorState[d]?i.errorState:{[l]:s};if(u)return{hasLocalResults:u,[r]:m,[l]:!1,[d]:!1};if(m)return{hasLocalResults:u,[r]:m,[l]:!1,[d]:!0};if(0===(null==c?void 0:c.results.length))return{hasLocalResults:u,[r]:n.SearchRequestError.NoResults,[l]:!1,[d]:!0};return{hasLocalResults:u,[r]:m,[l]:!1,[d]:!1}}({newState:e,priorState:t});super.setState({...e,errorState:i})}getResultCount(){const{[p]:e,[h]:t}=this.state,i=(null==e?void 0:e.total)??(null==t?void 0:t.total)??0,o=Boolean(e&&i>=100);return{count:i,isLowerBound:Boolean(e&&t&&i<s.Xv)||o}}}function f(e){const t=Boolean(e[h]),i=Boolean(e[p])&&!e[g];return t||i||!1}const y={[d]:!1,[l]:!1,hasLocalResults:!1,[r]:void 0};const b=v},57222:(e,t,i)=>{i.d(t,{t:()=>s});const o=i(85).nx5,n=i(85).Yzm,a=i(85).g4H,s=e=>({"en-US":{label:"English",[a]:e[n]({[o]:"English (US)",id:"languagePicker.captions.englishUS"})},"de-DE":{label:"Deutsch",[a]:e[n]({[o]:"German",id:"languagePicker.captions.germanDE"})},"ko-KR":{label:"한국어",[a]:e[n]({[o]:"Korean",id:"languagePicker.captions.koreanKo"})},"zh-CN":{label:"简体中文",[a]:e[n]({[o]:"Simplified Chinese",id:"languagePicker.captions.chineseS"})},"zh-TW":{label:"繁體中文",[a]:e[n]({[o]:"Traditional Chinese",id:"languagePicker.captions.chineseT"})},"ja-JP":{label:"日本語",[a]:e[n]({[o]:"Japanese",id:"languagePicker.captions.japaneseJa"})},"es-ES":{label:"Español (España)",[a]:e[n]({[o]:"Spanish (Spain)",id:"languagePicker.captions.spanishEs"})},"es-LA":{label:"Español (Latinoamérica)",[a]:e[n]({[o]:"Spanish (Latin America)",id:"languagePicker.captions.spanishLatam"})},"pt-BR":{label:"Português (Brasil)",[a]:e[n]({[o]:"Portuguese (Brazil)",id:"languagePicker.captions.portugueseBr"})},"fr-FR":{label:"Français (France)",[a]:e[n]({[o]:"French",id:"languagePicker.captions.frenchFr"})},"da-DK":{label:"Dansk",[a]:e[n]({[o]:"Danish",id:"languagePicker.captions.danishDk"})},"fi-FI":{label:"Suomi",[a]:e[n]({[o]:"Finnish",id:"languagePicker.captions.finnishFi"})},"nb-NO":{label:"Norsk",[a]:e[n]({[o]:"Norwegian",id:"languagePicker.captions.norwegianNo"})},"nl-NL":{label:"Nederlands",[a]:e[n]({[o]:"Dutch",id:"languagePicker.captions.dutchNl"})},"sv-SE":{label:"Svenska",[a]:e[n]({[o]:"Swedish",id:"languagePicker.captions.swedishSe"})},pseudo:{label:"🤡Pseudolocale🤡",[a]:e[n]({[o]:"Pseudolocale",id:"languagePicker.captions.pseudolocale"})}})},45168:(e,t,i)=>{i.d(t,{e:()=>n});var o=i(92338);function n(e){if(e)return e.sources.includes(o.SearchResultSource.ElasticsearchUniqueID)}},68120:(e,t,i)=>{i.d(t,{Qr:()=>f});var o=i(97880),n=i(63143),a=i(74487);const s=i(85).TtP,r=i(85).muN,l=i(85).MWD,d=i(85).D_K,c=i(85).w_r,u=Symbol("JSON Schema"),m=Symbol("JSON Schema Components"),p=Symbol("No JSON Schema"),g={isNull:()=>({[l]:r,[m]:{}}),boolean:()=>({[l]:"boolean",[m]:{}}),number:()=>({[l]:"number",[m]:{}}),integer:()=>({[l]:"integer",[m]:{}}),[c]:()=>({[l]:c,[m]:{}}),dateString:()=>({[l]:c,format:"date",[m]:{}}),literal:e=>({enum:[e],[m]:{}}),literals:function(){for(var e=arguments[s],t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{enum:t,[m]:{}}},uuid:()=>({[l]:c,format:"uuid",[m]:{}}),uuidWithoutDashes:()=>({[l]:c,format:"uuid",[m]:{}}),any:()=>v,array:e=>({[l]:"array",items:e[u],[m]:e[u][m]}),tuple:e=>({[l]:"tuple",items:!1,prefixItems:e.map((e=>e[u])).filter((e=>e!==p)),[m]:Object.assign({},...e.map((e=>e[u][m])))}),record:(e,t)=>({[l]:d,additionalProperties:t[u],[m]:t[u][m]}),[d]:e=>{let{required:t,optional:i,exact:o}=e;return{[l]:d,properties:(0,n.objectFromEntries)(Object.entries({...t,...i}).filter((e=>{let[t,i]=e;return i[u]!==p})).map((e=>{let[t,i]=e;return[t,i[u]]}))),...o&&{additionalProperties:!1},...Object.keys(t)[s]>0&&{required:Object.keys(t)},[m]:Object.assign({},...Object.values({...t,...i}).map((e=>e[u][m])))}},union:e=>({anyOf:e.map((e=>e[u])).filter((e=>e!==p)),[m]:Object.assign({},...e.map((e=>e[u][m])))}),gte:(e,t)=>{const i=e[u];return i!==p?{...i,minimum:t}:i},lte:(e,t)=>{const i=e[u];return i!==p?{...i,maximum:t}:i},maxLength:(e,t)=>{const i=e[u];if(i===p)return i;if("type"in i){if("string"===i[l])return{...i,maxLength:t};if("array"===i[l])return{...i,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const i=e[u];if(i===p)return i;if("type"in i){if("string"===i[l])return{...i,minLength:t};if("array"===i[l])return{...i,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[u];if(t===p)return t;if("type"in t){if("string"===t[l])return{...t,minLength:1};if("object"===t[l])return{...t,minProperties:1};if("array"===t[l])return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[u];if(t===p)return t;if("type"in t)if(Array.isArray(t[l])){if("null"===t[l][1])return t;(0,o.unreachable)(t[l][1])}else{if("string"===t[l])return{...t,[l]:[t[l],r]};if("object"===t[l])return{...t,[l]:[t[l],r]};if("array"===t[l])return{...t,[l]:[t[l],r]};if("tuple"===t[l])return{...t,[l]:[t[l],r]};if("boolean"===t[l])return{...t,[l]:[t[l],r]};if("integer"===t[l])return{...t,[l]:[t[l],r]};if("number"===t[l])return{...t,[l]:[t[l],r]};if("null"===t[l])return t;(0,o.unreachable)(t[l])}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>g.nullable({[u]:e})))};if("$ref"in t)return{anyOf:[t,{[l]:r}],[m]:t[m]};if(f(t))return t;(0,o.unreachable)(t)}}},h=(0,n.objectFromEntries)(Object.entries(g).map((e=>{let[t,i]=e;return[t,function(){for(var e=arguments[s],n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 1===n[s]&&(0,o.isObject)(n[0])&&("id"in n[0]||"description"in n[0])?function(){const{description:e,examples:o,id:s}=n[0];let r={description:e,...o&&{examples:o},...i(...arguments)};return s&&(r={$ref:`#/components/schemas/${s}`,[m]:{...r[m],[s]:r}}),{[u]:r,...a[t](...arguments)}}:{[u]:i(...n),...a[t](...n)}}]}))),v=(Symbol("Exact empty object ({})"),h[d]({id:"emptyObject"})({required:{},optional:{},exact:!0}),{});function f(e){return(0,o.isObject)(e)&&0===Object.keys(e)[s]}}}]);