"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{98922:(t,e,n)=>{n.r(e),n.d(e,{default:()=>te});var o=n(77094),a=n.n(o),i=n(86664),r=n(67294),s=n(480),d=n(81954),l=n(24405),u=n(8848),c=n(88108),p=n(3909),m=n(3791),y=n(5366),v=n(44463),g=n(95477),f=n(43250),h=n(16100),b=n(21115),S=n(34859),x=n(79315),w=n(88632),C=n(45407),A=n(27242),O=n(78291),Z=n(30751),_=n(36488),M=n(53953),I=n(18647),F=n(29683),k=n(10644),T=n(94919),B=n(97880),D=n(82990),P=n(69653),E=n(61519),N=n(68785),U=n(1063),W=n(67773),H=n(43761),q=n(24862),K=n(26156);const L=n(85).Ws5,V=n(85).hGR,Y=n(85).T7p,z=n(85).van,$=n(85).gW0,G=(n(85).db3,n(85).yXS),j=n(85).Wn1,R=(n(85).SFx,n(85)._Ny),X=n(85).AEv,Q=n(85).xU_,J=n(85).SuY,tt=n(85).tpU,et=(n(85).tzu,n(85).BQ6),nt=n(85).nx5,ot=n(85).n8$,at=n(85).P_$,it=n(85).Epi,rt=n(85)._a5,st=n(85).dz$,dt=n(85).eam,lt=n(85).eAn,ut=n(85).HNo,ct=n(85).g7N,pt=n(85).ChN,mt=n(85).Exd,yt=n(85).L_E;function vt(t){window.__c={n:"SpaceSubscriptionOrderSummary"};const{state:e,data:n,promo:o}=t,{coupon:i}=e,r=(0,s.O7)(),u=(0,l.yK)((t=>({[yt]:{display:"flex",flexDirection:"column",gap:16},header:{[mt]:16,color:t.regularTextColor,[pt]:D.Z[pt].semibold,[ct]:11},couponLink:{[mt]:12}})),[]),c=e[ut]??"month",p=P.Zr(o),m=P.Lp({[lt]:e[lt],onlyShowAddOn:e.onlyShowAddOn,[dt]:e[dt]}),v=(0,d.VK)((()=>m.map((t=>Z.Z.getPrice(r,(e=>e.product===t&&e[st]===c))))),[c,r,m]);if(v.some((t=>!t.isLoaded)))return a()(N.Z,{});const g=v.map((t=>t.result)).filter(Boolean),f=b[rt](n),h=g[0].unitAmount[it],S=P.cv({prices:g,quantity:f,coupon:i}),x=P.VT({[at]:e[at],taxAmount:e.taxAmount,[it]:h}),w=P.rF({prices:g,quantity:f,promo:p}),C=P.Et(n,h),A=S.plus(x).minus(w).minus(C),O=A.amount<0?A[ot](0):A;return a()("div",{[et]:u[yt]},void 0,a()("label",{[et]:u.header},void 0,a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",[nt]:"Order summary"})),a()(ht,{prices:g,coupon:e.coupon,data:n}),b.shouldShowStartupCouponLink(e[lt])&&a()(U.X,{tier:e[lt]}),a()(E.Z,{size:1}),a()(ft,{subtotal:S,tax:x,discount:w,accountBalance:C,promo:p,state:e,[et]:{[ct]:8}}),a()(gt,{total:O}))}function gt(t){const e=P.hr();return a()("div",{[et]:e.itemContainer},void 0,a()("div",{[et]:e.captionContainer},void 0,a()("span",{[et]:e.totalName},void 0,a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",[nt]:"Total for today"}))),a()("span",{[et]:e.totalPrice},void 0,a()(T.W,{cost:t.total[tt](),trailingZeroDisplay:J})))}function ft(t){const{subtotal:e,tax:n,discount:o,accountBalance:i,[et]:r,promo:s}=t,{[at]:d,coupon:l}=t.state;return a()("div",{[et]:r},void 0,a()(q.r,{subtotal:e}),a()(K.u,{tax:n,[at]:d}),s&&!l?a()(H.T,{discount:o,promo:s}):void 0,a()(W.G,{accountBalance:i}))}function ht(t){const{coupon:e,data:n,prices:o}=t;return r.createElement(r.Fragment,null,o.map((t=>a()(bt,{[Q]:t,data:n,coupon:e},t.externalId))))}function bt(t){window.__c={n:"SpaceSubscriptionGrossOrderItem"};const{[Q]:e,data:n,coupon:o}=t,i=(0,l.yK)((t=>({[yt]:{display:"flex",justifyContent:"space-between"},item:{},title:{[mt]:14,[pt]:D.Z[pt].medium,[ct]:4},[X]:{color:t.mediumTextColor,[mt]:12},[Q]:{[mt]:14}})),[]),r=b[rt](n),s=e[R]({quantity:r,coupon:o}),d=a()(T.W,{cost:s[tt](),trailingZeroDisplay:J});return a()("div",{[et]:i[yt]},void 0,a()("div",{[et]:i.item},void 0,a()("div",{[et]:i.title},void 0,a()(St,{[Q]:e})),a()("div",{[et]:i[X]},void 0,a()(xt,{[Q]:e,data:n,coupon:o}))),a()("div",{[et]:i[Q]},void 0,d))}function St(t){const{[Q]:e}=t;switch(e.product){case"free":case"student":return null;case"ai":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",[nt]:"Notion AI"});case"personal":return a()(y.FormattedMessage,{id:j,[nt]:"Plus plan with a 1-member limit"});case"plus":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",[nt]:"Plus plan"});case"business":return a()(y.FormattedMessage,{id:G,[nt]:"Business plan"});case"enterprise":return a()(y.FormattedMessage,{id:$,[nt]:"Enterprise plan"});default:(0,B.unreachable)(e.product)}}function xt(t){const{[Q]:e,data:n,coupon:o}=t,i=b[rt](n),r=e.getMonthlyUnitCost(o),s=a()(T.W,{cost:r[tt](),trailingZeroDisplay:J});switch(e[st]){case"year":return a()(y.FormattedMessage,{id:z,[nt]:Y,values:{br:a()("br",{}),[Q]:s,numberOfMembers:i}});case"month":return a()(y.FormattedMessage,{id:V,[nt]:L,values:{br:a()("br",{}),[Q]:s,numberOfMembers:i}});default:(0,B.unreachable)(e[st])}}var wt=n(26096),Ct=n(58025),At=n(65734),Ot=n(502);const Zt=n(85).IE_,_t=n(85).mHq,Mt=n(85).cav,It=n(85).iG4,Ft=n(85).dz$,kt=n(85).kaW,Tt=n(85).jp1,Bt=n(85).aTq,Dt=n(85).eam,Pt=n(85).HNo,Et=n(85).P_$,Nt=n(85).eAn,Ut=n(85).wgE,Wt=n(85).QmD,Ht=n(85).Kc7,qt=n(85).e7B,Kt=n(85).Ixx,Lt=n(85).Adu,Vt=n(85).Hlp,Yt=n(85).rps,zt=n(85).$bT,$t=n(85).PdN,Gt=n(85).Scd,jt=n(85).NF1,Rt=n(85).EMU;function Xt(){return(0,l.yK)((t=>({closeButton:{display:Rt,alignItems:"center",justifyContent:"center",position:"absolute",top:21,right:20,width:22,height:22,padding:0,[jt]:"50%",border:"none",[Gt]:"light"===t.mode?u.FN.light.gray[75]:u.FN.dark.gray[500],zIndex:10},[$t]:{width:12,height:12,fill:"light"===t.mode?u.FN.light.gray[400]:u.FN.dark.gray[800]},modal:{[Gt]:"dark"===t.mode?"#191919":t.popoverBackground,[jt]:12,width:750,maxHeight:760,display:Rt},modalContent:{[Rt]:1,maxWidth:"60%",display:Rt,[zt]:Yt,position:"relative",[jt]:"12px 0 0 12px"},[Vt]:{padding:"36px 42px 50px 42px",display:Rt,[zt]:Yt},[Lt]:{[Rt]:1,maxWidth:"40%",[Gt]:"dark"===t.mode?"#202020":t[Kt],borderLeft:`1px solid ${t.lightDividerColor}`,padding:"20px 29px 50px 27px",display:Rt,[zt]:Yt}})),[])}function Qt(t){window.__c={n:"ModalContentWrapper"};const{[Wt]:e,data:n,paymentOptionAvailabilityStore:o}=t,{[Nt]:r,onlyShowAddOn:s,[Et]:l,[Pt]:u,taxAmount:c,[Dt]:p,coupon:m}=e,y=b[Bt](n),v=(0,d.VK)((()=>(null==y?void 0:y[Tt])??Z.Z[Wt][kt]),[y]),{payAmount:g}=b.getRenderData({[Nt]:r,[Tt]:v,promo:e.appliedPromo,data:n,onlyShowAddOn:s,[Et]:l,[Ft]:u??"year",taxAmount:c,[Dt]:p,coupon:m}),f=(0,h.useElementsOptions)({type:"subscription",amount:g.amount,currency:g[Tt]});return a()(i.Elements,{stripe:(0,h.getStripe)(),options:f},void 0,a()(Jt,{[Wt]:e,data:n,paymentOptionAvailabilityStore:o}))}function Jt(t){window.__c={n:"ModalContent"};const{[Wt]:e,data:n,paymentOptionAvailabilityStore:o}=t,l=(0,s.O7)(),u=(0,y.useIntl)(),c=Xt(),g=(0,i.useStripe)(),f=(0,i.useElements)();!function(t){const{data:e,paymentOptionAvailabilityStore:n}=t,o=(0,s.O7)(),a=(0,i.useStripe)(),d=(0,y.useIntl)(),[l,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!a||l)return;const t=a.paymentRequest({country:"US",currency:"usd",total:{label:d.formatMessage({id:"spaceSubscriptionUpgradeModal.applePay.total.label",defaultMessage:"Notion - You will be charged on a recurring basis"}),amount:0}});t.canMakePayment().then((e=>{e&&(n[qt]((n=>({...n,supportsApplePay:e.applePay,paymentRequest:t}))),n.addPaymentOption(Ht))})),t.on("paymentmethod",(t=>{const n=A.Z[Wt];if(n.open)if(v.validateAddress({[Ut]:o,[Wt]:n,intl:d})){const n={type:"paymentMethodId",value:t.paymentMethod.id};v.handleUpgrade({[Ut]:o,data:e,paymentData:n,stripe:a,onComplete:t.complete})}else t.complete("fail")})),u(!0)}),[a,l,e,o,d,n])}({data:n,paymentOptionAvailabilityStore:o});const[h,x]=(0,d.VK)((()=>[w.Z[Wt].online,o[Wt][It]]),[o]),[C,Z,_,M,T]=(0,d.VK)((()=>{var t;const n=(null===(t=O.default[Wt].data)||void 0===t?void 0:t.addOns)??[];return[e[Nt],e[Pt],e[Dt],!(0,m.de)(n),e.coupon]}),[e]);if(!e.open)return null;if(!h)return a()(k.Z,{});const B=b.getVisiblePaymentMethods({[Wt]:e,[It]:x});return r.createElement(r.Fragment,null,a()("div",{style:c.modalContent},void 0,a()(I.Z,{type:S.Z.Y,showScrollToBottomIndicator:!0},void 0,a()("div",{style:c[Vt]},void 0,a()(At.Q,{[Nt]:e[Nt],onlyShowAddOn:e.onlyShowAddOn,[Dt]:e[Dt],type:e.type}),e.onlyShowAddOn?null:a()(F.Z,{[Nt]:C,[Ft]:Z,[Dt]:_,canAddAI:M,coupon:T,onChangeBillingInterval:t=>{A.Z[qt]((e=>({...e,[Pt]:t})))},onChangeAddOnFeature:t=>{A.Z[qt]((e=>({...e,[Dt]:t})))}}),a()(Ct.g,{[Wt]:e,paymentOptionAvailabilityStore:o}),a()(Ot.C,{paymentMethods:B})))),a()("div",{style:c[Lt]},void 0,a()(I.Z,{type:S.Z.Y},void 0,a()(vt,{[Wt]:e,data:n,promo:e.appliedPromo}),a()(wt.f,{[Wt]:e,paymentOptionAvailabilityStore:o,onClickUpgrade:()=>v[Mt]({[Ut]:l,intl:u,[Wt]:e,stripe:g,elements:f,data:n,paymentOptionAvailabilityStore:o})}))),a()("button",{style:c.closeButton,onClick:()=>{A.Z.setState({open:!1})}},void 0,p.Z.close(c[$t])))}const te=function(t){window.__c={n:_t};const{data:e}=t,n=(0,d.VK)((()=>A.Z[Wt]),[]),o=(0,y.useIntl)(),i=Xt(),s=(0,r.useMemo)((()=>new C.Z),[]);return(0,r.useEffect)((()=>{const{[Wt]:t}=A.Z;if(!t.open)return;const{currentUserStore:n}=x.default[Wt],a=null!=n&&n.isDefined()?n.getModel():void 0;if(a){const n=a.getDisplayName(o);var i;if(A.Z.setState({...t,[Zt]:{...t[Zt],name:n}}),"subscribed_admin"===e.type||"unsubscribed_admin"===e.type)A.Z.setState({...t,appliedPromo:null===(i=e.customerData)||void 0===i?void 0:i.stripe.promo})}["local","development","staging"].includes(g.default.env)&&(0,c.exposeDebugValue)("useTestClock",(()=>{A.Z.setUseTestClock(!0)}))}),[]),a()(M.Z,{ariaLabelledBy:f.subscriptionCheckoutTitle,ariaDescribedBy:f.subscriptionCheckoutDescription,open:n.open,preventHideChildrenWhileOpening:!0,innerStyle:i.modal,render:()=>a()(_.Z,{capture:!0,allowEsc:!0,render:()=>n.open?a()(Qt,{[Wt]:n,data:e,paymentOptionAvailabilityStore:s}):null})})}},1063:(t,e,n)=>{n.d(e,{X:()=>p});var o=n(77094),a=n.n(o),i=(n(67294),n(480)),r=n(24405),s=n(5366),d=n(50906),l=n(8323),u=n(42402);const c=n(85).nx5;function p(t){window.__c={n:"StartupCouponInlineTextLink"};const e=(0,i.O7)(),n=(0,r.yK)((()=>({couponLink:{fontSize:12}})),[]);return a()(u.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:n.couponLink,onClick:()=>{const n=(0,l.getSubscriptionTier)();d.trackCouponTypeformClicked(e,{tier:t.tier,currentTier:n})}},void 0,a()("div",{},void 0,a()(s.FormattedMessage,{id:"startupCouponInlineLink.text",[c]:"Are you a startup?"})))}},67773:(t,e,n)=>{n.d(e,{G:()=>c});var o=n(77094),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),s=n(69653);const d=n(85).SuY,l=n(85).tpU,u=n(85).nx5;n(85).IW_;function c(t){window.__c={n:"OrderSummaryAccountBalanceItem"};const e=(0,s.hr)(),{accountBalance:n}=t;return 0===n.amount?null:a()("div",{style:e.itemContainer},void 0,a()("div",{style:e.captionContainer},void 0,a()("span",{style:e.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",[u]:"Balance"}))),a()("span",{style:e.credit},void 0,a()(i.W,{cost:n[l](),trailingZeroDisplay:d})))}},43761:(t,e,n)=>{n.d(e,{T:()=>c});var o=n(77094),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),s=n(69653);const d=n(85).SuY,l=n(85).tpU,u=n(85).nx5;n(85).ZxF;function c(t){window.__c={n:"OrderSummaryDiscountItem"};const e=(0,s.hr)(),{discount:n,promo:o}=t;return a()("div",{style:e.itemContainer},void 0,a()("div",{style:e.captionContainer},void 0,a()("span",{style:e.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",[u]:"Coupon"}))),o.duration_in_months?a()("span",{style:e.caption},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",[u]:"Valid for {durationInMonths} months",values:{durationInMonths:o.duration_in_months}})):void 0,a()("span",{style:e.credit},void 0,a()(i.W,{cost:n[l](),trailingZeroDisplay:d})))}},24862:(t,e,n)=>{n.d(e,{r:()=>c});var o=n(77094),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),s=n(69653);const d=n(85).SuY,l=n(85).tpU,u=n(85).nx5;n(85).NGd;function c(t){window.__c={n:"OrderSummarySubtotalItem"};const e=(0,s.hr)(),{subtotal:n}=t;return a()("div",{style:e.itemContainer},void 0,a()("div",{style:e.captionContainer},void 0,a()("span",{style:e.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",[u]:"Subtotal"}))),a()("span",{style:e.price},void 0,a()(i.W,{cost:n[l](),trailingZeroDisplay:d})))}},26156:(t,e,n)=>{n.d(e,{u:()=>p});var o=n(77094),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),s=n(69653),d=n(68785);const l=n(85).SuY,u=n(85).tpU,c=n(85).nx5;n(85).Zm1;function p(t){window.__c={n:"OrderSummaryTaxItem"};const e=(0,s.hr)(),{tax:n,calculatingTax:o}=t;return a()("div",{style:e.itemContainer},void 0,a()("div",{style:e.captionContainer},void 0,a()("span",{style:e.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",[c]:"Tax if applicable"}))),a()("span",{style:e.price},void 0,o?a()(d.Z,{}):0===n.amount?"â€”":a()(i.W,{cost:n[u](),trailingZeroDisplay:l})))}},69653:(t,e,n)=>{n.d(e,{Lp:()=>g,rF:()=>b,cv:()=>S,VT:()=>x,Et:()=>w,Zr:()=>C,hr:()=>A});var o=n(480),a=n(24405),i=n(59054),r=n(52692),s=n(81886),d=n(54642),l=n(21115);const u=n(85)._Fe,c=n(85).wuN,p=n(85).Exd,m=n(85)._Ny,y=n(85).eam,v=n(85).eAn;function g(t){const{[v]:e,onlyShowAddOn:n,[y]:o}=t;return[f({[v]:e,onlyShowAddOn:n}),h({[y]:o})].filter(Boolean)}function f(t){const{[v]:e,onlyShowAddOn:n}=t;if(!n)return(0,s.K)(e)}function h(t){const{[y]:e}=t;return e}function b(t){const{prices:e,quantity:n,promo:o}=t;return e.map((t=>t.getDiscountPerBillingInterval({quantity:n,promo:o}))).reduce(((t,e)=>t.plus(e)))}function S(t){const{prices:e,quantity:n,coupon:o}=t;return e.map((t=>t[m]({quantity:n,coupon:o}))).reduce(((t,e)=>t.plus(e)))}function x(t){const{taxAmount:e,calculatingTax:n,currencyValue:o}=t,a=e&&!n?e:0;return new r.n(o,a)}function w(t,e){const n=Math.min(0,l.getAccountBalance(t));return new r.n(e,-n)}function C(t){const e=(0,o.O7)(),[n]=(0,i.r5)((async()=>{if(!t)return;const n=await d.getPromoCode(e,{code:t.code});return"failed"!==n.type?n.data.promo:void 0}),[e,t]);return"resolved"===n.status?n.value:void 0}function A(){return(0,a.yK)((t=>({caption:{[p]:12,color:t[c]},captionContainer:{display:"flex",flexDirection:"column"},container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,minHeight:18},name:{[p]:12,color:t[c]},price:{[p]:12,color:t[u]},credit:{[p]:12,color:"#53A83F"},totalName:{[p]:16,color:t[u]},totalPrice:{[p]:20,lineHeight:"20px"}})),[])}}}]);