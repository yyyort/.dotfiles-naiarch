"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6808],{47478:(e,i,t)=>{t.d(i,{ZP:()=>je,UV:()=>Ye,f4:()=>Ge});var n=t(97464),o=t.n(n),a=t(77094),r=t.n(a),s=t(67294),d=t(24405),l=t(3909),c=t(5366),u=t(97880),m=t(47307),v=t(40394),g=t(42922),p=t(52275),f=t(53695),y=t(64369),h=t(480),w=t(81954),S=t(50906),x=t(54642),b=t(33954),M=t(52507),D=t(53953),k=t(13991),Z=t(82990),I=t(74194),F=t(68785);const A=t(85).D7I,C=(t(85).RgR,t(85).AEv),P=t(85).Oc6,_=t(85).nx5,T=(0,c.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",[_]:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",[_]:"Link preview integrations must verify {br}domains before they are published."}});const E=function(e){let{handleAddNewDomain:i,loading:t,verificationType:n}=e;window.__c={n:"AddNewDomain"};const[a,l]=(0,s.useState)(""),m=!Boolean(a),v=(0,s.useCallback)((e=>{l(e.target.value)}),[]),p=(0,d.yK)((()=>({title:{fontFamily:Z.Z[P](k.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},[C]:{fontFamily:Z.Z[P](k.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:m?.5:1}})),[m]);let f;switch(n){case"integration":f=T.integrationSubtitle;break;case"saml_config":f=T.samlConfigSubtitle;break;default:(0,u.unreachable)(n)}return r()(s.Fragment,{},void 0,r()(y.Z,{style:p.title},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",[_]:"Add new domain"})),r()(y.Z,{style:p[C],isMultiline:!0},void 0,s[A](c.FormattedMessage,o()({},f,{values:{br:r()("br",{})}}))),r()(I.Z,{value:a,style:p.input,placeholder:"notion.so",onChange:v}),r()(g.Z,{onClick:()=>i(a),style:p.button,isLarge:!0,disabled:m},void 0,t?r()(F.Z,{}):r()(c.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",[_]:"Next"})))};var L=t(63296);const O=t(85).nx5,V=t(85).AEv,R=t(85).Oc6;const B=function(e){let{domain:i,isExpired:t,onClose:n}=e;window.__c={n:"InvalidDomain"};const o=(0,d.yK)((e=>({title:{fontFamily:Z.Z[R](k.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},[V]:{fontFamily:Z.Z[R](k.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return r()(s.Fragment,{},void 0,r()(y.Z,{style:o.title,isMultiline:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",[O]:"Unable to verify {domain}",values:{domain:i}})),r()(y.Z,{style:o[V],isMultiline:!0},void 0,r()(c.FormattedMessage,t?{id:"verifyDomainModal.invalidDomain.expired",[O]:"The code for this domain's verification has expired."}:{id:"verifyDomainModal.invalidDomain.invalid",[O]:"You are unable to verify this domain because it has already been verified by another workspace."})),r()(L.Z,{onClick:n,style:{width:"100%"}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",[O]:"Okay"})))},U=t(85).D7I,H=(t(85).RgR,t(85).AEv),N=t(85).Oc6,W=t(85).nx5,K=(0,c.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",[W]:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",[W]:"This integration can unfurl URLs containing this domain."}});const G=function(e){let{domain:i,onClose:t,verificationType:n}=e;window.__c={n:"VerifyDomain"};const a=(0,d.yK)((()=>({title:{fontFamily:Z.Z[N](k.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},[H]:{fontFamily:Z.Z[N](k.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let l;switch(n){case"saml_config":l=K.samlConfigSubtitle;break;case"integration":l=K.integrationSubtitle;break;default:(0,u.unreachable)(n)}return r()(s.Fragment,{},void 0,r()(y.Z,{style:a.title,isMultiline:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",[W]:"Successfully verified {domain}",values:{domain:i}})),r()(y.Z,{style:a[H],isMultiline:!0},void 0,s[U](c.FormattedMessage,o()({},l,{values:{br:r()("br",{})}}))),r()(L.Z,{onClick:t,style:{width:"100%"}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",[W]:"Okay"})))};var Y=t(63143),j=t(43132),z=t(16402),$=t(64921);const q=t(85).BQ6,J=t(85).nx5,X=t(85).uGP,Q=t(85).v3c,ee=t(85).nLZ,ie=t(85).UPJ,te=t(85).ewQ,ne=t(85).AEv,oe=t(85).g7N,ae=t(85).jkI,re=t(85).OM8,se=t(85).ChN,de=t(85).Exd,le=t(85).Oc6,ce=t(85).aFd,ue=t(85).Mho;const me=function(e){let{handleVerifyDomain:i,[ue]:t,loading:n}=e;window.__c={n:"VerifyExistingDomain"};const o=(0,h.O7)(),a=t.expiresAt-Date.now()<2*Y.HourMs,u=(0,d.yK)((e=>({title:{[ce]:Z.Z[le](k.SP).sans,[de]:17,[se]:500,[re]:"24px",textAlign:ae,[oe]:8},[ne]:{[ce]:Z.Z[le](k.SP).sans,[de]:14,[se]:400,[re]:"19px",textAlign:ae},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{[ce]:Z.Z[le](k.SP).sans,[de]:14,[se]:400,[re]:"19px",[oe]:12},expiresSoonText:{color:"dark"===e.mode?e[te].red[700]:e[te].red[500]},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:ae,[ie]:ae,color:e.lightTextColor,[ce]:Z.Z[le](k.SP).sans,[de]:12,[se]:500,[re]:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,[ce]:Z.Z[le](k.SP).mono,[de]:14,[se]:400,[re]:"18px"},codeContainer:{display:"flex",alignItems:ae,[ie]:ae,border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3,[ee]:4,[oe]:8}})),[]);return r()(s.Fragment,{},void 0,r()(y.Z,{[q]:u.title},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",[J]:"Verify your domain"})),r()(y.Z,{[q]:u[ne]},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",[J]:"Follow these steps to finalize verification."})),r()(y.Z,{isSmall:!0,[q]:{[ee]:22}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",[J]:"Verification code"})),r()("div",{[q]:u.codeContainer},void 0,r()(y.Z,{[q]:u.code},void 0,`notion-domain-verification=${t[Q]}`),r()($.Z,{onClick:function(){j.copyString({environment:o,stringValue:`notion-domain-verification=${t[Q]}`,copiedMessage:j.clipboardMessages[X]})},[q]:u.copyButton},void 0,l.Z.copy(u.copyIcon),r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",[J]:"Copy"}))),r()(y.Z,{[q]:a?u.expiresSoonText:void 0,isSmall:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",[J]:"Expires on {timeLeft}",values:{timeLeft:(0,z.gs)(t.expiresAt)}})),r()("ol",{[q]:u.list},void 0,r()("li",{[q]:u.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",[J]:"Navigate to the DNS record section of your domain host."})),r()("li",{[q]:u.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",[J]:"Create a new TXT record and paste in the code above as the value."})),r()("li",{[q]:u.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",[J]:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})),r()("li",{[q]:u.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",[J]:'Click "Verify" to notify Notion to check your DNS record.'}))),r()(L.Z,{[q]:{width:"100%"},onClick:()=>i(t),disabled:n},void 0,n?r()(F.Z,{}):r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",[J]:"Verify"})))},ve=t(85).NF1,ge=t(85).Je3,pe=t(85).Scd,fe=t(85).irb,ye=t(85).Mho,he=t(85).H6R,we=t(85).W3n;const Se=function(e){window.__c={n:"VerifyDomainModal"};const i=(0,h.O7)(),t=(0,c.useIntl)(),n=(0,d.Fg)(),[o,a]=(0,w.AF)(e.store,M.ZP),{verificationType:l,verificationTargetId:v,refreshDomains:g}=e,p=(0,s.useCallback)((()=>{a((e=>({...e,[we]:!1,modalOpen:!1})))}),[a]),f=(0,s.useCallback)((async e=>{a((e=>({...e,[we]:!0})));const n="integration"===l?{type:l,integrationId:v,[he]:e}:{type:l,spaceId:v,[he]:e},o=await x.createDomainVerificationCode(i,n);if("success"===o.type){g(),S.trackAddDomainVerification(i,{type:l});const e=o.data[ye],t=(0,M.Hs)(e);a((e=>({...e,[ye]:t,[we]:!1})))}else m[fe]((0,b.wf)(t,o)),a((e=>({...e,[we]:!1})))}),[i,a,v,g,l,t]),y=(0,s.useCallback)((async e=>{a((e=>({...e,[we]:!0})));const n=await x.verifyDomain(i,{verificationId:e.id});if(S.trackDomainVerificationAttempt(i,{type:l}),"success"===n.type){g(),S.trackDomainVerificationSuccess(i,{type:l});const t={type:"verified",[he]:e[he]};a((e=>({...e,[ye]:t,[we]:!1})))}else m[fe]((0,b.wf)(t,n)),a((e=>({...e,[we]:!1})))}),[i,t,a,g,l]),k=(0,s.useCallback)((()=>{if(!o[ye])return r()(E,{handleAddNewDomain:f,[we]:o[we],verificationType:l});switch(o[ye].type){case"invalid":return r()(B,{[he]:o[ye][he],isExpired:Date.now()>o[ye].expiresAt,onClose:p});case"unverified":return r()(me,{handleVerifyDomain:y,[ye]:o[ye],[we]:o[we]});case"verified":return r()(G,{[he]:o[ye][he],onClose:p,verificationType:l});default:(0,u.unreachable)(o[ye])}}),[o[ye],o[we],y,f,p,l]);return r()(D.Z,{open:o.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:p,render:()=>r()("div",{style:{[pe]:n[ge],width:410,padding:24,[ve]:3}},void 0,k())})};var xe=t(5478);const be=t(85).v3c,Me=t(85).PP_,De=t(85).L_E,ke=t(85).Aad,Ze=t(85).ihI,Ie=t(85).LNv,Fe=t(85).nLZ,Ae=t(85).D7I,Ce=t(85).Mho,Pe=t(85).g7N,_e=t(85).jkI,Te=t(85).MLn,Ee=t(85).d6L,Le=t(85).O9h,Oe=t(85).nx5,Ve=t(85).XZb,Re=t(85).H6R,Be=[{id:Re,[Ve]:r()(c.FormattedMessage,{id:"domainVerificationTable.table.header.domain",[Oe]:"Domain"}),[Le]:e=>r()(y.Z,{},void 0,e[Re]),widthData:{width:100},sortable:!1},{id:Ee,[Ve]:r()(c.FormattedMessage,{id:"domainVerificationTable.table.header.status",[Oe]:"Status"}),[Le]:e=>r()(We,{[Ee]:e[Ee]}),widthData:{width:100},sortable:!1},{id:"actions",[Ve]:null,[Le]:e=>r()(Ke,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],Ue=(0,c.defineMessages)({verifiedSAMLWarning:{[Oe]:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{[Oe]:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{[Oe]:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),He={fontSize:17,fontWeight:500,lineHeight:"24px",[Te]:_e,[Pe]:8},Ne={fontSize:14,fontWeight:400,lineHeight:"19px",[Te]:_e};function We(e){let{[Ee]:i}=e;window.__c={n:"VerificationToken"};const t=(0,d.yK)((e=>{const t={[xe.YF.Success]:e[Ie].green,[xe.YF.Pending]:e[Ie].yellow,[xe.YF.Failure]:e[Ie].red},n={[xe.YF.Success]:e[Ze].green,[xe.YF.Pending]:e[Ze].yellow,[xe.YF.Failure]:e[Ze].red},o={[xe.YF.Success]:e[ke].green,[xe.YF.Pending]:e[ke].yellow,[xe.YF.Failure]:e[ke].red};return{[De]:{background:t[i],color:o[i],display:"flex",justifyContent:_e,alignItems:_e,gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:n[i],width:10,height:10,borderRadius:"100%"}}}),[i]);return r()("div",{style:t[De]},void 0,r()("div",{style:t.dot}),function(e){switch(e){case xe.YF.Success:return r()(c.FormattedMessage,{[Oe]:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case xe.YF.Pending:return r()(c.FormattedMessage,{[Oe]:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case xe.YF.Failure:return r()(c.FormattedMessage,{[Oe]:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,u.unreachable)(e)}}(i))}function Ke(e){let{onShowDetails:i,onRemove:t}=e;window.__c={n:"DropdownMenu"};const n=(0,d.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:Me},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:Me}})),[]),a=[];return i&&a.push({key:"details",action:()=>i(),render:e=>s[Ae](p.Z,o()({},e,{style:n.menuItem,focused:!1,icon:l.Z.info(n.menuIcon),title:r()(c.FormattedMessage,{[Oe]:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:r()(c.FormattedMessage,{[Oe]:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0}))}),t&&a.push({key:"remove",action:()=>t(),render:e=>s[Ae](p.Z,o()({},e,{style:n.menuItem,focused:!1,icon:l.Z.trash(n.menuIcon),title:r()(c.FormattedMessage,{[Oe]:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:r()(c.FormattedMessage,{[Oe]:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0}))}),0===a.length?null:r()(f.N,{hideDropdownIcon:!0,title:l.Z.dots(n.primaryIcon),items:a})}function Ge(e){return{[Re]:e,[Ee]:xe.YF.Success,data:{type:"verified",[Re]:e}}}function Ye(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{[Re]:e[Re],[Ee]:xe.YF.Failure,data:{type:"invalid",id:e.id,[Re]:e[Re],[be]:e[be],createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{[Re]:e[Re],[Ee]:xe.YF.Pending,data:{type:"unverified",id:e.id,[Re]:e[Re],[be]:e[be],createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const je=function(e){window.__c={n:"DomainVerificationTable"};const{disabled:i,domains:t,domainVerificationStore:n,verificationType:o,verificationTargetId:a,refreshDomains:l,onRemoveDomain:p,onClickAddDomain:f,renderOverrideAddDomainButton:h}=e,w=(0,d.yK)((e=>(0,v.b)({columnRenderInfo:Be,theme:e,containerMarginTop:0})),[]);function S(){i||(f&&f(),n.setState({[Ce]:void 0,loading:!1,modalOpen:!0}))}const x=t.map((e=>{let{[Re]:t,[Ee]:a,data:d}=e;return{id:"verified"===d.type?t:d.id,isClickable:!1,[Re]:t,[Ee]:a,onShowDetails:i?void 0:()=>function(e){i||n.setState({[Ce]:e,loading:!1,modalOpen:!0})}(d),onRemove:i?void 0:()=>async function(e,i){let t;if(i===xe.YF.Failure)return void p(e);i===xe.YF.Pending?t=Ue.unverifiedDomainWarning:i===xe.YF.Success?t="saml_config"===o?Ue.verifiedSAMLWarning:Ue.verifiedIntegrationsWarning:(0,u.unreachable)(i),await m.confirmUserAction({message:r()("div",{style:He},void 0,r()(c.FormattedMessage,{[Oe]:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})),description:r()("div",{style:Ne},void 0,s[Ae](c.FormattedMessage,t)),acceptLabel:r()(c.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",[Oe]:"Delete domain"}),cancelLabel:r()(c.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",[Oe]:"Cancel"})})&&p(e)}(d,a)}}));return r()(s.Fragment,{},void 0,h?h(S):r()(g.Z,{isLarge:!0,disabled:i,onClick:S,style:{margin:"4px 0px 16px",width:"fit-content"}},void 0,r()(c.FormattedMessage,{[Oe]:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})),r()(v.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Be,rows:x,styles:w,renderNoRowsComponent:()=>r()(y.Z,{isSmall:!0,style:{[Fe]:15,[Pe]:40,[Te]:_e}},void 0,r()(c.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",[Oe]:"No domains configured."}))}),r()(Se,{store:n,verificationTargetId:a,verificationType:o,refreshDomains:l}))}},27830:(e,i,t)=>{t.d(i,{s:()=>Si,D:()=>Zi});var n=t(97464),o=t.n(n),a=t(77094),r=t.n(a),s=t(96486),d=t.n(s),l=t(67294),c=t(1302),u=t(480),m=t(81954),v=t(24405),g=t(15145),p=t(1800),f=t(7057),y=t(78601),h=t(66673),w=t(3909),S=t(64572),x=t(76725),b=t(51859),M=t(21202),D=t(70279),k=t(70203),Z=t(44805),I=t(82990),F=t(44876),A=t(5366),C=t(43132),P=t(45990),_=t(993),T=t(25103),E=t(12359),L=t(761),O=t(95477),V=t(17731),R=t(73744),B=t(41232),U=t(6398),H=t(88804),N=t(25464),W=t(15723),K=t(79315),G=t(96049),Y=t(42653),j=t(39098),z=t(48588),$=t(93405),q=t(64921),J=t(31945),X=t(51077),Q=t(73063),ee=t(71669),ie=t(44532),te=t(76798),ne=t(27186),oe=t(40662),ae=t(69255),re=t(25735),se=t(29551);const de=t(85).BCA,le=t(85).iDK,ce=t(85).rps,ue=t(85).$bT,me=t(85).oNK,ve=t(85).SMM,ge=t(85).V8e,pe=t(85).I7L,fe=t(85).UPJ,ye=t(85).mZf,he=t(85).nLZ,we=t(85).Gpy,Se=t(85).LA9,xe=t(85).mnA,be=t(85).BVE,Me=t(85).g7N,De=t(85).TtP,ke=t(85).xrj,Ze=t(85).qpZ,Ie=t(85).skY,Fe=t(85).FlB,Ae=t(85).N6$,Ce=t(85).dIU,Pe=t(85).L_E,_e=t(85).IK4,Te=t(85).Zij,Ee=t(85).Sgw,Le=t(85).voC,Oe=t(85).Jkr,Ve=t(85).lUP,Re=t(85)._Fe,Be=t(85).NF1,Ue=t(85).PXg,He=t(85).NLk,Ne=t(85).jkI,We=t(85).H1U,Ke=t(85).EMU,Ge=t(85).sM5,Ye=t(85).Hco,je=t(85).ChN,ze=t(85).uJR,$e=t(85).hF9,qe=t(85).u1T,Je=t(85).TLr,Xe=t(85).uGP,Qe=t(85)._vZ,ei=t(85).ZG6,ii=t(85).W_R,ti=t(85).j_T,ni=t(85).BQ6,oi=t(85).nx5,ai=t(85).Uie,ri=t(85).D7I,si=t(85).NMs,di=t(85).LlE,li=t(85).wuN,ci=t(85).Exd,ui=t(85).JgC,mi=t(85).A_N,vi=t(85).ccq,gi=t(85).HVF,pi=t(85).wJk,fi=t(85).Omf,yi=t(85).QmD,hi=t(85).XtO,wi=t(85).Byv;function Si(e){window.__c={n:"HoverPreviewOverlay"};const i=(0,m.Kw)(G.Z,{debugName:"HoverPreviewOverlay"}),{[yi]:t,pinPopup:n,unpinPopup:o,hasBeenHovering:a,isPinned:s}=function(){const[e]=(0,m.AF)(z.Z),i=(0,h.Kt)(e,400,Object.is),[t,n]=(0,l.useState)(void 0),o=t||i,a=(0,l.useCallback)((()=>n(o)),[o]),r=(0,l.useCallback)((()=>{n(void 0)}),[]);return{[yi]:o,pinPopup:a,unpinPopup:r,hasBeenHovering:e&&e===o,isPinned:Boolean(t)}}(),d=function(e){const i=(0,u.O7)();return(0,m.VK)((()=>!!e&&(0,H.E)(i,e[hi])),[e,i])}(t),c=(0,l.useMemo)((()=>Boolean(t&&function(e,i){return i&&(e.annotations.some(k.isLinkAnnotation)||e.annotations.some(k[wi]))}(t,d))),[t,d]),v=!!c||Boolean(!i&&a),g=(0,l.useMemo)((()=>t&&t.token.node[fi]()),[t]),[,p]=(0,m.AF)(Y.Z);(0,l.useEffect)((()=>(p({isPinned:s}),()=>p({isPinned:!1}))),[s,p]);const f=!(null!=t&&t.annotations.some(k[wi]));return r()(ie.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!c,preventScaleTransition:!0,[gi]:!0,popupType:ie.ZP.PopupType.Popup,open:v,originRect:g,originGap:8,alignmentToOrigin:ie.ZP.Alignment.Start,[vi]:ie.ZP.Placement.Bottom,useLightBoxShadow:f,render:()=>t&&r()("div",{onMouseEnter:n,onMouseLeave:o},void 0,r()(xi,{[yi]:t,isHoveredTokenEditable:d,[pi]:o}))})}function xi(e){window.__c={n:"HoverPreviewOverlayRenderer"},(0,l.useEffect)((()=>{const e=d().throttle(T.l,200,{leading:!0});return R[mi](window,"scroll",e,!0),()=>R[ui](window,"scroll",e,!0)}),[]);const i=(0,u.Fy)(),t=(0,m.VK)((()=>{const{currentSpaceStore:e}=K.default[yi];return e?e.getPermissionGroups():[]}),[]),n=(0,v.yK)((e=>({noMembersInGroupStyle:{[ci]:I.Z[ci].UISmall.desktop,color:e[li],[di]:"4px 8px"}})),[]),a=e[yi].annotations,s=a.find(k.isLinkAnnotation),c=a.find(k.isDateAnnotation),g=a.find(k.isGroupAnnotation),p=a.find(k.isTemplateVariableAnnotation),f=k.findExternalObjectInstanceAnnotation(a);if(s&&e[yi][hi].table!==D.x_)return l[ri](bi,o()({},e,{[yi]:{...e[yi],[si]:s}}));if(c)return l[ri](Mi,o()({},e,{[yi]:{...e[yi],[si]:c}}));if(g){const e=k.getGroupAnnotationData(g);if(e){const i=e.groupId,o=t.find((e=>e.id===i));if(o)return r()(re.Y,{group:o,limit:10,color:"white_background",trackHover:!0,noMembersMessage:r()(se.gq,{[ni]:n.noMembersInGroupStyle},void 0,r()("div",{[ni]:I.Z[ai]},void 0,r()(A.FormattedMessage,{id:"groupPreview.noUsers",[oi]:"No users in this group"})))})}}return p?l[ri](Di,o()({},e,{[yi]:{...e[yi],[si]:p}})):f&&!i.isMobile?l[ri](Zi,o()({},e,{[yi]:{...e[yi],[si]:f},[pi]:e[pi]})):null}function bi(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{[pi]:i}=e,{[si]:t,[hi]:n,token:o}=e[yi],a=(0,u.O7)(),s=(0,v.Fg)(),d=k.getLinkAnnotationData(t),f=(0,S.A5)({url:d,baseUrl:O.default[ti],[ii]:O.default[ii]}),y=(0,l.useCallback)((async()=>{i(),_.selectInteractiveToken({token:o,[hi]:n}),await c.default[ei](),P[Qe]({type:"focusOnly",focus:!0})}),[i,n,o]),h=(0,l.useCallback)((async()=>{i(),await c.default[ei]();const e=C.clipboardMessages[Xe];let t=d;const o=(0,b.Wj)({url:d,baseUrl:O.default[ti],[ii]:O.default[ii],isMobile:a.device.isMobile,protocol:O.default.protocol,currentUrl:window.location.href});if("page"===o.name){const e=j.G[Je](n,{table:M.iU,id:o.blockId});t=(0,p.Z)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:O.default[ti],[qe]:o[qe],[$e]:o[$e],[ze]:o[ze],peekMode:o.peekMode,pageVisitSource:g.tY.CopyLink})}C.copyString({environment:a,stringValue:t,copiedMessage:e})}),[a,i,n,d]),x=(0,v.yK)((e=>({wrapper:{[ci]:I.Z[ci].UISmall.desktop,color:e[li],[je]:I.Z[je].regular,fill:e[Ye]},destination:{[di]:"4px 0 4px 6px"},button:{[Ge]:Ke,[We]:Ne,[di]:"2px 6px",[He]:"nowrap",[Ue]:2,[Be]:3,color:e[Re]},destinationText:{paddingRight:6,maxWidth:250,...I.Z[ai]},[Ve]:{height:"1em",[Oe]:"1em",[Ue]:"0.25em",fill:e[Ye]}})),[]),D=(0,m.VK)((()=>{if(!f)return;const e=j.G[Je](n,{table:M.iU,id:f});return{pageIcon:(0,Z.renderPageMentionIcon)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:O.default[ti],[Le]:n[Le],emojiType:(0,V.e_)(a),isSafariOrIOS:a.device.isSafari||a.device.isIOS,isClient:!0,showEmojiInline:a.device.isWindows,[Ee]:a.currentUser.id,theme:s}),[Te]:r()(te.Z,{[ni]:x.destinationText,[hi]:e})}}),[a,n,f,x,s])||{pageIcon:w.Z.globe2(x[Ve]),[Te]:r()("div",{[ni]:x.destinationText},void 0,d)};return r()(se.gq,{[ni]:x.wrapper,[We]:Ne},void 0,r()(se.gq,{[ni]:x.destination,[We]:Ne},void 0,D.pageIcon,D[Te]),r()(Q.Z,{onClick:h,[Ve]:w.Z.copy,isDarkIconColor:!0}),e.isHoveredTokenEditable&&r()(q.Z,{[ni]:x.button,onClick:y},void 0,r()(A.FormattedMessage,{[oi]:"Edit",id:"hoverPreviewOverlay.editButton.label"})))}function Mi(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{[si]:i}=e[yi],t=k[_e](i),n=(0,v.yK)((e=>({[Pe]:{[ci]:I.Z[ci].UISmall.desktop,color:e[li],[di]:"4px 8px"},[Ve]:{height:"1em",[Oe]:"1em",[Ue]:"0.25em",fill:e[Ye]}})),[]),o=(0,A.useIntl)(),a="relative"===t[Ce]?"ll":"relative",s=(0,f.ZV)({value:t,[Ce]:a,[Ae]:"h:mm A",[Fe]:!0,intl:o});return s===(0,f.ZV)({value:t,[Ce]:t[Ce],[Ae]:t[Ae],[Fe]:!0,intl:o})?null:r()(se.gq,{[ni]:n[Pe],[We]:Ne},void 0,w.Z.calendar(n[Ve]),r()("div",{[ni]:I.Z[ai]},void 0,s))}function Di(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{[si]:i}=e[yi],t=k[Ie](i),n=(0,A.useIntl)(),o=k.getTemplateVariableAnnotationDescription(t.type,n),a=(0,v.yK)((e=>({[Pe]:{[ci]:I.Z[ci].UISmall.desktop,color:e[li],[di]:"4px 8px"}})),[]);return r()(se.gq,{[ni]:a[Pe],[We]:Ne},void 0,r()("div",{[ni]:I.Z[ai]},void 0,o))}function ki(e){var i;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:t,[hi]:n}=e,a=(0,v.yK)((e=>({[Te]:{color:e[Re],[je]:I.Z[je].medium,[He]:"initial"},[Ze]:{color:e[li],[ci]:I.Z[ci].UISmall.desktop},dictionaryKey:{color:e[li],[je]:I.Z[je].regular,[ci]:I.Z[ci].UISmall.desktop},dictionaryValue:{color:e[Re],[ci]:I.Z[ci].UIRegular.desktop,[He]:"normal",wordBreak:"break-word"}})),[]);return l[ri](l.Fragment,null,t[Te]&&r()(se.gq,{},void 0,l[ri](U.ox,o()({},t[Te],{[hi]:n,[ni]:a[Te]}))),t[ke]&&t[ke][De]>0&&r()(se.gq,{[We]:"center",[ni]:{...a[Ze],[Me]:3}},void 0,(0,x.Z)(t[ke].map(((e,i)=>l[ri](U.ox,o()({key:`attribute-${i}`},e,{[hi]:n,[ni]:{...a[Ze],...I.Z[ai]}}))))||[],(e=>r()("span",{},`dot-${e}`," ","·"," ")))),t[be]&&t[be][De]>0&&r()(se.Ht,{},void 0,t[be].map(((e,i)=>{var s;let{key:d,value:c}=e;return r()(se.gq,{[ni]:{[Me]:i!==((null===(s=t[be])||void 0===s?void 0:s[De])??0)-1?3:0}},i,r()("div",{[ni]:{[Ue]:10,[Oe]:"30%",[Ge]:"flex",[We]:"center"}},void 0,r()("span",{[ni]:a.dictionaryKey},void 0,l[ri](A.FormattedMessage,o()({},d[xe],{[we]:{value:c[Se].name}})))),r()("div",{[ni]:{[Oe]:"70%",[Ge]:"flex",[We]:"center"}},void 0,c[Ve]&&(0,F.li)(c[Ve])&&r()(X.Z,{type:"image_url",imageURL:c[Ve][we][0],size:16,[ni]:{[Ue]:4}}),l[ri](U.ox,o()({},c,{[hi]:n,[ni]:a.dictionaryValue,avatarStyle:{[Ue]:4}}))))}))),t.bodyAttribute&&r()(se.gq,{[ni]:((null===(i=t[be])||void 0===i?void 0:i[De])??0)>0?{[he]:3}:{}},void 0,r()(U.hx,{[Se]:t.bodyAttribute})),t[ye]&&r()("div",{[ni]:{[he]:t[be]?6:0,[Me]:4,[Ge]:"flex",[fe]:"center"}},void 0,r()("div",{},void 0,r()(ee.Z,{src:t[ye][we][0],[ni]:{[Oe]:"100%",[pe]:200}}))))}function Zi(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{[yi]:{[si]:i,[hi]:t,token:n},[pi]:a}=e,s=k[ge](i),d=(0,u.O7)(),c=(0,v.Fg)(),g=(0,l.useRef)(null),p=(0,m.VK)((()=>{const i=j.G[Je](t,{table:M.iU,id:s,spaceId:t.pointer.spaceId}),u=i.canEdit(),m=(0,B._F)({[hi]:i,isInDarkMode:"dark"===c.mode,canEdit:u,[Ee]:d.currentUser.id,getRenderFn:e=>i=>{var t,n;return(null===(t=e.hover)||void 0===t?void 0:t.call(e,i))||(null===(n=y.j.hover)||void 0===n?void 0:n.call(y.j,i))},showAction:void 0});if(!m)return;const{renderConfig:v,integration:p}=m,f=Boolean(m.action),h=e.isHoveredTokenEditable,S=t[ve]&&t[ve]instanceof j.G?t[ve]:void 0,x={key:"turn preview into block",render:e=>l[ri]($.Z,o()({},e,{[Te]:r()(A.FormattedMessage,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",[oi]:"Turn into preview"}),svg:w.Z.loop})),action:()=>{S&&n&&E.createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:d,perform:e=>{L.transformExternalObjectInstanceMentionIntoBlock({block:i,parentStore:S,transaction:e,token:n}),e.postSubmitCallbacks.push((e=>{e||null==a||a()}))}})}},b=[];return i[me]()&&b.push(x),l[ri]("div",{[ni]:{[Ge]:Ke,[ue]:ce},ref:g},r()(se.gq,{[We]:Ne,[ni]:{[ci]:12}},void 0,r()(X.Z,{type:"image_url",imageURL:p[Ve],size:16,[ni]:{[Ue]:"4px"}}),r()("div",{[ni]:{flexGrow:1,[je]:I.Z[je].medium}},void 0,p.name),n&&!f&&h&&r()("div",{},void 0,r()(J.ZP,{popupType:J.Z4.Popup,[vi]:N.u.Right,alignmentToOrigin:N.v.Start,originGap:4,onClose:()=>{let e=!1;const i=g[le];i&&(e=(0,W.uh)(i[fi](),ne.pointerState.x,ne.pointerState.y)),e||null==a||a()},renderOrigin:e=>l[ri](q.Z,o()({[ni]:{[Ge]:"flex",[We]:"center",[fe]:"center",[Oe]:20,height:20,[Be]:3}},e),w.Z.dots({[Oe]:14})),render:e=>r()(ae.Z,{titleForReloadMenuOption:r()(A.FormattedMessage,{id:"linkMention.reload",[oi]:"Reload mention"}),[hi]:i,[de]:()=>e.close(),extraSecondaryItems:b})}))),f&&h?r()("div",{[ni]:{[Ge]:Ke,[ue]:ce,[We]:Ne,margin:"6px 0"}},void 0,r()(oe.Z,{canEdit:u,[hi]:i,isHoverPreview:!0,postActionCallback:a})):r()(ki,{renderConfig:v,[hi]:i}))}),[s,t,d,c,n,a,e.isHoveredTokenEditable,g]);return p?r()("div",{[ni]:{[di]:"8px 16px",minWidth:300,maxWidth:350}},void 0,p):null}},5478:(e,i,t)=>{t.d(i,{YF:()=>M,ZP:()=>k});var n=t(97464),o=t.n(n),a=t(77094),r=t.n(a),s=t(67294),d=t(24405),l=t(25464),c=t(58032),u=t(85567);const m=t(85).OtN,v=t(85).D7I,g=t(85).PXg,p=t(85).gGi,f=t(85).NF1,y=t(85).X_m,h=t(85).Scd,w=t(85).Aad,S=t(85).ihI,x=t(85).LNv,b=t(85).Joh,M={Success:"success",Pending:"pending",Failure:"failure"};const D={display:"flex",justifyContent:"center",alignItems:"baseline"},k=function(e){let{status:i,value:t,[b]:n,...a}=e;window.__c={n:"StatusToken"};const k=(0,d.Fg)(),Z={[M.Success]:k[x].green,[M.Pending]:k[x].yellow,[M.Failure]:k[x].red},I={[M.Success]:k[S].green,[M.Pending]:k[S].yellow,[M.Failure]:k[S].red},F={[M.Success]:k[w].green,[M.Pending]:k[w].yellow,[M.Failure]:k[w].red};return n?s[v](u.Z,o()({},a,{[m]:Z[i],color:F[i],value:r()(c.Z,{placement:l.u.Bottom,alignment:l.v.Start,[b]:n,render:e=>s[v]("div",o()({style:D},e),r()("div",{style:{[h]:I[i],width:8,[y]:8,[f]:p,[g]:4}}),t)})})):s[v](u.Z,o()({},a,{[m]:Z[i],color:F[i],value:r()("div",{style:D},void 0,r()("div",{style:{[h]:I[i],width:8,[y]:8,[f]:p,[g]:4}}),t)}))}},719:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(97464),o=t.n(n),a=t(77094),r=t.n(a),s=t(67294),d=t(83355),l=t(98742),c=t(74194);const u=t(85).cZW,m=t(85).Dd5,v=t(85).ZUI,g=t(85).dLQ,p=t(85).P0R,f=t(85).exC;class y extends d.Z{constructor(){super(...arguments),this[f]=e=>{"Backspace"===e.key&&0===this[p].value.length&&this[p].onRemoveLastToken()}}renderComponent(){const{device:e}=this.environment;return r()("div",{className:this[p].readOnly?void 0:"notion-focusable-within",onClick:this[p].onClick,style:e[g]?this.getMobileWrapStyle():this[v]()},void 0,this[p].tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,i=0===this[p].tokens.length;return s.createElement(c.Z,o()({format:c.Z.Format.Transparent},(0,l.Z)({onKeyDown:this[f]},{[m]:this[p][m]}),{value:this[p].value,onSubmit:this[p].onSubmit,onBlur:this[p].onBlur,focus:this[p].focus,style:{...y.inputStyle,margin:e[g]?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this[p].readOnly,inputStyle:{height:18},size:1,type:this[p].type,[u]:i?this[p][u]:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}[v](){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this[p].style}}getMobileWrapStyle(){return{...this[v](),fontSize:14,padding:"7px 10px 0"}}}y.displayName="TokenInput",y.inputStyle={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const h=y},25735:(e,i,t)=>{t.d(i,{Y:()=>x});var n=t(77094),o=t.n(n),a=t(67294),r=t(480),s=t(81954),d=t(24405),l=t(5366),c=t(82990),u=t(50906),m=t(16639),v=t(79315),g=t(29302);const p=t(85).nx5,f=t(85).$W2,y=t(85).S6b,h=t(85).wuN,w=t(85).Exd,S=t(85).L_E;function x(e){window.__c={n:"GroupMembersListTooltip"};const{group:i,limit:t,noMembersMessage:n,color:x,trackHover:b}=e,M=(0,d.yK)((e=>({[S]:{marginBottom:4,..."white_background"===x?{[w]:c.Z[w].UISmall.desktop,color:e[h],padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===x?{[w]:c.Z[w].UISmall.desktop,color:e[h]}:{color:e[y]}}})),[x]),D=(0,s.VK)((()=>v.default.state.currentSpaceStore),[]),k=(0,r.O7)();(0,s.VK)((()=>{b&&u.trackHoverMentionGroup(k,{group_id:i.id})}),[b,i.id,k]);const{countRemainingUsers:Z,limitedUserStores:I}=(0,s.VK)((()=>(0,m.rm)({group:i,spaceStore:D,limit:t})),[i,D,t]);return 0===I.length?a.createElement(a.Fragment,null,n):o()("div",{style:M[S]},void 0,I.map((e=>o()("div",{style:M.userContainer},e.id,o()(g.Z,{style:M.user,userStore:e,[f]:18})))),Z>0&&o()("div",{style:M.moreMessage},void 0,o()(l.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",[p]:"{countRemainingUsers} more…",values:{countRemainingUsers:Z}})))}},88804:(e,i,t)=>{t.d(i,{N:()=>d,E:()=>l});var n=t(96026),o=t(39098),a=t(98165),r=t(67669);const s=t(85).wGK;function d(e,i){const t=i[s](),d=t instanceof o.G&&t.isPageBlock()&&t.isLocked(),l=(0,a.isPathRecordStore)(t)&&n.Z.getMode(e,t),c=Boolean((0,r.hasPublicEditModeButCannotEdit)(l));return!i.canEdit()||d||c}function l(e,i){return!d(e,i)}},52507:(e,i,t)=>{t.d(i,{AS:()=>d,Hs:()=>l,ZP:()=>c});var n=t(49085),o=t(55384),a=t(44312),r=t(97880);class s extends n.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const d=(0,r.makeTypeGuard)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function l(e){const i=o.kk.fromValue(a.Jd,e);return{type:i.verified_at?"verified":"unverified",id:i.id,domain:i.domain,verificationCode:i.verification_code,createdAt:i.created_at,expiresAt:i.expires_at,invalidatedAt:i.getInfo().invalidated_at}}const c=s},39248:(e,i,t)=>{t.d(i,{E:()=>d});var n=t(4615),o=t(89101),a=t(64002);const r=t(85).xm3;function s(e,i){const t=i.trim().toLowerCase(),n=(0,a.sluggify)(t).replace(/\./g,"-");return n?`${n}-${e}`:e}function d(e,i){if(!(0,n.isUUIDWithDashes)(e))return`${o._j[r]}/${e}`;const t=s(e,void 0===i?"":i);return`${o._j[r]}/${t}`}}}]);