"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9765],{78910:(e,s,a)=>{a.r(s),a.d(s,{InjectThirdPartyScripts:()=>j,useThirdPartyScripts:()=>U});var i=a(96486),t=a.n(i),n=a(67294),r=a(13991),o=a(480),d=a(81954),c=a(29450),l=a(66673),u=a(65454),p=a(4615);a(85).FBw;const m="a2a8e2144b2bbbb4074a",g="901895b8-45c7-40c8-ba91-626cfc6739b3";function f(){var e,s,a;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},s=["load","identify","sidentify","track","page","on","off","reset"],a=0;a<s.length;a++)window._cio[s[a]]=e(s[a])}var w=a(7250),y=a(93724),I=a(62291),S=a(49902),b=a(50906),v=a(5978),_=a(95477),h=a(15010),k=a(58455),C=a(79315),E=a(61893),V=a(74055),K=a(10161),Z=a(3418),A=a(69454),D=a(7339);const P=a(85).tDk,M=a(85).Ubh,R=a(85).z99,T=a(85).FqN,F=a(85).QmD,O=a(85).qJ8;function U(){const e=(0,o.O7)(),s=(0,o.Fy)(),{currentUser:a}=e,i=(0,d.VK)((()=>{var e;return null===(e=C.default[F][O])||void 0===e?void 0:e.id}),[]),U=(0,d.VK)((()=>D.C[F].ready),[]);!function(e){let{isEnabled:s,isLoggedIn:a,userId:i,onMessageOpened:t,onMessageDismissed:r,onMessageError:o,onMessageAction:d}=e;(0,n.useEffect)((()=>{s&&(0,c.hasPermissionForThirdPartyServiceBrowser)("customer_io")&&("cio-tracker"in window||(f(),(0,u.ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":m,"data-use-array-params":"true","data-in-app-org-id":g,"data-use-in-app":"true","data-auto-track-page":"false"}})))}),[s]);const w=(0,l.D9)(i);(0,n.useEffect)((()=>{w!==i&&(f(),a&&void 0!==i?(window._cio.identify({id:(0,p.withoutDashes)(i)}),t&&window._cio.on("in-app:message-opened",t),r&&window._cio.on("in-app:message-dismissed",r),d&&window._cio.on("in-app:message-action",d),window._cio.on("in-app:message-error",o)):window._cio.reset())}),[a,i,w,t,r,o,d])}({isEnabled:(0,d.VK)((()=>a[T]()&&U&&K.default.checkGate("customerio")),[a,U]),[T]:a[T](),userId:a.id,onMessageOpened:s=>{V.Z[F][R]?b.trackCustomerIoInAppCalloutSuppress(e,{message_id:s.detail.messageId,reason:V.Z[F][R]}):(V.Z.setState({...V.Z[F],isVisible:!0}),b.trackCustomerIoInAppCalloutShow(e,{message_id:s.detail.messageId}))},onMessageDismissed:s=>{V.Z.setState({...V.Z[F],isVisible:!1}),b.trackCustomerIoInAppCalloutDismiss(e,{message_id:s.detail.messageId})},onMessageError:s=>{b.trackCustomerIoInAppCalloutError(e,{message_id:s.detail.messageId})},onMessageAction:s=>{if(s.detail.actionValue.startsWith("relative_url=")){const a=s.detail.actionValue.split("relative_url=")[1];v.navigate({environment:e,url:a})}s.detail.message.dismiss()}}),(0,S.useSprig)({...(0,d.VK)((()=>{const e=k.default[F].isSprigEnabled&&E.Z[F].permission.performance&&K.default.checkGate("sprig")&&s.isDesktop,{[M]:a,[O]:i,currentUserStore:t}=C.default[F],n=null==t?void 0:t.getEmail(),r=a?(0,h.e2)(a):null,o=Boolean(null==i?void 0:i.canAdmin());return{isEnabled:e,userEmail:n,userDaysSinceSignup:r??0,userDomainType:(0,h.JF)(),isSpaceAdmin:o}}),[s]),[T]:a[T](),userId:a.id,spaceId:i,sprigConfig:_.default.sprig}),(0,w.oG)({getLocale:(0,n.useCallback)((()=>r.SP),[]),analyticsSettings:(0,d.VK)((()=>t().pick(k.default[F],["isIntercomEnabled","intercomAppId","intercomUserHash","noIntercomUserId","user_id","user_email"])),[]),onVisibilityChange:(0,n.useCallback)((s=>{A.Z.updateShouldResizeWebview(e,s,"v1"),s?Z.Z.addNamedPopup("intercom"):Z.Z.removeNamedPopup("intercom")}),[e])}),(0,I.Z7)({userId:a.id,spaceId:i,tracesSampleRate:(0,d.VK)((()=>K.default.getConfigKey("sentry","tracesSampleRate-v0")),[]),replaysSessionSampleRate:(0,d.VK)((()=>K.default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),replaysOnErrorSampleRate:(0,d.VK)((()=>K.default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[])}),(0,y.useConfigurePalette)({userId:a.id,spaceId:i,pageType:(0,d.VK)((()=>{var e;return null===(e=C.default[F][P])||void 0===e?void 0:e.getType()}),[])})}function j(){return window.__c={n:"InjectThirdPartyScripts"},U(),null}}}]);