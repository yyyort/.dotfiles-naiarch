"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4471],{29563:(e,n,t)=>{t.r(n),t.d(n,{AiInstructionPagePreferences:()=>ke});var o=t(97464),l=t.n(o),a=t(77094),i=t.n(a),c=t(96486),d=t.n(c),s=t(67294),r=t(480),u=t(81954),h=t(24405),v=t(8848),k=t(59054),p=t(3909),w=t(5366),g=t(97880),S=t(54642),m=t(25464),f=t(78030),y=t(53876),C=t(64921),P=t(31945),Z=t(89074),A=t(82990),I=t(18441),M=t(24457),b=t(30874),F=t(52275),_=t(73063),W=t(78140),T=t(32163),x=t(72495),B=t(93364);const K=t(85).Yzm,L=t(85).dV,U=t(85).PXg,V=t(85).nuv,z=t(85).j7K,N=t(85).nQ3,H=t(85).y79,R=t(85).D7I,E=t(85).PLy,j=t(85).nx5,O=t(85).$Ji,Q=(0,w.defineMessages)({[O]:{id:"SlackSelectWorkspaceAndChannelMenu.backButton.ariaLabel",[j]:"Back to previous step"},selectSlackWorkspace:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackWorkspace",[j]:"Select Slack workspace"},selectSlackChannel:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackChannel",[j]:"Select Slack channel"},remove:{id:"SlackSelectWorkspaceAndChannelMenu.remove",[j]:"Remove"}});function D(e){window.__c={n:"SlackSelectWorkspaceAndChannelMenu"};const{onSelect:n,onClose:t,onRemove:o,channelFilter:a,workspaceFilter:c,onNewSlackAccountAdded:d}=e,r=(0,u.VK)((()=>(0,I.P9)(b.Z[E].state,c)),[c]),[h,k]=(0,s.useState)(1===r.length?r[0]:void 0),g=(0,M.F)({maxHeight:"50vh",width:266});return h?i()(Z.ZP,{channelFilter:a,onClose:t,currentNotificationChannel:void 0,onNewSlackAccountAdded:()=>{k(void 0),null==d||d()},[L]:h,onNotificationChannelSelect:e=>n({notificationChannel:e,[V]:h}),renderMenu:e=>{const n=[...e];return o&&n.push({key:"remove",render:e=>s[R](x.Z,l()({topBorder:!0},e)),items:[{key:"remove",render:e=>s[R](F.Z,l()({},e,{icon:p.Z.trash({width:16,height:16,[U]:2}),title:s[R](w.FormattedMessage,Q.remove),hoveredStyle:{color:v.ZP.red,fill:v.ZP.red}})),action:()=>{o(),t()}}]}),s[R](W.Z,l()({},g,{header:i()(J,{onBack:()=>k(void 0)},void 0,s[R](w.FormattedMessage,Q.selectSlackChannel))}),i()(T.Z,{type:T.i[H],[N]:n,[z]:0}))}}):i()(B.U,{onWorkspaceSelect:e=>{const n=(0,I.jc)(e);(!c||n&&c(n))&&k(e)},workspaceFilter:c,onNewSlackAccountAdded:d,renderMenu:e=>s[R](W.Z,l()({},g,{header:i()(J,{},void 0,s[R](w.FormattedMessage,Q.selectSlackWorkspace))}),i()(T.Z,{type:T.i[H],[N]:e,[z]:0}))})}function J(e){window.__c={n:"MenuHeader"};const{onBack:n,children:t}=e,o=(0,h.yK)((e=>({wrap:{display:"flex",alignItems:"center",margin:8,color:e.mediumTextColor,fontWeight:A.Z.fontWeight.medium,fontSize:A.Z.fontSize.UISmall.desktop,minHeight:22},iconButtonStyle:{[U]:8,marginLeft:-2,height:22},iconButtonIconStyle:{width:16,height:16}})),[]),l=(0,w.useIntl)();return i()("div",{style:o.wrap},void 0,n&&i()(_.Z,{ariaLabel:l[K](Q[O]),icon:p.Z.arrowLeftThick,style:o.iconButtonStyle,iconStyle:o.iconButtonIconStyle,onClick:n}),t)}const X=t(85).ccq,$=t(85).IV,q=t(85).dLQ,G=t(85).D7I,Y=t(85).Hco,ee=t(85).PXg,ne=t(85).EzW,te=t(85).nuv,oe=t(85).JmH,le=t(85).Ql2,ae=t(85).jkI,ie=t(85).H1U,ce=t(85).rps,de=t(85).$bT,se=t(85).EMU,re=t(85).sM5,ue=t(85).Mm1,he=t(85).nx5,ve=(0,w.defineMessages)({slackChannel:{id:"AiInstructionPagePreferences.slackChannel",[he]:"Slack channel"},selectChannel:{id:"AiInstructionPagePreferences.selectChannel",[he]:"Select a channel"},unknownChannel:{id:"AiInstructionPagePreferences.unknownChannel",[he]:"Unknown channel"}});function ke(e){const{store:n}=e;return i()("div",{style:{paddingTop:8,[ue]:8}},void 0,i()("div",{style:{[re]:se,[de]:ce}},void 0,i()(pe,{store:n})))}function pe(e){window.__c={n:"SlackChannelPagePreferenceRow"};const{store:n}=e,t=(0,r.O7)(),o=(0,r.Fy)(),a=(0,h.yK)((e=>({button:{alignSelf:"stretch",[re]:se,[ie]:ae,borderRadius:3,width:"100%",padding:y.sf[f.C.Page].text},selectChannelPlaceholder:{color:e.lightTextColor}})),[]),[{value:c},g]=(0,k.r5)((()=>S.getPageAssistantPreferences(t,{pageId:n.id,[le]:n[oe]()})),[t,n]),Z=(0,s.useCallback)((async e=>{const{[te]:o,notificationChannel:l}=e;await S.setPageAssistantPreferences(t,{pageId:n.id,[le]:n[oe](),[ne]:{type:"set_channel",botId:o.id,channelId:l.id}}),await g()}),[t,n,g]),A=(0,u.VK)((()=>n.canEdit()),[n]),I="success"===(null==c?void 0:c.type)?c.data:void 0,M=d().first((null==I?void 0:I.associatedChannels)??[]),b=(0,s.useCallback)((e=>Boolean(null==I?void 0:I.aiEnabledSlackWorkspaceIds.includes(e))),[I]);return i()(Se,{nameComp:s[G](s.Fragment,null,p.Z.slackLogoUnfilled({height:12,width:12,[ee]:6,fill:v.ZP[Y]}),i()("div",{},void 0,s[G](w.FormattedMessage,ve.slackChannel))),valueComp:i()(P.ZP,{popupType:o[q]?P.Z4.SlideUp:P.Z4.Popup,[X]:m.u.Bottom,alignmentToOrigin:m.v.Start,renderOrigin:e=>s[G](C.Z,l()({style:a.button},e,{disabled:!A}),M?i()(ge,{[$]:M}):i()("div",{style:a.selectChannelPlaceholder},void 0,s[G](w.FormattedMessage,ve.selectChannel))),render:e=>i()(D,{onClose:()=>e.close(),onSelect:Z,channelFilter:we,workspaceFilter:b,onNewSlackAccountAdded:()=>{g()},onRemove:M?async()=>{await S.setPageAssistantPreferences(t,{pageId:n.id,[le]:n[oe](),[ne]:{type:"clear_channel"}}),await g()}:void 0})})})}const we=e=>"public"===e.type;function ge(e){window.__c={n:"ChannelValue"};const{[$]:n}=e,t=(0,h.yK)((()=>({wrap:{[re]:se,[ie]:ae},icon:{height:12,width:12}})),[]),o=(0,w.useIntl)();let l,a;return"unknown"===n.type?(l=p.Z.locked(t.icon),a=o.formatMessage(ve.unknownChannel)):"channel"===n.type?(l=(0,Z.N_)({[$]:n[$],styles:t.icon}),a=n[$].name):(0,g.unreachable)(n),i()("div",{style:t.wrap},void 0,l,"Â ",a)}function Se(e){window.__c={n:"PagePreferenceRow"};const{nameComp:n,valueComp:t}=e,o=(0,r.Fy)(),l=(0,h.yK)((e=>({wrap:{[re]:se,[ue]:4,width:"100%",fontSize:y.z6},name:{[re]:se,[ie]:ae,height:y._w,width:o[q]?120:160,[se]:"none",color:e.mediumTextColor},value:{[re]:se,[ie]:ae,marginLeft:4,flexGrow:1}})),[o]);return i()("div",{style:l.wrap},void 0,i()("div",{style:l.name},void 0,n),i()("div",{style:l.value},void 0,t))}},24457:(e,n,t)=>{t.d(n,{U:()=>h,F:()=>v});var o=t(480),l=t(81954),a=t(87279);const i=t(85).vK9,c=t(85).Mm1,d=t(85)._V5,s=t(85).fsm,r=t(85).I7L,u=t(85).zVT;function h(e){return e.device.isPhone||"actionSheet"===e[u]&&e.device.isTablet?{menuType:a.og.ActionSheet}:{menuType:a.og.Popup,[r]:e[r],[s]:e[s],[d]:e[d],[c]:e[c],width:e.width,[i]:e[i]}}function v(e){const n=(0,o.Fy)();return(0,l.VK)((()=>h({device:n,[r]:null==e?void 0:e[r],[s]:null==e?void 0:e[s],[d]:null==e?void 0:e[d],[c]:null==e?void 0:e[c],width:null==e?void 0:e.width,[i]:null==e?void 0:e[i],[u]:null==e?void 0:e[u]})),[n,null==e?void 0:e[r],null==e?void 0:e[s],null==e?void 0:e[d],null==e?void 0:e[c],null==e?void 0:e.width,null==e?void 0:e[i],null==e?void 0:e[u]])}}}]);